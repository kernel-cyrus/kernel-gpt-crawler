        <!DOCTYPE html>
        <html lang="en">
        <head><title>Support for shingled magnetic recording devices [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/591782/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/591207/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/591782/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>Support for shingled magnetic recording devices</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>This article brought to you by LWN subscribers</b>
<p>
Subscribers to LWN.net made this article &mdash; and everything that
       surrounds it &mdash; possible.  If you appreciate our content, please
       <a href="/Promo/nst-nag3/subscribe">buy a subscription</a> and make the next
       set of articles possible.
</blockquote>
<div class="FeatureByline">
           By <b>Jake Edge</b><br>March 26, 2014</br>
           <hr>
<a href="/Articles/LSFMM2014/">2014 LSFMM Summit</a>
</div>
<p>
One of the plenary sessions on the first day of the Linux Storage,
Filesystem, and Memory Management (LSFMM) Summit concerned Linux support
for shingled magnetic recording (SMR) devices.  These next-generation hard
disks have a number of interesting characteristics that will be challenging
to fully support.  Martin Furuhjelm led a discussion among a few drive vendor
representatives and the assembled kernel developers about the latest
developments in SMR-land.
</p>

<p>
There are three types of SMR drives: device managed, host aware, and host
managed.  Device-managed drives will essentially act just like regular disk drives,
though the 
translation layer in the drive may cause unexpected performance degradation
at times (much like flash devices today).  Existing drivers don't need to
change for device-managed disks.  The discussion concentrated mostly on
host-aware drives (where the host should <i>try</i> to follow the
requirements for shingled regions) and host-managed devices (where the
requirements <i>must</i> be followed).
</p>

<p>
SMR drives will be made up of multiple zones, some that are "normal" and
allow random reads and writes throughout the zone, and some that can only be written
sequentially.  For the sequential zones, there is a write pointer
maintained for each zone that corresponds to where the next write must go.
Depending on the mode, writing elsewhere in the zone will either be an
error (in host-managed devices) or will lead to some kind of remapping of
the write (for host-aware devices).  That remapping may lead to latency
spikes due to garbage collection at some later time.
</p>

<p>
Two new SCSI commands have been added, one to query what zones exist on the
drive and another to reset the write pointer to the 
beginning of a particular zone.  To get the best performance, an SMR-aware driver will
need to only write sequentially to the sequential
zones (that will likely make up most of the disk), but if it fails to do
so, it will be a fatal error only on 
host-managed drives.  For that reason, most of the kernel developers seemed
to think the first SMR drives are likely to be host-aware since those will
work (though perhaps poorly at times) with today's software.
</p>

<p>
The <a href="http://www.t10.org/">T10  technical committee</a> (for SCSI
interface standards) is currently working on finishing the standards for
SMR, so it is important that Linux developers make any concerns they have
with the drafts known soon.  Ted Ts'o noted that the drafts are available
from the T10 site (Furuhjelm recommended looking for "ZBC").  In addition,
more information on SMR and Linux can be found in a <a
href="/Articles/548116/">writeup</a> from last year's LSFMM.
</p>

<p>
There were some questions about the zone reporting functionality, but much
of that is still up in the air at this point.  Currently, all zones are
expected to be the same size, though there is a belief that will change
before the draft is finalized.  There has also been talk of adding a
filtering capability on the query, so that only zones fitting a particular
category (active, full, sequential-only, etc.) would be returned. 
</p>

<p>
The overall sense was that kernel developers are waiting for hardware
before trying to determine how best to support SMR in Linux.  No major
complaints about the draft interface were heard, but until hardware hits, it
will be difficult for anyone to determine where the problems lie.
</p>

<p>
[ Thanks to the Linux Foundation for travel support to attend LSFMM. ]<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Shingled_magnetic_recording">Shingled magnetic recording</a></td></tr>
            <tr><td><a href="/Archives/ConferenceIndex/">Conference</a></td><td><a href="/Archives/ConferenceIndex/#Storage_Filesystem_and_Memory-Management_Summit-2014">Storage, Filesystem, and Memory-Management Summit/2014</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/591782/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor592238"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Support for shingled magnetic recording devices</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 27, 2014 14:20 UTC (Thu)
                               by <b>fuhchee</b> (guest, #40059)
                              [<a href="/Articles/592238/">Link</a>] (24 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
(Can someone save us a bit of googling in explaining why this sort of storage device is worth inventing?)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/592238/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor592242"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Support for shingled magnetic recording devices</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 27, 2014 14:30 UTC (Thu)
                               by <b>jake</b> (editor, #205)
                              [<a href="/Articles/592242/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The short answer is storage density.  There is a bit more in the article from last year's summit linked here: <a rel="nofollow" href="https://lwn.net/Articles/548116/">https://lwn.net/Articles/548116/</a> (scroll down a ways).<br>
<p>
I should probably have said a bit more here, sorry!<br>
<p>
jake<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/592242/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor592243"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Support for shingled magnetic recording devices</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 27, 2014 14:32 UTC (Thu)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/592243/">Link</a>] (18 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
They have much higher storage density, up to 10Tb on one platter (possibly up to 20Tb with other tricks like helium-filled drives).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/592243/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor592303"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Support for shingled magnetic recording devices</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 27, 2014 18:10 UTC (Thu)
                               by <b>k3ninho</b> (subscriber, #50375)
                              [<a href="/Articles/592303/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The reason that some parts of the drive have to be written consecutively is that the magnetic domains are close enough to each other and our write head so large that there is a domino effect on the domains around the one we want to write.<br>
<p>
I recall reading this at Anand Tech:<br>
<a href="http://www.anandtech.com/show/7290/seagate-to-ship-5tb-hdd-in-2014-using-shingled-magnetic-recording">http://www.anandtech.com/show/7290/seagate-to-ship-5tb-hd...</a><br>
<p>
K3n.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/592303/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor592345"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Support for shingled magnetic recording devices</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 27, 2014 22:51 UTC (Thu)
                               by <b>giraffedata</b> (guest, #1954)
                              [<a href="/Articles/592345/">Link</a>] (16 responses)
      </p>
      
      </div>
      </summary>
      <p>
It's 20%.  You can get 25% more areal density, but after accounting for the extra data you have to store to manage it, you get 20% more data on a square millimeter, or on a device, or on a square meter of floor space.  That's in an apples to apples comparison: two disk drives that differ only in that one is shingled and the other not.
<p>
That makes it hard to see how bending over backwards to make applications fit the requirements of a shingled disk (basically, sequential writing) is worth the cost.
<p>
If you could identify systems that exist today and happen to access existing disk drives in the required pattern, then <em>maybe</em> it would make sense to steer those systems toward shingled disks, but even then I suspect the administrative cost of splitting your storage applications into two camps would outweigh the 20% cost savings at the lower levels.
<p>
And if you <em>could</em> arrange to have a lot of sequential writing, unless you also have fast random <em>reading</em>, it would be hard to justify not using tape, for a 500% volume-per-dollar saving.

      
          <div class="CommentReplyButton">
            <form action="/Articles/592345/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor592347"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Support for shingled magnetic recording devices</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 27, 2014 22:55 UTC (Thu)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/592347/">Link</a>] (14 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
shingled drives have the same speed random reading as non-shingled drives<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/592347/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor592348"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Support for shingled magnetic recording devices</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 27, 2014 23:05 UTC (Thu)
                               by <b>giraffedata</b> (guest, #1954)
                              [<a href="/Articles/592348/">Link</a>] (13 responses)
      </p>
      
      </div>
      </summary>
      <blockquote>
shingled drives have the same speed random reading as non-shingled drives
</blockquote>
<p>
Right, so if you can find an application where you have large sequential writing, but fast random reading, that might justify shingled disks.  If instead, you have random writing, you'll want a non-shingled disk, and if instead you have large sequential reading, you'll want tape.

      
          <div class="CommentReplyButton">
            <form action="/Articles/592348/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor592367"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Support for shingled magnetic recording devices</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 28, 2014 5:12 UTC (Fri)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/592367/">Link</a>] (9 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Tapes are waaaay too impractical. Besides, their density is not that great - the best models are just breaking 2Tb barrier per tape.<br>
<p>
And you'd be amazed by the number of applications where you need fast access to immutable (or slowly changing) data. Even better, it's possible to use faster hard drives (or even SSDs) as a frontend for the slow shingled disks.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/592367/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor592461"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Support for shingled magnetic recording devices</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 28, 2014 23:07 UTC (Fri)
                               by <b>giraffedata</b> (guest, #1954)
                              [<a href="/Articles/592461/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      There are many applications for which tape storage is practical.  We know this because people are doing it.
<p>
Many of the applications that could tolerate shingled disk could also tolerate tape.
<p>
Density per tape cartridge isn't really the point.  Cost is the point, and tape is cheaper per terabyte than shingled disk.  Part of the reason for that is the storage density per tape drive is far, far greater than for disk drives.  Data rate per drive is much greater too.
<p>
I don't think I would be amazed at the number of applications that are appropriate for shingled disk, but I also know that there are a lot of applications that aren't, and there are significant storage management costs in using different kinds of disk drives for different kinds of data.  I suspect one would need more than a 20% differential in per-terabyte cost to justify that.

<blockquote>
Even better, it's possible to use faster hard drives (or even SSDs) as a frontend for the slow shingled disks.
</blockquote>
<p>
That's the bending over backwards I was talking about that I doubt is worth it for a 20% improvement.  Have we ever seen people make such a disruptive transition for 20%?  Would people have gone from floppy disks to CD-ROM for 20%?  Or CD-ROM to DVD?  Would people even have gzipped tar files for only 20%?

      
          <div class="CommentReplyButton">
            <form action="/Articles/592461/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor592480"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Support for shingled magnetic recording devices</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 29, 2014 11:25 UTC (Sat)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/592480/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Well, tape is actually NOT cheaper unless you do it in a REALLY big way with tape libraries and robots. Even then it's only marginally cheaper than HDs.<br>
<p>
And shingled disks are not that bad, it's not a completely disruptive transition. Sure, it'll require some additional engineering for the front-end write-through caches but it's not a big deal compared to tape.<br>
<p>
So think about it - would you build a tape library with expensive robots and lots of tape or would you just prefer to buy somewhat slower hard drives?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/592480/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor592496"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Support for shingled magnetic recording devices</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 29, 2014 19:15 UTC (Sat)
                               by <b>giraffedata</b> (guest, #1954)
                              [<a href="/Articles/592496/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <blockquote>
Well, tape is actually NOT cheaper unless you do it in a REALLY big way with tape libraries and robots.
</blockquote>
<p>
Yes, that's what I was talking about.  When I compare the economics of storage technologies, I think of large scale storage.  With tape, there are thousands of cartridges and plenty of robots.
<blockquote>
Even then it's only marginally cheaper than HDs.
</blockquote>
The last figures I saw were 5x cheaper.  That's total cost (not just e.g. purchase price of some box), and assuming a tape-friendly application.  That seems perfectly believable to me, but if you know of a study showing otherwise, do tell.
<p>

<blockquote>
So think about it - would you build a tape library with expensive robots
and lots of tape or would you just prefer to buy somewhat slower hard
drives?
</blockquote>
<p>
I'm not sure what you're comparing here.  Shingled disks aren't somewhat slower.  Used right, they're the same speed as regular drives; used wrong, they're unusably slow.  Since tape applications also work on shingled drives, the question would be, would you use something with 2 minute access time or just use slightly more expensive disk drives.  Only since I'm claiming shingled drives are 4X more expensive than tape, that question is moot.
<p>
By the way, some of my data is on tape.  My company backs up its general purpose filesystem to tape.  It takes me 4 minutes to recover a lost file - 2 minutes to go through the interactive dialog and 2 minutes for the robots and tape drives to do their thing.  Shingled disk would cut that to 2 minutes total.  I can't imagine my company switching unless there is virtually no difference in the storage cost.

      
          <div class="CommentReplyButton">
            <form action="/Articles/592496/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor592500"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Support for shingled magnetic recording devices</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 29, 2014 20:32 UTC (Sat)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/592500/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; The last figures I saw were 5x cheaper. That's total cost (not just e.g. purchase price of some box), and assuming a tape-friendly application. That seems perfectly believable to me, but if you know of a study showing otherwise, do tell. </font><br>
No way. The last time we checked (in 2013) the price difference was about 2x. The major advantage of tape was reliability - tape cartridges themselves contain no sensitive mechanic parts, not price.<br>
<p>
LTO6 tapes are about $40 per tape (2.5Tb) when bought in bulk. Maybe $30 if you are really big. Hard drives are around $50 per 2Tb in bulk.<br>
<p>
And that's without considering the cost of streamers (multiple $$$$), tape robots ($$$$$) and the storage software solution (shockingly, there are no good OpenSource hierarchical storage managers).<br>
<p>
Of course, HDDs need some kind of SAN, but they are cheap these days. AoE/iSCSI solution for 1000 drives capable of 100Gb throughput can be bought for just under $30k and doesn't need any fancy software.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/592500/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor592514"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Support for shingled magnetic recording devices</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 30, 2014 10:22 UTC (Sun)
                               by <b>khim</b> (subscriber, #9252)
                              [<a href="/Articles/592514/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <blockquote><font class="QuotedText">Shingled disks aren't somewhat slower. Used right, they're the same speed as regular drives; used wrong, they're unusably slow.</font></blockquote>

<p>And when used with <a href="http://en.wikipedia.org/wiki/Google_File_System">GFS</a> or <a href="http://hadoop.apache.org/docs/r1.2.1/hdfs_design.html">HDFS</a> which need <b>random</b> read access to it's 64 <b>megabyte</b>chunks and <i>kinda streamlined</i> write access to these chunks (GFS gives you the ability to append-write files, HDFS does not even offer that today) they are fast.</p>

<p>Shingled disks are only on horizon today, but API which is basically custom-taylored for their limitations is more than decade old and there are thousands of companies and millions of drives which are used for such kinds of applications. End of story.</p>


      
          <div class="CommentReplyButton">
            <form action="/Articles/592514/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor592522"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Support for shingled magnetic recording devices</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 30, 2014 16:34 UTC (Sun)
                               by <b>giraffedata</b> (guest, #1954)
                              [<a href="/Articles/592522/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <blockquote>
And when used with GFS or HDFS which need random read access to it's 64 megabyte chunks and kinda streamlined write access to these chunks (GFS gives you the ability to append-write files, HDFS does not even offer that today) they are fast.
</blockquote>
<p>
I think those are two examples of things that would require re-engineering to work with shingled disks, because neither writes in log-structured fashion today.  The only reason I can think of that an existing disk drive application would write in log-structured fashion (fill the drive, or a large segment of it, from beginning to end) is to maximize write speed. But GFS and HDFS assume there is little writing.  HDFS is specifically aimed at fast sequential reading of large files, which means it needs to keep files contiguous on disk, which is not possible with a log structured file system.

      
          <div class="CommentReplyButton">
            <form action="/Articles/592522/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor592551"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Support for shingled magnetic recording devices</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 31, 2014 10:36 UTC (Mon)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/592551/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I think that you wildly underestimate how expensive random writes are today, and how much software works to avoid them<br>
<p>
I've seen a number of packages that have the pattern of having large chunks of data, but new data is not written directly to those large chunks, instead new data is written sequentially to an 'updates' file, and periodically some other job comes along and re-writes the large chunks to include the changes from the updates files, and then deletes the updates files.<br>
<p>
such systems would be perfect for shingled drives, they would just get their chunk sizes and alignments adjusted to match.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/592551/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor592630"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Support for shingled magnetic recording devices</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 1, 2014 11:10 UTC (Tue)
                               by <b>ricwheeler</b> (subscriber, #4980)
                              [<a href="/Articles/592630/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<p>
Not sure where you got the 20% number from, but the better way to think of this is that each kind of disk technology hits a plateau at some point. Further investment in that will not bring improvements in density.<br>
<p>
Moving to SMR is effectively moving from curve for our existing technology that is about to plateau onto a new curve. The delta between the current curve and the new one does start small, but over time will take us to a significant density improvement. The slide shown by one vendor showed that eventual difference being closer to 3-4 times the density but that was more of a hand wave I would guess.<br>
<p>
The drive vendors shied away from specific numbers, but they all agreed that SMR was a new foundation that other technologies will build on (not something that will be replaced in time).<br>
<p>
Reading a crystal ball is hard, but is does seem like a promising technology to invest in :)<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/592630/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor592868"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Support for shingled magnetic recording devices</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 3, 2014 1:56 UTC (Thu)
                               by <b>giraffedata</b> (guest, #1954)
                              [<a href="/Articles/592868/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <blockquote>
Not sure where you got the 20% number from, 
</blockquote>
<p>
There was a paper from Seagate, which I believe is referenced earlier in this thread, that said the technology provided a 25% improvement in areal density.  I read somewhere else that there's a 5% overhead for something else - metadata or guard bands or something, bringing the effective improvement down to 20%.
<p>
If that's just a prototype figure and the technology eventually gets to 3-4 times areal density improvement, that's a different story.

      
          <div class="CommentReplyButton">
            <form action="/Articles/592868/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor592427"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Support for shingled magnetic recording devices</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 28, 2014 17:52 UTC (Fri)
                               by <b>Creideiki</b> (subscriber, #38747)
                              [<a href="/Articles/592427/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Wouldn't that application be "every log-structured file system ever"? New data and metadata is written to the end of the log, and GC-copied to another zone as necessary. Keep a pointer to the currently valid root block in the random-write zone.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/592427/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor592464"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Support for shingled magnetic recording devices</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 28, 2014 23:27 UTC (Fri)
                               by <b>giraffedata</b> (guest, #1954)
                              [<a href="/Articles/592464/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      I don't know what "GC-copied to another zone" is, but ordinary log structured filesystems are ideal applications for shingled disks.  An application that works with a log structured filesystem on a traditional disk drive today could presumably use shingled disk instead for a 20% cost saving.  Not counting any costs associated with having special disk drives provisioned for that application.

      
          <div class="CommentReplyButton">
            <form action="/Articles/592464/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor592478"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Support for shingled magnetic recording devices</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 29, 2014 7:05 UTC (Sat)
                               by <b>Creideiki</b> (subscriber, #38747)
                              [<a href="/Articles/592478/">Link</a>] 
      </p>
      
      </div>
      </summary>
      That's probably my LISP bias showing, assuming everyone is intimately familiar with garbage collection strategies. A <a href="https://en.wikipedia.org/wiki/Garbage_collection_(computer_science)#Copying_vs._mark-and-sweep_vs._mark-and-don.27t-sweep">copying garbage collector</a> partitions storage into two zones, using only one at a time, and when that one gets full copies only the live data to the other one, leaving the garbage behind to get overwritten in the next cycle.
      
          <div class="CommentReplyButton">
            <form action="/Articles/592478/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor592481"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Support for shingled magnetic recording devices</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 29, 2014 12:00 UTC (Sat)
                               by <b>james</b> (subscriber, #1325)
                              [<a href="/Articles/592481/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Reading between the lines, I suspect that these drives are primarily aimed at customers like Facebook and Google, who (obviously) have a lot of historic user data that is basically never touched, but whose users expect to be able to retrieve it in a few seconds.
<p>
These are companies that design their own servers to save money: they'll certainly be interested in minimising the cost of storing that data. They also already identify this data: sending it to special disks is not a big cost for them.
<p>
This market is probably big enough on its own to justify the investment: Facebook and Google will certainly have been consulted on these drives, and may have committed to buying a certain quantity if they meet price, performance, and reliability criteria.
<p>
Then there are systems like CCTV and personal video recorders, which may well run Linux but won't need small random write speeds (and will love the extra capacity).
<p>
The four remaining questions are:<ul><li>are there any other applications where support for SMR disks could be easily added?
<li>would a SMR-based hybrid disk (SMR, with maybe 8 GB of flash in front of it for extra performance) perform better at a lower cost per gigabyte than a conventional disk? If so, conventional hard drives above a certain capacity may die out;
<li>which unscrupulous boxshifters are going to quietly put an "8 TB Hard Drive!" in PCs without warning the customer?
<li>is anyone else pronouncing it "smear"? It seems appropriate.
</ul>

      
          <div class="CommentReplyButton">
            <form action="/Articles/592481/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor592298"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Support for shingled magnetic recording devices</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 27, 2014 18:09 UTC (Thu)
                               by <b>wahern</b> (subscriber, #37304)
                              [<a href="/Articles/592298/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Seagate has a nice description with illuminating diagrams:<br>
<p>
<a href="http://www.seagate.com/tech-insights/breaking-areal-density-barriers-with-seagate-smr-master-ti/">http://www.seagate.com/tech-insights/breaking-areal-densi...</a><br>
<p>
Basically, write heads are larger than read heads, but neither is going to get any smaller anytime soon. To get more data onto the platter, you can squeeze tracks together. The read head can still read each track individually, but the write head has to update multiple tracks at once, and this process can cascade.<br>
<p>
That tracks are overlapped from the perspective of the write head is why it's called "shingled", like on a roof, and not because of a herpes zoster infection--which is the first thought I had :)<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/592298/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor593051"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Support for shingled magnetic recording devices</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 4, 2014 10:50 UTC (Fri)
                               by <b>Jonno</b> (subscriber, #49613)
                              [<a href="/Articles/593051/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; <a href="http://www.seagate.com/tech-insights/breaking-areal-density-barriers-with-seagate-smr-master-ti/">http://www.seagate.com/tech-insights/breaking-areal-densi...</a></font><br>
While the Seagate description of SMR drives in the linked article is good, their comparison to conventional drives are disingenuous at best. No one has manufactured what they calls "Conventional" drives for some time now, writes to adjacent tracks already overlap, though not to the extent that SMR writes do (see diagram below for an illustration).<br>
<p>
<a href="http://jon.severinsson.net/lwn/smr_track_layout.png">http://jon.severinsson.net/lwn/smr_track_layout.png</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/593051/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor605374"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Support for shingled magnetic recording devices</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 14, 2014 16:43 UTC (Mon)
                               by <b>ds...</b> (guest, #97865)
                              [<a href="/Articles/605374/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      It seems to me that it would be better to have a wider read head: if the drive needs to write <tt>n</tt> physical tracks at once, why not read <tt>n</tt> at once too?
      
          <div class="CommentReplyButton">
            <form action="/Articles/605374/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor605378"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Support for shingled magnetic recording devices</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 14, 2014 18:03 UTC (Mon)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/605378/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
it doesn't write n tracks in one pass, what it does is that it overlaps the tracks the way a row of shingles overlaps the row before them. This means that you can't just write wherever you want to, if you want to write a track you have to write the track that partially overlaps that track, the track that partially overlaps, the second track, etc.<br>
<p>
it still takes n rotations of the media to write n tracks<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/605378/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor593003"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Support for shingled magnetic recording devices</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 3, 2014 19:02 UTC (Thu)
                               by <b>redden0t8</b> (guest, #72783)
                              [<a href="/Articles/593003/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
What size of bands/zones are we looking at? 1 MB? 100MB?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/593003/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2014, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
