        <!DOCTYPE html>
        <html lang="en">
        <head><title>What happens to kernel staging-tree code [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/798258/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/798492/">Return to the Front page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/798258/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>What happens to kernel staging-tree code</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>We're bad at marketing</b>
<p>
We can admit it, marketing is not our strong suit. Our strength is
writing the kind of articles that developers, administrators, and
free-software supporters depend on to know what is going on in the
Linux world. Please <a href="/Promo/nsn-bad/subscribe">subscribe today</a> to help us keep doing that, and so
we don’t have to get good at marketing.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>September 5, 2019</br>
           </div>
The staging tree was <a href="/Articles/285594/">added to the kernel</a> in 2008
for the 2.6.28 development cycle as a way to ease the process of
getting substandard device drivers into shape and merged into the
mainline.  It has been followed by controversy for just about as long.  The
recent disagreements over the <a href="/Articles/796687/">EROFS</a> and <a
href="/Articles/797963/">exFAT</a> filesystems have reignited many of the
arguments over whether the staging tree is beneficial to the kernel
community or not.  LWN cannot 
answer that question, but we can look into what has transpired in the
staging tree in its first eleven years to see if there are any conclusions
to be drawn there.
<p>
The core idea behind the staging tree is that it is open to code that does
not live up to the normal standards for inclusion into the kernel.  Once a
driver is added there, it is available to anybody who is brave enough to
try to make use of it, but the real purpose is to allow developers to
improve the code to the point that it is ready to go into the kernel
proper.  It serves as an easy place for new developers to try out simple
changes and, when it works well, it helps the kernel to gain hardware
support that might otherwise languish out-of-tree indefinitely.
<p>
Not everybody agrees that putting code into the staging tree is the best
way to improve it; many of the developers who are concerned about the
proposal to add exFAT to the staging tree argue that it will improve more
quickly outside of staging.  To quote <a
href="/ml/linux-kernel/20190901010721.GG7777@dread.disaster.area/">Dave
Chinner</a>:
<p>
<div class="BigQuote">
	That's stuff that is much more easily done and reviewed by patches
	on a mailing list. You don't need the code in the staging tree to
	get this sort of thing done and, really, having it already merged
	gets in the way of doing major structural change as it cannot be
	rapidly iterated independently of the kernel dev cycle.
</div>
<p>
Greg Kroah-Hartman, the maintainer of the staging tree, <a
href="/ml/linux-kernel/20190902152524.GA4964@kroah.com/">replied</a> that
putting the code there gives it a common place for developers to cooperate
on it.  He acknowledged that it may slow the process somewhat, but argued
that this cost was worth it for groups that wish to cooperate in that way.
<p>
It occurred to your editor that nobody has apparently looked at what fate
has befallen the modules that have entered into staging over the last
eleven years.  A simple bit of scripting and brute-force Git work yielded a
list of when each module entered and left the staging tree.  All that was
left was a huge amount of tedious manual work to figure out <i>why</i> each
module was removed from the staging tree.  It was one of those projects
that, about halfway through,
doesn't seem like such a good idea anymore.  But now
it is done; results follow.
<p>
<h4>Graduations</h4>
<p>
In the end, 247 modules were tracked from their entry into the staging
tree.  Of those, 52 "graduated" from the staging tree into the mainline
kernel — 21% of the total.  Those modules were:

<p>
<blockquote>
<table class="OddEven">
<tr><th align="left">Module</th><th align="left">Entry</th><th align="left">Exit</th><th align="left">Releases</th>
	<th align="left">Fate</th></tr>
<tr><td>altera-stapl</td>
    <td>v3.0</td><td>v3.2</td><td>3</td><td>Graduated</td></tr>
<tr><td>ath6kl</td>
    <td>v2.6.37</td><td>v3.2</td><td>5</td><td>Graduated </td></tr>
<tr><td>batman-adv</td>
    <td>v2.6.33</td><td>v2.6.38</td><td>6</td><td>Graduated </td></tr>
<tr><td>brcm80211</td>
    <td>v2.6.37</td><td>v3.2</td><td>5</td><td>Graduated</td></tr>
<tr><td>ccree</td>
    <td>v4.12</td><td>v4.17</td><td>6</td><td>Graduated</td></tr>
<tr><td>cx25821</td>
    <td>v2.6.32</td><td>v3.2</td><td>10</td><td>Graduated </td></tr>
<tr><td>dwc2</td>
    <td>v3.10</td><td>v3.14</td><td>5</td><td>Graduated</td></tr>
<tr><td>echo</td>
    <td>v2.6.28</td><td>v3.15</td><td>27</td><td>Graduated</td></tr>
<tr><td>et131x</td>
    <td>v2.6.28</td><td>v3.18</td><td>30</td><td>Graduated </td></tr>
<tr><td>fsl-mc</td>
    <td>v4.1</td><td>v4.19</td><td>19</td><td>Graduated </td></tr>
<tr><td>gma500</td>
    <td>v3.0</td><td>v3.3</td><td>4</td><td>Graduated </td></tr>
<tr><td>hv</td>
    <td>v2.6.32</td><td>v3.4</td><td>12</td><td>Graduated </td></tr>
<tr><td>iio/dac</td>
    <td>v2.6.38</td><td>v3.6</td><td>8</td><td>Graduated </td></tr>
<tr><td>iio/imu</td>
    <td>v2.6.35</td><td>v3.9</td><td>14</td><td>Graduated </td></tr>
<tr><td>iio/light</td>
    <td>v2.6.32</td><td>v4.18</td><td>46</td><td>Graduated</td></tr>
<tr><td>iio/magnetometer</td>
    <td>v2.6.35</td><td>v4.6</td><td>31</td><td>Graduated </td></tr>
<tr><td>imx-drm</td>
    <td>v3.7</td><td>v3.19</td><td>13</td><td>Graduated</td></tr>
<tr><td>ipack</td>
    <td>v3.5</td><td>v3.8</td><td>4</td><td>Graduated</td></tr>
<tr><td>line6</td>
    <td>v2.6.30</td><td>v4.0</td><td>30</td><td>Graduated </td></tr>
<tr><td>media/as102</td>
    <td>v3.2</td><td>v3.18</td><td>17</td><td>Graduated</td></tr>
<tr><td>media/cec</td>
    <td>v4.8</td><td>v4.10</td><td>3</td><td>Graduated </td></tr>
<tr><td>media/cxd2099</td>
    <td>v3.2</td><td>v4.17</td><td>36</td><td>Graduated</td></tr>
<tr><td>media/dt3155v4l</td>
    <td>v2.6.35</td><td>v4.2</td><td>27</td><td>Graduated</td></tr>
<tr><td>media/go7007</td>
    <td>v2.6.28</td><td>v3.17</td><td>29</td><td>Graduated</td></tr>
<tr><td>media/mn88472</td>
    <td>v3.19</td><td>v4.8</td><td>10</td><td>Graduated </td></tr>
<tr><td>media/mn88473</td>
    <td>v3.19</td><td>v4.6</td><td>8</td><td>Graduated</td></tr>
<tr><td>media/msi3101</td>
    <td>v3.12</td><td>v3.17</td><td>6</td><td>Graduated</td></tr>
<tr><td>media/pulse8-cec</td>
    <td>v4.8</td><td>v4.10</td><td>3</td><td>Graduated</td></tr>
<tr><td>media/rtl2832u_sdr</td>
    <td>v3.15</td><td>v3.17</td><td>3</td><td>Graduated</td></tr>
<tr><td>media/s5p-cec</td>
    <td>v4.8</td><td>v4.12</td><td>5</td><td>Graduated </td></tr>
<tr><td>media/solo6x10</td>
    <td>v2.6.36</td><td>v3.17</td><td>21</td><td>Graduated</td></tr>
<tr><td>media/st-cec</td>
    <td>v4.9</td><td>v4.12</td><td>4</td><td>Graduated</td></tr>
<tr><td>mei</td>
    <td>v3.0</td><td>v3.5</td><td>6</td><td>Graduated</td></tr>
<tr><td>mrst-touchscreen</td>
    <td>v2.6.35</td><td>v2.6.37</td><td>3</td><td>Graduated </td></tr>
<tr><td>mt7621-gpio</td>
    <td>v4.17</td><td>v4.19</td><td>3</td><td>Graduated</td></tr>
<tr><td>mt7621-spi</td>
    <td>v4.17</td><td>v5.2</td><td>7</td><td>Graduated</td></tr>
<tr><td>omapdrm</td>
    <td>v3.3</td><td>v3.9</td><td>7</td><td>Graduated</td></tr>
<tr><td>panel</td>
    <td>v2.6.29</td><td>v4.6</td><td>37</td><td>Graduated</td></tr>
<tr><td>rar_register</td>
    <td>v2.6.32</td><td>v2.6.36</td><td>5</td><td>Graduated</td></tr>
<tr><td>rdma/hfi1</td>
    <td>v4.3</td><td>v4.7</td><td>5</td><td>Graduated </td></tr>
<tr><td>samsung-laptop</td>
    <td>v2.6.33</td><td>v3.0</td><td>7</td><td> Graduated</td></tr>
<tr><td>sm7xxfb</td>
    <td>v2.6.33</td><td>v4.3</td><td>31</td><td>Graduated </td></tr>
<tr><td>ti-soc-thermal</td>
    <td>v3.6</td><td>v3.11</td><td>6</td><td>Graduated </td></tr>
<tr><td>ti-st</td>
    <td>v2.6.35</td><td>v3.0</td><td>5</td><td>Graduated </td></tr>
<tr><td>tm6000</td>
    <td>v2.6.35</td><td>v3.2</td><td>7</td><td>Graduated </td></tr>
<tr><td>typec</td>
    <td>v4.12</td><td>v4.19</td><td>8</td><td>Graduated </td></tr>
<tr><td>udlfb</td>
    <td>v2.6.31</td><td>v2.6.38</td><td>8</td><td>Graduated </td></tr>
<tr><td>usbip</td>
    <td>v2.6.28</td><td>v3.17</td><td>29</td><td>Graduated </td></tr>
<tr><td>vboxvideo</td>
    <td>v4.13</td><td>v5.2</td><td>11</td><td>Graduated </td></tr>
<tr><td>xillybus</td>
    <td>v3.12</td><td>v3.18</td><td>7</td><td>Graduated </td></tr>
<tr><td>zram</td>
    <td>v2.6.33</td><td>v3.14</td><td>21</td><td>Graduated </td></tr>
<tr><td>zsmalloc</td>
    <td>v3.4</td><td>v3.14</td><td>11</td><td>Graduated </td></tr>
</table>
</blockquote>
<p>
(Lest somebody complain that your editor's math is off, the "releases"
column includes the release in which the module was removed from the
staging tree, since it was a part of that development cycle).
<p>
Some modules clearly pass through staging more quickly than others do.  The
<tt>altera-stapl</tt> driver zipped through in three release cycles.  On
the other hand, the industrial I/O <tt>light</tt> module sat there for 46
development cycles — nearly nine years.  Regardless of how long it took,
though, each of those modules was improved to the point that the
appropriate subsystem maintainer was willing to accept it.
<p>
A 21% success rate may not seem all that high, but that is not the full
story.  A surprising number of staging drivers were deleted because their
functionality was provided by another driver in the mainline.  These
"superseded" modules were:
<p>
<blockquote>
<table class="OddEven">
<tr><th align="left">Module</th><th align="left">Entry</th><th align="left">Exit</th><th align="left">Releases</th>
	<th align="left">Fate</th></tr>

<tr><td>adis16255</td>
    <td>v2.6.35</td><td>v2.6.38</td><td>4</td><td>Superseded</td></tr>
<tr><td>android/switch</td>
    <td>v3.3</td><td>v3.5</td><td>3</td><td>Superseded </td></tr>
<tr><td>at76_usb</td>
    <td>v2.6.28</td><td>v2.6.32</td><td>5</td><td>Superseded </td></tr>
<tr><td>cpc-usb</td>
    <td>v2.6.31</td><td>v2.6.32</td><td>2</td><td>Superseded</td></tr>
<tr><td>cptm1217</td>
    <td>v2.6.38</td><td>v4.0</td><td>22</td><td>Superseded </td></tr>
<tr><td>cs5535_gpio</td>
    <td>v2.6.38</td><td>v3.1</td><td>3</td><td>Superseded </td></tr>
<tr><td>dt3155</td>
    <td>v2.6.34</td><td>v2.6.36</td><td>3</td><td>Superseded </td></tr>
<tr><td>me4000</td>
    <td>v2.6.28</td><td>v2.6.32</td><td>5</td><td>Superseded</td></tr>
<tr><td>media/easycap</td>
    <td>v2.6.36</td><td>v3.7</td><td>11</td><td>Superseded</td></tr>
<tr><td>media/tw686x-kh</td>
    <td>v4.7</td><td>v4.9</td><td>3</td><td>Superseded</td></tr>
<tr><td>meilhaus</td>
    <td>v2.6.29</td><td>v2.6.32</td><td>4</td><td>Superseded</td></tr>
<tr><td>mimio</td>
    <td>v2.6.29</td><td>v2.6.34</td><td>6</td><td>Superseded</td></tr>
<tr><td>msm</td>
    <td>v2.6.35</td><td>v3.1</td><td>6</td><td>Superseded</td></tr>
<tr><td>mt29f_spinand</td>
    <td>v3.13</td><td>v5.0</td><td>29</td><td>Superseded</td></tr>
<tr><td>mt7621-eth</td>
    <td>v4.17</td><td>v5.1</td><td>6</td><td>Superseded</td></tr>
<tr><td>otus</td>
    <td>v2.6.29</td><td>v2.6.37</td><td>9</td><td>Superseded </td></tr>
<tr><td>pata_rdc</td>
    <td>v2.6.31</td><td>v2.6.32</td><td>2</td><td>Superseded</td></tr>
<tr><td>quatech_usb2</td>
    <td>v2.6.32</td><td>v3.5</td><td>13</td><td>Superseded</td></tr>
<tr><td>rt2860</td>
    <td>v2.6.29</td><td>v3.0</td><td>11</td><td>Superseded </td></tr>
<tr><td>rt2870</td>
    <td>v2.6.29</td><td>v3.0</td><td>11</td><td>Superseded </td></tr>
<tr><td>rt3070</td>
    <td>v2.6.30</td><td>v2.6.36</td><td>7</td><td>Superseded</td></tr>
<tr><td>rt3090</td>
    <td>v2.6.32</td><td>v2.6.34</td><td>3</td><td>Superseded </td></tr>
<tr><td>rtl8187se</td>
    <td>v2.6.29</td><td>v3.15</td><td>26</td><td>Superseded </td></tr>
<tr><td>rtl8192ee</td>
    <td>v3.16</td><td>v3.18</td><td>3</td><td>Superseded </td></tr>
<tr><td>rtl8192su</td>
    <td>v2.6.31</td><td>v2.6.37</td><td>7</td><td>Superseded </td></tr>
<tr><td>rtl8723au</td>
    <td>v3.15</td><td>v4.9</td><td>15</td><td>Superseded </td></tr>
<tr><td>rtl8821ae</td>
    <td>v3.14</td><td>v3.18</td><td>5</td><td>Superseded </td></tr>
<tr><td>rtlwifi</td>
    <td>v4.14</td><td>v5.2</td><td>10</td><td>Superseded </td></tr>
<tr><td>rts5139</td>
    <td>v3.2</td><td>v3.16</td><td>15</td><td>Superseded </td></tr>
<tr><td>rts_pstor</td>
    <td>v3.0</td><td>v3.8</td><td>9</td><td>Superseded </td></tr>
<tr><td>serqt_usb</td>
    <td>v2.6.30</td><td>v2.6.31</td><td>2</td><td>Superseded </td></tr>
<tr><td>slicoss</td>
    <td>v2.6.28</td><td>v4.10</td><td>42</td><td>Superseded </td></tr>
<tr><td>ste_rmi4</td>
    <td>v2.6.38</td><td>v4.6</td><td>28</td><td>Superseded </td></tr>
<tr><td>stlc45xx</td>
    <td>v2.6.30</td><td>v2.6.32</td><td>3</td><td>Superseded </td></tr>
<tr><td>uc2322</td>
    <td>v2.6.30</td><td>v2.6.31</td><td>2</td><td>Superseded </td></tr>
<tr><td>usbvideo</td>
    <td>v2.6.38</td><td>v3.0</td><td>2</td><td>Superseded </td></tr>
<tr><td>zcache</td>
    <td>v3.0</td><td>v3.12</td><td>13</td><td>Superseded </td></tr>
</table>
</blockquote>
<p>

That is 37 superseded drivers overall, or 15% of the total.  Whether these
modules should be considered success stories will vary on a case-by-case
basis.  Some staging drivers were sufficiently ugly that they motivated desperate
developers to write something better from scratch; some may say that the
merging of such a driver into staging has achieved its intended goal.  In
other cases, the companies behind the hardware finally started providing
proper drivers; many of the Realtek drivers in the above list fall into
that category.  In yet others, the staging driver may have provided needed
information that enabled a proper driver to be written — also a useful
role.
<p>
In each case, the support provided by these staging drivers did eventually
find its way into the mainline.  How much help was given by putting any given
driver into staging is hard to determine, but the addition of this support
seems like a success for the community overall.

<p>
<h4>Failures</h4>
<p>
Then, there is a long list of drivers that were simply deleted from the
staging tree with no equivalent functionality being provided elsewhere:
<p>
<blockquote>
<table class="OddEven">
<tr><th align="left">Module</th><th align="left">Entry</th><th align="left">Exit</th><th align="left">Releases</th>
	<th align="left">Fate</th></tr>
<tr><td>agnx</td>
    <td>v2.6.29</td><td>v2.6.32</td><td>4</td><td>Failed</td></tr>
<tr><td>altpciechdma</td>
    <td>v2.6.29</td><td>v2.6.34</td><td>6</td><td>Failed</td></tr>
<tr><td>arlan</td>
    <td>v2.6.33</td><td>v2.6.35</td><td>3</td><td> Failed</td></tr>
<tr><td>asus_oled</td>
    <td>v2.6.29</td><td>v3.12</td><td>23</td><td>Failed</td></tr>
<tr><td>b3dfg</td>
    <td>v2.6.30</td><td>v2.6.34</td><td>5</td><td>Failed</td></tr>
<tr><td>bcm</td>
    <td>v2.6.37</td><td>v3.19</td><td>22</td><td>Failed</td></tr>
<tr><td>btmtk_usb</td>
    <td>v3.11</td><td>v3.14</td><td>4</td><td>Failed </td></tr>
<tr><td>ccg</td>
    <td>v3.5</td><td>v3.10</td><td>6</td><td>Failed </td></tr>
<tr><td>ced1401</td>
    <td>v3.7</td><td>v3.17</td><td>11</td><td>Failed </td></tr>
<tr><td>crystalhd</td>
    <td>v2.6.34</td><td>v3.17</td><td>23</td><td>Failed </td></tr>
<tr><td>csr</td>
    <td>v3.6</td><td>v3.11</td><td>6</td><td>Failed </td></tr>
<tr><td>cxt1e1</td>
    <td>v2.6.35</td><td>v3.17</td><td>22</td><td>Failed </td></tr>
<tr><td>dabusb</td>
    <td>v2.6.38</td><td>v3.0</td><td>2</td><td>Failed </td></tr>
<tr><td>dgap</td>
    <td>v3.12</td><td>v4.6</td><td>15</td><td>Failed </td></tr>
<tr><td>dgnc</td>
    <td>v3.12</td><td>v4.20</td><td>29</td><td>Failed </td></tr>
<tr><td>dgrp</td>
    <td>v3.7</td><td>v3.17</td><td>11</td><td>Failed </td></tr>
<tr><td>dream</td>
    <td>v2.6.32</td><td>v2.6.37</td><td>6</td><td>Failed </td></tr>
<tr><td>dst</td>
    <td>v2.6.30</td><td>v2.6.33</td><td>4</td><td>Failed </td></tr>
<tr><td>epl</td>
    <td>v2.6.29</td><td>v2.6.32</td><td>4</td><td>Failed </td></tr>
<tr><td>frontier</td>
    <td>v2.6.29</td><td>v3.17</td><td>28</td><td>Failed </td></tr>
<tr><td>ft1000</td>
    <td>v2.6.37</td><td>v4.4</td><td>27</td><td>Failed</td></tr>
<tr><td>gdm72xx</td>
    <td>v3.5</td><td>v4.6</td><td>22</td><td>Failed </td></tr>
<tr><td>heci</td>
    <td>v2.6.30</td><td>v2.6.32</td><td>3</td><td>Failed </td></tr>
<tr><td>i2o</td>
    <td>v4.0</td><td>v4.2</td><td>3</td><td>Failed </td></tr>
<tr><td>i4l</td>
    <td>v4.6</td><td>v4.11</td><td>6</td><td>Failed </td></tr>
<tr><td>iio/gyro</td>
    <td>v2.6.35</td><td>v4.19</td><td>44</td><td>Failed </td></tr>
<tr><td>iio/trigger</td>
    <td>v2.6.32</td><td>v4.17</td><td>45</td><td>Failed</td></tr>
<tr><td>intel_sst</td>
    <td>v2.6.37</td><td>v3.3</td><td>6</td><td>Failed</td></tr>
<tr><td>keucr</td>
    <td>v2.6.37</td><td>v3.17</td><td>20</td><td>Failed</td></tr>
<tr><td>lttng</td>
    <td>v2.6.33</td><td>v2.6.33</td><td>1</td><td><a href="/Articles/471973/">Failed</a></td></tr>
<tr><td>lustre</td>
    <td>v3.11</td><td>v4.18</td><td>28</td><td><a href="/Articles/756565/">Failed</a></td></tr>
<tr><td>media/atomisp</td>
    <td>v4.12</td><td>v4.18</td><td>7</td><td>Failed</td></tr>
<tr><td>memrar</td>
    <td>v2.6.35</td><td>v3.0</td><td>5</td><td>Failed </td></tr>
<tr><td>mt7621-mmc</td>
    <td>v4.17</td><td>v5.2</td><td>7</td><td>Failed </td></tr>
<tr><td>net</td>
    <td>v3.5</td><td>v3.10</td><td>6</td><td>Failed </td></tr>
<tr><td>netwave</td>
    <td>v2.6.33</td><td>v2.6.35</td><td>3</td><td>Failed</td></tr>
<tr><td>nokia_h4p</td>
    <td>v3.15</td><td>v3.18</td><td>4</td><td>Failed</td></tr>
<tr><td>ozwpan</td>
    <td>v3.4</td><td>v4.3</td><td>20</td><td>Failed</td></tr>
<tr><td>p9auth</td>
    <td>v2.6.30</td><td>v2.6.34</td><td>5</td><td>Failed </td></tr>
<tr><td>phison</td>
    <td>v2.6.30</td><td>v3.17</td><td>27</td><td>Failed </td></tr>
<tr><td>poch</td>
    <td>v2.6.28</td><td>v2.6.35</td><td>8</td><td>Failed </td></tr>
<tr><td>pohmelfs</td>
    <td>v2.6.30</td><td>v3.3</td><td>13</td><td> Failed</td></tr>
<tr><td>quickstart</td>
    <td>v2.6.36</td><td>v3.17</td><td>21</td><td>Failed </td></tr>
<tr><td>rspiusb</td>
    <td>v2.6.29</td><td>v2.6.32</td><td>4</td><td>Failed </td></tr>
<tr><td>sb105x</td>
    <td>v3.8</td><td>v3.15</td><td>8</td><td>Failed </td></tr>
<tr><td>sbe-2t3e3</td>
    <td>v2.6.37</td><td>v3.16</td><td>19</td><td>Failed </td></tr>
<tr><td>sep</td>
    <td>v2.6.38</td><td>v3.17</td><td>19</td><td>Failed </td></tr>
<tr><td>serqt_usb2</td>
    <td>v2.6.31</td><td>v3.17</td><td>26</td><td>Failed </td></tr>
<tr><td>silicom</td>
    <td>v3.7</td><td>v3.17</td><td>11</td><td>Failed </td></tr>
<tr><td>skein</td>
    <td>v3.16</td><td>v4.19</td><td>24</td><td>Failed </td></tr>
<tr><td>spectra</td>
    <td>v2.6.36</td><td>v3.3</td><td>7</td><td>Failed </td></tr>
<tr><td>strip</td>
    <td>v2.6.33</td><td>v2.6.35</td><td>3</td><td>Failed </td></tr>
<tr><td>sxg</td>
    <td>v2.6.28</td><td>v2.6.32</td><td>5</td><td>Failed </td></tr>
<tr><td>tidspbridge</td>
    <td>v2.6.36</td><td>v3.17</td><td>21</td><td>Failed </td></tr>
<tr><td>wavelan</td>
    <td>v2.6.33</td><td>v2.6.35</td><td>3</td><td>Failed </td></tr>
<tr><td>westbridge</td>
    <td>v2.6.37</td><td>v3.1</td><td>4</td><td>Failed </td></tr>
<tr><td>winbond</td>
    <td>v2.6.28</td><td>v3.17</td><td>29</td><td>Failed </td></tr>
<tr><td>wlags49_h2</td>
    <td>v2.6.33</td><td>v3.17</td><td>24</td><td>Failed </td></tr>
<tr><td>wlags49_h25</td>
    <td>v2.6.33</td><td>v3.17</td><td>24</td><td>Failed </td></tr>
<tr><td>xgifb</td>
    <td>v2.6.35</td><td>v5.1</td><td>47</td><td>Failed </td></tr>
</table>
</blockquote>
<p>
That is 60 modules, or 24% of the total.  For most of these modules, the
final commit reads something like "nobody has worked on this for years,
it's time to give up".  A few of them were for hardware that never actually
made it into production, or which was so old and obsolete that nobody could
obtain it to make the driver work properly.  In some cases, as with the
LTTng tracing subsystem, the code was pushed out almost immediately due to
developer opposition to its presence.  At least one was removed due to
licensing issues.
<p>
Regardless of the reason, each of the above modules reflects an effort that
did not eventually bear fruit.  By its nature, the staging tree was never
going to be 100% successful at graduating modules into the mainline;
whether a 24% failure rate is too high will certainly be a matter of
personal opinion.

<p>
<h4>Staging out</h4>
<p>
One role of the staging tree that was not anticipated back in 2008 is to be
a final resting place for code that developers want to get rid of.  If it
appears that nobody is using a particular driver, it can be moved to the
staging tree for a few releases; if nobody complains, it will eventually be
deleted.  These drivers have been "staged out" in that way:
<p>
<blockquote>
<table class="OddEven">
<tr><th align="left">Module</th><th align="left">Entry</th><th align="left">Exit</th><th align="left">Releases</th>
	<th align="left">Fate</th></tr>
<tr><td>autofs</td>
    <td>v2.6.37</td><td>v3.0</td><td>3</td><td>Staged out </td></tr>
<tr><td>cpia</td>
    <td>v2.6.37</td><td>v2.6.38</td><td>2</td><td>Staged out</td></tr>
<tr><td>generic_serial</td>
    <td>v3.0</td><td>v3.1</td><td>2</td><td>Staged out </td></tr>
<tr><td>ipx</td>
    <td>v4.16</td><td>v4.18</td><td>3</td><td>Staged out</td></tr>
<tr><td>irda</td>
    <td>v4.14</td><td>v4.17</td><td>4</td><td>Staged out</td></tr>
<tr><td>media/lirc</td>
    <td>v2.6.36</td><td>v4.16</td><td>40</td><td>Staged out</td></tr>
<tr><td>media/mx2</td>
    <td>v4.6</td><td>v4.8</td><td>3</td><td>Staged out </td></tr>
<tr><td>media/mx3</td>
    <td>v4.6</td><td>v4.8</td><td>3</td><td>Staged out</td></tr>
<tr><td>media/omap1</td>
    <td>v4.6</td><td>v4.8</td><td>3</td><td>Staged out</td></tr>
<tr><td>media/omap24xx</td>
    <td>v3.14</td><td>v3.19</td><td>6</td><td>Staged out </td></tr>
<tr><td>media/parport</td>
    <td>v3.19</td><td>v4.0</td><td>2</td><td>Staged out</td></tr>
<tr><td>media/sn9c102</td>
    <td>v3.14</td><td>v3.17</td><td>4</td><td>Staged out</td></tr>
<tr><td>media/soc_camera</td>
    <td>v5.1</td><td>--</td><td><b>3</b></td><td>Staging out</td></tr>
<tr><td>media/timb</td>
    <td>v4.6</td><td>v4.8</td><td>3</td><td>Staged out</td></tr>
<tr><td>media/tlg2300</td>
    <td>v3.19</td><td>v4.0</td><td>2</td><td>Staged out </td></tr>
<tr><td>media/vino</td>
    <td>v3.19</td><td>v4.0</td><td>2</td><td>Staged out</td></tr>
<tr><td>media/zoran</td>
    <td>v4.18</td><td>v5.2</td><td>6</td><td>Staged out</td></tr>
<tr><td>ncpfs</td>
    <td>v4.16</td><td>v4.18</td><td>3</td><td>Staged out</td></tr>
<tr><td>rdma/amso1100</td>
    <td>v4.3</td><td>v4.5</td><td>3</td><td>Staged out </td></tr>
<tr><td>rdma/ehca</td>
    <td>v4.3</td><td>v4.5</td><td>3</td><td>Staged out </td></tr>
<tr><td>rdma/ipath</td>
    <td>v4.3</td><td>v4.5</td><td>3</td><td>Staged out </td></tr>
<tr><td>se401</td>
    <td>v2.6.38</td><td>v3.0</td><td>2</td><td>Staged out </td></tr>
<tr><td>serial</td>
    <td>v3.2</td><td>v3.5</td><td>4</td><td>Staged out </td></tr>
<tr><td>smbfs</td>
    <td>v2.6.37</td><td>v3.0</td><td>3</td><td>Staged out </td></tr>
<tr><td>stradis</td>
    <td>v2.6.37</td><td>v2.6.38</td><td>2</td><td>Staged out</td></tr>
<tr><td>telephony</td>
    <td>v3.4</td><td>v3.8</td><td>5</td><td>Staged out </td></tr>
<tr><td>tty</td>
    <td>v3.0</td><td>v3.1</td><td>2</td><td>Staged out </td></tr>
</table>
</blockquote>
<p>
Thus, 27 modules — 11% of those to enter the staging tree — came initially
from the rest of the kernel and were eventually deleted.  The removal of
unwanted code is clearly a good thing, so these cases should be seen as
successes for the staging tree.  The unfortunate part, perhaps, is that the
amount of code staged out in this manner is so small; there are doubtless
many other drivers in the kernel that are not actually in use anymore.
<p>
<h4>Hangers-on</h4>
<p>
There remains one last group: the modules that are still in the staging tree as
of the 5.3-rc7 kernel:
<p>
<blockquote>
<table class="OddEven">
<tr><th align="left">Module</th><th align="left">Entry</th><th align="left">Exit</th><th align="left">Releases</th>
	<th align="left">Fate</th></tr>

<tr><td>android/ion</td>
    <td>v3.14</td><td>--</td><td>31</td><td> </td></tr>
<tr><td>android/uapi</td>
    <td>v3.14</td><td>--</td><td>31</td><td> </td></tr>
<tr><td>axis-fifo</td>
    <td>v4.19</td><td>--</td><td>6</td><td> </td></tr>
<tr><td>bcm2835-audio</td>
    <td>v4.11</td><td>--</td><td>11</td><td>(now in vc04_services)</td></tr>
<tr><td>board</td>
    <td>v3.17</td><td>--</td><td>28</td><td> </td></tr>
<tr><td>clocking-wizard</td>
    <td>v3.19</td><td>--</td><td>26</td><td> </td></tr>
<tr><td>comedi</td>
    <td>v2.6.29</td><td>--</td><td>55</td><td> </td></tr>
<tr><td>emxx_udc</td>
    <td>v3.17</td><td>--</td><td>28</td><td> </td></tr>
<tr><td>erofs</td>
    <td>v4.19</td><td>--</td><td>6</td><td> </td></tr>
<tr><td>fbtft</td>
    <td>v4.0</td><td>--</td><td>25</td><td> </td></tr>
<tr><td>fieldbus</td>
    <td>v5.2</td><td>--</td><td>2</td><td> </td></tr>
<tr><td>fsl-dpaa2</td>
    <td>v4.12</td><td>--</td><td>13</td><td> </td></tr>
<tr><td>fwserial</td>
    <td>v3.8</td><td>--</td><td>37</td><td> </td></tr>
<tr><td>gasket</td>
    <td>v4.19</td><td>--</td><td>6</td><td> </td></tr>
<tr><td>gdm724x</td>
    <td>v3.12</td><td>--</td><td>33</td><td> </td></tr>
<tr><td>goldfish</td>
    <td>v3.9</td><td>--</td><td>36</td><td> </td></tr>
<tr><td>greybus</td>
    <td>v4.9</td><td>--</td><td>16</td><td> </td></tr>
<tr><td>gs_fpgaboot</td>
    <td>v3.15</td><td>--</td><td>30</td><td> </td></tr>
<tr><td>iio</td>
    <td>v2.6.32</td><td>--</td><td>52</td><td> </td></tr>
<tr><td>iio/accel</td>
    <td>v2.6.32</td><td>--</td><td>52</td><td> </td></tr>
<tr><td>iio/adc</td>
    <td>v2.6.32</td><td>--</td><td>52</td><td> </td></tr>
<tr><td>iio/addac</td>
    <td>v2.6.38</td><td>--</td><td>46</td><td> </td></tr>
<tr><td>iio/cdc</td>
    <td>v3.2</td><td>--</td><td>43</td><td> </td></tr>
<tr><td>iio/frequency</td>
    <td>v2.6.38</td><td>--</td><td>46</td><td> </td></tr>
<tr><td>iio/impedance-analyzer</td>
    <td>v3.2</td><td>--</td><td>43</td><td> </td></tr>
<tr><td>iio/meter</td>
    <td>v2.6.38</td><td>--</td><td>46</td><td> </td></tr>
<tr><td>iio/resolver</td>
    <td>v2.6.38</td><td>--</td><td>46</td><td> </td></tr>
<tr><td>isdn</td>
    <td>v5.3</td><td>--</td><td>1</td><td> </td></tr>
<tr><td>kpc2000</td>
    <td>v5.2</td><td>--</td><td>2</td><td> </td></tr>
<tr><td>ks7010</td>
    <td>v4.8</td><td>--</td><td>17</td><td> </td></tr>
<tr><td>media/allegro-dvt</td>
    <td>v5.3</td><td>--</td><td>1</td><td> </td></tr>
<tr><td>media/bcm2048</td>
    <td>v3.14</td><td>--</td><td>31</td><td> </td></tr>
<tr><td>media/davinci_vpfe</td>
    <td>v3.9</td><td>--</td><td>36</td><td> </td></tr>
<tr><td>media/hantro</td>
    <td>v5.0</td><td>--</td><td>4</td><td> </td></tr>
<tr><td>media/imx</td>
    <td>v4.13</td><td>--</td><td>12</td><td> </td></tr>
<tr><td>media/imx074</td>
    <td>v4.17</td><td>--</td><td>8</td><td> </td></tr>
<tr><td>media/ipu3</td>
    <td>v5.0</td><td>--</td><td>4</td><td> </td></tr>
<tr><td>media/meson</td>
    <td>v5.3</td><td>--</td><td>1</td><td> </td></tr>
<tr><td>media/mt9t031</td>
    <td>v4.17</td><td>--</td><td>8</td><td> </td></tr>
<tr><td>media/omap4iss</td>
    <td>v3.14</td><td>--</td><td>31</td><td> </td></tr>
<tr><td>media/platform</td>
    <td>v4.11</td><td>--</td><td>15</td><td>(now in vc04_services)</td></tr>
<tr><td>media/sunxi</td>
    <td>v4.20</td><td>--</td><td>5</td><td> </td></tr>
<tr><td>media/tegra-vde</td>
    <td>v4.16</td><td>--</td><td>9</td><td> </td></tr>
<tr><td>most</td>
    <td>v4.3</td><td>--</td><td>22</td><td> </td></tr>
<tr><td>mt7621-dma</td>
    <td>v4.17</td><td>--</td><td>8</td><td> </td></tr>
<tr><td>mt7621-dts</td>
    <td>v4.17</td><td>--</td><td>8</td><td> </td></tr>
<tr><td>mt7621-pci</td>
    <td>v4.17</td><td>--</td><td>8</td><td> </td></tr>
<tr><td>mt7621-pci-phy</td>
    <td>v5.1</td><td>--</td><td>3</td><td> </td></tr>
<tr><td>mt7621-pinctrl</td>
    <td>v4.17</td><td>--</td><td>8</td><td> </td></tr>
<tr><td>netlogic</td>
    <td>v3.10</td><td>--</td><td>35</td><td> </td></tr>
<tr><td>nvec</td>
    <td>v3.0</td><td>--</td><td>45</td><td> </td></tr>
<tr><td>octeon</td>
    <td>v2.6.31</td><td>--</td><td>53</td><td> </td></tr>
<tr><td>octeon-usb</td>
    <td>v3.11</td><td>--</td><td>34</td><td> </td></tr>
<tr><td>olpc_dcon</td>
    <td>v2.6.37</td><td>--</td><td>47</td><td> </td></tr>
<tr><td>pi433</td>
    <td>v4.14</td><td>--</td><td>11</td><td> </td></tr>
<tr><td>ralink-gdma</td>
    <td>v5.1</td><td>--</td><td>3</td><td> </td></tr>
<tr><td>rtl8188eu</td>
    <td>v3.12</td><td>--</td><td>33</td><td> </td></tr>
<tr><td>rtl8192e</td>
    <td>v2.6.32</td><td>--</td><td>52</td><td> </td></tr>
<tr><td>rtl8192u</td>
    <td>v2.6.33</td><td>--</td><td>51</td><td> </td></tr>
<tr><td>rtl8712</td>
    <td>v2.6.37</td><td>--</td><td>47</td><td> </td></tr>
<tr><td>rtl8723bs</td>
    <td>v4.12</td><td>--</td><td>13</td><td> </td></tr>
<tr><td>rts5208</td>
    <td>v3.14</td><td>--</td><td>31</td><td> </td></tr>
<tr><td>sm750fb</td>
    <td>v4.1</td><td>--</td><td>24</td><td> </td></tr>
<tr><td>speakup</td>
    <td>v2.6.37</td><td>--</td><td>47</td><td> </td></tr>
<tr><td>unisys</td>
    <td>v3.15</td><td>--</td><td>30</td><td> </td></tr>
<tr><td>vc04_services</td>
    <td>v4.9</td><td>--</td><td>16</td><td> </td></tr>
<tr><td>vme</td>
    <td>v2.6.32</td><td>--</td><td>52</td><td> </td></tr>
<tr><td>vt6655</td>
    <td>v2.6.31</td><td>--</td><td>53</td><td> </td></tr>
<tr><td>vt6656</td>
    <td>v2.6.32</td><td>--</td><td>52</td><td> </td></tr>
<tr><td>wilc1000</td>
    <td>v4.2</td><td>--</td><td>23</td><td> </td></tr>
<tr><td>wlan-ng</td>
    <td>v2.6.28</td><td>--</td><td>56</td><td> </td></tr>
</table>
</blockquote>
<p>

Thus, of the 247 modules to enter staging, 71 (29%) have yet to leave.  The
undisputed king of the long-term staging residents is the <tt>comedi</tt>
subsystem.  Since it was added in November 2008, this module has been the
target of 8,673 of the 53,512 commits to the staging tree over its history
— 16% of all activity in <tt>drivers/staging</tt>.  There are quite a few
other modules that have lived in the staging tree for a long time, though.
If there was ever intended to be a time limit for residency in staging, it
does not appear to have been enforced.

<p>
Some of those are close to being ready for graduation; in the above-linked
message, Kroah-Hartman named <tt>comedi</tt>, <tt>greybus</tt>, and
<tt>speakup</tt> as needing "<q>just a bit more work</q>".  The
Greybus drivers, in fact, are currently queued to move in 5.4.  Others are
certainly in need of deletion: "<q>Yes, there is code in there that
probably should be dropped now as I haven't done a sweep in a few
years</q>".  And others will probably hang on for a while yet.
<p>
<h4>Exit stage right</h4>
<p>
To summarize, here are the conclusions on what happened to modules that
were added to staging:
<p>
<blockquote>
<table class="OddEven">
<tr><th align="left">Fate</th><th>Count</th><th>Percent</th></tr>
<tr><td>Graduated</td><td align="right">52</td><td align="right">21%</td></tr>
<tr><td>Superseded</td><td align="right">37</td><td align="right">15%</td></tr>
<tr><td>Failed</td><td align="right">60</td><td align="right">24%</td></tr>
<tr><td>Staged out</td><td align="right">27</td><td align="right">11%</td></tr>
<tr><td>Still present</td><td align="right">71</td><td align="right">29%</td></tr>
</table>
</blockquote>
<p>
None of this is likely to answer the question of whether the staging tree
is a good thing for kernel development or not; as is so often the case, it
has almost certainly been helpful for some modules and less so for others.
What is clear is that a lot of code has passed through this part of the
kernel tree and has helped to shape the mainline kernel as a whole.  Like
it or not, the staging tree is a part of the kernel development process;
its role may evolve in response to pressure from developers, but it seems
likely to be a significant part of our process for some time to come.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Staging_tree">Staging tree</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/798258/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor798499"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What happens to kernel staging-tree code</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 5, 2019 16:03 UTC (Thu)
                               by <b>pebolle</b> (guest, #35204)
                              [<a href="/Articles/798499/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Have there been modules that were staged out of the kernel and, after a few releases, did make it back into the kernel proper? If so, how many?<br>
<p>
(My feeling is that staging out only adds a delay - of a release or two - to the removal of modules. I've never been motivated enough to actually research this.<br>
<p>
But if my feeling is correct staging out might as well be skipped.)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/798499/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor798502"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Staging back in</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 5, 2019 16:18 UTC (Thu)
                               by <b>corbet</b> (editor, #1)
                              [<a href="/Articles/798502/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      I didn't find any examples of staged-out modules being rescued.  That doesn't mean I didn't miss one; things were looking pretty blurry by the time I got to the end of that list.  But I suspect it has never happened.
<p>
The staging-out process still makes sense, though; one never knows when somebody will want something.
      
          <div class="CommentReplyButton">
            <form action="/Articles/798502/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor798740"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Staging back in</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 9, 2019 7:06 UTC (Mon)
                               by <b>mchehab</b> (subscriber, #41156)
                              [<a href="/Articles/798740/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; I didn't find any examples of staged-out modules being rescued.</font><br>
<p>
I guess we did that on media. This is not easy to track, as rescuing a staging-out driver usually starts by copying it with some other name, then convert the driver to use the current uAPI/kAPI. The new driver is added to the original subsystem, and, usually after one or two releases, the past code at staging gets removed.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/798740/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor799507"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Staging back in</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 17, 2019 14:50 UTC (Tue)
                               by <b>BenHutchings</b> (subscriber, #37955)
                              [<a href="/Articles/799507/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
sm7xxfb was added to staging in 2.6.33 (as sm7xx), removed in 3.15, re-added in 4.0, then finally superseded by sm712fb in 4.3.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/799507/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor798508"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What happens to kernel staging-tree code</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 5, 2019 16:59 UTC (Thu)
                               by <b>pm215</b> (subscriber, #98099)
                              [<a href="/Articles/798508/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I suspect that even if every staging-out leads to removal the process might be useful in making it psychologically easier to remove things...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/798508/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor798548"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What happens to kernel staging-tree code</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 5, 2019 23:37 UTC (Thu)
                               by <b>mtaht</b> (subscriber, #11087)
                              [<a href="/Articles/798548/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I didn't know the tranzport driver had been removed finally. The hardware itself was pretty buggy, the only user of the code ardour, the number of ardour users, small. The author - and probably nearly the only user - was me - I'd reversed engineered the interface and it was my first usb device driver and I learned a lot about how usb worked by writing it. <br>
<p>
But: I lost the hardware and never replaced it with anything else, and later moved onto mac hw for audio work.<br>
<p>
I'm glad it's gone from staging, it was embarrassing to look at it or me try to fix it further. I'd moved it into the kernel from libusb because of how many interrupts it could generate (and seemingly lose) - but after that I learned the hw itself was buggy. I would so love to see an equivalent remote interface exist for DAWs with physical buttons, decent potentiometer and *reliable* wireless interface. But the world has gone phone for these tasks.<br>
<p>
It was  a really cool concept though - physical buttons, and I could walk outside and hang with the band while doing some basic mixdown stuff after a session instead of being stuck in the studio. Spinning the knobs or seeing buttons not work - not because my driver sucked, but because the wireless<br>
was unreliable - made me a bit crazy though.<br>
<p>
"Staging" in this case was very much the right thing, but I guess I should<br>
have pushed for removal long ago. <br>
<p>
RIP, tranzport. You were a great learning experience. I hope someone tries again to make something similar. <br>
<p>
<a href="http://www.frontierdesign.com/Products/TranzPort">http://www.frontierdesign.com/Products/TranzPort</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/798548/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor798734"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What happens to kernel staging-tree code</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 9, 2019 6:36 UTC (Mon)
                               by <b>matthias</b> (subscriber, #94967)
                              [<a href="/Articles/798734/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Look at the lirc driver. It has been staged out after 40 releases. If there would have been no users at the time the driver went to staging, this time should have been much shorter. Look at the numbers for all the other drivers that have been staged out. Removing it directly may have hurt some people.<br>
<p>
For drivers for which an alternative exists (like smbfs) moving a driver to stage out gives the remaining users a bit of time to migrate to the newer driver (like cifs).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/798734/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor798738"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What happens to kernel staging-tree code</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 9, 2019 6:59 UTC (Mon)
                               by <b>mchehab</b> (subscriber, #41156)
                              [<a href="/Articles/798738/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Look at the lirc driver. It has been staged out after 40 releases. </font><br>
<p>
Not true. LIRC drivers were almost all graduated. I just posted a more detailed comment about that.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/798738/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor798742"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What happens to kernel staging-tree code</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 9, 2019 7:29 UTC (Mon)
                               by <b>matthias</b> (subscriber, #94967)
                              [<a href="/Articles/798742/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Thanks for the clarification. Because of the changed name, I guessed (wrongly) that it has been superseded and therefore the old driver been staged out.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/798742/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor798517"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What happens to kernel staging-tree code</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 5, 2019 17:31 UTC (Thu)
                               by <b>estansvik</b> (subscriber, #127963)
                              [<a href="/Articles/798517/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
According to the table, wlan-ng leads comedi in staging residency by one release. But perhaps comedi was brought up as the king due to its commit count?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/798517/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor798525"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What happens to kernel staging-tree code</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 5, 2019 19:18 UTC (Thu)
                               by <b>Villemoes</b> (subscriber, #91911)
                              [<a href="/Articles/798525/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Of the 71 currently in staging, how many are "heading in" and how many are "heading out"?<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/798525/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor798540"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What happens to kernel staging-tree code</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 5, 2019 21:38 UTC (Thu)
                               by <b>geert</b> (subscriber, #98403)
                              [<a href="/Articles/798540/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The amount of "work" done on the comedi driver is huge.  It's the same order of number of commits as a full kernel release.<br>
Compared to e.g. the various architectures under arch/, only 5 (arm, arm64, mips, powerpc, and x86) were touched by more commits than the comedi driver (since the adoption of git).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/798540/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor798574"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What happens to kernel staging-tree code</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 6, 2019 11:50 UTC (Fri)
                               by <b>error27</b> (subscriber, #8346)
                              [<a href="/Articles/798574/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The comedi work was legit fixes.  There are just a ton of small drivers in comedi.  As far as I'm concerned comedi can be moved out of staging at any point.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/798574/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor798557"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What happens to kernel staging-tree code</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 6, 2019 4:05 UTC (Fri)
                               by <b>neilbrown</b> (subscriber, #359)
                              [<a href="/Articles/798557/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Just FYI, I don't consider mt7621-mmc to have been a failure.<br>
While it was in drivers/staging, it meant that a gnubee kernel could be built (very nearly) from mainline code.<br>
By the time it was removed, I hard read enough of other efforts to make the mainline driver work on this hardware, that I was able to update drivers/mmc/host/mtk-sd.c  to support the mt7621 hardware.<br>
So soon after mt7621-mmc was removed, it was Superceded.<br>
<p>
My main point was that while it didn't achieve the goal of "graduatiing", it did achieve the goal of "keeping the hardware working until a better solution came along".<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/798557/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor798559"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What happens to kernel staging-tree iio code</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 6, 2019 6:40 UTC (Fri)
                               by <b>merge</b> (subscriber, #65339)
                              [<a href="/Articles/798559/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I guess for iio, you would've needed to look down into the directories. iio/gyro and iio/trigger are not failures; iio/accel itself is no hanger-on - one or more iio accel drivers might be, and so on. all _subdirectories_ of iio hold the different drivers or frameworks that then could be a failure (I think little to no actually are).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/798559/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor798561"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What happens to kernel staging-tree iio code</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 6, 2019 7:05 UTC (Fri)
                               by <b>jic23</b> (subscriber, #56049)
                              [<a href="/Articles/798561/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Glad someone else got to that first. Almost every IIO directory had multiple drivers.<br>
<p>
In the presentation I gave at ELCE 2019 on IIO's first 10 years there is a graph showing totals in staging for each release.<br>
<p>
<a href="https://elinux.org/images/5/53/10-Years-of-the-Industrial-IO-Kernel-Subsystem-Jonathan-Cameron-Huawei.pdf">https://elinux.org/images/5/53/10-Years-of-the-Industrial...</a><br>
<p>
There were around 50 drivers in there at the peak of which most graduated. A few were dropped due to obsolete hardware and a few are still a work in progress, including the really odd hardware corner cases where a lot of thought is needed on interfaces. <br>
<p>
Staging worked great for us at the subsystem level as we could do major rework and deal with increasing hardware support as we stabilised things.  The legacy is taking longer to clear than ideal, but has the added advantage of providing fertile ground for people to move beyond checkpatch fixes. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/798561/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor798567"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What happens to kernel staging-tree code</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 6, 2019 8:33 UTC (Fri)
                               by <b>sthibaul</b> (<b>&#x272D; supporter &#x272D;</b>, #54477)
                              [<a href="/Articles/798567/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Thanks for having done such boring work! It really sheds some light on what happened in staging.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/798567/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor798708"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What happens to kernel staging-tree code</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 8, 2019 2:49 UTC (Sun)
                               by <b>gus3</b> (guest, #61103)
                              [<a href="/Articles/798708/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Seconded. @corbet, don't worry if you don't see how the work is relevant. I'm glad to see that you followed through on your intention. Someone else may find your work valuable, or not, as fate determines.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/798708/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor799201"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What happens to kernel staging-tree code</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 14, 2019 21:36 UTC (Sat)
                               by <b>a9db0</b> (subscriber, #2181)
                              [<a href="/Articles/799201/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Agreed.  This had to have been a ton of not very fun work.  Thanks for slogging through all of it.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/799201/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor798573"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What happens to kernel staging-tree code</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 6, 2019 11:31 UTC (Fri)
                               by <b>sudip</b> (subscriber, #111087)
                              [<a href="/Articles/798573/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
fyi. sm7xxfb was removed from staging at v3.15 by dc93c85235ef ("staging: sm7xxfb: remove driver") and then re-added at v4.0 by a8e8f89dadee ("Revert "staging: sm7xxfb: remove driver"") and then finally graduated at v4.3.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/798573/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor798736"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LIRC staging drivers</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 9, 2019 6:56 UTC (Mon)
                               by <b>mchehab</b> (subscriber, #41156)
                              [<a href="/Articles/798736/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Jon,<br>
<p>
Good article!<br>
<p>
There's a mistake there with regarding to media/lirc. It is understandable, as the content of the media/lirc dir were dozens of independent remote controller drivers. If you want to track what happened there, you need to look at each driver independently.<br>
<p>
For me, LIRC is actually a good example about how well staging worked at the subsystem.<br>
<p>
When we added LIRC API support at the Remote Controller core, the original OOT drivers were added to staging, in order for them to be migrated or for their functionality to be replaced by another driver using the new RC core.<br>
<p>
Almost all LIRC drivers got graduated. A few ones had their functionality added to other drivers and got removed - after successfully accomplishing their mission.<br>
<p>
For the vast majority of the code, the driver itself was modified, and stored with another name under media/rc. The original driver was kept at media (usually for one additional release), in order to give some time for for users to be able to test the modified one.<br>
<p>
I vaguely remember that just two drivers got removed: one for a really old device that nobody was able to find the hardware - nor we were able to find anyone with the hardware for testing. Nobody ever complained about its removal (and I can't even rename the name of it).<br>
<p>
The second one was a driver for a custom-made circuit board, where the user himself would need to manufacture - and with was based at the IBM XT parallel port. At the time it got dropped, one would need to visit a museum in order to find a PC with a parallel port - and the cost to build the hardware would likely be higher than just buying an IR USB hardware.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/798736/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor798741"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What happens to kernel staging-tree code</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 9, 2019 7:21 UTC (Mon)
                               by <b>mcr</b> (subscriber, #99374)
                              [<a href="/Articles/798741/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Hi, awesome work. Clearly your file needs to go into staging as a record, to be further updated.<br>
I think staging is a good thing.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/798741/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor799144"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What happens to kernel staging-tree code</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 13, 2019 18:05 UTC (Fri)
                               by <b>andy_shev</b> (subscriber, #75870)
                              [<a href="/Articles/799144/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
intel_sst has been superseded by sound/soc/intel/atom.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/799144/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor799510"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What happens to kernel staging-tree code</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 17, 2019 14:52 UTC (Tue)
                               by <b>BenHutchings</b> (subscriber, #37955)
                              [<a href="/Articles/799510/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I think i4l and i2o should be counted as "staged out", not "failures".<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/799510/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2019, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
