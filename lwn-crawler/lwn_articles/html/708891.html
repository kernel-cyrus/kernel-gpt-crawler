        <!DOCTYPE html>
        <html lang="en">
        <head><title>AMD's Display Core difficulties [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/708891/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/708474/">Return to the Front page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/708891/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>AMD's Display Core difficulties</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Benefits for LWN subscribers</b>
<p>
The primary benefit from <a href="/Promo/nst-nag5/subscribe">subscribing to LWN</a>
       is helping to keep us publishing, but, beyond that, subscribers get
       immediate access to all site content and access to a number of extra
       site features.  Please sign up today!
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>December 13, 2016</br>
           </div>
Back in 2007, the <a href="/Articles/248227/">announcement</a> that AMD
intended to reverse its longstanding position and create an upstream driver
for its graphics processors was joyfully received by Linux users
worldwide.  As 2017 approaches, an attempt by AMD to merge a driver for an
upcoming graphics chip has been rejected by the kernel's graphics subsystem
maintainer — a decision that engendered rather less joy.  A look at this
discussion reveals a pattern seen many times before; the 
positions and decisions taken can seem arbitrary to the wider world but they
are not without their reasons and will, hopefully, lead to a better kernel
in the long run.
<p>
<h4>A quick timeline</h4>
<p>
Back in February, Harry Wentland posted <a href="/Articles/675670/">a patch
set</a> adding the new "DAL display driver" to the AMD GPU subsystem; this
driver, he said, would "<q>allow us going forward to bring display
features on the open amdgpu driver (mostly) on par with the Catalyst
driver.</q>" It was not a small patch, adding 279 new source files
containing nearly 94,000 lines of code.  That code saw little public
discussion and was never merged, though it has become clear that some
private discussion took place. 
<p>
In March, Alex Deucher <a href="/Articles/708895/">proposed that DAL should
be merged</a>, saying that it was to be the core of the new display stack;
his goal was to get it into the 4.7 release.  Graphics maintainer Dave
Airlie <a href="/Articles/708896/">made it clear</a> that this was not
going to happen, saying that: "<q>I think people are focusing on the
minor comments and concerns and possibly deliberately ignoring the bigger
concern that this code base is pretty much unmergeable as-is.</q>"
His biggest complaint had to do with the overall design, which involved a
lot of abstraction code that tried to hide the details of working with the
kernel from the rest of the code.
Others echoed his concerns and, indeed, the code was not merged for 4.7 or
any other kernel released since then.
<p>
The current chapter began on December 7, when Wentland posted <a
href="/Articles/708894/">an RFC note</a> saying that this code (now going
by the name "display core") was needed to support the next generation GPU
coming out of AMD.  The company, he said, has based all of its efforts on
the display core code, 
using it as the foundation for all of its quality-assurance work, its OEM
preloads, and more.  And, he noted: "<q>DC behavior mirrors what we do
for other OSes</q>".  That last point is important; the display core
code helps the company maintain the driver across multiple operating
systems by hiding a lot of system-specific interfaces.
<p>
This time, Daniel Vetter <a href="/Articles/708901/">complained about the
abstraction layers</a> in the code and described why they were not
acceptable in the mainline kernel.  Airlie <a
href="/Articles/708902/">responded more strongly</a>, saying that this code
would not be merged in its current form: 
<p>
<div class="BigQuote">
	Given the choice between maintaining Linus' trust that I won't
	merge 100,000 lines of abstracted HAL code and merging 100,000
	lines of abstracted HAL code I'll give you one guess where my
	loyalties lie.
</div>
<p>
As one might expect, a certain amount of back-and-forth resulted; the AMD
developers were not pleased by this response.  It can only have felt like a
slap to a group of developers who were trying to do the right thing by
getting support for their hardware into the mainline kernel.  Even so, they
stayed with the discussion, which remained almost entirely civil, and
which, in the end, seems to be leading to a viable path forward.

<p>
<h4>The trouble with midlayers</h4>
<p>
There are a number of complaints with the AMD driver code; it is not often
that tens of thousands of lines of new code are free of problems.  But the
biggest issue has to do with the midlayer architecture.  A midlayer, as its
name suggests, sits between two other layers of code, typically with the
purpose of hiding those outer layers from each other.  In this case, for
example, the display core code tries to hide the details of low-level
hardware access, allowing the upper-layer driver to run on any operating
system.
<p>
The kernel community has a long experience with midlayers, and that
experience is generally seen as being bad.  For an extensive discussion of
the midlayer pattern in the kernel, <a href="/Articles/336262/">this 2009
article from Neil Brown</a> is recommended reading.  A midlayer
architecture can bring a whole raft of long-term maintainability issues in
general; the graphics developers are also concerned about some more
specific issues.
<p>
The idea behind AMD's midlayer is to abstract out the Linux-specific details
in the driver.   That may be desirable for somebody trying to maintain a
cross-platform driver; it also helps the AMD developers get the Linux
driver working before the hardware engineers move on to the next product
and stop answering questions.  But code structured in this way is painful
for people trying to maintain the 
Linux kernel.  Understanding higher-level code becomes harder when that
code does not follow the normal patterns used by graphics drivers; that can
be hard for maintenance in general, but it can become a severe impediment
to any sort of refactoring work.  As Airlie <a href="/Articles/708909/">put
it</a>:
<p>
<div class="BigQuote">
	If I'd given in and merged every vendor coded driver as-is we'd
	never have progressed to having atomic modesetting, there would
	have been too many vendor HALs and abstractions that would have
	blocked forward progression. Merging one HAL or abstraction is
	going to cause pain, but setting a precedent to merge more would be
	just downright stupid maintainership.
</div>
<p>

A hardware abstraction layer must be
maintained to meet the needs of code for other operating systems — code
that the Linux kernel developers cannot see (and probably don't want to).  In
effect, that means that nobody outside of the originating company can touch
the midlayer code, making community maintenance impossible.  If members of
the community do try to patch the midlayer — often to remove code that,
from the kernel's perspective, is redundant — they will run afoul of the
driver maintainers, who may well try to block the work.  If they are
successful in doing so, the result is code in the community kernel that is
essentially off-limits for community developers.
<p>
Functionality placed in a midlayer, rather than in common code, has a high
likelihood of developing its own behavioral quirks.  As a result, drivers
using the midlayer will behave differently from other drivers for similar
hardware, often in subtle ways.  That creates pain for application
developers, who no longer have a single driver interface to work with.
<p>
A midlayer will also tend to isolate its developers from the common
core code.  The midlayer will be fixed and improved, often to work around
shortcomings in the common layer, rather than improving the common layer
itself.  Kernel developers would rather see that effort going into the
common code, where it benefits all users rather than one driver in
particular.  Developers who work on this support code have a say in the
direction it takes, while developers who work on a midlayer generally do
not.  So things tend to diverge further over time, with the driver
developers feeling that the core is not developed with their needs in mind.
<p>
Finally, midlayer-based code has a certain tendency to get stuck on older
kernel versions; indeed, the current display core code is still based on
4.7.  That makes it hard to maintain as the kernel goes forward.  In this
case, Vetter <a href="/Articles/708998/">summarized</a> this aspect of the
problem by saying: "<q>I think you don't just need to demidlayer DAL/DC,
you also need to demidlayer your development process.</q>"  Code
intended for the mainline needs to be developed and tested against the
current mainline, or it will inevitably fall behind.
<p>
<h4>The way forward</h4>
<p>
Regardless of how one views the odds of seeing the Year of the Linux
Desktop in the near future, it seems certain that those odds can only be
worse in the lack of AMD GPU drivers.  The blocking of such a driver —
otherwise on track to be in mainline before the hardware ships — thus looks
like a step backward for a subsystem that has already struggled to gain
support for current hardware.
<p>
Chances are, though, that this standoff will be resolved more quickly than
people might expect.  The AMD developers were not unaware of the problems
and, it seems, not unwilling to fix them.  Deucher <a
href="/Articles/708911/">said</a>:
<p>
<div class="BigQuote">
	 What I really wanted to say was that this was an RFC, basically
	 saying this is how far we've come, this is what we still need to
	 do, and here's what we'd like to do.  This was not a request to
	 merge now or an ultimatum.
</div>
<p>
Some work has indeed been done since the early posting of this patch set;
and, it is said, about one-third of the midlayer code is gone.  Vetter <a
href="/Articles/709000/">made it clear</a> that this work had been seen and
appreciated:
<p>
<div class="BigQuote">
	I guess things went a bit sideways by me and Dave only talking
	about the midlayer, so let me first state that the DC stuff has
	massively improved through replacing all the backend services that
	reimplemented Linux helper libraries with their native
	equivalent. That's some serious work, and it shows that AMD is
	committed to doing the right thing.
</div>
<p>
The code that had been removed so far is,
naturally enough, the easiest third to take care of; getting rid of the
rest of the midlayer will require some significant refactoring of the
code.  Vetter provided <a href="/Articles/709001/">a roadmap</a> for how
that work could be done; <a href="/Articles/709002/">Wentland</a> and AMD
developer <a href="/Articles/709003/">Tony Cheng</a> agreed that the path
seemed workable.  Wentland acknowledged that things could have been done
better at AMD, saying: "<q>We
really should've started DC development in public and probably would do
that if we had to start anew.</q>"  
Actually getting all that work done may take a while; it must
compete with other small tasks 
like making the driver actually work for existing and upcoming hardware.
<p>
One might conclude that what we are really seeing here is a negotiation
over just how much of this work must be done before the code is deemed good
enough that the rest of the fixes can be done in the mainline.  Maintainers
tend to worry about giving way in such situations because, once they have
merged the code, they have given up their strongest leverage and can find
that the developers become surprisingly unmotivated to finish the job.
Arguably, that is a relatively unlikely outcome here; AMD has been trying
to improve its upstream development for nearly a decade and its developers
know what the rules are.
<p>
The most likely outcome, thus, is that this driver is delayed for perhaps a
few more development cycles while the worst problems are taken care of and
some sort of convincing story exists for the rest.  Then it will be
welcomed into the kernel as a welcome addition to mainline support for
current hardware, and users worldwide will have something to celebrate.
The Year of the Linux Desktop, unfortunately, may be a little slower in
coming.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Development_model">Development model</a></td></tr>
            <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Device_drivers-Graphics">Device drivers/Graphics</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/708891/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor709019"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 13, 2016 20:29 UTC (Tue)
                               by <b>tshow</b> (subscriber, #6411)
                              [<a href="/Articles/709019/">Link</a>] (43 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It would be interesting for LWN to have a regular "State of Linux Graphics" article; I'd kind of like to know how long it will be before I can work on Vulkan &amp; Wayland programs on a standard machine.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709019/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709032"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 13, 2016 21:56 UTC (Tue)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/709032/">Link</a>] (35 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Phoronix is pretty good at that.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709032/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709050"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 0:02 UTC (Wed)
                               by <b>Felix</b> (guest, #36445)
                              [<a href="/Articles/709050/">Link</a>] (25 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Well, Phoronix has a broad coverage but it just throws out the "news" as fast as possible without much (any?) additional editing with a solid technical background. Phoronix posts almost never include a broader view about the situation and/or deeper technical explanation.<br>
<p>
Also one has to remember that while numbers and benchmarks reported by Phoronix might be technically correct you must not jump to conclusions because the test compared apples to oranges (case in point: the recent post about "network performance" comparing Linux and BSD).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709050/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709051"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 0:09 UTC (Wed)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/709051/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Michael Larabel (their main editor) is tracking lots of sources, including git repos, blogs and mailing lists. So it's pretty good at giving a heads up for something interesting. If you read the sources linked into Phoronix articles you'll get a pretty good picture of the current state.<br>
<p>
And I actually find Phoronix benchmarks to be extremely useful. They have uncovered surprising performance regressions more than once. And BSD vs. Linux comparisons are an entirely fair game.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709051/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709072"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 9:44 UTC (Wed)
                               by <b>ovitters</b> (guest, #27950)
                              [<a href="/Articles/709072/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The Phoronix benchmarks usually lack a summary/conclusion. The analysis is left to the reader. Meaning: read the entire benchmark split across many pages to see if there's something strange. I stopped reading those benchmarks as a result.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709072/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709079"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 11:31 UTC (Wed)
                               by <b>FLHerne</b> (subscriber, #105373)
                              [<a href="/Articles/709079/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
If you subscribe, you get them all on one page.<br>
<p>
(still no analysis besides 'X was faster than Y').<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709079/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709409"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 16, 2016 0:17 UTC (Fri)
                               by <b>JanC_</b> (guest, #34940)
                              [<a href="/Articles/709409/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Also see OpenBenchmarking.org for test results…<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709409/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor709191"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 21:17 UTC (Wed)
                               by <b>ballombe</b> (subscriber, #9523)
                              [<a href="/Articles/709191/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
My problem with Phoronix is that there is almost no link to external source, outside the occasional link to LKML or the Linux GIT repository.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709191/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor709074"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 9:52 UTC (Wed)
                               by <b>renox</b> (guest, #23785)
                              [<a href="/Articles/709074/">Link</a>] (19 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
How is comparing Linux and BSD network performance comparing apples to oranges?<br>
Please explain: both ran the same series of test..<br>
Without sensible explanation your post looks like a "fanboy post" disappointed that Linux lost most of the test.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709074/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709078"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 11:50 UTC (Wed)
                               by <b>Felix</b> (guest, #36445)
                              [<a href="/Articles/709078/">Link</a>] (18 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;  Without sensible explanation your post looks like a "fanboy post" disappointed that Linux lost most of the test.</font><br>
<p>
I'm sorry that it came across like a "fanboy post". While I prefer Linux over any BSD I can absolutely live with any of the BSDs being "better". After all I think this is not about "loosing". FreeBSD can have a much better networking stack without Linux being a "looser" unless you try to set up some kind of competition and rivalry (which some of the Phoronix clickbait titles seem to do).<br>
<p>
Ok, some more details about the Phoronix article "Linux Distributions vs. BSDs With netperf &amp; iperf3 Network Performance" (<a href="http://www.phoronix.com/scan.php?page=article&amp;item=netperf-bsd-linux&amp;num=1">http://www.phoronix.com/scan.php?page=article&amp;item=ne...</a>). First of all I don't doubt that the number are correct. I assume that anyone could set the same stack and see similar numbers.<br>
<p>
However what is the actual meaning of these numbers? What can you learn from them?<br>
<p>
The danger I see is that many not-so savy readers will treat them as a kind of absolute truth, e.g. "FreeBSD can handle 10x more TCP request/reponse sequences than Fedora".<br>
But it doesn't mean that. First of all I assume that Michael installed Fedora Workstation (given that it had GNOME shell with wayland installed). Also I think he just used the default installation.<br>
<p>
However a default Fedora Workstation installation really has way more software installed (+ services active) than a FreeBSD default install. Having a complicated packet filter setup (e.g. from firewalld) might explain a lot of the slowdown when FreeBSD by default doesn't have any active packet filter.<br>
<p>
So the test results are really about: What is the performance of the default install for some Linux distributions/BSD flavors? However it doesn't say anything what these systems can do with a bit of tuning - because anyone who really cares about networking performance won't use the default configuration. Instead I assume you would very carefully benchmark different hardware, drivers and settings in the software stack.<br>
(The alternative is that you just need a computer/server for the usual stuff where raw networking speed is often the least of your concerns.)<br>
<p>
On the other hand you might want to have a packet filter and/or some network features enabled because they are important in your production setup (maybe TCP syn cookies or just anything really).<br>
<p>
So if you are serious about "How does the raw *Linux compares to *BSD?" you should define a certain baseline what your system should be able to do and then do the number dance.<br>
<p>
Measuring default settings might be interesting for use cases where users are not expected to modify their system before using it (gamers might come to mind) but I think very few of these users really care about really comparing performance numbers at all (maybe besides GPU/gamers).<br>
<p>
What is certainly interesting is to look why numbers are vastly different and why certain regressions happen, bisecting (or at least reporting) bugs with certain drivers. But Michael doesn't do any of this. Usually he does not provide anything like a "big picture" which factors might contribute to the results he observed, he does not provide any technical interpretation. IMHO this is just useful to fuel troll attempts and rants on a forum by people who just read headlines and start typing the next rant.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709078/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709088"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 14:19 UTC (Wed)
                               by <b>mmechri</b> (subscriber, #95694)
                              [<a href="/Articles/709088/">Link</a>] (16 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I couldn't agree more with this.<br>
<p>
Phoronix argues that they on purpose test using default settings because this is what most users tend to end up using. While this is certainly true for a desktop usage, I would be very surprised if this is true for anyone setting up a server and who cares about network performance.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709088/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709091"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 14:51 UTC (Wed)
                               by <b>renox</b> (guest, #23785)
                              [<a href="/Articles/709091/">Link</a>] (15 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I disagree: why should you have to touch at various settings to get good network performance?<br>
Plus apparently FreeBSD was better than Linux in both latency and throughput tests..<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709091/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709094"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 15:33 UTC (Wed)
                               by <b>pizza</b> (subscriber, #46)
                              [<a href="/Articles/709094/">Link</a>] (14 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Because "default settings" you'd use for a workstation are not the same as the "Default settings" you'd want for a server.<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709094/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709112"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 16:01 UTC (Wed)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/709112/">Link</a>] (13 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
So why should workstations be slower than servers? <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709112/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709145"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 16:20 UTC (Wed)
                               by <b>pizza</b> (subscriber, #46)
                              [<a href="/Articles/709145/">Link</a>] (10 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Because optimizing for one use case nearly always comes at the expense of another?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709145/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709147"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 16:22 UTC (Wed)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/709147/">Link</a>] (9 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Why a workstation is different from a server?<br>
<p>
And anyway, I have never been able to tune Linux's IP stack to be significantly faster.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709147/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709157"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 16:40 UTC (Wed)
                               by <b>pizza</b> (subscriber, #46)
                              [<a href="/Articles/709157/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Because they are used for different things?<br>
<p>
(Oh, for example, A server sitting in a rack without any heads acting as a NAS on a trusted network has different needs than graphically-intensive EDA tools on a portable workstation that might connect to a public hotspot)<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709157/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709158"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 16:41 UTC (Wed)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/709158/">Link</a>] (7 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
So why would one kind of a server need slower network?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709158/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709166"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 16:56 UTC (Wed)
                               by <b>zdzichu</b> (subscriber, #17118)
                              [<a href="/Articles/709166/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Slower network performance comes as a drawback of more strict firewall configuration and lower power usage. Probably. There is no analysis in this benchmark, neither “perf” nor any other tracing to pinpoint bottlenecks.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709166/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709169"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 17:10 UTC (Wed)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/709169/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Nope. Linuxes tested by default have zero firewall rules.<br>
<p>
That's why Phoronix test are useful - they make people to at least look at this stuff. Tests with more details would be nice, but in their current form they are quite thought-provoking.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709169/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709174"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 17:42 UTC (Wed)
                               by <b>pizza</b> (subscriber, #46)
                              [<a href="/Articles/709174/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Nope. Linuxes tested by default have zero firewall rules.</font><br>
<p>
Incorrect.  I can't speak for the others, but Fedora 25 (and I believe CentOS7) default to having a firewall enabled, even on minimal installations.<br>
<p>
<font class="QuotedText">&gt; That's why Phoronix test are useful - they make people to at least look at this stuff. Tests with more details would be nice, but in their current form they are quite thought-provoking.</font><br>
<p>
No.. they really aren't.  But with a bit more work on their part, they could be.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709174/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor709176"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 18:11 UTC (Wed)
                               by <b>johannbg</b> (guest, #65743)
                              [<a href="/Articles/709176/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
You can get the same performance out of the same components running on the same kernel on the same hardware regardless what that distribution would be called so benchmarking tests from moronix is just comparing default generic settings, settings which are determined by the community surrounding each distribution to cater to that communities needs and maintainability thus are pretty much useless. <br>
<p>
Truly benchmarking, tweaking, tuning and, identifying the bottleneck and report where they resides is a very time consuming process. <br>
<p>
Those moronix benchmarks just remind me of those idiots that brag about their uptime on hw with no true sustained load over period of time. <br>
<p>
Bragger: Duh my *nix box has been running for 400 days! <br>
Me: Has it now, show me the sustained load on the machine? <br>
Bragger: load average: 0.01, 0.01, 0.01 <br>
Me: so basically you have just had that machine turned on for 400 days consuming power and paying for it so you can brag for it's uptime to other people. Bragger you must be a special kind of idiot. <br>
<p>
Moronix is just another echo chamber of pour if that site can be called journalism on the internet much like mashdot.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709176/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709184"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">This seems like a good stopping point</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 18:27 UTC (Wed)
                               by <b>corbet</b> (editor, #1)
                              [<a href="/Articles/709184/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      If you have a technical issue with somebody's benchmarking techniques (or whatever), those can be legitimate items for discussion — though it's kind of off-topic here.  But please can we refrain from childish name calling?  That doesn't help anybody and doesn't make the conversation any more fun.
<p>
Anyway, my feeling is that this thread has pretty much run its course.
      
          <div class="CommentReplyButton">
            <form action="/Articles/709184/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709185"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">This seems like a good stopping point</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 19:01 UTC (Wed)
                               by <b>johannbg</b> (guest, #65743)
                              [<a href="/Articles/709185/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Dont stop on my account my feeling is that this thread is still full of rainbow, joy and ponies and "childish name calling" is in line with the quality of the technical journalism that takes place on both of those sites so arguably it fits perfectly so no I cant see why I or others should stop themselves from calling it so.  ( And no I did not come up with those names myself, this is the nick name these sites have on these parts )<br>
<p>
If each comment is required to help somebody than you can look at it this way. <br>
People actually can get dumber ( through misinformation ) from reading articles from those sites so just view that comment as an public service announcement for this sites readers own health and I would be doing them a disservice not pointing that out.<br>
<p>
Now whether that triggers readers emotion response such as joy I cannot say since each emotional response varies between each individual reader behind his or her screen so meh.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709185/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709203"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">This seems like a good stopping point</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 20:45 UTC (Wed)
                               by <b>rahulsundaram</b> (subscriber, #21946)
                              [<a href="/Articles/709203/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Dont stop on my account my feeling is that this thread is still full of rainbow, joy and ponies and "childish name calling" is in line with the quality of the technical journalism that takes place on both of those sites so arguably it fits perfectly so no I cant see why I or others should stop themselves from calling it so.</font><br>
<p>
Kinda hard to criticize someone for doing something if you are "in line" with it. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709203/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor709144"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 16:20 UTC (Wed)
                               by <b>clump</b> (subscriber, #27801)
                              [<a href="/Articles/709144/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
You might want a workstation to care more about power savings than performance. There are many settings that favor one over the other.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709144/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor709279"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 15, 2016 14:49 UTC (Thu)
                               by <b>jond</b> (subscriber, #37669)
                              [<a href="/Articles/709279/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Perhaps there's a desktop-benefiting feature (such as application-layer firewalling) that has a performance cost, that was deemed to make sense on a Desktop spin?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709279/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor709148"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 16:35 UTC (Wed)
                               by <b>pizza</b> (subscriber, #46)
                              [<a href="/Articles/709148/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; What is certainly interesting is to look why numbers are vastly different and why certain regressions happen, bisecting (or at least reporting) bugs with certain drivers. But Michael doesn't do any of this. Usually he does not provide anything like a "big picture" which factors might contribute to the results he observed, he does not provide any technical interpretation</font><br>
<p>
Personally, I find the Phoronix benchmarks to be very superficial.  In many cases that is indeed all that is called for (eg more FPS in games == better) but when there is more than one axis for a given situation they tend to not be of much use in the real world.<br>
<p>
For network performance, the details matter quit a bit (Does FreeBSD even have a firewall by default?) What's the CPU load?  Does other I/O in the system get starved out?  What about handling a thousand connections going in both directions versus a single connection in one?  To the same recipient or different recipients?  What about using raw packet sockets, or packet filtering or QoS disciplines?<br>
<p>
What I'm getting at -- there are *many* variables here, and mindlessly focusing on single-stream throughput is what lead to the "bufferbloat" problem that makes real-world users suffer.<br>
<p>
(This is also why reason the server industry uses big, unweidly benchmarks that simulate real-world applications undergoing real-world loads, rather than microbenchmarks for individual components..)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709148/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor709056"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 2:51 UTC (Wed)
                               by <b>tau</b> (subscriber, #79651)
                              [<a href="/Articles/709056/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Phoronix certainly keeps up to date with the developments in the Linux graphics space. But the owner is fond of editorializing excessively and using incendiary language. Now, I hate ads and their associated invasion of privacy, and I don't really want to pay for a subscription to a publication with this sort of style either, so I resolve this dilemma by actively avoiding Phoronix articles altogether.<br>
<p>
I would much prefer to see LWN's more neutral and professional editorial style cover the Linux graphics space; it's certainly very exciting stuff!<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709056/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709167"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 17:12 UTC (Wed)
                               by <b>hifi</b> (guest, #109741)
                              [<a href="/Articles/709167/">Link</a>] (7 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
This is exactly why I subscribed to LWN.<br>
<p>
I still follow Phoronix a lot because of the fast coverage about the graphics stack regardless of the article quality. The *constant* begging for money, blaming the readers for not subscribing is something that really annoys me to the core.<br>
<p>
It's a shame, really, I would like to support Phoronix.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709167/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709173"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 17:38 UTC (Wed)
                               by <b>zlynx</b> (guest, #2285)
                              [<a href="/Articles/709173/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
He posted some statistics once. The set of Linux enthusiasts and the set of people running adblockers is almost a complete overlap.<br>
<p>
So, yeah, Phoronix has some money issues. Subscription is really the only way to go. Maybe he needs to start blocking articles for a week like LWN.<br>
<p>
As for constant money begging, what do you think those dollar signs next to every major LWN article are about? Just a bit more tasteful maybe, but the same thing.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709173/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709178"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 17:54 UTC (Wed)
                               by <b>hifi</b> (guest, #109741)
                              [<a href="/Articles/709178/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I don't see bold paragraphs of complaining in paid LWN articles but I did see on Phoronix regardless if I was a subscriber or not. Tastefulness means a lot to some people.<br>
<p>
Annoying the readers can have the opposite effect. I did subscribe for a year.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709178/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor709271"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 15, 2016 12:47 UTC (Thu)
                               by <b>niner</b> (subscriber, #26151)
                              [<a href="/Articles/709271/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
If Michael is that desperate for money, he'd invest some time into more payment options than just Paypal where you need an account. A simple but huge first step would be to allow for payment via Paypal with just a credit card but no account. That's indeed possible and would allow for me to subscribe. I wrote to Michael twice about this but no result. So no subscription either.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709271/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor709427"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 16, 2016 7:26 UTC (Fri)
                               by <b>mjthayer</b> (guest, #39183)
                              [<a href="/Articles/709427/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; He posted some statistics once. The set of Linux enthusiasts and the set of people running adblockers is almost a complete overlap.</font><br>
<p>
I now use PrivacyBadger instead of an Ad-Blocker.  Phoronix had problems with that until recently, but those seem to be resolved.  I would expect that at least some proportion of those enthusiasts might be willing to do the same if asked nicely.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709427/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor709439"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 16, 2016 15:02 UTC (Fri)
                               by <b>mstone_</b> (subscriber, #66309)
                              [<a href="/Articles/709439/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Interestingly, there's also just about complete overlap between ad networks and ad networks that periodically distribute ads with malicious content. Until the ad networks clean up their act there is no moral imperative to accept whatever crap they're trying to push down the pipe.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709439/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709584"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 18, 2016 10:23 UTC (Sun)
                               by <b>branden</b> (guest, #7029)
                              [<a href="/Articles/709584/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Bruce Perens is _very_ disappointed in you.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709584/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor710244"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 27, 2016 20:59 UTC (Tue)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/710244/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
There's also a very noticeable overlap between computer people and people with some degree of autism.<br>
<p>
And a very strong overlap between people with autism, and people who can't stand noise and flashing images.<br>
<p>
And there certainly was a strong overlap (maybe less so nowadays) between ad networks, and ad networks who sent loud flashy ads to all and sundry.<br>
<p>
What's the difference between a person who uses an adblocker to read your site, and a person who at the first hint of an obnoxious ad just closes the tab and goes somewhere else? The guy who uses the ad blocker at least gets as far as reading the click-bait!<br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/710244/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor709043"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 13, 2016 23:07 UTC (Tue)
                               by <b>Kayden</b> (guest, #89093)
                              [<a href="/Articles/709043/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
With Mesa master, recent Intel hardware is well supported.  Broadwell, Skylake, Kabylake, Broxton, and Cherryview are conformant and should work great.  Haswell isn't conformant yet, but I believe it's in pretty good shape and getting better all the time.  Ivybridge and Baytrail are a bit sketchier still.  Older hardware can't fully support Vulkan.  The developers are pretty responsive to bug reports, and available on IRC.<br>
<p>
I hear really good things about radv as well, so I wouldn't be shy about giving it a try at this point.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709043/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709192"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 19:22 UTC (Wed)
                               by <b>arekm</b> (guest, #4846)
                              [<a href="/Articles/709192/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
And there was no intel xorg driver release for a few years...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709192/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709228"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 15, 2016 1:30 UTC (Thu)
                               by <b>anholt</b> (subscriber, #52292)
                              [<a href="/Articles/709228/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
That's because we stopped building vendor-specific userspace display drivers and instead work on a cross-vendor shared KMS driver.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709228/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709241"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 15, 2016 7:18 UTC (Thu)
                               by <b>arekm</b> (guest, #4846)
                              [<a href="/Articles/709241/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
What's misleading is that intel xorg driver is still actively developed (or mabe just maintained) in git, bugs are handled, fixes are commited. The difference between it and other drivers is that no releases are made.<br>
<p>
Few people were asking here and there (me included on irc) on what's going on but never saw any answer or clear indication that intel xorg driver is obsolete.<br>
<p>
No idea why it is maintained if (big if) it is obsolete and modesetting replaces it.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709241/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709244"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 15, 2016 7:53 UTC (Thu)
                               by <b>thestinger</b> (guest, #91827)
                              [<a href="/Articles/709244/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Intel's DDX driver is still an alternative to the standard infrastructure for 2D acceleration in Xorg but not Wayland. It's only the 2D acceleration and isn't relevant to OpenGL / Vulkan. It also isn't really relevant for programs implementing hardware accelerated rendering via OpenGL like Chromium.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709244/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor709539"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 17, 2016 8:04 UTC (Sat)
                               by <b>flussence</b> (guest, #85566)
                              [<a href="/Articles/709539/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The modesetting driver obsoletes it — for any GPU that can be called an actual GPU. I've got several i915/i945 devices that still need the intel driver and its SNA code. The one time I got modesetting+glamor to actually run on those without X crashing at startup, the desktop was unusable.<br>
<p>
There's no 2D equivalent of the DRM/Mesa stack, so the dark ages of Xorg drivers poking the hardware (semi-)directly will probably live on indefinitely.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709539/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709559"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 17, 2016 17:22 UTC (Sat)
                               by <b>lamikr</b> (guest, #2289)
                              [<a href="/Articles/709559/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
For me with the modesetting driver with skylake based hd-5300 seems to work just fine. Only played one day, but also the Vulkan seems to be supported out of the box on Mageia. (No even need to add <br>
   option "DRI" "3" <br>
line to xorg.conf, that was needed with the other Intel 915 driver.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709559/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor709026"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 13, 2016 21:28 UTC (Tue)
                               by <b>flussence</b> (guest, #85566)
                              [<a href="/Articles/709026/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Maybe they should hire someone who has experience doing things the right way, like libv. ;-)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709026/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor709038"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 13, 2016 22:26 UTC (Tue)
                               by <b>djbw</b> (subscriber, #78104)
                              [<a href="/Articles/709038/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Neil's Linux kernel anti-pattern articles had an outsized influence on the design of the libnvdimm sub-system<br>
<p>
...and here's another example of this abstraction vs upstream pattern seen many times before: <a href="https://lwn.net/Articles/454716/">https://lwn.net/Articles/454716/</a><br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709038/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709049"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 13, 2016 23:57 UTC (Tue)
                               by <b>Felix</b> (guest, #36445)
                              [<a href="/Articles/709049/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
also "Broadcom's wireless drivers, one year later" ( <a href="https://lwn.net/Articles/456762/">https://lwn.net/Articles/456762/</a> ) is about a similar situation...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709049/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709070"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 9:15 UTC (Wed)
                               by <b>blackwood</b> (guest, #44174)
                              [<a href="/Articles/709070/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It would be really great to have a permanent place with links to all these case-studies on midlayer fail. At least my experience is that within the kernel community the concept is so common that just blurping "midlayer!" is enough to kill a patch series.<br>
<p>
But as soon as you talk to kernel and driver teams outside of that bubble (common from shared-across OS proprietary drivers and development), the only way to abstract stuff and share code engineers ever come up with is a midlayer. And without any experience in it, it seems to be fairly hard to explain what exactly it is, and why exactly it's needed ...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709070/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709077"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 11:14 UTC (Wed)
                               by <b>liam</b> (guest, #84133)
                              [<a href="/Articles/709077/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I'm not sure the broadcom example is one we should point to as a mid-layer fail.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709077/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709081"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 12:14 UTC (Wed)
                               by <b>Felix</b> (guest, #36445)
                              [<a href="/Articles/709081/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; I'm not sure the broadcom example is one we should point to as a mid-layer fail.</font><br>
<p>
I think this is about a similar situation especially if you read also the comments.<br>
<p>
For example one Broadcom developer wrote ( <a href="https://lwn.net/Articles/456872/">https://lwn.net/Articles/456872/</a> ):<br>
<font class="QuotedText">&gt; The brcmsmac driver has architectural alignment with our drivers for other operating systems, and we intend to to enhance and maintain this driver in parallel with drivers for other operating systems. Maintaining alignment between our Linux driver and drivers for other operating systems allows us to leverage feature and chip support across all platforms. </font><br>
<p>
Sounds familiar?<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709081/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709783"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 21, 2016 7:10 UTC (Wed)
                               by <b>liam</b> (guest, #84133)
                              [<a href="/Articles/709783/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Oh, I'm not saying that I don't see the similarities with DC. As you've noted, they are striking.<br>
What I'd argue is that the current situation with brcm radios might be much different (better) had their work been accepted and upstreamed. <br>
There are a few things that would've gotten us: ootb, fully functional drivers for what are ubiquitous (well, in my experience, though since I make it a point to notice and avoid them, in particular, my feel of the sampling data might be skewed) wifi/bt modules, and 2) broadcom would have had some tangible evidence that upstream can be reasoned with. That last point can't be overstated (and surely not every hardware company acts like Samsung with their exynos drop). Once their in the community you can nudge them, over time, towards the subsystem's best practices. <br>
Currently, the situation with their hardware just sucks. That's why I'd not point to this as an example of mid-layer fail. They didn't even have a chance TO fail, and it's only a failure if the company isn't able to produce readable patches which maintain/improve functionality. <br>
After all, the worst that could happen is that they give up and you're in at least as good a position as you were before (assuming they don't actually do a Sammy and especially if the b43 driver continues focusing development) though I certainly see how the prospect of beating their leavings into shape would be a bear.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709783/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor709064"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 6:55 UTC (Wed)
                               by <b>mjthayer</b> (guest, #39183)
                              [<a href="/Articles/709064/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I for one certainly hope that they manage to get this merged in a way which does allow sharing code between their different operating system drivers.  I think that the experience gained would be valuable for everyone involved (and I would hope, though you never know beforehand, that it would end up helping the AMD team reduce their Linux work overall and improve their Windows driver into the bargain).<br>
<p>
I also have to say that the overall mailing list exchange was very civil and constructive on all sides.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709064/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709068"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 9:02 UTC (Wed)
                               by <b>blackwood</b> (guest, #44174)
                              [<a href="/Articles/709068/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The linked master plan I typed up explains how to demidlayer while still being able (hopefully, but I'm positive) code. Because code sharing is very much the goal, since common code that's debug by the hw engineers at power on is pretty much the only way you can write a gpu driver these days. At least for the low-level memory bandwidth/clock stuff. Incidentally that also means checkpatch&amp;co will be off-limits for those files.<br>
<p>
Roadmap: <a href="https://lwn.net/Articles/709001/">https://lwn.net/Articles/709001/</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709068/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709080"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 12:03 UTC (Wed)
                               by <b>moltonel</b> (guest, #45207)
                              [<a href="/Articles/709080/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I wonder what the relative size/complexity of the midlayers for various kernels is. I imagine that for historical reasons, the common code follows the Windows driver API fairly closely and therefor the midlayer on Windows is comparatively smaller ? Is there a way to reduce/eliminate the midlayer not just for Linux, but for all kernels ?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709080/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor709391"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 15, 2016 22:23 UTC (Thu)
                               by <b>error27</b> (subscriber, #8346)
                              [<a href="/Articles/709391/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Everyone thinks their compat code is different but I can't think of a single example that hasn't sucked...<br>
<p>
Either way, writing a Linux driver is hard.  If you just write a straight up clean implementation that's pretty hard.  If you try to port the windows driver to linux without changing the windows code that's also hard and the results are messier.  It also doesn't<br>
mesh at all with Linux development style which is that the Linux kernel should be upstream and anyone else (BSD, old enterprise kernels) can be downstream if they want.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709391/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709428"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 16, 2016 7:50 UTC (Fri)
                               by <b>mjthayer</b> (guest, #39183)
                              [<a href="/Articles/709428/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Everyone thinks their compat code is different but I can't think of a single example that hasn't sucked...</font><br>
<p>
<font class="QuotedText">&gt;Either way, writing a Linux driver is hard. If you just write a straight up clean implementation that's pretty hard. If you try to port the windows driver to linux without changing the windows code that's also hard and the results are messier. It also doesn't mesh at all with Linux development style which is that the Linux kernel should be upstream and anyone else (BSD, old enterprise kernels) can be downstream if they want.</font><br>
<p>
Let's hope that this will be a first then.  Daniel seems hopeful that it can be, and he has lots of experience both in the drm subsystem and in large companies contributing to it.  In any case this should not be compatibility code as such if and when it is ready for inclusion, but rather (if I understand right) lower-level primitives, mainly for hardware programming, which are fine-grained enough to be shared and used by otherwise disjoint higher-level driver code for different platforms.  I would naively expect that for something as complex as a modern GPU there would potentially be rather a lot of those.  I would also expect, given that neither GPUs nor drm are static, that the direction drm evolves in future could be adjusted to some extent to make future integration easier.<br>
<p>
Drivers, especially GPU ones, are complex code.  Any sensible code sharing with other platforms will increase test coverage and ought as such to improve the code quality for everyone.  So finding sensible ways to do that is probably worth some effort.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709428/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor709069"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 14, 2016 9:11 UTC (Wed)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/709069/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
"All problems in computer science can be solved by another level of indirection, except of course for the problem of too many indirections."<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709069/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor709272"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 15, 2016 13:12 UTC (Thu)
                               by <b>anton</b> (subscriber, #25547)
                              [<a href="/Articles/709272/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      If the OSes involved are Linux, Windows, Mac OS, I guess that Linux is the only one that is that picky about code organization (because it's the only one that sees the driver as part of the OS). Would it be viable to write the driver to follow Linux conventions and have mid-layers for the other OSes (which probably also have more stable driver APIs)?
      
          <div class="CommentReplyButton">
            <form action="/Articles/709272/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709364"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 15, 2016 17:30 UTC (Thu)
                               by <b>ksandstr</b> (guest, #60862)
                              [<a href="/Articles/709364/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;Would it be viable to write the driver to follow Linux conventions and have mid-layers for the other OSes (which probably also have more stable driver APIs)?</font><br>
<p>
It would at least be possible in terms of technology and skills, assuming that the per-company HAL that AMD built is sufficient in doing what it was intended to do. And if it isn't, off with its head already!<br>
<p>
Given how the kernel interfaces are always changing, AMD could even have participated in, or even initiated, some kind of medium-term development series to make them suitable to whatever secret sauce AMD's silicon snowflake was deemed to require. But obviously not without "helping the competition", "diluting our proprietary advantage", "exposing clues of our trade secrets", or some other rephrasing of the well-worn corporate canard.<br>
<p>
What was AMD going to do, anyway -- remove the HAL on its own? (what would happen if it nevertheless didn't?) Whine about time spent working on a known dead-end, and ask for special treatment?<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709364/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor709458"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 16, 2016 15:32 UTC (Fri)
                               by <b>excors</b> (subscriber, #95769)
                              [<a href="/Articles/709458/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Perhaps one effective way to have unified low-level driver code across all OSes (saving significant development costs, and improving quality of support for niche platforms like Linux), without being allowed to write a midlayer abstraction that lets the same source code compile against each OS's kernel API, is to move as much code as possible out of the kernel driver and into proprietary firmware running on some chip in the GPU, so the kernel driver is reduced to basically making high-level RPC calls into the firmware.<br>
<p>
I assume GPUs already do rather a lot in firmware, but is there still a lot more shared code they could move out of the driver? Would Linux developers be happier with approach, or would that be even worse than having hard-to-maintain midlayered code in the kernel driver?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709458/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709462"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 16, 2016 15:53 UTC (Fri)
                               by <b>micka</b> (subscriber, #38720)
                              [<a href="/Articles/709462/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;Perhaps one effective way to have unified low-level driver code across all OSes [...] for niche platforms like Linux</font><br>
<p>
Depends on what you call niche platform. Sure Linux is a niche platform in the case of GPUs, but for most other hardware it is not.<br>
<p>
<font class="QuotedText">&gt; [...] so the kernel driver is reduced to basically making high-level RPC calls into the firmware.</font><br>
<p>
If I rememeber correctly, that's the model followed by the original RPi graphics driver.<br>
Well it's a bit special I think linux is actually the guest, the GPU being the host.<br>
<p>
I found <a href="http://airlied.livejournal.com/76383.html">http://airlied.livejournal.com/76383.html</a><br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709462/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor709486"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 16, 2016 18:11 UTC (Fri)
                               by <b>excors</b> (subscriber, #95769)
                              [<a href="/Articles/709486/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Yeah, I meant niche in the context of desktop/laptop GPUs, and particularly for people playing games on desktops/laptops (where quality of drivers is important for performance and compatibility).<br>
<p>
(Linux is non-niche for mobile GPUs, given the dominance of Android, though Android devices usually have millions of lines of non-upstreamed kernel code so they're happy to ignore kernel developers' preferences anyway.)<br>
<p>
As far as I'm aware, the RPi 'GPU' is a special case since it started as essentially a multimedia-focused standalone processor that could drive a product all by itself, and the 'firmware' was the entirety of the OS and application software that ran on it. Then one particular chip had a tiny ARM core stuck onto the side because it was cheap so why not, and that chip was eventually adopted by the RPi, which supported OpenGL ES on the ARM by proxying commands across to the original drivers in the firmware - it would have been too expensive to fully port the drivers to the ARM. (Now Broadcom employs Eric Anholt to develop proper Linux drivers for the 3D and display parts of the GPU, but that's taken years of effort and still isn't quite ready, because it's a lot of hard work). So it has that architecture mainly for historical reasons. I think most other GPUs were originally designed as accelerators for a host processor, so they've developed in the other direction and have been moving more logic off the host and into the GPU.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709486/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor709531"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 17, 2016 3:02 UTC (Sat)
                               by <b>pabs</b> (subscriber, #43278)
                              [<a href="/Articles/709531/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
That would be much worse. See for example the response to the initial code dump of the RPC-style OpenGL drivers for the RPi.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709531/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor709747"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">AMD's Display Core difficulties</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 20, 2016 19:01 UTC (Tue)
                               by <b>iabervon</b> (subscriber, #722)
                              [<a href="/Articles/709747/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I think it might be wise to think of it as the "DC midlayer" thing being a tool that lets you run the example code from the hardware designers. It's useful in that QA tests the example code for new chipsets in ways they can't test datasheets. Of course, you don't want end users to use the DC driver, but "compare with the Windows driver" is a sufficiently common debugging technique that it might be worth having around for that purpose.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/709747/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2016, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
