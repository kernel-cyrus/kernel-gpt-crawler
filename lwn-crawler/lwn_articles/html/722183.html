        <!DOCTYPE html>
        <html lang="en">
        <head><title>4.12 Merge window part 2 [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/722183/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/721863/">Return to the Front page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/722183/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>4.12 Merge window part 2</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Please consider subscribing to LWN</b>
<p>
Subscriptions are the lifeblood of LWN.net.  If you appreciate this
content and would like to see more of it, your subscription will
help to ensure that LWN continues to thrive.  Please visit
<a href="/Promo/nst-nag1/subscribe">this page</a> to join up and keep LWN on
the net.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>May 10, 2017</br>
           </div>
As of this writing, nearly 12,000 non-merge changesets have been pulled
into the mainline repository for the 4.12 development cycle.  About 7,500
of these have been pulled since <a href="/Articles/721581/">the first 4.12
merge-window summary</a>.  Read on for an overview of what has been merged
in the last week.
<p>
The not-yet-complete 4.12 merge window looks likely to be one of the
busiest ever.  For the curious, recent history looks like this:
<p>
<blockquote>
<table class="OddEven">
<tr><th colspan=2>Changesets pulled during<br>the merge window</th></tr>
<tr><td>4.0</td><td align="right">8,950</td></tr>
<tr><td>4.1</td><td align="right">10,659</td></tr>
<tr><td>4.2</td><td align="right">12,092</td></tr>
<tr><td>4.3</td><td align="right">10,756</td></tr>
<tr><td>4.4</td><td align="right">11,528</td></tr>
<tr><td>4.5</td><td align="right">10,305</td></tr>
<tr><td>4.6</td><td align="right">12,172</td></tr>
<tr><td>4.7</td><td align="right">10,707</td></tr>
<tr><td>4.8</td><td align="right">11,618</td></tr>
<tr><td>4.9</td><td align="right">14,304</td></tr>
<tr><td>4.10</td><td align="right">11,455</td></tr>
<tr><td>4.11</td><td align="right">10,960</td></tr>
<tr><td>4.12</td><td align="right">11,869</td></tr>

</table>
</blockquote>
<p>
Since the 4.12 merge window is not yet complete, the final number in that
table is not actually final yet.  There is a good chance that 4.12 will end
up being the second-busiest merge window ever.  On the other hand, 4.9 is
likely to remain unchallenged in its position as the busiest for some time
yet. 
<p>
Some of the more interesting user-visible changes merged in the last week
include:
<p>
<ul>

<li> The new <tt>GETFSMAP</tt> <tt>ioctl()</tt> command can be used to
     explore the physical extent mappings used within a filesystem.  It can
     be used, for example, to determine which files contain a given
     physical block.  <a href="/Articles/722180/">This patch</a>
     documents <tt>GETFSMAP</tt>.  The XFS and ext4 filesystems
     will have support for <tt>GETFSMAP</tt> in 4.12.
<p>
<li> The new "function-fork" tracing option will, when trace events are
     limited to a specific set of processes, cause any new child processes
     to be added to the set.
<p>
<li> The 9pfs filesystem can now be used to transport data between multiple
     Xen domains.
<p>
<li> The kernel finally has proper support for USB type-C connectors.
<p>
<li> The PowerPC architecture can now support virtual address-space sizes
     up to 512TB.  By default, though, processes are limited to 128TB; that
     limit can be raised by passing a hint to <tt>mmap()</tt> as described
     in <a href="/Articles/717293/">this article</a>.
<p>
<li> The ARM64 architecture now has kernel crash-dump functionality.
<p>
<li> KVM now supports the MIPS "VZ" virtualization mechanism.  On the x86
     architecture, KVM has dropped support for the device-assignment
     mechanism; all users should be using the VFIO interface instead.
<p>
<li> Quite a bit of the activity in this merge window took the form of new
     device drivers; new hardware support includes:
     <p>
     <ul>
     <p>
     <li> <b>Audio</b>:
     	  RME Fireface 400 controllers,
	  MOTU 828mk2 and 828mk3 controllers,
	  Cirrus Logic CS35L35 amplifiers,
	  Dioo DIO2125 amplifiers,
	  Everest Semi ES7134 codecs,
	  Hisilicon hi6210 I2S controllers,
	  Maxim MAX98927 amplifiers,
	  Nuvoton NAU8824 audio codecs, and
	  STMicroelectronics STM32 digital audio interfaces.
     <p>
     <li> <b>Graphics</b>:
     	  MegaChips stdp4028-ge-b850v3-fw and stdp2690-ge-b850v3-fw display
	  bridges,
	  Generic LVDS panels,
	  R-Car DU Gen3 HDMI encoders,
	  Samsung S6E3HA2 DSI video mode panels, and
	  Sitronix ST7789v controllers.
     <p>
     <li> <b>Industrial I/O</b>:
	  Devantech SRF04 ultrasonic range sensors,
	  ChromeOS EC light and proximity sensors,
	  Analog Devices ADXL345 3-axis digital accelerometers,
	  Maxim MAX30102 heart rate and pulse oximeter sensors,
	  Linear Technology LTC2632 digital-to-analog converters (DACs),
	  Linear Technology LTC2497 analog-to-digital converters (ADCs),
	  STMicroelectronics VL6180 sensors,
	  Motorola CPCAP PMIC ADCs,
	  Aspeed ADCs,
	  Maxim max9611, max9612, max1117, max1118, and max1119 ADCs,
	  Qualcomm SSBI PM8xxx PMIC crystal-oscillator ADCs, and
	  STMicroelectronics STM32 DACs.
     <p>
     <li> <b>Media</b>:
	  Mediatek JPEG codecs,
	  RainShadow Tech HDMI CEC controllers, and
	  OmniVision OV5645 and OV5647 sensors.
     <p>
     <li> <b>Miscellaneous</b>:
     	  Arctic Sand arc2c0608 backlight controllers,
	  Freescale i.MX23/i.MX28 ADCs,
	  TI lighting management units,
	  Dialog Semiconductor DA9061 power-management ICs,
	  X-Powers AXP20X and AXP22X ADCs,
	  Analog Devices X-Powers AXP20X and AXP22X multiplexors,
	  ROHM BD9571MWV regulators,
	  ROHM BD9571 GPIO controllers,
	  TI TPS65132 Dual Output Power regulators,
	  TI TSC2007 touchscreen controllers,
	  Technologic Systems TS-73xx SBC FPGA managers,
	  Lattice iCE40 FPGAs,
	  Aspeed ast2400/2500 host LPC to BMC bridge controllers,
	  Maxim DS2438 battery monitors,
	  Hitachi HD44780 character LCD controllers,
	  Xilinx LogiCORE PR decouplers,
	  Qualcomm Technologies L3-cache performance-monitoring units,
	  Adafruit SH1106 LCD controllers,
	  Intel image processing units (200,000 lines of new staging code),
	  ARM TrustZone CryptoCell C7XX crypto accelerators,
	  Palmchip BK3710 PATA controllers,
	  Freescale i.MX7 system reset controllers,
	  NVIDIA Tegra power management controllers, and
	  MediaTek pulse-width modulators.
     <p>
     <li> <b>Networking</b>:
	  Intel Omni-Path virtual network interface controllers,
	  Realtek RTL8723BS SDIO Wireless LAN NICs (109,000 lines of
	  staging code), and
	  Freescale DPAA2 Ethernet controllers.
     <p>
     <li> <b>PCI</b>:
	  Faraday Technology FTPCI100 PCI controllers and
	  MicroSemi Switchtec PCIe switch management interfaces.
     <p>
     <li> <b>USB</b>:
     	  Qualcomm QUSB2 and QMP PHYs and
	  Fairchild FUSB302 type-C interfaces.
     </ul>


</ul>
<p>
Changes visible to kernel developers include:
<p>
<ul>

<li> There is a new "virtual media controller" driver in the media
     subsystem.  Like the "vivid" virtual camera device, it is meant to be
     a demonstration of the interfaces as well as a comprehensive test case.
<p>
<li> The Android low-memory killer implementation has been removed from the
     staging tree.
<p>
<li> The <a href="/Articles/711653/"><tt>kvmalloc()</tt> allocation
     function</a> (and a few variants) have been added.
     <tt>kvmalloc()</tt> will try to allocate memory with
     <tt>kmalloc()</tt>, but will fall back to <tt>vmalloc()</tt> if need
     be.  These helpers have replaced a lot of duplicated
     fallback code elsewhere in the kernel.
<p>
<li> The <a href="/Articles/721074/">minitty</a> TTY replacement was not
     merged, but a fair amount of preparatory work for minitty was included
     in the TTY pull for 4.12.
<p>
<li> The PCI bus layer has gained support for controllers that can operate
     in endpoint mode.  See <a
     href="/Articles/722256/">Documentation/PCI/endpoint/pci-endpoint.txt</a>
     for details.
<p>
<li> The (relatively) new <tt>refcount_t</tt> reference-counting type was
     added in 4.11 and exported to GPL-compatible modules only.  In 4.12
     (and likely in forthcoming 4.11 stable updates) <tt>refcount_t</tt>
     <a
     href="https://git.kernel.org/linus/d557d1b58b3546bab2c5bc2d624c5709840e6b10">will
     be changed</a> to use <tt>EXPORT_SYMBOL()</tt> and, thus, will be
     accessible to all modules.
</ul>
<p>

The merge window can be expected to close by May 14.  At this point we have
certainly seen the bulk of the changes that can be expected for this
development cycle.  A final update next week will cover any stragglers that
show up in the final days of this merge window.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Releases-4.12">Releases/4.12</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/722183/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor722399"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A couple suggestions</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 11, 2017 0:14 UTC (Thu)
                               by <b>yodermk</b> (guest, #3803)
                              [<a href="/Articles/722399/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I have a couple suggestions for the kernel merge window articles.<br>
<p>
1) You've been publishing these on Wednesdays with your weekly edition; that splits it up into three articles -- the second covering a full week of merges but the first and third covering a half a week. The new LWN format lends itself to splitting it up into two equal sections (by time anyway), perhaps published on Monday morning.<br>
<p>
2) All the new hardware support. I like it, but would like to see more. A list of the names of things supported means only a little.  A bit more about these new things would be great.  Can they do anything particularly interesting?  Who would care about them -- desktop/laptop/phone users, datacenter managers, single-board computer tinkerers?<br>
<p>
Thanks!<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/722399/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor722433"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A couple suggestions</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 11, 2017 14:02 UTC (Thu)
                               by <b>corbet</b> (editor, #1)
                              [<a href="/Articles/722433/">Link</a>] 
      </p>
      
      </div>
      </summary>
      We have pondered adjusting the timing of these articles.  For this cycle, we decided to keep the edition timing, but that might well change in the future.
<p>
The other suggestion is rather harder to act upon.  It's quite a bit of work just to come up with the list of newly supported hardware; driver authors, for whatever reason, often do not go out of their way to make that obvious.  Trying to document why somebody might be interested in a new pulse-width modulator controller would expand that work considerably.  For the most part, the drivers are of interest to somebody who has a computer with that specific device and wants it to work...
      
          <div class="CommentReplyButton">
            <form action="/Articles/722433/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor722518"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A couple suggestions</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 12, 2017 0:38 UTC (Fri)
                               by <b>fratti</b> (guest, #105722)
                              [<a href="/Articles/722518/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;A bit more about these new things would be great. Can they do anything particularly interesting?</font><br>
<p>
You can read the data sheets for that. Figuring out what each chip brings to the table would require the author to have knowledge of the entire field these chips are used in. A lot of these drivers are for embedded use cases, so the one who cares about the drivers the most are the hardware vendors and the people building products based on the chips.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/722518/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor722466"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">4.12 Merge window part 2</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 11, 2017 16:36 UTC (Thu)
                               by <b>nevets</b> (subscriber, #11875)
                              [<a href="/Articles/722466/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; The new "function-fork" tracing option will, when trace events are limited to a specific set of processes, cause any new child processes to be added to the set.</font><br>
<p>
I should elaborate on this more. This option actually has nothing to do with trace events. It has to do with function tracing. Trace events use the event-fork option, which adds children into the set_event_pid file. This was added in 4.7.<br>
<p>
The function-fork option does the same for set_ftrace_pid. When a task with a pid in that file forks, its child will be added to the  file too, if the option is set. Then the function tracer will also trace the child process.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/722466/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor722610"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">4.12 Merge window part 2</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 12, 2017 20:10 UTC (Fri)
                               by <b>xtifr</b> (guest, #143)
                              [<a href="/Articles/722610/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Ah, cool, thanks for the elaboration. It's appreciated.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/722610/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2017, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
