        <!DOCTYPE html>
        <html lang="en">
        <head><title>A way out for a.out [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/888741/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/889125/">Return to the Front page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/888741/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>A way out for a.out</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Please consider subscribing to LWN</b>
<p>
Subscriptions are the lifeblood of LWN.net.  If you appreciate this
content and would like to see more of it, your subscription will
help to ensure that LWN continues to thrive.  Please visit
<a href="/Promo/nst-nag1/subscribe">this page</a> to join up and keep LWN on
the net.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>March 24, 2022</br>
           </div>
The <a href="https://en.wikipedia.org/wiki/A.out">a.out executable
format</a> dates back to the earliest days of Linux — and before.  It has
not been used in any serious way for decades, but support still exists in
the Linux kernel and has resisted all attempts at its removal.  Back in
January, Borislav Petkov <a
href="/ml/linux-kernel/20220113160115.5375-1-bp@alien8.de/">tried yet
again</a> to delete support for this format, leading to another extended
discussion.  There is one difference this time around, though: the effort
to get rid of a.out support might just succeed.
<p>
The a.out format dates back to the first edition of Unix.  When MINIX came
along, it naturally used that format for its executable files; that, in
turn, led to a.out being used in Linux as well.  It is a simple format, and
its implementation on Linux was even simpler; among other things, every
Linux shared library had to be centrally assigned its own portion of the
address space, since libraries could not be relocated at run time.  Still, Linux
used a.out for some time, until support for the newfangled ELF format was
first added to the 0.99.13 development kernel in 1993.
<p>
There was a time when the crazier people among us manually converted our
Slackware systems from a.out to ELF in order to be able to try it out and
gain the benefits before distributions were updated.  They still bear the
scars from that time.  Not that your editor 
would ever admit to knowing anybody who would have engaged in any such activity.
<p>
ELF has been the standard executable format for Linux on most architectures
since 1995.  One might think that would have provided enough time for any
users of a.out binaries to grudgingly move on to ELF; its adoption can
probably be judged to not be a passing fad at this point.  But, in the
real world, surprises lurk.
<p>
The initial conversation on removing a.out faded out fairly quickly, but
was restarted when Eric Biederman <a
href="/ml/linux-kernel/87ilsmdhb5.fsf_-_@email.froward.int.ebiederm.org/">posted
a patch</a> disabling the building of a.out support on the two
architectures (Alpha and m68k) that still enable it by default.  This patch
did not actually remove the support, it just turned it off to see if
anybody would scream.  If protests were raised, support could be turned
back on quickly and easily; otherwise a full removal could be done.
<p>
Linus Torvalds quickly <a
href="/ml/linux-kernel/CAHk-=wg+TYsns5JvNds6BVG7ezdg8uM_z9m8uJBcRDANdd7csw@mail.gmail.com/">responded</a>
that he was "<q>pretty sure we can't do this</q>".  He pointed out
that the native executable format on Alpha systems running Digital's Unix
was essentially a.out, even if it went by the newer name of ECOFF.  The
Linux a.out loader can run ECOFF programs by virtue of ignoring some of the
newer ECOFF features; taking it out would break any systems still using
that support.  One might think that the number of users who are still using
Alpha CPUs, running ECOFF binaries on those CPUs, and tracking current
kernel releases might be a fairly small number, but one never knows.
<p>
Kees Cook did <a href="/ml/linux-kernel/202203091358.775E158C@keescook/">do
a little research</a> on, seemingly, the only distribution that still
supports Alpha (Gentoo) and found that the only ECOFF files present
contained firmware, which does not run on the CPU anyway.  He concluded
that there would be no harm from removing a.out support on this platform:
"<q>Let's do it</q>".
<p>
It seems to be a universal rule that somebody always has to come along to
ruin the party.  In this case, just as it seemed like there were no further
obstacles to the removal of a.out, James Jones <a
href="/ml/linux-kernel/4c449fab-8135-5057-7d2c-7b948ce130cc@theinnocuous.com/">showed
up</a> to let it be known that he was still using a.out:
<p>
<blockquote class="bq">
	The use case is running an old set of tools to build programs for
	the Atari Jaguar. Namely, Atari's assembler (mac) and linker
	(aln). The alternative is running windows versions in dosbox, or
	using some replacements that have been developed based on an even
	older, less-featureful version of the source code for mac and aln,
	but which still haven't managed to add back in all the features
	needed to build some programs or use the Atari debugging tools
	(Also available in a.out only).
</blockquote>
<p>
He gave some more details on why he still needed to use these tools in <a
href="/ml/linux-kernel/785a6348-e1c5-7900-78bc-af8b6923cc8a@theinnocuous.com/">this
followup message</a>
<p>
Moving a program to a new executable format is normally just a matter of
rebuilding the program.  But rebuilding is a rather more difficult task in
the absence of the source code.  Finding oneself stuck trying to run a
decades-old binary on modern systems is just one of the many joys reserved
for users of proprietary software — but many people have found themselves
in that position at one time or another.  They are legitimate Linux users,
and there is no desire to break their systems.  So Petkov duly <a
href="/ml/linux-kernel/Yi3b%2FGpUuhkI5lv7@zn.tnic/">gave up</a> and asked
only that Jones document his usage of a.out for the benefit of those who
might try to remove it in the future.
<p>
Cook, however, was not so quick to throw in the towel; he looked at the
programs in question and <a
href="/ml/linux-kernel/202203151150.1CDB1D8DA@keescook/">concluded</a> that
it might be possible to write an ELF wrapper program that could load and
run old a.out binaries.  One day later, he <a
href="/ml/linux-kernel/202203161523.857B469@keescook/">posted such a
program</a>, noting that it could run the <tt>aln</tt> program at least far
enough for it to complain about its command-line arguments.  Jones <a
href="/ml/linux-kernel/59fb3d14-423a-d39b-04cb-1e60ee67d3f1@theinnocuous.com/">tried
it out</a> and was pleased with the results:
<p>
<blockquote class="bq">
	Yes, works perfectly, thank you. I like the idea of using this much
	better than getting emailed every time someone wants to delete the
	a.out code again. Consider my use case withdrawn. I've already
	pushed an update to my jaguar-sdk project to use this tool instead.
</blockquote>
<p>
So removal of a.out support is <a
href="/ml/linux-kernel/YjMKsM6LzEmpGTzN@zn.tnic/">back in the plans</a> for
the 5.18 kernel.  Perhaps the effort will succeed this time, though there
are still no guarantees; there may be a.out users who are unaware of the
coming apocalypse and haven't yet made their objections known.  If those
users are unable or unwilling to use Cook's wrapper utility, the excision
of a.out support may, once again, have to be deferred to some future kernel
release.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#a.out">a.out</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/888741/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor889144"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 24, 2022 15:50 UTC (Thu)
                               by <b>dullfire</b> (guest, #111432)
                              [<a href="/Articles/889144/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
If cook didn&#x27;t take this approach: then making the wrapper be a binfmt_misc tool (and having a libre license) would probably be the most forward compatible. After all there&#x27;s no reason an interpreter (ld.so) couldn&#x27;t  parse all the a.out binaries and libs in question, and then relocate itself out of the way before constructing the final run-time image.<br>
<p>
Or, if the programs properties were just right, you could get even fancier and convert the program to elf (of course you could not take advantage of elf features) in memory, before actually &quot;exec-ing&quot; it.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/889144/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor889147"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 24, 2022 16:09 UTC (Thu)
                               by <b>wtarreau</b> (subscriber, #51152)
                              [<a href="/Articles/889147/">Link</a>] (20 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
And I thought I was using old stuff...<br>
<p>
  $ cat /proc/version<br>
  Linux version 2.4.37-wt1-utm10.1-alix (willy@wtap) (gcc version 3.3.6) #1 Tue Dec 9 12:50:07 CET 2008<br>
<p>
Waiting for this PC-Engines ALIX to die but it doesn&#x27;t want to. It has only known ELF anyway, I migrated to ELF with kernel 2.0 (except for floppy disks for which I kept the smaller a.out a bit longer).<br>
<p>
Jonathan, like you I was one of those installing libc.so.4 and libc.so.5 side by side on Slackware to try to figure if ELF would bring anything (by then it only brought slightly slower program execution IMHO but it was the future). Not everything worked out of the box, but overall it used to be much more seamless than the following migration to glibc2 where the low-level network API completely changed and required many network programs to be heavily modified!<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/889147/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor889150"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 24, 2022 16:38 UTC (Thu)
                               by <b>corbet</b> (editor, #1)
                              [<a href="/Articles/889150/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      And here I'd thought I had successfully suppressed the painful memories from the glibc2 transition...thanks a <i>lot</i>, man...:)  


      
          <div class="CommentReplyButton">
            <form action="/Articles/889150/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor889151"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 24, 2022 16:43 UTC (Thu)
                               by <b>smoogen</b> (subscriber, #97)
                              [<a href="/Articles/889151/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Oh no.. you already triggered flashbacks for many of us. You get to watch us crawl around with our terror weighted blankets for a week or so. Then someone will go over the changeover from libc5 to libc6, and we can start all over again.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/889151/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor889224"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 25, 2022 11:46 UTC (Fri)
                               by <b>jd</b> (guest, #26381)
                              [<a href="/Articles/889224/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
*cackles with glee, knowing how to bring up the most traumatic memory of that era*<br>
<p>
Anyone remember the problems involving Gnu Make during that transition?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/889224/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor889317"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 26, 2022 4:54 UTC (Sat)
                               by <b>wtarreau</b> (subscriber, #51152)
                              [<a href="/Articles/889317/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Anyone remember the problems involving Gnu Make during that transition?</font><br>
<p>
I don&#x27;t remember problems *specific* to that transition, GNU Make broke something with *every single minor update*. For more than 10 years I&#x27;ve had to have a collection of 3.77, 3.79, 3.80, 3.81, 3.82 and 3.83 on my machines and chose the working one depending on what I was trying to build :-/  It seems to have stabilized a bit since 4.1 or so, let&#x27;s keep fingers crossed.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/889317/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor889499"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 28, 2022 23:15 UTC (Mon)
                               by <b>anonymous_commenter</b> (guest, #117657)
                              [<a href="/Articles/889499/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Let’s see ummm…<br>
<p>
Debian 1.3 —&gt; Debian 2<br>
<p>
There was also, many blue moons ago, the transition from nsswitch et al to libpam. That one was worse for me.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/889499/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor889161"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 24, 2022 18:33 UTC (Thu)
                               by <b>hrw</b> (subscriber, #44826)
                              [<a href="/Articles/889161/">Link</a>] (12 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Nice!<br>
<p>
Alix was fun platform. That Geode LX cpu which was either 586 or 686 depending who asked.<br>
<p>
Always can run newer stuff but having system running so old software i would keep it alive until death (their or mine). <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/889161/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor889186"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 24, 2022 22:51 UTC (Thu)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/889186/">Link</a>] (11 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
My Soekris net5501 firewall is still running. Geode LX, again :)<br>
<p>
(I really must replace it one of these days: having a single point of failure that is 13 years old is worrisome. I have a Turris Omnia I keep meaning to set up, but the new system is so crazy weird I haven&#x27;t dared to try to actually replace it yet. It&#x27;s a shame nobody makes anything like the net5501 with lots and lots of network ports any more :( I need at least five...)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/889186/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor889201"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 25, 2022 1:31 UTC (Fri)
                               by <b>pabs</b> (subscriber, #43278)
                              [<a href="/Articles/889201/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
You can install other distros on the Turris Omnia, but there are some caveats of course. The install guide for Debian is here (might need some updates):<br>
<p>
<a href="https://wiki.debian.org/InstallingDebianOn/Turris/Omnia">https://wiki.debian.org/InstallingDebianOn/Turris/Omnia</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/889201/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor889209"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 25, 2022 6:37 UTC (Fri)
                               by <b>hrw</b> (subscriber, #44826)
                              [<a href="/Articles/889209/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
There are many miniPC models on Chinese market.<br>
<p>
<a href="https://www.aliexpress.com/item/1005003174267310.html">https://www.aliexpress.com/item/1005003174267310.html</a> has 6 ports each with Intel i211 network card.<br>
<p>
I use similar 4 port one with OpenWRT as a router. Works fine.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/889209/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor889216"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 25, 2022 7:33 UTC (Fri)
                               by <b>pbonzini</b> (subscriber, #60935)
                              [<a href="/Articles/889216/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The Turris MOX is extensible, you can add groups of 8 network ports (plus a WAN port with optional support for PoE). If you add more than 8, however, ports from separate groups will go through a 2.5 Gbps switch. I suggest not buying the batteries included versions, and instead getting all the modules you need separately. This way you have 1 GiB of memory instead of 512 MiB.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/889216/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor889221"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 25, 2022 10:14 UTC (Fri)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/889221/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
You can buy Mikrotik hardware: <a href="https://mikrotik.com/products/group/ethernet-routers">https://mikrotik.com/products/group/ethernet-routers</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/889221/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor889226"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 25, 2022 12:49 UTC (Fri)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/889226/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
They&#x27;re tempting... but RouterOS, well, how shall I put it, I&#x27;ve had it up to here with vendor-supported crazy operating systems. I want something that can run normal Linux like the Soekris always could, thankyouverymuch (and now it seems the Turris Omnia I&#x27;ve already got can! so I&#x27;ll try that ;) )<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/889226/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor889227"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 25, 2022 12:58 UTC (Fri)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/889227/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I had an RB from them earlier that I used for OpenWRT. But I&#x27;ve recently tried RouterOS and I was pleasantly surprised, it just works and the UI is very pleasant. Mikrotik also supports hardware for at least 10 years, so I can just turn on automatic updates and be sure the software will be kept up-to-date.<br>
<p>
They recently added Docker support and it allowed me to scratch the last itch, to host my own version of speedtest to easily monitor the WiFi performance (<a href="https://github.com/librespeed/speedtest">https://github.com/librespeed/speedtest</a>).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/889227/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor889489"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 28, 2022 21:48 UTC (Mon)
                               by <b>abufrejoval</b> (guest, #100159)
                              [<a href="/Articles/889489/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <a href="https://www.servethehome.com/inexpensive-4x-2-5gbe-fanless-router-firewall-box-review-intel-j4125-i225-pfsense/">This</a> one recently reviewed on ServeTheHome falls one port short, but if you insist on Linux (vs. pfSense/BSD) you can add another RealTek 8156 base USB3 2.5 Gbit/s NIC.
<p>
Actually with USB3 NICs, just about any board will do, even if lack off offload support may require more CPU power.
<p>
I've been using a 8-port Jetway NF592-Q170 with a Kaby Lake i7-7700T for a few years, but that's a slightly different price (and  performance) point.







      
          <div class="CommentReplyButton">
            <form action="/Articles/889489/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor890984"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 11, 2022 21:29 UTC (Mon)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/890984/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
USB3 NICs are *that fast* nowadays, and reliable enough for serious use? I&#x27;m frankly amazed. I always thought of them as being slow and buggy and prone to introducing fairly frequent spurious corruption into the data stream (I mean the protocol clearly has no useful error checking, given how easy it is for me to cause external disk corruption on one of my Chromebooks by just using an external monitor and the USB port next to the monitor port for mass storage at the same time).<br>
<p>
But maybe I&#x27;ve been misled by the raspberry pi&#x27;s famously terrible USB ports :)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/890984/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor891015"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 12, 2022 9:46 UTC (Tue)
                               by <b>farnz</b> (subscriber, #17727)
                              [<a href="/Articles/891015/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <p>USB High Speed or USB Super Speed? High speed (480 Mbit/s) has a CRC-5 to protect packet headers, and a CRC-16 to protect the data, while Super Speed (5 Gbit/s or above) uses the same CRC-32 as Ethernet for data, and a different CRC-16 to USB High Speed data for packet headers.
<p>Super Speed is thus much more capable of detecting errors in transfer than High Speed.


      
          <div class="CommentReplyButton">
            <form action="/Articles/891015/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor891845"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 19, 2022 13:30 UTC (Tue)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/891845/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
This was all SS, according to dmesg. Major corruption nonetheless :/<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/891845/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor891050"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 12, 2022 10:27 UTC (Tue)
                               by <b>james</b> (subscriber, #1325)
                              [<a href="/Articles/891050/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Docking stations tend to be USB-C or Thunderbird these days (looks like Dell don't sell anything else), so naturally the NICs are USB 3. As far as I know, Surface Pro docking stations (with a custom connector) have USB NICs inside, too.<p>
I would argue that this means laptop manufacturers are sufficiently happy with USB NICs to risk having them on the desks of millions of decision-makers, if it wasn't for my experience with a dodgy Surface Pro 3 and dock, where a jolt to the desk would temporarily disconnect the USB connection and drop all SSH sessions. I replaced that with a USB NIC and was much happier (until I persuaded work to give me a proper laptop instead).






      
          <div class="CommentReplyButton">
            <form action="/Articles/891050/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor889310"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 26, 2022 0:36 UTC (Sat)
                               by <b>mss</b> (subscriber, #138799)
                              [<a href="/Articles/889310/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <blockquote>Waiting for this PC-Engines ALIX to die but it doesn't want to.</blockquote>

I still remember working with ALIX predecessor board from PC-Engines - WRAP.<br>
Still had NSC logo on the chip.

<blockquote>Alix was fun platform. That Geode LX cpu which was either 586 or 686 depending who asked.</blockquote>

If my memory serves me right I remember Geode being treated as a 686 in the userspace as it supported the <i>CMOV</i> series of x86 instructions, which was apparently the defining difference between a 586 and a 686 (at least from the userspace perspective).









      
          <div class="CommentReplyButton">
            <form action="/Articles/889310/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor889318"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 26, 2022 5:01 UTC (Sat)
                               by <b>wtarreau</b> (subscriber, #51152)
                              [<a href="/Articles/889318/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;  If my memory serves me right I remember Geode being treated as a 686 in the userspace as it supported the CMOV series of x86 instructions, which was apparently the defining difference between a 586 and a 686 (at least from the userspace perspective). </font><br>
<p>
It was a bit more complicated  in fact. It would only implement CMOV between registers and not from memory. However, compilers would almost never emit CMOV from memory, so generally speaking that was OK to build with -march=i686. Once in a while you&#x27;d find a faulty program though, that needed to be rebuilt for i586. What a painful period! And there was a real benefit in trying to use CMOV by then since branch predictors were still non-existent.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/889318/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor889152"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 24, 2022 17:05 UTC (Thu)
                               by <b>glaubitz</b> (subscriber, #96452)
                              [<a href="/Articles/889152/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Quote: &quot;Kees Cook did do a little research on, seemingly, the only distribution that still supports Alpha (Gentoo)&quot;<br>
<p>
That is not correct though. Debian is also still supporting the Alpha architecture among other older architectures under the umbrella of the Debian Ports project.<br>
<p>
See: <a href="https://cdimage.debian.org/cdimage/ports/">https://cdimage.debian.org/cdimage/ports/</a> and: <a href="https://www.ports.debian.org/">https://www.ports.debian.org/</a><br>
<p>
Disclaimer: I&#x27;m one of the primary maintainers of Debian Ports.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/889152/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor889203"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 25, 2022 5:23 UTC (Fri)
                               by <b>rdeforest</b> (guest, #153619)
                              [<a href="/Articles/889203/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Thank you for your work! I don&#x27;t directly benefit from it but I appreciate the value to society. It&#x27;s the kind of thing I tell people about when trying to explain the importance of the Debian project overall.<br>
<p>
Has there really been no news in the Debian Ports world since May of 2019, or is none of the news since then worthy of the project&#x27;s front page?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/889203/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor889204"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 25, 2022 5:28 UTC (Fri)
                               by <b>glaubitz</b> (subscriber, #96452)
                              [<a href="/Articles/889204/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Thank you for your work! I don&#x27;t directly benefit from it but I appreciate the value to society. It&#x27;s the kind of thing I tell people about when trying to explain the importance of the Debian project overall.</font><br>
<p>
Thanks, I appreciate the praise. It&#x27;s also fun to work on these old machines and we&#x27;re making good progress even with getting Rust supported on m68k ;-).<br>
<p>
<font class="QuotedText">&gt; Has there really been no news in the Debian Ports world since May of 2019, or is none of the news since then worthy of the project&#x27;s front page?</font><br>
<p>
We don&#x27;t really have an active web team for Debian Ports, most of the discussion happens on the mailing list.<br>
<p>
As you can see from the folder with the CD images, we are more or less regularly push out new Debian unstable snapshots.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/889204/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor889218"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 25, 2022 8:21 UTC (Fri)
                               by <b>taladar</b> (subscriber, #68407)
                              [<a href="/Articles/889218/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;  most of the discussion happens on the mailing list.</font><br>
<p>
Might be worth at least posting that somewhere prominently on the web page so people don&#x27;t assume the project is dead.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/889218/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor889220"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 25, 2022 9:03 UTC (Fri)
                               by <b>beagnach</b> (guest, #32987)
                              [<a href="/Articles/889220/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Agreed - something as simple as a small feed showing the most active email conversations recently, and the most recent releases would make a massive difference - the web page, which is the most likely first port of call for anyone with a casual interest, makes it look like the project is moribund. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/889220/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor889153"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 24, 2022 17:20 UTC (Thu)
                               by <b>pebolle</b> (guest, #35204)
                              [<a href="/Articles/889153/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; an ELF wrapper program that could load and run old a.out binaries</font><br>
<p>
Nitpick: that&#x27;s not a wrapper but a loader, isn&#x27;t it?<br>
<p>
Anyhow, would it be possible to write an a.out to ELF converter? Ie, a program that is fed an a.out executable and creates an ELF executable (basically this loader and the a.out dumped into an ELF executable).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/889153/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor889169"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 24, 2022 20:21 UTC (Thu)
                               by <b>gutschke</b> (subscriber, #27910)
                              [<a href="/Articles/889169/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
A.out is an insanely simple file format, and basic ELF isn&#x27;t really all that complex either. So, I would expect that there&#x27;d be some way to convert a.out to ELF without too much effort. In particular, it appears as if the only binaries anybody cares about are statically linked already. That should dramatically simply things.<br>
<p>
I haven&#x27;t looked too closely. But there might be some need to add a bit of assembly &quot;glue&quot;. Shouldn&#x27;t be much, but that would be architecture-specific. Maybe, that&#x27;s why a wrapper turned out to be easier to code.<br>
<p>
The only other remaining issue is the fact that a.out wants to be loaded to an address that is very low. In fact, it&#x27;s so low that it is usually not allowed to be mapped from user space. So, you&#x27;d quite possibly end up with ELF binaries that fail to start until you reconfigure your system, and you won&#x27;t get any informative error messages. The wrapper addresses that problem a little nicer and prompts you what to do.<br>
<p>
If I think hard enough, I can imagine solutions for all these problems. But they get increasingly more complex, for something that really doesn&#x27;t justify this amount of engineering effort. If the wrapper works, that&#x27;s likely the most expedient and pragmatic solution.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/889169/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor889194"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 24, 2022 23:48 UTC (Thu)
                               by <b>Trou.fr</b> (subscriber, #26289)
                              [<a href="/Articles/889194/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Actually, binutils can &quot;convert&quot; (some) a.out programs into ELF files using objcopy. Whether they work or not is another question :)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/889194/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor889952"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 1, 2022 8:27 UTC (Fri)
                               by <b>anton</b> (subscriber, #25547)
                              [<a href="/Articles/889952/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <blockquote>
In particular, it appears as if the only binaries anybody cares about are statically linked already.
</blockquote>

Those a.out binaries I care about are dynamically linked (pretty much everything was at the time).  However, Linux broke these user space programs with the 5.1 release (so much for "we don't break user space").

<blockquote>
Maybe, that's why a wrapper turned out to be easier to code.
</blockquote>

Which wrapper turned out to be easier to code?  The only wrapper I am aware of, Siegfried Pammer's <a href="https://github.com/siegfriedpammer/run-aout">run-aout</a> turned out to be a lot more work and less capable than I expected.  You can read all about it in his thesis, but among the difficulties was that run-aout has to emulate the uselib() system call (because the libraries are also a.out binaries).  Pammer deserves high praise for tackling all these obstacles.

My conclusion from all of this is that it would probably have been easier to put an a.out loader into kernel space, as an out-of-tree module if the kernel maintainers insist on eradicating a.out support from the official tree.

<blockquote>
The only other remaining issue is the fact that a.out wants to be loaded to an address that is very low. In fact, it's so low that it is usually not allowed to be mapped from user space. So, you'd quite possibly end up with ELF binaries that fail to start until you reconfigure your system, and you won't get any informative error messages.
</blockquote>

Yes, some of the a.out binaries have so low starting addresses that they either required starting it as root (apparently whatever makes mmap fail does not apply to root) or first setting

<pre>
sudo sysctl -w vm.mmap_min_addr="4096"
</pre>

However, there are also a.out binaries that still worked with the default mmap_min_addr (of IIRC kernel 4.15).


      
          <div class="CommentReplyButton">
            <form action="/Articles/889952/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor889157"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 24, 2022 17:51 UTC (Thu)
                               by <b>halla</b> (subscriber, #14185)
                              [<a href="/Articles/889157/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
&quot;There was a time when the crazier people among us manually converted our Slackware systems from a.out to ELF in order to be able to try it out and gain the benefits before distributions were updated.&quot;<br>
<p>
I remember trying that...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/889157/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor889170"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 24, 2022 20:29 UTC (Thu)
                               by <b>cuviper</b> (subscriber, #56273)
                              [<a href="/Articles/889170/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Now, will GCC ever change the default executable name from &quot;a.out&quot;?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/889170/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor889179"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 24, 2022 21:49 UTC (Thu)
                               by <b>JoeBuck</b> (subscriber, #2330)
                              [<a href="/Articles/889179/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
a.out goes back to the original Unix, and apparently came from &quot;assembler output&quot;, even though it is really linker output. So the name is at least 40 years old. Changing it at this point is probably not worth the bother, since there&#x27;s probably something that depends on that.<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/889179/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor889182"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 24, 2022 22:36 UTC (Thu)
                               by <b>gerdesj</b> (subscriber, #5446)
                              [<a href="/Articles/889182/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
&quot;Changing it at this point is probably not worth the bother, since there&#x27;s probably something that depends on that.&quot;<br>
<p>
A shitload of documentation.  lol here&#x27;s some C, wack it into a file called x.c, run this (gcc command) and then run ./a.out.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/889182/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor889370"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 27, 2022 17:10 UTC (Sun)
                               by <b>NYKevin</b> (subscriber, #129325)
                              [<a href="/Articles/889370/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I imagine there are some students who honestly believe that ./a.out is &quot;just a funny-looking command&quot; and not, y&#x27;know, a file name.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/889370/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor889205"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 25, 2022 5:57 UTC (Fri)
                               by <b>bsdimp</b> (guest, #18082)
                              [<a href="/Articles/889205/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I wrote s Venix/86 emulaor. It runs the 16 bit a.out binaries by loading them into memory, setting up the registers and using vm86 to jump to the 16bit code. I&#x27;ve been able to run all the venix binaries this way.<br>
<p>
The code posted assumes the a.out system call ABI is the same as the ELF one. This wasn&#x27;t true for my venix emulaor so i had to interpret the system calls. It was easy for 16bit code runnimg in a 32bit binary, but would be harder for 32bit code. Otherwise it is quite similar to what I wrote.<br>
<p>
You can find my FOSDEM 2022 presentation here <a href="https://fosdem.org/2022/schedule/event/venix/">https://fosdem.org/2022/schedule/event/venix/</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/889205/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor889211"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Sooo close!</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 25, 2022 6:45 UTC (Fri)
                               by <b>felixfix</b> (subscriber, #242)
                              [<a href="/Articles/889211/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I was soooo hoping for the full &quot;one never knows, do one?&quot; from &quot;Your Feet&#x27;s Too Big&quot; by Fats Waller, <a href="https://www.youtube.com/watch?v=nG3rgcU6CqI">https://www.youtube.com/watch?v=nG3rgcU6CqI</a> (way at the end).<br>
<p>
I&#x27;d apologize for the off-topic reference, but one can never have too many Fats Waller links, can one?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/889211/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor889449"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Sooo close!</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 28, 2022 15:39 UTC (Mon)
                               by <b>rsidd</b> (subscriber, #2582)
                              [<a href="/Articles/889449/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I see hardly any Fats Waller links, so one is not too many, thanks! <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/889449/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor889371"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 27, 2022 17:34 UTC (Sun)
                               by <b>jdulaney</b> (subscriber, #83672)
                              [<a href="/Articles/889371/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Be cool if GCC was set to do elf by default for all those hello worlds.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/889371/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor889626"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 30, 2022 9:32 UTC (Wed)
                               by <b>immibis</b> (guest, #105511)
                              [<a href="/Articles/889626/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
??? it does. The file is called a.out by default but the file format is ELF<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/889626/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor890491"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A way out for a.out</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 6, 2022 18:24 UTC (Wed)
                               by <b>anton</b> (subscriber, #25547)
                              [<a href="/Articles/890491/">Link</a>] 
      </p>
      
      </div>
      </summary>
      I have now tried Kees Cook's aout program:

<pre>
./aout /usr/local/bin/gforth-0.3.0
/lib/ld.so: cache '/etc/ld.so.cache' is corrupt
/usr/local/bin/gforth-0.3.0: can't load library '/usr/lib/libm.so.4'
        Exec format error
/usr/local/bin/gforth-0.3.0: can't find library 'libm.so.4'
</pre>

It's interesting that the old dynamic linker can no longer handle Debian 11 ld.so.cache (still worked on Debian 8), but putting a link in /usr/lib got around that problem.  But then of course uselib cannot deal with the format of libm.so.4.6.27, which is a.out.

<p>If anybody wants to do their own experiments, <a href="http://www.complang.tuwien.ac.at/anton/tmp/usr.tar.xz">here are some a.out binaries and libraries</a>.  Not all of them worked on Debian 8, but at least gforth-0.3.0 did as root or if I used

<pre>
sudo sysctl -w vm.mmap_min_addr="4096"
</pre>

I also tried the suggested alternative of rebuilding gforth-0.3.0.  Some of the early hurdles were relatively easy to overcome, but eventually I had a binary to run, and it crashed; my guess is that the reason is that modern libcs no longer use RWX permissions for malloc()ed memory.  Fixing this would be a somewhat more involved, and it may be getting away from my purpose of running the old program: to be able to compare its behaviour to that of modern programs (e.g., recent versions of gforth).




      
          <div class="CommentReplyButton">
            <form action="/Articles/890491/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2022, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
