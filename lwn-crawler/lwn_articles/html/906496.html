        <!DOCTYPE html>
        <html lang="en">
        <head><title>What's in a (type) name? [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/906496/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/906797/">Return to the Front page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/906496/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>What's in a (type) name?</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Please consider subscribing to LWN</b>
<p>
Subscriptions are the lifeblood of LWN.net.  If you appreciate this
content and would like to see more of it, your subscription will
help to ensure that LWN continues to thrive.  Please visit
<a href="/Promo/nst-nag1/subscribe">this page</a> to join up and keep LWN on
the net.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>September 2, 2022</br>
           </div>
The <a href="https://www.kernel.org/doc/man-pages/">kernel's manual
pages</a> are in a bit of an interesting position.  They 
are managed as a separate project, distinct from the kernel's
documentation, and have the task of documenting both the kernel's
system-call interface and the wrappers for that interface provided by the C
library.  Sometimes the two objectives come into conflict, as can be seen
in a discussion that has been playing out over the course of the last year
on whether to use C standard type names to describe kernel-defined
structures.
<p>
The C <tt>&lt;stdint.h&gt;</tt> header file defines a number of types for
developers who need to specify exactly how they need an integer
variable to be represented.  For example, <tt>int16_t</tt> is a 16-bit,
signed type, while <tt>uint64_t</tt> is a 64-bit, unsigned type.  This
level of control is needed when defining data structures that are
implemented by hardware, are exchanged through communications protocols —
or are passed between user and kernel space.
<p>
The kernel, though, does not use these types to define its system-call
interface.  Instead, the kernel has its own types defined internally.
Rather than use <tt>uint64_t</tt>, for example, the kernel's API
definitions use <tt>__u64</tt>.  That has been the situation for a long
time — since before the standard C types existed — and is simply part of
how the kernel project does things.
<p>
As a general rule, the man pages reflect the kernel's definition of data
types.  So, for example, <a
href="https://man7.org/linux/man-pages/man2/bpf.2.html">the <tt>bpf()</tt>
man page</a> defines one piece of the <tt>bpf_attr</tt> union as:
<p>
<pre>
    struct {    /* Used by BPF_MAP_*_ELEM and BPF_MAP_GET_NEXT_KEY
                   commands */
	__u32         map_fd;
	__aligned_u64 key;
	union {
	    __aligned_u64 value;
	    __aligned_u64 next_key;
	};
	__u64         flags;
    };
</pre>
<p>
These types are familiar to kernel developers, but they may look a bit
strange to user-space developers.  Back in April of 2021, man-pages
co-maintainer Alejandro Colomar decided to make things look more familiar
by rewriting the man pages to use the standard C types instead.  Perhaps
out of love for a challenge, Colomar <a
href="/ml/linux-kernel/20210423230609.13519-1-alx.manpages@gmail.com/">started
with the <tt>bpf()</tt> man page</a>; after applying the patch, the above
structure was defined as:
<p>
<pre>
    struct {    /* Used by BPF_MAP_*_ELEM and BPF_MAP_GET_NEXT_KEY commands */
        uint32_t                     map_fd;
        uint64_t [[gnu::aligned(8)]] key;
        union {
            uint64_t [[gnu::aligned(8)]] value;
            uint64_t [[gnu::aligned(8)]] next_key;
         };
         uint64_t                     flags;
     };
</pre>
<p>
This patch was immediately <a
href="/ml/linux-kernel/CAADnVQLf4qe3Hj7cjBUCY4wXb9t2ZjUt=Z=JuygRY0LNNHWAoA@mail.gmail.com/">vetoed</a>
by BPF maintainer Alexei Starovoitov, who said: "<q>The man page should
describe the kernel api the way it is in .h file</q>".  Colomar <a
href="/ml/linux-kernel/56932c68-4992-c5e4-819f-a88f60b3f63a@gmail.com/">answered</a>
that the actual types used are the same either way, and that his change was
better for users:
<p>
<blockquote class="bq">
	If we have a standard syntax for fixed-width integral types (and
	for anything, actually), the manual pages should probably follow
	it, whenever possible.  Any deviation from the standard (be it C or
	POSIX) should have a very good reason to be; otherwise, it only
	creates confusion.
</blockquote>
<p>
Starovoitov <a
href="/ml/linux-kernel/CAADnVQJU=r0qE-4ZHsvX4YndbFgDGvzAgNgVo7kPMGF4jCrVeg@mail.gmail.com/">stood
firm</a> in his opposition, though, saying that the man pages should
describe the types as they will be defined when code includes the
associated kernel header file.
<p>
Colomar <a
href="/ml/linux-kernel/20210504110519.16097-1-alx.manpages@gmail.com/">returned</a>
in May 2021 with a new version of the patch that was little changed from
its predecessor.  Also unchanged was the reception it got.  This time, Greg
Kroah-Hartman also <a
href="/ml/linux-kernel/YJFxArfp8wN3ILJb@kroah.com/">expressed his
opposition</a>, saying that the types involved "<q>are not the same, they
live in different namespaces, and worlds, and can not always be swapped
out for each other on all arches</q>".  GNU C Library developer Zack
Weinberg <a
href="/ml/linux-kernel/CAKCAbMg_eRCsD-HYmryL8XEuZcaM1Qdfp4XD85QKT6To+h3QcQ@mail.gmail.com/">disagreed</a>,
though:
<p>
<blockquote class="bq">
	Manpage documentation of C structs is *not* expected to match the
	actual declaration in the headers.  The documented field type is
	usually assignment-compatible with the actual type, but not always.
	There's no guarantee whatsoever that the fields are in the same
	order as the header, or that the listed set of fields is complete.
</blockquote>
<p>
This argument failed to convince the kernel community, though, which
remained strongly against the change.  This discussion then died down for
over a year.
<p>
Colomar returned with <a
href="/ml/linux-kernel/20220824185505.56382-1-alx.manpages@gmail.com/">a
new patch</a> converting many more files in August 2022; he included the
Nacked-by tags he had received from three different developers.
Unsurprisingly, those developers had not become more sympathetic toward the
idea during the pause.  Starovoitov <a
href="/ml/linux-kernel/CAADnVQKiEVL9zRtN4WY2+cTD2b3b3buV8BQb83yQw13pWq4OGQ@mail.gmail.com/">repeated
his opposition</a> and asked Colomar to stop sending the patch.
<p>
In response, Colomar <a
href="/ml/linux-kernel/c06008bc-0c13-12f1-df85-3814b74e47f9@gmail.com/">went
ahead and applied the patch</a> to the man-pages repository.  A kernel
patch that had encountered such opposition would almost certainly never
have been applied, but the man pages are not a kernel project.  Colomar
appears to be the only active man-pages maintainer at the moment; longtime
maintainer Michael Kerrisk has seemingly vanished from the scene since the
<a
href="/ml/linux-kernel/11ec92df-0b4c-16f2-a3bc-f55a59ad01ab%40gmail.com/">man
pages 5.13 release</a> in August 2021.  So there is nobody who is in a
position to overrule Colomar when it comes to decisions in this area.
<p>
Much of the discussion covered the same ground as with the
previous versions, but this time Linus Torvalds jumped in as well.  He <a
href="/ml/linux-kernel/CAHk-=whfft=qpCiQ=mkaCz+X1MEfGK5hpUWYoM5zWK=2EQMwyw@mail.gmail.com/">pointed
out</a> that the kernel's types simply cannot be the same as the standard C
types without creating namespace problems: the kernel cannot include
<tt>&lt;stdint.h&gt;</tt> to define those types, but also cannot define
those types itself in files used by user space without creating conflicts there.
Torvalds <a
href="/ml/linux-kernel/CAHk-=wgSx8O0=p18C1aQuH4Gw7xmKujBKMEiSitCA7oG2h6WLg@mail.gmail.com/">agreed
with the others</a> that the documentation should match the actual types used.
<p>
<blockquote class="bq">
	Honestly, I don't think it makes a *huge* amount of difference, but
	documentation that doesn't actually match the source of the
	documentation will just confuse somebody in the end. Somebody will
	go "that's not right", and maybe even change the structure
	definitions to match the documentation.
</blockquote>
<p>
This message, along with <a
href="/ml/linux-kernel/YwcPQ987poRYjfoL@kroah.com/">a request from
Kroah-Hartman</a> to revert the change, was enough to convince Colomar to
back down.  His <a
href="/ml/linux-kernel/ee51a03e-0cc7-06a6-2ae9-e68af02e891f@gmail.com/">concluding
words</a> were:
<p>
<blockquote class="bq">
	You convinced me.  The man-pages will document the types exactly as
	they are in kernel.  It's just simpler.
<p>
	As the patch was recently reverted after Greg asked me to do, I'll
	keep it that way.  I guess this closes the man-pages discussion.
</blockquote>
<p>
The interesting thing, of course, is that the kernel does, indeed, <a
href="https://elixir.bootlin.com/linux/v5.19.5/source/include/linux/types.h#L92">define
many of the standard types</a> internally, and there are thousands of
variables defined using those types.  Using standard C types in the kernel is
not, itself, a problem; only using them in the user-space API definitions is.  With
sufficient will, this might well be a problem that could be overcome, but
it would not be a small job.
Meanwhile, it seems that the man pages will continue to document the types
that are actually used in the kernel's user-space API header files.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Documentation-man_pages">Documentation/man pages</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/906496/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor907011"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 2, 2022 17:09 UTC (Fri)
                               by <b>adobriyan</b> (subscriber, #30858)
                              [<a href="/Articles/907011/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
__aligned_u64 should have been named u64_a8 so that there is less confusion.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907011/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor907015"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 2, 2022 20:09 UTC (Fri)
                               by <b>Bigos</b> (subscriber, #96807)
                              [<a href="/Articles/907015/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
If I understand correctly, __aligned_u64 is just a regular __u64 that is guaranteed to be natural-aligned (i.e. 64-bit aligned). This does not make any difference on 64-bit architectures, but on 32-bit ones the regular __u64 might only by 32-bit aligned.<br>
<p>
Your proposal of u64_a8 is pretty confusing, as the first number is in bits and the second is in bytes.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907015/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor907067"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 3, 2022 14:50 UTC (Sat)
                               by <b>adobriyan</b> (subscriber, #30858)
                              [<a href="/Articles/907067/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Alignment is always in bytes: alignof(), __attribute__ ((aligned())), alignas(), _Alignas, [[gnu::aligned()]].<br>
<p>
Fixed-width integer types are always in bits: uintN_t, uN, __uN, sN, iN, newly added_DecimalN, _Bitint(N)<br>
Even SIMD stuff is in bits: __m128, __m256. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907067/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor907017"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 2, 2022 20:34 UTC (Fri)
                               by <b>ddevault</b> (subscriber, #99589)
                              [<a href="/Articles/907017/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I didn&#x27;t know that Colomar had joined on to man-pages. Maybe now someone will read my patches :)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907017/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor907039"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 3, 2022 5:31 UTC (Sat)
                               by <b>neilbrown</b> (subscriber, #359)
                              [<a href="/Articles/907039/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It is nice and explicit where to send patches now:<br>
<p>
<a href="https://git.kernel.org/pub/scm/docs/man-pages/man-pages.git/commit/?id=974845c5c3a6d26318ac5d0ab6aaf493d5c43979">https://git.kernel.org/pub/scm/docs/man-pages/man-pages.g...</a><br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907039/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor907018"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 2, 2022 20:44 UTC (Fri)
                               by <b>nickodell</b> (subscriber, #125165)
                              [<a href="/Articles/907018/">Link</a>] (17 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
GKH said:<br>
<p>
<font class="QuotedText">&gt;There&#x27;s a very old post from Linus where he describes the difference between things like __u32 and uint32_t [...] Dig it up if you are curious</font><br>
<p>
Does anyone have a link to this?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907018/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor907020"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 2, 2022 21:11 UTC (Fri)
                               by <b>cesarb</b> (subscriber, #6266)
                              [<a href="/Articles/907020/">Link</a>] (15 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I haven&#x27;t seen that old post, but I can guess that it&#x27;s going to be about &quot;int&quot; vs &quot;long&quot; on 32-bit architectures, and the subtleties of C integer promotion rules. Unlike on 64-bit architectures, both &quot;int&quot; and &quot;long&quot; are 32 bits on 32-bit architectures, and it wouldn&#x27;t surprise me if for instance &quot;__u32&quot; used to be &quot;unsigned long&quot; while &quot;uint32_t&quot; was &quot;unsigned int&quot;, or vice-versa.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907020/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor907022"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 2, 2022 23:00 UTC (Fri)
                               by <b>koh</b> (subscriber, #101482)
                              [<a href="/Articles/907022/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
That&#x27;s quite unlikely. u32 / uint32_t are quite clearly 32 bit wide unsigned integers. Alignment constraints might be stronger on the kernel level (they can&#x27;t be weaker than &quot;none&quot; as defined by the standard). Though from this article it really is not clear why there would be any difference at all. Why is there so much opposition to interchangeability between std- and kernel-defined types when clearly there is the syscall interface between them which uses the same kinds of types?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907022/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor907029"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 3, 2022 1:02 UTC (Sat)
                               by <b>abatters</b> (<b>&#x272D; supporter &#x272D;</b>, #6932)
                              [<a href="/Articles/907029/">Link</a>] (7 responses)
      </p>
      
      </div>
      </summary>
      I haven't had much problem with 32-bit ints, but 64-bit ints are annoying to work with portably.

<pre>
32-bit userspace, 32-bit kernel, and 64-bit kernel:
typedef unsigned long long uint64_t;

64-bit userspace:
typedef unsigned long uint64_t;

uint64_t x = 777;

// compiler complains about these depending on arch
printf("%lu", x);
printf("%llu", x);
scanf("%lu", &amp;x);
scanf("%llu", &amp;x);

// these are portable but require more code
printf("%llu", (unsigned long long) x);
unsigned long long tmp;
scanf("%llu", &amp;tmp);
x = tmp;
</pre>


      
          <div class="CommentReplyButton">
            <form action="/Articles/907029/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor907033"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 3, 2022 3:07 UTC (Sat)
                               by <b>ABCD</b> (subscriber, #53650)
                              [<a href="/Articles/907033/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <p>The portable (as of C99) way to use <tt>printf</tt> and <tt>scanf</tt> (in userspace) with those types is to do things like:</p>

<pre>#include &lt;inttypes.h&gt;

uint64_t x = 777;

printf("%" PRIu64, x);
scanf("%" SCNu64, &amp;x);</pre>


      
          <div class="CommentReplyButton">
            <form action="/Articles/907033/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor907077"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 3, 2022 16:37 UTC (Sat)
                               by <b>pm215</b> (subscriber, #98099)
                              [<a href="/Articles/907077/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Yes, but the compiler often won&#x27;t warn if you forget and instead use the format specifier for the underlying type by mistake. Also the portable way is more longwinded and annoyingly requires you to close and reopen the string, which breaks the design principle that the right thing should be the easy thing :-(<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907077/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor907089"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 3, 2022 19:55 UTC (Sat)
                               by <b>SAI_Peregrinus</b> (subscriber, #151778)
                              [<a href="/Articles/907089/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; breaks the design principle that the right thing should be the easy thing :-(</font><br>
<p>
When has that ever been a design principle of C?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907089/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor907112"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 4, 2022 12:01 UTC (Sun)
                               by <b>jezuch</b> (subscriber, #52988)
                              [<a href="/Articles/907112/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
That depends on what &quot;the right thing&quot; is. In C, designed for systems programing in the 70s, when things were different, that would be &quot;easily map to hardware&quot;. (Differently on each hardware architecture, of course, but the exact details are, well, undefined! So it&#x27;s not clear it succeeds even at that.)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907112/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor907157"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 5, 2022 11:06 UTC (Mon)
                               by <b>pm215</b> (subscriber, #98099)
                              [<a href="/Articles/907157/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I meant it in the sense of a general principle of good API design. (It&#x27;s one of the ideas of Rusty Russell&#x27;s set of levels of API design: <a href="https://ozlabs.org/~rusty/index.cgi/tech/2008-03-30.html">https://ozlabs.org/~rusty/index.cgi/tech/2008-03-30.html</a> ) C of course has many parts which are not well-designed (for various reasons including &#x27;historical&#x27;), and this is one of them.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907157/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor907227"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 5, 2022 23:51 UTC (Mon)
                               by <b>skissane</b> (subscriber, #38675)
                              [<a href="/Articles/907227/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Also the portable way is more longwinded and annoyingly requires you to close and reopen the string</font><br>
<p>
Really, the C standards committee should introduce a nicer way of doing that.<br>
<p>
%(u64) or something like that. (I don&#x27;t know which punctuation symbols are in use or reserved and which are not, but surely someone can come up with something which doesn&#x27;t clash with existing uses.)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907227/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor907348"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 6, 2022 23:02 UTC (Tue)
                               by <b>dezgeg</b> (subscriber, #92243)
                              [<a href="/Articles/907348/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
%w64d will come in C23 (<a href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/n3054.pdf">https://www.open-std.org/jtc1/sc22/wg14/www/docs/n3054.pdf</a>)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907348/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor907046"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 3, 2022 9:41 UTC (Sat)
                               by <b>pbonzini</b> (subscriber, #60935)
                              [<a href="/Articles/907046/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
IIRC u64 is always unsigned long long, while uint64_t is unsigned long on 64-bit machines. This way the kernel does not need PRIx64 and friends, u64 is always printed with %llx.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907046/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor907069"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 3, 2022 15:18 UTC (Sat)
                               by <b>cpacejo</b> (subscriber, #153871)
                              [<a href="/Articles/907069/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Yes, this appears to be the case, at least on my amd64 Linux (i.e., LP64 data model) system.<br>
<p>
It&#x27;s therefore relevant that, because they are of different rank, `long` and `long long` are not &quot;compatible types&quot;, even if they happen to be of the same width.  Notably, this means that you cannot substitute a pointer to one for the other (likely resulting in a compile time error), and that such mixed pointers are assumed by the compiler not to alias each other (possibly leading to subtle runtime issues).  See <a href="https://stackoverflow.com/a/66850819">https://stackoverflow.com/a/66850819</a> for a good explanation.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907069/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor907146"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 5, 2022 8:31 UTC (Mon)
                               by <b>geert</b> (subscriber, #98403)
                              [<a href="/Articles/907146/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
But it hasn&#x27;t always been the case like that.  Fortunately all odd architectures (e.g. alpha) using &quot;long&quot; for 64-bit types have been converted to &quot;long long&quot; a long time ago, bringing more uniformity into the kernel.<br>
<p>
For the interested, you can find some clues in the commit that removed the last remnants:<br>
<a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=0c79a8e29b5fcbcbfd611daf9d500cfad8370fcf">https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/...</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907146/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor907072"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 3, 2022 16:01 UTC (Sat)
                               by <b>rwmj</b> (subscriber, #5474)
                              [<a href="/Articles/907072/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
That&#x27;s a reason, but it doesn&#x27;t seem like a good reason.  Why doesn&#x27;t the kernel adopt the relevant standards?  They&#x27;re fairly sensible and work successfully for userspace code.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907072/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor907079"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 3, 2022 16:48 UTC (Sat)
                               by <b>pbonzini</b> (subscriber, #60935)
                              [<a href="/Articles/907079/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Because PRIx64 1) is a total pain in the butt, and 2) is in inttypes.h which is *not* part of the freestanding environment. And anyway the kernel is older than C99 stdint.h.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907079/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor907577"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 9, 2022 14:38 UTC (Fri)
                               by <b>andyp</b> (subscriber, #48701)
                              [<a href="/Articles/907577/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Indeed it seems like a stretch to imagine the whole kernel switching to the standard types, but it would be great if _just the uapi_ headers used the standard types so that we didn&#x27;t have to work around the incompatibilities in every userspace project that uses them.<br>
<p>
#ifdef __KERNEL__<br>
/* Current definitions */<br>
#else<br>
typedef __u64 uint64_t;<br>
typedef __u32 uint32_t;<br>
/* etc. */<br>
#endif<br>
<p>
Or something like that.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907577/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor907107"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 4, 2022 9:00 UTC (Sun)
                               by <b>bmork</b> (subscriber, #88411)
                              [<a href="/Articles/907107/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Does anyone have a link to this?</font><br>
<p>
This has been discussed so many times that it&#x27;s hard to know exactly which post that refers to.  But I guess it could be the 2004 rant Russel reposted here: <a href="https://lkml.iu.edu/hypermail/linux/kernel/1506.0/00160.html">https://lkml.iu.edu/hypermail/linux/kernel/1506.0/00160.html</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907107/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor907024"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 2, 2022 23:33 UTC (Fri)
                               by <b>koh</b> (subscriber, #101482)
                              [<a href="/Articles/907024/">Link</a>] (9 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I commend Colomar for trying to use std types! What I don&#x27;t understand is why it&#x27;s frowned upon to use std-definable types. Std-C has come a long way since the kernel was born (and so has the kernel). It is possible now, even in man-pages, to specify exactly how alignment should be. Where exactly is the problem of using a differentky named but compatible type?<br>
<p>
Note: &quot;compatible type&quot; is all C requires for interchangeability.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907024/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor907041"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 3, 2022 6:07 UTC (Sat)
                               by <b>epa</b> (subscriber, #39769)
                              [<a href="/Articles/907041/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Yes, can someone explain why the kernel cannot include stdint.h, or have its own copy? Obviously it cannot pull in the whole C standard library but it could pick a few typedefs. <br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907041/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor907047"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 3, 2022 10:18 UTC (Sat)
                               by <b>jengelh</b> (subscriber, #33263)
                              [<a href="/Articles/907047/">Link</a>] (7 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
1. The kernel is a so-called freestanding environment. There is no C library it could use - the presence of e.g. strcpy or uint32_t in the kernel source code for its own use comes from the kernel&#x27;s own implementation, not from libc. (Build tools excluded from the discussion.)<br>
<p>
2. For *any* typedef for uint32_t that /usr/include/linux/types.h would provide, a libc implementation sufficiently unknown to the Linux project could provide a /usr/include/stdint.h with a re-declaration of the typedef in an incompatible form (e.g. by making use of some weird implementation-defined extensions). So that&#x27;s why even a subset of the C library is not going to be used.<br>
<p>
(That didn&#x27;t prevent people from using uint* in e.g. /usr/include/linux/sctp.h. Because frankly, the number of libcs that are decidedly playing evil is quite close to zero.)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907047/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor907048"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 3, 2022 10:46 UTC (Sat)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/907048/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; 2. For *any* typedef for uint32_t that /usr/include/linux/types.h would provide, a libc implementation sufficiently unknown to the Linux project could provide a /usr/include/stdint.h with a re-declaration of the typedef in an incompatible form</font><br>
<p>
Why is this a problem? The kernel will not be using ANY libc during its build. It comes into play only when the headers are used in userspace software. Using something like:<br>
<p>
<font class="QuotedText">&gt; #ifdef __KERNEL__ </font><br>
<font class="QuotedText">&gt; #include &lt;kernels_homegrown_types.h&gt;</font><br>
<font class="QuotedText">&gt; #else</font><br>
<font class="QuotedText">&gt; #include &lt;stdint.h&gt;</font><br>
<font class="QuotedText">&gt; #endif</font><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907048/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor907149"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 5, 2022 8:55 UTC (Mon)
                               by <b>metan</b> (subscriber, #74107)
                              [<a href="/Articles/907149/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Tried that, it&#x27;s not that simple unfortunately. For C++ this change breaks ABI since the mangled names end up different if you change the types and overloaded function may not match either.<br>
<p>
See the v3 of the patch I send <a href="https://lore.kernel.org/lkml/CAK8P3a2J5k2ub6TNu9qDympdWEdQkqpbL_SqAznpwaQa+S9kXQ@mail.gmail.com/T/">https://lore.kernel.org/lkml/CAK8P3a2J5k2ub6TNu9qDympdWEd...</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907149/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor907049"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 3, 2022 11:01 UTC (Sat)
                               by <b>pbonzini</b> (subscriber, #60935)
                              [<a href="/Articles/907049/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Some headers, including stdint.h, are available even in freestanding environments. They are provided by the compiler, not the C library, and are effectively part of the platform ABI.<br>
<p>
One reason for Linux does not use them is for compatibility between platforms, so that the same driver code compiles independent of which types are used for the definition of uintNN_t (without e.g. warnings about incompatible pointer types between long long and intNN_t).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907049/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor907221"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 5, 2022 22:03 UTC (Mon)
                               by <b>NYKevin</b> (subscriber, #129325)
                              [<a href="/Articles/907221/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Why does the reader of this man page care? My assumption is that the average person reading a man page about a syscall is probably a userspace developer, who is (most likely) going to call it through a libc wrapper (or perhaps through a Go wrapper, although at that point the API is going to differ anyway).* In that context, the kernel typedefs are not in scope, are probably unfamiliar to the average userspace developer, and manually recreating those typedefs is forbidden by the C standard (which reserves underscore-prefixed type names), so it is not possible for the given declaration to be correct on the userspace side of the fence.<br>
<p>
TL;DR: Is this man page intended for kernel developers, and just incidentally useful to userspace developers, or vice-versa? It can&#x27;t be both.<br>
<p>
* Yes, libc probably should provide documentation for their wrappers. But they don&#x27;t, because the GNU people hate man pages.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907221/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor907322"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 6, 2022 17:15 UTC (Tue)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/907322/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; * Yes, libc probably should provide documentation for their wrappers. But they don&#x27;t, because the GNU people hate man pages.</font><br>
<p>
I&#x27;m inclined to agree, but they could always do info pages instead. There&#x27;s a fairly simple way to convert tbem to man, I believe...<br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907322/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor907324"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 6, 2022 17:57 UTC (Tue)
                               by <b>mpr22</b> (subscriber, #60784)
                              [<a href="/Articles/907324/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
An info file structured like GNU say info files are supposed to be structured makes a very poor man page.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907324/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor907335"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 6, 2022 19:56 UTC (Tue)
                               by <b>NYKevin</b> (subscriber, #129325)
                              [<a href="/Articles/907335/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
On top of that, they already have info pages for glibc: <a href="https://www.gnu.org/software/libc/manual/">https://www.gnu.org/software/libc/manual/</a><br>
<p>
As you can see from the table of contents (<a href="https://www.gnu.org/software/libc/manual/html_node/index.html">https://www.gnu.org/software/libc/manual/html_node/index....</a>), they really aren&#x27;t structured like a set of man pages at all. This manual is useful, if you&#x27;re trying to learn an entire API from the ground up, but less so if you just want to look up the signature of a function, its invariants, errno values, or something like that.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907335/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor907026"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 3, 2022 0:18 UTC (Sat)
                               by <b>Manifault</b> (guest, #155796)
                              [<a href="/Articles/907026/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
For what it&#x27;s worth, Michael introduced himself as a &quot;comaintainer&quot; of the man-pages project (since 2020) when he gave his talk [0] at KR in May 2022.<br>
<p>
Also, it seems like a bit of a broken process if the maintainer of a documented system with a man page cannot override a suggestion to update how that system is documented in its man page. I get that man-pages is a different repo, but this doesn&#x27;t seem conducive to providing users with the most accurate documentation, nor does it seem scalable. In general, I&#x27;ll admit that I don&#x27;t really understand why it wouldn&#x27;t be better for everyone for the man-pages project to just pull documentation for these large subsystems directly from the kernel tree. What&#x27;s the point of having two sources of &quot;truth&quot; for documentation? Especially when the maintainer of the actual subsystem only has control over one of them (so only one of them is really the source of truth).<br>
<p>
https://kernel-recipes.org/en/2022/once-upon-an-api/<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907026/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor907073"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 3, 2022 16:02 UTC (Sat)
                               by <b>cortana</b> (subscriber, #24596)
                              [<a href="/Articles/907073/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
And here&#x27;s me simply wishing that Glibc provided documentation for every system call that it provides a wrapper for...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907073/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor907078"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 3, 2022 16:41 UTC (Sat)
                               by <b>pm215</b> (subscriber, #98099)
                              [<a href="/Articles/907078/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Having the manpages in the kernel tree would also make it easier to ensure that all new syscalls and other userspace interfaces came with documentation...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907078/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor907353"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 6, 2022 23:51 UTC (Tue)
                               by <b>Manifault</b> (guest, #155796)
                              [<a href="/Articles/907353/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Agreed. In my opinion the kernel should absolutely document the behavior of its syscalls, rather than relying on man or e.g. some libc library to document it for them. I think that&#x27;s especially true for Linux, where there is 0 tolerance for backwards compatibility changes, even for unintended behavior / bugs that were introduced in earlier implementations of a syscall (see Michael&#x27;s talk for a particularly &quot;rich&quot; example).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907353/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor907088"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 3, 2022 19:56 UTC (Sat)
                               by <b>scientes</b> (guest, #83068)
                              [<a href="/Articles/907088/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; You&#x27;ve been told multiple times that the kernel doesn&#x27;t use the</font><br>
&quot;standard&quot; names, and *cannot* use them for namespace reasons, and you<br>
ignore all the feedback, and then you claim you are asking for review?<br>
-Torvalds<br>
<p>
This isn&#x27;t true. Look at &lt;stdbool.h&gt; (Linus&#x27; criticism of it non-withstanding)---c compilers certainly *could* support &lt;stdint.h&gt; in freestanding mode, they just don&#x27;t.<br>
<p>
It is like his criticism of the C++ memory model, which is just fine, and could totally be used by Linux.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907088/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor907090"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 3, 2022 20:00 UTC (Sat)
                               by <b>scientes</b> (guest, #83068)
                              [<a href="/Articles/907090/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I have read glibc code that used K&amp;R old-style function declarations, which make C&#x27;s origin&#x27;s as a macro processor very clear. We need to support those in Linux! /notfunny (and neither is Linus trying to say that &lt;stdint.h&gt; cannot be used, instead of asking why gcc/clang have not fixed it. (same goes with his criticisms of &lt;stdbool.h&gt; and once asking memcpy() to be redefined as memmove()----go fix the standard! go fix the programs! stop claiming you are so special you can&#x27;t use the C++ memory model!<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907090/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor907121"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 4, 2022 20:00 UTC (Sun)
                               by <b>fw</b> (subscriber, #26023)
                              [<a href="/Articles/907121/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
GCC supports &lt;stdint.h&gt; in freestanding mode. The #include_next directive in the compiler-provided header is skipped, making it self-contained. The kernel just does not use freestanding mode on most architectures.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907121/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor907443"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 8, 2022 0:32 UTC (Thu)
                               by <b>milesrout</b> (subscriber, #126894)
                              [<a href="/Articles/907443/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I suspect this would have been more acceptable if it didn&#x27;t use the HIDEOUS new [[gnu::aligned(8)]] syntax. Who thought that incredibly ugly crap looks good? It might not stand out much in C++, but what is this double colon thing doing in C?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907443/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor907537"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What's in a (type) name?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 9, 2022 1:13 UTC (Fri)
                               by <b>foom</b> (subscriber, #14868)
                              [<a href="/Articles/907537/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I dunno why it used the non-standard gnu attribute in syntax that&#x27;s only valid since C23, instead of the standard (since C11) `alignas(8)`, anyhow...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/907537/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2022, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
