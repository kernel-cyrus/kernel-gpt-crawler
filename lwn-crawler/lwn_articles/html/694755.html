        <!DOCTYPE html>
        <html lang="en">
        <head><title>Coding-style exceptionalism [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/694755/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/694482/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/694755/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>Coding-style exceptionalism</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>LWN.net needs you!</b>
<p>
Without subscribers, LWN would simply not exist.  Please consider
       <a href="/Promo/nst-nag2/subscribe">signing up for a subscription</a> and helping
       to keep LWN publishing.
</blockquote>
<div class="GAByline">
           <p>July 20, 2016</p>
           <p>This article was contributed by Neil&nbsp;Brown</p>
           </div>
<p>As I was analyzing the behavioral details of various drivers as part
of my research for <a href="/Articles/694062/">a recent article on USB
battery charging in Linux</a>, 
I was struck by the the thought that code doesn't exist just to make
certain hardware perform certain functions.  Important though that is,
the code in Linux, and in other open projects, also exists as a
cultural artifact through which we programmers communicate and from
which we learn.  The disappointment I felt at the haphazard quality I
found was not simply because some hardware somewhere might not
perform optimally.  It was because some other programmer tasked with
writing a similar driver for new hardware might look to some of these
drivers for inspiration, and might copy something that was barely
functional and not use the best interfaces available.</p>

<p>With these thoughts floating around my mind I was interested to find a recent
<a href="http://thread.gmane.org/20160629144242.GE22818@mwanda">thread</a>
on the linux-kernel mailing list that was more concerned about how a block
of code looked than about what it did.

<p>The code in question handles SHA-256 hash generation on
Intel x86 platforms.  The thread started because Dan Carpenter's <a
href="/Articles/691882/">smatch
tool</a> had found some unusual code:</p>

<pre>
    if ((ctx-&gt;partial_block_buffer_length) | (len &lt; SHA256_BLOCK_SIZE)) {
</pre>

<p>The &quot;<tt>|</tt>&quot; here looks like it was probably meant to be
&quot;<tt>||</tt>&quot; — so there was a bit-wise &quot;or&quot; where a logical
&quot;or&quot; is more common.  Carpenter went to some pains to be clear
that he knew the code would produce the same result no matter which
operator was used, but observed that "<q>it's hard to tell the
intent.</q>" Intent doesn't matter to a compiler, but it does to a
human reader.  Even well-written code can be a challenge to read due to the
enormous amount of detail embedded in it.  When there is an unusual
construct that you need to stop and think about, that doesn't make it any
easier.</p>

<p>There
were a couple of suggestions that this was an intentional optimization and
there is some justification for this.  With both GCC&nbsp;4.8 and&nbsp;5.3
compiling for x86_64, the &quot;<tt>|</tt>&quot; version produces one fewer
instruction, avoiding a jump.  In some cases that small
performance difference might be worth the small extra burden on the reader,
though as Joe Perches <a
href="http://article.gmane.org/gmane.linux.kernel/2256830">observed</a>:
"<q>It's probably 
useful to add a comment for the specific intent here</q>"; that
would not only make it easier to read, but would ensure that nobody broke the
optimization in the future.  Further, the value of such optimizations can
easily vary from compiler to compiler.</p>

<p>Once a little attention was focused on this code, other complaints arose,
with <a
href="http://article.gmane.org/gmane.linux.kernel.cryptoapi/20996">Ingo
Molnar complaining</a> about the excessive use of parentheses, the
unusually long field name <tt>partial_block_buffer_length</tt>, and,
responding to what is clearly a sore spot for some, requesting that the
&quot;customary&quot; style be used for multi-line comments.</p>

<p><a
href="https://kernel.org/doc/Documentation/CodingStyle"><tt>Documentation/Codingstyle</tt></a> explains that:</p>

<pre>
    The preferred style for long (multi-line) comments is:

        /*
         * This is the preferred style for multi-line
         * comments in the Linux kernel source code.
         * Please use it consistently.
         *
         * Description:  A column of asterisks on the left side,
         * with beginning and ending almost-blank lines.
         */

    For files in net/ and drivers/net/ the preferred style for long (multi-line)
    comments is a little different.

        /* The preferred comment style for files in net/ and drivers/net
         * looks like this.
         *
         * It is nearly the same as the generally preferred comment style,
         * but there is no initial almost-blank line.
         */
</pre>

<p>The code under the microscope is in <tt>arch/x86/crypto</tt> — not
strictly part of the networking subsystem — but this code uses
the style for <tt>net/</tt> and
<tt>drivers/net/</tt> in at least one place.  Herbert Xu, the crypto subsystem
maintainer, <a
href="http://article.gmane.org/gmane.linux.kernel.cryptoapi/20997">asserted</a>
that 
the crypto API uses the same style as networking, but Molnar wasn't
convinced and neither, it turned out, was Linus Torvalds.  I won't try to
summarize <a
href="http://article.gmane.org/gmane.linux.kernel.cryptoapi/21066">Torvalds's
rant</a> (which he promised he would not follow up on) but I will examine a
concrete and 
testable assertion made by Molnar: "<q>That 'standard' is
not being enforced consistently at all</q>".</p>

<p>Looking at the &quot;<tt>.c</tt>&quot; and &quot;<tt>.h</tt>&quot; files
in linux 4.7-rc7 and using fairly simple regular expressions (which might
have occasional false positives), the string &quot;<tt>/*</tt>&quot; appears
1,308,166 times, suggesting the presence of over 1.3 million comments.  Of
those, 981,168 are followed by
&quot;<tt>*/</tt>&quot; on the same line, leaving 326,998 multi-line
comments.

200,737 of these have nothing (apart from the occasional space) following
the opening &quot;<tt>/*</tt>&quot; on the first line, and 51,366 start with
&quot;<tt>/**</tt>&quot; which indicates a &quot;kernel-doc&quot; formatted
comment, leaving 74,895 multi-line comments in the non-customary format with
  text on the first line.
<p>

These three groups are present in a ratio of approximately 8:2:3.  The
kernel-doc comments have to be in the expected format to be properly
functional, leaving the developer no discretion; it thus isn't reasonable
to include them when looking at the choices developers have made.  Of
the multi-line comments where the programmer has some discretion, we find
an 8:3 ratio of customary format, in the sense Molnar meant it, to
others.  So 27% are non-standard.

<p>If we repeat these measurements for <tt>net/</tt>,
<tt>drivers/net/</tt>, <tt>crypto/</tt>, and
<tt>drivers/crypto/</tt>, the number of non-standard multi-line comments are:</p>

<blockquote>

<table class="OddEven">
<tr><th rowspan=2>Subsystem</th><th colspan=2>Comments</th>
    <th rowspan=2>Percent</th></tr>
<tr><th>Total</th><th>Net-style</th></tr>
<tr><td><tt>net/</tt></td>
    <td align="right">13,441</td>
    <td align="right">6,423</td>
    <td>48%</td></tr>
<tr><td><tt>drivers/net/</tt></td>
    <td align="right">36,599</td>
    <td align="right">19.516</td>
    <td>54%</td></tr>
<tr><td><tt>crypto/</tt></td>
    <td align="right">593</td>
    <td align="right">171</td>
    <td>29%</td></tr>
<tr><td><tt>drivers/crypto/</tt></td>
    <td align="right">706</td>
    <td align="right">178</td>
    <td>25%</td></tr>
</table>

</blockquote>

<p>So broadly, the evidence does seem to support Molnar's claim.  While
"text-on-the-first-line" comments are more common in the networking code,
they just barely constitute a majority of multi-line comments there and
they are not significantly more common in the crypto code. This statistic
doesn't tell us a lot, but it does suggest that the supposed "preferred"
style for the networking code is not consistently preferred in practice,
and that sticking to it for new comments wouldn't actually improve the
overall consistency of that code.



<p>Some of us may think this is all a storm in a teacup and that empty
lines in comments, much like empty lines in code, are a matter of personal
taste and nothing more.  For many people this may be true.  But open-source code
will particularly benefit from being read by people who have a high
attention for details, who will notice things that look a bit out of place,
and who can spot bugs that compilers or static analyzers will miss.  These
people are likely to notice, and so be burdened by, irrelevant details
like non-standard comments.</p>

<p>For Molnar at least, "<q>the networking code's
'exceptionalism' regarding the standard comment style is super
distracting</q>" and there is evidence that he is not alone in this.  To
get the greatest value from other people reading our code, it makes sense
to keep it as easy to read as possible.  The code doesn't just belong to
the author, it belongs to the community which very much includes those who
will read it, whether to fix bugs, to write documentation, or as a basis
for writing new drivers.  We serve that community, and so indirectly
ourselves, best when we make our code uniform and easy for others to
read.</p><br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Coding_style">Coding style</a></td></tr>
            <tr><td><a href="/Archives/GuestIndex/">GuestArticles</a></td><td><a href="/Archives/GuestIndex/#Brown_Neil">Brown, Neil</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/694755/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor695050"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Coding-style exceptionalism</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 21, 2016 10:55 UTC (Thu)
                               by <b>epa</b> (subscriber, #39769)
                              [<a href="/Articles/695050/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <pre>
/*****************************************************************************/
/* Linus is right - and moreover, his insight can be generalized.  The lack  */
/* of a uniform, strongly enforced comment style on LWN makes discussions    */
/* harder to read and reduces maintainability of the site.  I don't          */
/* understand why those who write comments on LWN articles fail to stick to  */
/* the obvious convention.                                                   */
/*****************************************************************************/
</pre>
      
          <div class="CommentReplyButton">
            <form action="/Articles/695050/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor695102"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Coding-style exceptionalism</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 21, 2016 14:50 UTC (Thu)
                               by <b>smitty_one_each</b> (subscriber, #28989)
                              [<a href="/Articles/695102/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
//I see what you did there.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/695102/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor695750"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Coding-style exceptionalism</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 28, 2016 23:41 UTC (Thu)
                               by <b>dfsmith</b> (guest, #20302)
                              [<a href="/Articles/695750/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
#define COMMENT 0<br>
<p>
#if COMMENT<br>
There are some quite obnoxious ways<br>
to make a multi-line comment.<br>
#endif<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/695750/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor695752"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Coding-style exceptionalism</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 28, 2016 23:47 UTC (Thu)
                               by <b>dfsmith</b> (guest, #20302)
                              [<a href="/Articles/695752/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
#define REMINDER(X)<br>
<p>
REMINDER(<br>
And as long as you don't need a comma; this one<br>
handles both multi-line...<br>
)<br>
<p>
exit(good_grief); REMINDER(... and inline.)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/695752/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor695783"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Coding-style exceptionalism</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 29, 2016 11:36 UTC (Fri)
                               by <b>cladisch</b> (<b>&#x272D; supporter &#x272D;</b>, #50193)
                              [<a href="/Articles/695783/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <p>This macro can be, er, improved by making it variadic:</p>
<p><tt>#define REMINDER(...)</tt></p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/695783/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor696572"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Coding-style exceptionalism</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 5, 2016 20:04 UTC (Fri)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/696572/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
#if 0<br>
<p>
But multi-line comments featuring #if 0 don't work because #if is processed too late.<br>
<p>
We are in serious trouble now, for instance.<br>
#endif<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/696572/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor695122"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Coding-style exceptionalism</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 21, 2016 20:43 UTC (Thu)
                               by <b>njd27</b> (subscriber, #5770)
                              [<a href="/Articles/695122/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I find myself reminiscing fondly of alt.fan.warlord<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/695122/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor695123"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Coding-style exceptionalism</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 21, 2016 21:11 UTC (Thu)
                               by <b>iabervon</b> (subscriber, #722)
                              [<a href="/Articles/695123/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <pre>
I don't know about that; I find that comments on LWN stick to flowed
paragraphs in proportional fonts, except when there is something in
particular to convey by line-breaks. If someone were to post with
fixed-length lines as a matter of personal style, it would actually be
quite distracting.

Of course, since LWN takes care of delimiting particular comments from
other text, it's not necessary to have standards for that (e.g., we
don't have to conform to a standard on how to let people know that the
text that we slipped into an article isn't actually part of the
article, but rather an inline comment, because we can't do that). And
LWN's rendering takes care of presenting the metadata, and does it
consistently (for each reader) without any standard followed by the
poster. So the aspects that coding-system standardizes aren't really
variable on LWN anyway.
</pre>
      
          <div class="CommentReplyButton">
            <form action="/Articles/695123/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor696574"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Coding-style exceptionalism</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 5, 2016 20:06 UTC (Fri)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/696574/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <blockquote>
I don't know about that; I find that comments on LWN stick to flowed
paragraphs in proportional fonts, except when there is something in
particular to convey by line-breaks. If someone were to post with
fixed-length lines as a matter of personal style, it would actually be
quite distracting.
</blockquote>
Of course, some people make a habit (bordering on fetish) of that, for instance, <a href="https://gitlab.com/procps-ng/procps/commits/master?utf8=%E2%9C%93&search=Jim+Warner">Jim Warner</a>, maintainer of top.
      
          <div class="CommentReplyButton">
            <form action="/Articles/696574/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor695139"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Coding-style exceptionalism</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 22, 2016 8:02 UTC (Fri)
                               by <b>linusw</b> (subscriber, #40300)
                              [<a href="/Articles/695139/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
This phenomenon that programmers have very strong opinions on very small syntactic issues was ridiculed even in popular culture in a recent episode of the TV series Silion Valley which brought up the eternal TABs vs spaces thing again, so the general populace can have some popcorn and feel better than the geeks.<br>
<p>
What would be really interesting would be if a cognitive scientist could add some hard facts to the issue. Those people can tell objectively by test audiences and eye tracking etc what is actually best for cognition, it's not "just like, your opinion man" this is a thing that can be determined by applied science. It can be determined which syntax is in general and at large best for the human perception.<br>
<p>
Somebody just has to do it. I wish I knew a cognitive scientist up to the task of analyzing some of these for us once and for all.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/695139/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor695140"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Coding-style exceptionalism</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 22, 2016 8:12 UTC (Fri)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/695140/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<a href="http://www.sandraandwoo.com/2015/04/13/0674-there-are-10-types-of-programmers/comment-page-4/">http://www.sandraandwoo.com/2015/04/13/0674-there-are-10-...</a><br>
<p>
Personally, I've become less strict about code style.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/695140/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor695203"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Coding-style exceptionalism</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 23, 2016 4:27 UTC (Sat)
                               by <b>pr1268</b> (subscriber, #24648)
                              [<a href="/Articles/695203/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <p>It's a telltale sign of <a href="http://www.nimh.nih.gov/health/topics/obsessive-compulsive-disorder-ocd/index.shtml">OCD</a>.</p>

<p>...spoken from someone who is so afflicted. :-\</p>

      
          <div class="CommentReplyButton">
            <form action="/Articles/695203/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor695404"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Coding-style exceptionalism</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 26, 2016 10:21 UTC (Tue)
                               by <b>HenrikH</b> (subscriber, #31152)
                              [<a href="/Articles/695404/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The problem is not what is best for cognition, the problem (which is also spelled out in the article) is that people who have to verify lots of patches have trained themselves to look for inconsistencies and therefore their brain sees the difference in commenting style and puts an unneeded amount of time processing that which halts the streamlined process of verifying the actual code in question.<br>
<p>
So which commenting style that is used is completely irrelevant while being consistent is.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/695404/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor695685"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Coding-style exceptionalism</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 28, 2016 15:12 UTC (Thu)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/695685/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Exactly.<br>
<p>
Look at speed-reading. I curse people who claim that one particular style of English is "correct" (usually a new variant, where the derided version has quite clearly been around far longer ... :-), but I'm very much a stickler for "standard" English. If you don't have a reason for using archaic or dialect English, then don't!<br>
<p>
Thing is, *learners* read letter-by-letter. Experienced readers read symbol-by-symbol - that symbol usually being the entire word. A smelling pistake makes it "feel weird", and to a speed-reader (as I like to put it) it has the same effect as a speeding bike wheel hitting a half-brick in the road - even if you don't come off it's a jarring experience.<br>
<p>
Since I've had to cope with American on these web sites I'm far more tolerant of their weird spelling, but it still has a habit of slowing me down.<br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/695685/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor696129"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Coding-style exceptionalism</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 3, 2016 6:43 UTC (Wed)
                               by <b>toyotabedzrock</b> (guest, #88005)
                              [<a href="/Articles/696129/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Pretty sure open source projects are allergic to that type of testing.<br>
<p>
And the public should be glad tabs don't work the same in browsers as they do in text editors. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/696129/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor695202"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">One pipe is faster than two?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 23, 2016 3:59 UTC (Sat)
                               by <b>pr1268</b> (subscriber, #24648)
                              [<a href="/Articles/695202/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <blockquote><font class="QuotedText">The &quot;|&quot; here looks like it was probably meant to be &quot;||&quot; &mdash; so there was a bit-wise &quot;or&quot; where a logical &quot;or&quot; is more common. Carpenter went to some pains to be clear that he knew the code would produce the same result no matter which operator was used, but observed that &quot;it's hard to tell the intent.&quot;<br/>

...<br/>
<br/>
With both GCC 4.8 and 5.3 compiling for x86_64, the &quot;|&quot; version produces one fewer instruction, avoiding a jump.</font></blockquote>

<p>That sounds like something straight out of <a href="http://www.hackersdelight.org/">Hacker's Delight</a>.</p>

      
          <div class="CommentReplyButton">
            <form action="/Articles/695202/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor695216"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">One pipe is faster than two?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 23, 2016 19:04 UTC (Sat)
                               by <b>tao</b> (subscriber, #17563)
                              [<a href="/Articles/695216/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I guess the question, at least for this particular case, is: shouldn't gcc be able to avoid the jump for both versions?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/695216/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor695219"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">One pipe is faster than two?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 23, 2016 20:26 UTC (Sat)
                               by <b>excors</b> (subscriber, #95769)
                              [<a href="/Articles/695219/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      I guess in theory you could have code like:
<pre>
<code>    int len; /* uninitialised */
    if (ctx-&gt;partial_block_buffer_length == 0)
        len = 1;
    f(ctx, len);

    void f(struct ctx *ctx, int len)
    {
        if ((ctx-&gt;partial_block_buffer_length) || (len &lt; SHA256_BLOCK_SIZE)) {
</code></pre>
If you turn the <code>||</code> into a <code>|</code>, the condition would start depending on an uninitialised value. That should still be safe on most architectures (int comparison won't raise exceptions - it'd be different if there was a pointer dereference or floating point), but I think it would at least make Valgrind complain, and breaking Valgrind would be a shame.
      
          <div class="CommentReplyButton">
            <form action="/Articles/695219/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor695388"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">One pipe is faster than two?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 26, 2016 7:13 UTC (Tue)
                               by <b>jezuch</b> (subscriber, #52988)
                              [<a href="/Articles/695388/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I would call this code... horrible. I'm glad that it wouldn't compile in Java ;) I'm also glad that even if you make it compile without serious refactoring, then findbugs will complain (I think).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/695388/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor696575"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">One pipe is faster than two?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 5, 2016 20:10 UTC (Fri)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/696575/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It is fairly routine in C. A gigantic amount of code would fail to compile if you stopped || and &amp;&amp; from short-circuiting.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/696575/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor695353"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">One pipe is faster than two?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 25, 2016 21:29 UTC (Mon)
                               by <b>vbabka</b> (subscriber, #91706)
                              [<a href="/Articles/695353/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It has to obey the lazy evaluation rules for ||. But I guess if it can prove that the latter part has no side effects or depend on uninitialized vars, and thinks it's unlikely for the first part to be false...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/695353/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor695421"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">One pipe is faster than two?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 26, 2016 14:08 UTC (Tue)
                               by <b>jezuch</b> (subscriber, #52988)
                              [<a href="/Articles/695421/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; It has to obey the lazy evaluation rules for ||.</font><br>
<p>
The compiler is obligated to generate code that behaves *as if* these rules were obeyed. This is one of the [many] reasons the imperative paradigm requires serious cleverness in the compiler: so that it can prove that there are no illicit side effects, because pure functions are *vastly* easier to work with.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/695421/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor695505"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Coding-style exceptionalism</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 27, 2016 9:25 UTC (Wed)
                               by <b>rvfh</b> (guest, #31018)
                              [<a href="/Articles/695505/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
checkpatch does not allow C++ comments. I guess only few people actually run checkpatch on new kernel code...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/695505/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor695845"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Too much emphasis on low level formatting rather than construct</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 30, 2016 12:08 UTC (Sat)
                               by <b>simlo</b> (guest, #10866)
                              [<a href="/Articles/695845/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
In my jobs as software developer/architect, I have always been fighting too detailed coding style requirements. It so easy to pick a fight over - and in the end not actually increase code quality.<br>
<p>
I agree, that a consistent style makes code easier to read, but as many of us have to read code from many different projects and languages, it does not matter that much.<br>
<p>
My current boss for fun suggested that we should simply run a commit hook removing all formatting, and at checkout each developer could run his own code formatter to his delight..<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/695845/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor695854"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Too much emphasis on low level formatting rather than construct</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 30, 2016 21:24 UTC (Sat)
                               by <b>micka</b> (subscriber, #38720)
                              [<a href="/Articles/695854/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Removing formatting is actually a kind of code formatting.<br>
If you say: I don't want to decide between the n kind of indentation and then remove all indentations on all line... you just decided the indentation format: zero spaces (or zero tabs, etc.).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/695854/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor695870"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Too much emphasis on low level formatting rather than construct</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 31, 2016 12:14 UTC (Sun)
                               by <b>simlo</b> (guest, #10866)
                              [<a href="/Articles/695870/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Except when removing formatting at checkin, you avoid formatting conflicts.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/695870/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor695871"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Too much emphasis on low level formatting rather than construct</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 31, 2016 12:35 UTC (Sun)
                               by <b>micka</b> (subscriber, #38720)
                              [<a href="/Articles/695871/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
For the case of tabulations ok, but think about the simplest example that comes after. For the C family of languages, you have to decide where to place curly braces. The different choices span from 1 to 3 lines.<br>
<p>
for (...) {<br>
   ..<br>
}<br>
<p>
v.s.<br>
<p>
for (...)<br>
{<br>
   ...<br>
}<br>
<p>
If you want to prevent a one-line change to become a noise-commit, you have to decide on a normalized form before commit.<br>
"Removing formatting at commit" _is_ deciding of one format.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/695871/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor695872"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Too much emphasis on low level formatting rather than construct</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 31, 2016 13:03 UTC (Sun)
                               by <b>mathstuf</b> (subscriber, #69389)
                              [<a href="/Articles/695872/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I've seen it talked about multiple times, but are there any projects which actually do this? I also pity those who have to read the code without the proper tools; even these "solutions"which try to please everyone fail pretty hard at it. Best is to clmmjt a script to format the code properly and if your commit has a diff after running it, it isn't following the style.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/695872/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor696450"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Too much emphasis on low level formatting rather than construct</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 4, 2016 21:29 UTC (Thu)
                               by <b>dtlin</b> (subscriber, #36537)
                              [<a href="/Articles/696450/">Link</a>] 
      </p>
      
      </div>
      </summary>
      I don't know of any projects with <q>no formatting</q> either. On the other hand, tool-assisted standard formatting, definitely yes, e.g. when contributing to golang, you are expected to use <a href="https://godoc.org/golang.org/x/review/git-codereview#hdr-Hooks">git-codereview hooks</a> which include automatic gofmt formatting.
      
          <div class="CommentReplyButton">
            <form action="/Articles/696450/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2016, Eklektix, Inc.<BR>
            
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
