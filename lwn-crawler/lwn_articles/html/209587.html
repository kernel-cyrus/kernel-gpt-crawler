        <!DOCTYPE html>
        <html lang="en">
        <head><title>Toward a free Atheros driver [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/209587/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/208632/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/209587/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>Toward a free Atheros driver</h1>
<div class="Byline">[Posted November 15, 2006 by corbet]
               <p>
               </div>
</div>
<div class="ArticleText">
The Atheros family of wireless chipsets finds its way into a number of
network adapters and laptop systems.  It is a flexible and capable device,
with one little limitation: there is no free Linux driver available.  Linux
support can be had via the freely-downloadable <a
href="http://madwifi.org/">MadWifi driver</a>, but, at the core of that
driver, there is a binary-only "hardware access layer" (HAL) module which
does much of the real work.  This module has all of the problems associated
with proprietary drivers: it cannot be audited or fixed, it cannot be
improved, it is only available for the kernel versions and architectures
supported by the manufacturer, etc.  But, for Linux users, the choices are
MadWifi or nothing.
<p>

A free Atheros HAL module called "ar5k," written by Reyk Floeter, has been
in circulation for a couple of years; OpenBSD uses it.  But this code has
long been followed by allegations that it was improperly developed and
potentially subject to copyright claims by Atheros.  In the current
climate, nobody wants to risk bringing possibly tainted code into the
kernel; the potential consequences are just too severe.  So, while the
desire to support Atheros devices in Linux remains strong, the existing HAL
has not been considered and little work has been done to bring that about.

<p>

Except that, as it turns out, work has been quietly happening in an
unexpected place.  The Software Freedom Law Center was asked by the ar5k
developers to look at the development history of the code and come up with
a pronouncement on whether it was legitimate (from a copyright law
perspective) or not.  On November&nbsp;14, the SFLC produced <a
href="http://lwn.net/Articles/209472/">its answer</a>:
<p>
<div class="BigQuote">
	SFLC has made independent inquiries with the OpenBSD team regarding
	the development history of ar5k source.  The responses received
	provide a reasonable basis for SFLC to believe that the OpenBSD
	developers who worked on ar5k did not misappropriate code, and that
	the ar5k implementation is OpenBSD's original copyrighted work.
</div>
<p>
This finding should clear the way for the entry of the free Atheros HAL
into the Linux kernel - eventually.  But there are a couple of problems
which need to be overcome first.
<p>

One of those is the general level of upheaval in the Linux wireless subsystem.
The developers still intend to move over to the Devicescape stack and to
get that code into the mainline, but there is still work to be done in that
area.  But a new wireless driver which does not work with Devicescape will
have a harder path into the kernel.  There is an effort to move MadWifi
over to Devicescape (it's called "DadWifi"), so that might be the quickest
path for Atheros support to get into the kernel.
<p>

The other problem, however, is that code based on the HAL concept tends to
be unpopular at best.  A HAL is typically seen as an unnecessary
abstraction layer between the driver and the hardware which serves to
obscure what's really going on while adding no real value of its own.  So
developers who propose HAL-based drivers are usually told to go away and
come back once the HAL is gone.  There is no real reason to expect things
to happen differently this time around.
<p>

But, even if it can't be used directly, the ar5k code is now fair game for
reference and eventual adaptation into a Linux driver.  There are enough
developers out there with an interest in making Atheros adapters work
that the chances of this work getting done in the (relatively) near future
are relatively good.  The list of devices which are not supported by Linux
is about to get shorter.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Devicescape_stack">Devicescape stack</a></td></tr>
            <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Networking-Wireless">Networking/Wireless</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/209587/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor209718"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">HAL-free Atheros</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 16, 2006 9:32 UTC (Thu)
                               by <b>zdzichu</b> (subscriber, #17118)
                              [<a href="/Articles/209718/">Link</a>] 
      </p>
      
      </div>
      </summary>
      And what happened to HAL-free Linux Atheros driver developed by Mateusz Berezecki? It was available at ath-driver.org, which seems dead.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/209718/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor209826"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Toward a free Atheros driver</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 16, 2006 18:22 UTC (Thu)
                               by <b>thyrsus</b> (guest, #21004)
                              [<a href="/Articles/209826/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      I have read that the atheros hardware is capable of violating FCC legal requirements; that revealing how the thing actually works would make someone (manufacturers?) liable for any mischief the device caused; and that this was one of the reasons for the binary obfuscation.  Could someone point me toward an authoritative discussion of the matter?<br>
<p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/209826/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor210121"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Toward a free Atheros driver</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 17, 2006 22:29 UTC (Fri)
                               by <b>brouhaha</b> (subscriber, #1698)
                              [<a href="/Articles/210121/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      If someone modified the code such that the device violated part 15, the party that modified the code in that manner would be the legally responsible party.  No one else would be liable unless it could be shown that they "induced" the violation.<br>
<p>
IANAL, though, so YMMV.<br>
<p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/210121/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor210223"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Toward a free Atheros driver</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 19, 2006 20:51 UTC (Sun)
                               by <b>Baylink</b> (guest, #755)
                              [<a href="/Articles/210223/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      I'm not a lawyer either... but I was a ham.  The issue is Part 15 type acceptance.  In the case of a software-controlled radio, the firmware that controls the card would be part of the type-accepted unit -- and whatever part of that might run on the host PC would thereby *also* be part of it.<br>
<p>
No, this is not authoritative with citations, either, but hopefully, it at least clarifies what people are asserting is the issue.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/210223/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor210224"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Toward a free Atheros driver</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 19, 2006 21:40 UTC (Sun)
                               by <b>brouhaha</b> (subscriber, #1698)
                              [<a href="/Articles/210224/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Sure, but if Atheros ships a Windows driver with the card, and the combination has part 15 type acceptance, that doesn't make them liable if someone else writes different software for it.
<p>
Atheros' claim that this is why they can't publish the documentation on their chipset doesn't wash either.  There's a long history of people modifying radios to operate outside factory spec, either in compliance with the regulations or not.  The fact that schematics of radios and documentation on the circuitry was published by the manufacturer of the radio didn't make them liable for the third-party modifications.

      
          <div class="CommentReplyButton">
            <form action="/Articles/210224/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor210899"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Toward a free Atheros driver</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 23, 2006 12:41 UTC (Thu)
                               by <b>simonckenyon</b> (guest, #41836)
                              [<a href="/Articles/210899/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      The HAL enforces the FCC rules. This was the reason for its creation in the first instance. The author has a good track record when it comes to "free" software, so would not have done it this way unless there was no alternative.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/210899/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor242431"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Toward a free Atheros driver</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 21, 2007 5:28 UTC (Sat)
                               by <b>rasp</b> (guest, #46357)
                              [<a href="/Articles/242431/">Link</a>] 
      </p>
      
      </div>
      </summary>
      But that is like shooting the messenger alas there's no way of preventing<br>
people stabbing each other with the likes of kitchen knives.<br>
For instance (at least in germany) it is legal to _buy_ HAM Radio equipment, but it is illegal to _operate_ it without a license....<br>
(Just my 2 Pfennig :-) )<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/242431/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor292463"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Toward a free Atheros driver</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 2, 2008 1:36 UTC (Sat)
                               by <b>asdf</b> (guest, #53220)
                              [<a href="/Articles/292463/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment"><pre>
I think it's better to look at how the binary HAL is actually being used, rather than have
some baseless faith in an orderly and just authoritarian world and become appologists working
backwards from rules to warm comforting motivations.

<a rel="nofollow" href="http://www.dd-wrt.com/shop/catalog/product_info.php?products_id=717">http://www.dd-wrt.com/shop/catalog/product_info.php?produ...</a>

The DDwrt project has bought access to source code under NDA from Atheros, and is now selling
``unlock codes'' to disable checks DDwrt has compiled into their binary HAL.

You can bicker all you like about whether assisting people to transmit on unauthorized bands
puts DDwrt developers and their children and children's children into mortal danger from duh
LAW, but I don't really care.  It is a DRM scheme.  If it weren't for the binary HAL, the GPL
would make it impossible for DDwrt to lock us out of the hardware we buy, and then sell us
back some slightly less limited access into it.  The tiny binary piece we have allowed to
creep into otherwise GPL'ed DDwrt enables this scheme.

Other ways that the Atheros HAL is used are, like the Intel wireless blob, to protect
algorithms that Atheros thinks give them a competitive advantage, like rate adaptation.  I've
heard rumors also that the NDISwrapper drivers for certain cards do much better than the
open-source drivers on congested networks, so there may be some congestion cleverness built
into the Atheros HAL, too.

Also, since the open source world is forced to use the HAL by lack of documentation, and by
enticing all of its lead developers to sign Atheros NDA's lockingn their friends out of the
project, the open source world is forced to accept whatever second-rate crap HAL it's handed
under a redistributable license, so Leffler can use Linux as an army of captive beta testers
for the HALs his employer, Atheros, would like to put into the next stepping of binary
drivers.

Finally, the HAL source itself is something Atheros can sell to make money.

These are ways that the binary HAL is actually being used.  so make as many excuses as you
like about what it's ``for'', but that is all just a dream.  Here is the fact of how it's
actually used.

I use free software for a reason, and find this disgusting.  Argue all you like to defend
Atheros's ``interest'' or decide who is a good/bad person/company, it's still simply
disgusting to live as a geek in such a restrictive, exploitive, back-stabbing environment as
Atheros and DDwrt have together created.

I'm using OpenBSD and RaLink now.  I will probably end up buying an Atheros chip, and using
DDwrt's HAL, simply because I know of nothing else available that is even close to working on
a (mostly) open-source OS for 802.11a.  Does this make me a hypocrite and invalidate
everything I've said?  Does the lack of competition make continuing to tolarate Leffler,
DDwrt, and the closed HAL right, desireable, or excuseable?  It does not, no more than the
nonexistence of Linux made the lack of free operating systems right, desireable, or excuseable
to the generation of students before my own.

</pre></div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/292463/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2006, Eklektix, Inc.<BR>
            
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
