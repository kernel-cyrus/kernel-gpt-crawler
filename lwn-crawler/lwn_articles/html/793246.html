        <!DOCTYPE html>
        <html lang="en">
        <head><title>5.3 Merge window, part 1 [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/793246/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/793456/">Return to the Front page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/793246/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>5.3 Merge window, part 1</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>LWN.net needs you!</b>
<p>
Without subscribers, LWN would simply not exist.  Please consider
       <a href="/Promo/nst-nag2/subscribe">signing up for a subscription</a> and helping
       to keep LWN publishing.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>July 12, 2019</br>
           </div>
As of this writing, exactly 6,666 non-merge changesets have been pulled
into the mainline repository for the 5.3 development cycle.  The merge
window has thus just begun, there is still quite a bit in the way of
interesting changes to look at.  Read on for a list of what has been merged
so far.
<br clear="all">
<p>

<h4>Architecture-specific</h4>
<p>
<ul class="spacylist">

<li> The x86 <a href="/Articles/790920/"><tt>umonitor</tt>,
     <tt>umwait</tt>, and <tt>tpause</tt> instructions</a> are now
     supported for use by user-space code; they make it possible to
     efficiently execute small delays without the need for busy loops.  A
     knob has been provided to 
     allow system administrators to control the maximum period for which
     the CPU can be paused.
<li> The pa-risc architecture now supports dynamic ftrace.
</ul>

<p>
<h4>Core kernel</h4>
<p>
<ul class="spacylist">

<li> The <a href="/Articles/762043/">scheduler utilization clamping</a>
     patch set has been merged.  This feature allows an administrator to
     cause specific processes to appear to create more or less load than
     they actually do; that, in turn, will affect how the CPU frequency
     governor responds when those processes become runnable.  So, for
     example, an interactive process could be made to appear to have heavy
     CPU requirements, causing an immediate increase in CPU frequency when
     that process wakes up.
<li> The <a href="/Articles/789023/"><tt>pidfd_open()</tt></a> system call
     has been added; it allows a process to obtain a pidfd for another,
     existing process.  It is also now possible to use <tt>poll()</tt> on a
     pidfd to get notification when the associated process dies.
<li> Also added is the <a href="/Articles/792628/"><tt>clone3()</tt></a>
     system call, which reorganizes the <tt>clone()</tt> interface, makes
     it more extensible, and adds space for more flags.
<li> The new <tt>bpf_send_signal()</tt> helper allows a BPF program to send
     a signal to an arbitrary process.
<li> The BPF verifier is now able to handle programs with loops, as long as
     the execution of the loop is bounded and cannot cause the program to
     exceed the maximum instruction count; that removes a major limitation
     that has irritated BPF developers for some time.  Note that this is
     <i>not</i> the <a href="/Articles/773605/">bounded-loop work</a> that
     was under discussion late last year; it is a new implementation.  It
     seems that the verifier efficiency improvements merged for 5.2 made
     this task rather simpler.
</ul>

<p>
<h4>Filesystems and block layer</h4>
<p>
<ul class="spacylist">

<li> The NFSv4 server now creates a directory under
     <tt>/proc/fs/nfsd/clients</tt> with information about current NFS
     clients, including which files they have open.

</ul>

<p>
<h4>Hardware support</h4>
<p>
<ul class="spacylist">

<li> <b>Audio</b>:
     Conexant CX2072X codecs,
     Rhythm Tech rt1011 and rt1308 amplifiers, and
     Cirrus Logic CS47L35, CS47L85, and CS47L90 codecs.
<li> <b>Industrial I/O</b>:
     Infineon DPS310 pressure and temperature sensors,
     Analog Devices ADF4371 and ADF4372 wideband synthesizers,
     Analog Devices AD8366 gain amplifiers, and
     ChromeOS EC lid-angle sensors.
<li> <b>Media</b>:
     Allegro DVT video control units and
     Amlogic video decoders.
<li> <b>Miscellaneous</b>:
     Freescale i.MX8 DDR performance monitors,
     Renesas RZ/A1 interrupt controllers,
     Annapurna Labs fabric interrupt controllers,
     Atmel SHA204A random-number generators,
     TI LM3697, LM36274, and LM36274 LED controllers,
     Dialog Semiconductor SLG51000 regulators,
     Socionext SynQuacer SPI controllers,
     Freescale i.MX8M CPU-frequency controllers,
     Infineon PXE1610 voltage regulators,
     Infineon IRPS5401 power-management ICs,
     NXP i.MX8 SCU on-chip OTP controllers,
     Mixel MIPI DSI PHYs,
     Fairchild Semiconductor FSA9480 microUSB switches, and
     ChromeOS embedded controllers.
<li> <b>Networking</b>:
     NXP TJA11xx PHYs,
     Google Virtual NICs, and
     Hisilicon HI13X1 network interfaces.
<li> <b>USB</b>:
     Qualcomm PCIe Gen2 PHYs.
<li> <b>Removals</b>: the isdn4linux ISDN driver subsystem has been removed
     entirely; it doesn't appear to have been used for some time.  The
     separate CAPI subsystem is also on its way out, but it has only been
     moved to the staging directory for now.  The mISDN subsystem will
     remain for now.  See <a
     href="https://git.kernel.org/linus/8a7e8ff8ce8a">this commit</a> for
     details. 
</ul>

<p>
<h4>Networking</h4>
<p>
<ul class="spacylist">

<li> The kernel will now accept IPv4 addresses in the 0.0.0.0/8 range as
     valid.  Getting the Internet as a whole to allow that is a work in
     progress but, once it happens, it will make 16&nbsp;million more IPv4
     addresses available for use.
<li> It is now possible to attach BPF programs (at the control-group level)
     to the <tt>setsockopt()</tt> and <tt>getsockopt()</tt> system calls.
     That allows the imposition of administrator policy on those calls; see
     <a href="https://git.kernel.org/linus/0c51b3697a44">this commit</a>
     for some documentation.
<li> There is also a new socket-level hook to call a BPF program once every
     round-trip-time interval.
</ul>

<p>
<h4>Security-related</h4>
<ul class="spacylist">

<li> Cryptographic keys can now be tied to a specific user or network
     namespace, making them unavailable outside of that namespace.  Keys
     are also now protected by access control lists; see <a
     href="https://git.kernel.org/linus/2e12256b9a76">this commit</a> for
     details.  (Note that the ACL patch was <a
     href="https://git.kernel.org/linus/028db3e290f1">subsequently
     reverted</a> though it may be back before the end of the merge
     window).

</ul>

<p>
<h4>Internal kernel changes</h4>
<p>
<ul class="spacylist">

<li> <a
     href="https://elixir.bootlin.com/linux/latest/source/kernel/signal.c#L1555"><tt>force_sig()</tt></a>
     has always taken the target task as a
     parameter, but it has never actually been safe to use for anything
     other than the current task.  That parameter has been removed and a
     large number of callers have been updated.
     
</ul>

<p>
Linus Torvalds has been a little grumpy during this merge window, having
encountered multiple regressions that affected his machine.  Most of those
have been worked out for now; with luck things will go more smoothly from
here on out.  If the usual schedule holds, the 5.3 merge window will close
on July&nbsp;21, with the final 5.3 release expected in early-to-mid
September.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Releases-5.3">Releases/5.3</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/793246/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor793603"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 12, 2019 22:34 UTC (Fri)
                               by <b>meyert</b> (subscriber, #32097)
                              [<a href="/Articles/793603/">Link</a>] (55 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
"The kernel will now accept IPv4 addresses in the 0.0.0.0/8 range as valid. Getting the Internet as a whole to allow that is a work in progress but, once it happens, it will make 16 million more IPv4 addresses available for use."<br>
I would like to know more!<br>
Commit? Background/context?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/793603/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor793604"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">0.0.0.0/8</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 12, 2019 22:44 UTC (Fri)
                               by <b>corbet</b> (editor, #1)
                              [<a href="/Articles/793604/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      See <a href="/ml/netdev/1561223254-13589-1-git-send-email-dave.taht%40gmail.com/">this post</a>.   Commit <a href="https://git.kernel.org/linus/96125bf9985a">96125bf9985a</a>.
      
          <div class="CommentReplyButton">
            <form action="/Articles/793604/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor793907"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">0.0.0.0/8</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 16, 2019 23:30 UTC (Tue)
                               by <b>mtaht</b> (subscriber, #11087)
                              [<a href="/Articles/793907/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
thx jon for the public steer to the cover letter. next time something like this explodes across the internet I'll include way more info in the actual commit!<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/793907/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor793606"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 12, 2019 23:26 UTC (Fri)
                               by <b>bartoc</b> (guest, #124262)
                              [<a href="/Articles/793606/">Link</a>] (21 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Hopefully IANA charges an arm and a leg for addresses in the 0/8 range. let's get more IPv6 single stack hosts and services!<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/793606/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor793608"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 13, 2019 1:05 UTC (Sat)
                               by <b>shentino</b> (guest, #76459)
                              [<a href="/Articles/793608/">Link</a>] (20 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Allowing IPv4 addresses to be owned in any sense of the word was the first mistake.  Now that a black market has been established people sitting on hoards they got during the times of plenty are milking them for all they can get and won't give them up without a fight.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/793608/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor793610"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 13, 2019 8:19 UTC (Sat)
                               by <b>cpitrat</b> (subscriber, #116459)
                              [<a href="/Articles/793610/">Link</a>] (17 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Which also gives them an incentive to slow down IPv6 deployment if they can ...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/793610/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor793613"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 13, 2019 9:10 UTC (Sat)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/793613/">Link</a>] (16 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Not really. Even if class D networks are allowed (which would require patching for unsupported but still ubiquitous systems), all the new IP supply will be used within months.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/793613/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor793639"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 13, 2019 20:46 UTC (Sat)
                               by <b>cesarb</b> (subscriber, #6266)
                              [<a href="/Articles/793639/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Do you mean class E? Class D is multicast.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/793639/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor793648"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 14, 2019 2:41 UTC (Sun)
                               by <b>naptastic</b> (guest, #60139)
                              [<a href="/Articles/793648/">Link</a>] (14 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I'm assuming you mean class E because making class D routable would break applications that use multicast. (I use Netjack, so I'd be affected.)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/793648/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor793777"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 16, 2019 4:49 UTC (Tue)
                               by <b>riking</b> (subscriber, #95706)
                              [<a href="/Articles/793777/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Clawing back multicast assignments into unicast-routable addresses is an explicit goal of this effort, yes.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/793777/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor793790"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 16, 2019 8:01 UTC (Tue)
                               by <b>naptastic</b> (guest, #60139)
                              [<a href="/Articles/793790/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Is the intended alternative ff00::/8?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/793790/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor793904"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 16, 2019 23:16 UTC (Tue)
                               by <b>mtaht</b> (subscriber, #11087)
                              [<a href="/Articles/793904/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
1) Amazon AWS treats the entire ipv4 address space as a unicast playground. Very, very few userspace stacks actually do much checking of the IP addresses in the first place. <br>
<p>
2) From our testing and from source code inspection of all the source code in the world (amazing what we can do nowadays) we've only found *1* application that used a multicast address in the 225/8 - 231/8 address range, which was reserved for future multicast use and never allocated for anything by iana the great multicast-everything orgy of the late 80s.<br>
<p>
Do let us know if the multicast portion of this patch here breaks anything:<br>
<p>
<a href="https://github.com/dtaht/unicast-extensions/blob/master/patches/linux/0001-Allow-0.0.0.0-8-and-reduce-localnet-and-enable-225-2.patch#L31">https://github.com/dtaht/unicast-extensions/blob/master/p...</a><br>
<p>
After fixing 240/4 last december....<br>
<p>
We submitted the 0/8 patch in the hope that we would stimulate discussion of the more advanced patches, and it, um, went right upstream (0/8 really is uncontroversial, and john's been waiting for the standard to be changed since he co-invented bootp), and NOW we're getting the discussion on various forums over the last few days and I'm trying to keep up....<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/793904/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor793933"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 17, 2019 10:53 UTC (Wed)
                               by <b>naptastic</b> (guest, #60139)
                              [<a href="/Articles/793933/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I can understand how designers of the Internet would be cautious and disallow 0/8, fearing ambiguity. That was a wise choice. Now that we know more, and we're confident 0/8 will work, we're allowing it. This is a wise choice.<br>
<p>
Thinking about it more, my anxiety about multicast isn't warranted. All my applications that use multicast are IPv6-capable. If I, as the system administrator, am not willing to set up my network for IPv6 multicast, I have no room to complain.<br>
<p>
So... before this thread, I was opposed to reclaiming multicast IPv4 ranges, but having learned more from you wonderful folks, I am now totally indifferent on the matter. Thank you!<br>
<p>
(It might be mildly inconvenient if I have to reconfigure my firewall if other classes of networks get reclaimed. Meh: Progress necessitates inconvenience. MEH, I SAY!)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/793933/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor793973"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 17, 2019 16:41 UTC (Wed)
                               by <b>luto</b> (subscriber, #39314)
                              [<a href="/Articles/793973/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The CME uses multicast. See here, for example:<br>
<p>
<a href="ftp://ftp.cmegroup.com/SBEFix/Production/Configuration/config.xml">ftp://ftp.cmegroup.com/SBEFix/Production/Configuration/co...</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/793973/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor794008"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 17, 2019 21:34 UTC (Wed)
                               by <b>mtaht</b> (subscriber, #11087)
                              [<a href="/Articles/794008/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The 224/8 and 239/8 ranges were allocated and used for some still common multicast applications. 232/8-238/8 are mapped for a variety of mostly, but not entirely obsolete: <a href="https://www.iana.org/assignments/multicast-addresses/multicast-addresses.xhtml#unicast-prefix-based">https://www.iana.org/assignments/multicast-addresses/mult...</a><br>
<p>
As I said, 225/8-231/8 appear to be entirely unused in the world. 120m addresses.<br>
<p>
Let's make 'em unicast!<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/794008/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor794009"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 17, 2019 21:35 UTC (Wed)
                               by <b>mtaht</b> (subscriber, #11087)
                              [<a href="/Articles/794009/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
(to be clear, that particular multicast application uses addresses in the 233 range)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/794009/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor793905"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 16, 2019 23:19 UTC (Tue)
                               by <b>mtaht</b> (subscriber, #11087)
                              [<a href="/Articles/793905/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
re: 240/4 (formerly class E), has basically worked on most OSes, except windows, since 2008. In linux, it needed one trivial patch (landed last december) to work correctly with ifconfig (it already worked with ip route) and 240/4 has now been extensively tested in openwrt.<br>
<p>
Only a few routing daemons and related routing hw needs to be modified to make 240/4 globally routable. Babeld already has support, the FRR and bird folk have agreed in principle to make it work, juniper works with a flag, cisco's enterprise routers work, smaller scale ones don't. currently.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/793905/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor793909"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 16, 2019 23:40 UTC (Tue)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/793909/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
So you're looking at least for 3-4 more years for it to become available. Routers are not updated often and quiet a few Linuxes stay at the same kernel version for years.<br>
<p>
Is it worth it now?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/793909/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor793918"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 17, 2019 3:23 UTC (Wed)
                               by <b>mtaht</b> (subscriber, #11087)
                              [<a href="/Articles/793918/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The best linear projection for 100% ipv6 adoption in one country was 7 years. Others, decades. So... yes, I think cleaning up ipv4 as best we can is needed. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/793918/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor793971"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 17, 2019 16:42 UTC (Wed)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/793971/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Right now it's at 30% with about 10% YoY growth: <a href="https://www.google.com/intl/en/ipv6/statistics.html">https://www.google.com/intl/en/ipv6/statistics.html</a><br>
<p>
So yes, 7 years is about right. However, this assumes linear growth and it's probably not. For example, China has an official plan to move to IPv6 by 2025 with major deployments starting next year.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/793971/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor794050"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 18, 2019 6:19 UTC (Thu)
                               by <b>cpitrat</b> (subscriber, #116459)
                              [<a href="/Articles/794050/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Well, 2025 is in 6 years, so not that far from 7 years ...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/794050/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor794001"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 17, 2019 20:31 UTC (Wed)
                               by <b>farnz</b> (subscriber, #17727)
                              [<a href="/Articles/794001/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <p>The trouble is that if you look at <a href="https://ipv4.potaroo.net/">Geoff's IPv4 Address Report</a>, we were consuming more than a /8 per month until we ran out of free-floating addresses. So cleaning up IPv4 needs to provide 84 /8s to get us to 7 years - for decades, you're looking at hundreds of /8s, which is going to get awkward…
      
          <div class="CommentReplyButton">
            <form action="/Articles/794001/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor794152"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 18, 2019 23:02 UTC (Thu)
                               by <b>naptastic</b> (guest, #60139)
                              [<a href="/Articles/794152/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I'm looking at a map of the Internet as of 2018, and I see a lot of empty space that I wonder if we could get by either asking nicely, offering money, or passing legislation. (I count nine /8's belonging to US agencies that appear completely dark on the map. How much does the US government really need for all its agencies? Every agency in every state plus federal agencies is still less than 2^16. I'd bet companies like Ford, HP, maybe Apple, would be willing take money for smaller allocations; no code has to change; and whoever buys control of those ranges can recoup the cost by selling smaller allocations.) Maybe I'm being Pollyannaish but I see win-win situations that would require nothing more than cooperation.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/794152/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor793615"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 13, 2019 9:25 UTC (Sat)
                               by <b>dottedmag</b> (subscriber, #18590)
                              [<a href="/Articles/793615/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
A black market? Why does one need a black market for property? Black markets only exist when the property rights, especially rights to sell/buy property are seriously constrained.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/793615/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor793649"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 14, 2019 1:24 UTC (Sun)
                               by <b>naptastic</b> (guest, #60139)
                              [<a href="/Articles/793649/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Web hosting veteran here. I worked for a company that added dedicated server hosting to their already-existing shared hosting solution. Their top-of-rack switches were consumer-grade unmanaged switches, and for a while we had customers stealing each others' IP addresses.<br>
<p>
I dunno about a "black market" but people sending spam or doing SEO are still willing to beg, borrow, or steal for IPs, given the chance.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/793649/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor793614"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 13, 2019 9:38 UTC (Sat)
                               by <b>jem</b> (subscriber, #24231)
                              [<a href="/Articles/793614/">Link</a>] (17 responses)
      </p>
      
      </div>
      </summary>
      <p>Sigh. This reminds me of the old fable The Tortoise and the Hare. Millions of new available addresses may sound impressive, but not so impressive when you realize they will be used up in a couple of weeks. Not to mention that "Getting the whole internet to allow that" is something that I don't think will ever happen.</p>

<p>The effort spent on this would have been more wisely spent on promoting IPv6. More usable addresses... <em>no</em>, more usable /64 <em>subnets</em> would have been put to use for less effort. Granted, these addresses would be unreachable to some, but we will in any case inevitably reach a point in the future where IPv4 isn't capable of holding the growing Internet together.</p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/793614/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor793616"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 13, 2019 10:20 UTC (Sat)
                               by <b>sytoka</b> (guest, #38525)
                              [<a href="/Articles/793616/">Link</a>] (15 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
If IPv6 had been retro compatible with IPv4, no problem of this type would have happened ...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/793616/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor793622"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 13, 2019 12:02 UTC (Sat)
                               by <b>ju3Ceemi</b> (subscriber, #102464)
                              [<a href="/Articles/793622/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Is there a solution for an "ipv6-like" that stay retro-compatible with ipv4 ?<br>
<p>
From my point of view, there is nothing you can do to let ipv4 devices talks to a wider addr space : the IP is nothing but an unique identifier, which de facto makes your wish unrealizable<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/793622/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor793620"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 13, 2019 13:51 UTC (Sat)
                               by <b>farnz</b> (subscriber, #17727)
                              [<a href="/Articles/793620/">Link</a>] (13 responses)
      </p>
      
      </div>
      </summary>
      <p>I hear that a lot from armchair designers, but I've yet to have one enumerate an actual way for IPv6 to be retro-compatible with IPv4 that isn't present in IPv6 already.
<p>IPv4 addresses are a subset of IPv6 addresses - if you have an IPv4 address, then it also exists in (at least) five different forms for different (mostly failed) compatibility mechanisms in IPv6:
<ol>
<li>As an "IPv4-Compatible IPv6 Address" in ::/96 - e.g. 192.0.2.1 is also ::c000:21. The transition mechanisms that wanted to use this form of addressing (e.g. the original form of SIIT) never reached deployable state, and thus this form is now deprecated.
<li>As an "IPv4-Mapped IPv6 Address" in ::ffff:0:0/96 - e.g. 192.0.2.1 is also ::ffff:c000:21. This is still in use, so that applications can pretend that IPv4 does not exist, and use these to refer to IPv4 addresses (when talking to the network stack, and in some protocols).
<li>In 64:ff9b::/96 for NAT64 and 464XLAT purposes - e.g. 192.0.2.1 is also 64:ff9b::c000:21. This allows you to communicate over an IPv6-only network with a central IPv4 host that does NAT for you, getting you the CGNAT experience when talking to IPv4 hosts; this is deployed in (at least) T-Mobile USA and EE UK mobile networks.
<li>Lots of times in 64:ff9b:1::/48 (depending on provider) to allow you to have multiple NAT64 or 464XLAT deployments addressed differently.
<li>As a 6to4 prefix in 2002::/16, for example 192.0.2.1 gets you control of all of 2002:c000:21::/48. This lets you route IPv6 as an overlay on your existing IPv4 network, but is not popular because properly deployed IPv4 will always be at least as fast as or faster than IPv6 carried over an IPv4 network.
</ol>
<p>On top of that, SIIT got reworked into SIIT-DC, which allows a pure IPv6 network to choose a prefix for IPv4 use and do stateless NAT instead of NAT64. And, of course, you can do NAT64 or 464XLAT in a private prefix.
<p>Each of these mechanisms has its own set of problems as compared to running dual stack networks; 464XLAT and NAT64 are only happening now because in the mobile world, operators are beginning to experience pain from running NAT'd IPv4, and reducing the need for NAT via IPv6 saves actual dollars. And, if nothing else, pure IPv4 has the advantage of zero change needed - any alternative IPv6 proposal needs to cope with IPv4-only hosts that refuse any form of change to support IPv6, otherwise you face the same problems as SIIT, NAT64, and 6to4 do.
      
          <div class="CommentReplyButton">
            <form action="/Articles/793620/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor793630"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 13, 2019 16:11 UTC (Sat)
                               by <b>plugwash</b> (subscriber, #29694)
                              [<a href="/Articles/793630/">Link</a>] (12 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
6to4 has two big problems.<br>
<p>
1. Routers don't relay by default, the relaying is handled by specific relay routers, which most ISPs don't implement. <br>
2. It doesn't work with NAT.<br>
<p>
A mechanism similar to 6to4 but designed to work with NAT (not to fight against it like teredo does) and that was implemented by default as part of every dual stack router and OS would IMO have eased deployment considerably.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/793630/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor793632"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 13, 2019 16:25 UTC (Sat)
                               by <b>farnz</b> (subscriber, #17727)
                              [<a href="/Articles/793632/">Link</a>] (11 responses)
      </p>
      
      </div>
      </summary>
      <p>The lack of relay routers will exist for any overlay network - and note that if you have IPv4 on both ends, you can route to 2002::/16 over IPv4 directly, not needing a relay router. There's no particular reason why all dual-stack routers weren't relay routers, except that operators did not want to support any IPv6 transition mechanism at all - not even 6to4.
<p>And Teredo is as good as you can get given the way NAT works; fighting NAT is the norm when you're trying to tunnel through it.
<p>As I said, it's easy to set the goals for a better mechanism, it's a lot harder to actually design it.
      
          <div class="CommentReplyButton">
            <form action="/Articles/793632/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor793650"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 14, 2019 2:55 UTC (Sun)
                               by <b>plugwash</b> (subscriber, #29694)
                              [<a href="/Articles/793650/">Link</a>] (10 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; The lack of relay routers will exist for any overlay network</font><br>
<p>
Yes it will for any overlay network invented *now*.<br>
<p>
If such encapsulation had been part of the core protocol from the start and relaying behaviour had been mandated or at least strongly recommended as part of every dual stack router then we wouldn't have the mess of relay shortages we have today.<br>
<p>
<font class="QuotedText">&gt; fighting NAT is the norm when you're trying to tunnel through it. </font><br>
<p>
The alternative to fighting the NAT is to go with the flow of it, that is when deencapsulating. modify the V6 addresses to match the v4 addresses/ports. <br>
<p>
Of course such an idea is unthinkable to the "end to end is sacred" crowd.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/793650/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor793651"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 14, 2019 3:18 UTC (Sun)
                               by <b>gus3</b> (guest, #61103)
                              [<a href="/Articles/793651/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The "end to end is sacred" crowd put far too much trust in the network at-large. Replace one switch with one hub, and the whole "sacred" thing gets scrambled into "scared" instead.<br>
<p>
That crowd should shift their thinking, to "just make sure the damn thing keeps working the way it did."<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/793651/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor793663"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 14, 2019 10:17 UTC (Sun)
                               by <b>farnz</b> (subscriber, #17727)
                              [<a href="/Articles/793663/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <p>I'm not talking about overlay networks invented now - I'm talking about overlay networks invented back in 1999, when IPv6 was new. And 6to4 encapsulation <em>was</em> strongly recommended as part of every dual stack router back then; the only error, IMO, in 6to4, was the effort expended to try and get people to run public relays, when we would have been better off with 2002::/16 containing the entire IPv4 routing table over time, and with everyone routing their own subset of 2002::/16, on the basis that when native IPv6 arrives, we'd be able to turn it off.
<p>Further, note that there's no-one able to mandate relay operation - operators want to control what they offer, and won't offer free services just for the sake of it, especially not expensive ones like relays.
<p>Going with the flow of NAT is what NAT64 (called NAPT in early IPv6 documents) does. It's not been deployed until recently because provides zero gain unless you're planning to turn off IPv4 for large swathes of your network.
<p>It's perhaps worth remembering that the whole reason Teredo exists is that Microsoft wanted an easy way for game developers to write NAT traversal multiplayer games; Teredo was their answer, in that game developers just write IPv6-only games ignoring the existence of NAT, and Microsoft handles the NAT traversal problem for you in Teredo.
<p>Again, though, I don't see constructive answers on how IPv6 could have been technically better at retrocompatibility - just claims that it can't be fixed (despite the fact that the very fix you're suggesting was in IPv6 in 1999, and ignored by network operators), and an insult to the people working on this stuff. What protocol changes would you have made that make IPv6 more compatible with IPv4?
      
          <div class="CommentReplyButton">
            <form action="/Articles/793663/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor793666"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 14, 2019 10:37 UTC (Sun)
                               by <b>ianmcc</b> (subscriber, #88379)
                              [<a href="/Articles/793666/">Link</a>] (7 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Make the IP address variable length; IPv4 would just be the special case where the address is 4 bytes.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/793666/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor793667"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 14, 2019 11:02 UTC (Sun)
                               by <b>farnz</b> (subscriber, #17727)
                              [<a href="/Articles/793667/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <p>That has two problems, one inherent to variable length addressing, and one an upgrade problem, and also ignores the fact that IPv4 is already a special case of IPv6.
<ol>
<li>Until the last IPv4-only host has upgraded to support variable length addressing, all hosts need to have a 4 byte address. Like with IPv6 deployment, this is a chicken-and-egg problem; why would I choose to have a 5 byte or longer address when I could stick to 4 byte addresses and not have any interop issues?
<li>Hardware-assisted routing has to handle addresses in fixed size chunks, and the routing delay is proportional to the number of chunks the hardware handles (i.e. the smaller the chunk, the bigger the penalty for a long address). With a variable length address, as CLNP proved with its NSAPs, there is an incentive to keep to short addresses, because the unfortunate souls with longer addresses have slower networking. In turn, this doesn't resolve the address shortage for the long term - there's always incentive to have "IPv4" addresses.
</ol>
<p>In IPv6, all addresses have same hardware latency, and IPv4 is a special case of IPv6 anyway (this fact is used by SIIT-DC with a per-DC IPv6 /96 matching all of IPv4, and was the idea behind SIIT).
      
          <div class="CommentReplyButton">
            <form action="/Articles/793667/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor793695"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 15, 2019 11:45 UTC (Mon)
                               by <b>ianmcc</b> (subscriber, #88379)
                              [<a href="/Articles/793695/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Problem 1 is common to IPv6 as well.  Legacy devices can go behind a NAT router, which basically everything is already.<br>
<p>
Done properly, I don't think variable length addresses need to have a performance penalty, and indeed it might end up faster.  Eg, if my ISP is allocated the address A.B.C, then they allocate their customers addresses of the form A.B.C.D.  The routing tables only need to refer to A.B.C, and the IPS's routers only need to look up on D.  My home network can use addresses of the form A.B.C.D.E (or additional devices hanging off something can get A.B.C.D.E.F et cetera).  This doesn't change the lookup time for the upstream routers because they just ignore the parts of the address that are not relevant for them.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/793695/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor793697"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 15, 2019 13:30 UTC (Mon)
                               by <b>farnz</b> (subscriber, #17727)
                              [<a href="/Articles/793697/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <p>While problem 1 is common to IPv6 during the transition period, the problem with variable length addresses with 1:1 IPv4 compatibility for the source + destination are 4 bytes case is that the transition period is effectively infinite - there is never a penalty for refusing to migrate, whereas in IPv6 land, there is a penalty for failure to migrate once a tipping point is reached. For example, today it is the case that if you care about the performance of your servers when accessed via a mobile phone, you need to support IPv6, because for significant subsets of mobile users, IPv4 goes via a remote NAT, while IPv6 takes the shortest route.
<p>And variable length addresses always have a performance or cost penalty in hardware, which never goes away. For a fixed size address, the router simply reads the address and acts on it. For a variable length address, the router has to read the length, read the first chunk of the address, mask off any parts of the first chunk of address that aren't valid, attempt to act on it, and then if the needed part of the address is longer than the chunk, repeat for the next chunk. Worse, if you're not cautious, router manufacturers will attempt to "get away" with not handling the full complexity - e.g. only route on the first N bits, and ignore the rest of the address - and if those routers become common, you've effectively shrunk the routable component of the address. We've seen this in IPv4 in the 80s, where routers fell back to a slow path if the routing prefix was too long (more than 16 bits), and we've seen this in IPv6 routers that only route on the first 64 bits of the address. Variable length addressing just makes this harder, because you also have to handle the pain that 32 bit "1.1.1.1" is not guaranteed to route to the same place as 64 bit "1.1.1.1/32", which is not guaranteed to route to the same place as 128 bit "1.1.1.1/32" (well, unless you remove the requirement that 32 bit "1.1.1.1" routes to the same place as IPv4 "1.1.1.1").
<p>This extra complexity is inherent to variable length addressing, and makes the hardware more complex; in turn, this means that you either need more complex hardware to handle lookups in the same number of clock cycles, or you need more clock cycles to do the same lookup. Fixed length addresses avoid this - you always read a fixed size chunk and then act on it.
      
          <div class="CommentReplyButton">
            <form action="/Articles/793697/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor793699"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 15, 2019 13:46 UTC (Mon)
                               by <b>excors</b> (subscriber, #95769)
                              [<a href="/Articles/793699/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Eg, if my ISP is allocated the address A.B.C, then they allocate their customers addresses of the form A.B.C.D.</font><br>
<p>
I think the problem is that in practice, strict hierarchical addressing doesn't work. E.g. there's anycast, where the same IP address is advertised by multiple servers around the world, and users will get routed to whichever one is nearest (based on BGP's definition of "nearest"). Or for redundancy you might want one server to advertise a single IP prefix through two ISPs, so if one fails it'll get routed through the other.<br>
<p>
Non-hierarchical usage of the IPv4 space has been a known issue for many years, causing significant expansion of routing tables (see e.g. <a href="https://bgp.potaroo.net/">https://bgp.potaroo.net/</a>). That's quite a problem when routers store the table in expensive content-addressable memory (for efficient lookups), and the table size grows too large for the hardware.<br>
<p>
There's a more fundamental issue with IP addresses being both "locator" and "identifier". Originally they were seen as locators, i.e. a hierarchical address that describes how to find the server with increasing specificity, with routing based on IP prefixes and CIDR etc. DNS mapped stable identifiers (domain names) onto addresses. DNS didn't work well enough for that, so nowadays IP addresses are often just identifiers and don't indicate anything about the actual location of the server (as with anycast and multihoming), but routing protocols weren't designed to be efficient identifier lookup services. Occasionally people have tried to disentangle the two concepts, like with LISP, but I don't know if they've had any success.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/793699/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor793705"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 15, 2019 14:47 UTC (Mon)
                               by <b>imMute</b> (guest, #96323)
                              [<a href="/Articles/793705/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
That's how route aggregation works today.   Route lookups are already fast using hardware TCAM.   Variable length addresses would make the TCAM implementation harder.  Or, more likely, they'd just make the TCAM addresses the max size allowed by the variable length spec.  And you'd end up with smaller tables that wasted space.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/793705/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor793706"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 15, 2019 15:10 UTC (Mon)
                               by <b>farnz</b> (subscriber, #17727)
                              [<a href="/Articles/793706/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <p>Note, too, that a variable length address space limited to N bits of address can be mapped into a fixed size address space of size N+1 bits. You add a prefix bit which is 1 if the next N bits are the full address, or 0 otherwise, and do this recursively. You can then unmap by counting leading 0s to retrieve the address size, strip the next 1 bit, and the remainder is the address.
<p>In other words, unless your variable length address is greater than 127 bits in maximum size, it can be entirely mapped into IPv6.
      
          <div class="CommentReplyButton">
            <form action="/Articles/793706/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor793912"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 16, 2019 23:56 UTC (Tue)
                               by <b>mtaht</b> (subscriber, #11087)
                              [<a href="/Articles/793912/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I've kind of wondered how much of the internet, particularly the IPv6 portion, is actually routed by TCAM based hardware. Software routing in SDR and Linux/BSD based implementations seems to be on the rise.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/793912/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor793906"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 16, 2019 23:29 UTC (Tue)
                               by <b>mtaht</b> (subscriber, #11087)
                              [<a href="/Articles/793906/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The amount of effort required for more ipv4 as we are doing it is trivial. It's a string of essentially one line patches to a dozen OSes, and a recompile of userspace, if you want to use the new formerly reserved for future multicast addresses. 89 packages, total, in fedora, needed to be recompiled (none, for 0/8, or 240/4)<br>
<p>
And testing of course! We reached the point in our testbeds where nothing less than a global scale (e.g. a commit to linux mainline) test would prove anything.<br>
<p>
Eventual politics and standardization efforts will eat 1000s more of (hopefully someone else's) time than either of these two phases.<br>
<p>
IPv6 is way harder in many, many respects. And still, desperately needed.<br>
<p>
Making 0/8 work, universally, is going to be *easy*.<br>
<p>
Maybe if 0/8 creates enough controversy, someone will listen to me about what more is needed to accelerate ipv6 adoption.  <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/793906/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor793902"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 16, 2019 23:09 UTC (Tue)
                               by <b>mtaht</b> (subscriber, #11087)
                              [<a href="/Articles/793902/">Link</a>] (12 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Wow. I had no idea this would spawn so much comment.<br>
<p>
1) The context of the effort and talk: <a href="https://www.netdevconf.org/0x13/session.html?talk-ipv4-unicast-expansions">https://www.netdevconf.org/0x13/session.html?talk-ipv4-un...</a><br>
<p>
And I like to think it's one of my better talks, despite the clothing malfunction.<br>
<p>
Yes! we need faster ipv6 adoption! But if we want to interconnect with the rest of the internet ipv4 is still going to be required for a very, very, long time. Think hard about this:<br>
<p>
I'd asked everyone in the room on the "just deploy ipv6" side - which I used to be on, too! - to think about "“Even if they have deployed IPv6, growing networks *must continue to acquire* scarce, increasingly expensive IPv4 addresses to interconnect with the rest of the Internet.”" -  <br>
<a href="https://www.internetgovernance.org/2019/02/20/report-on-ipv6-get-ready-for-a-mixed-internet-world/">https://www.internetgovernance.org/2019/02/20/report-on-i...</a><br>
<p>
And think harder on the ipv6 deployment problems. I have a long note about what's going wrong with that, too, which I need to finish and write up somewhere. I like to think we made one giant leap with the cerowrt project, but more major leaps are required to finish ipv6 adoption in any foreseable amount of time.<br>
<p>
Anyway, the conclusion john gilmore, myself, and paul came to, that any way we thought about the future of the internet, more ipv4 addresses were going to be needed.  Making 'em is a start. No matter what we do to make more... IPv4 prices look to skyrocket in the coming years.<br>
<p>
Anyway, to answer another thought, 0/8 (16m) is more addresses than amazon, google, and facebook have, combined. 240/4, which we removed the last barrier to adoption for in linux last december, has 260m addresses. 225/8-231/8 have ~120m. Previous allocation policies DO need to be rethought in order to make best use of these, but first up is making it technically feasible at all.<br>
<p>
Another thought: On any given day only about 700m ipv4 addresses appear on the internet.<br>
<p>
Lastly... it might take 5-7 to make these address ranges fully usable... but even then, based on the ipv6 deployment curves in the above report, still seems worth it.<br>
<p>
Always helps to have more folk helping, of course, please see <a href="https://github.com/dtaht/unicast-extensions">https://github.com/dtaht/unicast-extensions</a> for more info and patches to various daemons and other OSes.<br>
 <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/793902/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor794056"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 18, 2019 9:01 UTC (Thu)
                               by <b>jem</b> (subscriber, #24231)
                              [<a href="/Articles/794056/">Link</a>] (11 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;I'd asked everyone in the room on the "just deploy ipv6" side - which I used to be on, too! - to think about "“Even if they have deployed IPv6, growing networks *must continue to acquire* scarce, increasingly expensive IPv4 addresses to interconnect with the rest of the Internet.”"</font><br>
<p>
I believe the Internet is going to break up into two islands at some point anyway. There is only so much juice you can squeeze out of an orange. We will reach a tipping point where the cost of getting IPv4 addresses and the popularity of IPv6 make it more economical for some services go IPv6 only. The problem with today's thinking that IPv4 is the reference, and IPv6 some kind of add-on, combined with the exponential growth of the Internet, is that it will hit a wall at some point. I will not feel sorry for the companies going bankrupt because of this.<br>
<p>
<font class="QuotedText">&gt;Anyway, to answer another thought, 0/8 (16m) is more addresses than amazon, google, and facebook have, combined.</font><br>
<p>
It is my understanding that Facebook moved to IPv6 on their internal network, because 10.0.0.0/8 was not enough for the size and topology of the network.<br>
<p>
<font class="QuotedText">&gt;And think harder on the ipv6 deployment problems. I have a long note about what's going wrong with that, too, which I need to finish and write up somewhere.</font><br>
<p>
Please do, I would like to read about these problems. It's funny how some organizations seemingly have had no trouble deploying IPv6 half a decade ago, while others don't seem to be struggling hard. Which makes me believe they aren't struggling at all, they just have an attitude problem. Or how do you explain the great differences between ISPs within a single country? Or that there does not seem to be a correlation between deployment rate and the status of a country as a developing vs. industrialized nation? What explains that Google's statistics show Germany having a IPv6 deployment rate of 42% and neighboring Denmark only 3.54%? Or Malaysia at 38% vs. Indonesia 0.32%?<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/794056/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor794071"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 18, 2019 9:56 UTC (Thu)
                               by <b>farnz</b> (subscriber, #17727)
                              [<a href="/Articles/794071/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <p>The other point is that between DSR and IPv4 in IPv6 tunnels for services, and the gradual move to IPv6, it's possible for <a href="https://code.fb.com/production-engineering/legacy-support-on-ipv6-only-infra/">someone like Facebook</a> to stop needing more IPv4 as long as they have full IPv6 support.
<p>This then decouples your growth from your IPv4 address needs to some degree; you need sufficient IPv4 that each load balancer can receive a full set of requests. With current hardware, that lets you receive tens of gigabits per second of upload to your service and requests for downloads per IPv4, while responses to the Internet are dealt with by DSR.
<p>So, as long as people are actively migrating to IPv6 with IPv4 as an add-on, the demand for IPv4 will fall. You just don't need that much IPv4 per service user when you treat IPv4 as a secondary protocol.
      
          <div class="CommentReplyButton">
            <form action="/Articles/794071/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor794130"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 18, 2019 17:58 UTC (Thu)
                               by <b>mtaht</b> (subscriber, #11087)
                              [<a href="/Articles/794130/">Link</a>] (9 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
You just made some good points and I'm out of time today to reply - tomorrow perhaps. In the meantime, wanted more folk to plow through the report, here: <br>
<a href="https://via.hypothes.is/https://www.internetgovernance.org/wp-content/uploads/IPv6-Migration-Study-final-report.pdf">https://via.hypothes.is/https://www.internetgovernance.or...</a><br>
<p>
and think about it.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/794130/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor794133"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 18, 2019 18:27 UTC (Thu)
                               by <b>mtaht</b> (subscriber, #11087)
                              [<a href="/Articles/794133/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
and while I'm tossing random links in for thought, this piece has been on my mind a lot lately: <a href="https://apenwarr.ca/log/20170810">https://apenwarr.ca/log/20170810</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/794133/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor794198"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 19, 2019 17:46 UTC (Fri)
                               by <b>jem</b> (subscriber, #24231)
                              [<a href="/Articles/794198/">Link</a>] (7 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I read the report. Here are a couple of random reflections:<br>
<p>
<font class="QuotedText">&gt; The prospect of what some engineers have called “IPv4 runout” was the main reason for developing IPv6 in the first place. From an economic point of view, however, resources never just “run out;” instead, as their supply diminishes they become increasingly expensive, and consumption patterns adapt to scarcity with greater conservation and new forms of substitution.</font><br>
<p>
Here we have the tortoise and the hare again. Take the number of potentially available IPv4 addresses. Let's say half of them change owners to make better use of them. We still have half of the available addresses left. Now half of them can be sold, and we still have half left!<br>
<p>
<font class="QuotedText">&gt; The incentives provided by the secondary market have led to the identification of millions of unused or underutilized IPv4 numbers by brokers such as IPv4 Market Group and exchanges such as Addrex and Hilco Streambank.</font><br>
<p>
Remember, the demand for (old) new IPv4 addresses is one /8 per month (16 million).<br>
<p>
The report compares IPv6 and IPv4 purely from a cost perspective, but fails completely (or I didn't find it) to consider the scenario that supporting IPv6 is a must for an ISP, or they will lose their customers. Let's say some reasonably popular services start popping up as IPv6-only, because that makes more sense economically.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/794198/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor794200"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 19, 2019 18:11 UTC (Fri)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/794200/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; The report compares IPv6 and IPv4 purely from a cost perspective, but fails completely (or I didn't find it) to consider the scenario that supporting IPv6 is a must for an ISP, or they will lose their customers.</font><br>
This will not happen until IPv6 is firmly in place. More realisticly, CGNs are a growing pain for ISPs and users and 464XLAT is a way to make them somewhat less painful.<br>
<p>
Once the remaining IPv4-only hardware is phased out (within the next 3-5 years), the only barrier preventing IPv6 is simply organizational inertia.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/794200/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor794246"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 21, 2019 2:49 UTC (Sun)
                               by <b>mtaht</b> (subscriber, #11087)
                              [<a href="/Articles/794246/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Ya know, I've been interacting with you two (at least) for over a decade, and I have not the foggiest idea who you are! <br>
<p>
I've been tired of typing of late, I was thinking pulling together a videoconference to discuss these issues would be fun. Would that work for you?<br>
<p>
We used to do a thing on the vuc show pretty regular.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/794246/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor794295"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 22, 2019 2:00 UTC (Mon)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/794295/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Uhm, me? Sure, feel free to drop me an email at alex.besogonov@gmail.com<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/794295/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor794410"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 23, 2019 13:04 UTC (Tue)
                               by <b>nilsmeyer</b> (guest, #122604)
                              [<a href="/Articles/794410/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;  The report compares IPv6 and IPv4 purely from a cost perspective, but fails completely (or I didn't find it) to consider the scenario that supporting IPv6 is a must for an ISP, or they will lose their customers. Let's say some reasonably popular services start popping up as IPv6-only, because that makes more sense economically.</font><br>
<p>
That would require the cost of an IPv4 address to rise astronomically, and currently that's not how the economics of IPv4 work. Most customers I work with don't bother with IPv6 at all, when I'm in the position to set up infrastructure I usually just sneak it in since it's mostly a freebie. Then again, my personal servers currently don't have an IPv6 address assigned even though I have DS-Lite at home...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/794410/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor794425"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 23, 2019 15:49 UTC (Tue)
                               by <b>farnz</b> (subscriber, #17727)
                              [<a href="/Articles/794425/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <p>There's a degree of geographic luck involved, too - most of the developed world has enough IPv4 that there's no short-term shortage (no need to put everyone behind CGNAT, for example). IPv6 is thus something you do because you want it, not because you need it - it's worth it for the big players (Google/YouTube, Netflix, Facebook) because it lets you bypass CGNAT on mobile and in countries with IPv4 shortage, which improves your performance metrics.
<p>In contrast, in a reasonable number of less developed countries, you're stuck behind CGNAT for IPv4 whether you like it or not, and need IPv6 if you want to run a server other than an onion service, or you pay for AWS/GCE/other services in a country with enough IPv4. If you're lucky, your ISP is sane enough to run 464XLAT or dual-stack; if you're unlucky, you're IPv4-only and have no choice but pay for Western services.
      
          <div class="CommentReplyButton">
            <form action="/Articles/794425/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor794472"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 24, 2019 7:33 UTC (Wed)
                               by <b>jem</b> (subscriber, #24231)
                              [<a href="/Articles/794472/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <blockquote>There's a degree of geographic luck involved, too - most of the developed world has enough IPv4 that there's no short-term shortage (no need to put everyone behind CGNAT, for example).</blockquote>

<p>According to <a href="https://en.wikipedia.org/wiki/IPv4_address_exhaustion">Wikipedia</a>, "RIPE NCC, the regional Internet registry for Europe, was the second RIR to deplete its address pool on 14 September 2012", after APNIC. AFRINIC was the last. The situation in North America may be a bit better.</p>

<blockquote>[IPv6 is] worth it for the big players (Google/YouTube, Netflix, Facebook) because it lets you bypass CGNAT on mobile and in countries with IPv4 shortage, which improves your performance metrics.</blockquote>

Google (including YouTube) and Facebook are doing operators like T-Mobile a big favor, because they generate a <a href="https://www.statista.com/chart/4124/mobile-traffic-by-application/">large portion</a> Internet traffic, which means packets between the handset and YouTube doesn't have to go through NAT64. It's all end-to-end with no address or protocol conversion, like the Internet was originally designed to work, only using IPv6 this time.
      
          <div class="CommentReplyButton">
            <form action="/Articles/794472/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor794473"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 24, 2019 8:20 UTC (Wed)
                               by <b>farnz</b> (subscriber, #17727)
                              [<a href="/Articles/794473/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <p>It's not the RIR holdings of IPv4 that matter - the run out of a RIR simply means that new ISPs in a region cannot get started. Instead, it's the IPv4 holdings of each ISP in the region that matter, as compared to the size of their customer base; if (to choose an example that has deployed IPv6) Comcast in the USA has 50 million potential customers in its service area, and a total of 60 million IPv4 addresses across all its ASes, it can shuffle IPv4 around to get one IPv4 per customer, minimum, and thus no CGNAT.
<p>In contrast, if an ISP in <a href="https://en.wikipedia.org/wiki/Internet_in_Botswana">Botswana</a> has 50,000 IPv4 addresses (half the total assigned to Botswana), it can't offer one IP address per user in its service area (it has to CGNAT 7:1 if it claims the whole of the current Internet market in Botswana, and worse if the Internet grows). Because the RIRs are out, said ISP can only grow by buying addresses from someone else when it needs them - so the incentive is there to CGNAT.
<p>Plus, you then have user expectations to take into account; in the USA, people expect the experience they get from stateless routing by ISPs, and NAT under their control; this means that CGNAT is expensive, because it has to maintain state in such a way that a single device failure does not lose a user's NAT mappings. In other countries, CGNAT can be cheaper because it's all the local users have ever known, so it can be unreliable, and that's just the way the Internet is.
<p>And IPv6 is a mutual thing for the big players and mobile operators - T-Mobile loses demand on its CGNAT (which they like), and the big operators get improvements on their latency metrics (which they like). Note that, for example, just-in-time sending of the next chunk of video involves smaller chunks if the latency from server to client is lower, and you can spend more time preparing a page for the same TTI if the latency is lower.
      
          <div class="CommentReplyButton">
            <form action="/Articles/794473/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor794675"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">HP-PA / PA-RISC</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 26, 2019 11:29 UTC (Fri)
                               by <b>meuh</b> (guest, #22042)
                              [<a href="/Articles/794675/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <blockquote>The pa-risc architecture now supports dynamic ftrace</blockquote>

<p>
HP-PA / PA-RISC seems more maintained as an architecture, than, say, Itanium / IA-64.
In particular, QEMU has support for HP-PA / PA-RISC emulation, but not for Itanium / IA-64.
</p>

<p>
As I've never seen, nor used a physical HP-PA machine, I can only guess they're mostly some kind of mainframes, where upgrading to newer Linux kernel won't happen anytime soon.
</p>

<p>So I wonder what the incentive is to keep updating HP-PA / PA-RISC alive, beside usual hacker motives.</p>

      
          <div class="CommentReplyButton">
            <form action="/Articles/794675/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor794676"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">HP-PA / PA-RISC</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 26, 2019 11:44 UTC (Fri)
                               by <b>pizza</b> (subscriber, #46)
                              [<a href="/Articles/794676/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Itanium hardware can still be purchased new (until 2021), but PA-RISC hardware was discontinued in 2008, and emulating obsolete hardware is a lot cheaper than rewriting a boatload of [usually highly] proprietary software.<br>
<p>
(It could be argued that the stuff that was easily ported from PA-RISC has already been done so (be it to x86/x86_64 or Itanium) so all that's left is the stuff that cannot be ported yet is so critical that it's worth emulating forever..)<br>
<p>
Give it a few more years, and you'll probably see interest in Itanium emulation pick up.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/794676/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2019, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
