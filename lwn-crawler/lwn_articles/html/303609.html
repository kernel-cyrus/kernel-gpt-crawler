        <!DOCTYPE html>
        <html lang="en">
        <head><title>2.6.28 merge window, part 2 [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/303609/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/303446/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/303609/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>2.6.28 merge window, part 2</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Did you know...?</b>
<p>
LWN.net is a subscriber-supported publication; we rely on subscribers
       to keep the entire operation going.  Please help out by <a
       href="/Promo/nst-nag4/subscribe">buying a subscription</a> and keeping LWN on the
       net.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>October 22, 2008</br>
           </div>
As of this writing, just under 6200 non-merge changesets have been merged
into the mainline kernel since the 2.6.27 release.  This merge window
should be drawing to a close around October&nbsp;24, so we are getting
closer to seeing what 2.6.28 will look like.  User-visible changes merged
since <a href="http://lwn.net/Articles/302754/">last week's update</a>
include:
<p>
<ul>
<li> New drivers have been merged for
     Maxim/Dallas DS3234 SPI realtime clock chips,
     VIA UniChrome Family graphics chipsets,
     Toshiba Mobile IO framebuffers,
     C-Media CM109 USB phones,
     the touchpad shipped on OLPC XO systems,
     Automata Sercos III PCI cards (via UIO),
     Delcom USB 7-segment LED displays,
     generic USB test-and-measurement devices,
     Freescale QE/CPM USB device controllers,
     Vernier Software Technologies USB spectrometers,
     GPIO-connected NAND flash devices,
     Freescale i.MX2 and i.MX3 flash controllers,
     OMAP2/OMAP3-connected OneNAND flash devices,
     Dialog DA9030/DA9034 multifunction controllers, and
     Texas Instruments TWL4030/TPS659x0 multifunction controllers.

<p>
<li> The driver staging tree has been <a
     href="http://lwn.net/Articles/301192/">moved into the mainline</a>.
     It brings with it a new TAINT_CRAP flag and suitably tainted drivers
     for Meilhaus ME-4000 data collection boards,
     Go 7007 ("some weird device") video controllers,
     Agere ET-1310 Gigabit Ethernet controllers,
     Atmel at76c503/at76c505/at76c505a wireless USB cards,
     Alacritech SLIC Technology non-accelerated 10Gb Ethernet cards,
     Alacritech IS-NIC gigabit Ethernet cards,
     Winbond w35und wireless network adapters,
     and Prism 2.5 USB wireless network adapters (a driver which includes
     its own 802.11 stack).  Also added are an echo cancellation module and
     a driver which enables the passing of network packets over a USB link.

<p>

<li> A lot of work on the Intel i915 graphics driver has been merged; this
     work includes the <a href="http://lwn.net/Articles/283793/">Graphics
     Execution Manager (GEM)</a> GPU memory management subsystem and "IGD
     OpRegion" support which enables ACPI backlight control.  It looks like
     kernel-based mode setting might not make it for 2.6.28, but much of
     the rest of the big graphics rework is now merged.
<p>
<li> The way video drivers handle waiting for vertical blank cycles has
     been changed to reduce interrupts - and, thus, power consumption.
<p>
<li> Rik van Riel's <a href="http://lwn.net/Articles/286472/">memory
     management scalability patches</a> have, at long last, been merged.
     These patches separate the management of anonymous, file-backed, and
     completely unevictable pages, eliminating a lot of useless page scanning.
<p>
<li> Another VM improvement causes the system to free a page's swap space 
     after that page is brought back into RAM; this effectively increases
     the amount of swap available on the system.
<p>
<li> Nick Piggin's <a href="http://lwn.net/Articles/304188/">rewritten vmap
     layer</a> should give significant performance  
     improvements, especially as the number of CPUs on a system grows.
<p>

<li> Huge pages will now be included in core dumps, making the debugging of 
     applications using those pages easier.
<p>
<li> The <a href="http://lwn.net/Articles/287435/">container freezer</a>
     has been merged.  It is now possible for the system to freeze all
     processes within a container (control group) as a unit.

<p>
<li> The KVM virtualization code has seen a number of improvements,
     including the ability to assign PCI devices to guests and support for
     Intel "Tukwila" processors.
<p>
<li> Kprobes are now supported by the SuperH architecture.
<p>
<li> There is a new ext3 mount option (<tt>data_err=abort</tt>) which
     causes filesystem operations to abort when I/O errors are
     encountered.  In the absence of this option, the old behavior
     (continue but complain in the system log) remains.
<p>
<li> In-kernel interrupt balancing for 32-bit x86 systems has been
     removed.  This feature has been deprecated (in favor of user-space
     balancing) for some time.



</ul>
<p>
Changes visible to kernel developers include:
<p>
<ul>

<li> A number of tracing-related patches have been merged.  These include
     the <a href="http://lwn.net/Articles/291091/">tracepoints</a>
     mechanism, some instrumentation in the core scheduler code, 
     improvements to the ftrace function tracing feature,
     a new ftrace-based stack tracer,
     a new ftrace-based boot (initcall) tracer, and
     the <a href="http://lwn.net/Articles/300992/">low-level trace
     buffer</a> code.
<p>
     

<li> The sysctl <tt>strategy()</tt> function prototype has changed: the
     unused <tt>name</tt> and <tt>nlen</tt> parameters have been removed.
<p>
<li> Asynchronous I/O support can now be configured out of the kernel,
     saving about 7KB of space on systems where AIO is not needed.
<p>
<li> As planned, <tt>device_create_drvdata()</tt> has been renamed to
     <tt>device_create()</tt>, with the same parameters.
<p>
<li> There is now a mechanism to enable and disable output from
     <tt>pr_debug()</tt> and <tt>dev_dbg()</tt> calls on a per-module
     basis.  Control is through a virtual file in debugfs.  There is no
     documentation file associated with this change; instructions on how
     to use this feature can be found in <a href="
     http://git.kernel.org/git/?p=linux/kernel/git/torvalds/linux-2.6.git;a=commit;h=346e15beb5343c2eb8216d820f2ed8f150822b08">the
     patch changelog</a>.
<p>
<li> The new <tt>dev_WARN()</tt> function:
<p>
<pre>
    dev_WARN(struct device *dev, char *format, ...);
</pre>
<p>
     will output the formatted warning, along with a full stack trace.
     This will allow the warnings to be collected at <a
     href="http://kerneloops.org/">kerneloops.org</a> and incorporated into
     the reports there.
<p>
<li> The new <tt>%pR</tt> formatting directive allows <tt>printk()</tt> and
     friends to output the contents of <tt>resource</tt> structures.
<p>
<li> There is a new function intended to make life easier for PCI driver
     writers:
<p>
<pre>
    static inline void *pci_ioremap_bar(struct pci_dev *pdev, int bar);
</pre>
<p>
     This function will remap the entire PCI I/O memory region, as
     selected by the <tt>bar</tt> argument.

</ul>
<p>
See next week's Kernel Page for a summary of the final days of the 2.6.28
merge window.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Releases-2.6.28">Releases/2.6.28</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/303609/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor304399"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">2.6.28 merge window, part 2</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 23, 2008 5:19 UTC (Thu)
                               by <b>harinath</b> (subscriber, #47697)
                              [<a href="/Articles/304399/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I found the nand_ecc.c rewrite (commit e6cf5df183) the most interesting, probably because of the well-written exposition of how the improvements were tried out.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/304399/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor304427"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What about CUSE?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 23, 2008 8:41 UTC (Thu)
                               by <b>Tuxie</b> (guest, #47191)
                              [<a href="/Articles/304427/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
CUSE is still not merged? :(  I really hope it will be merged into 2.6.28 as they (the CUSE/OSSP devs) planned.<br>
<p>
<a href="http://userweb.kernel.org/~tj/ossp/">http://userweb.kernel.org/~tj/ossp/</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/304427/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor304472"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Nostalgia:  Bye bye swap cache!</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 23, 2008 14:31 UTC (Thu)
                               by <b>jzbiciak</b> (guest, #5246)
                              [<a href="/Articles/304472/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <BLOCKQUOTE><I>Another VM improvement causes the system to free a page's swap space after that page is brought back into RAM; this effectively increases the amount of swap available on the system. </I></BLOCKQUOTE>
<P>I remember hearing about the <A HREF="http://www.linux-tutorial.info/modules.php?name=MContent&pageid=314">swap cache</A> waaaaay back when (2.0 or earlier).  Granted, the VM's changed a lot since then.  So, with this change, is the swap cache going away?</P>
      
          <div class="CommentReplyButton">
            <form action="/Articles/304472/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor304523"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Nostalgia:  Bye bye swap cache!</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 23, 2008 17:40 UTC (Thu)
                               by <b>riel</b> (subscriber, #3142)
                              [<a href="/Articles/304523/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
No, the swap cache is still there.  However, since nowadays many systems have more RAM than swap, it makes sense to be a little more aggressive about freeing swap space, while in the days where systems had little RAM and lots of swap it made sense to hang on to swap space.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/304523/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor304555"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Nostalgia:  Bye bye swap cache!</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 23, 2008 21:09 UTC (Thu)
                               by <b>ballombe</b> (subscriber, #9523)
                              [<a href="/Articles/304555/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
... but nowadays we have suspend-to-disk which require a lot of swap-space<br>
to be on the safe side, and disk-space is cheap.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/304555/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor304857"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">TAINT_CRAP</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 27, 2008 22:06 UTC (Mon)
                               by <b>proski</b> (subscriber, #104)
                              [<a href="/Articles/304857/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <blockquote type="cite">
It brings with it a new TAINT_CRAP flag and suitably tainted drivers for ... Atmel at76c503/at76c505/at76c505a wireless USB cards
</blockquote>
That's very encouraging for the developers who worked on the driver.  I'm sure they will proudly mention TAINT_CRAP in their resumes.
      
          <div class="CommentReplyButton">
            <form action="/Articles/304857/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor305555"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">TAINT_CRAP</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 31, 2008 20:57 UTC (Fri)
                               by <b>oak</b> (guest, #2786)
                              [<a href="/Articles/305555/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Hm. I didn't know the driver flags can taint resumes too.<br>
<p>
--- my resume ---<br>
<p>
Worked on kernel driver A and B.  Got them mainlined.<br>
<p>
--- interview ---<br>
<p>
Interviewer: You developed driver A.  Our developer who looked into it <br>
said it was tainted crap.<br>
<p>
Interviewed: Has your developer gotten his own code into upstream kernel?<br>
<p>
--- branch 1 ---<br>
<p>
Interviewer: No.<br>
<p>
Interviewed: I would be happy to assist your developers in raising their <br>
code quality up to the crap level.<br>
<p>
Interviewer: Err.<br>
<p>
--- branch 2 ---<br>
<p>
Interviewer: Yes.  He's Andrew Morton.<br>
<p>
Interviewed: Err.  Did he think it was OK?<br>
<p>
Interviewed: Sure.  Welcome to Google.<br>
<p>
---------------<br>
<p>
Moral of the story: If your future employer has clueless people you'll be <br>
involved with shit anyway.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/305555/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor805189"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">TAINT_CRAP</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 20, 2019 1:57 UTC (Wed)
                               by <b>mirabilos</b> (subscriber, #84359)
                              [<a href="/Articles/805189/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
+1, funny<br>
<p>
On the other side: how do I find out which driver caused this?<br>
<p>
I only saw this just now in reportbug output.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/805189/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor805241"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">TAINT_CRAP</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 20, 2019 21:51 UTC (Wed)
                               by <b>gregkh</b> (subscriber, #8)
                              [<a href="/Articles/805241/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The kernel log should say what module caused this to happen, look there.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/805241/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor805244"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">TAINT_CRAP</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 21, 2019 0:19 UTC (Thu)
                               by <b>mirabilos</b> (subscriber, #84359)
                              [<a href="/Articles/805244/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Thanks, but…<br>
<p>
$ sudo dmesg | fgrep -i -e crap -e taint | wc<br>
      0       0       0<br>
<p>
And yes, it’s the correct system:<br>
<p>
$ cat /proc/sys/kernel/tainted<br>
1024<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/805244/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2008, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
