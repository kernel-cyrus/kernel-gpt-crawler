        <!DOCTYPE html>
        <html lang="en">
        <head><title>Solving the ext3 latency problem [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/328363/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/327941/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/328363/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>Solving the ext3 latency problem</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Please consider subscribing to LWN</b>
<p>
Subscriptions are the lifeblood of LWN.net.  If you appreciate this
content and would like to see more of it, your subscription will
help to ensure that LWN continues to thrive.  Please visit
<a href="/Promo/nst-nag1/subscribe">this page</a> to join up and keep LWN on
the net.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>April 14, 2009</br>
           </div>
One might think that the ext3 filesystem, by virtue of being standard on
almost all installed Linux systems for some years now, would be reasonably
well tuned for performance.  Recent events have shown, though, that some
performance problems remain in ext3, especially in places where the
<tt>fsync()</tt> system call is used.  It's impressive what can happen when
attention is drawn to a problem; the 2.6.30 kernel will contain
fixes which seemingly eliminate many of the latencies experienced by ext3
users.  This article will look at the changes that were made, including a
surprising change to the default journaling mode made just before the
2.6.30-rc1 release. 
<p>

The problem, in short, is this: the ext3 filesystem, when running in the
default <tt>data=ordered</tt> mode, can exhibit lengthy stalls when some
process calls <tt>fsync()</tt> to flush data to disk.  This issue most
famously manifested itself as the much-lamented Firefox system-freeze problem, but it goes
beyond just Firefox.  Anytime there is reasonably heavy I/O going on, an
<tt>fsync()</tt> call can bring everything to a halt for several seconds.
Some stalls on the order of minutes have been reported.  This behavior has
tended to discourage the use of <tt>fsync()</tt> in applications and it
makes the Linux desktop less fun to use.  It's clearly worth fixing - but
nobody did that for years. 
<p>

When Ted Ts'o looked into the problem, he noticed an obvious problem: data
sent to the disk via <tt>fsync()</tt> is put at the back of the I/O
scheduler's queue, behind all other outstanding requests.  If processes on
the system are 
writing a lot of data, that queue could be quite long.  So it takes a long
time for <tt>fsync()</tt> to complete.  While that is happening, other
parts of the filesystem can stall, eventually bringing much of the system
to a halt.
<p>

The first fix was to mark I/O requests generated by <tt>fsync()</tt> with the
<tt>WRITE_SYNC</tt> operation bit, marking them as synchronous requests.
The CFQ I/O scheduler tries to run synchronous requests (which generally
have a process waiting for the results) ahead of asynchronous ones (where
nobody is waiting).  Normally, reads are considered to be synchronous,
while writes are not.  Once the <tt>fsync()</tt>-related requests were made
synchronous, they were able to jump ahead of normal I/O.  That
makes <tt>fsync()</tt> much faster, at the expense of slowing down the
I/O-intensive tasks in the system.  This is considered to be a good
tradeoff by just about everybody involved.  (It's amusing to note that this
change is conceptually similar to the <a
href="http://lwn.net/Articles/301467/">I/O priority  patch</a> posted by
Arjan van de Ven some time ago; some ideas take a while to reach
acceptance). 

<p>

Block subsystem maintainer Jens Axboe <a href="/Articles/328368/">disliked
the change</a>, though, stating that it would cause severe performance
regressions for some workloads.  Linus <a href="/Articles/328370/">made it
clear</a>, though, that the patch was probably going to go in, and that, if
the CFQ I/O scheduler couldn't handle it, there would soon be a change to a
different default scheduler.  Jens probably would have looked further in
any case, but the extra motivation supplied by Linus is unlikely to have
slowed this process down.
<p>

The problem, as it turns out, is that <tt>WRITE_SYNC</tt> actually does two
things: putting the request onto the higher-priority synchronous queue, and
unplugging the queue.  "Plugging" is the technique used by the block layer
to issue requests to the underlying disk driver in bursts.  Between bursts,
the queue is "plugged," causing requests to accumulate there.  This
accumulation gives the I/O scheduler an opportunity to merge adjacent
requests and issue them in some sort of reasonable order.  Judicious use of
plugging improves block subsystem performance significantly.
<p>
Unplugging the
queue for a synchronous request can make sense in some situations; if
somebody is waiting for the the operation, chances are they will not be
adding any adjacent requests to the queue, so there is no point in waiting
any longer.

As it happens, though, <tt>fsync()</tt> is not one of those situations.
Instead, a call to <tt>fsync()</tt> will usually generate a whole series of
synchronous requests, and the chances of those requests being adjacent to
each other is fairly good.  So unplugging the queue after each synchronous
request is likely to make performance worse.  Upon identifying this
problem, Jens posted <a href="http://lwn.net/Articles/327502/">a series of
patches</a> to fix it.  One of them adds a new <tt>WRITE_SYNC_PLUG</tt>
operation which queues a synchronous write without unplugging the queue.
This allows operations like <tt>fsync()</tt> to create a series of
operations, then unplug the queue once at the end.
<p>
While he was at it, Jens fixed a couple of related issues.  One was that
the block subsystem can still sometimes run synchronous requests behind
asynchronous requests in some situations.  The code here is a bit tricky,
since it may be desirable to let a few asynchronous requests through occasionally to
prevent them from being starved entirely.  Jens changed the balance to
ensure that synchronous requests get through in a timely manner.
<p>
Beyond that, the CFQ scheduler
uses "anticipatory" logic with synchronous requests; upon executing one
such request, it will stall the queue to see if an adjacent request shows
up.  The idea is that the disk head will be ideally positioned to satisfy
that request, so the best performance is obtained by not moving it away
immediately. 
This logic can work well for synchronous reads, but it's not helpful
when dealing with write operations generated by <tt>fsync()</tt>.  So now there's a
new internal flag that prevents anticipation when <tt>WRITE_SYNC_PLUG</tt>
operations are executed.
<p>
Linus <a href="/Articles/328373/">liked the changes</a>:
<p>
<div class="BigQuote">
	Goodie. Let's just do this. After all, right now we would otherwise
	have to revert the other changes as being a regression, and I
	absolutely _love_ the fact that we're actually finally getting
	somewhere on this fsync latency issue that has been with us for so
	long.
</div>
<p>
It turns out that <a href="/Articles/328381/">there's a little more</a>,
though.  Linus noticed that he was still getting stalls, even if they were
much shorter than before, and he wondered why:
<p>
<div class="BigQuote">
	One thing that I find intriguing is how the fsync time seems so
	_consistent_ across a wild variety of drives. It's interesting how
	you see delays that are roughly the same order of magnitude, even
	though you are using an old SATA drive, and I'm using the Intel
	SSD.
</div>
<p>
The obvious conclusion is that there was still something else going on.
Linus's hypothesis was that the volume of requests pending to the drive was
large enough to cause stalls even when the synchronous requests go to the
front of the queue.  With a default configuration, requests can contain up
to 512KB of data; stack up a couple dozen or so of those, and it's going to
take the drive a little while to work through them.  Linus experimented
with setting the maximum size (controlled by
<tt>/sys/block/<i>drive</i>/queue/max_sectors_kb</tt>) to 64KB, and reports
that things worked a lot better.  As of this writing, though, the default
has not been changed; Linus suggested that it might make sense to cap the
maximum amount of outstanding data, rather than the size of any individual
request.  More experimentation is called for.
<p>
There is one other important change needed to get a truly quick
<tt>fsync()</tt> with ext3, though: the filesystem must be mounted in
<tt>data=writeback</tt> mode.  This mode eliminates the requirement that
data blocks be flushed to disk ahead of metadata; in <tt>data=ordered</tt>
mode, instead, the amount of data to be written guarantees that
<tt>fsync()</tt> will always be slower.  Switching to
<tt>data=writeback</tt> eliminates those writes, but, in the process, it
also turns off the feature which made ext3 seem more robust than ext4.
Ted Ts'o has mitigated that problem somewhat, though, by adding in the same
safeguards he put into ext4.  In some situations (such as when a new file
is renamed on top of an existing file), data will be forced out ahead of
metadata.  As a result, data loss resulting from a system crash should be less of a
problem.
<p>
<div class="tlrw">
<h3>Sidebar: data=guarded</h3>
<p>
Another alternative to data=ordered may be the <a
href="http://lwn.net/Articles/328406/">data=guarded mode</a> proposed by
Chris Mason.  This mode would delay size updates to prevent information
disclosure problems.  It is a very new patch, though, which won't be ready
for 2.6.30.
</div>

The other potential problem with <tt>data=writeback</tt> is that, in some
situations, a crash can leave a file with blocks allocated to it which have
not yet been written.  Those blocks may contain somebody else's old data,
which is a potential security problem.  Security is a smaller issue than it
once was, for the simple reason that multiuser Linux systems are relatively
scarce in 2009.  In a world where most systems are dedicated to a single
user, the potential for information disclosure in the event of a crash
seems vanishingly small.  In other words, it's not clear
that the extra security provided by <tt>data=ordered</tt> is worth the
associated performance costs anymore.

<p>
So Ted <a href="/Articles/328382/">suggested</a> that, maybe,
<tt>data=writeback</tt> should be made the default.  There was some
resistance to this idea; not everybody thinks that ext3, at this stage of
its life, should see a big option change like that.  Linus, however, <a
href="/Articles/328383/">was unswayed</a> by the arguments.  He merged a
patch which creates a configuration option for the default ext3 data mode,
and set it to "writeback."  That will cause ext3 mounts to silently switch
to <tt>data=writeback</tt> mode with 2.6.30 kernels.  Says Linus:
<p>
<div class="BigQuote">
	I'm expecting that within a few months, most modern distributions
	will have (almost by mistake) gotten a new set of saner defaults,
	and anybody who keeps their machine up-to-date will see a smoother
	experience without ever even realizing _why_.
</div>
<p>
It's worth noting that this default will not change anything if
(1)&nbsp;the data mode is explicitly specified when the filesystem is
mounted, or (2)&nbsp;a different mode has been wired into the filesystem
with <tt>tune2fs</tt>.  It will also be ineffective if distributors change
it back to "ordered" when configuring their kernels.  Some distributors, at
least, may well decide that they do not wish to push that kind of change to
their users.  We will not see the answer to that question for some months
yet.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Filesystems-ext3">Filesystems/ext3</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/328363/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor328440"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 14, 2009 16:50 UTC (Tue)
                               by <b>PO8</b> (guest, #41661)
                              [<a href="/Articles/328440/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I will be forcing my ext3 filesystems to stay data=ordered until Chris Mason's cool data=guarded patch is working.<br>
<p>
The argument that "it's a single-user system, so who cares" seems to me to be crazy talk?  Like many Linux users I run Apache + database instances that allow anonymous users anywhere on the net to access some of my dynamically-updated files.  I may be mistaken, but it looks to me like the current data=writeback mode gives an increased opportunity to disclose things like my database's (foolishly) unencrypted password or my personal email to the whole web after a crash.  Not OK, regardless of the shorter sync times.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328440/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor328441"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 14, 2009 16:56 UTC (Tue)
                               by <b>nye</b> (subscriber, #51576)
                              [<a href="/Articles/328441/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
data=guarded sounds rather interesting, but I'm not sure I understand how it differs from data=ordered. In what situations could the result be different? The special-casing for rename means that renames should have the same behaviour, and data=guarded appears to mean that resizes have the same behaviour (or does it mean that both data and metadata can now be further delayed than data=ordered?).<br>
<p>
IIUC, I suppose there could be things like *new* files being created with zero size after a crash, rather than not being created at all, which doesn't seem like the end of the world. I admit I haven't actually thought this through very much at all yet, so that could be nonsense for both behaviours. :P<br>
<p>
What other reliability/data integrity implications would this have?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328441/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor328462"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 14, 2009 18:09 UTC (Tue)
                               by <b>corbet</b> (editor, #1)
                              [<a href="/Articles/328462/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <blockquote><i>
data=guarded sounds rather interesting, but I'm not sure I understand how it differs from data=ordered. In what situations could the result be different?</i></blockquote>
<p>
data=ordered forces all data to go out before the metadata is written; in practice, that forces data to be written within five seconds.  data=guarded, as I understand it, delays the writing of certain metadata (the file size in particular) until the data has been written.  The timing is looser, but it still keeps random junk from showing up within a file after a crash.
      
          <div class="CommentReplyButton">
            <form action="/Articles/328462/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor328468"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 14, 2009 18:51 UTC (Tue)
                               by <b>masoncl</b> (subscriber, #47138)
                              [<a href="/Articles/328468/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Right, data=guarded delays pushing the new file size down to disk until the data is there first.<br>
<p>
It still does the old style data=ordered in cases where the file size isn't enough protection (like filling holes).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328468/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor328706"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2009 15:28 UTC (Thu)
                               by <b>sandeen</b> (guest, #42852)
                              [<a href="/Articles/328706/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Also, in practice (and as evidenced by my testing), data=guarded will leave you with smaller file sizes (potentially 0-length) when you crash.  But that is better than having garbage (potentially other people's data) in those files.<br>
<p>
The rename &amp; truncate hacks will help flush some data, but if you, say, untar a kernel tree and crash, those hacks don't come into play.<br>
<p>
data=writeback would wind up garbage in the files, data=guarded would wind up with 0-length or shortened files with no garbage, and data=ordered would likely have more files intact due to the journal transaction commits causing more flushing along the way... and no garbage.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328706/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor328450"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 14, 2009 17:14 UTC (Tue)
                               by <b>MisterIO</b> (guest, #36192)
                              [<a href="/Articles/328450/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Is this simply a way to say : "Just update the fs to ext4!"? After this what reason will we have to go on using ext3 instead of ext4?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328450/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor328485"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 14, 2009 20:46 UTC (Tue)
                               by <b>elanthis</b> (guest, #6227)
                              [<a href="/Articles/328485/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Stability and safety.  Production environments are going to be more comfortable with a small incremental change to their existing FS than they are in switching and potentially being bitten by one of the many major changes in ext4.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328485/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor328749"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2009 19:35 UTC (Thu)
                               by <b>jordanb</b> (guest, #45668)
                              [<a href="/Articles/328749/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I think the idea is that ext3 is being made less reliable so that it will no longer be more reliable than ext4, to try to remove that argument against "upgrading."<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328749/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor328452"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 14, 2009 17:25 UTC (Tue)
                               by <b>bronson</b> (subscriber, #4806)
                              [<a href="/Articles/328452/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Great article!  It's nice to see that all this discussion is coming to a sane conclusion.<br>
<p>
It's a little disturbing to see data=writeback becoming the default.  Is the performance gain really so great that it's worth being less secure by default?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328452/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor328524"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 15, 2009 9:34 UTC (Wed)
                               by <b>edschofield</b> (guest, #39993)
                              [<a href="/Articles/328524/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Yes, great article. The lkml discussion was also fascinating.<br>
<p>
We have _severe_ latency issues with ext3 and our RAID arrays, sometimes causing our servers to appear to freeze for tens of seconds during disk writes. A safer 'writeback' mode that eliminates these latencies will be a huge win for us.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328524/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor328454"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 14, 2009 17:25 UTC (Tue)
                               by <b>spot</b> (guest, #15640)
                              [<a href="/Articles/328454/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Worth noting that Fedora has decided to go with data=ordered as the default in Rawhide, given the serious concerns around data=writeback.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328454/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor328455"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 14, 2009 17:27 UTC (Tue)
                               by <b>yusufg</b> (guest, #407)
                              [<a href="/Articles/328455/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
So what's the default mode for ext4 and are they any similar gotchas one has to be aware of ?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328455/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor328460"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 14, 2009 17:55 UTC (Tue)
                               by <b>mgb</b> (guest, #3226)
                              [<a href="/Articles/328460/">Link</a>] (14 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
"multiuser Linux systems are relatively scarce in 2009"<br>
<p>
We run a bunch of Linux mail servers, and we ain't the only ones.<br>
<p>
Maybe somebody should tell Linus how Linux is being used.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328460/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor328463"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 14, 2009 18:11 UTC (Tue)
                               by <b>malor</b> (guest, #2973)
                              [<a href="/Articles/328463/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It can be argued that most servers that provide more than one service are 'multiuser' machines.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328463/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor328479"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 14, 2009 20:10 UTC (Tue)
                               by <b>drag</b> (guest, #31333)
                              [<a href="/Articles/328479/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Personally I would think that multiuser actually means having multiple people with users using the computer at the same time. <br>
<p>
That is they are logged onto the machine and are doing something on them.. programming, editing, web browsing, etc. <br>
<p>
So your dealing with computers with multiple monitors with multiple users logged in at once, or LTSP, or people that still sell shell accounts. All of which are fairly rare compared to personal desktops, embedded systems, or most server systems. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328479/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor328498"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 14, 2009 23:24 UTC (Tue)
                               by <b>ktanzer</b> (guest, #6073)
                              [<a href="/Articles/328498/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Multi-user systems may be relatively rare, but as someone who was responsible for multiple LTSP deployments, I shudder at the thought that security in such cases would be cast aside or relegated to an afterthought.  LTSP is a great way to use old hardware.  For that matter, any home machine used by the whole family would also be multi-user (assuming people set up their own logins).<br>
<p>
On a more general note, Linux has inherited rich multi-user capabilities from Unix, and I hate to see that atrophy over time.  As one example, it is very easy to find information on how to configure popular programs such as Firefox, KDE, OpenOffice, etc. for a single user, but often maddeningly hard to determine how to configure on a system-wide basis.  The fact that FF can't run multiple instances from a single profile is not technically a multi-user issue, but also drives me up the wall...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328498/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor328501"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 15, 2009 1:25 UTC (Wed)
                               by <b>drag</b> (guest, #31333)
                              [<a href="/Articles/328501/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Well I can agree with that. <br>
<p>
I don't know exactly why, but I have a feeling that multiuser systems will become increasingly important in the future. <br>
<p>
Something will come along... like the acceptance of IPv6 and the decline of the "Personal Computer"-ing inflicted client-server relationship and the internet will return to it's P2P roots. (for reasons of scalability, robustness, expense).  If something like that were to happen and people realized that having mobile computers could become essentially disposible if they turned into little more then terminals for the 'big' computer at home or clusters at work... Then multiuser systems could become common place again.<br>
<p>
Weirder things have happenned.  <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328501/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor328513"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 15, 2009 4:35 UTC (Wed)
                               by <b>malor</b> (guest, #2973)
                              [<a href="/Articles/328513/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Typically, different services run under different user accounts, and rely on the system's security features to keep the two separate.  <br>
<p>
It would be bad if a bug in the mail server gave access to, say, deleted .htaccess files, or part of a SQL database. <br>
<p>
All Unix systems are inherently multiuser, and sabotaging inter-account security features is deliberately cutting away one layer of the net that can catch you if a bug exposes an attack vector.<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328513/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor328516"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 15, 2009 5:55 UTC (Wed)
                               by <b>hawk</b> (subscriber, #3195)
                              [<a href="/Articles/328516/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It may not be "multi-user" by that definition but the exact definition of "multi-user" isn't really that interesting for the actual argument, is it?<br>
<p>
Isn't the point that as soon as soon as there are multiple users (no matter if they are logged in using a system account or accessing the system through some other means, eg HTTP, authenticated in some way or even anonymously), there would be a chance that one user's data (or data "belonging to the system") could leak into a file which will be accessible by another user.<br>
<p>
So in the case of the the system crashing, a file publicly available on the web, or some logged in user(s), might end up containing anything that has previously been deallocated if that file was being modified, be it by the site administrator, or by a random user on a site where you can for instance upload an image to include in your content.<br>
<p>
<p>
I would think this definitely falls within the "common usage"-realm for Linux systems and that whoever made the argument may not have really thought it through.<br>
<p>
(Or I'm just not understanding in what scenarios something like this could actually happen.)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328516/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor328466"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 14, 2009 18:16 UTC (Tue)
                               by <b>smoogen</b> (subscriber, #97)
                              [<a href="/Articles/328466/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
You may run such a server (I do too... ) but nowadays it is a blip in the data compared to routers, switches, music boxes, GPS systems, laptops, desktops, workstations that run Linux. In those cases, worrying about data from some other user is less likely.<br>
<p>
Also I think it was the editor not Linus who said that.<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328466/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor328898"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 17, 2009 18:21 UTC (Fri)
                               by <b>giraffedata</b> (guest, #1954)
                              [<a href="/Articles/328898/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <blockquote>
nowadays it is a blip in the data compared to routers, switches, music boxes, GPS systems, laptops, desktops, workstations that run Linux. 
</blockquote>
<p>
I was going to say the opposite.  I think you're making a statement about the number of Linux kernel images running, but I don't think that's a useful measure of prevalence as it relates to the cost of assuming a system is single-user.
<p>
On the contrary, I believe the great majority of Linux is multiuser servers and the personal computers and appliances you mention are a blip.  I'm looking at the amount of filesystem access that happens.
<p>
When I say "multiuser" I'm considering a user to be a person, not a uid.
<p>
Incidentally, routers and switches (from your list) are multiuser systems.  Consequently, there is a security issue in sending data to the wrong user.

      
          <div class="CommentReplyButton">
            <form action="/Articles/328898/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor328514"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Multiuser quite important still: remote users on Windows PC:s</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 15, 2009 3:53 UTC (Wed)
                               by <b>eru</b> (subscriber, #2753)
                              [<a href="/Articles/328514/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <p>The big company I'm working for actually has most of its interactive Linux users on multi-user servers: This is because everyone is "of course" supplied with a Windows PC, but Linux is preferred for software development for several products, so the developers access Linux servers with X11 emulator or VNC running on the PC. This also makes it easier to maintain a consistent development environment for the users. Some people do have Linux workstations, but these are a minority.
<p>I don't know how typical this kind of use is, but I suspect it common in technology companies needing a Linux development environment for some users but not wanting or being able to go all the way to Linux desktops.

      
          <div class="CommentReplyButton">
            <form action="/Articles/328514/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor328549"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Multiuser quite important still: remote users on Windows PC:s</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 15, 2009 16:05 UTC (Wed)
                               by <b>chema</b> (subscriber, #32636)
                              [<a href="/Articles/328549/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Same here. <br>
<p>
Our development environment is a mixture of Windows desktop PCs (running some development tools + "corporate" applications) and Linux servers (providing: ssh + X11 fwd + http + samba + ...). <br>
<p>
It used to be HP-UX/Solaris &lt;-&gt; Windows but we happily migrated to linux a year ago.<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328549/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor328609"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Multiuser quite important still: remote users on Windows PC:s</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 15, 2009 20:18 UTC (Wed)
                               by <b>PhracturedBlue</b> (subscriber, #4193)
                              [<a href="/Articles/328609/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Yes, but are you using EXT3 as the filesystem on those machines?  In many (most?) multi-user systems, you're likely to have a big fileserver serving files via NFS or equivalent to various servers.  I don't know if your company is set up that way, but I'd think it would be common for large corporations with many users.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328609/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor328612"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Multiuser quite important still: remote users on Windows PC:s</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 15, 2009 20:29 UTC (Wed)
                               by <b>mgb</b> (guest, #3226)
                              [<a href="/Articles/328612/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
We used NFS like that back around '95 or '97 but it's way too slow for general use these days although there are undoubtedly still specialized applications where it's useful.<br>
<p>
So yes, we use ext3 for mail servers and web servers etc.  All of which are multi-remote-user.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328612/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor328637"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Multiuser quite important still: remote users on Windows PC:s</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2009 4:29 UTC (Thu)
                               by <b>eru</b> (subscriber, #2753)
                              [<a href="/Articles/328637/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <i>Yes, but are you using EXT3 as the filesystem on those machines? In many (most?) multi-user systems, you're likely to have a big fileserver serving files via NFS or equivalent to various servers.</i>
<p>
Yes and no: The home directories of the users are normally mounted via NFS (the NFS servers are not always Linux: NetApps and and Solaris boxes are also used), but the Linux servers (usually RHEL) to which people log in use ext3. Because of the various local shared directories, multiuser issues in ext3 are still relevant.

      
          <div class="CommentReplyButton">
            <form action="/Articles/328637/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor328627"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2009 0:46 UTC (Thu)
                               by <b>hazelsct</b> (guest, #3659)
                              [<a href="/Articles/328627/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Indeed.<br>
<p>
Another "multi-user" use case on my "single-user" laptop is having a separate account for downloaded software (government contracts sometimes require such things), for which I don't want to take the risk of polluting the rest of my system.  I install in wine in this separate account, and share (minimal) data as necessary.  Security matters.<br>
<p>
[OT: it's astounding to me how well wine runs a *lot* of Windoze software these days!!]<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328627/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor328467"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 14, 2009 18:40 UTC (Tue)
                               by <b>mrshiny</b> (subscriber, #4266)
                              [<a href="/Articles/328467/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      I don't understand this:
<blockquote>There is one other important change needed to get a truly quick fsync() with ext3, though: the filesystem must be mounted in data=writeback mode. </blockquote>
Is this because the changes to fsync are disabled in data=ordered, or just because the performance gains are small compared to the overhead of data=ordered?<br>
<br>
I'm curious because if fsync is slow application developers won't use it, even if on some systems it's fast.  It will be years before application developers start using it "properly" again.
      
          <div class="CommentReplyButton">
            <form action="/Articles/328467/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor328486"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 14, 2009 20:48 UTC (Tue)
                               by <b>elanthis</b> (guest, #6227)
                              [<a href="/Articles/328486/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
data=ordered is the existing slow behavior.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328486/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor328635"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2009 5:22 UTC (Thu)
                               by <b>butlerm</b> (subscriber, #13312)
                              [<a href="/Articles/328635/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
"data=ordered" provides nearly ideal recovery semantics, but it is stronger <br>
than necessary to provide reasonable recovery behavior in most cases. A <br>
strict interpretation of data=ordered means committing dirty data to disk <br>
before any meta data updates.  That means that calling fsync on any file <br>
with dirty buffers is equivalent in cost to calling fsync on every file <br>
with dirty buffers in the filesystem.  <br>
<p>
Since data=ordered tends to interfere with getting real work done without <br>
stalling the question is what kinds of relaxations can be made without <br>
imperiling the integrity of your filesystem. "data=writeback" is the no <br>
holds barred assume your system is never going to crash tough luck for any <br>
recently touched files but you probably won't have to spend hours waiting <br>
for fsck sort of preference.<br>
<p>
Fortunately, there is a lot of room for reasonable, safer relaxations <br>
between data=ordered and data=writeback.  data=guarded is one such option <br>
that allows preliminary meta data commits for unrelated files to proceed <br>
with a smaller file size corresponding to the file data that has actually <br>
been written to disk.  That works really well as long as you are not trying <br>
to replace an existing file.  If you are doing rename replacements the same <br>
problem comes back to haunt you in a way that data=guarded doesn't solve.  <br>
(Rename undo would...)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328635/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor328658"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2009 9:42 UTC (Thu)
                               by <b>nye</b> (subscriber, #51576)
                              [<a href="/Articles/328658/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
However, in the case of file replacement via rename or truncate, ext3 (and ext4) will now flush the data to disk before the associated metadata anyway, even using data=writeback, so data=guarded does indeed solve that problem.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328658/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor328831"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 17, 2009 14:03 UTC (Fri)
                               by <b>anton</b> (subscriber, #25547)
                              [<a href="/Articles/328831/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <blockquote> A strict interpretation of data=ordered means committing
dirty data to disk before any meta data updates. </blockquote>

I'm not sure I agree, but anyway, if it behaves that way, that's fine
with me.  I like my data not only on disk, but also internally
consistent.

<blockquote>"data=writeback" is the no holds barred assume your
system is never going to crash [...] sort of preference.</blockquote>

But if I assume my system is never going to crash, why would I be
using fsync()?  And why should a file system that works based on that assumption do anything when the
application calls fsync()?

<blockquote>Fortunately, there is a lot of room for reasonable, safer
relaxations between data=ordered and data=writeback.</blockquote>

I would actually prefer to see something stricter than data=ordered.
Something that gives me the guarantee that the state after a crash
corresponds to some logical state of the file system before the crash.

<p>Until I get that, I'll just go for data=ordered and hope that the
Linux developers don't break it like they did with data=journal.

      
          <div class="CommentReplyButton">
            <form action="/Articles/328831/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor361220"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 10, 2009 12:00 UTC (Tue)
                               by <b>schabi</b> (guest, #14079)
                              [<a href="/Articles/361220/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <blockquote>I would actually prefer to see something stricter than data=ordered. Something that gives me the guarantee that the state after a crash corresponds to some logical state of the file system before the crash.</blockquote>

You always have the option to mount with "data=journal" - this is the safest and slowest mode with ext3.

And don't forget that RAID5 / RAID6 will break all barrier / journal semantics for all filesystems.
      
          <div class="CommentReplyButton">
            <form action="/Articles/361220/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor328702"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2009 15:18 UTC (Thu)
                               by <b>sandeen</b> (guest, #42852)
                              [<a href="/Articles/328702/">Link</a>] (17 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;&gt; Some distributors, at least, may well decide that they do not wish to</font><br>
<font class="QuotedText">&gt;&gt; push that kind of change to their users. We will not see the answer to</font><br>
<font class="QuotedText">&gt;&gt; that question for some months yet.</font><br>
<p>
Actually, you won't have to wait that long for some.  As long as data=writeback introduces a security hole by exposing other people's data on a crash[1], Fedora will not be shipping this way.  Rawhide has already turned<br>
<p>
CONFIG_EXT3_DEFAULTS_TO_ORDERED=y<br>
<p>
on.  Shipping any other default would be irresponsible.<br>
<p>
[1] <a href="http://lkml.org/lkml/2009/4/8/802">http://lkml.org/lkml/2009/4/8/802</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328702/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor328746"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2009 19:15 UTC (Thu)
                               by <b>chad.netzer</b> (subscriber, #4257)
                              [<a href="/Articles/328746/">Link</a>] (13 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Doesn't Fedora use ext4 now, by default, which uses data=writeback and thus has the security issues after a crash that ext3 data=ordered helped prevent?  So while it won't regress existing ext3 users, new adopters of Redhat will default to the "insecure" behavior of ext4.  Does ext4 even support data=ordered?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328746/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor328766"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2009 21:15 UTC (Thu)
                               by <b>dtlin</b> (subscriber, #36537)
                              [<a href="/Articles/328766/">Link</a>] (12 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
ext4's data=writeback mode does not suffer from the security problems that <br>
ext3's does.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328766/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor328772"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2009 22:23 UTC (Thu)
                               by <b>chad.netzer</b> (subscriber, #4257)
                              [<a href="/Articles/328772/">Link</a>] (11 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Is there a quick explanation as to why? (Or a link? I'll google for it in any case)<br>
<p>
BTW, Documentation/filesystems/ext4.txt in current linux repo seems to contradict your statement.  I can understand how delayed allocation can affect the situation (since certain data need never be written to the disk at all, even if metadata changes), but for allocated data, how does the ext4 situation differ from ext3 writeback mode?<br>
<p>
<a href="http://lwn.net/Articles/203915/">http://lwn.net/Articles/203915/</a><br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328772/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor328807"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 17, 2009 6:52 UTC (Fri)
                               by <b>bojan</b> (subscriber, #14302)
                              [<a href="/Articles/328807/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <p>Yeah, confusing isn't it. Relevant part of the docs, diffed:</p>

<pre>
 * writeback mode
-In data=writeback mode, ext3 does not journal data at all.  This mode provides
+In data=writeback mode, ext4 does not journal data at all.  This mode provides
 a similar level of journaling as that of XFS, JFS, and ReiserFS in its default
 mode - metadata journaling.  A crash+recovery can cause incorrect data to
 appear in files which were written shortly before the crash.  This mode will
-typically provide the best ext3 performance.
+typically provide the best ext4 performance.
</pre>

<p>It would be really good if Ted could comment if the above was simply copied from ext3 docs or if it is really still true for ext4 in writeback mode as well.</p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/328807/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor328968"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 18, 2009 16:14 UTC (Sat)
                               by <b>sbergman27</b> (guest, #10767)
                              [<a href="/Articles/328968/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
From Ted, in a relatively recent interview, speaking on *ext4* performance tips:<br>
<p>
"If you dont need the security guarantees of what happens after a crash that are provided by data=ordered, try using the data=writeback mount option."<br>
<p>
<a href="http://www.linux-mag.com/id/7272/2/">http://www.linux-mag.com/id/7272/2/</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328968/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor328982"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 18, 2009 23:22 UTC (Sat)
                               by <b>bojan</b> (subscriber, #14302)
                              [<a href="/Articles/328982/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <p>Compare that to this comment:</p>

<blockquote><i>
Fundamentally, the problem is caused by data=ordered mode.  This problem can be avoided by mounting the filesystem using data=writeback or by using a filesystem that supports delayed allocation  such as ext4.  This is because if you have a small sqllite database which you are fsync(), and in another process you are writing a large 2 megabyte file, the 2 megabyte file wont be be allocated right away, and so the fsync operation will not force the dirty blocks of that 2 megabyte file to disk; since the blocks havent been allocated yet, there is no security issue to worry about with the previous contents of newly allocated blocks if the system were to crash at that point.
</i></blockquote>

<p>Contradictory, isn't it?</p>

<a href="http://thunk.org/tytso/blog/2009/03/12/delayed-allocation-and-the-zero-length-file-problem/">http://thunk.org/tytso/blog/2009/03/12/delayed-allocation-and-the-zero-length-file-problem/</a>
      
          <div class="CommentReplyButton">
            <form action="/Articles/328982/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor328991"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 19, 2009 0:59 UTC (Sun)
                               by <b>sbergman27</b> (guest, #10767)
                              [<a href="/Articles/328991/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I guess.<br>
<p>
On a related note, if he thinks that writeback is good enough for ext3 because, after all, nobody runs Linux with multiple users... then is writeback also destined to be the default for ext4?  Or is the idea to destabilize the thus far rock solid ext3 enough to make ext4 look better by comparison?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328991/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor329001"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 19, 2009 2:56 UTC (Sun)
                               by <b>sitaram</b> (guest, #5959)
                              [<a href="/Articles/329001/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Actually, maybe not.  This is not about security; as far as security goes ext4 is the same.  What he is saying (or what I understand him to be saying) is that in ext4, due to delayed allocation, the performance issue with data=ordered is alleviated.<br>
<p>
So I'd see this as "delayed allocation makes ordered almost as efficient as writeback", not "...makes writeback as secure as ordered"<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/329001/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor329008"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 19, 2009 4:27 UTC (Sun)
                               by <b>tytso</b> (subscriber, #9993)
                              [<a href="/Articles/329008/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
OK, so there are multiple issues when people talk about "safety" and data=writeback.   First of all, for ext3.   In the security dimension, with data=writeback, if after a crash where the filesystem was not cleanly unmounted, files that were written right before the crash might contain unitialized data.   This data could be from another user, although on a single-user system, this is obviously not very likely.   How severely you consider this really depends on how paranoid you are.  Even on a single-user system, this data might contain information that you don't want to send out publically, and if you don't notice that a file contained something other than what you thought before you send it out to someone else, there is a potential for a security exposure.  Obviously, though on a single user system this is much less of an issue than on timesharing system.<br>
<p>
In the data loss department, if you have an application that didn't use fsync(), and the system crashes, with data=writeback there is the chance for dataloss.   In 2.6.30, Linus accepted patches which will cause an implied flush operation when a hueristic detects an application trying to replace an existing file via the replace-via-truncate and replace-via-rename cases patterns.  This largely reduces the problems for non-fsync-using applications.   It doesn't solve the problem for a freshly written file, but the system could have easily crashed five seconds earlier.<br>
<p>
OK, so how does ext4 change things.  By default ext4 on modern kernels (ignoring the technology preview on RHEL 5 and Fedora 10) performs delayed allocation.  This means that the data blocks are not allocated right away when you write the file, but only when they are forced out, either explicitly via fsync(), or via the page writeback algorithms in the VM, which will tend to push things out after 30-45 seconds (ignoring laptop mode) and perhaps sooner if the system is short on memory.<br>
<p>
In the security dimension, what this means is that even in data=writeback mode, in general on a crash the file will be truncated or zero-length instead of containing uninitialized data. In ext4 with delayed allocation and data=writeback, there *is* a very tiny race condition where if a transaction closes right between when the pdflush daemon allocates the filesystem block and before it has a chance to trigger the page writeback, that you might end up with uninitialized garbage.  This chance is very small, but it is non-zero.   In this case, ext4 data=ordered will force the write to disk, so it is technically safer in the security dimension, although this race is very hard to exploit, and very rare that it gets hit in practice.  (This is also why the overhead of data=ordered and data=writeback is much less for ext4, thanks to delayed allocation --- the difference between the two is not the same, however!)<br>
<p>
In the safety against applications that don't use fsync department, as of 2.6.30, ext4 will always do an implied allocation and flush for data=ordered and data=writeback.   So there is no real difference here between data=ordered and data=writeback.<br>
<p>
The bottom line is that while there is some performance benefit in going with data=writeback with ext4, the differences between data=ordered and data=writeback are much smaller with ext4, in both the cost and benefit dimensions.<br>
<p>
Chris Mason is also working on a data=guarded mode, which will cause files to be truncated (much like delayed allocation) on a crash with ext3.  I will look into porting this mode into ext4, if it proves to be enough of a performance advantage for ext4 over data=ordered, and yet providing a tiny bit more safety than data=writeback.  It's not clear to me that it will be worth it for ext4, however.<br>
<p>
I hope this helps answers the questions between ext3 and ext4, and data=ordered versus data=writeback.<br>
<p>
Regards,<br>
<p>
Ted.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/329008/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor329014"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 19, 2009 8:07 UTC (Sun)
                               by <b>sitaram</b> (guest, #5959)
                              [<a href="/Articles/329014/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Thank you...<br>
<p>
I'm one of those people for whom the security aspect is far more important (*) than data loss -- data loss can happen for so many other reasons that one should have a good, reliable, backup regime anyway, so one more reason doesn't bother me.<br>
<p>
So ext3: people with my mindset should stick with data=ordered.  (I don't see guarded as being too useful for ext3 -- we'll probably have switched to ext4 by the time guarded becomes mainstream).<br>
<p>
Ext4: I think I'll stick with ordered here too.  If the overhead has been much reduced by delayed alloc, it correspondingly reduces the main advantage of writeback too :-)  I'd rather err on the side of security when the difference is minor.<br>
<p>
Although collectively we like choice, and we *need* choice, when it comes to actual usage, we have to rationally reduce the many choices available into one and say "*this* is what we will use"!<br>
<p>
Thanks once again for jumping in and helping with that!<br>
<p>
Sitaram<br>
<p>
(*) My home desktop is used by my kids also, for instance -- so it *is* a multi-user machine in the old traditional sense.  The work machine runs email and office apps as one user, and my web browser and IRC as another user (simultaneously), so -- while both users are still me -- it too is multi user in the sense of wanting to keep two disparate sets of files separate.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/329014/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor329070"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 19, 2009 22:35 UTC (Sun)
                               by <b>bojan</b> (subscriber, #14302)
                              [<a href="/Articles/329070/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Thank you kindly for you detailed reply.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/329070/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor329072"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 19, 2009 22:50 UTC (Sun)
                               by <b>bojan</b> (subscriber, #14302)
                              [<a href="/Articles/329072/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Chris Mason is also working on a data=guarded mode, which will cause files to be truncated (much like delayed allocation) on a crash with ext3. I will look into porting this mode into ext4, if it proves to be enough of a performance advantage for ext4 over data=ordered, and yet providing a tiny bit more safety than data=writeback. It's not clear to me that it will be worth it for ext4, however.</font><br>
<p>
Unless there is a significant performance penalty by updating metadata only after the data has been written, instead of having another mode, this is probably how writeback mode should work.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/329072/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor329077"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 20, 2009 0:29 UTC (Mon)
                               by <b>tytso</b> (subscriber, #9993)
                              [<a href="/Articles/329077/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <p><i>Unless there is a significant performance penalty by updating metadata only after the data has been written, instead of having another mode, this is probably how writeback mode should work.</i></p>

<p>(Note that data=guarded is only deferring the update of i_size, and not any other form of metadata.)</p>

<p>We'll have to benchmark it and see.   It does mean that i_size gets updated more, and so that means that the inode has to get updated as blocks are staged out to disk, so that means some extra writes to the journal and inode table.  I don't <i>think</i> it should be noticeable, at least for most workloads, since it should be lost in the noise of the data block I/O, but it is extra seeks and extra writes.</p>

      
          <div class="CommentReplyButton">
            <form action="/Articles/329077/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor329087"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 20, 2009 3:43 UTC (Mon)
                               by <b>bojan</b> (subscriber, #14302)
                              [<a href="/Articles/329087/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Thanks for the explanation.<br>
<p>
I guess if i_size could be updated just once, when all the blocks are pushed out, then this would be even less of a problem. But, then again, I have no idea how this actually works inside the code, so this suggestion is probably naive.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/329087/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor345282"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 5, 2009 1:08 UTC (Wed)
                               by <b>mdkul</b> (guest, #35333)
                              [<a href="/Articles/345282/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
How do i find out what mode my ext3 partition is running in? (data=ordered or data=writeback?)<br>
<p>
my tune2fs /dev/sda1 -l says <br>
<p>
Default mount options : (none) So what does it default to if it is none?<br>
<p>
i *don't* have CONFIG_EXT3_DEFAULTS_TO_ORDERED = y set and my documentation for 2.6.31-rc4 says (Documentation/filesystems/ext3.txt says data=ordered is default. <br>
<p>
Thanks in advance.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/345282/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor345355"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 5, 2009 14:16 UTC (Wed)
                               by <b>ABCD</b> (subscriber, #53650)
                              [<a href="/Articles/345355/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
You might be able to find out by reading /proc/self/mountinfo, which contains, among other things, the effective mount options for every mount the current process can see.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/345355/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor345396"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Solving the ext3 latency problem</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 5, 2009 16:52 UTC (Wed)
                               by <b>mdkul</b> (guest, #35333)
                              [<a href="/Articles/345396/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Thanks that helped.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/345396/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor330125"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Changing ext3's default data= mode</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 25, 2009 10:31 UTC (Sat)
                               by <b>bluss</b> (subscriber, #47454)
                              [<a href="/Articles/330125/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Was Ted's suggestion to change the default data= mode of ext3 a "political" move? It suits him very well, given all the mud he has been throwing on data=ordered<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/330125/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor330217"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Changing ext3's default data= mode</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 26, 2009 7:11 UTC (Sun)
                               by <b>dpotapov</b> (guest, #46495)
                              [<a href="/Articles/330217/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It is changed because data=ordered stutters *horribly*.<br>
<p>
<a rel="nofollow" href="http://article.gmane.org/gmane.linux.kernel/818261">http://article.gmane.org/gmane.linux.kernel/818261</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/330217/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2009, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
