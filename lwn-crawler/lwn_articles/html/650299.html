        <!DOCTYPE html>
        <html lang="en">
        <head><title>4.2 Merge window part 3 [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/650299/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/650057/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/650299/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>4.2 Merge window part 3</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>We're bad at marketing</b>
<p>
We can admit it, marketing is not our strong suit. Our strength is
writing the kind of articles that developers, administrators, and
free-software supporters depend on to know what is going on in the
Linux world. Please <a href="/Promo/nsn-bad/subscribe">subscribe today</a> to help us keep doing that, and so
we don’t have to get good at marketing.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>July 7, 2015</br>
           </div>
By the time Linus released <a href="/Articles/650223/">4.2-rc1</a> and
closed the merge window on July&nbsp;5, 12,092 non-merge changesets had
been pulled into the mainline kernel repository.  That makes 4.2, by your
editor's reckoning (but not Linus's — see below), the busiest merge window
in the kernel project's 
history, beating the previous record holder, 3.15, by 58 commits.  Even
so, Linus doesn't believe that 4.2 will end up being the 
busiest development cycle for a simple reason: we have gotten better at
fixing our code before it goes into the mainline, so fewer fixes are
required thereafter.  If one assumes that 3.15 had a higher fix rate than
4.2 will, then 4.2 should fall short of 3.15's total.
<p>
Such ideas are relatively easy to explore using the numbers, so here is the
history from the last few years or so, showing non-merge changesets for
each kernel release:
<p>
<blockquote>

<table class="OddEven">
<tr><th>Release</th><th>Merge<br>window</th><th>Total</th><th>%fixes</th></tr>
<tr><td align="right">v3.0</td>
    <td align="right">7333</td>
    <td align="right">9153</td>
    <td align="right">19.9</td></tr>
<tr><td align="right">v3.1</td>
    <td align="right">7202</td>
    <td align="right">8693</td>
    <td align="right">17.2</td></tr>
<tr><td align="right">v3.2</td>
    <td align="right">10214</td>
    <td align="right">11881</td>
    <td align="right">14.0</td></tr>
<tr><td align="right">v3.3</td>
    <td align="right">8899</td>
    <td align="right">10550</td>
    <td align="right">15.6</td></tr>
<tr><td align="right">v3.4</td>
    <td align="right">9248</td>
    <td align="right">10899</td>
    <td align="right">15.1</td></tr>
<tr><td align="right">v3.5</td>
    <td align="right">9534</td>
    <td align="right">10957</td>
    <td align="right">13.0</td></tr>
<tr><td align="right">v3.6</td>
    <td align="right">8587</td>
    <td align="right">10247</td>
    <td align="right">16.2</td></tr>
<tr><td align="right">v3.7</td>
    <td align="right">10409</td>
    <td align="right">11990</td>
    <td align="right">13.2</td></tr>
<tr><td align="right">v3.8</td>
    <td align="right">10901</td>
    <td align="right">12394</td>
    <td align="right">12.0</td></tr>
<tr><td align="right">v3.9</td>
    <td align="right">10265</td>
    <td align="right">11910</td>
    <td align="right">13.8</td></tr>
<tr><td align="right">v3.10</td>
    <td align="right">11963</td>
    <td align="right">13637</td>
    <td align="right">12.3</td></tr>
<tr><td align="right">v3.11</td>
    <td align="right">9494</td>
    <td align="right">10893</td>
    <td align="right">12.8</td></tr>
<tr><td align="right">v3.12</td>
    <td align="right">9479</td>
    <td align="right">10927</td>
    <td align="right">13.3</td></tr>
<tr><td align="right">v3.13</td>
    <td align="right">10518</td>
    <td align="right">12127</td>
    <td align="right">13.3</td></tr>
<tr><td align="right">v3.14</td>
    <td align="right">10622</td>
    <td align="right">12311</td>
    <td align="right">13.7</td></tr>
<tr><td align="right">v3.15</td>
    <td align="right">12034</td>
    <td align="right">13722</td>
    <td align="right">12.3</td></tr>
<tr><td align="right">v3.16</td>
    <td align="right">11364</td>
    <td align="right">12804</td>
    <td align="right">11.2</td></tr>
<tr><td align="right">v3.17</td>
    <td align="right">10872</td>
    <td align="right">12354</td>
    <td align="right">12.0</td></tr>
<tr><td align="right">v3.18</td>
    <td align="right">9711</td>
    <td align="right">11379</td>
    <td align="right">14.7</td></tr>
<tr><td align="right">v3.19</td>
    <td align="right">11408</td>
    <td align="right">12617</td>
    <td align="right">9.6</td></tr>
<tr><td align="right">v4.0</td>
    <td align="right">8950</td>
    <td align="right">10346</td>
    <td align="right">13.5</td></tr>
<tr><td align="right">v4.1</td>
    <td align="right">10659</td>
    <td align="right">11916</td>
    <td align="right">10.5</td></tr>
<tr><td align="right">v4.2</td><td align="right">12092</td>
    <td align="right">?</td><td align="right">?</td></tr>
</table>
</blockquote>
<p>
Since the beginning of the 3.x series, the average kernel release has seen
13.6% of its changes pulled after the close of the merge window.  In the
time between the releases of 3.15 and 4.1, 71,416 changesets were merged,
of which 8,452 — 11.8% — came outside of the merge window.  So one might
conclude that the amount of code arriving outside the merge window has
fallen a bit in the last year.  If the 11.8% rate holds this time around,
4.2 will finish with 13,709 changesets, 13 short of the total for 3.15.
<p>
So, it's <i>possible</i> that 3.15 will remain the busiest development
cycle ever, but your editor must conclude that the jury is still out on
this one. 
<p>
In any case, the long-term trend is clear:
<p>
<blockquote>
<img src="https://static.lwn.net/images/2015/postmw-changes.png" width=497 height=246
alt="[Post-merge-window changes plot]">
</blockquote>
<p>
Over time, the kernel development community has indeed gotten better at
merging code that does not require fixing later in the development cycle.
<p>
<h4>Final changes for 4.2</h4>
<p>
There were just over 1,200 non-merge changesets pulled into the mainline
kernel repository since <a href="/Articles/649652/">last week's
summary</a>.  Among those were:
<p>
<ul>

<li> Large x86-based systems can now defer the
     initialization of much of main memory, speeding the boot process.
<p>
<li> Some changes affecting how mounts of sysfs and <tt>/proc</tt> are
     managed have been merged.  Subdirectories that are meant to serve as
     mount points (e.g. <tt>/sys/debug</tt>) are now marked as such, and
     mounts are limited to those directories.  Beyond that, new rules have
     been added to ensure that new mounts of these filesystems (within a
     container, say) respect the mount flags used with existing mounts.
     The <a href="/Articles/647757/">controversial</a> enforcement of the
     <tt>noexec</tt> and <tt>nosuid</tt> flags has been removed for now,
     though. 
<p>
<li> Synopsys DesignWare ARC HS38 processors are now supported.  Other new
     hardware support includes Dell airplane-mode switches,
     TI TLC59108 and TLC59116 LED controllers,
     Maxim max77693 LED flash controllers,
     Skyworks AAT1290 LED controllers,
     Broadcom BCM6328 and BCM6358 LED controllers,
     Kinetic Technologies KTD2692 LED flash controllers,
     TI CDCE925 programmable clock synthesizers,
     Hisilicon Hi6220 clocks,
     STMicroelectronics LPC watchdogs,
     Conexant Digicolor SoC watchdogs,
     Dialog DA9062 watchdogs, and
     Weida HiTech I2C touchscreen controllers,
<p>
<li> The <a href="/Articles/184495/">red-black tree</a> implementation now
     supports "latched trees"; these maintain two copies of the tree
     structure in parallel and only modify one at a time.  The end result
     is that non-atomic modifications can happen concurrently with lookups
     without creating confusion.  See <a
     href="http://git.kernel.org/linus/ade3f510f93a5613b672febe88eff8ea7f1c63b7">this
     commit</a> for the implementation, and <a
     href="http://git.kernel.org/linus/6695b92a60bc7160c92d6dc5b17cc79673017c2f">this
     one</a> for some discussion of the latched technique.  The first use
     of this technique is to accelerate module address lookups.
</ul>
<p>

If recent patterns hold (and Linus doesn't take any more ill-timed
vacations), the final 4.2 release can be expected on August&nbsp;23.
<p>
<h4>A postscript</h4>
<p>
Some readers may be wondering why this article claims that 4.2 had the
busiest merge window ever, given that Linus said otherwise in the 4.2-rc1
release announcement:
<p>
<div class="BigQuote">
	And it turns out v3.15-rc1 had more commits than 4.2-rc1 does (by a
	hair), so even there this isn't the biggest rc1 ever, if you count
	the number of commits.
</div>
<p>
The difference is that Linus is counting merge commits, while your editor
does not.  As mentioned above, there were 12,092 non-merge changesets
pulled before 4.2-rc1, but that number grows to 12,809 changesets when
merges are counted; that 
falls just short of the total (12,826) for 3.15-rc1.  Your editor's
reasoning for leaving out merges is that they mostly just represent the
movement of patches from one branch to another and, thus, differ from
"real" development approaches.  No doubt others will have different
opinions, though.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Releases-4.2">Releases/4.2</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/650299/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor650605"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Not all post Merge Window Patches are fixes.</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 9, 2015 13:39 UTC (Thu)
                               by <b>ds2horner</b> (subscriber, #13438)
                              [<a href="/Articles/650605/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
And new features that Linus wants added are sometimes included.<br>
<p>
Linus is thus in a strong position to limit "elective" changes and obtain the self fulfilling prophecy.<br>
<p>
It appears diligent review, analysis, testing and fix posting are the sole hope to save our Master Editor's prediction.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/650605/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor650689"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">4.2 Merge window part 3</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 10, 2015 5:51 UTC (Fri)
                               by <b>ebiederm</b> (subscriber, #35028)
                              [<a href="/Articles/650689/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Mounts are still allowed in arbitrary locations on sysfs and proc.<br>
<p>
Marking the directories intended as mountpoints are essentially just code cleanups.<br>
<p>
The marking enables the code that allows unprivileged users to mount proc and sysfs to know with certainty that it may safely ignore anything mounted on those directories.  Any mounted elsewhere on proc or sysfs prevents a new instances of proc and sysfs from being created.<br>
<p>
New instances of proc are needed for new pid namespaces.  New instances of sysfs are needed for new network namespaces.<br>
<p>
<p>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/650689/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2015, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
