        <!DOCTYPE html>
        <html lang="en">
        <head><title>Rolling stable kernels [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/871989/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/871391/">Return to the Front page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/871989/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>Rolling stable kernels</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Ready to give LWN a try?</b>
<p>
With a subscription to LWN, you can stay current with what is happening in the Linux and free-software community and take advantage of subscriber-only site features.  We are pleased to offer you <b><a href="https://lwn.net/Promo/nst-trial/claim">a free trial subscription</a></b>, no credit card required, so that you can see for yourself.  Please, join us!
</blockquote>
<div class="FeatureByline">
           By <b>Jake Edge</b><br>October 6, 2021</br>
           <hr>
<a href="/Archives/ConferenceByYear/#2021-Open_Source_Summit_North_America">OSSNA</a>
</div>
<p>
Sasha Levin, one of the maintainers of the stable kernels, gave a
presentation at
<a
href="https://events.linuxfoundation.org/open-source-summit-north-america/">Open
Source Summit North America</a> 2021 on a proposal for a different way to
handle the stable tree.   He noted that throughout most of the kernel's history,
version numbers did not really mean anything, but that the versioning
scheme suggests that they do, which leads to a disconnect between how the
kernels are seen versus how they are actually maintained.  He proposed
making a "rolling stable" release that 
provides users what they need—timely fixes to their kernel—without forcing
them to choose to switch to a new version number.
</p>

<h4>Context</h4>

<p>
He began with the history of kernel versioning schemes and how they have
evolved over the years.  Starting with version&nbsp;0.01, Linus Torvalds used
a common version-number mechanism that is adopted by smaller projects: if
there were just a few small features, bump 
the number a little bit, if there were bigger features or more of them, bump it by
more. When Torvalds decided he had enough of a critical mass that it was
ready for wider use, he released Linux&nbsp;1.0.
</p>

<a href="/Articles/872063/">
<img src="https://static.lwn.net/images/2021/ossna-levin-sm.jpg" border=0 hspace=5 align="left"
alt="[Sasha Levin]" title="Sasha Levin" width=200 height=300>
</a>

<p>
Once 1.0 was out, Linux got more users and those users were not necessarily
kernel developers; they wanted to develop applications and run their own
workloads.  They did not want to run on a development version of the
kernel, which is where the idea of a stable kernel came from.  The kernel
proceeded with a model where one branch was for the stable kernel and other
was for doing development.
</p>

<p>
Fixes were backported from the
development branch to the stable branch; once the development branch was
ready for release, it would become the next stable branch.  The kernel
continued with the concept that versions were bumped for new features but
the lack of central management meant that it was not clear when a release
was ready to be made.
In the period between the&nbsp;2.0 and&nbsp;2.6 kernels, the process kind of ground
to a halt, Levin said.
</p>

<p>
The process of going from&nbsp;2.4 to&nbsp;2.6 was "an adventure that took
three years".  That led the community to recognize that the process was not
working and that eventually "it would take an infinite amount of time to go to the
next version", he said.  So, during the&nbsp;2.6 era, the kernel developers came up with a new
approach; instead of feature-based releases, they would switch to a
time-based release process.
</p>

<p>
Eventually, the idea that evolved was that new kernels would be released
every ten weeks.  The kernel developers also 
started saying that version numbers did not matter—and they really didn't.
But that is an example of "engineers doing marketing", Levin said, because the
version-numbering scheme did not change, nor did the lack of meaning for
version numbers  get clearly communicated to
customers. 
</p>

<p>
That led to the now-familiar two-week merge window, followed by seven
or eight release candidates, then a release.  Every kernel was considered
stable, so there was no separate development kernel.  Some customers wanted
more stability, which is where the idea of long-term stable (LTS) releases
came from, he said.  This model worked so well that the kernel stayed
on&nbsp;2.6.x for roughly eight years.
</p>

<h4>Expectations</h4>

<p>
But mistakes were made in switching to the new time-based development process.  While
kernel developers ignored version numbers, customers did not, and the
community did not sell the idea of time-based versions well.  Since the numbers were still present,
customers assumed they meant something, so a move from, say,&nbsp;3.20
to&nbsp;4.0 was "big and scary" because the major version had changed.
</p>

<p>
Staying on 2.6.x for so long also had some ramifications.  It was done in
part to help customers get used to the new system, but to some extent, they
got too comfortable.  When the kernel developers wanted to move to 3.0,
they found that various assumptions about the kernel version were baked
into some products, so workarounds had to be added at that time.
</p>

<p>
Customers were getting used to minor-version updates (e.g. from&nbsp;2.6.y
to&nbsp;2.6.y+1), but they started to make assumptions about their meanings
too, Levin said.  Once the minor number got large, they treated it as a
"more minor" change. In their eyes, 2.6.1 to 2.6.2 was an important change
that needed an immediate upgrade,
but 2.6.30 to 2.6.31 was a lesser change that could be deferred until
2.6.35 or something.  Of course, to the kernel community, there was no difference.
</p>

<p>
To address that, the plan was made to move to&nbsp;3.0 and to increase the
second number (minor version) with each release, effectively dropping the
use of the third element of the version number for mainline releases.
Levin called this the "finger and toes" version-number scheme, because
Torvalds said that he could count up to around 20 "minor" releases before
running out of digits and needing to increase the major version number.  So
after&nbsp;3.19,&nbsp;4.0 was released.
</p>

<p>
To kernel developers, version numbers continued to have no meaning other
than as a measure of where things were on the timeline, he said; users were
encouraged to run the latest version.  But if you tell customers they need
to move from&nbsp;3.20 to&nbsp;4.0, they will consider it a multi-year
effort that requires planning and paperwork; "so they will only do it when
they have time, which is never".  Going from&nbsp;3.20 to&nbsp;4.0 seems
like a big jump, and&nbsp;4.0 to&nbsp;4.2 seems much smaller, even though
the latter brings roughly double the number of changes.
</p>

<p>
The kernel community has gotten better over time at testing, avoiding
performance regressions, not breaking user space, and other things that
should make it easier for users to migrate easily.  But there is still
resistance to doing so, in part because the kernel developers have not sold
users on the plan.
</p>

<p>
Some distributions and other users have listened, however, and are keeping
up with the latest kernels or the LTS versions.  They have recognized that
the releases are simply time-based, so upgrades are not actually all that
scary.  Beyond that, users want the latest shiny features ("BPF, the
new I/O scheduler, they want all the performance they can get") and they
want all of that immediately.  They do
not want backports of more recent features onto older kernels.  They also
want frequent security updates.  All of that aligns well with what the
kernel developers want—and deliver.
</p>

<p>
Enterprise kernels are less popular these days in part because "maintaining
an ancient kernel has become exponentially difficult".  The kernel moves so
fast that there are more and more backports that need to be done, each of
which complicates the maintenance of the enterprise kernel.  In practice, most of the
enterprise kernels have become "frankenkernels"; they contain  backports
of the majority of the current kernel and the version number they claim is
not at all accurate.
</p>

<h4>Rolling</h4>

<p>
In the "LTS world", users would pick a kernel LTS series, say&nbsp;5.10.x,
and keep upgrading their kernels to the latest in that series until that
became impossible.  When that happened, they would pick a new LTS series,
switch to that, and continue from there.  Kernel developers have been
trying to sell the idea that they should switch sooner; when the next
release comes out (in this case, 5.11.x), they should start using that series. 
</p>

<p>
But making that switch takes a conscious effort by the user; they also have
to pick a time but "there's never a good time to say 'we're changing our
kernel', especially this often", he said.  Beyond that, there are some
technical hurdles to switching to a new kernel Git branch mid-stream, there
may be patches that need to be forward-ported, and so on.
</p>

<p>
So, Levin asked, "what can be done to improve this process?"  The kernel
community 
provides the same guarantees no matter whether the change is between major
versions, minor versions, or stable versions; "it promises that it will not
break user space".  It might break user space by accident, but it will fix
the kernel if it does.  Those breakages can occur on any kind of upgrade,
though; no upgrade type is more or less prone to accidental
breakage. "Version numbers still, really truly don't matter".
</p>

<p>
The idea would be to "eliminate the friction point" where customers need to
choose to move to the next series.  Currently, the stable and LTS trees have a branch
for each mainline release; effectively, the stable trees get forked every
time Torvalds does a release.  The mainline Git tree just continues on;
once the next merge window opens, patches bound for the next release get
committed to the main branch.  There is no equivalent mechanism for the
stable tree.
</p>

<p>
The stable maintainers want to create a different structure that eliminates
the need for users to switch branches each time they move to a new series.
It would provide the same guarantees as the current trees and run on the
same schedule.  But it would roll forward by default, as does Torvalds's tree.
</p>

<p>
The idea is to use "Git magic" to make it all work; there is no cherry
picking of patches.  Instead a "hack on Git merges" is used, which
preserves the SHA1 values as they are in the existing stable branches. The
Git tags survive and the SHA1 preservation means that the folks doing
verification to prevent supply-chain attacks can do so more easily.
Bisection still works, authors don't change so Git blame works, and so on.
The stable maintainers just "manipulate Git a little bit to give the appearance
that all this development happened in a single branch", he said. It is
simply a change in "how we present kernel trees to the end user".
</p>

<p>
Currently, users will be on <i>a</i> stable branch or <i>an</i> LTS branch,
but under this model, they would instead be on <i>the</i> stable or LTS
branch.  They are not using some random kernel version, but are instead
using the version that the kernel developers have recommended for the best
experience. From that, they will get all of the latest features, bug fixes, and
security updates.
</p>

<h4>Concerns</h4>

<p>
There are, of course, some concerns about this approach that he has heard
in feedback from companies and users.  The first is that there is an
increased need for testing under the rolling model that is being pushed
onto the users.  But he disagrees.  Currently users think they do not need
to retest much if they go from x.y.50 to x.y.51, but that is not true.  The
same is true with rolling. Testing must be done whenever the kernel changes.
</p>

<p>
Another area of worry is that the rolling model effectively "masks the
merge window inside of it".  One day the rolling stable tree might be on&nbsp;5.7.15 and
the next on&nbsp;5.8.1; within that pull are a lot of patches that are
from the&nbsp;5.8 merge window, which is a big step.  But it all goes back to
testing, he said; it is possible that the merge window introduced a lot of
bugs, but it is also possible that a single stable patch does the same thing.
</p>

<p>
The schedules are staying the same, he said.  The rolling stable and LTS branches
are just derivatives of the current branches of the stable tree.  And the
new model does not require users to do anything on a different schedule; it
simply gives them the latest kernel when they decide to upgrade and do a Git pull.
</p>

<p>
The rolling model is not a radical departure, nor is it a new idea. "If you
are using Debian, that's kind of how it works"; the Debian testing kernels
are more or less the equivalent of the rolling stable branch, he said.
He is confident that the rolling model will work because there distributions and devices
that already use the model in some form; "they like how it works".
Overall, it is an attempt to address some of the mistakes made in the past
around versioning and what the stable developers told users about what they
should use, Levin said.
</p>

<p>
The <a
href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/log/?h=linux-rolling-stable">rolling
stable</a> and <a
href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/log/?h=linux-rolling-lts">rolling
LTS</a> branches already exist; rolling stable is at 5.14.9, as of this
writing, while rolling LTS is at 5.10.70.  As mentioned, they are just derivatives of
the existing stable and LTS branches; there is nothing in them that is not
in those other two.  "If you want to follow the development philosophy of
the Linux kernel, these branches are going to make it super easy for you". 
</p>

<p>
In answer to a question, Levin said that there is some time between a
mainline release and the corresponding changes ending up on the rolling
stable tree.  Once&nbsp;5.15 is released, they will wait until after
the&nbsp;5.16 merge window closes before incorporating the changes
from&nbsp;5.15.
</p>

<p>
He was asked about the future of the LTS releases, as well.  He
noted that the LTS idea is something of a contradiction; on one hand, the
stable maintainers recommend always using the latest LTS, but on the other,
LTS releases are supported for five years.  His personal hope is that LTS
releases go away over time, but he does not realistically see that
happening anytime soon because there is not enough testing and
qualification being done.  He expects, though, that in 20 years there
will be no LTS kernels.
</p>

<p>
[I would like to thank LWN subscribers for supporting my travel to Seattle
for Open Source Summit North America.]
</p><br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Development_model-Stable_tree">Development model/Stable tree</a></td></tr>
            <tr><td><a href="/Archives/ConferenceIndex/">Conference</a></td><td><a href="/Archives/ConferenceIndex/#Open_Source_Summit_North_America-2021">Open Source Summit North America/2021</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/871989/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor872076"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 6, 2021 22:30 UTC (Wed)
                               by <b>bluca</b> (subscriber, #118303)
                              [<a href="/Articles/872076/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; &quot;it promises that it will not break user space&quot;. It might break user space by accident, but it will fix the kernel if it does.</font><br>
<p>
The core issue is that while this is a nice story that kernel developers like to tell, in reality it&#x27;s just that, a story. It applies just to syscall ABI, and little else. The reality is that the kernel breaks userspace all the time in new major releases when features are brought in, and when it&#x27;s reported, or even when patches are provided, the kernel maintainers answer is to shrug and say &quot;not my problem, deal with it&quot;.<br>
<p>
For example, when the bind/unbind uevents were added, it could have been done in a way that didn&#x27;t break the vast majority of udev rules in some way or another - but that&#x27;s not how it went, userspace had to change to fix or work around the breakage.<br>
As another example, at some point OverlayFS completely broke down and is unusable when combined with SELinux - intentionally. The combination is still broken to this day, and the largest user of these (Google on Android) still has to carry out of tree patches to work around them.<br>
I could go on.<br>
<p>
So it&#x27;s all well to say that for kernel developers there&#x27;s no difference in going from, e.g., 5.14.1 to 5.14.2 and going from 5.14 to 5.15, but for users the difference is gigantic: each merge window brings the very real chance of breaking something that was working just fine till that moment, with no hope whatsoever to have it fixed without spending yet more time and more effort to work around it in userspace.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872076/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor872085"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 7, 2021 0:12 UTC (Thu)
                               by <b>atnot</b> (subscriber, #124910)
                              [<a href="/Articles/872085/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Yeah, I have to agree here. There are absolutely projects that mange to pull off rolling releases like this well, but something they all have in common is rigorous automated testing to a degree that the kernel just does not have.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872085/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor872086"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 7, 2021 0:40 UTC (Thu)
                               by <b>pizza</b> (subscriber, #46)
                              [<a href="/Articles/872086/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; but something they all have in common is rigorous automated testing to a degree that the kernel just does not have.</font><br>
<p>
Other things they all have in common are a vastly smaller scope. orders of magnitude fewer configuration options, and a lack of an endless tail of special snowflake hardware platforms that are mission-critical to _someone_.<br>
<p>
(Of course things can get better.  But that requires those who _care_ to put their money/efforts/contributions/etc where their mouths are!)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872086/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor872113"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 7, 2021 11:23 UTC (Thu)
                               by <b>atnot</b> (subscriber, #124910)
                              [<a href="/Articles/872113/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Perhaps I should have said &quot;to a degree which is very difficult for the kernel&quot;. But ultimately it comes out to the same thing.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872113/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor872121"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 7, 2021 12:47 UTC (Thu)
                               by <b>vgoyal</b> (subscriber, #49279)
                              [<a href="/Articles/872121/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Curious about following.<br>
<p>
&quot;As another example, at some point OverlayFS completely broke down and is unusable when combined with SELinux - intentionally. The combination is still broken to this day, and the largest user of these (Google on Android) still has to carry out of tree patches to work around them.&quot;<br>
<p>
Can you provide some more details. Is it broken in upstream kernel? What was broken and how? I had added SELinux support to overlayfs and I did not hear complaints about it being broken.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872121/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor872163"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 7, 2021 14:58 UTC (Thu)
                               by <b>bluca</b> (subscriber, #118303)
                              [<a href="/Articles/872163/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<a href="https://lore.kernel.org/lkml/20201021151903.652827-1-salyzyn@android.com/">https://lore.kernel.org/lkml/20201021151903.652827-1-saly...</a><br>
<p>
<a href="https://source.android.com/devices/bootloader/partitions/system-as-root#implementing-vendor-overlay">https://source.android.com/devices/bootloader/partitions/...</a><br>
<p>
The process setting up the overlay must now have the same permissions as _every_ single process that _uses_ the overlay. Which is a gigantic overreach and everyone doing selinux policy goes &quot;nope, no way&quot; as it means adding way way more access rights than needed to that process, so it&#x27;s de-facto unusable.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872163/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor872198"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 7, 2021 19:37 UTC (Thu)
                               by <b>vgoyal</b> (subscriber, #49279)
                              [<a href="/Articles/872198/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Ok, so I think this is not just SELinux related as such. Issue is with how both DAC and MAC checks happen. Current model is that overlay inode checks happen with caller&#x27;s creds but checks on underlying layer happen with mounter&#x27;s creds. And I think android folks were asking that all checks (and overlay operations) happen with the creds of caller. That&#x27;s a different security model altogether.<br>
<p>
overlayfs does bunch of operations internally which require privileges and initially it would prepare creds with appropriate capabilities, use these creds to do the operation and then switch back to tasks&#x27;s creds. Later we changed to use mounter&#x27;s creds instead.<br>
<p>
Point is, overlayfs relies on some priviliged operations which require capabilities which typically unprivileged tasks don&#x27;t have. So overlayfs does these operations on tasks&#x27;s behalf as long as mounter had the capability. And we don&#x27;t want to do it unconditionally otherwise what task might not be able to do normally will be able to do by just creating overlayfs mount.<br>
<p>
So that&#x27;s how this existing notion of using mounter&#x27;s creds has evolved. And yes, this will need mounter&#x27;s task to have appropriate DAC and MAC (SELinux included) privileges to access.<br>
<p>
I don&#x27;t recall all the details of override_creds proposal, but I think crux was that operation on underlying fs<br>
also happen with the creds of the caller (and not mounter). That means all the callers will have to be more privileged to be able to do privileged operations otherwise most of the operations will fail. So I was wondering how this is more useful. Practically all the users will have to be effectively &quot;root&quot; to be able to that kind of security model. That was my understanding. And I think that&#x27;s one reason those patches did not get lot of traction.<br>
<p>
I think if it really matters, propose patches one more time and we can have discussion one more time. In later version of patches I think I got busy in other things and could not follow the patches. I think Amir was looking at it though.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872198/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor872286"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 8, 2021 14:41 UTC (Fri)
                               by <b>bluca</b> (subscriber, #118303)
                              [<a href="/Articles/872286/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It&#x27;s a bit off topic, as the point of the comment was to highlight how the &quot;we don&#x27;t break userspace&quot; is not what happens in reality. But on the issue, whatever the justification might be, it used to work and now it&#x27;s broken, and everyone I know who writes policy unanimously considers the new behaviour unacceptable, so either the feature gets yanked from the build or the broken behaviour gets patched out-of-tree. Anyway, I believe patches should be forthcoming in the near future, so we&#x27;ll see if v19 will have better luck.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872286/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor872289"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 8, 2021 15:30 UTC (Fri)
                               by <b>vgoyal</b> (subscriber, #49279)
                              [<a href="/Articles/872289/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I think it worked by accident. overlayfs never supported selinux. And while swtiching creds it gave additional capabilities to current task (but did not change LSM security context of the task). So effectively DAC creds were changing but MAC creds were not changing. And that&#x27;s why it probably worked becase now MAC cred checking was happening in caller&#x27;s context (And not mounter&#x27;s context).<br>
<p>
Anyway, do propose patches again upstream and lets have a discussion on this and see if this new model conflicts with something else which is already in the code.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872289/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor872081"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What about build dependencies?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 6, 2021 23:04 UTC (Wed)
                               by <b>roguelazer</b> (subscriber, #101286)
                              [<a href="/Articles/872081/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It&#x27;s great that the kernel promises never to break userspace, but that doesn&#x27;t mean that kernels are actually *compatible* with all userspaces. In particular, building and deploying a kernel requires a bunch of tools that routinely change. For example, the minimum binutils version required to build the kernel (including modules) jumped from 2.21 to 2.23 in 5.8, which broke a number of &quot;LTS kernel on old distro&quot; projects, which now face the choice of staying with the 5.4 LTS series or having a much more complicated set of build dependencies. In a world where version numbers are meaningless and there&#x27;s just a rolling stable, I have absolutely no idea how people would be expected to handle this kind of change.<br>
<p>
It seems like the options are <br>
<p>
 (a) freeze dependencies for a sufficiently long time that nobody cares (the kernel actually kept compatibility with gcc 3.2 until 4.19, which is an impressive 16 years of compatibility; things have moved a lot faster since then, though)<br>
 (b) stop supporting recent kernels on older userspaces and just force everyone to upgrade their OS every year or two if they want to continue getting new hardware support and other kernel features<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872081/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor872083"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 6, 2021 23:51 UTC (Wed)
                               by <b>roc</b> (subscriber, #30627)
                              [<a href="/Articles/872083/">Link</a>] (11 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; no upgrade type is more or less prone to accidental breakage</font><br>
<p>
Is this actually true? Is it true that upgrading from 5.X.Y to 5.X.(Y+1) is no more or less likely to cause breakage than upgrading from 5.X.Y to 5.(X+1).0? That does not seem to match my experience, or the rationale for having stable branches in the first place.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872083/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor872104"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 7, 2021 7:41 UTC (Thu)
                               by <b>vegard</b> (subscriber, #52330)
                              [<a href="/Articles/872104/">Link</a>] (9 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I would tend to agree with you; it&#x27;s not true, and it&#x27;s easy to check with git. As an example, going from 5.10.70 to 5.10.71 has 1,766 lines changed while going from 5.10.71 to 5.11 has 1,181,674 lines changed. This is an order-of-magnitudes difference.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872104/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor872155"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 7, 2021 13:43 UTC (Thu)
                               by <b>smoogen</b> (subscriber, #97)
                              [<a href="/Articles/872155/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The issue is that Sasha is describing the world as he thinks kernel developers see the kernel and you are describing the world as users see the kernel. Kernel developers are saying that they expect you to have done all the testing you did between 5.9 and 5.10 when you switch from 5.10.70 to 5.10.71. Those 1000 code lines may have significantly changed all kinds of functionality or it could have been some patching or it could have been that instead of doing the million line refactor all they needed to do for this functionality change was 1000 lines of crufty code that don&#x27;t need to be maintained in 5.11 and beyond. It could also be a horrible bodge that will need to be fixed in 5.10.72. [It looks right, and the test compiled and it seemed to work but really you need to run a massive back test over a week if you want a &#x27;guarentee&#x27;.]<br>
<p>
Users on the other hand tend to go by experience of activity. The system didn&#x27;t seem to be any different and my applications work so it must be ok.  The difference between 5.10.70 and 5.10.71 is small so it shouldn&#x27;t be a problem. [If it crashes we go back to 5.10.70 and wait for 5.10.72 to see if it got fixed then usually discounting it as a small problem.]<br>
<p>
For the most part these two worlds work fine.. we don&#x27;t realize the gulf of viewpoints until someone starts talking about them. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872155/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor872222"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 7, 2021 23:22 UTC (Thu)
                               by <b>jwarnica</b> (subscriber, #27492)
                              [<a href="/Articles/872222/">Link</a>] (7 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
If we are measuring lines of code, a 1000loc change is statistically unlikely to change anything a given user does, at all. It&#x27;s statistically likely they never even run that code.<br>
<p>
In the real world, a x.y.1 change will be YOLO&#x27;d by basically everyone who isn&#x27;t crazy paranoid.<br>
<p>
Speaking of the crazy paranoid, I have enterprise customers who put off upgrading RHEL for months &quot;to be safe&quot;. (Presumably someone was burned in 1993 by a point release in NetWare, and the mindset became encoded in &quot;the way we do things&quot;). Note that they don&#x27;t actually test things, they just wait.<br>
<p>
In any case, and notwithstanding that RH would insulate customers from whatever the kernel calls itself, this proposal helps neither side of what real people do.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872222/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor872282"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 8, 2021 14:28 UTC (Fri)
                               by <b>smoogen</b> (subscriber, #97)
                              [<a href="/Articles/872282/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Now that would be an interesting master&#x27;s thesis. Does 1000 POC changes in stable kernels actually run more or less than bare statistics would show. In a general sense I would believe that any 1000 change might be less likely to be ever run, but since these are &#x27;stable&#x27; kernels the fixes going into them may be more likely to hit &#x27;hot-spots&#x27; in code than other changes. [AKA someone ran into a problem with X.Y.Z and this X.Y.Z+N is going to fix it. The more likely it is to be hit, the more likely a change would be accepted in into the &#x27;stable&#x27; branch.]<br>
<p>
Agreed on the second.. many developers seem to believe that because a new kernel was released all systems should have rebooted to it. [they are also the first to email sysadmin about why is the build systems are down because said reboot did not work.] Those complaints then get escalated.. and finally some higher manager/VP/CEO says &quot;Enough&quot; and you start getting change control procedures and committees to make sure that whatever caused the last reboot fiasco doesn&#x27;t happen again (only to find some new one). At which point the developers complain that nothing ever gets rebooted and why are we sitting on A.B.C when the &#x27;real world is running X.Y.Z&#x27; <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872282/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor872336"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 9, 2021 7:00 UTC (Sat)
                               by <b>NYKevin</b> (subscriber, #129325)
                              [<a href="/Articles/872336/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Agreed on the second.. many developers seem to believe that because a new kernel was released all systems should have rebooted to it. [they are also the first to email sysadmin about why is the build systems are down because said reboot did not work.] Those complaints then get escalated.. and finally some higher manager/VP/CEO says &quot;Enough&quot; and you start getting change control procedures and committees to make sure that whatever caused the last reboot fiasco doesn&#x27;t happen again (only to find some new one). At which point the developers complain that nothing ever gets rebooted and why are we sitting on A.B.C when the &#x27;real world is running X.Y.Z&#x27;</font><br>
<p>
IMHO this is an antipattern. I strongly prefer the SRE way of handling this, which is, basically, &quot;Estimate the approximate size and scale of a plausible outage that results from pushing a bad build, then compare that to your error budget. If your error budget is too low, either make the push process safer (slower, usually) or delay it until your error budget has recovered from the last outage.&quot; If/when arguments arise, you always resolve them by going back to the error budget and looking at the data. If we can&#x27;t afford to have an outage this day/week/month/release-cycle, then we don&#x27;t push until we can afford it. It really is that simple.<br>
<p>
Of course, this also means your execs and decision makers need to be willing to express their business requirements in terms of error budgets, rather than saying something like &quot;no outages ever&quot; (might as well be &quot;I want a pony&quot; for all the good that&#x27;s going to do). It also means you need to have monitoring and alerting to calculate your remaining error budget, and notify you when it is at risk (but you really should have those things anyway!).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872336/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor872361"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 9, 2021 14:41 UTC (Sat)
                               by <b>Chousuke</b> (subscriber, #54562)
                              [<a href="/Articles/872361/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I customer demanding &quot;no outages ever&quot; is basically just saying &quot;I want you to take all the blame for everything that goes wrong.&quot;<br>
<p>
I see systems with a long time between maintenance or failure events as accumulating risk. If you never test what happens when your important system goes down, you are essentially just hoping that whenever it inevitably does happen, it&#x27;s &quot;oh, it recovered in 15 minutes&quot; instead of &quot;oh, we&#x27;re out of business&quot;, and that you&#x27;re not the one taking blame for it. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872361/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor872463"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 11, 2021 7:58 UTC (Mon)
                               by <b>nilsmeyer</b> (guest, #122604)
                              [<a href="/Articles/872463/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; I customer demanding &quot;no outages ever&quot; is basically just saying &quot;I want you to take all the blame for everything that goes wrong.&quot;</font><br>
<p>
It&#x27;s possible with an unlimited budget. <br>
<p>
<font class="QuotedText">&gt; I see systems with a long time between maintenance or failure events as accumulating risk. If you never test what happens when your important system goes down, you are essentially just hoping that whenever it inevitably does happen, it&#x27;s &quot;oh, it recovered in 15 minutes&quot; instead of &quot;oh, we&#x27;re out of business&quot;, and that you&#x27;re not the one taking blame for it. </font><br>
<p>
I&#x27;ve seen more than my share of systems like that in my time. Very often they are also mission-critical. It&#x27;s a huge liability that very often is hidden from the business owners. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872463/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor872465"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 11, 2021 8:15 UTC (Mon)
                               by <b>Chousuke</b> (subscriber, #54562)
                              [<a href="/Articles/872465/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Yeah, though in practice, there&#x27;s no such thing as an unlimited budget, and all systems will have downtime. <br>
<p>
However, in well-managed systems, regular downtime due to maintenance is managed such that it will not impact day-to-day operations more than what is deemed acceptable, and the risk of extended downtime due to unexpected events is accounted for and mitigated within the budget, and any residual risk that can&#x27;t be reasonably mitigated is explicitly accepted.<br>
<p>
You can&#x27;t simply demand that things won&#x27;t fail, because reality doesn&#x27;t bend to your will, but *managing* the impact of failure is definitely possible.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872465/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor872418"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 11, 2021 8:35 UTC (Mon)
                               by <b>farnz</b> (subscriber, #17727)
                              [<a href="/Articles/872418/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <p>There's a system design corollary to this: systems designed to recover from component failure are more likely to have 100% system uptime in the long run than systems designed around components that never fail. If you absolutely must have no outages ever, then you need a system designed so that every component of the system can be taken out completely without notice and without the system breaking.
<p>Anecdotally, this seems to happen because systems designed to recover from expected failures (like a host rebooting) end up with the hooks needed to let you recover briskly when the unexpected happens. These hooks can be reused nicely to handle maintenance - if you can cope with an instance of a component going down because it crashed, you can build a maintenance regime that takes instances down one by one for kernel upgrades. Systems designed around 100% uptime of all components don't have those hooks to begin with.
<p>And, of course, you need to budget for all of this - redundancy is inefficient and expensive, so you may well find that the same people who want "no outages ever" are unable to fund their requirement.


      
          <div class="CommentReplyButton">
            <form action="/Articles/872418/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor872458"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 11, 2021 5:34 UTC (Mon)
                               by <b>Lennie</b> (subscriber, #49641)
                              [<a href="/Articles/872458/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Well, maybe not every release, right ?:<br>
<p>
<a href="https://www.youtube.com/watch?v=SYRlTISvjww">https://www.youtube.com/watch?v=SYRlTISvjww</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872458/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor872253"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 8, 2021 9:45 UTC (Fri)
                               by <b>vimja</b> (subscriber, #91577)
                              [<a href="/Articles/872253/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
In my experience it is no true. This sound all nice in theory, but it&#x27;s just not what I have experienced over the past 10 years.<br>
<p>
In practice it feels like a &quot;major&quot; new kernel (going from x.y to x.y+1) rather often breaks some minor thing or another whereas I almost never encounter any issues with &quot;minor&quot; upgrades (going from x.y.z to x.y.z+1). Quite the opposite actually, - usually as a kernel matures, the &quot;minor&quot; upgrades usually fix some of the issues I encountered during the earlier &quot;major&quot; upgrade.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872253/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor872090"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 7, 2021 3:18 UTC (Thu)
                               by <b>cesarb</b> (subscriber, #6266)
                              [<a href="/Articles/872090/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Currently users think they do not need to retest much if they go from x.y.50 to x.y.51, but that is not true. The same is true with rolling. Testing must be done whenever the kernel changes. [...] One day the rolling stable tree might be on 5.7.15 and the next on 5.8.1; within that pull are a lot of patches that are from the 5.8 merge window, which is a big step. But it all goes back to testing, he said; it is possible that the merge window introduced a lot of bugs, but it is also possible that a single stable patch does the same thing.</font><br>
<p>
To me, the important difference is not the size or amount of the patches, but the focus of the patches. The changes from x.y.50 to x.y.51 are supposed to be only bug fixes, while the changes from 5.7.15 to 5.8.1 would also include new features and optimizations. Yes, it&#x27;s possible that a &quot;bug fix&quot; change introduces a bug, but the chance of a &quot;new feature&quot; or &quot;optimization&quot; change introducing a bug (or a change in performance characteristics) is higher.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872090/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor872161"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 7, 2021 14:52 UTC (Thu)
                               by <b>giraffedata</b> (guest, #1954)
                              [<a href="/Articles/872161/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <p>Sasha (at least as reported here) doesn't seem even to acknowledge the very purpose of a stable branch: changes bring breakage.  Stable means unchanging; as long as the code doesn't change much, your system will keep working.
<p>
But you don't want totally stable either, because then broken systems stay broken.
<p>
So it's a combination of size and value.  Stable branches get low-risk high-reward changes.  Normally, that means bug fixes, but a really complex bug fix would be excluded if the bug isn't that bad, while a trivial but important new feature (maybe the ability to turn off something that presents security risks) would be included.
<p>
And of course, testing cannot catch all, or even much, of the breakage.  Your best defense against breakage is don't change things.
<p>
That is why people want someone to continue releasing low-risk high-reward changes to 5.7 long after 5.8 is available.  Some will even stay on 5.7 after the bug fixes have stopped rather than risk going to 5.8.




      
          <div class="CommentReplyButton">
            <form action="/Articles/872161/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor872588"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 11, 2021 20:16 UTC (Mon)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/872588/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; And of course, testing cannot catch all, or even much, of the breakage. Your best defense against breakage is don&#x27;t change things.</font><br>
<p>
The best defense is to test more before upgrading production systems, ideally:  Unfortunately, validation is not sexy and all but the super-rich big corps can&#x27;t or don&#x27;t want to pay for it anyway.<br>
<p>
To be fair there are projects where an insane amount of testing is performed on every single line changed but they&#x27;re generally &quot;pure software&quot; project not held back by hardware that admittedly makes everything ... harder.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872588/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor872094"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 7, 2021 5:25 UTC (Thu)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/872094/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; The idea is to use &quot;Git magic&quot; to make it all work; there is no cherry picking of patches. Instead a &quot;hack on Git merges&quot; is used, which preserves the SHA1 values as they are in the existing stable branches</font><br>
<p>
This seems to be the crux of the proposal but I didn&#x27;t see any explanation of what this &quot;hack&quot; is... did I miss anything?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872094/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor872119"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 7, 2021 12:43 UTC (Thu)
                               by <b>cwhitecrowdstrike</b> (guest, #153291)
                              [<a href="/Articles/872119/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I wondered the same.  I looked online, but the video doesn&#x27;t appear to be on YouTube yet, and I can&#x27;t find the slides (if there are any).  Could anyone who attended post whatever details you may have?  Thanks!<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872119/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor872120"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 7, 2021 12:49 UTC (Thu)
                               by <b>pbonzini</b> (subscriber, #60935)
                              [<a href="/Articles/872120/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <p>Let's say the latest stable release is 5.14.9 and 5.15.1 comes out. The content of rolling-stable is 5.14.9, but when you do

<pre>git merge -n 5.15.1        # fails with horrible conflicts
git restore -s 5.15.1 .    # some of you may know this as "git checkout 5.15.1 -- ."
git commit -m'advance rolling stable-tree to 5.15.1'</pre>

<p>... it becomes exactly the same as 5.15.1 and can be fast-forwarded from 5.14.9 to 5.15.1. Of course this works because 5.14.10 will never be merged into the rolling-stable tree.


      
          <div class="CommentReplyButton">
            <form action="/Articles/872120/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor872216"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 7, 2021 21:57 UTC (Thu)
                               by <b>ibukanov</b> (guest, #3942)
                              [<a href="/Articles/872216/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
How can it be the same as 5.15.1 if the commit message are different? Surely the tree sha stay the same, but sha of the commit that is derived both from the tree and the message will be different.<br>
<p>
Plus git commit-tree allows to perform the above manipulation without any merge or conflicts.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872216/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor872246"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 8, 2021 7:11 UTC (Fri)
                               by <b>pbonzini</b> (subscriber, #60935)
                              [<a href="/Articles/872246/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Of course the commits are different. In &quot;it becomes the same as 5.15.1&quot;, &quot;it&quot; refers to &quot;the content of rolling-stable&quot; from the previous sentence.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872246/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor872224"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 8, 2021 0:18 UTC (Fri)
                               by <b>amboar</b> (subscriber, #55307)
                              [<a href="/Articles/872224/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Playing git-golf a bit here, but this can be done in one operation with `git merge -s ours 5.15.1`. As I was reading the article I thought it sounded awfully similar to something I blogged recently: <a href="https://amboar.github.io/notes/2021/09/16/history-preserving-fork-maintenance-with-git.html">https://amboar.github.io/notes/2021/09/16/history-preserv...</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872224/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor872226"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 8, 2021 0:28 UTC (Fri)
                               by <b>amboar</b> (subscriber, #55307)
                              [<a href="/Articles/872226/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Ugh, that should have been the other way around with respect to the branch state and merged tag, but the important bit was the existence of the &quot;ours&quot; merge strategy :)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872226/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor872248"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 8, 2021 7:12 UTC (Fri)
                               by <b>pbonzini</b> (subscriber, #60935)
                              [<a href="/Articles/872248/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Yes, exactly. What one would need here is a &quot;theirs&quot; merge strategy, but it doesn&#x27;t exist.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872248/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor927729"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 29, 2023 19:34 UTC (Wed)
                               by <b>tsaeger</b> (subscriber, #116881)
                              [<a href="/Articles/927729/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I git-golf from time-to-time :)<br>
<p>
# git merge -s "theirs"<br>
THEIRS=v5.15.1<br>
git merge -s ours --no-commit "${THEIRS}"<br>
git read-tree -u --reset "${THEIRS}"<br>
git commit --no-edit<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/927729/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor872174"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels - just say no</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 7, 2021 15:31 UTC (Thu)
                               by <b>abatters</b> (<b>&#x272D; supporter &#x272D;</b>, #6932)
                              [<a href="/Articles/872174/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The small company I work for is currenly using 5.10.x.  Our plan is to upgrade to a new LTS series once a year, about 5 months or so after its initial release, to give it time to stabilize, and to have extra time for testing and validation.  We apply a number of patches that have to be forward-ported to each new version, and a number of out-of-tree modules that have to be udpated for each new major version due to the constantly-changing kernel internal APIs.  Some of the out-of-tree modules come from 3rd parties, and we have to wait for them to release new versions that support the new kernel version before we can upgrade.  Major kernel upgrades almost always cause regressions that I have to fix due to the huge churn.<br>
<p>
We use Yocto to build our firmware.  Yocto seems to have a problem building upstream kernels newer than the release of Yocto, even when using custom recipes.  So upgrading to a newer upstream kernel would also require backporting patches from upstream Yocto.<br>
<p>
I have a complicated set of Yocto recipes for each major kernel version going back a long time that applies the right set of patches for each kernel, so that I can test old kernels when bisecting for regressions.  The version numbers are *important* because they determine which set of patches need to be applied.<br>
<p>
We upgrade to a new stable kernel for every new firmware release, just before beginning testing/validation of the new firmware.  Usually there is no need to update patches or external modules.<br>
<p>
In summary, upgrading to a new major version is completely different than upgrading to a new stable patchlevel:<br>
- Porting patches<br>
- Updating out-of-tree modules<br>
- Waiting for 3rd-party out-of-tree modules to catch up<br>
- More regressions<br>
- More testing<br>
- Waiting for 3rd-party support from e.g. Yocto kernel build system<br>
- Checking and updating config options<br>
<p>
In addition, the kernel version numbers are themselves useful to indicate which patches to apply.<br>
<p>
This whole rolling stable kernel idea sounds like a nightmare to me.  Please don&#x27;t.  Don&#x27;t take away the freedom to choose the best time to switch to a new major kernel version.  Not everyone works the same way as you.<br>
<p>
Of course the last time I expressed an opinion to the stable kernel developers they pretty much told me in no uncertain terms (paraphrased), &quot;You use out-of-tree modules, so we don&#x27;t care about your use case or the problems that we are going to cause you.&quot;  Sigh.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872174/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor872231"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels - just say no</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 8, 2021 3:09 UTC (Fri)
                               by <b>thwalker3</b> (subscriber, #89491)
                              [<a href="/Articles/872231/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Honestly, I think &quot;rolling stable&quot; is meant for folks like Fedora, who do more or less the same thing anyway (at home on 5.14.9-300.fc35.x86_64 right now, expecting 5.14.10-300.fc35.x86_64 any day now).  But for enterprise users who roll their own, jumping from LTS to LTS every year or so, &quot;rolling LTS&quot; already sounds a lot like what we&#x27;re already doing.<br>
<p>
Perhaps I&#x27;m not parsing the article correctly, but it seems to be doing little more than collapsing &quot;*a* stable branch&quot; down into &quot;*the* stable branch&quot; for &quot;rolling stable&quot;.  However, if &quot;rolling LTS&quot; meant going back on the multi-year support for prior LTS kernels, that would be a big problem.  With 10&#x27;s of thousands of systems and customers who hate upgrades, I&#x27;m still trying to flush 4.14 out of the environment.  Not that it was much better in a prior life at a big bank with a beefy Redhat support contract.  I still shudder remembering trying to get rid of the last couple hundred AS2.1 boxes 3 years after RHEL3 hit EOL (in the same timeframe we still had Solaris 8 kicking around so...)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872231/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor872251"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels - just say no</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 8, 2021 9:07 UTC (Fri)
                               by <b>nilsmeyer</b> (guest, #122604)
                              [<a href="/Articles/872251/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;  Of course the last time I expressed an opinion to the stable kernel developers they pretty much told me in no uncertain terms (paraphrased), &quot;You use out-of-tree modules, so we don&#x27;t care about your use case or the problems that we are going to cause you.&quot; Sigh.</font><br>
<p>
Sounds like a very unfortunate situation, given that &quot;just get your modules into the kernel&quot; is also a daunting proposition. <br>
<p>
Good on you that you at least try to stay as current as possible given the constraints. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872251/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor872299"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels - just say no</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 8, 2021 16:56 UTC (Fri)
                               by <b>mfuzzey</b> (subscriber, #57966)
                              [<a href="/Articles/872299/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Agreed.<br>
<p>
Rolling stable may be fine for *end users* that just trust their distribution or vendor to give the the &quot;best&quot; updates.<br>
<p>
But when you are *developping* on top of the kernel (which is basically everyone in the embedded space) there&#x27;s a huge difference as you say.<br>
<p>
I&#x27;m doing something similar to you and bumping a stable point release normally less than a day to update and a few days of tests (which I don&#x27;t get involved with unless there are problems).<br>
<p>
Whereas updating to a new &quot;major&quot; release is going to take at least a week for me fixing up various breakages in our patches  (when the merge or build fails that&#x27;s the easy part, it&#x27;s more complicated if there are behaviour or performance changes). And I&#x27;m not talking about some franken kernel with thousands of local patches many touching core code. This is &lt;200 patches mostly in drivers. Fortunately we don&#x27;t have any 3rd party code though.<br>
<p>
Now of course the standard reply to that is &quot;upstream first&quot;. That&#x27;s fine for bugfixes and drivers for publically available hardware that help everyone (and we do that when we can) but do we really want to clutter the upstream kernel with thousands of &quot;one off&quot; drivers that are only useful to the few people in the world that have the custom hardware they support?<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872299/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor872307"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels - just say no</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 8, 2021 19:26 UTC (Fri)
                               by <b>sashal</b> (<b>&#x272D; supporter &#x272D;</b>, #81842)
                              [<a href="/Articles/872307/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It&#x27;s just another option, nothing is going away or changing :)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872307/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor872319"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels - just say no</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 8, 2021 21:15 UTC (Fri)
                               by <b>abatters</b> (<b>&#x272D; supporter &#x272D;</b>, #6932)
                              [<a href="/Articles/872319/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Standing down from red alert then :)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872319/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor872592"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels - just say no</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 11, 2021 20:39 UTC (Mon)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/872592/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Of course the last time I expressed an opinion to the stable kernel developers they pretty  much told me in no uncertain terms (paraphrased), &quot;You use out-of-tree modules, so we don&#x27;t care about your use case or the problems that we are going to cause you.&quot; Sigh.</font><br>
<p>
They could have said &quot;Sorry, it&#x27;s not practically possible for us to support out-of-tree modules&quot; but they may not be able to see the non-technical difference. The same persons likely have a limited knowledge of what &quot;QA&quot; or &quot;CI&quot; means and they may even be unaware that out of the gazillions of devices running Linux that you can buy off the shelf, practically none runs a &quot;pure&quot; commit signed by Linus.<br>
<p>
Either you use out of tree code or you don&#x27;t: a binary world older than social media. Or maybe just an earlier... version of it :-)<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872592/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor872360"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Debian testing</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 9, 2021 14:01 UTC (Sat)
                               by <b>ballombe</b> (subscriber, #9523)
                              [<a href="/Articles/872360/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The article is referencing debian testing as an example of rolling release.<br>
However only between 5-10% of  Debiansystems are running testing compared to a stable version<br>
&lt;<a href="https://popcon.debian.org/index.html">https://popcon.debian.org/index.html</a>&gt;<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872360/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor872455"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 11, 2021 3:02 UTC (Mon)
                               by <b>wtarreau</b> (subscriber, #51152)
                              [<a href="/Articles/872455/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
In my opinion this is completely wrong. All this will result in is users not even applying fixes anymore by fear of even more breakage.<br>
<p>
Currently the problem is not solely to encourage users to migrate to a new branch but also to follow minor updates inside the branch they&#x27;re in! When you see phones being released with 2-years old kernel while the branch they use are 100 versions later, or some boards sold with a 2-year old BSP, you figure there is some serious fear of upgrading. This will not go away with this, quite the opposite. All those who face a boot failure once will roll back to their old bogus kernel and never move anymore.<br>
<p>
And sources of breakage on major upgrades are numerous:<br>
  - make oldconfig taking hours to run by hand, or olddefconfig not<br>
    always picking that tiny bit you need because some drivers were<br>
    split in two<br>
  - new drivers offered for some hardware you&#x27;re using and not<br>
    working similarly<br>
  - some features being dropped (how many people complained<br>
    about the loss of the frame buffer scroll-back buffer)<br>
  - new entries appearing in /sys and accidentally being found by<br>
    poorly written scripts<br>
  - some even depend on external drivers (network, filesystems, etc)<br>
    that are not necessarily ported quickly<br>
<p>
Branches ARE made exactly for this, to inform users on the risk of breakage. Linus himself is very careful about not changing certain things in the middle of an -rc cycle to have enough time to communicate on possibly breaking changes. Breaking changes ARE changes and ARE needed, to fix design mistakes or outdated designs that prevent from improving. You can&#x27;t just decide for users when it&#x27;s best for them to take that risk.<br>
<p>
What I suspect would happen if such a rolling update became popular is that users would start to implore stable maintainers &quot;not to merge the new one yet&quot;, so we&#x27;ll get an new-LTS, current-LTS, previous-LTS and older-LTS rolling updates. Right now these are called &quot;5.10&quot;, &quot;5.4&quot;, &quot;4.19&quot;, &quot;4.9&quot; and so on.<br>
<p>
I think that for desktop users, having the choice between &quot;current-LTS&quot; or &quot;previous-LTS&quot; would certainly be sufficient, i.e. stay on current and switch to previous when things break. But honestly, among desktop users, how many are building their own kernels instead of using their distro&#x27;s ? Probably most only kernel developers. And these ones are very likely not those who will use a rolling LTS tree because they want to follow more closely what they&#x27;re using.<br>
<p>
I personally find as a user that the current stable offering is really awesome and gives us a lot of choice. I personally don&#x27;t apply fixes often, but I always find a properly working kernel for any of my machines, regardless of the branch they&#x27;re on, and can decide to switch to a newer branch depending on the time I have available to assign to that task. I.e. my laptop is systematically updated if rebooted (by default I suspend it, but battery outages or failures to wakeup happen). And if I have enough time and am not on the latest LTS anymore, I take this opportunity to upgrade. For my ARM-based firewall, I reserve a week-end to switch the LTS branch, because I *know* that certain things will not work anymore and deserve more scrutiny if I want to be able to connect back home from work later. Same for most of my other servers (NAS, reverse proxies etc).<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872455/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor873340"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 19, 2021 18:08 UTC (Tue)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/873340/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; - some features being dropped (how many people complained about the loss of the frame buffer scroll-back buffer)</font><br>
<p>
I would still really like this to come back. I just went through hell diagnosing boot-time oopses that happened before syslogd was up because I couldn&#x27;t bloody scroll back any more. How do you do this without a serial console? How do you do this on NFS servers that your desktops depend on (so if they don&#x27;t come up, the desktops are probably frozen waiting for them and can&#x27;t run a serial emulator?)<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/873340/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor873344"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 19, 2021 18:56 UTC (Tue)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/873344/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Look on gentoo-user ... there are patches to put that buffer back.<br>
<p>
It&#x27;s maintained there, if somebody could get it back into the kernel that would be good ...<br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/873344/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor873772"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 22, 2021 18:36 UTC (Fri)
                               by <b>flussence</b> (guest, #85566)
                              [<a href="/Articles/873772/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; How do you do this without a serial console?</font><br>
printk.delay with a camera and/or a lot of patience :)<br>
Or less conventionally, fbcon=rotate:1 to fit more lines in? I agree, it sucks.<br>
<p>
<font class="QuotedText">&gt; How do you do this on NFS servers that your desktops depend on (so if they don&#x27;t come up, the desktops are probably frozen waiting for them and can&#x27;t run a serial emulator?)</font><br>
I&#x27;ve used EFI pstore for (precisely) that, but no one should take this as a recommendation - it&#x27;s not always available and it&#x27;s risky (you&#x27;re depending on the BIOS vendor&#x27;s code to work reliably... LOL). And it still requires an extra reboot cycle into a working kernel to get at the log when things go south.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/873772/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor872595"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling stable kernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 11, 2021 20:57 UTC (Mon)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/872595/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; The first is that there is an increased need for testing under the rolling model that is being pushed onto the users. But he disagrees. Currently users think they do not need to retest much if they go from x.y.50 to x.y.51, but that is not true. The same is true with rolling. Testing must be done whenever the kernel changes.</font><br>
<p>
<font class="QuotedText">&gt; But it all goes back to testing, he said; it is possible that the merge window introduced a lot of bugs, but it is also possible that a single stable patch does the same thing.</font><br>
<p>
And all these bold quality assertions were supported by which detailed metrics? I found none in the report which is strange when advocating for more testing. I mean &quot;testing&quot; sorry; &quot;more&quot; would not be binary enough.<br>
<p>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/872595/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2021, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
