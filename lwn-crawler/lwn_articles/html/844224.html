        <!DOCTYPE html>
        <html lang="en">
        <head><title>An introduction to lockless algorithms [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/844224/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/846636/">Return to the Front page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/844224/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>An introduction to lockless algorithms</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Please consider subscribing to LWN</b>
<p>
Subscriptions are the lifeblood of LWN.net.  If you appreciate this
content and would like to see more of it, your subscription will
help to ensure that LWN continues to thrive.  Please visit
<a href="/Promo/nst-nag1/subscribe">this page</a> to join up and keep LWN on
the net.
</blockquote>
<div class="GAByline">
           <p>February 19, 2021</p>
           <p>This article was contributed by Paolo Bonzini</p>
           </div>
<p>
Lockless algorithms are of interest for the Linux kernel when traditional
locking primitives either cannot be used or are not performant enough.
For this reason they come up every now and then on LWN; one of the last
mentions, which prompted me to write this article series, was <a
href="https://lwn.net/Articles/827180/">last July</a>.
Topics that arise even more frequently are  read-copy-update (RCU â€” <a
href="https://lwn.net/Articles/262464/">these
articles from 2007</a> are still highly relevant), <a
href="https://lwn.net/Articles/575460/">reference counting</a>, and
ways of wrapping lockless primitives into higher-level,
more easily understood APIs.  These articles will delve into the concepts
behind lockless algorithms and how they are used in the kernel.

<p>
<div class="tlr">
<b>Other articles in this series</b>:
<ul>
<li> <a href="/Articles/846700/">Relaxed access and partial memory
barriers</a>
<li> <a href="/Articles/847481/">Full memory barriers</a>
<li> <a href="/Articles/847973/">Compare-and-swap</a>
<li> <a href="/Articles/849237/">More read-modify-write operations</a>
<li> <a href="/Articles/850202/">Some final topics</a>
</ul>
</div>

 Low-level knowledge of the memory model is universally recognized as
advanced material that can scare even the most seasoned kernel hackers; our
editor wrote (in the July article) that "<q>it takes a special kind of
mind to really understand the 
memory model</q>".  It's been <a href="/Articles/576642/">said</a> that the
Linux kernel memory model (and in particular <a
href="https://elixir.bootlin.com/linux/latest/source/Documentation/memory-barriers.txt"><tt>Documentation/memory-barriers.txt</tt></a>)
can be used to frighten small children, and the same is probably true of
just the words "acquire" and "release".

<p>

At the same time, mechanisms like RCU and <a
href="https://lwn.net/Articles/22818/">seqlocks</a> are in such widespread
use in the kernel that almost every developer will sooner or later
encounter fundamentally lockless programming interfaces.  For this reason,
it is a good idea to equip yourself with at least a basic understanding
of lockless primitives.  Throughout this series I will describe
what acquire and release semantics are really about, and present
five relatively simple patterns that alone can cover most uses of the
primitives.

<h4>Acquire, release, and "happens before"</h4>

<p>
In order to make the big step from the (relative) comfort of
synchronization primitives to lockless programming, we shall first
take a look at why locks work in the first place.  Usually, this
is taught in terms of mutual exclusion: locks prevent multiple
threads of execution from reading or writing the same data
concurrently.  But what does "concurrently" really mean?  And
what happens when thread&nbsp;T is done with that data and thread&nbsp;U
starts using it?

<p>
In order to answer these questions, we can turn to a theoretical
framework that Leslie Lamport established in his 1978 paper
<a href="http://research.microsoft.com/en-us/um/people/lamport/pubs/time-clocks.pdf">"Time,
Clocks and the Ordering of Events in a Distributed System"</a>.
According to the paper, the events in a distributed system can
be ordered according to whether an event P <em>happens before</em>
another event Q:

<ul class="spacylist">
<li> The ordering of events is <em>total</em> within a single thread of
execution.  In layman's terms, for any two events from the same thread
you can always say which came first and which came second.

<li> If two events do not happen within a single thread of execution,
event P happens before event Q if event P is a message send and
event Q is the corresponding message receive.

<li> The relation is <em>transitive</em>.  Therefore, if event P happens
before event Q and event Q happens before event R, then event
P happens before R.
</ul>

<p>
The "happens before" relation is a <em>partial</em> ordering: it is possible
to have two events P and Q such that neither happens before the other.
When this happens, the two events are <em>concurrent</em>.  Remember how
a lock prevents concurrent accesses to the same data structure?  That is
because, when you protect a data structure with a lock, all accesses
to the data structure form a total ordering, as if they came
from a single thread.  Lamport's framework also provides a basic idea
of what happens when a lock is handed off from a thread to another: some
kind of "message passing" ensures that the unlock operation of thread&nbsp;T
"happens before" the lock operation of thread&nbsp;U.

<p>
As it turns out, this is not just theory: in order to ensure that
their caches are coherent, CPUs exchange messages over buses such as
Intel's QPI or AMD's HyperTransport.  However, this level of detail is
definitely too much for our purposes.  Instead, we will generalize the
"happens before" definition to cover any kind of synchronization
primitive.

<p>
Lamport's fundamental insight was that synchronization happens when two
threads operate with symmetric operations on the same data structure.
In our generalization, we will list pairs of operations (such as sending
and receiving a message through the same queue) that synchronize one
thread with another.  Furthermore, we will classify the operations in
each pair as either <em>release</em> or <em>acquire</em>; equivalently
we can say that they "have release (or acquire) semantics".

<p>
Within a pair, the release operation <em>synchronizes with</em> the
corresponding acquire operation.  "Synchronizing" means that,
whenever one thread performs a release operation and another thread
performs the corresponding acquire operation, the "happens before"
relation grows edges from the releasing thread to the acquiring thread.
"Happens before" remains a partial order in the general case, but
it now spans two threads, or more than two, thanks to transitivity.
More formally:

<ul class="spacylist">
<li> The ordering of operations is total within a single thread.

<li> If an operation P with release semantics synchronizes with an
     operation Q with acquire semantics, then operation P happens before
     operation Q, even if they happen in different threads.

<li> Just like before, the relation is transitive and defines a partial
     ordering of operations.
</ul>

<p>
The old definition follows by giving release semantics to message send
and acquire semantics to message receive.  A message send synchronizes
the sending thread with the thread (or threads) that receives the message.
We can also rephrase our previous findings according to this new
definition: for locks to work, unlocking must have release semantics
and must synchronize with locking&mdash;which in turn has acquire semantics.
No matter if the lock is contended or not, the resulting "happens before"
edges ensure a smooth hand-off from one thread to the other.

<p>
Acquire and release semantics may seem like an abstract concept, but they
truly provide simple explanations of many common multithreaded programming
practices.  For example, consider two user-space threads accessing a global
variable <tt>s</tt>:

<pre>
    thread 1                              thread 2
    --------------------------------      ------------------------
    s = "hello";
    pthread_create(&amp;t, NULL, t2, NULL);
                                          puts(s);
                                          s = "world";
    pthread_join(t, NULL);
    puts(s);
</pre>

<p>
Are the accesses to the variable safe? Can thread 2 assume
that <tt>s</tt> will read as <tt>"hello"</tt>, and likewise
can thread&nbsp;1 assume that <tt>s</tt> will be <tt>"world"</tt>
after <tt>pthread_join()</tt>?  The answer is affirmative, and we
can explain why in terms of acquire and release semantics:

<ul class="spacylist">
<li> <tt>pthread_create()</tt> has release semantics and synchronizes with
     the start of thread&nbsp;2 (which has acquire semantics).  Therefore,
     anything written before a thread is created can be safely accessed
     from the thread.

<li> Exiting thread&nbsp;2 has release semantics and synchronizes with
     <tt>pthread_join()</tt> (which has acquire semantics).  Therefore,
     anything the thread writes before exiting can be safely accessed after
     <tt>pthread_join()</tt>.
</ul>

<p>
Note that data is flowing from one thread to the other with no lock involved:
congratulations, you have made it through the first example of lockless
programming.  To sum up:

<ul class="spacylist">
<li> If the programmer wants thread&nbsp;2 to "see the effects of" everything
  that happened so far in thread&nbsp;1, the two threads need to synchronize
  with each other: this is done with a release operation in thread&nbsp;1
  and an acquire operation in thread&nbsp;2.

<li> Knowing which APIs provide acquire/release semantics lets you
  write code that relies on the ordering provided by those APIs.
</ul>

<p>
Having understood how release and acquire semantics work for high-level
synchronization primitives, we can now consider them in the context of
individual memory accesses.

<h4>The message-passing pattern</h4>

<p>
In the previous paragraph we have seen how the acquire and release
semantics of
<tt>pthread_create()</tt> and <tt>pthread_join()</tt> allow the creator
of a thread to exchange information with that thread and vice
versa.  We will now see how this kind of communication can happen
in a lockless manner while threads run.

<p>
If the message is a simple scalar value, for example a boolean, it
could be read and written directly to a memory location.  However, consider
what happens if the message is a pointer, as in the following example:

<pre>
    thread 1                            thread 2
    --------------------------------    ------------------------
    a.x = 1;
    message = &amp;a;                       datum = message;
                                        if (datum != NULL)
                                          printk("%d\n", datum-&gt;x);
</pre>

<p>
If <tt>message</tt> is initially <tt>NULL</tt>, thread&nbsp;2 will read
either <tt>NULL</tt> or <tt>&amp;a</tt>, we don't know which.  The
problem is that, even if
<p>
<pre>
    datum = message;
</pre>
<p>were to read <tt>&amp;a</tt>, that assignment is still not synchronized
against the assignment in thread&nbsp;1:
<p>
<pre>
    message = &amp;a;
</pre>
Therefore, there is no edge in the
<i>happens before</i> relation connecting the two threads:

<pre>
    a.x = 1;                            datum = message;
       |                                    |
       |   happens before                   |
       v                                    v
    message = &amp;a;                       datum-&gt;x
</pre>

<p>
Because the two threads of execution are disconnected,
there is still no guarantee that <tt>datum-&gt;x</tt> will read
as&nbsp;1; we don't know that the assignment to <tt>a.x</tt> <i>happens
before</i> that read or not..
For this to happen, the store and load must be endowed with release and
acquire semantics respectively.

<p>
To that end, we have the "store-release" and "load-acquire"
operations.  A store-release operation P, in addition to writing to a
memory location, <em>synchronizes with</em> a load-acquire operation Q if Q
reads the value that was written by P.  Here is a fixed version
of the above code, using Linux's <tt>smp_store_release()</tt> and
<tt>smp_load_acquire()</tt>:

<pre>
    thread 1                                  thread 2
    --------------------------------          ------------------------
    a.x = 1;
    smp_store_release(&amp;message, &amp;a);          datum = smp_load_acquire(&amp;message);
                                              if (datum != NULL)
                                                printk("%x\n", datum-&gt;x);
</pre>

<p>
With this change, if <tt>datum</tt> is <tt>&amp;a</tt> we can affirm
that the store <em>happened before</em> the load.  (I am assuming for
simplicity that only one thread can write <tt>&amp;a</tt> to
<tt>message</tt>.  Saying "thread&nbsp;2 reads the value written by
thread&nbsp;1" does not refer to the specific bit pattern that goes in memory, it
really means 
that thread&nbsp;1's store is the last whose effect is visible to thread&nbsp;2).
The relation looks like this now:

<pre>
    a.x = 1;
       |
       v
    smp_store_release(&amp;message, &amp;a);  -----&gt;  datum = smp_load_acquire(&amp;message);
                                                  |
                                                  v
                                              datum-&gt;x
</pre>

<p>
And everything works.  Because of transitivity, whenever thread&nbsp;2
reads the value written by thread&nbsp;1, everything that thread&nbsp;1 did up
to the store-release will also be visible to thread&nbsp;2 after the
load-acquire.  Note that, unlike the <tt>pthread_join()</tt> case,
"synchronizes with" does not mean that thread&nbsp;2 "waits for" thread&nbsp;1
to do the write.  The above drawing only applies if thread&nbsp;2 happens to
read the value that thread&nbsp;1 has written.

<p>
In the Linux kernel, the above code will often be written in a slightly
different manner:

<pre>
    thread 1                              thread 2
    --------------------------------      ------------------------
    a.x = 1;
    smp_wmb();
    WRITE_ONCE(message, &amp;a);              datum = READ_ONCE(message);
                                          smp_rmb();
                                          if (datum != NULL)
                                            printk("%x\n", datum-&gt;x);
</pre>

<p>
In this case, the release and acquire semantics are provided by
the <em>memory barriers</em> <tt>smp_wmb()</tt> and <tt>smp_rmb()</tt>.
Memory barriers also have acquire and release semantics, but they are a
bit more complicated to reason about than simple loads and stores.
We will get back to them when we talk about seqlocks.

<p>
Regardless of whether one uses load-acquire/store-release or
<tt>smp_rmb()</tt>/<tt>smp_wmb()</tt>, this is an extremely common
pattern, and one that should be understood well.  Among its uses
we find:

<ul class="spacylist">
<li> All sorts of ring buffers.  Each entry of the ring buffer often points
  to other data; usually, there are also head/tail locations that contain
  an index in the ring buffer.  The producer side will use store-release
  operations, synchronizing with load-acquire operations in the consumer.

<li> RCU.  As far as the compiler is concerned, the familiar
  <tt>rcu_dereference()</tt> and <tt>rcu_assign_pointer()</tt> APIs are similar to
  load-acquire and store-release operations.  Thanks to some assumptions that
  are true for all processors except the Alpha, <tt>rcu_dereference()</tt>
  can be compiled to a regular load; still, <tt>rcu_assign_pointer()</tt>
  synchronizes with <tt>rcu_dereference()</tt> as if it were a load-acquire
  operation.

<li> Publishing pointers into an array. In this (modified) KVM snippet, if
  <tt>kvm_get_vcpu()</tt> sees the incremented <tt>kvm-&gt;online_vcpus</tt>,
  the associated entry in the array will be valid:

<pre>
    kvm_vm_ioctl_create_vcpu()                     kvm_get_vcpu()
    -----------------------------------------      -----------------------------------------------
    kvm-&gt;vcpus[kvm-&gt;online_vcpus] = vcpu;          if (idx &lt; smp_load_acquire(&amp;kvm-&gt;online_vcpus))
    smp_store_release(&amp;kvm-&gt;online_vcpus,            return kvm-&gt;vcpus[idx];
                      kvm-&gt;online_vcpus + 1);      return NULL;
</pre>
</ul>

<p>
Apart from the mechanics of the load-acquire/store-release operations,
there is another aspect of the message-passing pattern that you should
ponder: it is a <em>single producer</em> algorithm.  If there are multiple
writers, they must be protected against each other by other means,
for example with a mutex.  Lockless algorithms do not exist in a void;
they are but one part of the concurrent programming toolbox, and they
work best when combined with other, more traditional tools.

<p>
This is just the beginning of an extended series on lockless algorithms.
The next installment will look further at how atomic memory
operations can be ordered, and look into how memory barriers are at
the heart of both the "seqcounts" mechanism and the Linux scheduler.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Lockless_algorithms">Lockless algorithms</a></td></tr>
            <tr><td><a href="/Archives/GuestIndex/">GuestArticles</a></td><td><a href="/Archives/GuestIndex/#Bonzini_Paolo">Bonzini, Paolo</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/844224/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor846828"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 19, 2021 22:12 UTC (Fri)
                               by <b>randomguy3</b> (subscriber, #71063)
                              [<a href="/Articles/846828/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
This was very clear, thank you! I feel like I finally understand acquire and release semantics, and introducing them via message passing really helps with remembering which way round they go (the before operation releases a message, which the after operation acquires).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846828/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846941"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 21, 2021 14:37 UTC (Sun)
                               by <b>Sesse</b> (subscriber, #53779)
                              [<a href="/Articles/846941/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Agreed, explaining acquire/release as message-passing suddenly made everything clear to me.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846941/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor846835"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 20, 2021 0:05 UTC (Sat)
                               by <b>pebolle</b> (guest, #35204)
                              [<a href="/Articles/846835/">Link</a>] (29 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I&#x27;m dumb: what does &quot;total&quot; mean?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846835/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846836"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 20, 2021 0:12 UTC (Sat)
                               by <b>mpr22</b> (subscriber, #60784)
                              [<a href="/Articles/846836/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
From the fine article:<br>
<p>
&quot;The ordering of events is total within a single thread of execution. In layman&#x27;s terms, for any two events from the same thread you can always say which came first and which came second.&quot;<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846836/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846839"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 20, 2021 0:25 UTC (Sat)
                               by <b>pebolle</b> (guest, #35204)
                              [<a href="/Articles/846839/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; [...] all accesses to the data structure form a total ordering [...]</font><br>
<p>
and <br>
<p>
<font class="QuotedText">&gt; The ordering of operations is total within a single thread.</font><br>
<p>
Totally clear.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846839/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846864"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 20, 2021 7:21 UTC (Sat)
                               by <b>pbonzini</b> (subscriber, #60935)
                              [<a href="/Articles/846864/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
&quot;All accesses to the data structure form a total ordering&quot; means that you can always say which access came first and which came second. This is what you&#x27;d expect from a mutex, because:<br>
<p>
1) you can always say which critical section came first and which came second (lock waits for the other critical section to complete, if there&#x27;s one), and<br>
<p>
2) accesses within a critical section come from a single thread, and there is always a total order (defined in the article) within a thread.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846864/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor846848"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 20, 2021 2:32 UTC (Sat)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/846848/">Link</a>] (22 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It&#x27;s a mathematical term (a &quot;totally ordered set&quot;). It means that for any two events you can tell which one came earlier.<br>
<p>
This is opposed to a partially ordered set. A good example of a partially ordered set is a genealogical tree. From the information within the tree you can tell that some people are older than other (a father is always older than a son) but for some cases there&#x27;s not enough information (e.g. you can be younger or older than your cousin).<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846848/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846873"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 20, 2021 9:34 UTC (Sat)
                               by <b>pebolle</b> (guest, #35204)
                              [<a href="/Articles/846873/">Link</a>] (21 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;  A good example of a partially ordered set is a genealogical tree.</font><br>
<p>
That helps.<br>
<p>
I&#x27;m mathematically challenged. So, for example, I found it very annoying in programming exercises that recursion would always be taught with Fibonacci numbers. Who cares about that? It wasn&#x27;t until I once had to walk through directories and filenames that recursion started to make sense to me.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846873/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846929"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 21, 2021 11:20 UTC (Sun)
                               by <b>ballombe</b> (subscriber, #9523)
                              [<a href="/Articles/846929/">Link</a>] (20 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Maybe you missed the point of the exercise ?<br>
The point is that recursion *does not* work for computing Fibonacci numbers...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846929/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846930"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 21, 2021 12:13 UTC (Sun)
                               by <b>pebolle</b> (guest, #35204)
                              [<a href="/Articles/846930/">Link</a>] (9 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; [...] recursion *does not* work for computing Fibonacci numbers...</font><br>
<p>
I just double checked - I was afraid that my memory let me down again - but recursion does work for Fibonacci. At least, that&#x27;s what the web and the only introductory programming book I have on my shelves tells me.<br>
<p>
Perhaps we disagree on the meaning of &quot;recursion&quot;  and &quot;work&quot;?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846930/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846932"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 21, 2021 12:29 UTC (Sun)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/846932/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
int fibonacci( int f)<br>
{<br>
  if (f &lt;= 1)<br>
    return f;<br>
  else<br>
    return fibonacci( f-1) + fibonacci( f-2);<br>
}<br>
<p>
Which will blow your stack for large values of f :-)<br>
<p>
I hope I&#x27;ve got it right ... :-)<br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846932/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846939"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 21, 2021 13:08 UTC (Sun)
                               by <b>dtlin</b> (subscriber, #36537)
                              [<a href="/Articles/846939/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
With that implementation, there&#x27;s a good chance you&#x27;ll experience integer wraparound (and thus wrong results) before you blow the stack. fib(92) = 7540113804746346429, fib(93) = 12200160415121876738 which doesn&#x27;t fit in a 64-bit signed integer.<br>
<p>
The problem with the recursive solution is the exponential runtime; the stack usage is linear.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846939/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor846944"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 21, 2021 15:24 UTC (Sun)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/846944/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I knew I should have checked it ...<br>
<p>
The start of the conditional should be<br>
<p>
if (f  &lt;= 2) return 1;<br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846944/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846945"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 21, 2021 16:16 UTC (Sun)
                               by <b>yann.morin.1998</b> (guest, #54333)
                              [<a href="/Articles/846945/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; The start of the conditional should be</font><br>
<font class="QuotedText">&gt; if (f &lt;= 2) return 1;</font><br>
<p>
Not necessarily. The generalised Fibonacci sequence starts with F(0) = 0 and F(1) = 1 [0]. So your initial condition was (not in)correct.<br>
<p>
[0] <a href="https://en.wikipedia.org/wiki/Fibonacci_number">https://en.wikipedia.org/wiki/Fibonacci_number</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846945/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor846946"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 21, 2021 17:10 UTC (Sun)
                               by <b>matthias</b> (subscriber, #94967)
                              [<a href="/Articles/846946/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
This will definitely not blow the stack. Even for quite small numbers of f, the runtime will be longer than the age of the universe.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846946/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor846964"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 21, 2021 23:41 UTC (Sun)
                               by <b>neilbrown</b> (subscriber, #359)
                              [<a href="/Articles/846964/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Which will blow your stack for large values of f :-)</font><br>
<p>
Only if you try to implement it on a computer.<br>
As a mathematical abstraction, this is perfectly fine and well defined for all f.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846964/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor848321"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 5, 2021 0:13 UTC (Fri)
                               by <b>qzPhUZ7af5M6kjJi3tDgMaVq</b> (guest, #140267)
                              [<a href="/Articles/848321/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Recursive definitions work just fine in certain programming languages.<br>
<p>
<a rel="nofollow" href="https://wiki.haskell.org/The_Fibonacci_sequence">https://wiki.haskell.org/The_Fibonacci_sequence</a><br>
<p>
In a Haskell interpreter:<br>
<p>
Prelude&gt; let fibs = 0 : 1 : zipWith (+) fibs (tail fibs)<br>
Prelude&gt; fibs !! 100000<br>
<p>
(20,899 digit number omitted... it took about 2 seconds to compute it)<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/848321/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor846983"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 22, 2021 9:49 UTC (Mon)
                               by <b>ballombe</b> (subscriber, #9523)
                              [<a href="/Articles/846983/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
To compute fibo(50) the naive sequential algorithm needs 50 additions, the naive recursive algorithm needs<br>
12586269025 additions. That is what I call &#x27;not working&#x27;.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846983/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846984"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 22, 2021 10:04 UTC (Mon)
                               by <b>pebolle</b> (guest, #35204)
                              [<a href="/Articles/846984/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I&#x27;ll file this under &#x27;Disagreeing what &quot;work&quot; means&#x27; too.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846984/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor846987"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 22, 2021 11:47 UTC (Mon)
                               by <b>jezuch</b> (subscriber, #52988)
                              [<a href="/Articles/846987/">Link</a>] (9 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Actually I don&#x27;t think I ever saw a programming tutorial which introduced recursion using Fibonacci sequences and said that this was a bad example. Which I too think is sad. But I guess this is the prototypical &quot;recursive function&quot; known from the math classes, so...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846987/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846990"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 22, 2021 12:14 UTC (Mon)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/846990/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Thing is, the *definition* of fibonacci is recursive. Doesn&#x27;t mean it&#x27;s the best way to calculate it ...<br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846990/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor847282"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 24, 2021 23:49 UTC (Wed)
                               by <b>NYKevin</b> (subscriber, #129325)
                              [<a href="/Articles/847282/">Link</a>] (7 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The recursive definition is perfectly fine for computing it as long as you memoize appropriately. You don&#x27;t even need all that much memo space, because you only ever need to keep the largest two values (which I believe will generally also be the two most recently computed values, so you can just bolt on a bog-standard LRU cache).<br>
<p>
Of course, if you *really* want to motivate memoization, you probably want to talk about something more interesting, like Hashlife. I remember reading a lengthy series of articles on Eric Lippert&#x27;s blog where he spends much of the series painstakingly squeezing out every ounce of performance from the iterative approach (vectorization, bit-twiddling, lookup tables, etc.), and then he switches to Hashlife (&quot;Gosper&#x27;s algorithm&quot;), with hardly any weird optimizations at all beyond basic algorithm design and memoization, using *garbage collected objects* to represent everything, and suddenly the whole thing is orders of magnitude faster* for large-enough N. My conclusion: Using the right algorithm is far, far more effective than heavily optimizing the wrong algorithm.<br>
<p>
* Strictly speaking, it is faster when solving the problem &quot;Figure out what the board will look like at generation N.&quot; If the problem is instead &quot;Figure out what the board will look like at every generation from 1 through N,&quot; then Hashlife is much less effective. So using it for an interactive UI that sequentially displays one generation at a time is probably not a great idea. But if you want to advance directly to generation 2^27 or something like that, Hashlife is basically the only game in town.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847282/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor847968"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 2, 2021 20:07 UTC (Tue)
                               by <b>jezuch</b> (subscriber, #52988)
                              [<a href="/Articles/847968/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Well actually...<br>
<p>
Fibonacci numbers are defined by a recursive function which has an exact solution, so you can calculate every number in O(1) time (assuming no bignums are needed). So it&#x27;s doubly (or triply) a bad example to intoduce recursion to new programmers ;)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847968/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor848330"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 5, 2021 3:16 UTC (Fri)
                               by <b>dtlin</b> (subscriber, #36537)
                              [<a href="/Articles/848330/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It has a closed-form solution but that does not make it O(1).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/848330/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor849057"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 11, 2021 9:56 UTC (Thu)
                               by <b>anselm</b> (subscriber, #2796)
                              [<a href="/Articles/849057/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <blockquote><em>It has a closed-form solution but that does not make it O(1).</em></blockquote>
<p>
If your platform only supports integers up to a certain maximum (say 2^64-1), it is O(1) because it is straightforward to create a lookup table for all n where F(n) &lt; 2^64 and use that rather than the recursive definition.
</p>

      
          <div class="CommentReplyButton">
            <form action="/Articles/849057/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor849136"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 11, 2021 19:28 UTC (Thu)
                               by <b>nybble41</b> (subscriber, #55106)
                              [<a href="/Articles/849136/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; â€¦ it is O(1) because it is straightforward to create a lookup table for all n where F(n) &lt; 2^64 and use that rather than the recursive definition.</font><br>
<p>
If you strict permissible inputs to a predetermined finite range then every algorithm becomes O(1). That&#x27;s not a very useful definition, though. And while a 93-entry table suffices to represent all Fibonacci numbers less than 2^64, many languages have built-in arbitrary-precision integer types limited only by available memory.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/849136/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor849160"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 12, 2021 10:49 UTC (Fri)
                               by <b>anselm</b> (subscriber, #2796)
                              [<a href="/Articles/849160/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <p>
Obviously. I think the point here is that Fibonacci numbers are often used as a prime example for the use of recursion, but in practice, calculating Fibonacci numbers through a 1:1 implementation of their recursive definition is not what one would actually ever do. As such it gives people silly ideas. It would be better to come up with examples where there are more compelling arguments for using recursion in the first place, or at the very least put a big health warning on the Fibonacci example.
</p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/849160/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor849264"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 13, 2021 8:54 UTC (Sat)
                               by <b>neilbrown</b> (subscriber, #359)
                              [<a href="/Articles/849264/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I recall in first year CompSci, recursion was introduced using the Towers of Hanoi game.  I think that is an excellent vehicle, much better than Fibonacci.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/849264/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor849540"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 16, 2021 20:49 UTC (Tue)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/849540/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The canonically crazy example of this is the wonderful Hutter search: <a href="https://arxiv.org/abs/cs/0206022">https://arxiv.org/abs/cs/0206022</a>. The title describes it well: it is, in fact, the fastest and shortest general algorithm possible if you want one single algorithm that can solve all well-defined problems -- but given that it involves searching for and then executing all possible programs until it finds the one that solves the problem you asked about, it is somewhat impractical. You might find it useful if you are looking for something for your hypercomputer to run when you are bored of having it work out all the busy beaver numbers up to 10^100...<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/849540/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor846959"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 21, 2021 21:31 UTC (Sun)
                               by <b>thoughtpolice</b> (subscriber, #87455)
                              [<a href="/Articles/846959/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Many people are giving you exact definitions of the word &quot;total ordering&quot; which is relevant to the article, obviously, but it is also worth pointing out that the word &quot;total&quot;, when applied to some operation, be it mathematics or a computer program, means it is an operation that works and &quot;makes sense&quot; over every possible input you could feed it. This is an extremely common occurrence computer programmers encounter regularly, though it may not seem like it.<br>
<p>
For example, many people define division as a function that takes two parameters, &#x27;n&#x27; and &#x27;d&#x27;, and computes n / d. But most people would agree that d=0 is an invalid parameter your program will actually fault. It&#x27;s nonsensical.[1] So division is not total, then: you can give it an input and it can fail. But multiplication is total: it doesn&#x27;t matter what two integers you give it. You can always multiply them, and there is always a sensible result. Thus, being &quot;total&quot;, or &quot;totality&quot;, is a property of algorithms/functions/actions you can perform on some objects (those objects being the set of all possible parameters, commonly called &quot;the input domain&quot;.)<br>
<p>
There is another operator that you often use when programming, and it is called &quot;is x less than y&quot;, or &lt;. You use it to figure out how things are ordered. Is 1 less than 2? It turns out, this is very similar to the question &quot;does a thing happen before another thing?&quot; and it&#x27;s a very important question. They are both a way of asking what order things occurred in, just for different kinds of &quot;things&quot;. But, as an algorithm, ordering is not always total: sometimes you just can&#x27;t tell if A happened before B, or if A is less than B, or not. It might not make sense for the objects in question.<br>
<p>
I&#x27;ll also say that partiality and totality, and especially partially ordered sets (sometimes called &quot;posets&quot;), are an extremely, extremely fundamental component of computer science and mathematics. They&#x27;re very important, and very well worth understanding, even if it&#x27;s only at a high level.<br>
<p>
[1] It&#x27;s only nonsensical to some people or computers. On some CPUs, such as RISC-V for example, division by zero is well defined, as n/0=0. This is fine, and not really problematic. At the end of the day, math is what human beings make of it. For rigorous mathematics, n/0=0 might be heresy. But for computers, for humans using them, it&#x27;s maybe OK to let that slide.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846959/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor847290"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 25, 2021 1:47 UTC (Thu)
                               by <b>NYKevin</b> (subscriber, #129325)
                              [<a href="/Articles/847290/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Another hint: For *finite* sets (which is basically all the sets the average programmer is likely to care about), a poset is (mostly) equivalent to a DAG. So for example:<br>
<p>
* Git history is a poset (under the relationship &quot;commit X is an ancestor of commit Y&quot;).<br>
* The packages in a (sufficiently powerful) package manager are a poset (under the relationship &quot;package X is a transitive dependency of package Y&quot;).<br>
* In languages with OOP and inheritance, the set of classes (or classes and interfaces) is a poset (under the relationship &quot;class/interface X is a direct or indirect subclass/subtype of class/interface Y&quot;).<br>
<p>
In short: A poset is a thing that lets you have some objects come &quot;logically before&quot; other objects, for whatever definition of &quot;logically before&quot; is appropriate.<br>
<p>
Then, a totally ordered set is just a poset with the additional requirement that for every X and Y, either X comes before Y or Y comes before X (or X = Y). In the DAG interpretation, this is what you would get if you require that the DAG forms a simple chain A -&gt; B -&gt; C ... -&gt; Z, without any branching or whatnot allowed. So, to continue our examples:<br>
<p>
* Git history is totally ordered, if you never create any branches or merges, never use detached HEAD mode, and never create a second root commit (i.e. a commit without parents, other than the first commit in the repository).<br>
* Packages are pretty much never totally ordered, in real-world cases. But maybe, if you wanted to ensure a totally deterministic installation order, you could insert artificial dependencies to force the package manager to install everything in the exact order you want.<br>
* In languages with single inheritance, each individual class&#x27;s set of superclasses (not counting interfaces) is totally ordered. But the language as a whole is not, in most reasonable cases.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847290/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor847614"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 26, 2021 21:07 UTC (Fri)
                               by <b>thoughtpolice</b> (subscriber, #87455)
                              [<a href="/Articles/847614/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
In fact it&#x27;s so close to a DAG that the given Hasse diagram of a poset (when drawn correctly) might make you blink twice. :) My original post was already long enough, though...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847614/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor846834"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 20, 2021 0:12 UTC (Sat)
                               by <b>mss</b> (subscriber, #138799)
                              [<a href="/Articles/846834/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Nice article Paolo, thanks for bringing this subject up.<br>
<p>
It is worth noting that the Linux kernel memory model is very similar (or one can say: based on) C11/C++11 memory model - after all, both were based on the underlying behavior of real-world computer systems.<br>
<p>
However, since the C/C++ working groups had the benefit of designing an atomic synchronization API from scratch the resulting API seems cleaner and more consistent for me than the kernel API.<br>
<p>
I also find Mark John Batty&#x27;s PhD dissertation called &quot;The C11 and C++11 Concurrency Model&quot; a very good read on the subject.<br>
It not only includes a more formal description of the model but is also rich with examples describing how various CPU architectures behave and why particular model design decisions were (probably) made.<br>
<p>
The aforementioned dissertation is available here: <a href="https://www.cs.kent.ac.uk/people/staff/mjb211/docs/toc.pdf">https://www.cs.kent.ac.uk/people/staff/mjb211/docs/toc.pdf</a><br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846834/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846862"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 20, 2021 7:11 UTC (Sat)
                               by <b>pbonzini</b> (subscriber, #60935)
                              [<a href="/Articles/846862/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The C11 model has some quirks of its own that make it sometimes harder to use than the Linux kernel memory model. I had a half-baked idea of a sixth article on the topic of C11 atomics for kernel programmers, based on the comments here it seems like there&#x27;s interest.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846862/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846891"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 20, 2021 16:11 UTC (Sat)
                               by <b>mss</b> (subscriber, #138799)
                              [<a href="/Articles/846891/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It&#x27;s a nice topic bordering between theoretical CS stuff and real world software engineering.<br>
<p>
By the way, you said in a comment under the July article to steer clear of the C11 &quot;sequentially consistent&quot; loads and stores since they are incredibly easy to get wrong.<br>
I assume you mean that people have misconceptions about the ordering guarantees that sequentially consistent semantics give?<br>
After all, they provide acquire and release semantics, too, so any algorithm that&#x27;s valid under acq/rel will be valid under sequentially consistent semantics, too (just maybe slower).<br>
<p>
For me personally the most surprising thing with C11 atomics is that a relaxed operation on a variable plus a barrier of X memory order (before or after that operation) is not the  same thing as just performing the same operation but with the X memory order, even though the semantics are very close.<br>
<p>
In general, the C11 atomics seem to be tailored more for using atomic operations of particular memory order rather than barriers, while most of the kernel code seems to prefer using ordinary memory accesses with barriers instead.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846891/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor846837"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 20, 2021 0:18 UTC (Sat)
                               by <b>pebolle</b> (guest, #35204)
                              [<a href="/Articles/846837/">Link</a>] (54 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; [...] if event P happens before event Q and event Q happens before event R, then event P happens before R. </font><br>
<p>
I&#x27;m still dumb: what makes this insightful?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846837/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846842"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 20, 2021 0:56 UTC (Sat)
                               by <b>gus3</b> (guest, #61103)
                              [<a href="/Articles/846842/">Link</a>] (48 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Not dumb at all. It&#x27;s an axiom, like this one for mathematics:<br>
<p>
&quot;For any op &lt;, =, &gt;, if A op B, and B op C, then A op C.&quot; That is to say:<br>
<p>
-- If A &lt; B, and B &lt; C, then A &lt; C<br>
-- If A = B, and B = C, then A = C<br>
-- If A &gt; B, and B &gt; C, then A &gt; C<br>
<p>
Referring to the statement you quoted, it could be re-stated thus:<br>
<p>
&quot;Given an action A, the time tA at which action A takes place, and any op &lt;, =, &gt;:<br>
If tP op tQ, and tQ op tR, then tP op tR.&quot;<br>
<p>
That may seem thick, but instead of just A, B, and C, I&#x27;ve just substituted locations on a time-line instead of a number line.<br>
<p>
It may seem obvious, and it kind of is. But stating applicable axioms explicitly is standard practice in rigorous maths discussions.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846842/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846849"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 20, 2021 2:55 UTC (Sat)
                               by <b>excors</b> (subscriber, #95769)
                              [<a href="/Articles/846849/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It&#x27;s also important what rules *aren&#x27;t* stated. There&#x27;s no requirement e.g. that for any two events P and Q, you can always determine either that P happens before Q or that Q happens before P. It&#x27;s perfectly acceptable for there to be no ordering between them (except where the axioms say there must be an ordering).<br>
<p>
That&#x27;s contrary to the everyday human concept of time, where you would say every event happens at a precise number of seconds past midnight and you can always work out which happened first. That concept is problematic to implement in computers, because it&#x27;s simply impractical for physically separated processors to have perfectly synchronised nanosecond-precision clocks and to attach timestamps to every message they share. So we throw away that concept of time and time-lines and define a brand new concept (called &quot;happens before&quot;, but could equally be called &quot;op&quot; or &quot;â†’&quot;) from scratch.<br>
<p>
The axioms are trying to define that new concept with the minimal set of requirements on where there must be a well-defined ordering between events, so it&#x27;s just barely strong enough to achieve the goal (in this case to define some useful kind of synchronisation between concurrent threads). And in this particular case, transitivity is one property that is required else the mathematical proofs stop working, so it has to be stated explicitly in the definition.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846849/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846904"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 20, 2021 18:12 UTC (Sat)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/846904/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
This is where relativity helps :-)<br>
<p>
Whether two things are sequential or not depends on whether one occurs INSIDE the light-cone of the other. These acquire-release semantics force the two light cones to intersect, so anything after the intersect is visible inside both light cones so you can conclude they are sequential.<br>
<p>
And the light-cone thing also explains why things can only be simultaneous if they occur at the same 4-dimensional co-ordinates, because otherwise they are not in each other&#x27;s light cone, and therefore there is no mutual concept of time.<br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846904/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846910"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 20, 2021 19:14 UTC (Sat)
                               by <b>pbonzini</b> (subscriber, #60935)
                              [<a href="/Articles/846910/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I don&#x27;t think it&#x27;s really about relativity; anything that you can model as a directed graph function just as well as a representation of a partial ordering.<br>
<p>
For example think of two cars going from A to B along two different roads. Any time a junction joins the two roads you *might* be able to say who is ahead at that moment. However while the roads are running parallel it&#x27;s possible (but not certain) that you cannot say that.  That is because the points along the two routes form a partial ordering.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846910/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846934"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 21, 2021 12:36 UTC (Sun)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/846934/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
No I didn&#x27;t mean to say it was relativity. It&#x27;s just that if you understand light cones and all that, it&#x27;s the same problem in a different domain :-)<br>
<p>
The send-receive creates a new light cone for which the origin is visible in both the previous two cones :-)<br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846934/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846938"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 21, 2021 13:00 UTC (Sun)
                               by <b>pebolle</b> (guest, #35204)
                              [<a href="/Articles/846938/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I&#x27;ll file this under &#x27;Disagreeing what &quot;work&quot; means&#x27;.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846938/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor847099"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 23, 2021 1:06 UTC (Tue)
                               by <b>rgmoore</b> (<b>&#x272D; supporter &#x272D;</b>, #75)
                              [<a href="/Articles/847099/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <blockquote>It's perfectly acceptable for there to be no ordering between them (except where the axioms say there must be an ordering).</blockquote>

<p>From a practical standpoint, it's not just acceptable for there to be no ordering; it's actually desirable for performance.  If you can divide up your program into separate tasks that don't have ordering constraints between them, you can run those tasks however makes the best performance sense.  This has been the key to all kinds of modern performance advances, like out of order execution, multiprocessing, and what have you.  Those things all depend on being able to break up tasks into parts that can be run in different orders.  It's the need to synchronize that slows things down.
      
          <div class="CommentReplyButton">
            <form action="/Articles/847099/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor846920"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 21, 2021 6:22 UTC (Sun)
                               by <b>tialaramex</b> (subscriber, #21167)
                              [<a href="/Articles/846920/">Link</a>] (41 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Right.<br>
<p>
Not explicitly stating such an assumption can get you in serious trouble if we want to prove things about a system.<br>
<p>
For example: As an IoT developer thinking about how two devices you manufacture can securely communicate over an IP network, you might seize upon the Pre-shared Keys (PSKs) in TLS 1.3 (RFC 8446) as a good approach that avoids worrying about certificates or a PKI. It might seem like a common sense assumption that if device #1 (&quot;Alice&quot;), and device #2 (&quot;Bob&quot;) share the same key K, that&#x27;s going to be secure against any attacker that doesn&#x27;t know K, the document (as published) doesn&#x27;t suggest there would be any unexpected problems. And indeed mathematical proofs of TLS 1.3 say it does deliver on the claims in its introduction.<br>
<p>
Unfortunately those proofs assume something different from you. They assume your two devices would each need their own key, K1 and K2. If you don&#x27;t use separate keys you need countermeasures not described in the protocol, because of the &quot;Selfie attack&quot;. The attack goes like this, Alice asks Bob something (using key K of course), but Mallory (who doesn&#x27;t know K) just redirects Alice&#x27;s message back to Alice. Alice thinks this question came from Bob (after all it uses key K which they share) and answers it, now Alice also thinks that answer came from Bob. Mallory has successfully confused Alice despite being unable to either read or forge messages from either Alice or Bob. Under the proof scenario Alice asks using K1, when the message is redirected back to her Alice is puzzled because it isn&#x27;t encrypted with key K2 from Bob, so that message is rejected and everything is fine.<br>
<p>
If this assumption had been made into an explicit _axiom_ that could have highlighted that the TLS document doesn&#x27;t explain the problem with just having a single key K and likely its authors would have drafted a section explaining why you might need more keys than seem necessary at first glance, and what alternative strategies would work if you must have one key.<br>
<p>
A more broadly famous missing assumption is the Axiom of Choice. In the 1800s mathematicians were confident they understood the Theory of Sets - they had established Axioms stating how it works - but alas they&#x27;d actually without making it explicit been assuming that in a set of sets (like the set of sets of integers) you can always choose one of the members of each set. This is definitely true for finite sets. But for infinite sets we can&#x27;t prove it, so, we ought to explicitly make it an Axiom and say so, if we&#x27;re wrong any results depending on that assumption may be wrong too. Today most mathematicians will choose ZFC, axioms for set theory which include the Axiom of Choice, because it does after all _feel_ intuitively as though you could choose one from each set. But at least you&#x27;ve written down this specific assumption you&#x27;re making in case it matters some day.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846920/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846931"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 21, 2021 12:25 UTC (Sun)
                               by <b>ale2018</b> (guest, #128727)
                              [<a href="/Articles/846931/">Link</a>] (40 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
A possibility could be to assimilate any exchange of information as a message transmission.  There may always be entities with witch you don&#x27;t exchange any information at all.  They may exist or not, you never know.  Like the set of all sets, if you cannot ping it, you may consider it doesn&#x27;t exist.<br>
<p>
Thus, among &quot;existing&quot; things you have defined a partial time order.  Can one obtain relativity from Newtonian physics by just introducing information exchange?<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846931/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846936"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 21, 2021 12:47 UTC (Sun)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/846936/">Link</a>] (39 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Thus, among &quot;existing&quot; things you have defined a partial time order. Can one obtain relativity from Newtonian physics by just introducing information exchange?</font><br>
<p>
Almost certainly not. Newtonian Physics assumes time IS constant from all vantage points - if you see time move ten seconds so will I. Relativity says time APPEARS constant from all vantage points.<br>
<p>
If we assume I travel to Alpha Centauri and back at 0.9c, you on Earth will see me take about 9 years to do so. Newton says that means I must experience the same 9 years. But relativity says time will run slower for me, I may only experience 1 year passing.<br>
<p>
It&#x27;s like a multi-core CPU with each core having a different clock ... and time is measured in ticks ...<br>
<p>
I don&#x27;t see how exchanging information will alter anything.<br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846936/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846991"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 22, 2021 13:04 UTC (Mon)
                               by <b>ale2018</b> (guest, #128727)
                              [<a href="/Articles/846991/">Link</a>] (38 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;  I don&#x27;t see how exchanging information will alter anything.</font><br>
<p>
For one thing, introducing information and the ability to process it breaks time symmetry.  You can easily call &quot;past&quot; the side you remember and &quot;future&quot; the side you predict.  Time reversal doesn&#x27;t work any more.  At this point you&#x27;ve already left the classical, Newtonian vision, and dropped those misconceptions about time.<br>
<p>
Special relativity was introduced as an attempt to account for the speed of light being a universal constant.  As a speed limit, it entails that information cannot travel faster than light either.  My question was whether it&#x27;s possible to derive some kind of relativity the opposite way around.  That is, assuming that things exists only if you can exchange information with them, and then assuming the partial ordering principle outlined in the article, is it possible to derive a concept similar to the light cone?<br>
<p>
Of course, it is not possible to compute the actual speed of light based on pure logic...  Or is it?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846991/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846993"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 22, 2021 13:46 UTC (Mon)
                               by <b>mathstuf</b> (subscriber, #69389)
                              [<a href="/Articles/846993/">Link</a>] (37 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Of course, it is not possible to compute the actual speed of light based on pure logic... Or is it?</font><br>
<p>
AFAIR, it&#x27;s not possible to compute a one-way speed at all. You can only get a round-trip speed (light could be traveling at some factor based on its angle with a &quot;universal axis&quot; and we&#x27;d never be able to tell) because you can&#x27;t communicate back about any time synchronization without being affected by the same limits. So, no, without an axiom that &quot;the universe has no preferred axis for light travel&quot;, you get an infinite number of possible solutions for a speed-of-light gradient.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846993/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor847063"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 22, 2021 18:44 UTC (Mon)
                               by <b>ale2018</b> (guest, #128727)
                              [<a href="/Articles/847063/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <p>That's right.
<p>Let me quote Leslie Lamport, from the 1978 article cited by Paolo Bonzini:
<blockquote>
This definition will appear quite natural to the reader
familiar with the invariant space-time formulation of
special relativity, as described for example in [1] or the
first chapter of [2]. In relativity, the ordering of events is
defined in terms of messages that <i>could</i> be sent. However,
we have taken the more pragmatic approach of only
considering messages that actually <i>are</i> sent. We should
be able to determine if a system performed correctly by
knowing only those events which <i>did</i> occur, without
knowing which events <i>could</i> have occurred.
</blockquote>
<p>The references [1] and [2] are two introductory texts on relativity of those times.
      
          <div class="CommentReplyButton">
            <form action="/Articles/847063/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor847094"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 23, 2021 0:03 UTC (Tue)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/847094/">Link</a>] (31 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Well, as far as light is concerned, the speed of light ... ISN&#x27;T. No time passes whatsoever between a photon leaving wherever it was created, and being absorbed by whatever it hits ...<br>
<p>
Oh, and I believe it IS possible to calculate the speed of light based on pure logic ...<br>
<p>
You&#x27;ll have to look it up for yourself, but if you take a bunch of mathematical constants like e, pi, ln and so on, I think they somehow dictate a set of possible values for c, g, and other physical constants. It&#x27;s too long ago, but I&#x27;m sure I&#x27;ve seen the physical constants defined in terms of the mathematical constants. And that&#x27;s why astronomers are so unhappy with the cosmological constant. Because they can&#x27;t define it in terms of anything else, it shouldn&#x27;t exist ...<br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847094/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor847098"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 23, 2021 0:38 UTC (Tue)
                               by <b>mathstuf</b> (subscriber, #69389)
                              [<a href="/Articles/847098/">Link</a>] (26 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Eh, that sounds like numerology to me. Which is &quot;more fundamental&quot;, e or pi? Is the Feigenbaum constant important? Gamma? The golden ratio? Silver ratio?<br>
<p>
It&#x27;d also lay a blow to various theories of multiple universes which differ in the physical constants. Also, what is a &quot;fundamental constant&quot;? Is the radius of a proton a constant or a derived value? The size of a helium-4 nucleus? Ratio between the lepton sizes? Even physics is a *bit* arbitrary here.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847098/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor847100"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 23, 2021 1:19 UTC (Tue)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/847100/">Link</a>] (25 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Eh, that sounds like numerology to me. Which is &quot;more fundamental&quot;, e or pi? Is the Feigenbaum constant important? Gamma? The golden ratio? Silver ratio?</font><br>
<p>
Who said anything about fundamental? Both e and pi are mathematical constants, as is the golden ratio. They&#x27;re all of equal importance.<br>
<p>
Things like c, g, permittivity, that stuff, are all physical constants, which should be explainable in terms of maths.<br>
Cheers,<br>
Wol<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847100/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor847123"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 23, 2021 13:10 UTC (Tue)
                               by <b>mathstuf</b> (subscriber, #69389)
                              [<a href="/Articles/847123/">Link</a>] (7 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Things like c, g, permittivity, that stuff, are all physical constants, which should be explainable in terms of maths.</font><br>
<p>
Butâ€¦why? What is this assumption based upon? Is it a bit of Platonic idealism?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847123/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor847200"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 24, 2021 0:27 UTC (Wed)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/847200/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I don&#x27;t know why, I just remember coming across it somewhere that most of the physical constants could be defined in terms of other things, and the reason they had the values they did was because the maths didn&#x27;t make sense otherwise. <br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847200/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor847276"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 24, 2021 21:58 UTC (Wed)
                               by <b>mathstuf</b> (subscriber, #69389)
                              [<a href="/Articles/847276/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Sure, but (as stated elsewhere) your numerical values are limited to our arbitrarily defined units. A mole is a number of atoms of a substance in a number of grams equal to its molecular weight. A meter is basically an arbitrary nice length, Seconds are based on a breakdown of the rotational speed of Earth. Sure, we&#x27;ve rebased them onto more stable footing now, but the counts of those things into the units are &quot;arbitrary&quot; based on what we had before.<br>
<p>
If we wanted, we could say that the speed of light is pi/e Wol_lengths/Wol_time intervals. Doesn&#x27;t mean that those units are any more useful than our numerical value in m/s.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847276/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor847310"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 25, 2021 7:48 UTC (Thu)
                               by <b>jem</b> (subscriber, #24231)
                              [<a href="/Articles/847310/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
One fun fact about the base unit for mass, kg, is that it is derived (indirectly) from the size of the Earth. On a bigger Earth, we would have a different &quot;kilogram&quot;, with a bigger mass. (And I&#x27;m not talking about the gravitational force, which would increase even more, because of the bigger mass of both a kilogram and the Earth.)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847310/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor849541"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 16, 2021 21:09 UTC (Tue)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/849541/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Not any more it isn&#x27;t. In 2019 it was redefined in terms of the Planck constant -- though, of course, its *actual value* comes down to the original French Revolutionary definition: but even that was the mass of a cubic centimetre of water at the melting point of ice. This, of course, depends on atmospheric pressure (since they didn&#x27;t use the triple point), and thus indirectly on the mass of the Earth and a bunch of other contingent values -- but the current definition depends on no such things.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/849541/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor849563"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 17, 2021 10:37 UTC (Wed)
                               by <b>jem</b> (subscriber, #24231)
                              [<a href="/Articles/849563/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;Not any more it isn&#x27;t. In 2019 it was redefined in terms of the Planck constant</font><br>
<p>
Well, I said derived, not defined.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/849563/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor849692"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 18, 2021 10:14 UTC (Thu)
                               by <b>mgedmin</b> (subscriber, #34497)
                              [<a href="/Articles/849692/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; mass of a cubic centimetre of water</font><br>
<p>
a cubic *deci*meter (which is also one liter) of water.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/849692/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor849901"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 20, 2021 1:24 UTC (Sat)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/849901/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I changed that repeatedly before posting... and picked the wrong one, despite the metric system being the only system I actually know. Sigh.<br>
<p>
(And obviously you&#x27;re right, unless water has suddenly become much, much denser than lead :) )<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/849901/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor847164"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 23, 2021 15:24 UTC (Tue)
                               by <b>rschroev</b> (subscriber, #4164)
                              [<a href="/Articles/847164/">Link</a>] (16 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Ï€Â² m/sÂ² is an approximation for g, but only because of our definitions for the meter and the second, and because we happen to live on Earth. I really don&#x27;t see why there should be any connection between mathematical constants and the values of constants that govern physical phenomena. Mathematics is purer than that: it can with equal ease describe a universe with completely different constants or even different physical laws.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847164/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor847198"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 24, 2021 0:23 UTC (Wed)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/847198/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Are you confusing g and G, or am I?<br>
<p>
I think the equation is G=g.m1.m2/d^2<br>
<p>
G is 9.8m/s^2, while g is the gravitational constant, which is believed to be the same everywhere in the universe.<br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847198/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor847202"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 24, 2021 0:47 UTC (Wed)
                               by <b>rschroev</b> (subscriber, #4164)
                              [<a href="/Articles/847202/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
G is the gravitational constant (or indeed the universal gravitational constant), approximately 6.674Ã—10^âˆ’11 mÂ³/(kgâ‹…sÂ²).<br>
g is the gravity of earth, approximately 9.81 m/sÂ².<br>
The equation is F = Gâ‹…m1â‹…m2/rÂ². In case of Earth, that&#x27;s F = Gâ‹…mâ‹…m_earth/r_earthÂ², with g = Gâ‹…m_earth/r_earthÂ². So in that case we get F = mâ‹…g.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847202/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor847201"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 24, 2021 0:31 UTC (Wed)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/847201/">Link</a>] (11 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Mathematics is purer than that: it can with equal ease describe a universe with completely different constants or even different physical laws.</font><br>
<p>
It can *de*scribe it, yes. But I think you&#x27;ll find it also *pre*scribes it and says &quot;completely different constants and laws doesn&#x27;t make logical sense&quot;.<br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847201/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor847203"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 24, 2021 1:01 UTC (Wed)
                               by <b>rschroev</b> (subscriber, #4164)
                              [<a href="/Articles/847203/">Link</a>] (10 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I think you&#x27;re mistaken in this, but I would be happy to be proven wrong because that would lead to very interesting insights in physics and the relationship between physics and mathematics.<br>
<p>
BTW there&#x27;s a video of Richard Feyman&#x27;s lecture about that relationship here: <a href="https://youtu.be/obCjODeoLVw">https://youtu.be/obCjODeoLVw</a><br>
And some comments about it: <a href="https://medium.com/cantors-paradise/richard-feynman-on-the-differences-between-mathematics-and-physics-c0847e8a3d75">https://medium.com/cantors-paradise/richard-feynman-on-th...</a><br>
<p>
Interesting stuff, if you&#x27;re interested in that kind of stuff.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847203/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor847259"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 24, 2021 18:28 UTC (Wed)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/847259/">Link</a>] (9 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Whoops. I didn&#x27;t mean to say there aren&#x27;t other solutions for the equations. Just that the possible universes are seriously constrained by the maths.<br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847259/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor847275"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 24, 2021 21:54 UTC (Wed)
                               by <b>mathstuf</b> (subscriber, #69389)
                              [<a href="/Articles/847275/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
That we had such a firm grasp on physics at that level to tell a &quot;broken&quot; from a &quot;working&quot; universe given a set of &quot;knob settings&quot; is news to me. That we even know all of the relevant knobs is news even. I thought we were still at the &quot;we have a working universe on our handsâ€¦what makes it tick&quot; stage about the fundamentals. Do you have any journal papers about this you could cite?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847275/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor847283"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 24, 2021 23:22 UTC (Wed)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/847283/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
How many dimensions does the Universe have? We know it&#x27;s not three, Einstein proved that.<br>
<p>
We think it may be four - that&#x27;s what Einstein thought but that has a whole bunch of problems. If it *is* four, I believe that means string theory is correct as it&#x27;s the explanation for relativistic singularities.<br>
<p>
Or it could be ten or eleven. Anything betwen five and nine inclusive just doesn&#x27;t work because we get an explosion of infinities - infinity itself isn&#x27;t a problem, but there are different sorts of infinity and for reality to work they need to cancel out. For those dimensions they don&#x27;t. (These universes, if I remember correctly, define mass as the fifth dimension ...)<br>
<p>
(That&#x27;s why I was moaning about computers crashing when you divide by zero. If you declare zero and infinity as non-numbers for which arithmetic doesn&#x27;t work, you&#x27;re in trouble. If you say &quot;to make arithmetic work, they swap places on division&quot;, then you can do this sort of maths and come up with something that makes sense.)<br>
<p>
At the end of the day, we have loads of maths that describes what we see. And that *constrains* what is a plausible universe. We have a local maximum or minimum, don&#x27;t know which. By adjusting some values, we can force others to impossible values. Plausible universes must have all these values at maximum or minimum, not off the scale or impossible or at some non-equilibrium value.<br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847283/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor847287"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 24, 2021 23:36 UTC (Wed)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/847287/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Or it could be ten or eleven. Anything betwen five and nine inclusive just doesn&#x27;t work because we get an explosion of infinities - infinity itself isn&#x27;t a problem, but there are different sorts of infinity and for reality to work they need to cancel out. For those dimensions they don&#x27;t. (These universes, if I remember correctly, define mass as the fifth dimension ...)</font><br>
You can construct a universe with multiple time axes, with many more dimensions, and so on. The math will be internally consistent.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847287/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor847285"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 25, 2021 0:05 UTC (Thu)
                               by <b>nybble41</b> (subscriber, #55106)
                              [<a href="/Articles/847285/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; That&#x27;s why I was moaning about computers crashing when you divide by zero.</font><br>
<p>
To say that division by zero is undefined is mathematically correct and not just an arbitrary computer limitation. There is no proper answer to the question &quot;What number, when multiplied by zero, gives the non-zero product X?&quot;, at least not in any system that would uphold basic idioms such as the product of a number and its reciprocal being equal to one. &quot;Infinity&quot; times zero is not equal to any particular finite number X, so that isn&#x27;t a solution. Depending on the particular forms of the equations which gave rise to the infinity and the zero (or infinitesimal) the product could be another infinity or any real number; it depends on how you phrase the question. $\lim_{x \to 0+} x ln \frac{1}{x} = 0$, but $\lim_{x \to 0+} x \frac{1}{x} = 1$. In both cases you&#x27;re multiplying an infinitesimal ($\lim_{x \to 0+} x$) by an infinity ($\lim{x \to 0+} ln \frac{1}{x}$ or $\lim{x \to 0+} \frac{1}{x}$, respectively) but the specific form of the equation changes the result.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847285/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor847280"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 24, 2021 22:24 UTC (Wed)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/847280/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Not really. Math is just a language, it basically restricts nothing.<br>
<p>
If you want to read something mind-blowing, try the &quot;Clockwork Rocket&quot; series by Greg Egan. It&#x27;s accompanied by a thesis-sized exploration of its (fictional) physics: <a href="http://www.gregegan.net/ORTHOGONAL/ORTHOGONAL.html">http://www.gregegan.net/ORTHOGONAL/ORTHOGONAL.html</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847280/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor847284"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 24, 2021 23:26 UTC (Wed)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/847284/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Maths is just a language, true. But if we try to define a - six-dimensional universe, say - the maths just doesn&#x27;t add up. So yes the maths does restrict our universes - it says six dimensions just won&#x27;t work.<br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847284/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor847286"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 24, 2021 23:34 UTC (Wed)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/847286/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;  Maths is just a language, true. But if we try to define a - six-dimensional universe, say - the maths just doesn&#x27;t add up. So yes the maths does restrict our universes - it says six dimensions just won&#x27;t work.</font><br>
Who told you that? A six-dimensional classic (Newtonian) universe works just fine. Sure, you won&#x27;t have stable orbits but apart from that it&#x27;s OK.<br>
<p>
You can also construct a quantum field theory for such a universe, it also would work just fine. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847286/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor847391"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 25, 2021 15:16 UTC (Thu)
                               by <b>mathstuf</b> (subscriber, #69389)
                              [<a href="/Articles/847391/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I think you&#x27;re confusing the physics of our universe versus those of any possible universe. Sure, *ours* might not make sense with 5-9 dimensions, but that makes no conclusion about *any possible universe* having such a number of dimensions. Maybe you&#x27;re just being imprecise with your language in places?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847391/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor848674"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 8, 2021 14:59 UTC (Mon)
                               by <b>LtWorf</b> (subscriber, #124958)
                              [<a href="/Articles/848674/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I think you are very confused about the dimensions thing in physics.<br>
<p>
Physics tries to model measurements.<br>
<p>
So for example you measure a planet that is orbiting, make an equation, and see if tomorrow the equation and the position are the same (within a certain range of precision).<br>
<p>
Before Galileo saw that Jupiter had satellites, they had perfectly fine equations that predicted where everything would be in the sky. The problem arose because new data could not fit the model.<br>
<p>
You can absolutely model an orbit of a planet using 3 dimensions, or you can model it in an higher space with an equation of a lower degree. Both work. We can&#x27;t really know which is &quot;exact&quot; if both work.<br>
<p>
You can keep adding dimensions and make equations that work, but we don&#x27;t really know what the &quot;truth&quot; is.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/848674/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor847205"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 24, 2021 1:24 UTC (Wed)
                               by <b>SiB</b> (subscriber, #4048)
                              [<a href="/Articles/847205/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The earliest definition of a meter is the length of a seconds pendulum.  By that definition, g=Ï€Â² m/sÂ² exactly.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847205/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor847211"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 24, 2021 8:53 UTC (Wed)
                               by <b>mpr22</b> (subscriber, #60784)
                              [<a href="/Articles/847211/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Jean Picard&#x27;s proposed toise universelle was twice the length of a seconds pendulum. Unfortunately, if you set up a seconds pendulum in (say) Cayenne, French Guiana, you would find that it was 0.3% longer than one set up in the Paris Observatory, because the acceleration due to gravity at sea level varies with a number of factors including latitude.<br>
<p>
The first formally adopted definition for the metre itself, proposed in 1791 by the French Academy of Sciences and adopted in 1793 by the National Assembly, was one ten-millionth of the distance from the North Pole to the Equator along the Paris meridian.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847211/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor847096"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 23, 2021 1:06 UTC (Tue)
                               by <b>mpr22</b> (subscriber, #60784)
                              [<a href="/Articles/847096/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It is not possible to calculate the speed of light by pure logic, because the numerical value of the speed of light is a consequence of your units of measurement.<br>
<p>
There is one particular physical constant, Âµ_0 (the permeability of free space) which was historically defined (as a consequence of the relationship between electrical current and induced magnetic fields) as exactly 4Ï€ Ã— 10^-7 H/m ... but that value is no longer strictly valid (although it&#x27;s close enough for the vast majority of practical purposes), because the ampere has been redefined in terms of the elementary charge and the second.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847096/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor847199"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 24, 2021 1:00 UTC (Wed)
                               by <b>SiB</b> (subscriber, #4048)
                              [<a href="/Articles/847199/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Physical constants that carry units do not carry any physics.  The universe does not care about the value of the speed of light.<br>
<p>
Some years ago in our coffee room at the institute there was a discussion about the possibility that the fine-structure constant Î± may not have been constant in the past after all.  The question was raised, which of the constituents of Î±=eÂ²/(4Ï€Îµâ‚€Ä§c) may be the reason.  Well, the answer is e, if at all.    Î± is a constant without units.  It is pure physics.  It defines the strength of electromagnetic interactions.  The universe cares a lot about the value of the fine-structure constant Î±.  In our experimental units it is the charge of the electron e that represents that strength, but in the end, it also just defines units of measure.<br>
<p>
Theoretical physics defines the units differently than experimental physics.  They mostly use c=4Ï€Îµâ‚€=Ä§=k=1.  Everything is measured in eV or eVÂ¯Â¹.<br>
<p>
From a theoretical point I am a bit unhappy about the new definition of the SI units.  They fixed the value of e, although it indirectly represents a quantity the universe cares about.  The cost is that Âµâ‚€ and Îµâ‚€ are now _not_ fixed by definition in the SI, as they were before, like Wol said.<br>
<p>
Ideally, all units were defined by fixing the value of some fundamental constant.  We are now almost there.  The second is still defined by an artifact.  At least it is an atom, so it can be reproduced everywhere in the universe.  To fix that we need to fix the gravitational constant. But metrology defines units by what they can measure with the best precision.  The gravitational constant does not apply, it has to catch up at least eight orders of magnitude in precision.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847199/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor847204"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 24, 2021 1:16 UTC (Wed)
                               by <b>SiB</b> (subscriber, #4048)
                              [<a href="/Articles/847204/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
s/Wol/mpr22/<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847204/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor847298"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 25, 2021 3:46 UTC (Thu)
                               by <b>NYKevin</b> (subscriber, #129325)
                              [<a href="/Articles/847298/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Physical constants that carry units do not carry any physics. The universe does not care about the value of the speed of light.</font><br>
<p>
The universe may not care about the speed of light, but the stuff in the universe surely does. To borrow from your &quot;theoretical physics normalizes everything to 1&quot; example, the mass of the proton is much, much (numerically) smaller than the charge of the proton, and surely there&#x27;s some physical significance of that? Or, alternatively, we can say that there&#x27;s nothing wrong with the proton, and instead it&#x27;s gravity which is too weak, but that&#x27;s just reframing the same question in different units. I&#x27;m not sure you can ask that question without using units at all.<br>
<p>
Ultimately, I suppose the &quot;proper&quot; framing of this question is some nonsensically complicated question about why the relevant quantum fields happen to interfere in exactly the way that they do to give the proton the properties that it has. But you can&#x27;t even ask that question until you know what gravity is, at a quantum level, and to the best of my knowledge, nobody does.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847298/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor847299"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 25, 2021 4:35 UTC (Thu)
                               by <b>NYKevin</b> (subscriber, #129325)
                              [<a href="/Articles/847299/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Another way of thinking about it: The one-way speed of light is operationally ill-defined.<br>
<p>
Ultimately, science is about predicting the outcomes of experiments and observations. If you can&#x27;t observe it, directly or indirectly, it is beyond the realm of scientific inquiry. The one-way speed of light falls into this hole. Speed is normally defined as distance divided by time, but when we&#x27;re talking about relativistic speeds, we need to be clear about which time we mean.<br>
<p>
So, let&#x27;s imagine a specific setup. We&#x27;ll send a pulse of light from point A to point B. So, what is the one-way velocity of the light? It is the distance between A and B, divided by the time it takes for the signal to arrive. But whose time?<br>
<p>
It turns out that, not only is there no reasonable way for the scientists at A and B to communicate the fact that the pulse has arrived (short of sending a second pulse and thereby measuring the round-trip time instead), it is actually not meaningful for an event at A and an event at B to happen &quot;simultaneously.&quot; There will always be an observer who thinks that A&#x27;s event happened first, and an observer who thinks that B&#x27;s event happened first, unless the events are in each others&#x27; light cones, in which case everyone will agree that one comes before the other. But you can&#x27;t get everyone to agree that both events happen simultaneously.<br>
<p>
This creates a problem, because no matter where you put the clock, it has to be synchronized with respect to two distant events:<br>
<p>
1. The pulse being sent from A.<br>
2. The pulse arriving at B.<br>
<p>
You cannot synchronize a clock with respect to an event unless the clock is physically present at that event, because simultaneity is otherwise relative to one&#x27;s choice of reference frame. So the clock has to be at both A and B. You could imagine two clocks, synchronized with each other, but then you have to decide what you mean by &quot;synchronized,&quot; because simultaneity is still relative. There is always a reference frame in which the clocks are not synchronized.<br>
<p>
If the pulse were traveling slower than light, then you could move the clock with the pulse. This would give you a metric called the &quot;proper time,&quot; and that actually does have some useful properties in this context. In particular, it is independent of reference frame or choice of coordinates, so that the one-way velocity of any slower-than-light object is perfectly well-defined and even measurable. But you can&#x27;t do that with a pulse of light, because the pulse is traveling at the speed of light, and the clock can&#x27;t go that fast if it has any mass. If the clock doesn&#x27;t have any mass, then it cannot function as a clock in the first place, because massless particles do not experience the passage of time.<br>
<p>
As a result, there is no operational definition of the one-way speed of light that is compatible with the laws of physics. This is why Einstein, for example, describes it as a &quot;convention&quot; in his special relativity paper, rather than asserting it as fact. It&#x27;s not fact, it&#x27;s just a convenient way of labeling the diagram.<br>
<p>
Having said all that, there is one thing we can experimentally verify (and have done so): The time it takes for light to travel along a closed inertial path of length L is L/c, as measured at the start/endpoint of the path, regardless of what the path looks like or how it is shaped. So, if there are any variations in the one-way speed of light that depend on angle, they *always* cancel each other out. As a result, if you simply assume that the one-way speed of light is a constant, then you can use that assumption to &quot;synchronize&quot; distant clocks by sending light pulses between them and adjusting for the speed of light delay. Although this &quot;synchronization&quot; is ultimately just a convention, it behaves a lot like you would expect &quot;true&quot; synchronization to behave (at least with respect to the clocks&#x27; reference frames, anyway). Einstein describes how this works in his paper, and others have elaborated on the details (in short, the clocks should be in inertial reference frames and not in relative motion).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847299/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor847470"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 25, 2021 22:39 UTC (Thu)
                               by <b>apoelstra</b> (subscriber, #75205)
                              [<a href="/Articles/847470/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; So the clock has to be at both A and B.</font><br>
<p>
Could you entangle two clocks?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847470/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor847471"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 25, 2021 22:47 UTC (Thu)
                               by <b>mathstuf</b> (subscriber, #69389)
                              [<a href="/Articles/847471/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
You could, but you wouldn&#x27;t know if they disentangled in the meantime without communicating. Entanglement still doesn&#x27;t allow information to travel faster than light. Part of the problem is that if they&#x27;re at the same place to sync with each other, to then be at A and B they&#x27;ll need to travel outside of an intertial reference frame causing time dilation for them.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847471/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor847474"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Axioms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 25, 2021 22:56 UTC (Thu)
                               by <b>apoelstra</b> (subscriber, #75205)
                              [<a href="/Articles/847474/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Ah, ok, I see. To make meaningful use of the entanglement you&#x27;d have to bring the clocks back together (or communicate between them, but that&#x27;s essentially the same -- there is frame-switching no matter what). But this is exactly the setting of the twin paradox [1] which is a more well-known example of trying to equivocate between events in distinct frames.<br>
<p>
[1] <a href="https://en.wikipedia.org/wiki/Twin_paradox">https://en.wikipedia.org/wiki/Twin_paradox</a><br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847474/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor846854"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 20, 2021 4:04 UTC (Sat)
                               by <b>itsmycpu</b> (guest, #139639)
                              [<a href="/Articles/846854/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Practically it means that if (step1) the first thread updates data, and then (step2) does a store-release of a value that indicates that the data was written, and then (step3) the second thread does a load-acquire of that value, it will (step4) see all the updates that the first thread has done before step2.<br>
<p>
As long as the value read in step3 is the value written in step2 (or a value written after that). Because then you know that step3 &gt; step2, and because of that, step4 &gt; step1.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846854/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846861"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 20, 2021 6:15 UTC (Sat)
                               by <b>itsmycpu</b> (guest, #139639)
                              [<a href="/Articles/846861/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;Practically it means that if (step1) the first thread updates data, and then (step2) does a store-release of a value that indicates that the data was written, and then (step3) the second thread does a load-acquire of that value, it will (step4) see all the updates that the first thread has done before step2.</font><br>
<font class="QuotedText">&gt;</font><br>
<font class="QuotedText">&gt; As long as the value read in step3 is the value written in step2 (or a value written after that). Because then you know that step3 &gt; step2, and because of that, step4 &gt; step1.</font><br>
<p>
To clarify the not-so-obvious part:<br>
<p>
From the point of view of the first thread, step2  &gt; step1 is always true, but without using acquire/release, this doesn&#x27;t transfer to the second thread. Without that, the second thread may not see step4 &gt; step1.<br>
<p>
Why not? For example, the compiler is allowed to produce code for step2 that affects memory before step1, as long as that doesn&#x27;t change the outcome of the first thread&#x27;s local computations. The compiler does not have to consider the possible side effect on the second thread, which therefore might see the memory affected by step2 before it is affected by step1.<br>
<p>
Only the use of acquire/release requires the compiler to produce code where the update of step1 is written to memory, and therefore visible to other threads, before step2. (Memory or shared cache). So without that, the second thread cannot assume step4 &gt; step1, even if it thinks it can assume step3 &gt; step2.<br>
<p>
I think this is the same thing as the article says, just highlighting the practical aspects.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846861/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846869"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 20, 2021 7:24 UTC (Sat)
                               by <b>pbonzini</b> (subscriber, #60935)
                              [<a href="/Articles/846869/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Yes, it&#x27;s exactly the last ASCII art graph. Thanks for explaining it in words; even if a picture is worth a thousand words, sometimes writing them down still helps!<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846869/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846876"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 20, 2021 9:47 UTC (Sat)
                               by <b>pebolle</b> (guest, #35204)
                              [<a href="/Articles/846876/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Thanks for explaining it in words</font><br>
<p>
And that goes for everyone taking time to answering my grumpy questions.<br>
<p>
When you&#x27;re not versed in the vocabulary and habits of a certain field it is very to hard determine whether you&#x27;re reading something profound, something trivial or just plain nonsense. (I&#x27;ve just finished a book of nearly 300 pages explaining that even physicists can be happily employed while apparently only producing hot air.)<br>
<p>
I&#x27;ll restart the article and hope that I won&#x27;t get stuck on one of my many, many pet peeves again.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846876/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor878235"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 10, 2021 9:48 UTC (Fri)
                               by <b>Lurchi</b> (guest, #38509)
                              [<a href="/Articles/878235/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <pre>
    a.x = 1;                            datum = message;
       |                                    |
       |   happens before                   |
       v                                    v
    message = &amp;a;                       datum-&gt;x
</pre>

I think the left "happens before" arrow should not be there (the right one of course is correct, due to the data dependency).




      
          <div class="CommentReplyButton">
            <form action="/Articles/878235/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor846851"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 20, 2021 3:47 UTC (Sat)
                               by <b>kurogane</b> (subscriber, #83248)
                              [<a href="/Articles/846851/">Link</a>] (9 responses)
      </p>
      
      </div>
      </summary>
      <p>I'm afraid I keep on interpreting the message example as being code that will only read datum-&gt;x once x was already assigned. 

<pre>
    thread 1                            thread 2
    --------------------------------    ------------------------
    a.x = 1;
    message = &a;                       datum = message;
                                        if (datum != NULL)
                                          printk("%d\n", datum-&gt;x);
</pre>

That is that thread 2 will do nothing if "message" and hence "datum" pointer is still null, or receive a pointer to "a" after it already has its x member assigned.</p>

<p>Is the point that thread 2 was supposed to printk(), i.e. wait until datum is non-null? When I first saw this code it seemed natural to me that thread 2 was meant to be a 'just do nothing if object was not ready' thread though.</p>

<p>Or is the point there might be reordering, that CPU instruction-wise the stores and loads might not be not ordered as the C code above is?</p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/846851/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846863"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 20, 2021 7:17 UTC (Sat)
                               by <b>pbonzini</b> (subscriber, #60935)
                              [<a href="/Articles/846863/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Yes, the point is that there might be reordering unless the store and load have release and acquire semantics respectively.<br>
<p>
 In theory the reordering could be on both sides, in practice (except on the Alpha) only the release side might be assigning a.x after message. Even on non-Alpha processors you need to inform the compiler not to do any reordering.<br>
<p>
However you could have for example &quot;ready=1&quot; on the producer side and &quot;if (ready) printk(&quot;%x&quot;, a.x)&quot; on the consumer side. In that case both sides need to be protected against reordering at the processor level (in addition to the compiler level).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846863/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846871"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 20, 2021 8:58 UTC (Sat)
                               by <b>kurogane</b> (subscriber, #83248)
                              [<a href="/Articles/846871/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <p>Thanks Paolo. If the processor instructions don't necessarily follow the higher-level language flow shown in the example, then it I get it I believe. Well, could you confim?</p>

<p>The instruction flow in the processor could end up like the below, as the C programmer mentally pictures it?</p>

<pre>
    thread 1                            thread 2
    --------------------------------    ------------------------
    message = &a;                       ...
                                        ...
    a.x = 1;                            ...
</pre>
<p>(Focusing just on thread 1 as that is the more likely jeopardy-maker.)</p>

<p>I think I finally understand what memory barriers are - temporal ones, not spatial.</p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/846871/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846875"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 20, 2021 9:13 UTC (Sat)
                               by <b>pbonzini</b> (subscriber, #60935)
                              [<a href="/Articles/846875/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Yes, exactly.<br>
<p>
On one hand it may not happen on all processors, and details may vary depending on the microarchitecture. On x86 that reordering cannot happen, on ARM and PowerPC it might.<br>
<p>
But on the other hand the compiler might always be reordering stuff behind your back. The big insight of the C++ committee was that the same abstraction could cover both processor-level and compiler-level reorderings.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846875/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846877"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 20, 2021 11:04 UTC (Sat)
                               by <b>kurogane</b> (subscriber, #83248)
                              [<a href="/Articles/846877/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
(thumbs-up sign)<br>
<p>
I appreciated this confirmation very much.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846877/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846911"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 20, 2021 20:31 UTC (Sat)
                               by <b>danobi</b> (subscriber, #102249)
                              [<a href="/Articles/846911/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Thanks for asking -- had the same questions myself.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846911/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor846953"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 21, 2021 19:13 UTC (Sun)
                               by <b>khim</b> (subscriber, #9252)
                              [<a href="/Articles/846953/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <font class="QuotedText">&gt; On x86 that reordering cannot happen, on ARM and PowerPC it might.</font>

<p>Tiny correction: on x86 it <a href="https://preshing.com/20120515/memory-reordering-caught-in-the-act/">can and will happen</a>. You need memory barriers there, too.

<p>After reading the aforementioned article I was confused for some time: memory barriers arrived on x86 with SSEâ€¦ yet SMP was supported for more than decade by that time! Some investigation showed that any instruction with <code>lock</code> prefix acts as a memory barrier on x86. But if there are not memory barriers <b>at all</b>â€¦ yes, it does happen on x86, too.
      
          <div class="CommentReplyButton">
            <form action="/Articles/846953/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846954"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 21, 2021 19:16 UTC (Sun)
                               by <b>khim</b> (subscriber, #9252)
                              [<a href="/Articles/846954/">Link</a>] 
      </p>
      
      </div>
      </summary>
      After looking on that article again I have realized that Jeff added addendum to the end which reveals all the gory details about <code>lock</code> and <code>xchg</code>. So there are no mystery anymoreâ€¦
      
          <div class="CommentReplyButton">
            <form action="/Articles/846954/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor846957"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 21, 2021 20:51 UTC (Sun)
                               by <b>pbonzini</b> (subscriber, #60935)
                              [<a href="/Articles/846957/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It can&#x27;t happen until part 3. :) This article and the next one are only concerned with load-load and store-store reordering, which are not possible on x86.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846957/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor849932"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 20, 2021 19:18 UTC (Sat)
                               by <b>guzh</b> (subscriber, #140551)
                              [<a href="/Articles/849932/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Can we say that, in this case, the &quot;happens before&quot; effect is just a result of the fact that reordering is disallowed?<br>
And only if the load *actually* happens after the store, we can say &quot;a.x = 1&quot; happens before &quot;datum-&gt;x&quot;.<br>
(If thread 2 runs really fast and completes before thead 1 starts, it sure won&#x27;t get the proper value in x.)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/849932/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor846933"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 21, 2021 12:38 UTC (Sun)
                               by <b>ale2018</b> (guest, #128727)
                              [<a href="/Articles/846933/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; thread 2 will read either NULL or &amp;a,</font><br>
<p>
If pointers are 64 bit, does that statement imply that the cache is being updated by minimal chunks of that size?  I mean, why cannot it read the lower part of &amp;a?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846933/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846937"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 21, 2021 12:53 UTC (Sun)
                               by <b>pbonzini</b> (subscriber, #60935)
                              [<a href="/Articles/846937/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Generally it&#x27;s up to the architecture to define the largest size that can be stored atomically. It&#x27;s almost always (on a modern 32-bit or 64-bit processor) at least the size of a pointer.<br>
<p>
The processor itself will load data from memory in cache lines that will usually be 32, 64 or 128 *bytes* long.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846937/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor846952"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 21, 2021 18:50 UTC (Sun)
                               by <b>andresfreund</b> (subscriber, #69562)
                              [<a href="/Articles/846952/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
For me the most confusing part of memory-barriers.txt is that initially it sounds a lot like smp_rmb() + smp_wmb() would equal smp_mb(). Which isn&#x27;t the case! Hope one of your next issues explains that in a more approachable way. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846952/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846958"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 21, 2021 20:52 UTC (Sun)
                               by <b>pbonzini</b> (subscriber, #60935)
                              [<a href="/Articles/846958/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Looks like you want to read part 3 indeed! :)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846958/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846963"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 21, 2021 22:29 UTC (Sun)
                               by <b>andresfreund</b> (subscriber, #69562)
                              [<a href="/Articles/846963/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Awesome, looking forward to it.<br>
<p>
I don&#x27;t know how many times I&#x27;ve now spent several hours staring at the read barrier + write barrier != full barrier thing swapping it back into my brain. And how often I couldn&#x27;t find anything good to tell people to read.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846963/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor847432"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 25, 2021 18:25 UTC (Thu)
                               by <b>Alan.Stern</b> (subscriber, #12437)
                              [<a href="/Articles/847432/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Here&#x27;s one way to think about it:  A read barrier will order two reads with respect to each other, and a write barrier will order two writes.  But not even the combination of a read barrier plus a write barrier will order a write with respect to a read.  A full barrier, on the other hand, will.<br>
<p>
Example:  Suppose the source code says:<br>
<p>
   write(x)<br>
   wmb()<br>
   rmb()<br>
   read(y)<br>
<p>
Then the CPU has to execute the write before the wmb, and it has to execute the read after the rmb.  But (depending on the architecture) nothing prevents it from reordering the operations to:<br>
<p>
   rmb()<br>
   read(y)<br>
   write(x)<br>
   wmb()<br>
<p>
(In fact this actually happens on x86, where rmb and wmb are both no-ops and reads can be executed before earlier writes.)<br>
<p>
However, with a full barrier:<br>
<p>
   write(x)<br>
   mb()<br>
   read(y)<br>
<p>
no reordering is possible, and the write *must* be executed before the read.<br>
There are other ways in which a full barrier is stronger than the combination of a read barrier plus a write barrier -- but at least this gets the point across.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847432/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor846956"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 21, 2021 21:10 UTC (Sun)
                               by <b>thoughtpolice</b> (subscriber, #87455)
                              [<a href="/Articles/846956/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      Using Lamport's approach when reasoning about concurrency is very powerful. It's much more rigorous and applicable than you might expect, and it can explain many behaviors easily at a glance that you might struggle over. For instance, in a lockless memory allocator, you need to grab a pointer from a freelist head and claim it for the caller (in the implementation of <code>alloc</code>), and then you need to update the freelist pointer to point to the next free block before you're done (very simplified).<br/><br/>

Therefore the allocation is split into two distinct actions. The system however, may preempt your thread after a block is claimed, but before the freelist head is updated. Then another thread could also allocate and erroneously pull the same block, which can't be allowed.<br/><br/>

The traditional, simplistic solution to this is to pack a counter value together with every freelist address. When you perform any operation on the freelist, including claiming blocks or updating pointers, you use a CAS2 operation ("Compare-and-swap, for two words of memory") to both update a value, <i>and also increment the counter by one</i> next to it. You can then check the counter value against a known value, to check preemption. If the counter value is <code>g</code> at the beginning and no thread interrupted you, then the result you get back at the end of everything, when you read the counter, should be <code>g+1</code>, i.e. no other threads performed any actions between your own, and so what you did was seen as atomic. If it's any other value, you've been preempted, the address you have in your hand is claimed by someone else, and you must start over.<br/><br/>

But this can all be stated another way: every object needs a lamport counter associated with it. By examining the counter, you can determine if you are responsible for a casual action identified by the counter <code>n</code>, as well as <code>n+1</code>. If you are in fact responsible for both of these actions, then <code>n</code> by definition occurred before <code>n+1</code>, and thus no other threads were able to see the indeterminate state of the object. In this way, a Lamport counter is a kind of concrete algorithm for ensuring atomic broadcast amongst threads.<br/><br/>

Frankly I consider "Time, Clocks, and Ordering of Events in a Distributed System" is a mandatory text for any modern software engineer. Actually, practically every text written by Lamport is extremely important to read...
      
          <div class="CommentReplyButton">
            <form action="/Articles/846956/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor847491"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 26, 2021 0:37 UTC (Fri)
                               by <b>jschrod</b> (subscriber, #1646)
                              [<a href="/Articles/847491/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Actually, practically every text written by Lamport is extremely important to read...</font><br>
<p>
Yes, and that&#x27;s why the book &quot;Concurrency: the Works of Leslie Lamport&quot; was published by ACM in October 2019. <a href="https://dl.acm.org/doi/book/10.1145/3335772">https://dl.acm.org/doi/book/10.1145/3335772</a><br>
Really worth to read.<br>
<p>
There are very few computer scientists who are as important, where ACM published such a book. That said, I&#x27;m still waiting on the book &quot;the works of Don Knuth&quot; that goes beyond his work on TACP and TeX and also values his introduction of attribute grammars and loads of other principles. His recent opinion peace <a href="https://dl.acm.org/doi/10.1145/3442377">https://dl.acm.org/doi/10.1145/3442377</a> in CACM about the way computing history should be researched is also worth a read, even and especially if one doesn&#x27;t agree with his approach.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/847491/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor848008"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 3, 2021 6:46 UTC (Wed)
                               by <b>comicfans</b> (subscriber, #117233)
                              [<a href="/Articles/848008/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Great article, before reading this (and the reference) I&#x27;m always confused by term &#x27;release&#x27; / &#x27;acquire&#x27; <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/848008/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor848137"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 3, 2021 22:57 UTC (Wed)
                               by <b>prauld</b> (subscriber, #39414)
                              [<a href="/Articles/848137/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Very nice Paolo!  I&#x27;m looking forward to the rest.  I spent a lot of time with that paper when doing my dissertation. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/848137/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor848597"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 7, 2021 14:58 UTC (Sun)
                               by <b>jcm</b> (subscriber, #18262)
                              [<a href="/Articles/848597/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
This is good related read: <a href="https://www.morganclaypool.com/doi/10.2200/S00962ED2V01Y201910CAC049">https://www.morganclaypool.com/doi/10.2200/S00962ED2V01Y2...</a> (A Primer on Memory Consistency and Cache Coherency, Second Edition, currently free to download I believe)<br>
<p>
I would also personally encourage readers to look elsewhere than the x86 QPI/UPI and HT stuff and toward an openly documented protocol with public documentation of its implementation. The Arm AMBA specs are available, as is their implementation in the Coherent Mesh Network CMN IP. Far more useful than the Intel/AMD alternatives.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/848597/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor848598"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 7, 2021 14:59 UTC (Sun)
                               by <b>jcm</b> (subscriber, #18262)
                              [<a href="/Articles/848598/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
And CCIX is based on AMBA CHI in some respects. That protocol is also available for casual reading.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/848598/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor848599"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 7, 2021 15:16 UTC (Sun)
                               by <b>jcm</b> (subscriber, #18262)
                              [<a href="/Articles/848599/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Two other observations (pun intended):<br>
<p>
1. Happens before can be thought of as &quot;if it happens&quot;. When there are two threads sharing a variable, and there is order through barriers or acquire/release, you&#x27;re still checking the value of the shared variable. No thread waits for another, it&#x27;s just that *if* you see an update to the shared variable, you&#x27;re guaranteed that you also see all that came before. This article is quite good at pointing that out, but many others don&#x27;t really highlight this part.<br>
<p>
2. The difference between the smp_store_release/smp_load_acquire and the WRITE_ONCE/READ_ONCE with barriers is that the latter uses &quot;full&quot; barriers while the former can be thought of as using &quot;half&quot; barriers that only order in one direction for each half of the acquire/release pair, which allows certain other unrelated loads and stores to pass into/out of the critical section doing the shared variable update.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/848599/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor850458"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 25, 2021 12:22 UTC (Thu)
                               by <b>naveenmv7</b> (guest, #141627)
                              [<a href="/Articles/850458/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
&quot;Note that data is flowing from one thread to the other with no lock involved&quot;<br>
<p>
Why is this true? Can&#x27;t pthread_join be implemented using semaphores internally?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/850458/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor851776"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 6, 2021 15:56 UTC (Tue)
                               by <b>pbonzini</b> (subscriber, #60935)
                              [<a href="/Articles/851776/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The internal implementation is irrelevant. From the point of view of the programmer there is no lock, and yet things work because of the way entering the thread synchronizes with pthread_create, and exiting the thread synchronizes with pthread_join.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/851776/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor910770"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">An introduction to lockless algorithms</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 11, 2022 4:50 UTC (Tue)
                               by <b>dafnaf</b> (subscriber, #158251)
                              [<a href="/Articles/910770/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I didn't understand the second example with the smp_r/wmb. Can't there be a case that  'thread 2' starts and finishes before 'thread 1' ? or the case where 'thread 1' only do "a.x=1" and then 'thread 2' executes until the end?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/910770/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2021, Eklektix, Inc.<BR>
            
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
