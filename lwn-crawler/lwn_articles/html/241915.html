        <!DOCTYPE html>
        <html lang="en">
        <head><title>Merged for 2.6.23 [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/241915/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/241465/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/241915/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>Merged for 2.6.23</h1>
<div class="Byline">[Posted July 18, 2007 by corbet]
               <p>
               </div>
</div>
<div class="ArticleText">
Some 2600 changesets have been merged into the mainline kernel
repository since <a href="http://lwn.net/Articles/241311/">last week's
summary</a>.  The shape of 2.6.23 is now becoming clearer; this kernel will
include:
<p>

<ul>
<li> New drivers for Dallas DS1682 elapsed time recorder chips, PMC-Sierra
     MSP71xx i2c controllers, Renesas M66592 USB peripheral controllers,
     Renesas R8A66597 USB host controllers, OTi-6858 USB-to-RS232 bridge
     controllers, Samsung S3C24xx SoC USB device controllers, Intel iop32x,
     iop33x, and iop13xx DMA engines, Xilinx SystemACE compact flash
     interfaces, BCM1250 dual UART devices, OMAP24xx multichannel SPI
     controllers, Atmel AVR32 AT32AP700x real-time clocks, ST M41T80 and ST
     M48T59 real-time clocks, Dallas DS1216 real-time clocks, TI OMAP
     framebuffers, display controllers, and LCD controllers (along with a
     support for a number of panels), Atmel AT32AP700X watchdog devices,
     IBM z/VM virtual card readers and punches, Afatech AF9005
     demodulators.
<p>
<li> After years of work, the core Xen i386 implementation has been
     merged.  Xen is finally a part of the mainline kernel.  (Anybody who
     is tempted to believe that predictions found in LWN are worth anything
     may be amused by <a
     href="http://kernelslacker.livejournal.com/87437.html">Dave Jones
     poking fun</a> at a suggestion, published in 2004, that Xen could be
     merged sometime soon).
<p>
<li> The <a href="http://lwn.net/Articles/240571/"><tt>fallocate()</tt></a>
     system call has been merged, but without the deallocation options.
<p>
<li> The developmental ext4 filesystem has gained a number of new features,
     including <tt>fallocate()</tt> support, nanosecond timestamps, and
     support for directories containing more than 65,000 other directories.

<p>
<li> The new "macvlan" driver allows the system administrator to create
     virtual interfaces mapped to and from specific MAC addresses.
<p>
<li> A number of virtual drivers for Sun logical domains (on the SPARC64
     architecture) have been added.  LDOM CPU hotplug support has also been
     added. 
<p>
<li> The bsg code - a new generic SCSI device driver based on the block
     layer - has been merged.
<p>
<li> IPV4 multipath cached routing support has been dropped; this code
     never did work very well, and never got out of the experimental
     state. 
<p>
<li> Basic, experimental support for PPP over L2TP sockets has been added.
<p>
<li> A device model extension (marked experimental) can export a laptop's
     desktop management information (DMI) data through sysfs.  This will
     allow distributors to load just the drivers needed for a specific
     laptop instead of the "load them all and let the hardware sort them
     out" technique which is often used now.
<p>
<li> The highly experimental "USB persist" feature attempts to maintain the
     state of USB devices when they lose power.  The driving motivation
     between this patch is to be able to suspend a system containing
     filesystems on USB storage and still have those filesystems mounted
     and working at resume time.
<p>
<li> As scheduled, the speedstep-centrino CPU governor has been removed in
     favor of the acpi-cpufreq code.
<p>
<li> The XFS filesystem now has a "stream of files" concept which allows it
     to place related files (a series of frames in a video stream, for
     example) contiguously on disk.
<p>
<li> The AFS filesystem now has file locking support.
<p>
<li> The raw block driver has been un-deprecated since it appears it will
     not be going away anytime soon.
<p>
<li> The <a href="http://lwn.net/Articles/236843/"><tt>O_CLOEXEC</tt></a>
     open flag has been added.
<p>
<li> There is a new <tt>clone()</tt> flag - <tt>CLONE_NEWUSER</tt> - which
     creates a new user namespace for the process; it is intended for use
     with container systems.
<p>
<li> The long-debated <a href="http://lwn.net/Articles/224829/">memory
     fragmentation avoidance</a> patches have been merged at last; the
     associated <a href="http://lwn.net/Articles/211505/">lumpy reclaim</a>
     code has been merged as well.
<p>
<li> The kernel virtual machine (KVM) code can now support SMP guests.

</ul>
<p>


Changes visible to kernel developers include:
<p>

<ul>

<li> Much of the x86 startup code has been rewritten in C.  There should be
     little in the way of changes for anybody who does not actually get
     into the code, but, for those folks, the new version should be much
     easier to work with.
<p>
<li> There is a new rtnetlink API for managing software network devices.
<p>
<li> The networking core can now work with devices which have more than one
     transmit queue.  This is a feature which was needed to properly
     support some wireless devices.
<p>
<li> The sysfs core has been significantly rewritten to weaken the
     connection between sysfs entries and internal kobjects.  The new code
     should make life easier for driver writers who will have fewer object
     lifecycle issues to worry about.
<p>
<li> The never-used <tt>enable_wake()</tt> PCI driver method has been
     removed.
<p>
<li> Drivers wanting to get the revision ID from the PCI config space
     should now just use the value found in the new <tt>revision</tt>
     member of the <tt>pci_dev</tt> structure.  All in-tree drivers have
     been changed to use this new approach.
<p>
<li> The SCSI layer has picked up a couple of scatter/gather accessor
     functions - <tt>scsi_dma_map()</tt> and <tt>scsi_dma_unmap()</tt> - in
     preparation for chained scatter/gather lists and bidirectional
     requests.  Most drivers in the kernel have been updated to use these
     functions. 
<p>
<li> The idr code has a couple of new helper functions:
     <tt>idr_for_each()</tt> and <tt>idr_remove_all()</tt>.
<p>
<li> Much of the kernel build system has been converted over to
     "menuconfig" objects, making it easy to turn whole groups of options
     on or off at once.
<p>
<li> <tt>sys_ioctl()</tt> is no longer exported to modules.
<p>
<li> The page table helper functions <tt>ptep_establish()</tt>,
     <tt>ptep_test_and_clear_dirty()</tt> 
     and <tt>ptep_clear_flush_dirty()</tt> have been removed - they had no
     in-kernel users.
<p>
<li> Kernel threads are non-freezable by default; any kernel thread which
     should be frozen for a suspend-to-disk operation must now call
     <tt>set_freezable()</tt> to arrange for that to happen.
<p>
<li> The SLUB allocator is now the default.
<p>
<li> The new function <tt>is_owner_or_cap(inode)</tt> tests for access
     permission based on the current fsuid and capabilities; it replaces
     the open-coded test previously found in several filesystems.
<p>
<li> There is a new utility function:
<pre>
    char *kstrndup(const char *s, size_t max, gfp_t gfp);
</pre>
     This function duplicates a string along the lines of the user-space
     <tt>strndup()</tt>. 

</ul>

<p>
It's worth noting a couple of things which will <i>not</i> be in 2.6.23.
The first is the <a href="http://lwn.net/Articles/236038/">process
containers</a> patch, which is not quite considered to be ready yet.  Some
other features (notably CFS group scheduling) are waiting for process
containers, so chances are good that this code will be in shape for merging
by 2.6.24.
<p>
The other big omission is the x86_64 clockevents, dynamic tick, and high-resolution timers
code.  This patch is considered by its authors to be ready (and your editor
has been running it without ill effect), but, after the troubles caused by
the integration of the i386 version of this code in 2.6.21, there is a
desire felt by some developers to go a bit more slowly and carefully.  The
result was a somewhat unhappy discussion on the mailing lists and a plan to
better split these patches so they can be carefully reviewed for the next
development cycle.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Releases-2.6.23">Releases/2.6.23</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/241915/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor242216"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Merged for 2.6.23</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 19, 2007 12:09 UTC (Thu)
                               by <b>Sho</b> (subscriber, #8956)
                              [<a href="/Articles/242216/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      Any news on swap prefetch?<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/242216/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor242301"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Merged for 2.6.23</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 19, 2007 18:19 UTC (Thu)
                               by <b>jospoortvliet</b> (guest, #33164)
                              [<a href="/Articles/242301/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      yeah, good question. I'd love to get an update on it's progress...<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/242301/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor242463"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Merged for 2.6.23</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 22, 2007 12:43 UTC (Sun)
                               by <b>csamuel</b> (<b>&#x272D; supporter &#x272D;</b>, #2624)
                              [<a href="/Articles/242463/">Link</a>] 
      </p>
      
      </div>
      </summary>
      A search of <a 
href="http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=summary">Linus's 
git tree</a> doesn't seem to show anything at present I'm afraid.. :-(
      
          <div class="CommentReplyButton">
            <form action="/Articles/242463/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor242351"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Merged for 2.6.23</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 20, 2007 11:05 UTC (Fri)
                               by <b>hjkoch</b> (guest, #45353)
                              [<a href="/Articles/242351/">Link</a>] 
      </p>
      
      </div>
      </summary>
      An important thing to mention is the Userspace IO core that Greg posted:<br>
<p>
<a href="http://lkml.org/lkml/2007/7/18/488">http://lkml.org/lkml/2007/7/18/488</a><br>
<p>
It's been silently accepted by Linus and will also appear in 2.6.23<br>
<p>
Hans J. Koch<br>
<p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/242351/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor242423"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Merged for 2.6.23</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 20, 2007 23:02 UTC (Fri)
                               by <b>smoogen</b> (subscriber, #97)
                              [<a href="/Articles/242423/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Much of the x86 startup code has been rewritten in C. There should be little in the way of changes for anybody who does not actually get into the code, but, for those folks, the new version should be much easier to work with.<br>
<p>
[For those who don't know.. the original startup code was written in Cobol. It was part of the kernel that Linus had used to finish a required class before finishing university. Since it was written in Cobol, it was 2 things:<br>
<p>
A work of art that anything could be written so wonderfully in Cobol.<br>
<p>
A piece of abomination that only Linus and two old fellows working on the Finnish paycheck system he used for sources of knowledge could debug.<br>
<p>
<p>
]<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/242423/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2007, Eklektix, Inc.<BR>
            
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
