        <!DOCTYPE html>
        <html lang="en">
        <head><title>The congestion-notification conflict [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/783673/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/783636/">Return to the Front page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/783673/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>The congestion-notification conflict</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>We're bad at marketing</b>
<p>
We can admit it, marketing is not our strong suit. Our strength is
writing the kind of articles that developers, administrators, and
free-software supporters depend on to know what is going on in the
Linux world. Please <a href="/Promo/nsn-bad/subscribe">subscribe today</a> to help us keep doing that, and so
we don’t have to get good at marketing.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>March 22, 2019</br>
           </div>
Most of the time, the dreary work of writing protocol standards at
organizations like the IETF and beyond happens in the background, with most
of us being blissfully unaware of what is happening.  Recently, though, a
disagreement over protocols for congestion notification and latency
reduction has come to a head in a somewhat messy conflict.  The outcome of
this discussion may well affect how well the Internet of the future works —
and whether Linux systems can remain first-class citizens of that net.
<p>
Network congestion is a fact of life; when it occurs, the only useful
response is to get senders of traffic to slow down.  Many governments place
traffic signals on the on-ramps to major highways in congestion-prone areas
in an attempt to limit traffic entering and to keep things flowing.  Network
traffic can benefit from similar controls, but the placement of traffic
signals at every entry point to the net is impractical.  So network
protocols must rely on other types of signals to learn when they
should reduce their transmission rate.
<p>
Protocols like TCP, unfortunately, were not designed with such signals, so
congestion-control algorithms have been built to use the one signal that
is always reliably delivered: dropped packets.  But dropping packets on the
floor can make things worse (it forces the data to be transmitted again),
it introduces delays and, by the time it happens, congestion is already
occurring.  It would be
better to inform senders of congestion in a less heavy-handed manner,
before that congestion becomes a problem.
<p>
<h4>ECN and its discontents</h4>
<p>
The <a href="https://tools.ietf.org/html/rfc3168">explicit congestion
notification (ECN)</a> protocol, standardized in 2001, was an attempt to improve
the situation by informing senders of congestion without dropping packets.
ECN repurposed two
bits in the IP header; for reasons that will become clear below, it is
worth looking at how those bits are interpreted:
<p>
<blockquote>
<table class="OddEven">
<tr><td>00</td><td>Transport is not ECN-capable</td></tr>
<tr><td>01</td><td>ECN-capable ECT(1)</td></tr>
<tr><td>10</td><td>ECN-capable ECT(0)</td></tr>
<tr><td>11</td><td>Congestion experienced</td></tr>
</table>
</blockquote>
<p>
The ECT(0) and ECT(1) values have the same meaning; they indicate that ECN
is supported at least somewhere on the route between two endpoints.  In
practice all implementations use ECT(0); attempts to give a separate
meaning to ECT(1) have not gained traction.  ECN famously broke the
Internet because many routers would drop packets with either of those bits
set; that delayed its adoption for years.

<p>

ECN has improved the situation, but not enough; it suffers from a couple of
significant problems.  One is that a "congestion experienced" signal still
arrives too late; congestion is already happening and the router is
pleading for help.  It is also still a heavy hammer; the RFC requires that
a congestion-experienced signal be treated as if a packet had been dropped,
so congestion-control algorithms respond by severely reducing their
transmission rates, then working back up.  That can reduce the throughput
of a connection (and increase its latency) more than is needed to resolve
the problem.

<p>
As networks get faster, the demands for lower latencies grow, and as
bufferbloat-reduction efforts reduce the amount of queue space available on
routers, congestion control needs to become a bit more nuanced.  There is
widespread agreement on that point.  How that nuance should happen is a
matter of rather less agreement.
<p>
<h4>L4S</h4>
<p>
One attempt at improving congestion control has been developed, mostly
slowly and mostly in private, by various industry players; it is called <a
href="https://tools.ietf.org/html/draft-ietf-tsvwg-l4s-arch-03">Low
Latency, Low Loss, Scalable Throughput</a>, or L4S.  The core idea seems to
be to replace ECN with a more flexible signal built into a higher-level
protocol; <a href="https://tools.ietf.org/html/rfc8257">data center TCP</a>
(DCTCP) is one example.  DCTCP acknowledgment packets can include
information on how much queuing space is available; senders can use the
information to keep the queue full without overflowing it.  Linux has
supported DCTCP since the 4.1 release.
<p>
The problem with something like DCTCP is that it must work with the active
queue-management algorithms running on all of the routers between the two
endpoints.  Those algorithms see <i>all</i> traffic passing through the
router, not just the DCTCP traffic.  The proponents of L4S seem to want a
sort of privileged treatment for suitably clueful protocols so that they
can get low-latency treatment through the router without having to contend
with what the L4S draft terms "classic TCP".
<p>
To bring that about, L4S redefines the ECT(1) value described above to
indicate "this packet is using better congestion notification".  Routers
would then create two separate queues; a fast one for the L4S traffic, and
a slower one for the "classic" traffic.  That differentiation can, on its
own, raise some eyebrows, but the queue-management algorithm needs to be
evaluated as a whole to see what its broader effects, including on
fairness, would really be.
<p>
DCTCP is not seen as being entirely safe for use outside of protected
environments like data centers.  For wider deployment, the intent has been
to create a new TCP congestion-control algorithm called "TCP Prague".  The
L4S portion would then be implemented with a queue-management algorithm
called "DUALPI", so named because it maintains the two independent queues
described above.  Both of these modules have been vaporware until recently:
a <a
href="https://github.com/L4STeam/tcp-prague/commit/f16165de39ec3c107c65550a3bbba898eb836943">repository
with TCP Prague</a> showed up on March&nbsp;12 (no attempt has yet been
made to submit it for the mainline), and DUALPI was <a
href="/ml/netdev/20190311151455.3436-1-olga@albisser.org/">posted to the
netdev list</a> on March&nbsp;11.
<p>
<h4>SCE</h4>
<p>
The alternative, pushed by longtime bufferbloat fighters Jonathan Morton
and Dave Täht, along with UDP creator David Reed, is called <a
href="https://github.com/dtaht/bufferbloat-rfcs/blob/master/sce/draft-morton-taht-tsvwg-sce.txt">some
congestion experienced</a>, or SCE.  It is a rather simpler proposal,
intended to provide a "congestion is imminent" signal that, once again, is
less heavy handed; it places a higher priority on compatibility with
existing TCP congestion-control implementations, though.
<p>
SCE also makes use of the ECT(1) value to encode the "some congestion"
signal.  The full congestion-experienced value would retain its current
meaning, with protocols expected to treat it as being equivalent to a
dropped packet.  The SCE signal, instead, should be interpreted this way:
<p>
<div class="BigQuote">
	New SCE-aware receivers and transport protocols SHOULD interpret
   	the SCE codepoint as an indication of mild congestion, and respond
   	accordingly by applying send rates intermediate between those
   	resulting from a continuous sequence of ECT codepoints, and those
   	resulting from a CE codepoint.  The ratio of ECT and SCE codepoints
   	received indicates the relative severity of such congestion, such
   	that 100% SCE is very close to the threshold of CE marking, 100%
   	ECT indicates that the bottleneck link may not be fully utilised,
   	and a 1:1 balance of ECT and SCE codepoints indicates that the
   	present send rate is a good match to the bottleneck link.
</div>
<p>
The code implementing SCE is also quite new; it showed up in the <a
href="https://github.com/dtaht/fq_codel_fast/commits/master">fq_codel_fast
repository</a> on March&nbsp;14..  It's worth noting that this proposal
does not give intermediate routers a way of knowing whether either endpoint
is capable of responding to SCE signals or not.  There is, perhaps, an
implicit assumption that, once SCE is supported by Linux and FreeBSD, it
will quickly become omnipresent.

<p>
<h4>Which is better?</h4>
<p>
These two proposals are clearly incompatible with each other; each places
its own interpretation on the ECT(1) value and would be confused by the
other.  The SCE side argues that its use of that value is fully compatible
with existing deployments, while the L4S proposal turns it over to private
use by suitably anointed protocols that are not compatible with existing
congestion-control algorithms.  L4S proponents argue that the dual-queue
architecture is necessary to achieve their latency objectives; SCE seems
more focused on fixing the endpoints.
<p>
It looks like a fairly typical battle between a protocol pushed by the
largest Internet service providers, and one with a rather more grass-roots
origin.  There is, however, another important thing to know about L4S:
Alcatel-Lucent <a href="https://datatracker.ietf.org/ipr/2952/">claims a
patent</a> on the dual-queue algorithm.  The company has generously offered
to make that patent available under "fair, reasonable, and
non-discriminatory" terms; such terms are, of course, highly discriminatory
against free software implementations.  They make it impossible to merge
the affected code into a GPL-licensed kernel.
<p>
As is the case with many patents, the quality of this one is not
universally recognized.  Bob Briscoe, one of the developers of L4S, <a
href="/ml/bufferbloat/7e49b551-22e5-5d54-2a1c-69f53983d7e5@bobbriscoe.net/">claims
loudly</a> that there is prior art for the claims in the Alcatel-Lucent
patent and that it should never have been issued.  The patent unfortunately
exists, though; as long as Alcatel-Lucent continues to claim it, the
code cannot become part of the Linux kernel.  If L4S becomes the
IETF-anointed standard, and if industry adoption follows, Linux could find
itself out in the cold.
<p>
The disagreement over these protocols reflects a difference in approach
between developers and their associated industries.  It is subject to all
of the usual technical and political maneuverings; the process could be
unpleasant to watch as it plays out.  One could argue that the Linux
community could 
happily let it play out and simply merge the winner; one might also
argue that SCE better matches the values that have shaped our network stack
in general.  The assertion of that patent, though, raises the stakes
considerably; it would not be good for Linux to find itself unable to play
with other high-performance network stacks.  As long as the patent remains,
the technical choice is easy.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Networking-Congestion_control">Networking/Congestion control</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/783673/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor783770"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The congestion-notification conflict</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 22, 2019 19:00 UTC (Fri)
                               by <b>mm7323</b> (subscriber, #87386)
                              [<a href="/Articles/783770/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
What's to stop me setting the 'fast queue' bit in all my headers and enjoying the speedup - at least until everyone else does the same?<br>
<p>
Unless ISPs are going to filter at ingress points (and so break the end-to-end congestion management anyway), surely everyone has to agree and implement the same rules or it won't work - regardless of patents or politics.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/783770/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor783775"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The congestion-notification conflict</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 22, 2019 21:30 UTC (Fri)
                               by <b>roc</b> (subscriber, #30627)
                              [<a href="/Articles/783775/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; What's to stop me setting the 'fast queue' bit in all my headers and enjoying the speedup - at least until everyone else does the same?</font><br>
<p>
The same thing that stops you from disabling TCP congestion control or using a congestion-oblivious UDP transport. I.e. nothing, until you become a big enough problem that ISPs start blocking your traffic.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/783775/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor783800"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The congestion-notification conflict</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 23, 2019 9:52 UTC (Sat)
                               by <b>farnz</b> (subscriber, #17727)
                              [<a href="/Articles/783800/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <p>Which is a strike against L4S, in my book; if I can cheat by just setting a bit in my headers, what is to stop me from doing so while my usage is small? And following on from that, when I'm a big enough problem, if I'm also a legitimate service (say Netflix or YouTube), I'm also effectively immune to blocking - block me, and I'll be able to allege that it's because I'm a big competitor to your services, not because I'm cheating.
<p>Similar issues apply to global deployment of DiffServ - you can't stop users setting their traffic to an EF codepoint or even an AF codepoint, and absent a global agreement on shaping that should apply to such codepoints, you end up having to either block EF/AF traffic, or treat it as no better than DF traffic.
<p>This is where SCE has an advantage - the endpoint setting the markers can request worse treatment, but not better.
      
          <div class="CommentReplyButton">
            <form action="/Articles/783800/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor783806"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Cheating</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 23, 2019 12:35 UTC (Sat)
                               by <b>corbet</b> (editor, #1)
                              [<a href="/Articles/783806/">Link</a>] 
      </p>
      
      </div>
      </summary>
      My guess is that cheating would work less well than one might like.  One of the big objectives behind L4S is low latency; that means tiny queues in the fast lane and tight congestion-control loops.  If you don't implement the congestion-control side, you're probably going to overflow the queues and end up retransmitting a lot of dropped packets.
      
          <div class="CommentReplyButton">
            <form action="/Articles/783806/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor784195"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The congestion-notification conflict</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 28, 2019 6:44 UTC (Thu)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/784195/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; The same thing that stops you from disabling TCP congestion control or using a congestion-oblivious UDP transport. I.e. nothing, until you become a big enough problem that ISPs start blocking your traffic.</font><br>
<p>
There is actually something stopping yourself from entirely disabling any form of congestion control: you'll be hurting not just the others but your own connections/sockets too.<br>
<p>
As often one key thing missing in this discussion is the definition and boundary between "my" (headers/connections/sockets/...) versus others'; wherever is that boundary I doubt "my" describes just one socket.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/784195/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor783798"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The congestion-notification conflict</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 23, 2019 6:50 UTC (Sat)
                               by <b>flussence</b> (guest, #85566)
                              [<a href="/Articles/783798/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      I really like the cleverness of SCE. It's basically <a href="https://en.wikipedia.org/wiki/Pulse-density_modulation">pulse-density modulation encoding</a>, simple enough anyone can understand it. More importantly, downstreams can understand it without a full protocol stack dissector, which the other scheme seems to require. Isn't the whole point of modern networking techniques to get heavy lifting *out* of the hot path?
      
          <div class="CommentReplyButton">
            <form action="/Articles/783798/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor783852"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The congestion-notification conflict</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 24, 2019 19:57 UTC (Sun)
                               by <b>sourcejedi</b> (guest, #45153)
                              [<a href="/Articles/783852/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
"Details of how to implement SCE awareness at the transport layer will<br>
be left to additional Internet Drafts yet to be submitted."<br>
<p>
That is, SCE still wants support in the "transport layer" - such as TCP - to effectively echo back the SCE markings to the sender.  Just like TCP with "classic ECN" (RFC 3168), or DCTCP.  Otherwise, how would the sender of the packet notice that it needed to slow down?<br>
<p>
I don't know why SCE was posted as an IETF draft without referencing "Accurate ECN". "Accurate ECN" aka AccECN, is an experimental TCP draft, which it says is required to implement L4S for TCP.  It has been worked on since 2016.  "Accurate ECN" was discussed on the bufferbloat.net lists during that time.<br>
<p>
I think the AccECN TCP option is generic enough that SCE *could* use it unchanged.  Although there is some limitation.  The AccECN TCP option is optional and some middleboxes strip it (or block it? something like that anyway).  AccECN has a fallback, which I think is only able to echo the ECN CE codepoint.  L4S will still be able to work in the fallback mode.  SCE congestion signals (ECN ECT(1) codepoint) would not get though in the fallback mode.<br>
<p>
"Accurate ECN" also says it can be used to implement the "classic ECN" response to congestion. (I.e. 1 signal per RTT, which the sender treats as a if a packet was dropped, i.e. halves its transmission rate. If I understand correctly).  I don't think it explains exactly how this is possible, but it is in good faith and I guess it is as simple as it sounds.<br>
<p>
SCE does suggest that instead of echoing the SCE signal to the sender, it is also possible to handle it "entirely by the receiver".  The submitted draft-00 suggests the reciever could tweak the receive window.  OTOH, when this was politely challenged, Dave Taht said "I kind of wish we'd cut that from the draft".<br>
<p>
<a rel="nofollow" href="https://lists.bufferbloat.net/pipermail/bloat/2019-March/008968.html">https://lists.bufferbloat.net/pipermail/bloat/2019-March/...</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/783852/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor784298"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The congestion-notification conflict</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 29, 2019 0:56 UTC (Fri)
                               by <b>flussence</b> (guest, #85566)
                              [<a href="/Articles/784298/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Correct me if I'm wrong here, as I understand it:<br>
<p>
• SCE adds information in the IP header that higher layers in the network stack may use to back off from congestion (like BBR/FQ?)<br>
• In L4S the higher layers already have the congestion information through some means, those set the bit in the IP layer as an extension signal, and it's up to receivers to understand that bit and introspect the rest of the packet to enqueue it properly?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/784298/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor784385"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The congestion-notification conflict</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 29, 2019 21:32 UTC (Fri)
                               by <b>moeller0</b> (guest, #131181)
                              [<a href="/Articles/784385/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
So my take on this is, SCE proposed to use a hitherto effectively unused codepoint in the 2bit ECN bitfield to send a pulsemodulated signal about the queueing load at a bottleneck equipped with an SCE aware AQM. It will still use RFC compliant tcp-friendly signals, CE marking or packetdrops, upon reaching full congestion so that all endpoints SCE-aware, ECN-CE-aware and plain old drop aware get as good a signal out of the bottleneck as they are willing to accept. <br>
<p>
L4S now proposed to use the same codepoint to let flows promise the AQM that they will respond differently to CE marks than TCP-friendly flows. Specifically these flows promise not to interpret a CE mark as a strong signal to scale back their sending rate, but will look at the ratio of unmarked an CE-marked packets to get a pulsemodulated signal of the AQMs load/congestion state.<br>
The challenge is that an AQM needs to know how flows are going to react to CE-marks to send the appropriate signal to each flow, otherwise the flows responding milder to CEs will suppress the ones with a strong response.<br>
<p>
So in both cases the idea is to send a graded congestion signal so the endpoints can try to respond with more finesse than current TCPs with the binary congestion signal can. The main difference is how backward compatibility is handled. IMHO the SCE approach seems cleaner an more evolutionary than trying to press the ECT(1) codepoint into service as an identifier, as in the L4S approach endpoints never know whether a CE mark comes from an L4S AQM or from a traditional one due to the fact that ECT(1) will only identify packets that have not yet encountered congestion unambiguously...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/784385/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor784392"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The congestion-notification conflict</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 29, 2019 22:25 UTC (Fri)
                               by <b>sourcejedi</b> (guest, #45153)
                              [<a href="/Articles/784392/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I don't understand your description of L4S, or where it is coming from.<br>
<p>
In both L4S and SCE, routers only operate on the IP header.  They do not inspect or alter the IP payload, including TCP headers.  The "higher layers" only run on the endpoints.  L4S does not violate the normal layering rules in that sense.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/784392/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor783805"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The congestion-notification conflict</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 23, 2019 12:31 UTC (Sat)
                               by <b>mfuzzey</b> (subscriber, #57966)
                              [<a href="/Articles/783805/">Link</a>] (9 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; The assertion of that patent, though, raises the stakes considerably; it would not be good for Linux to find itself unable to play with other high-performance network stacks</font><br>
<p>
Is it really realistic that any network protocol not supported by Linux be adopted at any internet significant scale?<br>
Given the number of Linux based servers, networking devices and Android phones I would have thought not.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/783805/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor783814"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The congestion-notification conflict</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 23, 2019 20:53 UTC (Sat)
                               by <b>jg</b> (guest, #17537)
                              [<a href="/Articles/783814/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
There are still a few deluded people out there...  Almost all understand that without Linux support, something is a non-starter.... But patent trolls being what they are....<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/783814/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor783816"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The congestion-notification conflict</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 23, 2019 20:58 UTC (Sat)
                               by <b>jg</b> (guest, #17537)
                              [<a href="/Articles/783816/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Also, a larger number of people just don't understand that Linux won't accept patented/FRAND term technologies.  There are too many gray hairs and not enough young guys who attend the IETF....<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/783816/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor783825"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The congestion-notification conflict</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 23, 2019 22:23 UTC (Sat)
                               by <b>pizza</b> (subscriber, #46)
                              [<a href="/Articles/783825/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Who cares what "Linux" will or won't accept?  Ship it as yet another binary blob used by your Linux-based router/appliance/whatever.  You won't have to worry, as nobody [that matters] will ever hold you to the GPL's "complete corresponding source code" obligations.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/783825/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor783843"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The congestion-notification conflict</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 24, 2019 12:33 UTC (Sun)
                               by <b>jch</b> (guest, #51929)
                              [<a href="/Articles/783843/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; There are too many gray hairs</font><br>
<p>
I don't think it's a generation gap, Jim, but a cultural gap that crosses generations.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/783843/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor783967"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The congestion-notification conflict</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 25, 2019 17:30 UTC (Mon)
                               by <b>jg</b> (guest, #17537)
                              [<a href="/Articles/783967/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Yes, there is a cultural gap with those who haven't dealt with FOSS. It isn't just an age issue.<br>
<p>
But there is some correlation with age; UNIX was not FOSS, and I see correlation with gray hairs (of which I have more than a few). If my career had wandered off into other directions, I would not have the perspective I have.<br>
<p>
And I've spend years working in the IETF, for better or worse.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/783967/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor783845"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The congestion-notification conflict</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 24, 2019 15:42 UTC (Sun)
                               by <b>sourcejedi</b> (guest, #45153)
                              [<a href="/Articles/783845/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Notice the link does not claim that hosts using the network protocol require a patent license.  It claims that routers using the necessary AQM require a patent license.<br>
<p>
There is a claim elsewhere in the discussion that an L4S-compliant AQM can be implemented by fq_codel.  This would use a different mechanism.  It would also allow using L4S, without losing the benefits of fq-codel if you are not using L4S.<br>
<p>
<a rel="nofollow" href="https://lists.bufferbloat.net/pipermail/bloat/2019-March/008965.html">https://lists.bufferbloat.net/pipermail/bloat/2019-March/...</a> -- Bob Briscoe<br>
<p>
There is some confusion about whether the current L4S has been worded incorrectly, so that it technically prohibits an AQM based on fq_codel, and whether it would actually work fine.  If you need more clarity on that *then ask about it*.<br>
<p>
<a rel="nofollow" href="https://mailarchive.ietf.org/arch/msg/tsvwg/LBZ24KXwK13DHXnNJH1QeKYk0m4">https://mailarchive.ietf.org/arch/msg/tsvwg/LBZ24KXwK13DH...</a> -- Greg White<br>
<p>
Yes, it would be really nice to *also* rule-in Linux routers to be able to run an L4S AQM in regimes where AQM is still possible in pure software, but flow-queuing is not.<br>
<p>
But I don't think that deserves knee-jerking as hard as this article does.<br>
<p>
And that's a narrower window of regimes than you might assume.  I think the Bufferbloat.NET Official Position (TM) was that the main performance problem for slow home routers is often "shaping", which is not part of fq_codel.  So sch_fq_codel can work in many places where sch_codel or sch_pie do.  I can't find a reference about upper limits for fq_codel (as opposed to shaping), but I expect the bloat mailing list would be able to find some statements if you need them.<br>
<p>
TL;DR for the patent to really be a problem for you, I think you would need to be running something like sch_codel or sch_pie at the moment, and not be able to switch to sch_fq_codel.  Is there really anyone doing that?<br>
<p>
I Am Not A Lawyer.  None Of This Is Legal Advice.  But Seriously, Did You Find Any Source Involved In the Linux Side (Dave Taht et al) Who Is As Unhappy About The *Patent* As This Article Reads?<br>
<p>
I only skimmed the threads to find a few messages to read, based on author name. At the moment I see the most unhappiness coming from the LWN article.  This is mostly re-inforcing my opinion about the amount of salt I need to take with that source :-P.  (But I thank them for being good about providing links to the relevant posts.)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/783845/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor783850"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The congestion-notification conflict</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 24, 2019 17:07 UTC (Sun)
                               by <b>sourcejedi</b> (guest, #45153)
                              [<a href="/Articles/783850/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Ok, I found it.<br>
<p>
<a rel="nofollow" href="https://mailarchive.ietf.org/arch/msg/tsvwg/Okd59BLGs8ZIgcRk4LSkBENUXns">https://mailarchive.ietf.org/arch/msg/tsvwg/Okd59BLGs8ZIg...</a> -- Dave Taht<br>
<p>
I'm not sure how to parse it.  It says the 2016 "Coupled AQM" release was patent-infested and hence unsafe to review, let alone implement in Linux.  But that the "DUALPI2 AQM upstream version" (released 2019?) was "possibly worth reviewing by experts".<br>
<p>
However the DUALPI2 commit message links directly to draft-ietf-tsvwg-aqm-dualq-coupled .  And the description seems to match the discussion about the patent.<br>
<p>
I can understand anger about it being really hard to develop and test interoperability, if understanding the patented details endangers your ability to contribute to implementations of GPL'd AQMs.  (Aggravated damages due to "wilful infringement?").  Although that's not how I understood things based on previous LWN articles.  The patents are out there and you're going to be stuck fighting them anyway; you need to know the details in order to avoid infringing.  That can be a very useful strategy, and then when you implement an alternative *that they had not already considered*, they can't then patent that alternative.  (Details apply, e.g. see "patent pending").<br>
<p>
-- Patent details!  Maybe don't read further if you're not allowed to read short quotes about patent details? --<br>
<p>
"[the base probability for the classic queue] is squared to compensate the squareroot rate equation of Reno/Cubic" sounds exactly like -<br>
<p>
"The only claim that I could not find prior art for (in the original <br>
EU filing) was a very specific claim about using a square root for the <br>
coupling. The Linux implementation runs this the other way round so that <br>
it only has to do a squaring. So I figured we were safe from that.<br>
<p>
However, until just now, I had not noticed that Al-Lu has <br>
retrospectively re-written the claims in the US patent and in the EU <br>
patent application to claim this the other way round - as a squaring."<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/783850/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor783965"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The congestion-notification conflict</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 25, 2019 17:02 UTC (Mon)
                               by <b>fw</b> (subscriber, #26023)
                              [<a href="/Articles/783965/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Extremely few people expose services running on mainline Linux kernels directly to the Internet. Pretty much all traffic is handled first on custom Linux kernels or completely different TCP/IP stacks, terminating the TCP session.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/783965/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor820431"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The congestion-notification conflict</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 13, 2020 18:41 UTC (Wed)
                               by <b>rodgerd</b> (guest, #58896)
                              [<a href="/Articles/820431/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
If the patent is sufficiently small in cost, then companies who use Linux will pay the patent and use code that implements it. Android, GCP, Azure, AWS, etc will continue to flourish. Competing Linux kernels - RHEL, SuSE, the one you download - will languish.<br>
<p>
Given their track record opposing efforts to hold VMware and other alleged GPL violators to account, I imagine the Linux Foundation will quickly endorse this idea.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/820431/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor783851"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The congestion-notification conflict</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 24, 2019 17:28 UTC (Sun)
                               by <b>ajb</b> (guest, #9694)
                              [<a href="/Articles/783851/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The patent is a huge issue, and I think the community should be wary of it until either ALu gives better licence conditions, or it becomes clear that it is invalid.  Hopefully this article will advance one outcome or the other.<br>
<p>
I think it's premature to decide that SCE "better matches the values" of the Linux networking stack, however. As I understand it, in L4S, the dual-q mechanism is a transition mechanism, and the end state is that everyone - except for old stacks - end up in the second, low-latency, bucket. Whereupon the behaviour of the system is controlled by the end-hosts - very much how the Linux networking community would have it.  Linux - if, and it's a big if, the patent issue is solved - would move to the second bucket very fast, give how quickly Linux development goes.  <br>
<p>
SCE, however, appears to rely on per-flow queueing (FQ) being implemented at any hop that could end up being the bottleneck. FQ is fine if its on your home router and thus under your control. But if it's implemented everywhere, then the network, not the end clients, are controlling the behaviour of the system. <br>
<p>
The bufferbloat guys are pushing for FQ to be implemented everywhere. So far, it's not happened because the fast path of ISP-class switches are mostly implemented in ASICs, where queues are a limited resource. If it were to happen, you can be sure that the facility to weight those queues according the the commercial policy of the ISPs would also be implemented also.   Despite FQ coming from the grass-roots, the difficulty implementing it at the ISP level may well be, paradoxically, something the open community should be grateful for.<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/783851/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor783853"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The congestion-notification conflict</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 24, 2019 18:05 UTC (Sun)
                               by <b>mtaht</b> (subscriber, #11087)
                              [<a href="/Articles/783853/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
After so many heated discussions last week, what I would like most is for more people to have read the l4s, tcp prague, and dualpi drafts. It saves time to skip to the appendixes, and then a more coherent dialog can emerge.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/783853/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor784196"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The congestion-notification conflict</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 28, 2019 6:51 UTC (Thu)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/784196/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; After so many heated discussions last week, what I would like most is for more people to have read the [...] drafts</font><br>
<p>
Wow, speaking of grey hair *you* must have a lot of it;  you're clearly from some pre- social media era :-)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/784196/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor784319"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The congestion-notification conflict</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 29, 2019 12:31 UTC (Fri)
                               by <b>mtaht</b> (subscriber, #11087)
                              [<a href="/Articles/784319/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I'm pretty bald, actually. My beard has turned almost completely grey.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/784319/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor783882"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The congestion-notification conflict</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 25, 2019 8:16 UTC (Mon)
                               by <b>mtaht</b> (subscriber, #11087)
                              [<a href="/Articles/783882/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
There have been a few things going by here that I would like to address but I don't really have time today. Most of the SCE activity is taking place on the ecn-sane mailing list.  We (currently) think implementing SCE *does not require* FQ and aim to prove that in the coming weeks:<br>
<p>
<a href="https://lists.bufferbloat.net/pipermail/ecn-sane/2019-March/000167.html">https://lists.bufferbloat.net/pipermail/ecn-sane/2019-Mar...</a><br>
<p>
(and see the explosion of traffic on that list for far, far more debate and detail)<br>
<p>
It helps to have read the ecn-sane charter:<br>
<p>
<a href="https://www.bufferbloat.net/projects/ecn-sane/wiki/">https://www.bufferbloat.net/projects/ecn-sane/wiki/</a><br>
<p>
and rules of operation: <a href="https://www.bufferbloat.net/projects/ecn-sane/wiki/rules/">https://www.bufferbloat.net/projects/ecn-sane/wiki/rules/</a> <br>
<p>
before actually joining the list.<br>
<p>
before joining the list. Anyone that has issues with ecn-sane's rules or charter is welcome to submit a pull request against the <a href="https://github.com/tohojo/bufferbloat-net">https://github.com/tohojo/bufferbloat-net</a> repo.<br>
<p>
People are also welcome to attempt to join the DOCSIS consortium, under their rules. Or the ietf, under their rules.<br>
<p>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/783882/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor784125"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The congestion-notification conflict</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 27, 2019 17:49 UTC (Wed)
                               by <b>ajb</b> (guest, #9694)
                              [<a href="/Articles/784125/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Thanks. I don't quite see how SCE can be useful without FQ, since if they are in the same queues client stacks are constrained in how differently they can respond to these signals without dominating or being dominated by unmodified client stacks.  Hopefully this will be made clear.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/784125/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor784418"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The congestion-notification conflict</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 30, 2019 15:41 UTC (Sat)
                               by <b>mtaht</b> (subscriber, #11087)
                              [<a href="/Articles/784418/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
For those that don't like reading drafts...<br>
<p>
Jonathan's talk on SCE at tsvwg is now up at: <a href="https://www.youtube.com/watch?v=JQmWyr0JDJM&amp;t=1h3m50s">https://www.youtube.com/watch?v=JQmWyr0JDJM&amp;t=1h3m50s</a><br>
<p>
And the cable industry's talk is prior to that.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/784418/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor784126"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The congestion-notification conflict</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 27, 2019 18:11 UTC (Wed)
                               by <b>ajb</b> (guest, #9694)
                              [<a href="/Articles/784126/">Link</a>] 
      </p>
      
      </div>
      </summary>
      I took a look at the patent in question (at least the US version) and noticed the following, which gives some hope that the patent may not be as much of a blocker as this article suggests:
<p>
All the non-dependent claims in the patent (that is, claims 1, 14 and 22) seem to assume use of the 'proportional-integral controller', (a object from  control theory which is used in AQMs). But, the dualQ L4s draft (draft-briscoe-tsvwg-aqm-dualq-coupled) gives, in Appendix B, an alternative to this called 'Curvy RED'. 

<p>
 ( All the claims of a patent are either non-dependent or depend ultimately on one of the non-dependent claims, so when all the non-dependent claims rely on something then it is essential to the patent as a whole).

<p>
In email on the TSVWG list, Bob Briscoe, one of the developers of L4S, clarifies <a href=https://mailarchive.ietf.org/arch/msg/tsvwg/WrfshFc2xAas5UuJo4lYUtJRUsM>here</a> that the dualQ part of L4S, to which this patent applies, is  intended to be a framework into which any AQM could be dropped. 
<p>
Accordingly, it seems to me much less likely that it would first appear, that Linux could be locked out of high-perf networking if L4S is the winner in this debate. 
<p>
Note that I am not a lawyer, and it would be good if others could read the  patent and post if they concur or not with my reading of it.
<p>
It is still less than ideal that the DUALPI source, which is posted for evaluation of L4S and for adoption into linux, has this patent hanging over it. The developers might be well advised to post a version which avoids the PI controller - unless they believe that ALu can be persuaded to licence the patent freely to OSS.
      
          <div class="CommentReplyButton">
            <form action="/Articles/784126/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor786984"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The congestion-notification conflict</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 28, 2019 20:17 UTC (Sun)
                               by <b>randyqx</b> (guest, #131682)
                              [<a href="/Articles/786984/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
the article says service providers are pushing L4S.  this is not the case; it is hardware vendors.  L4S would put pressure on service providers to buy L4S-enabled kit end to end, while SCE is classic internet end-to-end and puts no burden to buy enabled vendor kit.  L4S is bad architecture.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/786984/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor820420"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Another ietf vote on the fate of the ect(1) bit is on</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 13, 2020 15:58 UTC (Wed)
                               by <b>mtaht</b> (subscriber, #11087)
                              [<a href="/Articles/820420/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
There is a new vote taking place on the ietf tsvwg mailing list. <br>
<p>
<a href="https://mailarchive.ietf.org/arch/msg/tsvwg/rXWRHAyGOuu_qOGM3JkpK9whdS4/">https://mailarchive.ietf.org/arch/msg/tsvwg/rXWRHAyGOuu_q...</a><br>
<p>
Apple and google have joined the L4S coalition, and the competing SCE team done an admirable job of analyzing and benchmarking the code quality and claims thus far: <a href="https://github.com/heistp/sce-l4s-ect1#key-findings">https://github.com/heistp/sce-l4s-ect1#key-findings</a><br>
<p>
The latest major bug (fixed) in the l4s tcp prague code is documented there, but the analysis of what the fix means needs to be regression tested more fully against the existing benchmarks.<br>
<p>
One bugfix involving all the tunnels in the world for incorrectly decapsulating ect(1) marked packets just went into linux-stable. I don't really understand the scope of the problems this bug had, but it bothers me.<br>
<p>
Anyway, I *do not* encourage any newcomers to the tsvwg mailing list to actually vote, as these issues are very complex and I do not want to be accused to stuffing the room.<br>
<p>
But I do wish that more network engineers that understood congestion<br>
control to any extent, were paying attention to these events. In my case, I've mostly been trying to get all the participants on the mailing list to look at the<br>
aftereffects on videoconferncing in particular, on asymmetric home networks, (e.g. 100/10, 200/10 mbit stuff) of either set of proposals vs the state of the art (without any ecn support at all) There's packet captures and flent data here:<br>
<p>
<a href="https://mailarchive.ietf.org/arch/msg/tsvwg/uVuFcicR6i7ev5JCRRt8Zllm3Fw/">https://mailarchive.ietf.org/arch/msg/tsvwg/uVuFcicR6i7ev...</a><br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/820420/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor820423"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Another ietf vote on the fate of the ect(1) bit is on</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 13, 2020 16:32 UTC (Wed)
                               by <b>mtaht</b> (subscriber, #11087)
                              [<a href="/Articles/820423/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I note the l4s documents are linked in the parent article. My own position,<br>
any way this goes down, is that of a very beleaguered  QA manager, and for those of you that haven't enjoyed this video... here it is: <br>
<p>
<a href="https://www.youtube.com/watch?v=KowAEqHpftI">https://www.youtube.com/watch?v=KowAEqHpftI</a><br>
<p>
sometimes ya just gotta laugh.<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/820423/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2019, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
