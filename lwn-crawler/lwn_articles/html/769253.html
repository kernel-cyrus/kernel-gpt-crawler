        <!DOCTYPE html>
        <html lang="en">
        <head><title>Making stable kernels more stable [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/769253/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/768792/">Return to the Front page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/769253/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>Making stable kernels more stable</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Ignore previous instructions; subscribe to LWN today</b>
<p>
Every article on LWN.net is written by humans, for humans. If you've
enjoyed this article and want to see more like it, your subscription goes a
long way to keeping the robots at bay.  We are offering <a href="https://lwn.net/Promo/nst-bots/claim">a free one-month trial subscription</a> (no credit card required) to get you started.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>October 24, 2018</br>
           <hr>
<a href="/Articles/769260/">Maintainers Summit</a>
</div>
Improving the quality of stable kernel releases is a perennial subject at
the Kernel and Maintainers Summit events, and this year was no exception.
This session, led by Fedora kernel maintainer Laura Abbott, discussed a
range of ideas but found no 
silver bullets.  There is, it seems, not much that can be done to create
better stable kernels except to perform more and better testing.
<p>
Abbott's objective in running this session was to discuss ideas for
reducing regressions in stable kernels.  Those kernels are, after all,
supposed to be stable; if they break, users will suffer and their trust in
the entire process
will be reduced.  In the discussions prior to the summit, she had suggested
that perhaps stable releases should sit in a release-candidate state for
one week prior 
to release as a way of shaking out any bugs; that idea was not
particularly well received.  But we should do something, she said; if we
are going to tell people that they should be running stable kernels, those
people should not need to employ "an army of engineers" to debug those
kernels.  The stable kernels we are releasing now, she said, are not ready
for production use.
<p>
Peter Zijlstra started the discussion with an assertion that the problem
will never be solved.  The only way anybody can ever really know that a
kernel will work for their particular combination of hardware and
production workload is to try it.  Rafael Wysocki said that there is a
fundamental conflict here: users want fixes to be aggressively applied to
stable kernels, but they also want those kernels to be mature.  The end

<a href="/Articles/769257/"><img
src="https://static.lwn.net/images/conf/2018/ms/LauraAbbott-sm.jpg" alt="[Laura Abbott]"
title="Laura Abbott" class="lthumb"></a>

result, Jiri Kosina said, is that the distributors are not using the stable
kernel releases anymore.
<p>
Ted Ts'o told the group that part of the problem is that the long-term
support (LTS) kernels are too successful, so the regular stable kernels are
not being used anymore.  The support period for those kernels is simply too
short.  Supporting them for a longer period would help, but that would, of
course, increase the amount of work required.  So the non-LTS kernels are
unlikely to ever be useful for distributors.  Those that have tried to use
them (he mentioned CoreOS in particular) have ended up shipping regressions
to users, who were naturally displeased with what they got.
<p>
Greg Kroah-Hartman, the maintainer for most of the stable kernels out
there, noted that CoreOS never told him about the problems it was having,
so there was not much that he could have done about them.  Other
stable-kernel users have a different experience.  Google, for example, runs
each release candidate through "a zillion tests" and, as a result, is able
to push updates out to users quickly.  But, it was pointed out, obtaining
this kind of result requires operating a large test infrastructure.  Linaro
is building something like it, Kroah-Hartman said, and Red Hat too.  This
is the only way the use of stable kernels by a distributor can really work,
he said.
<p>
Abbott pointed out that big companies have the resources to put together
this kind of infrastructure, but that is not true of all would-be
stable-kernel users.  Sasha Levin said that the <a
href="https://kernelci.org/">KernelCI testing project</a> is evolving to
the point where small groups should be able to make use of it.
Kroah-Hartman said that KernelCI is a Linux-Foundation project now, and
that it is working to add more tests; Mark Brown cautioned that KernelCI
still needs resources to be able to grow, though. <strike>and that it's a bit too
soon to advertise it as being ready for widespread use</strike>
<p>
When Ts'o asked Abbott about the bugs reported by Fedora users, she replied
that most of them turn up either in the graphics drivers or the KVM
virtualization subsystem.  Graphics, she noted, has been getting better
recently; Kroah-Hartman replied that KVM is "a black hole" in this regard.
Linus Torvalds said that Intel graphics, in particular, has improved a lot
recently, but there is more to graphics than Intel.  Abbott added that AMD
graphics seems to be the source of many recent regressions.
<p>
Returning to one of her original points, Abbott asked whether companies
need to be active in the kernel community to be able to use the stable
releases effectively; Kroah-Hartman responded that not all users are active
kernel contributors.  Zijlstra said that companies don't need experts; they just
need to test their workloads on the release candidates and report any bugs
they find.  Ts'o thought that the core problem might be a documentation
issue; if users knew that they needed to test the release candidates, they
might do more of it.
<p>
Kees Cook, instead, said that if the community is
seeing holes that bugs are slipping through, the right response would be to
add tests that might catch them — assuming such tests exist.  Paul
McKenney pointed out that a lot
of the existing tests out there are proprietary; in such cases, it's up to the
company that owns the tests to run them and report the results.  Some
companies do indeed do that, Kroah-Hartman said.
<p>
Arnd Bergmann observed that more patches seem to be going into the stable
releases than was once the case.  Kroah-Hartman said that a lot of work has
gone into getting maintainers to tag fixes for the stable releases; that
work is bearing fruit.  But, Bergmann said, many of those "fixes" appear to
be bending the rules that had been put in place for the stable kernels.
The rules, Kroah-Hartman responded, are there to allow the maintainers to
say "no" to specific patches, but he will generally accept a much broader
range of patches for stable
releases if the maintainers agree.
Bergmann asked whether the rules stretch to adding fixes for warnings
generated by new compilers; Kroah-Hartman said "no", that the line has to
be drawn somewhere.  Fixes to disable those warnings in stable-kernel
builds might be accepted, though.
<p>
Toward the end, Kroah-Hartman was asked if he uses the "Fixes" tag to
select patches for backporting to the stable releases; he answered that he
does not have the time to do that.  Levin's <a
href="/Articles/764647/">automatic patch-selection code</a> can make use of
it, though.  Ts'o said that he has started getting CVE numbers for
applicable patches for a novel reason: the presence of a CVE number will
cause others to do the work backporting the patches to older kernels for
him.  With regard to the original topic, though, the conclusion reached by
the group was clear enough: if we want better stable-kernel releases, there
is really no substitute for better testing.
<p>
[Thanks to the Linux Foundation, LWN's travel sponsor, for supporting my
travel to the Maintainers Summit.]<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Development_model-Stable_tree">Development model/Stable tree</a></td></tr>
            <tr><td><a href="/Archives/ConferenceIndex/">Conference</a></td><td><a href="/Archives/ConferenceIndex/#Kernel_Maintainers_Summit-2018">Kernel Maintainers Summit/2018</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/769253/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor769339"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making stable kernels more stable</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 24, 2018 6:23 UTC (Wed)
                               by <b>luya</b> (subscriber, #50741)
                              [<a href="/Articles/769339/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      AMD definitely needs more love in term of better hardware especially the newer models. Example is https://bugzilla.kernel.org/show_bug.cgi?id=198715 where ACPI codes broke both touchscreen and stylus support on HP Envy x360.

My experience with one of kernel developers shows how much behind the process really is especially on ACPI side. Main reason is the lack of manpower and accessibly for users willing to test possible solution.
      
          <div class="CommentReplyButton">
            <form action="/Articles/769339/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor769341"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making stable kernels more stable</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 24, 2018 6:42 UTC (Wed)
                               by <b>cpitrat</b> (subscriber, #116459)
                              [<a href="/Articles/769341/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
There's an easy solution: give free hardware to kernel devs !<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/769341/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor769347"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making stable kernels more stable</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 24, 2018 8:06 UTC (Wed)
                               by <b>gioele</b> (subscriber, #61675)
                              [<a href="/Articles/769347/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; There's an easy solution: give free hardware to kernel devs !</font><br>
<p>
How exactly?<br>
<p>
For years I've been doing the opposite: buying hardware that I know kernel devs use privately. I (and probably many others) will be very happy to donate a copy of my laptop or desktop to any competent kernel dev. No strings attached.<br>
<p>
BTW, ages ago I set up a (successful) pledge.me to buy the exact cell phone I had at the time to Michal Čihař, the main developer of Gammu/Wammu. That cell phone model went from unsupported to fully supported in a few weeks. ;)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/769347/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor769364"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making stable kernels more stable</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 24, 2018 10:02 UTC (Wed)
                               by <b>cpitrat</b> (subscriber, #116459)
                              [<a href="/Articles/769364/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
As the comment was talking about 'better hardware', I was thinking of constructors providing their newest model for free to kernel developers. This shouldn't be hard to find interested ones. This can also work for donating copy of your own hardware as long as you're not using low-end ones. It's obviously harder to find someone interested in receiving and using a 200$ laptop.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/769364/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor769649"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making stable kernels more stable</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 26, 2018 20:44 UTC (Fri)
                               by <b>xtifr</b> (guest, #143)
                              [<a href="/Articles/769649/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It's my understanding that AMD not only gives/loans hardware to, but *pays the salary of* more than one kernel dev.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/769649/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor769677"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making stable kernels more stable</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 27, 2018 7:32 UTC (Sat)
                               by <b>cpitrat</b> (subscriber, #116459)
                              [<a href="/Articles/769677/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Yes but of some working on stable kernels ?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/769677/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor769345"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making stable kernels more stable</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 24, 2018 7:34 UTC (Wed)
                               by <b>mjthayer</b> (guest, #39183)
                              [<a href="/Articles/769345/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; In the discussions prior to the summit, she had suggested that perhaps stable releases should sit in a release-candidate state for one week prior to release as a way of shaking out any bugs; that idea was not particularly well received.</font><br>
<p>
People have different levels of tolerance for bugs.  I use Ubuntu and usually upgrade during the beta period because it is easier to get bugs fixed then, and to know what our users who use Ubuntu will run into.  If there is no release candidate state then people who are more sensitive should wait for a while before using a release.  Making use of these different tolerance levels (in fact the usual alpha-beta-release cycle) is still an effective way of keeping things stable.  On a finer grain, people with higher stability requirements could also hold back non-critical stable kernel updates until they got more testing, while people with less critical needs could use them right away.<br>
<p>
On a different note, there shear size of the kernel must be a big problem for stability.  I always wonder whether people will try a more micro-kernel-like approach some day.  I think that these days many of the problems of micro-kernels have been solved, but that the gains have not yet justified the pain of reworking what we have.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/769345/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor769362"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making stable kernels more stable</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 24, 2018 10:16 UTC (Wed)
                               by <b>dgm</b> (subscriber, #49227)
                              [<a href="/Articles/769362/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; On a different note, there shear size of the kernel must be a big problem for stability. I always wonder whether people will try a more micro-kernel-like approach some day.</font><br>
<p>
This is a different kind of stability. Having subsystems run at lower privilege would not make them less prone to regressions. It only gives the microkernel the opportunity to restart them without failing completely, but this is only so much useful.<br>
<p>
Take for instance the KVM subsystem or the graphic drivers, that were metioned in the article. Losing KVM would crash the running virtual machines, which we can assume are the key part of the system for the user, so no difference here. Also, I'm not sure about graphics cards. Are desktop environments prepared to cope with losing the grahics context? <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/769362/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor769376"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making stable kernels more stable</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 24, 2018 12:11 UTC (Wed)
                               by <b>mjthayer</b> (guest, #39183)
                              [<a href="/Articles/769376/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Actually I was thinking less of the process separation and more of the conceptual separation, assuming that it is easier to keep several smaller code-bases stable than one big one.  I might be wrong there of course, particularly if the added communication complexity outweighs the benefits.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/769376/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor769437"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making stable kernels more stable</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 24, 2018 20:55 UTC (Wed)
                               by <b>k8to</b> (guest, #15413)
                              [<a href="/Articles/769437/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Communication is something to wrangle and have problems, but I'd say it's more about binding between components that can happen readily over a well-ordered communication path.<br>
<p>
I definitely have seen wins when a lot of strategies are employed together.  There are some systems built in erlang where many benefits were reaped by state management, controlled communication, obliviousness about local vs remote communication by default, and many other things combining to give more managability to the process.  It's harder achieve those wins when the system doesn't give you the discipline tools to help ensure those things are done.<br>
<p>
I'm suspicious that an operating system may be too low-level to use fancy tooling to help you get all those wins though.  I'm definitely convinced that complex piles of C talking over messaging busses implementing a kernel does not give you a simple system or any easy wins.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/769437/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor770207"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making stable kernels more stable</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 31, 2018 16:16 UTC (Wed)
                               by <b>anton</b> (subscriber, #25547)
                              [<a href="/Articles/770207/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <blockquote>Are desktop environments prepared to cope with losing the grahics context?</blockquote>

X applications certainly know how to redraw a window when you uniconize it.  twm has a "restart" action that redraws all windows (with uniconizing and reiconizing if necessary).  I use this when my Intel-based X-Terminal decides to make everything black.

<p>My experience concerning Intel and AMD is that I have graphics problems on Intel (HD Graphics 520/500 on Skylake and Apollo Lake), while AMD (Juniper XT) works flawlessly.  This may have to do with the age of the hardware (Juniper XT is from 2009, HD 5xx from 2015), but my experience is certainly the opposite of what others have stated.
      
          <div class="CommentReplyButton">
            <form action="/Articles/770207/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor770213"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making stable kernels more stable</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 31, 2018 17:29 UTC (Wed)
                               by <b>nybble41</b> (subscriber, #55106)
                              [<a href="/Articles/770213/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Losing the graphics context is not like unmapping a window. When a window is unmapped you still have all the resources (e.g. pixmaps) which were previously registered with the server. For that matter the window itself still exists and things like OpenGL contexts which were generated from it remain intact; all you need to do when the window is uniconified is redraw.<br>
<p>
Losing the graphics context is more like losing the connection to the X server. Most applications aren't prepared to deal with that gracefully. There is also the extra complication that the context includes *hardware* resources which are no longer available, and which may have been mapped directly into the application's address space. The backing for XShm mappings doesn't suddenly cease to exist even if you do lose your connection to the server.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/770213/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor769368"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making stable kernels more stable</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 24, 2018 10:35 UTC (Wed)
                               by <b>broonie</b> (subscriber, #7078)
                              [<a href="/Articles/769368/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
KernelCI is definitely ready for widespread use and in fact has been in widespread use for several use running builds and boots - some of the new functionality that Greg was talking about with running tests is in development and not available for use yet, and some of the additional resources (builders for example) that are expected to arrive soon and will be needed to deploy that aren't yet there. <br>
<p>
It'd be great if the story could be updated to reflect this, what's there at the minute is very misleading and not what I said.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/769368/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor769369"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making stable kernels more stable</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 24, 2018 10:42 UTC (Wed)
                               by <b>corbet</b> (editor, #1)
                              [<a href="/Articles/769369/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      So I took out what I believe was the offending part of that sentence; hopefully things are better now.  Apologies for any confusion.
      
          <div class="CommentReplyButton">
            <form action="/Articles/769369/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor769372"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making stable kernels more stable</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 24, 2018 11:25 UTC (Wed)
                               by <b>broonie</b> (subscriber, #7078)
                              [<a href="/Articles/769372/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
That's great, thanks! <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/769372/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor769379"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making stable kernels more stable</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 24, 2018 13:17 UTC (Wed)
                               by <b>sashal</b> (<b>&#x272D; supporter &#x272D;</b>, #81842)
                              [<a href="/Articles/769379/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
With regards to distros not using -stable, I think it's important to differentiate community distros and enterprise distros.<br>
<p>
Community distros such as Debian and Fedora track the stable tree, because it aligns with their model.<br>
<p>
However, enterprise distros don't do that since it doesn't fit in their business model for a few reasons:<br>
<p>
1. They don't have a reason or incentive to update anything which they don't think their customers use and pay them to maintain.<br>
2. They might want to backport entire drivers based on customer requests, which essentially forks their kernel tree and makes stable updates more tricky to use in that tree.<br>
3. The appearance of a slow moving kernel is better than one that receives 1000's of commits every month. Customers see few changes as a good thing which means for them that the kernel is "stable".<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/769379/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor769429"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making stable kernels more stable</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 24, 2018 18:16 UTC (Wed)
                               by <b>nilsmeyer</b> (guest, #122604)
                              [<a href="/Articles/769429/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; 3. The appearance of a slow moving kernel is better than one that receives 1000's of commits every month. Customers see few changes as a good thing which means for them that the kernel is "stable"</font><br>
<p>
If you still have a similar release cadence, for example due to security issues, there really isn't much gained by having a "stable" enterprise kernel. The only thing stable seems to be the major version. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/769429/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor769423"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making stable kernels more stable</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 24, 2018 16:04 UTC (Wed)
                               by <b>iabervon</b> (subscriber, #722)
                              [<a href="/Articles/769423/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Regardless of what you call it in each period, I think there's value in having announcements of a kernel both before and after Google runs zillions of tests on it.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/769423/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor769484"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">More information about Intel GFX CI</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 25, 2018 14:13 UTC (Thu)
                               by <b>mupuf</b> (subscriber, #86890)
                              [<a href="/Articles/769484/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
If you are interested about Intel's CI, please check out the talk Arek and I gave at FOSDEM earlier this year: <a href="https://archive.fosdem.org/2018/schedule/event/intel_ci/">https://archive.fosdem.org/2018/schedule/event/intel_ci/</a><br>
<p>
Here is my latest take on the job we are doing on the Intel CI:<br>
<p>
Linux's development model has been described by Eric S. Raymond as being<br>
akin to a bazaar, where any developer can make changes to Linux as long<br>
as they strictly improve the state of Linux, without regressing any<br>
application that currently runs on it. This allows Linux users to update<br>
their kernels and benefit from the work of all developers, without<br>
having to fix anything in their applications when a new version comes.<br>
Unfortunately, it is impossible for developers to try their changes on<br>
all the different hardware and userspace combination being used in the wild.<br>
<p>
Typically, a developer will mostly test the feature he/she is working on<br>
with the hardware at hand before submitting the patch for review. Once<br>
reviewed, the patch can land in a staging repository controlled by the<br>
maintainer of the subsystem the patch is changing. Validation of the<br>
staging tree is then performed ahead of sending these changes to Linus<br>
Torvalds (or one of his maintainers). Regressions caught at this point<br>
require to bisect the issue, which is time consuming and usually done by<br>
a separate team, which may become a bottleneck. Sometimes they let<br>
regressions through, hoping to be able to fix them during the -rc cycles.<br>
<p>
To address this bottleneck, the developer should be responsible for<br>
validating the change completely. This leads to a virtuous cycle as not<br>
only developers can rework their patches until they do not break<br>
anything (saving the time of other people), but they also become more<br>
aware of the interaction their changes have on userspace, which improves<br>
their understanding of the driver which leads to better future patches.<br>
<p>
To enable putting the full cost of integration on developers, validation<br>
needs to become 100% automated, have 100% code/HW coverage of the<br>
userspace usecases, and provide timely validation results to even the<br>
most time-pressured developers. To reach these really ambitious<br>
objectives, driver developers and validation engineers need to be<br>
considered as one team. The CI system developers need to provide a<br>
system capable of reaching the objectives, and driver developers need to<br>
develop a test suite capable of reaching the goal of having 100% code<br>
coverage of the whole driver on the CI system provided to them.<br>
<p>
Finally, this increase in understanding of how validation is done allows<br>
developers to know if their patch series will be properly validated,<br>
which reduces the risk of letting regressions land in Linux.<br>
<p>
The devil however lies in the details, so in this talk, we will explain<br>
how we are going from theory to practice, what is our current status and<br>
what we are doing to get closer to our ambitious goal! We will describe<br>
the current developer workflow and demonstrate how we empowered<br>
developers by providing timely testing as a transparent service to<br>
anyone sending patches to our mailing lists.<br>
<p>
<p>
One thing missing from this wall of text is: we need to create an open source toolbox for testing. And if we could have an hackable open source infrastructure with a canonical deployment for the project that would run HW-independent tests, along with hosting all the results, we would already have a good start. Then we could have external CI farms providing the results for HW-dependent tests. More work needed there!<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/769484/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor769580"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making stable kernels more stable</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 26, 2018 13:54 UTC (Fri)
                               by <b>pbonzini</b> (subscriber, #60935)
                              [<a href="/Articles/769580/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
For what it's worth, I have contacted Laura and Greg about KVM, and both have been very helpful and appreciative. It turns out that Fedora QA is not only depending on KVM, they are also running it nested, and under CentOS KVM at that! We will definitely add some kind of testing to RHEL and CentOS so that we don't cause trouble for Fedora.<br>
<p>
We might also look into adding a pointer to kvm-unit-tests.git as a submodule in the Linux tree, to ease testing on part of the stable tree maintainers. Thanks Jon for reporting this, it's very useful for maintainers that didn't make it to the summit.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/769580/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor770211"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making stable kernels more stable</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 31, 2018 16:58 UTC (Wed)
                               by <b>anton</b> (subscriber, #25547)
                              [<a href="/Articles/770211/">Link</a>] 
      </p>
      
      </div>
      </summary>
      I am wondering whether, for software like the Linux kernel which promises not to break the user experience, it is really necessary to run ancient kernels with only bug fixes applied.  I.e., we should all be able to switch to a relatively recent kernel version, because it behaves the same way as the ancient one, and if it does not, the kernel maintainers will fix it.  And indeed, upgrading the kernel while keeping the rest of the system the same has worked for me (I have not tried the 1993 Yggdrasil distribution with a present-day kernel, though:-).

<p>Of course, if you have high stability requirements, you will not want to run a freshly released kernel (bugs happen), but after a few months, the kernel should be mature enough, and maintaining ancient kernels should be unnecessary.   I.e., one (or, transitionally, two) stable branches should be enough.

<p>There is other software (such as gcc) that does not make such promises, and for this software we actually need ancient versions.

<p>Unfortunately, the mainstream distributions tend to treat all software alike: either no rolling release or all rolling release.
      
          <div class="CommentReplyButton">
            <form action="/Articles/770211/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2018, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
