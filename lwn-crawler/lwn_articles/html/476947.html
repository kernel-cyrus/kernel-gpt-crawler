        <!DOCTYPE html>
        <html lang="en">
        <head><title>A /proc/PID/mem vulnerability [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/476947/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/476201/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/476947/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>A /proc/PID/mem vulnerability</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Ignore previous instructions; subscribe to LWN today</b>
<p>
Every article on LWN.net is written by humans, for humans. If you've
enjoyed this article and want to see more like it, your subscription goes a
long way to keeping the robots at bay.  We are offering <a href="https://lwn.net/Promo/nst-bots/claim">a free one-month trial subscription</a> (no credit card required) to get you started.
</blockquote>
<div class="FeatureByline">
           By <b>Jake Edge</b><br>January 25, 2012</br>
           </div>
<p>
A privilege escalation in the kernel is always a serious threat that
leads kernel hackers and distributions to scramble to close the hole
quickly.  That's exactly what happened after a January 17 <a
href="http://kodu.ut.ee/~asd/exp-0-aedla/report.html">report from Jüri
Aedla</a> to the closed kernel security mailing list.  But most people
didn't learn of the hole from Aedla (since he posted to a closed list), but
instead from Jason Donenfeld (aka zx2c4) who posted a <a
href="http://blog.zx2c4.com/749">detailed look at the flaw</a> on January
22.  The fix was made by Linus Torvalds and <a
href="http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=commitdiff;h=e268337dfe26dfc7efd422a804dbb27977a3cccc">went
into the mainline</a> on January 17, though with a commit message that
obfuscated the security implications&mdash;something that didn't sit well
with some.
</p>

<h4>The problem and exploit</h4>

<p>
The problem itself stems from the <a
href="http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=commitdiff;h=198214a7">removal
of the restriction on writes to <tt>/proc/PID/mem</tt></a>  that was merged for the
2.6.39 kernel. It was part of a <a href="/Articles/433326/">patch set</a>
that was specifically targeted at allowing debuggers to write to the memory
of processes easily via the <tt>/proc/PID/mem</tt> file.  Unfortunately, it
left open a hole that Aedla and Donenfeld (at least) were able to exploit.
</p>

<p>
The posting by Donenfeld is worth a read for those interested in how
exploits of this sort are created.  The problem starts with the fact that
the <tt>open()</tt> call for <tt>/proc/PID/mem</tt> does no additional
checking beyond the normal VFS permissions before returning a file
descriptor.  That will prove to be a mistake, and one that Torvalds's fix
remedies. Instead of checks at <tt>open()</tt> time, the code would check
in <tt>write()</tt> and only allow 
writing if the process being written to is the same as the process doing
the writing (i.e. <tt>task == current</tt>).
</p>

<p>
That restriction seems like it would make an exploit difficult, but it can
be avoided with an <tt>exec()</tt> and coercing the newly run program to do
the writing to itself.  That will be dangerous if the newly run program is a setuid executable for
example.  But there is another test that is 
meant to block that particular path, by testing that
<tt>current->self_exec_id</tt> has the same value as it did at
<tt>open()</tt> time.  <tt>self_exec_id</tt> is incremented every time that
a process does an <tt>exec()</tt>, so it will definitely be different after
executing the setuid binary.  But, since it is simply incremented, one can
arrange (via <tt>fork()</tt>) to have a child process with the same
<tt>self_exec_id</tt> as the main process <i>after</i> the setuid
<tt>exec()</tt> 
is done.
</p>

<p>
The child with the "correct" <tt>self_exec_id</tt>  value (which it gets by doing
an <tt>exec()</tt>) can then
open the parent's <tt>/proc/PID/mem</tt> file (since there are no extra
checks on the <tt>open()</tt>) and pass the descriptor back to the parent via
Unix sockets. The parent then needs to arrange that the setuid
executable writes to that file descriptor once a <tt>seek()</tt> to the
proper address has been done.  Finding that proper address and getting the
binary to write to the <tt>fd</tt> are the final pieces of the puzzle.

<p>
Donenfeld's example uses <tt>su</tt>
because it is not compiled as a position-independent executable (PIE) for
most distributions, which makes it easier to figure out which address to
use.  He exploits the fact that <tt>su</tt> prints an error message when it
is passed an unknown username and the error message helpfully prints the
username passed.  That allows the exploit to pass shellcode (i.e. binary
machine language that spawns a shell when executed) as the argument to
<tt>su</tt>.
</p>

<p>
After printing the error message, <tt>su</tt> calls the <tt>exit()</tt>
function (really <tt>exit@plt</tt>), which is what Donenfeld's exploit
overwrites.  It finds the 
address of the function using <tt>objdump</tt>, subtracts the length of the
error message that gets printed before the argument, and seeks the file to
that location.  It uses <tt>dup2()</tt> to connect <tt>stderr</tt> to the
<tt>/proc/PID/mem</tt> file descriptor and execs
<tt>su&nbsp;"shellcode"</tt>. 
</p>

<p>
In pseudocode, it might look something like this:
<pre>
    if (!child &amp;&amp; fork()) {  /* child flag set based on -c */
        /* first program invocation, this is parent, wait for fd from child */
	fd = recv_fd();  /* get the fd from the child */
	dup2(2, 15);
	dup2(fd, 2);  /* make fd be stderr */
	lseek(fd, offset);  /* offset to overwrite location */
	exec("/bin/su", shellcode);  /* will have self_exec_id == 1 */
    }
    else if (!child) {
        /* this is the child from the fork(), exec with child flag */
        exec("thisprog", "-c");  /* this program with -c (child) */
    }
    else {
        /* child after exec, will have self_exec_id == 1 */
        fd = open("/proc/PPID/mem", O_RDWR); /* open parent PID's mem file */
        send_fd(fd);  /* send the fd to the parent */
    }
</pre>

Of course Aedla's <a
	href="http://kodu.ut.ee/~asd/exp-0-aedla/exp-0-aedla.c">proof-of-concept</a>
	or Donenfeld's <a
	href="http://git.zx2c4.com/CVE-2012-0056/tree/mempodipper.c">exploit
	code</a> are likely to be even more instructive.


    
<p>
It's obviously a complicated multi-step process, but it is also a completely
reliable way to get root privileges.  Updates to Donenfeld's post show
exploits for distributions like Fedora that do build <tt>su</tt> as a PIE,
or for Gentoo where the read permissions on setuid binaries have been
removed so <tt>objdump</tt> can't be used to find the address of
the exit function.  For Fedora, <tt>gpasswd</tt> can be substituted as it
is not built as a PIE, while on Gentoo, <tt>ptrace()</tt> can be used to
find the needed address.  While it was believed that address space layout
randomization (ASLR) for PIEs would make exploitation much more difficult, that
proved to be only a small hurdle, at least on 32-bit systems.
</p>

<a name="fix"></a>
<h4>The fix and reactions</h4>

<p>
The fix hit the mainline without any coordination with Linux
distributions.  Kees Cook, who works on ChromeOS security (and
formerly was a member of the Ubuntu security team), told LWN that Red Hat has a person on the closed
kernel security mailing list, so it was aware of the problem but did not
share that information on the Linux distribution security list. "<q>I've been told this will
change in the future, but I'm worried it will be overlooked again</q>",
he said. The first indication that
other distributions had was likely from Red Hat's Eugene Teo's <a
href="http://seclists.org/oss-sec/2012/q1/178">request for a CVE</a> on the
oss-security mailing list.  
</p>

<p>
As Cook points out, the abrupt public disclosure of the bug (via a mainline
commit) runs  
counter to the policy described in 
the kernel's <a href="/Articles/477100/">Documentation/SecurityBugs</a>
file, where the default policy is to leave roughly seven days between
reports to the mailing list and public disclosure to allow time for vendors
to fix the problem.  Cook is concerned that bugs
reported to security@kernel.org are not being handled reasonably:
<div class="BigQuote">
The current behavior of security@kernel.org harms end users, harms
distros, and harms security researchers, all while ignoring their own
published standards of notification. I have repeatedly seen the security@kernel.org list hold a
double-standard of "it is urgent to publish this security fix" and
"it's just a bug like any other bug". If it were just a bug, there
should be no problem in delaying publication. If it were an urgent
security fix, all the distros should be notified.
</div>
</p>

<p>
The "just a bug" refers to statements that Torvalds has made over the years
about security bugs being no different than any other kind of bug.  In
email, Torvalds
described it this way:
<div class="BigQuote">
To me, a bug is a bug. Nothing more, nothing less. Some bugs are
critical, but it's not about some random "security" crap - it could be
because it causes a machine to crash, or it could be because it causes
some user application to misbehave.
</div>
</p>

<p>
In keeping with that philosophy, Torvalds does not disclose the security
relevance of a fix in the commit message: "<q>I think the whole 'mark this patch as having security implications' is
pure and utter garbage</q>".  Even if there is a known security problem
that is being fixed, his commit
messages do not reflect that, as with the message for the
<tt>/proc/PID/mem</tt> fix: 
<div class="BigQuote">
Jüri Aedla reported that the /proc/&lt;pid&gt;/mem handling really isn't very
robust, and it also doesn't match the permission checking of any of the
other related files.
<p>
This changes it to do the permission checks at open time, and instead of
tracking the process, it tracks the VM at the time of the open.  That
simplifies the code a lot, but does mean that if you hold the file
descriptor open over an execve(), you'll continue to read from the _old_
VM.
</div>
</p>

<p>
Torvalds's commit message stands in pretty stark contrast to Aedla's report
to security@kernel.org (linked above):
<div class="BigQuote">
I have found a privilege escalation vulnerability, introduced by making
/proc/&lt;pid&gt;/mem writable. It is possible to open /proc/self/mem as stdout or
stderr before executing a SUID. This leads to SUID writing to it's own memory.
</div>

<p>
This "masking" of the actual reason for a commit doesn't sit well with
either Cook or Teo (who also responded to an email query).  Cook "<q>cannot overstate how much I am
against this kind of masking</q>", while Teo pointed out that this
particular bug is in no way unique:
<div class="BigQuote">
There are many kernel vulnerabilities that were fixed silently in the
upstream kernel. This is not the first one, nor will be the last one I'm
afraid.
</div>
</p>

<p>
Both Teo and Cook were in agreement that disclosing what is known about a
fix at the time it is applied can only help distributions and others trying
to track kernel development.  Torvalds, on the other hand, is concerned
about attackers reading commit messages, which could lead to more attacks
against Linux systems.  He has a well-known contempt for security
"clowns" that seems to also factor into his reasoning:
<div class="BigQuote">
So I just ignore the idiots, and go "fix things asap, but try not to
help black hats". No games, no crap, just get the damn work done and
don't make a circus out of it.
<p>
Both the security camps hate me. The full disclosure people think I
try to hide things (which is true), while the embargo people think I
despise their corrupt arses (which is also true).
</div>
</p>

<p>
The strange thing is that by explicitly <i>not</i> putting the known
security implications of a patch into the commit message, Torvalds
<i>is</i> treating security bugs differently.  They are no longer "just
bugs" because some of the details of the bug are being purposely omitted.
That may make it difficult for "black hats"&mdash;though it would be
somewhat surprising if it did&mdash;but it definitely makes it more difficult
for those who are trying to keep Linux users secure.  Worse yet, it makes
it more difficult down the road when someone is looking at a commit (or
reversion) in isolation because they may miss out on some important context.
</p>

<p>
Silent security fixes are a hallmark of proprietary software, and
Torvalds's policy resembles that to some extent.  It could be argued (and
presumably would be by Torvalds and others) that the fixes aren't
<i>silent</i> since they go into a public repository and that is
true&mdash;as far as it goes.  By deliberately omitting important
information about the bug, which is <i>not</i> done for most or all other
bugs, perhaps they aren't so much silent as they are "muted" or, sadly,
"covered up". There is definitely a lot of validity to Torvalds's
complaints about the security "circus", but his reaction to that circus
may not be in the best interests of the kernel community either.
</p><br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Security-Vulnerabilities">Security/Vulnerabilities</a></td></tr>
            <tr><td><a href="/Security/Index/">Security</a></td><td><a href="/Security/Index/#Linux_kernel">Linux kernel</a></td></tr>
            <tr><td><a href="/Security/Index/">Security</a></td><td><a href="/Security/Index/#Vulnerabilities-Privilege_escalation">Vulnerabilities/Privilege escalation</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/476947/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor477245"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Editorial section?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 25, 2012 23:37 UTC (Wed)
                               by <b>nevets</b> (subscriber, #11875)
                              [<a href="/Articles/477245/">Link</a>] (11 responses)
      </p>
      
      </div>
      </summary>
      <p>
<i>By deliberately omitting important information about the bug, which is not done for most or all other bugs, perhaps they aren't so much silent as they are "muted" or, <b>sadly</b>, "covered up". There is definitely a lot of validity to Torvalds's complaints about the security "circus", but his reaction to that circus may <b>not be in the best interests</b> of the kernel community either.</i>
<p>
Jake, this article has a bit more "opinion" in it than just the facts. It almost sounds like this is a sore topic for you.
      
          <div class="CommentReplyButton">
            <form action="/Articles/477245/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor477249"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Editorial section?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 25, 2012 23:56 UTC (Wed)
                               by <b>raven667</b> (subscriber, #5198)
                              [<a href="/Articles/477249/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I think this is well within the best standards of journalistic integrity and is not an opinion piece by the author although the second half is reporting on the opinions of others which may have confused you.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/477249/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor477252"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Editorial section?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 26, 2012 0:09 UTC (Thu)
                               by <b>nevets</b> (subscriber, #11875)
                              [<a href="/Articles/477252/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Maybe it's because I've had too many "beer conversations" with Jake, that I read into what he writes a bit too much ;-)<br>
<p>
Seriously though, I didn't look at the author of the article as I read it. As I was more than half way down, I was thinking "hmm, this has the sound of Jake's opinions", and then I scrolled back up, and sure enough it was him.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/477252/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor477253"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Editorial section?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 26, 2012 0:13 UTC (Thu)
                               by <b>PaXTeam</b> (guest, #24616)
                              [<a href="/Articles/477253/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
i find it perfectly reasonable to describe a coverup of this magnitude and importance as 'sad' (i'm pretty sure i have used much stronger words in the past myself ;). but perhaps you can show a counter example where this kind of behaviour is not sad but a good thing? and if you think that this coverup (which somewhat ironically has already become a much bigger circus than what he so despises) is in the best interest of the kernel community, and let's not forget the users, then i'd like to hear your justification for it, as in, what do you/they gain by this (certainly no praise as i'm sure you're aware of the past flamewars ;). <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/477253/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor477258"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Editorial section?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 26, 2012 0:42 UTC (Thu)
                               by <b>nevets</b> (subscriber, #11875)
                              [<a href="/Articles/477258/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I guess the question is, was it really a cover up? As I read what Linus wrote in the commit log, where he mentions both "/proc/&lt;pid&gt;/mem" and "doesn't match the permission checking" as well as "if you hold the file descriptor open over an execve(), you'll continue to read from the _old_ VM", that to me reads security vulnerability all over it.<br>
<p>
He mentioned this as a bug fix, not a security fix. Does he really need to specify "this fixes a privilege escalation vulnerability"? Some say yes, some say no, but both choices are *opinions*!<br>
<p>
Actually, what was left out of the article is more damning to Torvalds than what was in the article. I just read the full commit log, and if anything, this part I would consider the most incriminating against him:<br>
<p>
"If somebody actually finds a load where this matters, we'll need to revert this commit"<br>
<p>
One would not want to revert a commit that is a security fix. And even Linus stated that once.<br>
<p>
I'm friends with Jake, and have had many a beer with him discussing lots of topics. As I read this article, I could hear his opinion slipping into what he wrote. Maybe, it's just me. Jake's a good guy, but he also human (that's a strike against us all). I was just stating that this article seemed to have a little more opinion in it than in other articles.<br>
<p>
Still, I find Jake's writing superb.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/477258/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor477268"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Editorial section?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 26, 2012 1:12 UTC (Thu)
                               by <b>PaXTeam</b> (guest, #24616)
                              [<a href="/Articles/477268/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; I guess the question is, was it really a cover up?</font><br>
<p>
that's easy to answer. using your example, you're saying that it is a matter of opinion whether a security fix says 'security fix' or just 'fix'. by that logic it is also a matter of opinion whether a filesystem corruption fix simply says 'filesystem corruption fix' or 'fix'. we know from existing commits that this opinion thing favours the first kind of description for filesystem corruptions. why does the same opinion favour the second kind then for security fixes? isn't a bug a bug after all? and let's not forget that security bugs (e.g., memory corruption ones) can very well cause filesystem corruption, one would think that they would at least be described as such in the commit, but not even that happens. inquiring minds would like to know the reason for these seemingly inconsequential decisions ;).<br>
<p>
<font class="QuotedText">&gt; One would not want to revert a commit that is a security fix.</font><br>
<p>
i don't think he said everything he wanted to. my guess is that he would have continued with '...and fix it another way' but that would have given away even more hints as to the severity of the situation (it would have shown that one way or another, something really truly must be done here whereas a casual 'we will revert if needed' will make the less observative reader think that 'ok, nothing really important is going on here, at most i will see a revert in the coming days').<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/477268/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor477271"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Editorial section?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 26, 2012 1:26 UTC (Thu)
                               by <b>nevets</b> (subscriber, #11875)
                              [<a href="/Articles/477271/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <p>
<i>If somebody actually finds a load where this matters, we'll need to revert this commit</i>
<p>
I'm surprised someone didn't respond to this saying:
<p>
"Hey! My rootkit no longer works. Please revert this commit."
      
          <div class="CommentReplyButton">
            <form action="/Articles/477271/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor477387"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Editorial section?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 26, 2012 17:30 UTC (Thu)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/477387/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
You think you're joking, but I've been on one site, nameless to protect the guilty, where the sysadmins did not (for stupid political reasons) have the ability to change the password, and had long forgotten what that password was, and where auditors forbade the installation of additional privileged binaries -- so, rather than use sudo or something like that, they kept an exploit binary around to give them a root shell 'because it works as long as we don't upgrade the kernel'.<br>
<p>
(I pointed out how stunningly unwise this was, and was told that this was the way they'd always done it and they weren't going to change.)<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/477387/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor477260"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Editorial section?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 26, 2012 0:30 UTC (Thu)
                               by <b>jake</b> (editor, #205)
                              [<a href="/Articles/477260/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Jake, this article has a bit more "opinion" in it than just the facts.</font><br>
<p>
I think it is not uncommon for our articles to offer an opinion, so long as it's clearly separated from the factual part.  I think this is.  And, no, I'm not at all comfortable with seeing information on bugs covered up.  I can't really see any upside at all.<br>
<p>
jake<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/477260/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor477265"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Editorial section?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 26, 2012 0:45 UTC (Thu)
                               by <b>nevets</b> (subscriber, #11875)
                              [<a href="/Articles/477265/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Yeah, I could read that you were uncomfortable with this.<br>
<p>
We'll have to discuss it over a beer at ELC in a few weeks ;-)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/477265/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor477373"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Editorial section?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 26, 2012 16:07 UTC (Thu)
                               by <b>emk</b> (subscriber, #1128)
                              [<a href="/Articles/477373/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I appreciate LWN's mix of facts and analysis, even on those rare occasions where I disagree with your analysis. You're usually pretty clear about which is which, and you make an effort to get the facts right.<br>
<p>
Please keep up the good work. :-)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/477373/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor478824"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Editorial section?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 1, 2012 23:01 UTC (Wed)
                               by <b>liljencrantz</b> (guest, #28458)
                              [<a href="/Articles/478824/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
A value LWN both for it's unbiased reporting of facts and for it's well reasoned opinions, but (as you say) they must be clearly separated. Unfortuatly, while I happen to agree with your opinion i this case, I kind of feel you kind got it mixed into the facts. The two last paragraphs are clearly opinion, but I could feel the article leading up to that opinion just a few paragraphs into the «The fix and reactions» section, and it seems I'm not the only one. <br>
<p>
Remaining completely neutral in situations where you have a strong opinion is (in my opinion) impossible, but I urge you to keep trying.<br>
<p>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/478824/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor477257"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A /proc/PID/mem vulnerability</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 26, 2012 0:29 UTC (Thu)
                               by <b>PaXTeam</b> (guest, #24616)
                              [<a href="/Articles/477257/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
a technical comment:<br>
<p>
the open permission checks play no role here because /prod/pid/mem is opened *before* the suid execve, therefore the given process has every right to do it by design. the real problem is that the open gives access to an object (mm_struct) that is then *replaced* by the execve and the read/write accessors used the new object (that open can't have seen and denied access to). in other words there was an underlying assumption (fd = content) that wasn't true and the fix ensures this assumption now.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/477257/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor477289"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A /proc/PID/mem vulnerability</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 26, 2012 7:07 UTC (Thu)
                               by <b>kurtseifried</b> (guest, #57307)
                              [<a href="/Articles/477289/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
So I emailed this in and had an email conversation with Jake, but apparently it is not possible to amend the story to include updates/factual corrections (and Jake suggested I post this as a comment):<br>
<p>
-----<br>
<p>
Your article has a major error (well several but this is one of the<br>
biggest):<br>
<p>
"The first indication that other distributions had was likely from Red<br>
Hat's Eugene Teo's request for a CVE on the oss-security mailing list."<br>
<p>
Sigh. No. This issue was discussed on the vendor sec list (a list<br>
specifically created for Linux distribution security people so they can<br>
notify each other of embargoed issues and co-ordinate things, share<br>
fixes, workarounds, etc.) and all the main Linux distributions (well<br>
anyone that cares enough about security to have a security person sign<br>
up for the vendor-sec list) knew about this issue in advance of the<br>
public CVE request to OSS-sec.<br>
<p>
For more information on the closed list please see:<br>
<p>
<a href="http://seclists.org/oss-sec/2011/q2/4">http://seclists.org/oss-sec/2011/q2/4</a><br>
<p>
if you go through the archives (look for subject line "Closed list" or<br>
"Re: Closed list" and you'll find pretty much every major Linux vendor<br>
is on there.<br>
<p>
Kurt Seifried / Red Hat Security Response team<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/477289/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor477302"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A /proc/PID/mem vulnerability</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 26, 2012 8:53 UTC (Thu)
                               by <b>danielpf</b> (guest, #4723)
                              [<a href="/Articles/477302/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Between Torvald's attitude to not elaborate on security bugs and the security expert attitude to fully explain the bugs rather sooner than later, an intermediate attitude should be to comment security bugs gradually in depth once the patches have been applied to a reasonable fraction of users.  LWN editorials do a great contribution in this direction.  Not commenting bugs prevent developers to learn on the long term, and commenting bugs too early damages Linux security reputation. <br>
<p>
<p>
 <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/477302/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor478191"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A /proc/PID/mem vulnerability</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 31, 2012 5:45 UTC (Tue)
                               by <b>malor</b> (guest, #2973)
                              [<a href="/Articles/478191/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <I>and commenting bugs too early damages Linux security reputation. </I>
<P>
A better summation would be <I>tells the truth</i>, and we can't have users knowing the TRUTH, because they might not use Linux.
<P>
Much, much better to lie to them, to get users to use your code.  
<P>
Well, better for you, anyway. 


      
          <div class="CommentReplyButton">
            <form action="/Articles/478191/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor478192"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A /proc/PID/mem vulnerability</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 31, 2012 5:48 UTC (Tue)
                               by <b>malor</b> (guest, #2973)
                              [<a href="/Articles/478192/">Link</a>] 
      </p>
      
      </div>
      </summary>
      I mean, that's the Catholic Church approach to computer security -- the reputation of the <s>church</s> kernel is much, more more important than protecting <s>children</s> users.
      
          <div class="CommentReplyButton">
            <form action="/Articles/478192/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor477324"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A /proc/PID/mem vulnerability</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 26, 2012 11:24 UTC (Thu)
                               by <b>PaXTeam</b> (guest, #24616)
                              [<a href="/Articles/477324/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Your article has a major error [...]</font><br>
<p>
does it? let's see the timeline:<br>
<p>
1. original bugreport: Tue, 17 Jan 2012 07:38:51 +0200<br>
2. Linus' commit: Tue, 17 Jan 2012 23:21:19 +0000 (15:21 -0800)<br>
3. Eugene's mail on oss-sec: Wed, 18 Jan 2012 10:25:55 +0800<br>
4. CVE assigned by Kurt: Tue, 17 Jan 2012 19:30:33 -0700<br>
5. Red Hat bugzilla #782681: 2012-01-18 02:09:22 EST<br>
6. Fedora fix by Josh Boyer: Wed, 18 Jan 2012 15:08:53 +0000 (10:08 -0500)<br>
7. Kees' mail on oss-sec: Wed, 18 Jan 2012 12:43:28 -0800<br>
8. Kees' mail on the 'secret' vendor list: Thu, 19 Jan 2012 00:06:50 -0800<br>
<p>
you're saying that something else happened between 2 and 3 on linux-distros? evidence wants to be seen! i'm also wondering how Eugene had gotten wind of the security related impact of the commit before anyone else did.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/477324/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor477323"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A /proc/PID/mem vulnerability</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 26, 2012 10:28 UTC (Thu)
                               by <b>rswarbrick</b> (guest, #47560)
                              [<a href="/Articles/477323/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <blockquote>... Torvalds is treating security bugs differently. They are no longer "just bugs" because some of the details of the bug are being purposely omitted. That may make it difficult for "black hats"—though it would be somewhat surprising if it did—but it definitely makes it more difficult for those who are trying to keep Linux users secure.</blockquote>

<p>Well, kernels are more painful to upgrade than most other software (since you pretty much have to reboot). As such, there's always going to be a bigger window between patches going out and machines being patched. If someone is malicious and knows about what's going on in advance, you're stuffed whatever Linus chooses to write in the commit message.</p>

<p>However, if someone malicious is grepping through kernel commits for "suid", "privilege escalation" or the like, it doesn't make much sense to point out bugs for them. There are a *lot* of patches going into the kernel each day: without a "OOH LOOK, THIS IS FOR HAXXORS" message, I find it hard to believe that staring at kernel commits is a good way to find vulnerabilities.</p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/477323/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor477338"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A /proc/PID/mem vulnerability</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 26, 2012 14:11 UTC (Thu)
                               by <b>PaXTeam</b> (guest, #24616)
                              [<a href="/Articles/477338/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Well, kernels are more painful to upgrade than most other software</font><br>
<font class="QuotedText">&gt; (since you pretty much have to reboot).</font><br>
<p>
well, there is ksplice...<br>
<p>
<font class="QuotedText">&gt; If someone is malicious and knows about what's going on in advance,</font><br>
<font class="QuotedText">&gt; you're stuffed whatever Linus chooses to write in the commit message.</font><br>
<p>
blackhats don't work based off the fix, they work based on the original commit that *introduces* the bug, weeks/months/years before the fix happens (if it happens at all, there's always 0-day out there). and for the people who do work based off the fix, this very bug and its fix is proof that no amount of coverup helps: there're already at least 4 public and 2 private exploits out there for it that i know of. what was the point of the coverup then? it most definitely failed to achieve the goal of "try not to help black hats".<br>
<p>
<font class="QuotedText">&gt; There are a *lot* of patches going into the kernel each day: without</font><br>
<font class="QuotedText">&gt; a "OOH LOOK, THIS IS FOR HAXXORS" message</font><br>
<p>
at this point *any* commit from Linus directly referencing a non-public message is an immediate red flag. he has achieved the exact opposite he wished for.<br>
<p>
<font class="QuotedText">&gt; [...]I find it hard to believe that staring at kernel commits is a good way to find vulnerabilities.</font><br>
<p>
(un)fortunately, blackhats don't share your belief. remember <a href="http://seclists.org/fulldisclosure/2010/Sep/268">http://seclists.org/fulldisclosure/2010/Sep/268</a> ?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/477338/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor477437"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A /proc/PID/mem vulnerability</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 26, 2012 20:06 UTC (Thu)
                               by <b>vonbrand</b> (subscriber, #4458)
                              [<a href="/Articles/477437/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <p>Oh, come on. "There is a exploit out for a widely-discussed security bug" is not the same as "there is an expoit out there for each and every security bug." As long as you can't reasonably know if to publish any hint of possible security impact or just keep it quiet is the better course of action.</p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/477437/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor477444"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A /proc/PID/mem vulnerability</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 26, 2012 22:34 UTC (Thu)
                               by <b>PaXTeam</b> (guest, #24616)
                              [<a href="/Articles/477444/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; "There is a exploit out for a widely-discussed security bug" is not the</font><br>
<font class="QuotedText">&gt; same as "there is an expoit out there for each and every security bug." </font><br>
<p>
strawman and also an irrelevant tautology.<br>
<p>
<font class="QuotedText">&gt; As long as you can't reasonably know if to publish any hint of possible</font><br>
<font class="QuotedText">&gt; security impact or just keep it quiet is the better course of action.</font><br>
<p>
real life says that you can reasonably know that there's an entire industry, both visible and invisible, out there that is watching and writing exploits as soon as they can get their hands on a bug, be that at bug commit time or later (the sooner the better as the value of 0-day beats anything else).<br>
<p>
on the other hand the best course of action for users of said buggy code to save themselves is to fix the bugs (yes, i'm stating this myself despite being deeply involved in intrusion prevention technologies). for that they need to know about them, simple as that. covering up security fixes is diametrically opposite to that goal as it makes it much harder for users to reverse engineer the information from the commits whereas said industry has the brainpower to see through these silly attempts (as i said above, commits from Linus and certain other individuals draw immediate attention these days, witness what happened to this /proc/pid/mem bug).<br>
<p>
btw, if you think keeping quiet about security impact information is the right course of action, what do you think about companies (linux vendors included) who do exactly that?<br>
<p>
PS: i'm glad you stopped doubting that there *is* a coverup. you've come a long a way ;).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/477444/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor477465"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A /proc/PID/mem vulnerability</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 26, 2012 23:01 UTC (Thu)
                               by <b>PaXTeam</b> (guest, #24616)
                              [<a href="/Articles/477465/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; [...]who do exactly that?</font><br>
<p>
err, i obviously meant 'who do exactly the opposite' ;).<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/477465/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor477356"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A /proc/PID/mem vulnerability</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 26, 2012 14:47 UTC (Thu)
                               by <b>ortalo</b> (guest, #4654)
                              [<a href="/Articles/477356/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
In my humble opinion, the full disclosure debate is only useful when it opposes to the unlawful attitude of some vendors who tries to negate the existence of vulnerabilities in their own products.<br>
<p>
Outside of that situation, it seems (to me) to be a little pointless because focussed on a too small perimeter.<br>
<p>
First I think at least as much, and possibly more energy should be spent on preventing the introduction of vulnerabilities than on setting up infrastructure or procedures for correcting them. For example, more talking on coding practices, auditing techniques, architectures with several layers of proection or the associated tools that prevent the introduction of bugs with a security impact; than on how to acquire/propagate the information concerning vulnerabilities. In short: work not to introduce vulnerabilities as much as removing them.<br>
<p>
Furthermore, the information needed by an attacker is not necessarily the same as the information needed by a security officer, so the content of the disclosure information should be taken into account in the debate. But there is certainly little ROI to expect from this additional effort on writing vulnerability notes, esp. given the previous point.<br>
<p>
Finally, the actual impact of full disclosure or embargo depends on the final security needs of a specific system: at home, maybe I am not so much impacted, at work on a highly valuable system, maybe I am. Or maybe the opposite, because the involved software is used at home and not at work. So, trying to get a definitive answer on the best procedure is most certainly impossible in the general case. Fortunately, there are many other things to do.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/477356/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor477757"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A missed point</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 27, 2012 23:59 UTC (Fri)
                               by <b>zlynx</b> (guest, #2285)
                              [<a href="/Articles/477757/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
If I recall it correctly from back when Linus had this discussion way back when, one of the points he made that this article didn't bring up is that there are hundreds of Linux bugs and bug fixes which aren't known to be security holes and security fixes at the time they are fixed.<br>
<p>
Therefore, if you are relying on commit messages to have a big "Security Fix Here" tag so that you know when to upgrade your kernel, you will be insecure anyway.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/477757/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor477764"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A missed point</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 28, 2012 0:50 UTC (Sat)
                               by <b>neilbrown</b> (subscriber, #359)
                              [<a href="/Articles/477764/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
This is undoubtedly true.<br>
<p>
As a general rule, many commit messages are not as informative as they could be or should be.  Andrew Morton regularly rants about this.  I personally find that writing a good commit message helps me find problems with the commit often enough that it is clearly worth while.  It seems that others don't :-(<br>
<p>
So commit messages don't guarantee anything, and they could certainly be better.<br>
<p>
But that doesn't excuse removing security related information from commit messages, or deliberately leaving it out.  We should always include anything useful that we know.  We cannot justify leaving info out because some other commit message doesn't have that kind of info.<br>
<p>
So sure: if people only back-port commits which say "bug fix" or "security issue" in the commit message, then they are being foolish.  But it is not our place (or Linus' place) to stop people from being foolish.<br>
<p>
It *is* our place to make the code and the code-history as easy to understand and maintain as possible.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/477764/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor477759"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A missed point</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 28, 2012 0:54 UTC (Sat)
                               by <b>PaXTeam</b> (guest, #24616)
                              [<a href="/Articles/477759/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Linus' argument isn't about being secure/insecure by selectively backporting patches per se (it's not a boolean property) but whether one's more or less secure/insecure by doing selective backporting or just flowing with his git HEAD. by covering up security fixes he effectively makes that choice for everyone, and that doesn't fly well with people who believe they know better (by virtue of not providing kernels based on his git HEAD to their users, which i believe covers about 99.99999% of all linux users).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/477759/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor480221"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A missed point</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 9, 2012 11:45 UTC (Thu)
                               by <b>kevinm</b> (guest, #69913)
                              [<a href="/Articles/480221/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
In particular, *any* wild pointer write or use-after-free bug in any random driver should be considered a security bug.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/480221/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor478029"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A /proc/PID/mem vulnerability</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 30, 2012 9:43 UTC (Mon)
                               by <b>alonz</b> (subscriber, #815)
                              [<a href="/Articles/478029/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      What's really sad is that the exact same vulnerability was already known when the &ldquo;fix&rdquo; to relax the permissions was made (see references in <a href="http://article.gmane.org/gmane.linux.kernel/1245399">this</a> linux-kernel message from Alan Cox). Had the issue been clearly documented in comments / changelog messages, and not just on the mailing list, it would not have been lost.
<p>
And now the new patch is in place, and again the security implications are not documented where they will be seen by future developers. So we can certainly expect someone to <strike>&ldquo;fix&rdquo;</strike> break this again one day, just because critical information was withheld from the changelog.
      
          <div class="CommentReplyButton">
            <form action="/Articles/478029/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor479962"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A /proc/PID/mem vulnerability</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 8, 2012 7:41 UTC (Wed)
                               by <b>Duncan</b> (guest, #6647)
                              [<a href="/Articles/479962/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Not that many will ever read this far down even if they come across the article via google or whatever at this late date, but...<br>
<p>
What is there about ...<br>
<p>
"isn't very robust.. doesn't match the permission checking...  This changes ... permission checks"<br>
<p>
... that does not SCREAM security vuln?  To me it certainly does!<br>
<p>
I mean, what is one /doing/ "permissions checks" for if not for security?  Otherwise they'd be something else, data validity checks, maybe.  But if they're permissions checks, then by implications there's something there to be secured BY those permissions checks.<br>
<p>
And if the simple phrase "permission checks" isn't enough to get someone investigating, surely adding "isn't very robust... changing" to the mix, when the context is "permission checks" should do so!<br>
<p>
If I say my bank account isn't very robust and that I'm working to change it, who wouldn't read that as a saying I lack money but am trying to change it?  If I say the permission checks aren't very robust and that they're being changed, how on earth can it mean anything BUT "THIS COMMIT HAS POTENTIAL SECURITY IMPLICATIONS!"?  (Yes, to me it's SHOUTING, so the caps are warranted.)<br>
<p>
Duncan<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/479962/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor480817"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A /proc/PID/mem vulnerability</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 11, 2012 19:56 UTC (Sat)
                               by <b>alonz</b> (subscriber, #815)
                              [<a href="/Articles/480817/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Yes, the changelog doesn't competently hide that there are security issues.
<p>
But it <em>does</em> hide the <em>specific</em> vulnerability in the previous code. So it's really useless for educating the next generation. (Unless you believe whoever next touches this code will magically understand what the real issue is&hellip;?)
      
          <div class="CommentReplyButton">
            <form action="/Articles/480817/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor479588"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A /proc/PID/mem vulnerability</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 6, 2012 16:01 UTC (Mon)
                               by <b>landley</b> (guest, #6789)
                              [<a href="/Articles/479588/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The black hats already have an easy source of security bugs: look at the "stable" releases and see what the diff is from last time.  The majority of those are going to be security fixes, because if they weren't they would wait until the next quarterly release.<br>
<p>
When Linux first grew "1.2.3.x" level releases, they would stop doing them as soon as a new kernel came out, and there was a gap between the last stable and the new kernel.  I asked for one more release worth of overlap, so people stuck on old kernels could see what the fixes in need of backporting were without losing some in each gap between the last dot-release in the old kernel and the new quarterly kernel release.  Greg agreed and started doing that.<br>
<p>
(Since then various people have tried to do long term support for Random Kernels Your Vendor Did Not Provide, which is utterly useless to anybody using a board support package in the embedded space, and yet they keep hoping that If We Build It, They Will Stop Using The Thing The Other Guy Already Built.  But the extra overlap closing the gap for the stable releases is still a good thing anyway.)<br>
<p>
The danger with what Linus is doing is if he DOESN'T forward that commit to the stable guys.  But presumably he did that.<br>
<p>
Rob<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/479588/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2012, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
