        <!DOCTYPE html>
        <html lang="en">
        <head><title>Obstacles for kdbus [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/640357/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/639897/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/640357/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>Obstacles for kdbus</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>This article brought to you by LWN subscribers</b>
<p>
Subscribers to LWN.net made this article &mdash; and everything that
       surrounds it &mdash; possible.  If you appreciate our content, please
       <a href="/Promo/nst-nag3/subscribe">buy a subscription</a> and make the next
       set of articles possible.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>April 15, 2015</br>
           </div>
The kdbus patch set, which adds a D-Bus-like messaging facility to the
kernel, has been through several rounds of review over the course of the
last year.  The number of comments has been dropping with each review
cycle, and the code seemed like it could be on track for a relatively easy
merge into the 4.1 kernel.  A closer look, though, reveals that there was
some residual unhappiness from the last rounds that was always likely to
flare up into active opposition when an attempt to merge kdbus was made.
And, indeed, that is exactly what happened when Greg Kroah-Hartman <a
href="/Articles/640360/">sent a pull request</a> to Linus on April&nbsp;13.
<p>
This conversation is in full swing as of this writing, so an attempt to
fully summarize it would be futile.  In brief, though, the complaints take
a number of forms.  There is unhappiness with the performance of kdbus â€” a
bit surprising, since performance is one of the motivating factors behind
this development.  There are a number of security-related concerns,
especially around how the bus collects and transmits metadata about
connected processes.  Kdbus is still said to not play well with
containers.  Some developers find the complexity daunting.  And so on.
<p>
The core of the disagreement, arguably, can be found in <a
href="/Articles/640362/">this message from Greg</a>.  There, he agreed that
the design was "<q>unfortunate</q>" (though he later retracted that
statement), and said that kdbus needed to be taken in its current form even
if it is not ideal:
<p>
<div class="BigQuote">
	D-Bus is a specification that has been out there for over a decade,
	and we are not designing anything new here, but rather implementing
	it as designed.  We have to be compatible to the existing users of
	the DBus system, and don't have the luxury of being able to change
	core things like this and expect the world to be able to change
	just because the design is not as clean as it should/could be.
<p>
	Again, just like getting horrid hardware to work properly,
	sometimes we have to write odd code.  Or having to implement a
	network protocol that doesn't seem to be designed "perfectly", yet
	is used by a few hundred million systems so we have to remain
	compatible.  This is all that we are doing here for stuff like
	this.
<p>
	Remember, this is called kDBUS, not kGENERICIPC, no matter how much
	we would have liked that to happen from a kernel standpoint. :)
</div>
<p>
It is probably fair to say that those who are opposed to kdbus in its
current form would rather that it were, indeed, kGENERICIPC.  They seem to
feel that it should be
able to support what is needed to implement D-Bus efficiently, but the
D-Bus-specific parts, perhaps, should go into user space.  After all, there
are only so many interprocess communication mechanisms that can be merged
into the kernel; the one that goes in, many developers think, should be
free of known flaws and should be able to do more than reimplement the
D-Bus protocol.
<p>
It is hard to say at this point how this discussion will play out or what
Linus will decide to do in the end.  The chances are good, though, that
enough high-profile developers have expressed opposition to derail the
merging of kdbus in this development cycle.  Complete consensus is not
always required to get code into the kernel, but getting code merged when
there is serious opposition is still quite hard.  This story, it seems, may
go on for a while yet.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#kdbus">kdbus</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/640357/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor640538"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2015 9:11 UTC (Thu)
                               by <b>Thue</b> (guest, #14277)
                              [<a href="/Articles/640538/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; After all, there are only so many interprocess communication mechanisms that can be merged into the kernel</font><br>
<p>
Why do you think there is a limit to how many IPC mechanisms that can be merged? Greg KH has pointed out that kdbus is quite non-intrusive, and that a IPC mechanism of similar complexity is merged about every second kernel release.<br>
<p>
kdbus has taken 2 years to implement a given design, so to design and implement a completely new kGENERICIPC would presumably take more than 2 years of they started now. It would make good sense to commit kdbus for use now, rather than forcing kdbus potential users to wait 2+ years.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640538/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor640651"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2015 18:34 UTC (Thu)
                               by <b>daniels</b> (subscriber, #16193)
                              [<a href="/Articles/640651/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Or to design and implement the old kGENERICIPC, or as it was called at the time, AF_BUS: <a href="https://lwn.net/Articles/504970/">https://lwn.net/Articles/504970/</a><br>
<p>
Unfortunately the response from David Miller (the net/ maintainer) was that he was going to ignore the series without even looking at it (he did), because he felt multicast was sufficent (it wasn't). And here we are.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640651/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor641626"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 23, 2015 17:14 UTC (Thu)
                               by <b>ksandstr</b> (guest, #60862)
                              [<a href="/Articles/641626/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
As an educated guess, one of the reasons is that a half-decent IPC mechanism (i.e. one that provides something over AF_UNIX, SysV IPC, POSIX IPC, and ones backed with them) would tie into the process scheduler to minimize round-trip latency and cache effects. The one in Linux has been a mishmash of jumbles since the scheduler wars of about a decade ago, making alterations a subtle affair prone to hidden regressions, rightly feared by most.<br>
<p>
It seems to follow that kdbus (and perhaps Android's "binder" as well) would either integrate elbow-deep with the scheduler, be using a general interface shared between the fresh-faced new IPC mechanisms to that effect, or be nothing special and therefore unworthy. My two Internet cents rest on the lattermost hypothesis' eyelids.<br>
<p>
<p>
The unhappiness about speed is quite interesting. Was kdbus developed without a way to measure performance in comparison to the user-space solution, one of its stated &amp; well-publicized design requirements? Surely such critique is the easiest to overcome: just slap down "my first rdtsc" and iterate until it's any good.<br>
<p>
Moreover there are several Free Software super-scalable message-queuing frameworks kicking around in the enterprise middleware space right now; for example 0mq and its descendants-in-spirit. These seem to do just fine even without a kernel-side bypass lane. Why is that? Why do parallel computing interfaces like MPI manage full utilization of both local and clustered resources without going into the kernel, but dbus must pierce that veil?<br>
<p>
<p>
Far be it from me not to suspect that kdbus is a way to cement the systemd takeover of GNU/Linux userspace. These pro-kdbus arguments of inevitability, undifferentiated from those for old GNOME's Bonobo/ORBit, and similes to "buggy hardware" which software by definition isn't, seem vacuous and technically inept like those used to back systemd in the first place; and the absence of concrete advantage beyond "it'll be over as soon as you stop resisting" just makes it seem all the more consciously wack.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/641626/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor641660"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 23, 2015 21:38 UTC (Thu)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/641660/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Why do parallel computing interfaces like MPI manage full utilization of both local and clustered resources without going into the kernel, but dbus must pierce that veil?</font><br>
MPI systems rarely use a 'dialog' pattern of communications where one process sends a message to another process and then awaits the result. Exactly because it's so extremely inefficient without something like binder/kdbus.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/641660/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor640543"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2015 11:24 UTC (Thu)
                               by <b>johannbg</b> (guest, #65743)
                              [<a href="/Articles/640543/">Link</a>] (19 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The obstacles for kdbus are Andy Lutomirski and Eric W. Biederman. <br>
<p>
If you put aside the way too many tongue lashings then technical criticism that has taken place in response to Greg ( which says more about the kernel community abusiveness than about kdbus design choices ), it's going to be interesting to see if the kernel community deals with commits on pure technical level or based on peoples personal "feelings" because at this point it has become quite clear that it matters not how many times they rewrite at the ackers whim, it still will be nacked.<br>
<p>
Heck there was even attempt to use stall tactics to delay the inclusion of this further through "meet and greet discussions" ( one would have thought past two years had provided enough opportunity to discuss this at various places ) <br>
<p>
Fortunately James Bottomley appeared and killed that attempt in birth in that thread via common sense.<br>
<p>
So far it looks like Al Viro is the only one that actually bothered to read and review the code and as a result of that provide feedback of things he liked to see improved ( after his usually the kernel is a pile of shit rants and everything for inclusion in it too ). <br>
<p>
He actually manage to give Greg and the rest of the guys something tangible work with and fix unlike the rest of the responders who are to busy feeding Greg bullshit .<br>
<p>
<p>
Those responding expert individuals that trust nobody but themselves and are hoping for vague glorified future how this should be handled, can step up of their iron thrones and start writing that future on their rainbow farting pony's in the next coming years but until that future arrives and everyone will be bathed in it's unpreceded functionally glorified fairy dust, kdbus has to make do since it's built upon the experience and the input of the people that actually have been working with this stuff for what past 10 years. <br>
<p>
So seriously shut up and commit that code already this is getting ridiculous...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640543/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor640574"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2015 13:17 UTC (Thu)
                               by <b>corbet</b> (editor, #1)
                              [<a href="/Articles/640574/">Link</a>] (16 responses)
      </p>
      
      </div>
      </summary>
      I'll resist the temptation to address everything in your comment, but somebody has to say that you are doing a real disservice to Eric and (especially) Andy.  There's nobody else who has put in as much time as they have going through the code, making suggestions, and causing it to get better.  Kdbus is a <i>much</i> improved patch set as a result of their work.  You may disagree with their conclusions, but it is wrong to cast them as mindless obstructionism in order to ignore them.
<p>
(In case you wonder, I'm in favor of merging kdbus, or something that can implement that functionality, but I'm also in favor of doing it right).
      
          <div class="CommentReplyButton">
            <form action="/Articles/640574/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor640618"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2015 15:26 UTC (Thu)
                               by <b>Thue</b> (guest, #14277)
                              [<a href="/Articles/640618/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I don't know about those two in particular, but parts of that kernel thread seemed to descend into anti-systemd circlejerking. There does seem to be an unreasonable amount of negativity just because of the association with systemd.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640618/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor640622"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2015 16:01 UTC (Thu)
                               by <b>aigarius</b> (guest, #7329)
                              [<a href="/Articles/640622/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The only thing related to systemd in that thread is that systemd is quite sure to be using kdbus and all its functionality and is likely to require it as soon as it is mainlained, so it was disingenuous to dismiss API design criticism on the basis that "it is all optional anyway". That is a reasonable assumption and not some kind of anti-systemd hate.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640622/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor640653"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2015 18:37 UTC (Thu)
                               by <b>daniels</b> (subscriber, #16193)
                              [<a href="/Articles/640653/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Yes, a lot of that thread was unnecessary derailing in the form of 'this is unnecessary because I don't like D-Bus or systemd and let me explain at you why I don't'. I didn't see that coming from Eric and Andy though.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640653/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor640617"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2015 16:14 UTC (Thu)
                               by <b>viro</b> (subscriber, #7872)
                              [<a href="/Articles/640617/">Link</a>] (9 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
... to which I would like to add that I do _not_ appreciate the way my involvement had been misrepresented.  Recap for those who'd missed the show:<br>
<p>
various people: observe that there had been zero reviewed-by<br>
greg: what can I do?  Can't make 'em review it...<br>
me: you might start with getting it into a shape that would be somewhat easier to review; as it is, reviewers get not just to verify that your actual locking matches the claimed one (which would be perfectly reasonable thing to expect of them), they get to _deduce_ the locking rules.  In a piece of code with fairly complex locking and no locking-related documentation whatsoever.  Moreover, locking doesn't look as if such a documentation had been written - &gt;this&lt; and &gt;this&lt; would stick out as sore thumbs.  What are the locking rules for &lt;this&gt; and &lt;that&gt;?  Document your damn locking if you want reviews - sure, I can spend a week and try to document it, but it'd be better if you guys did that[1]<br>
greg: fair enough, &gt;this&lt; and &gt;this&lt; don't look good and locking docs are needed.  We'll do that. [No answers to specific questions on locking order are given].<br>
... and later on lwn, a thoroughly dishonest advocate in &lt;grandparent of this posting&gt; had the gall to praise me for being helpful (as opposed to Eric and Andy) *and* concluded with "shut up and commit it already".  Completely ignoring the fact that neither documentation needed for reviewing it, nor, as the result, any new code reviews have materialized.<br>
<p>
For the record: what I'd done does _NOT_ qualify as code review.  I have told Greg what was missing for doing any meaningful review.  He appeared to have agreed that it was missing and would be added, but so far it hadn't been done - not even on the level of "this is supposed to nest inside &lt;this and that&gt; and outside &lt;this, this and that&gt;; we'll do more detailed text later, but that at least ought to cover your specific questions".  I'm NOT taking a week-long break smack in the middle of merge window to waste on what they could do in a few hours.  And that information is a prerequisite for any meaningful review, as far as I'm concerned.  It's not an "oh, we'll do it after the thing gets merged" kind of thing - once it's in, it's in and if a later review finds out that there _are_ locking problems in there, we won't be able to touch the user-visible interfaces in process of fixing those.<br>
<p>
To Johann: you, sir, are an outstanding example of variability of our species. worthy of any curio cabinet, whatever the formalin might cost.<br>
<p>
[1] incidentally, I'm not 100% sure, but it smells like some of the ordering can't be deduced from the call graph alone - there are functions with or'ed flags among arguments, taking different locks depending on those flags and called in varying locking environments, so one would need to examine the conditions needed for them to take given lock, then figure out which call sites satisfy those and look at the locking environment for those; great fun to be had, in other words.  For them that task is greatly simplified since they know what the locking order should be (assuming they do know that, of course).  The difference is between proving that code satisfies given property and figuring out what properties does it satisfy; the latter obviously can get much harder if the code is complex enough.  And that it is...  Authors are really at very big advantage when it comes to producing such thing.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640617/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor640633"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2015 17:08 UTC (Thu)
                               by <b>johannbg</b> (guest, #65743)
                              [<a href="/Articles/640633/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I think curio cabinet ( me in it or not ) would indeed be a perfect match for the glass house you reside in.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640633/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor640635"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2015 17:38 UTC (Thu)
                               by <b>viro</b> (subscriber, #7872)
                              [<a href="/Articles/640635/">Link</a>] (7 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Umm...  Usually references to glass houses are meant to be read as an accusation of hypocrisy.  Care to elaborate, filth?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640635/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor640636"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2015 18:00 UTC (Thu)
                               by <b>johannbg</b> (guest, #65743)
                              [<a href="/Articles/640636/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Last time I made reference to you living in a glass house you did not have the mental capacity to understand it so I sincerely doubt that your slowly growing senile brain can comprehend it now. <br>
<p>
Since you aint getting any younger you might want consider stop sitting in there throwing bricks, hoping that someone dies and makes you the god you believe yourself to be while sitting on an iron throne playing game of moans and make better use of those limbs like wiping your own ass while you still can.<br>
<p>
Feel free to seal those lips while your at it. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640636/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor640643"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2015 18:22 UTC (Thu)
                               by <b>viro</b> (subscriber, #7872)
                              [<a href="/Articles/640643/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Learn to flame.  The only insult in that incoherent pile of metaphors is the fact that we belong to the same species.  And since you cause _that_ offence simply by being yourself, well... everyone got used to it by now.  Sad...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640643/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor640655"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2015 19:05 UTC (Thu)
                               by <b>johannbg</b> (guest, #65743)
                              [<a href="/Articles/640655/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I guess they teach how to flame next to the kernel power tripping and be disrespectful to one another classes people take when they join the kernel community.<br>
<p>
Yeah sure I might be a sad excuse for a human being ( someone needs to bear that title so it can just as well be me I'm no better or worse then the next guy ) however what is truly pathetic is the waste of words that took place when I actually gave you an complement and you responded the way you did. <br>
<p>
If I would have known how much of an huge asshole you are then I never would have bothered and would have known forehand tearing you a new one is a waste of time since it's mission impossible. Things dont get bigger than this.<br>
<p>
The lesson I learned from this was that I should have listened to people but I usually want to first hand experience people before I judge them or label them.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640655/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor640659"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2015 19:17 UTC (Thu)
                               by <b>jake</b> (editor, #205)
                              [<a href="/Articles/640659/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
this has no place here ... if you two want to call each other names, please do it elsewhere.<br>
<p>
thanks,<br>
<p>
jake<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640659/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor640661"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2015 19:25 UTC (Thu)
                               by <b>viro</b> (subscriber, #7872)
                              [<a href="/Articles/640661/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Marginally better (at least this time it was a coherent text), but jake is correct - lwn is not the place for that kind of lessons.  If you want to continue this, er, conversation - you know my email address.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640661/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor641593"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 23, 2015 13:45 UTC (Thu)
                               by <b>rich0</b> (guest, #55509)
                              [<a href="/Articles/641593/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
And we wonder why people think the kernel development team behaves non-professionally...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/641593/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor641847"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 25, 2015 13:10 UTC (Sat)
                               by <b>Kamilion</b> (subscriber, #42576)
                              [<a href="/Articles/641847/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Because they *DO*, and it is quite entertaining to us in the peanut gallery.<br>
<p>
It also shows us they are human beings; not monotonic code robots.<br>
<p>
It's not like there is any *requirement* in the linux community to be professional or to be *A* professional. It happens to be a guideline; something that at least some people will strive for.<br>
<p>
<p>
I could deliver a rant about how social media is rotting everyone's brain and how IRC should be the model everyone should strive for; but I'm sure there'd be someone out there complaining that they couldn't see cat pictures or whatever Terry had for lunch, or the latest vine viral video of people playing with action figures. And then the inevitable comment that "oh, IRCCloud will embed link it finds in the scrollback." proving that it can be as simple as changing a client to meet modern user expectations, not a protocol.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/641847/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor640745"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 17, 2015 9:46 UTC (Fri)
                               by <b>sergey.senozhatsky</b> (subscriber, #91933)
                              [<a href="/Articles/640745/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I sedond this. kdbus is still getting better after all. compare it to kdbus that greg pushed to staging 1 year ago.<br>
all I'm saying is -- no, it's not "anti-systemd only".<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640745/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor640767"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 17, 2015 13:33 UTC (Fri)
                               by <b>gregkh</b> (subscriber, #8)
                              [<a href="/Articles/640767/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; compare it to kdbus that greg pushed to staging 1 year ago.</font><br>
<p>
I never pushed any kdbus code to staging, are you thinking of something else?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640767/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor640811"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 17, 2015 17:16 UTC (Fri)
                               by <b>sergey.senozhatsky</b> (subscriber, #91933)
                              [<a href="/Articles/640811/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; I never pushed any kdbus code to staging, are you thinking of something else?</font><br>
<p>
oh. I was pretty sure that for some very short period of time kdbus was in staging; in 2013 may be. what was it... ktap? hm, so I was looking on kdbus on github back then.<br>
<p>
yes, I was wrong. sorry.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640811/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor640688"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2015 22:25 UTC (Thu)
                               by <b>asaz989</b> (guest, #67798)
                              [<a href="/Articles/640688/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Hmmm. I'm new to this whole discussion. So I might not be correctly understanding how someone who complains about "kernel community abusiveness" then gets off flaming people about how they "can step up of [sic] their iron thrones and start writing that future on their rainbow farting pony's [sic]".<br>
<p>
I much prefer Linus's brand of abusiveness, which is at least unapologetic and cites its sources.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640688/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor641520"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 23, 2015 7:19 UTC (Thu)
                               by <b>oldtomas</b> (guest, #72579)
                              [<a href="/Articles/641520/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Quoth the poster:<br>
<p>
<font class="QuotedText">&gt; If you put aside the way too many tongue lashings then technical criticism that has taken place in response to Greg ( which says more about the kernel community abusiveness than about kdbus design choices )</font><br>
<p>
And then:<br>
<p>
<font class="QuotedText">&gt; Those responding expert individuals that trust nobody but themselves [...] can step up of their iron thrones [...] rainbow farting pony's [...] everyone will be bathed in it's [...] fairy dust [...]</font><br>
<p>
Conclusio:<br>
<p>
<font class="QuotedText">&gt; So seriously shut up and commit that code already this is getting ridiculous...</font><br>
<p>
Oh, goody. You have convinced me now.<br>
<p>
Seriously: if we don't learn (and I mean ALL sides) to dial down our egos a bit and just accept that the others aren't idiots either, this is going to be less and less fun.<br>
	<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/641520/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor640563"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2015 12:10 UTC (Thu)
                               by <b>aigarius</b> (guest, #7329)
                              [<a href="/Articles/640563/">Link</a>] (20 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The thing is that as soon as it is merged into kernel, whatever design choices there are, are automatically part of the kernel ABI that will have to be maintained for a long time. The largest objections are for the metadata attached to messages which exposes huge array of kernel internal data structures as part of this ABI. Which would then mean that these structures may no longer change or they would break userspace. That *is* intrusive.<br>
<p>
Arguments about optionality of kdbus do not hold water as systemd is basically everywhere now and as it is expected to use kdbus exclusively as soon as it is merged.<br>
<p>
Instead of thinking from the perspective of maintenance of unchanging kernel ABI, kdbus developers tend to do a minimum effort port of DBUS. It should be very well possible to address the metadata issues while actually improving the design. Off the top of my head - most of the included metadata is only actually used for logging. Why not separate the logging data stream from the actual data? Then you can have more useful permission controls on that data and only provide the loggable metadata where it is needed - to the logger daemon. And a logger daemon can be adapted to keep working when kernel metadata changes, thus removing huge part of the ABI objections.<br>
<p>
You can't just take something from userspace and jam it into the kernel. It needs to be written based on the same rules and assumptions as the rest of the kernel code.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640563/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor640566"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2015 12:29 UTC (Thu)
                               by <b>quintesse</b> (guest, #14569)
                              [<a href="/Articles/640566/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; most of the included metadata is only actually used for logging</font><br>
<p>
AFAIU the reason for adding the meta-data was to have access to it in a race-free manner, that the user-space is going to need that data anyway but if it has to go look for it itself the need information might already have changed/disappeared.<br>
<p>
What I don't understand is why these meta-data structures couldn't change saying that otherwise user-space would break. If user-space is already using that information today how does it not break when they change those structures in the kernel?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640566/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor640605"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2015 14:29 UTC (Thu)
                               by <b>drag</b> (guest, #31333)
                              [<a href="/Articles/640605/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; If user-space is already using that information today how does it not break when they change those structures in the kernel?</font><br>
<p>
Because it wouldn't be a kernel ABI change that would be breaking them.<br>
<p>
In Linux userspace breaks userspace all the time. It's extremely unstable. That is nothing new... but if you get bad design in the kernel then that bad design is going to be there practically forever.<br>
<p>
So if there is a fundamental design flaw in dbus/kdbus it better get solved  before merging into the kernel. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640605/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor640568"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2015 12:47 UTC (Thu)
                               by <b>tomegun</b> (subscriber, #56697)
                              [<a href="/Articles/640568/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; The largest objections are for the metadata attached to messages which exposes huge array of kernel internal data structures as part of this ABI.</font><br>
<p>
kdbus does not expose anything that is not already exposed to userspace, it is simply making sure the exposed data can be retrieved in a race-free manner.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640568/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor640570"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2015 12:56 UTC (Thu)
                               by <b>tao</b> (subscriber, #17563)
                              [<a href="/Articles/640570/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Now, now, don't go spoiling a perfectly fine flame by introducing facts.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640570/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor640571"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2015 13:05 UTC (Thu)
                               by <b>mezcalero</b> (subscriber, #45103)
                              [<a href="/Articles/640571/">Link</a>] (14 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
A "huge array of kernel internal data"? That's certainly not the case. None of the data kdbus optionally attaches as metadata to bus calls is "internal". All of it is available thorugh /proc as well. The only reason we attach it to messages is to fix races around retrieving them, since we need some of the parts for doing authentication and security relevant logging.<br>
<p>
The meta-data is used for authentication, logging and introspection purposes, not just "logging". Of the various fields we provide, some are useful for authentication, and others for introspection, and others for logging, some for all three cases, others for two cases. It really depends.<br>
<p>
And the "logging data stream" should not be separated out, since we provide it so that the recipient of a method call can properly log about the method call it is executing, about what it is doing for it, and on which behalf it is doing it, all in a race-free fashion, in one log record. If you however split things into multiple streams, you will have difficulty matching up the events from the streams, and things will be necessarily raceful.<br>
<p>
Lennart<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640571/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor640711"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 17, 2015 0:23 UTC (Fri)
                               by <b>BenHutchings</b> (subscriber, #37955)
                              [<a href="/Articles/640711/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <blockquote>All of it is available thorugh /proc as well.</blockquote>
<p>Not with hidepid enabled, it isn't.</p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/640711/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor640749"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 17, 2015 10:23 UTC (Fri)
                               by <b>mezcalero</b> (subscriber, #45103)
                              [<a href="/Articles/640749/">Link</a>] (7 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Well, "hidepid" doesn't work really. Userspace cannot really cope.<br>
<p>
That said, kdbus actually has a feature similar to hidepid: you can set a mask for all creds via /proc or even kernel cmdline, and it has been added on request of Andy's.<br>
<p>
Lennart<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640749/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor640758"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 17, 2015 12:01 UTC (Fri)
                               by <b>spender</b> (guest, #23067)
                              [<a href="/Articles/640758/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It worked just fine for a decade and a half in various forms before you showed up.  Everyone else has to cope with your code, but not the other way around -- is that how it works?<br>
<p>
-Brad<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640758/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor641088"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 20, 2015 16:15 UTC (Mon)
                               by <b>mezcalero</b> (subscriber, #45103)
                              [<a href="/Articles/641088/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Oh, it was never useful in general purpose operating systems. Too many programs need data from /proc. I mean, it already falls apart if you want to run an OS that uses polkit really...<br>
<p>
I'd actually love to support it nicely in systemd. For example, I think a per-service setting "HideProc=" would make a ton of sense, that could be used to set it for individual services, by combining it with file system namespaces (so that each service gets his own /proc instance with the appropriate setting). However, this is currently not possible, due to the weird way it is implemented: it pretends to be a mount option, but actually doesn't apply to each mount individually but is a global, kernel-wide option.<br>
<p>
Would love to see this fixed, and if so I'd be happy to expose this in systemd to make it useful for everybody without breaking things that cannot cope with it.<br>
<p>
Lennart<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/641088/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor641136"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 20, 2015 21:55 UTC (Mon)
                               by <b>spender</b> (guest, #23067)
                              [<a href="/Articles/641136/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Sorry, I should have clarified: until you and the braindead security modeling of fd.o came around, of which polkit is a perfect example.  It's no wonder that when talking about a feature designed primarily for multi-user systems, you point out that it's incompatible with the insecure-by-design polkit, software that no sane server administrator would have installed.<br>
<p>
-Brad<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/641136/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor641363"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 22, 2015 16:05 UTC (Wed)
                               by <b>intgr</b> (subscriber, #39733)
                              [<a href="/Articles/641363/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Spender happens to be correct here. I was successfully using hidepid=2 on all my desktops until a certain update. It's not clear where the blame lies here, it may well be due to the cgroups design in the kernel, but systemd-logind was the immediate cause. It broke because logind assumes that /proc/1/ is always there and refers to the init process: <a href="http://lists.freedesktop.org/archives/systemd-devel/2012-October/006860.html">http://lists.freedesktop.org/archives/systemd-devel/2012-...</a><br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/641363/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor641631"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 23, 2015 16:52 UTC (Thu)
                               by <b>thestinger</b> (guest, #91827)
                              [<a href="/Articles/641631/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It's still easy to get it working. You need to create a proc group and use hidepid=2,gid=$PROC_GID and then add the polkit user and systemd-logind service to it:<br>
<p>
% cat /usr/lib/systemd/system/systemd-logind.service.d/hidepid.conf<br>
[Service]<br>
SupplementaryGroups=proc<br>
% grep proc /etc/group<br>
proc:x:26:polkitd<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/641631/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor641708"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 24, 2015 9:56 UTC (Fri)
                               by <b>intgr</b> (subscriber, #39733)
                              [<a href="/Articles/641708/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Thanks! I have documented this for other users at <a href="https://wiki.archlinux.org/index.php/Security#hidepid">https://wiki.archlinux.org/index.php/Security#hidepid</a><br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/641708/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor641627"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 23, 2015 16:42 UTC (Thu)
                               by <b>thestinger</b> (guest, #91827)
                              [<a href="/Articles/641627/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
You can already use hidepid=2,gid=xxx and then set exceptions for services by adding them to the appropriate proc group. There are very few exceptions required for a typical desktop system (polkit and systemd-logind, but only because systemd-logind drops some capabilities). I have it working fine on Android where there's more work required.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/641627/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor640743"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 17, 2015 9:54 UTC (Fri)
                               by <b>aigarius</b> (guest, #7329)
                              [<a href="/Articles/640743/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I understand how it is more convenient to just ask the kernel to attach all the possible metadata and then, on the receiver side, decide which of it you need and how to use that. And how that removes the race conditions. That is a very good thing and a key to why kdbus is needed. On the other hand it is also understandable how the kernel developers want to minimise the outgoing information to ensure higher future flexibility.<br>
<p>
The logging issues with a separate stream can be solved, for example by attaching a unique message id that is provided both on the log stream and to the receiver. It would be perfectly fine to see "message 123 passed from process xxx (uid:1002, ...) to process yyy (uid: 500, ...), ..." as a log entry from kdbus and then "error processing message 123: barfooed" from the receiver.<br>
<p>
I mean - does the receiver even *need* to know the pid of the sender? Would it not make more sense to have some filter in the kernel, so that only messages from processes that actually have some capability ever reach the receiver? With an established user base of dbus it should be possible to actually find out what filters people are using and what metadata actually is critical for the receivers.<br>
<p>
The existing security model of dbus as described in <a href="http://article.gmane.org/gmane.linux.kernel/1930451">http://article.gmane.org/gmane.linux.kernel/1930451</a> is at best confusing. That is a clear example of something that needs to change in how dbus works and should have been changed even without the push to kbus. And once it is clear that kdbus *must* be different from dbus, then you can easily find other places to improve and clean up the protocol as well as ways to paper over those changes in libdbus or by providing a new, more convenient userspace library.<br>
<p>
I am, admittedly, nowhere near an expert on this, but I do prefer the experts to come together with an open mind on the requirements of all sides. Without accusations of personal attacks.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640743/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor640762"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 17, 2015 12:26 UTC (Fri)
                               by <b>pizza</b> (subscriber, #46)
                              [<a href="/Articles/640762/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; The existing security model of dbus as described in <a href="http://article.gmane.org/gmane.linux.kernel/1930451">http://article.gmane.org/gmane.linux.kernel/1930451</a> is at best confusing. That is a clear example of something that needs to change in how dbus works and should have been changed even without the push to kbus</font><br>
<p>
And that is a non-starter, because DBUS is an established standard that has been in use for nearly a decade.<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640762/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor640901"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 18, 2015 11:09 UTC (Sat)
                               by <b>mathstuf</b> (subscriber, #69389)
                              [<a href="/Articles/640901/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; I mean - does the receiver even *need* to know the pid of the sender?</font><br>
<p>
Yes. I'm implementing the SecretService API in keepassx and I'm locking it down so that access is based on a per-application basis (so a malicious app can't rummage around once it is open). Determining the binary is dependent on the executable pointed to by /process/PID/exe. I'd be grateful for better solutions, but that's the best I can do right now. I'm pretty sure it isn't subject to PID races since the reply won't be hooked up if it gets replaced (though exec could happen I suppose).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640901/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor640931"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 18, 2015 18:44 UTC (Sat)
                               by <b>nybble41</b> (subscriber, #55106)
                              [<a href="/Articles/640931/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; ... I'm locking it down so that access is based on a per-application basis.... Determining the binary is dependent on the executable pointed to by /process/PID/exe.</font><br>
<p>
Unless you're doing something to prevent LD_PRELOAD and ptrace(), I'm not sure what you intend to accomplish by this. Even ignoring any potential PID race conditions, the code which is running and has access to the message bus is not determined solely by /proc/PID/exe.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640931/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor640933"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 18, 2015 19:11 UTC (Sat)
                               by <b>mathstuf</b> (subscriber, #69389)
                              [<a href="/Articles/640933/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Currently, kwallet and gnome-keyring have a single "unlock" state at the collection level (though ISTR kwallet also gating based on the app, access was still global once permitted). Once, say, Firefox unlocks the store, any app can go in and query passwords. To me, it doesn't make sense to allow Firefox access to passwords intended for Pidgin or git, and vice versa (and they can even delete each other's passwords). As for the actual code running, yeah, something better would be nice, but it's more to minimize leaking if an application does have problems. It's already a pain to migrate dozens of accounts to a password store in the first place and I don't want to imagine trying to get back once malware starts targeting password stores (either by quietly siphoning, deleting, or modifying passwords in them) through the apps which communicate with them.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640933/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor640572"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2015 13:07 UTC (Thu)
                               by <b>alexl</b> (subscriber, #19068)
                              [<a href="/Articles/640572/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
How is this a minimum effort? Its the third effort of making a kernel dbus implementation, and this version has gone through large changes based on upstream feedback.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640572/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor640620"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2015 15:44 UTC (Thu)
                               by <b>dashesy</b> (guest, #74652)
                              [<a href="/Articles/640620/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Cannot resist but to ask, why not have both, first a `kGENERICIPC` then use it for `kdbus`? If all I want is an improved IPC I can use the first without the dance needed for D-BUS, that will make embedded folks happier too.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640620/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor640639"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2015 18:11 UTC (Thu)
                               by <b>drag</b> (guest, #31333)
                              [<a href="/Articles/640639/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Linux definitely needs something dbus-like that is fast and universal. Application developers definitely want it and it will have no shortage of users once kbdus-like is integrated into the kernel. It's been something that has been needed for a long time now.<br>
<p>
So if you do get 'kgenericipc' in that will not really relieve the need/desire for kdbus-like functionality. Then you will just end up with 2 sets of API/ABIs to maintain instead of just one.<br>
<p>
This is why it's so critical to get it right. It's going to be used almost immediately by a huge number of different things. If it was to get in now you'll see distributions shipping significant amount of software that requires it by the end of the year. If it's wrong now there is never going to be any chance to fix it.<br>
<p>
On the upside I am willing to be that a lot of it's 'crapiness' is due to the fact that it's initial design has been fine tuned and fixed over the years and what often appears to be kludges is just a sign of a maturity.<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640639/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor641594"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 23, 2015 13:48 UTC (Thu)
                               by <b>rich0</b> (guest, #55509)
                              [<a href="/Articles/641594/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I think the objection is that nobody wants to write it, especially those asking for it.  The kdbus proponents say that they already have a solution that they want and which all their userspace consumers want.  The generic alternative is something nobody actually intends to use, and nobody actually wants to write.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/641594/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor640634"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2015 17:21 UTC (Thu)
                               by <b>flussence</b> (guest, #85566)
                              [<a href="/Articles/640634/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Rather than beating D-Bus to make it go faster, I'm beginning to think it'd be a more efficient use of effort to convince application developers to not use it in the first place. It's starting to look a lot like the ActiveX situation all over again.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640634/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor640654"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2015 18:43 UTC (Thu)
                               by <b>daniels</b> (subscriber, #16193)
                              [<a href="/Articles/640654/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Rather than beating D-Bus to make it go faster, I'm beginning to think it'd be a more efficient use of effort to convince application developers to not use it in the first place. It's starting to look a lot like the ActiveX situation all over again.</font><br>
<p>
A lot of people have said this over the past 12 years, and yet no viable replacement has emerged.<br>
<p>
Havoc wrote an extremely eloquent mail explaining why the model was as it was: because applications a) did not want to use a more complex model requiring them to manage their own state, and b) were likely to get such a model wrong, resulting in security flaws among others.<br>
<p>
Any replacement for D-Bus must therefore retain many of its same properties, and that no such replacement has emerged (with the criticisms largely being of its design goals), probably says quite a bit about its quality.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640654/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor640953"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 19, 2015 8:54 UTC (Sun)
                               by <b>hrogge</b> (guest, #100012)
                              [<a href="/Articles/640953/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The problem with the "capabilities situation" is really hard to solve in a clean way if an userspace daemon wants to rely on kernel capabilities to check if another process is allowed to do a certain action.<br>
<p>
There is no really good way to check if you have the capabilities for a kernel syscall except for just calling it. But this doesn't work well if you have to do some userspace work before you call it, which is especially important for things like a reboot.<br>
<p>
I wonder if anyone has an idea how to resolve this issue, how can one process prove it is allowed to call a certain Linux syscall to another process without calling it?<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640953/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor640960"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 19, 2015 15:26 UTC (Sun)
                               by <b>flussence</b> (guest, #85566)
                              [<a href="/Articles/640960/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; I wonder if anyone has an idea how to resolve this issue, how can one process prove it is allowed to call a certain Linux syscall to another process without calling it?</font><br>
<p>
Easy. Remove it. Throw all of this broken second-system nightmare out the window, and all its workarounds, and all their workarounds too. Let's go *forward* to what actually worked before all this fd.o crap came along.<br>
<p>
In the old days, distros allowed non-root users to do scary and evil things like shut down, mount USB sticks and generally use their own computer by way of setuid-root or setcap helper binaries, or background services talking over a socket â€” those didn't need you to pass through a digital TSA checkpoint before they'd talk to you. In this savage and primitive culture there was no PolicyKit, or ConsoleKit, or UKit, or KitKitFactoryFactory, or libxml, or a Javascript VM, or HALd, or udevd, or SELinux, or dbus. Did the world end for lack of those? Hardly, the OS was *more* usable and *more* secure than it is today!<br>
<p>
To those who would cry "we need all this": you're lying and you know it.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/640960/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor640962"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 19, 2015 16:37 UTC (Sun)
                               by <b>mpr22</b> (subscriber, #60784)
                              [<a href="/Articles/640962/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      A bold call to arms! Who are you suggesting do the work you think should be done?
      
          <div class="CommentReplyButton">
            <form action="/Articles/640962/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor641096"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 20, 2015 16:58 UTC (Mon)
                               by <b>flussence</b> (guest, #85566)
                              [<a href="/Articles/641096/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
You're making the false assumption that this would require an increase in work.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/641096/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor641107"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 20, 2015 17:31 UTC (Mon)
                               by <b>mpr22</b> (subscriber, #60784)
                              [<a href="/Articles/641107/">Link</a>] 
      </p>
      
      </div>
      </summary>
      When suggesting other people do work, it is not only the quantity that matters.
      
          <div class="CommentReplyButton">
            <form action="/Articles/641107/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor641172"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">kdbus vs binder (Android IPC)</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 21, 2015 8:43 UTC (Tue)
                               by <b>debacle</b> (subscriber, #7114)
                              [<a href="/Articles/641172/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Many believe, that binder is far more problematic than kdbus, yet it can go into the kernel. I wonder, why kdbus is treated differently than binder?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/641172/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor641348"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">kdbus vs binder (Android IPC)</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 22, 2015 11:07 UTC (Wed)
                               by <b>tbird20d</b> (subscriber, #1901)
                              [<a href="/Articles/641348/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Because if binder breaks, Google has to fix it, and no one else cares.  For non-Android, binder is "use at your own risk". The ability of the kernel developers to ignore Android is actually beneficial in this case.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/641348/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor643023"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Obstacles for kdbus</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 3, 2015 17:57 UTC (Sun)
                               by <b>oak</b> (guest, #2786)
                              [<a href="/Articles/643023/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I remember looking at D-BUS performance on ARM for small messages, ~8 years ago.  I wonder whether and how the issues from back then have been nowadays fixed:<br>
<p>
* Worst system performance issue was daemon memory consumption &amp; fragmentation in case when clients didn't read (frequently sent) messages that they had subscribed for.  Daemon just had to buffer them until it ran out of memory.  There was no API/setting that would have allowed daemon to discard unread messages (messages were about status changes so only last one was relevant).  Suspending message sender wasn't an option because there were also other, responsive receivers for those messages.<br>
<p>
* For message transfer performance, daemon implementation was an issue, not it being in user-space.  It was CPU bound because daemon internally marshaled / demarshaled messages too many times.<br>
<p>
* Latency was mainly a function of socket buffer size, with small buffers you got faster turn-around (faster scheduling), with larger buffers, higher throughput.<br>
<p>
How kdbus handles the first case?<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/643023/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2015, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
