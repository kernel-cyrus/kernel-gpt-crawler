        <!DOCTYPE html>
        <html lang="en">
        <head><title>Kernel competition in the enterprise space [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/486304/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/485888/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/486304/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>Kernel competition in the enterprise space</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Please consider subscribing to LWN</b>
<p>
Subscriptions are the lifeblood of LWN.net.  If you appreciate this
content and would like to see more of it, your subscription will
help to ensure that LWN continues to thrive.  Please visit
<a href="/Promo/nst-nag1/subscribe">this page</a> to join up and keep LWN on
the net.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>March 14, 2012</br>
           </div>
Kernel developers like to grumble about the kernels shipped by enterprise
distributions.  Those kernels tend to be managed in ways that ignore the
best features of the Linux development process; indeed, sometimes they seem
to work against that process.  But, enterprise kernels and the systems
built on them are also the platform on which the money that supports kernel
development is made, so developers only push their complaints so far.  For
years, it has seemed that nothing could change the "enterprise mindset,"
but recent releases show that there may, indeed, be change brewing in this
area.
<p>
Consider Red Hat Enterprise Linux 6; its kernel is ostensibly based on the
2.6.32 release.  The actual kernel, as shipped by Red Hat, differs from 
2.6.32 by around 7,700 patches, though.  Many of those are fixes, but
others are major new features, often backported from more recent releases.
Thus, the RHEL "2.6.32" kernel includes features like per-session group
scheduling, receive packet/flow steering, transparent huge pages, pstore,
and, of course, support for a wide range of hardware that was not available
when 2.6.32 shipped.  Throw in a few out-of-tree features (SystemTap, for
example), and the end result is a kernel far removed from anything shipped
by kernel.org.  That is why Red Hat has had no real use for the 2.6.32
stable kernel series for some years.
<p>
Red Hat's motivation for creating these kernels is not hard to understand;
the company is trying to provide its customers with a combination of the
stability that comes from well-aged software and the features, fixes, and
performance improvements from the leading edge.  This process, when it goes
well, can give those customers the best of both worlds.  On the other hand,
the resulting kernels differ widely from the community's product, have not
been tested by the community, and exclude recent features that have not
been chosen for backporting.  They are also quite expensive to create;
behind Red Hat's many high-profile kernel hackers is an army of developers
tasked with backporting features and keeping the resulting kernel stable
and secure.
<p>
When developers grumble about enterprise kernels, what they are really
saying is that enterprise distributions might be better served by simply
updating to more current kernels.  In the process they would get all those
features, improvements, and bug fixes from the community, in the form that
they were developed and tested by that community.  Enterprise distributors
shipping current kernels could dispense with much of their support expense
and could better benefit from shared maintenance of stable kernel
releases.  The response that typically comes back is that enterprise
customers worry about kernel version bumps (though massive changes hidden
behind a minor number change are apparently not a problem) and that new
kernels bring new bugs with them.  The cost of stabilizing a new kernel
release, it is suggested, could exceed that of backporting desired features
into an older release.
<p>
Given that, it is interesting to see two other enterprise distributors
pushing forward with newer kernels.  Both <a
href="http://www.suse.com/releasenotes/x86_64/SUSE-SLES/11-SP2/">SUSE Linux
Enterprise Server&nbsp;11 Service Pack&nbsp;2</a> and Oracle's <a
href="https://blogs.oracle.com/linux/entry/oracle_unbreakable_enterprise_kernel_release">Unbreakable
Enterprise Kernel Release&nbsp;2</a> feature much more recent kernels -
3.0.10 and 3.0.16, respectively.  In each case, the shift to a newer kernel
is a clear attempt to create a more attractive distribution; we may be
seeing the beginning of a change in the longstanding enterprise mindset.
<p>
SUSE seems firmly stuck in a second-place market position relative to Red
Hat.  As a 
result, the company will be searching for ways to differentiate its
distribution from RHEL.  SUSE almost certainly also lacks the kind of
resources that Red Hat is able to apply to its enterprise kernels, so it
will be looking for cheaper ways to provide a competitive set of features.
Taking better advantage of the community's work by shipping more current
kernels is one obvious way to do that.  By shipping recent releases, SUSE
does not have to backport fixes and features, and it is able to take
advantage of the long-term stable support planned for the 3.0 kernel.  In
that context, it is not entirely surprising that SUSE has repeatedly pulled its
customers forward, jumping from 2.6.27 to 2.6.32 in the Service Pack&nbsp;1
release, then to 3.0.
<p>
Oracle, too, has a need to differentiate its distribution - even more so,
given that said distribution is really just a rebranded RHEL.  To that end,
Oracle would like to push some of its in-house features like btrfs,
which is optimistically labeled "production-ready" in <a
href="http://www.oracle.com/us/corporate/press/1555025">a recent press
release</a>.  If btrfs is indeed ready for production use, it certainly has
only gotten there in very recent releases; moving to the 3.0 kernel allows
Oracle to push this feature while minimizing the amount of work required to
backport the most recent fixes.  Oracle is offering this kernel with
releases&nbsp;5 and&nbsp;6 of Oracle Linux; had Oracle stuck with Red Hat's
RHEL&nbsp;5 kernel, Oracle Linux&nbsp;5 users would still be running
something based on 2.6.18.  For a company trying to provide a more
feature-rich distribution on a budget, dropping in a current kernel must
seem like a bargain.
<p>
What about the down side of new kernels - all those new bugs?  Both
companies have clearly tried to mitigate that risk by letting 3.0 stabilize
for six months or so before shipping it to customers.  There have been over
1,500 fixes applied in the 24 updates to 3.0 released so far.  The real proof,
though, is in users' experience.  If SLES or Oracle Linux users experience
bugs or performance regressions as a result of the kernel version change,
they may soon start looking for alternatives.  In the Oracle case, the
original Red Hat kernel remains an option for customers; SUSE, instead,
seems committed to the newer version.  
<p>
Between these two distributions there should be enough users to eventually
establish whether moving to newer kernels in the middle of an enterprise
distribution's support period is a smart move or not.  If it works out,
SUSE and Oracle may benefit from an influx of customers who are tired of
Red Hat's hybrid kernels.  If the new kernels prove not to be
enterprise-ready, instead, Red Hat's position may become even stronger.
Learning which way things will go may take a while.  Should Red Hat show up
one day with a newer kernel for RHEL customers, though, we'll know that the
issue has been decided at last.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Development_model-Enterprise_kernels">Development model/Enterprise kernels</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/486304/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor486591"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Kernel competition in the enterprise space</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 15, 2012 9:42 UTC (Thu)
                               by <b>mjthayer</b> (guest, #39183)
                              [<a href="/Articles/486591/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I thought that one of the main blockers was that RedHat wanted to be able to keep binary compatibility for kernel modules, so that any module built for a kernel in a particular RHEL version would work with any kernel of the same series.  Note that I say "wanted" - I doubt it works perfectly in practice and may be wrong altogether.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/486591/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor486686"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Kernel competition in the enterprise space</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 15, 2012 16:27 UTC (Thu)
                               by <b>pbonzini</b> (subscriber, #60935)
                              [<a href="/Articles/486686/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It works as long as the module sticks to the defined set of symbols which make up the RHEL kernel stable ABI.  RHEL kernel backports usually are also very cautious in changing the meaning of enums and other stuff like that.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/486686/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor486590"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Kernel competition in the enterprise space</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 15, 2012 9:44 UTC (Thu)
                               by <b>dag-</b> (guest, #30207)
                              [<a href="/Articles/486590/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
What I think this article lacks to mention is the effect of newer kernels on userspace. While in theory kernels do not break binary compatibility, in practice means that if you switch kernels, a bunch of user-space tools need to get updated. Even up to udev and Gnome integration.<br>
<p>
We, at the ELRepo project, offer backported drivers for RHEL and RHEL-clones (like CentOS, Scientific Linux and Oracle Linux) and one way of getting people to test newer drivers for us to backport is by providing mainline and stable kernels for RHEL. Our experience from testing these mainline kernels on RHEL5 is that the removal of certain infrastructure (in a specific case /proc/acpi entries or /dev/rtc nodes) would lead to various problems in userspace. For more information read Akemi Yagi's well written article "A kernel too far" at: <a href="http://blog.toracat.org/2011/03/a-kernel-too-far/">http://blog.toracat.org/2011/03/a-kernel-too-far/</a><br>
<p>
We did report those issues to the kernel developers, but there was little interested to get this fixed.<br>
<p>
And while it may be easier for SuSE and Oracle to contain such problems in userspace than it is in kernelspace, in the long run even this is unsustainable and forward-porting older infrastructure may be necessary to avoid having to upgrade larger software parts. I look forward to the next 5 years and see how this plays out, but at least Red Hat's way of working, while expensive and tedious, proved to have worked out well. Oracle will have to give up its RHEL compatibility at some point though in its 10 year life-span.<br>
<p>
Either you are leading the way or you are following, trying to manage to do both will tear you apart ;-)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/486590/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor486737"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Kernel competition in the enterprise space</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 15, 2012 19:49 UTC (Thu)
                               by <b>iabervon</b> (subscriber, #722)
                              [<a href="/Articles/486737/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I suspect that SuSE and Oracle may have better luck getting newer kernels to work with older userspace, in part because they have kernel developers on staff to prepare patches to newer kernels that fix the incompatibilities they find, and in part because they have more influence on the kernel development community. If, for example, SuSE wanted to fix sysfs in 3.0 to accommodate older udev, they'd have to find someone to write a change to sysfs stuff, and they'd have to get the sysfs maintainer to sign off on it, and they'd have to get the stable maintainer to include it. At the time, this would have been Greg KH getting himself to write a patch, and convincing himself and himself.<br>
<p>
Also, SuSE intended from the release of SLES 11 with 2.6.32 to be able to upgrade the major release of the kernel, and exerted pressure to keep things in mainline from breaking SLES 11 userspace. It's a lot easier to NACK patches and revert commits that haven't seen an official release yet than revert behavior changes where different programs may have come to rely on each behavior.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/486737/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor486817"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Kernel competition in the enterprise space</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 16, 2012 4:34 UTC (Fri)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/486817/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
as someone who has been deploying custom kernels in production (in what decidedly qualifies as an "enterprise" datacenter) for 15 years, I can say that as long as I avoided some of the most convoluted RedHat systems (back in the kernel 2.1 and 2.3 days when the 'stable' kernel was so out of date that nobody could use it). There are really very few cases where a new kernel requires a userspace upgrade.<br>
<p>
There are some cases where you need some new userspace tools to take advantage of some of the new kernel features, but Linus is pretty good at preventing changes that require userspace updates (and at the same time RedHat has gotten better at avoiding userspace incompatible kernel modifications)<br>
<p>
I expect there to be very few problems with these updates<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/486817/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor487710"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Kernel competition in the enterprise space</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 21, 2012 20:09 UTC (Wed)
                               by <b>dag-</b> (guest, #30207)
                              [<a href="/Articles/487710/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Well, for my RHEL6.2 system kernel 3.2 is already one kernel too far. The Intel chipset on my Thinkpad X201 starts flickering once Xorg/Gnome is started. Adding intel_iommu=igfx_off surpresses some kernel messages, but does not fix the screen flickering. Kernel 3.3 makes no difference.<br>
<p>
And we're not even 2 years into RHEL6, 8+ years to go :-)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/487710/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor486659"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Kernel competition in the enterprise space</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 15, 2012 14:56 UTC (Thu)
                               by <b>cma</b> (guest, #49905)
                              [<a href="/Articles/486659/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      Use Ubuntu Server instead...

Free and open...
      
          <div class="CommentReplyButton">
            <form action="/Articles/486659/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor488021"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Kernel competition in the enterprise space</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 22, 2012 16:34 UTC (Thu)
                               by <b>jospoortvliet</b> (guest, #33164)
                              [<a href="/Articles/488021/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
They are talking *enterprise* space, 10+ years quality (as in, by upstream engineers) support and all that. How is Ubuntu relevant here? It's not, except maybe in Mark's wet dreams :D<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/488021/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor487469"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Kernel competition in the enterprise space</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 20, 2012 21:40 UTC (Tue)
                               by <b>csamuel</b> (<b>&#x272D; supporter &#x272D;</b>, #2624)
                              [<a href="/Articles/487469/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I would argue that, given the advice is to *not* use anything earlier than 3.2 for btrfs due a bug which can result in a corrupt filesystem on powerloss, describing Oracle characterising 3.0 as production ready for btrfs as optimistic is being rather charitable.<br>
<p>
Especially as there is likely a disk format change necessary to fix the painfully low hard link limit in a directory which can break backuppc, gnus and (apparently) git. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/487469/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor491233"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Kernel competition in the enterprise space</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 9, 2012 12:22 UTC (Mon)
                               by <b>Lennie</b> (subscriber, #49641)
                              [<a href="/Articles/491233/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Trust me, they probably backported all btrfs changes from 3.2 and 3.3 to 3.0.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/491233/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2012, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
