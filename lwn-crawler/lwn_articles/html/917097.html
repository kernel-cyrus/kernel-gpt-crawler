        <!DOCTYPE html>
        <html lang="en">
        <head><title>Composefs for integrity protection and data sharing [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/917097/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/916498/">Return to the Front page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/917097/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>Composefs for integrity protection and data sharing</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Please consider subscribing to LWN</b>
<p>
Subscriptions are the lifeblood of LWN.net.  If you appreciate this
content and would like to see more of it, your subscription will
help to ensure that LWN continues to thrive.  Please visit
<a href="/Promo/nst-nag1/subscribe">this page</a> to join up and keep LWN on
the net.
</blockquote>
<div class="FeatureByline">
           By <b>Jake Edge</b><br>December 7, 2022</br>
           </div>
<p>
A read-only filesystem that will transparently share file data between disparate
directory trees, while also providing integrity verification for the data
and the 
directory metadata, was recently <a
href="/ml/linux-kernel/cover.1669631086.git.alexl@redhat.com/">posted as an
RFC</a>
to the linux-kernel mailing list.  <a
href="https://github.com/containers/composefs">Composefs</a> was developed
by Alexander Larsson (who posted it) and Giuseppe Scrivano for use by <a
href="https://podman.io/">podman</a> containers and <a
href="https://ostreedev.github.io/ostree/">OSTree</a> (or "libostree" as it
is now known) root directories, but there are likely others who want the
abilities 
it provides.  So far, there has been little response, either with feedback or
complaints, but it is a small patch set (around 2K lines of code) and
generally self-contained since it is a filesystem, so it would not be a
surprise to see it appear in some upcoming kernel. 
</p>

<h4>Features</h4>

<p>
There is a lengthy introduction to composefs in the cover letter and
more information in the <a
href="/ml/linux-kernel/8a9aefceebe42d36164f3516c173f18189f0d7e7.1669631086.git.alexl@redhat.com/">documentation
patch</a>. Unlike many filesystems, composefs is not backed by a block
device but instead by a set of regular read-only files: an image file that
contains 
the directory structure and file metadata and a directory of
content-addressed objects that are the file contents.  Since the files
themselves are in an object store, they are effectively deduplicated at
the file level; files that have identical content are only stored once
even if the metadata (e.g. owner, permissions, extended attributes) is
different. 
In addition,
when a file is read from composefs, the backing file is used—and cached in
the page cache—so any read of another composefs file with the same content will
use that page-cache entry.  
</p>

<p>
The filenames used in the
object store correspond to the <a
href="https://www.kernel.org/doc/html/latest/filesystems/fsverity.html">fs-verity</a> 
digests of the contents, so composefs can detect any changes to files using
the fs-verity mechanism.  The image file can contain the digests for the files
to ensure they are not changed out from under composefs and the
image file itself can be protected with fs-verity as well.  The fs-verity 
digest of the image file could be retrieved from a secure location (e.g. a
signed kernel 
command line) and passed to the mount command, allowing composefs to ensure
that the entire filesystem is unchanged from its expected state.
</p>

<p>
The files needed for a composefs instance are created using the
<tt>mkcomposefs</tt> tool:
<pre>
    $ mkcomposefs --digest-store=objects rootfs/ rootfs.img
</pre>
That command would process the <tt>rootfs</tt> directory, storing the image
file corresponding to its directory structure and file metadata in
<tt>rootfs.img</tt>, and create an object store with the file contents into
the <tt>objects</tt> directory.  As with Git, the <tt>objects</tt>
directory has subdirectories named for the first two hex characters of the
digest hash, each of which contains files named with the remaining
characters of the 
hash. 
</p>

<p>
A filesystem created that way could then be mounted as follows:
<pre>
    $ mount -t composefs rootfs.img -o basedir=objects,verity_check=2 /mnt
</pre>
The <tt>verity_check</tt> option governs whether to do fs-verity checking
on the image and files;&nbsp;0 disables fs-verity checking,&nbsp;1 only
checks
images that specify it, and&nbsp;2 requires fs-verity.  There is also a
<tt>digest</tt> option that can be used to pass the fs-verity digest hash
for the 
image file 
to the mount command, which allows composefs to verify it.  That
provides end-to-end verification as noted in the cover letter:
"<q>So, given a trusted set of mount options (say unlocked from TPM), we
have a fully verified filesystem tree mounted, with opportunistic
fine-grained sharing of identical files.</q>"
</p>

<h4>Use cases</h4>

<p>
Multiple containers on a system often share many files, but that file data
is typically replicated for each container image. Composefs can be used to
create multiple, different, read-only container image files that all refer to
the same 
object store, so that all of the files are only stored once.  In addition, files
that are being used by multiple containers simultaneously (e.g. shared
libraries) will likely 
reside in the page cache, saving a slower retrieval from persistent
storage. 
</p>

<p>
The second use that Larsson and Scrivano envision is to <a
href="https://blogs.gnome.org/alexl/2022/06/02/using-composefs-in-ostree/">replace
the 
"link farm"</a> that gets created for OSTree-based root filesystems with a
composefs mount.  Currently, OSTree uses hard links into its
content-addressed object store, but that structure is not protected against
changes because it does not get validated at run time, only when it is
being created.  By using fs-verity
on the image file and object store, though, a composefs-based root
filesystem would have its integrity protected automatically.
</p>

<p>
Beyond those two immediate uses for composefs, there are others on the
horizon: 
<blockquote class="bq">
[...] 
there seems
to be a wealth of other possible uses. For example, many systems use
loopback mounts for images (like lxc or snap), and these could take
advantage of the opportunistic sharing. We've also talked about using
fuse [<a
href="https://en.wikipedia.org/wiki/Filesystem_in_Userspace">Filesystem in
Userspace</a>] to implement a local cache for the backing files. I.e. you
would 
have a second basedir be a fuse filesystem, and on lookup failure in
the first basedir the fuse one triggers a download which is also saved
in the first dir for later lookups. There are many interesting
possibilities here.
</blockquote>

<p>
The reaction to the patches has been non-existent so far, other than some
<a
href="/ml/linux-kernel/Y4YSYcqv3LdbseVy@debian.me/">documentation
updates</a> suggested by Bagas Sanjaya.  The facilities provided by
composefs seem useful, however, and build on the fs-verity feature that is,
after 
<a href="/Articles/790185/">some fits and starts</a>, already present in
the kernel.  There is also work in progress to  <a
href="https://github.com/ostreedev/ostree/pull/2640">support composefs in
OSTree</a>, but there is something of a chicken-and-egg problem until the
filesystem lands in the kernel.  With luck, and a continued lack of any serious
opposition to composefs, that problem could be addressed—perhaps even early
next year. 
</p><br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Data_integrity">Data integrity</a></td></tr>
            <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Filesystems-composefs">Filesystems/composefs</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/917097/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor917301"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Composefs for integrity protection and data sharing</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 7, 2022 22:53 UTC (Wed)
                               by <b>Karellen</b> (subscriber, #67644)
                              [<a href="/Articles/917301/">Link</a>] (7 responses)
      </p>
      
      </div>
      </summary>
      <p>I'm getting a bit confused about the repeated mention that underlying files are only stored once and shared by composefs in the kernel.

<p>If there are multiple users on a system, who each create/run their own containers, do they share a basedir? If so, how do the permissions work? Or don't they need to, because of the content addressing?

<p>Or would each user have their own basedir, with their own copies of "the same" file?


      
          <div class="CommentReplyButton">
            <form action="/Articles/917301/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor917311"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Composefs for integrity protection and data sharing</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 8, 2022 0:52 UTC (Thu)
                               by <b>gray_-_wolf</b> (subscriber, #131074)
                              [<a href="/Articles/917311/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I think that depends on you. If my (very quick) skim through the linked<br>
documentation patch is correct, you set the basedir during the mount:<br>
<p>
  mount -t composefs image.cfs -o basedir=/dir /mnt<br>
<p>
So I think figuring out how to share it between users (if desired) and how to<br>
fill it is left as an exercise to the user. I would imagine at least container<br>
runtimes will have one-per-user, same way I have<br>
~/.local/share/containers/storage for storing podman images.<br>
<p>
The basedir can even contain multiple, comma-separated paths, which is pretty<br>
cool. The described download-on-demand model using FUSE looks interesting.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/917311/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor917320"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Composefs for integrity protection and data sharing</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 8, 2022 1:44 UTC (Thu)
                               by <b>hsiangkao</b> (guest, #123981)
                              [<a href="/Articles/917320/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
 &gt; The basedir can even contain multiple, comma-separated paths, which is pretty<br>
cool. The described download-on-demand model using FUSE looks interesting.<br>
<p>
If download-on-demand needs another FUSE, why not using a FUSE fs entirely?<br>
<p>
I’d suggest people looks what current EROFS does over the past year, rather than **completely** ignore those recent efforts.<br>
<p>
BTW, EROFS could support page cache sharing in v6.3 if no strange happens.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/917320/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor917349"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Composefs for integrity protection and data sharing</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 8, 2022 10:16 UTC (Thu)
                               by <b>smcv</b> (subscriber, #53363)
                              [<a href="/Articles/917349/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; If download-on-demand needs another FUSE, why not using a FUSE fs entirely?</span><br>
<p>
I would guess: so that the fast path (no download, load from cache) happens entirely in-kernel and doesn't pay the performance penalty of FUSE, even though the slow path (download required) does.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/917349/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor917352"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Composefs for integrity protection and data sharing</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 8, 2022 10:27 UTC (Thu)
                               by <b>hsiangkao</b> (guest, #123981)
                              [<a href="/Articles/917352/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
EROFS over fscache can do all of them in kernel already since 5.19.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/917352/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor917606"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Composefs for integrity protection and data sharing</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 10, 2022 18:15 UTC (Sat)
                               by <b>gscrivano</b> (subscriber, #74830)
                              [<a href="/Articles/917606/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
How does it _all_ happen in the kernel if fscache makes requests to userspace to retrieve data from the cache?<br>
<p>
Using a FUSE filesystem as a secondary store, composefs would need a request to userspace only for files that are not available locally, and fully resolved within the kernel.  EROFS ends up in request to userspace also for files that are already in the local cache but unknown to fscache.<br>
<p>
Additionally composefs can use multiple sources transparently for each mount instead of forcing a single userspace handler for /dev/cachefiles. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/917606/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor917614"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Composefs for integrity protection and data sharing</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 11, 2022 4:58 UTC (Sun)
                               by <b>hsiangkao</b> (guest, #123981)
                              [<a href="/Articles/917614/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; Using a FUSE filesystem as a secondary store, composefs would need a request to userspace only for files that are not available locally, and fully resolved within the kernel. EROFS ends up in request to userspace also for files that are already in the local cache but unknown to fscache.</span><br>
<p>
That is not the truth. EROFS only ends up in request to userspace for files that are _not_ in the local cache and unknown to fscache. If the files is already in the local cache, EROFS won't trigger into userspace anymore.<br>
<p>
Please take a look at this: <a href="https://d7y.io/blog/2022/06/06/evolution-of-nydus/">https://d7y.io/blog/2022/06/06/evolution-of-nydus/</a><br>
<p>
<span class="QuotedText">&gt; Additionally composefs can use multiple sources transparently for each mount instead of forcing a single userspace handler for /dev/cachefiles.</span><br>
<p>
It's just a interface. Fscache itself also has multiple daemon and multiple directory plan.<br>
<p>
In addition, as I said many times in this thread, if you want to directly access files and such overlay model is considered as _safe_ (which I don't think so), EROFS can support this mode in a few days as well.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/917614/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor917327"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Composefs for integrity protection and data sharing</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 8, 2022 3:42 UTC (Thu)
                               by <b>xanni</b> (subscriber, #361)
                              [<a href="/Articles/917327/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
According to the description, the metadata (including permissions) is in the filesystem image provided at mount time, not in the object store.  This is how the same object store can be shared between multiple filesystems, each with their own metadata and thus also different permissions.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/917327/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor917324"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Composefs for integrity protection and data sharing</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 8, 2022 3:46 UTC (Thu)
                               by <b>hsiangkao</b> (guest, #123981)
                              [<a href="/Articles/917324/">Link</a>] (11 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; Unlike many filesystems, composefs is not backed by a block device but instead by a set of regular read-only files: an image file that contains the directory structure and file metadata and a directory of content-addressed objects that are the file contents. </span><br>
<p>
I will make it more clear soon in the documentation in the next pull request for Linux v6.2 that EROFS now supports block-based referenced blobs (since v5.16 [1]) and file-based referenced blobs via fscache (since v5.19 [2] [3]. One of the main reasons to use fscache is that we've learned from Incremental FS discussion [4] and also we need a local cache management framework but we don't want to entirely reinvent another wheel and  duplicate the codebase. it seems the main fscache can fit this)  These feature above can always be used _without_ EROFS compression enabled.<br>
<p>
An EROFS image (since v5.16, actually we initially announced it in the summer of 2021 [5] [6] and some IRC channels, then months later I noticed composefs suddenly appeared somehow on the Internet) that can contain several blobs.  The primary blob contains the directory structure and file metadata so that each file can refer to some parts and the whole of the other blobs (chunk-based data deduplication, just like what casync does).  IOWs, one blob (other than the primary blob) can have a part of a file _or_ an entire file (just like what OSTree now does in the per-file sharing) _or_ several files.<br>
<p>
Now EROFS can use together with Nydus image service [7] [8] to do data-deduplication, data integrity protection, lazy-pulling (also called on-demand read, or download-on-demand, what ever) Nydus/OCI/(e)stargz/tar/EROFS (and more) image formats. Nydus image service already supports containerd, harbor, buildkit, and podman ecosystems.<br>
<p>
As the next step, EROFS will support page cache sharing, self-contained integrity protection and convergent encryption no matter the underlay medium is block-based or file-based, integrating to more boot loaders (u-boot already supports EROFS) providing a unified approach as a generic image-based read-only solution for all open-source communities.<br>
<p>
Finally, I'd like to repeat here why we introduced EROFS at that time initially.  One of the main reasons was Squashfs on-disk format having not be developed for a decade and many improvements with no response (at that time or until now, [8][9][10] and more.) or NACK [11].  It becames inactive despite it has more and more complaints [12] [13].  And we've also shown that why EROFS outperforms other read-only filesystems at ATC 19 [14] and LSF/MM 2019 (but sadly I didn't see any explicit report on LWN unlike composefs without any state-of-art comparison.). EROFS is still very actively developing driven by many vendors (as you can see in the commit messages) and individuals with new features.<br>
<p>
<span class="QuotedText">&gt; The filenames used in the object store correspond to the fs-verity digests of the contents, so composefs can detect any changes to files using the fs-verity mechanism. The image file can contain the digests for the files to ensure they are not changed out from under composefs and the image file itself can be protected with fs-verity as well. The fs-verity digest of the image file could be retrieved from a secure location (e.g. a signed kernel command line) and passed to the mount command, allowing composefs to ensure that the entire filesystem is unchanged from its expected state.</span><br>
<p>
One concern of this is that it cannot do this if the underlayfs does't support fs-verity like XFS, FAT, NTFS, local fs abc, or network fses or whatever else fses. It's basically not self-contained.<br>
<p>
[1] <a href="https://lwn.net/Articles/874683/">https://lwn.net/Articles/874683/</a><br>
[2] <a href="https://lwn.net/Articles/896140/">https://lwn.net/Articles/896140/</a><br>
[3] <a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=65965d9530b0">https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/...</a><br>
[4] <a href="https://lore.kernel.org/r/CAOQ4uxhDYvBOLBkyYXRC6aS_me+Q=1sBAtzOSkdqbo+N-Rtx=Q@mail.gmail.com">https://lore.kernel.org/r/CAOQ4uxhDYvBOLBkyYXRC6aS_me+Q=1...</a><br>
[5] <a href="https://lore.kernel.org/linux-fsdevel/20210730194625.93856-1-hsiangkao@linux.alibaba.com">https://lore.kernel.org/linux-fsdevel/20210730194625.9385...</a><br>
[6] <a href="https://lore.kernel.org/r/20211009061150.GA7479@hsiangkao-HP-ZHAN-66-Pro-G1">https://lore.kernel.org/r/20211009061150.GA7479@hsiangkao...</a><br>
[7] <a href="https://nydus.dev/">https://nydus.dev/</a><br>
[8] <a href="https://github.com/dragonflyoss/image-service">https://github.com/dragonflyoss/image-service</a><br>
[9] <a href="https://lore.kernel.org/all/af77c1f80e2725c4cf1bf106d6add820b3b0eed5.1523276963.git.geliangtang@gmail.com/">https://lore.kernel.org/all/af77c1f80e2725c4cf1bf106d6add...</a><br>
     <a href="https://lore.kernel.org/all/975b0f7acbb65445551ee374a2dd38d553ac2e6a.1523326310.git.geliangtang@gmail.com/">https://lore.kernel.org/all/975b0f7acbb65445551ee374a2dd3...</a><br>
     <a href="https://lore.kernel.org/all/1702a314dc9de4626fbefc788213a578be88f184.1533630854.git.geliangtang@gmail.com/">https://lore.kernel.org/all/1702a314dc9de4626fbefc788213a...</a><br>
     <a href="https://lore.kernel.org/all/15428d5047390927114ad49d7721b3da2bdf40ef.1548403955.git.geliangtang@gmail.com/">https://lore.kernel.org/all/15428d5047390927114ad49d7721b...</a><br>
     <a href="https://lore.kernel.org/all/d6cbe74944ad1a6be21cc74b99b30d18cba140c5.1548406694.git.geliangtang@gmail.com/">https://lore.kernel.org/all/d6cbe74944ad1a6be21cc74b99b30...</a><br>
[10] <a href="https://lore.kernel.org/all/20190717114151.10508-1-zbestahu@gmail.com/">https://lore.kernel.org/all/20190717114151.10508-1-zbesta...</a><br>
      <a href="https://lore.kernel.org/all/20190717120644.11128-1-zbestahu@gmail.com/">https://lore.kernel.org/all/20190717120644.11128-1-zbesta...</a><br>
      <a href="https://lore.kernel.org/all/20190719020653.8396-1-zbestahu@gmail.com/">https://lore.kernel.org/all/20190719020653.8396-1-zbestah...</a><br>
[11] <a href="https://lore.kernel.org/all/81a996d7-ba4c-e5a0-d0ce-11951f1fd612@huawei.com/">https://lore.kernel.org/all/81a996d7-ba4c-e5a0-d0ce-11951...</a><br>
[12] <a href="https://lore.kernel.org/all/20170922215508.73407-1-drosen@google.com/">https://lore.kernel.org/all/20170922215508.73407-1-drosen...</a><br>
[13] <a href="https://forum.snapcraft.io/t/squashfs-performance-effect-on-snap-startup-time/13920">https://forum.snapcraft.io/t/squashfs-performance-effect-...</a><br>
[14] <a href="https://www.usenix.org/system/files/atc19-gao.pdf">https://www.usenix.org/system/files/atc19-gao.pdf</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/917324/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor917333"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Composefs for integrity protection and data sharing</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 8, 2022 8:29 UTC (Thu)
                               by <b>diconico07</b> (guest, #117416)
                              [<a href="/Articles/917333/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I'm not sure Composefs authors will see your comments here, this should be posted in the RFC thread, so that may trigger a discussion and maybe shed light on why they chose to do composefs rather than building over EROFS (maybe they just don't know about the features of EROFS you highlight here).<br>
<p>
Concerning the lack of coverage of newest EROFS features, maybe you can write some article about it, it is not unusual to have guest writers on LWN (please note that I'm not part of LWN and don't know their policy for such articles) and I'd love to hear more about these features and how to use them.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/917333/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor917348"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Composefs for integrity protection and data sharing</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 8, 2022 10:27 UTC (Thu)
                               by <b>hsiangkao</b> (guest, #123981)
                              [<a href="/Articles/917348/">Link</a>] (7 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; I'm not sure Composefs authors will see your comments here, this should be posted in the RFC thread, so that may trigger a discussion and maybe shed light on why they chose to do composefs rather than building over EROFS (maybe they just don't know about the features of EROFS you highlight here).</span><br>
<p>
I could do like this, yet one reason I don't do it now despite all of above is that I didn't see any useful comments (either negative or positive) from experienced filesystem developers (as well as overlayfs folks) about such overlay model first (especially from the point of view of security concerns if fs-verity of underlayfs is unusable).  And considering if introducing another brand new filesystem, why not using a finer-grained deduplicated approaches like chunk/block-based deduplication like casync (which already covers per-file deduplication) but insisting on per-file hardlink-like deduplication?<br>
<p>
Also months ago one of composefs authors already asked me on one Slack channel about "building over EROFS" just after I noticed composefs work.  Overall I think it's not hard for EROFS to support such per-file model but my personal question is still above (does the model above really sounds reasonable? If it sounds reasonable, I'm also quite happy to develop this in a few days if they don't have time). I requested him to ask the Linux filesystem community but they seemed they still insist on doing this.<br>
<p>
Then, I also noticed another filesystem called ostreefs [1], yet I don't have time to look much into that again.<br>
<p>
<span class="QuotedText">&gt; Concerning the lack of coverage of newest EROFS features, maybe you can write some article about it, it is not unusual to have guest writers on LWN (please note that I'm not part of LWN and don't know their policy for such articles) and I'd love to hear more about these features and how to use them.</span><br>
<p>
Thank you! If LWN experienced writers ignore EROFS/Nydus work even EROFS is actually gaining more powerful/popular these years (and most all mainstream Linux distributions have landed EROFS) but I'm not a native English speaker but I will try my best to show all the potential use cases! Thank you again!<br>
<p>
[1] <a href="https://github.com/ostreedev/ostreefs">https://github.com/ostreedev/ostreefs</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/917348/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor917416"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Composefs for integrity protection and data sharing</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 8, 2022 16:54 UTC (Thu)
                               by <b>gscrivano</b> (subscriber, #74830)
                              [<a href="/Articles/917416/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Let me try to add some more context.   I've contacted you on Slack because I was curious to see if there was a way to achieve with EROFS what I was playing with composefs, it would have been easier to do it with something already present in the upstream kernel, but it seemed immediately very different than what I had in mind.<br>
<p>
I don't see composefs competing with EROFS.  They can be used for similar use cases but I think they are very different.<br>
<p>
You've started EROFS to improve over squashfs, while I was looking at how we could improve overlayfs, and especially how it is used with OCI containers: overlayfs puts together directories and composefs puts together files.  <br>
<p>
composefs would have probably been forgotten as another toy project if Alex hadn't added support for fs-verity and fixed the image format to be fully reproducible.<br>
<p>
It is much simpler than EROFS and does very few things. Its simplicity is reflected in the source code:<br>
<p>
$ wc -l ~/composefs/kernel/*.[hc] | tail -1<br>
 2287 total<br>
$ wc -l ~/linux/fs/erofs/*.[hc] | tail -1<br>
  9098 total<br>
<p>
We are mostly about putting together already existing pieces.  We do not implement any deduplication or encryption, we just use what is already in the kernel.<br>
<p>
Overall, I think composefs is a big improvement on what we have today.  With just a few features, it solves a list of long-standing issues that exist with containers.  From more serious ones like the lack of file integrity checks to more mundane ones like why do users have to worry about how they sort their ADD and RUN statements in a Dockerfile to optimize the reusing of layers/files? It is also useful without containers, it extends fs-verity to entire directories!<br>
<p>
Another point is that long-term goal/wish is to be able to use composefs from a user namespace, would that be ever possible with EROFS and cachefiles?<br>
<p>
You've pointed out the lack of a finer granularity for the deduplication.  That is a conscious tradeoff: having to work at the file level simplifies the implementation.  Now, composefs needs only to open the file from the underlying file system and delegate any operation to it.  It doesn't have to worry about how chunks are glued together.<br>
I've nothing against this feature though, we just didn't need it for our use cases.  If a finer granularity is useful, then it can be added in the future.<br>
<p>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/917416/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor917422"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Composefs for integrity protection and data sharing</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 8, 2022 17:16 UTC (Thu)
                               by <b>hsiangkao</b> (guest, #123981)
                              [<a href="/Articles/917422/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; Let me try to add some more context. I've contacted you on Slack because I was curious to see if there was a way to achieve with EROFS what I was playing with composefs, it would have been easier to do it with something already present in the upstream kernel, but it seemed immediately very different than what I had in mind.</span><br>
<span class="QuotedText">&gt; I don't see composefs competing with EROFS. They can be used for similar use cases but I think they are very different.</span><br>
<p>
Please give more details first in which cases they behaves different.<br>
<p>
<span class="QuotedText">&gt; You've started EROFS to improve over squashfs, while I was looking at how we could improve overlayfs, and especially how it is used with OCI containers: overlayfs puts together directories and composefs puts together files.</span><br>
<p>
So that is why I'd like to hear from overlayfs folks about this overlay model on the mailing list as well before I kick off the thread on the mailing list.<br>
<p>
<span class="QuotedText">&gt; composefs would have probably been forgotten as another toy project if Alex hadn't added support for fs-verity and fixed the image format to be fully reproducible.</span><br>
<p>
Nope, composefs doesn't even consider endianness now as the very first version of Squashfs.  I'm not sure how it could be _fully_ reproducible.<br>
<p>
As I said above, I don't think fs-verity actually works if underlayfs doesn't support fs-verity, which also includes one of composefs example -- FUSE.<br>
<p>
<span class="QuotedText">&gt; It is much simpler than EROFS and does very few things. Its simplicity is reflected in the source code:</span><br>
<span class="QuotedText">&gt; $ wc -l ~/composefs/kernel/*.[hc] | tail -1</span><br>
<span class="QuotedText">&gt; 2287 total</span><br>
<span class="QuotedText">&gt; $ wc -l ~/linux/fs/erofs/*.[hc] | tail -1</span><br>
<span class="QuotedText">&gt; 9098 total</span><br>
<p>
Please take the initial 4.19 EROFS version as the start (and exclude EROFS compression part since composefs doesn't support compression), since EROFS tends to be a generic filesystem for all backends like block, file, or later mtd with a lot of features.<br>
Also let's do a wild guess if composefs finally merges, if you'd like to add more features, can its codebase stays at the same level?<br>
<p>
<span class="QuotedText">&gt; Overall, I think composefs is a big improvement on what we have today. With just a few features, it solves a list of long-standing issues that exist with containers. From more serious ones like the lack of file integrity checks to more mundane ones like why do users have to worry about how they sort their ADD and RUN statements in a Dockerfile to optimize the reusing of layers/files? It is also useful without containers, it extends fs-verity to entire directories!</span><br>
<p>
EROFS will support self-contained data integrity later (I assumed also by using fs-verity), not like what composefs does --- just by fsverity_get_digest().<br>
<p>
<span class="QuotedText">&gt; You've pointed out the lack of a finer granularity for the deduplication. That is a conscious tradeoff: having to work at the file level simplifies the implementation. Now, composefs needs only to open the file from the underlying file system and delegate any operation to it. It doesn't have to worry about how chunks are glued together.</span><br>
<p>
I don't know why you think chunk-based indexes is complex, like [2] [3]?<br>
<p>
<span class="QuotedText">&gt; I've nothing against this feature though, we just didn't need it for our use cases. If a finer granularity is useful, then it can be added in the future.</span><br>
<p>
and it's much much like EROFS then.<br>
<p>
[2] <a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/fs/erofs?id=2a9dc7a8fec6ca287e2c038f9441e24269e10b5f">https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/...</a><br>
[3] <a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/fs/erofs?id=c5aa903a59db274554718cddfda9039913409ec9">https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/...</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/917422/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor917433"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Composefs for integrity protection and data sharing</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 8, 2022 18:06 UTC (Thu)
                               by <b>gscrivano</b> (subscriber, #74830)
                              [<a href="/Articles/917433/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; Please give more details first in which cases they behaves different.</span><br>
<p>
Given a directory with a bunch of files, how do you setup an EROFS mount that contains the metadata for the file system but refers to the files for their actual payload and without requiring the image blob to be transformed to a different format first?  <br>
<p>
This is the use case I am interested in.<br>
<p>
<span class="QuotedText">&gt; Nope, composefs doesn't even consider endianness now as the very first version of Squashfs. I'm not sure how it could be _fully_ reproducible.</span><br>
<p>
What version are you looking at?  It does since <a href="https://github.com/containers/composefs/pull/24/commits/5407985f5c3ea258bea6847daa387a524fb4d70c">https://github.com/containers/composefs/pull/24/commits/5...</a><br>
<p>
<span class="QuotedText">&gt; Also let's do a wild guess if composefs finally merges</span><br>
<p>
we posted an RFC to gather feedback after we worked on it for quite some time to see if people find it useful but you turned it as if it were an attack on EROFS.  It is not.<br>
<p>
<span class="QuotedText">&gt;  if you'd like to add more features, can its codebase stays at the same level?</span><br>
<p>
From the discussion we just had, it seems EROFS still misses page cache sharing and data-integrity check, so it is likely EROFS will grow more as well?<br>
<p>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/917433/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor917453"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Composefs for integrity protection and data sharing</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 8, 2022 18:39 UTC (Thu)
                               by <b>hsiangkao</b> (guest, #123981)
                              [<a href="/Articles/917453/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; Given a directory with a bunch of files, how do you setup an EROFS mount that contains the metadata for the file system but refers to the files for their actual payload and without requiring the image blob to be transformed to a different format first?</span><br>
<span class="QuotedText">&gt; This is the use case I am interested in.</span><br>
<p>
Why doesn't EROFS work like this? if you consider each EROFS blob as a per-file blob data (currently it's identified by an 16-bit blob ID, but it can extend if you really need like OSTree --- massive per-file blobs), and if each EROFS file has only _one_ chunk pointing to one blob ID.<br>
<p>
Does it behave any different?  You only change the integer blob ID into a string and strict it with one-file one-chunk.<br>
<p>
The only difference is that EROFS uses fscache to manage its cache but that is partially due to our lazy pulling requirement (also I also tend to manage such blobs with a unified in-kernel framework rather than direct access random underlayfs files without some permission check.  Take one example in my opinion, one composefs file "/bin/su" but the file was suddenly replaced by a malicious root shell. If fs-verity is disabled, how to prevent this --- on the other side, overlayfs doesn't have this issue since it doesn't keep another permission), you could refer to Incremental FS discussion [1].  Also EROFS already has an in-house version to access files directly for our special uses [2].<br>
<p>
<span class="QuotedText">&gt; Also let's do a wild guess if composefs finally merges we posted an RFC to gather feedback after we worked on it for quite some time to see if people find it useful but you turned it as if it were an attack on EROFS. It is not.</span><br>
<p>
I just want to say composefs is much much similar to EROFS.<br>
<p>
<span class="QuotedText">&gt; From the discussion we just had, it seems EROFS still misses page cache sharing and data-integrity check, so it is likely EROFS will grow more as well?</span><br>
<p>
Jingbo Xu is working on page cache sharing for Linux 6.3.<br>
Data-integrity check and encryption for confidential containers will be discussed on the mailing list right after page cache sharing is landed.<br>
<p>
[1] <a href="https://lore.kernel.org/all/20190502040331.81196-1-ezemtsov@google.com/">https://lore.kernel.org/all/20190502040331.81196-1-ezemts...</a><br>
[2] <a href="https://github.com/alibaba/cloud-kernel/commit/6654d200b44ea71d008bda1a23462b3fba67635d">https://github.com/alibaba/cloud-kernel/commit/6654d200b4...</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/917453/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor917470"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Composefs for integrity protection and data sharing</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 8, 2022 21:24 UTC (Thu)
                               by <b>gscrivano</b> (subscriber, #74830)
                              [<a href="/Articles/917470/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
thanks for the useful information.<br>
<p>
<span class="QuotedText">&gt; The only difference is that EROFS uses fscache to manage its cache but that is partially due to our lazy pulling requirement</span><br>
<p>
so that is a significant difference.  If I understand it correctly we will need to either setup fscache and populate its cache or have a different daemon before we can use this mechanism.<br>
<p>
Would it ever be possible to use fscache from a user namespace?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/917470/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor917494"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Composefs for integrity protection and data sharing</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 9, 2022 2:30 UTC (Fri)
                               by <b>hsiangkao</b> (guest, #123981)
                              [<a href="/Articles/917494/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; so that is a significant difference. If I understand it correctly we will need to either setup fscache and populate its cache or have a different daemon before we can use this mechanism.</span><br>
<p>
Sorry I just went to sleep.  Bytedance's folks already developed fscache failover feature and fully daemonless mode for their cloud production, and it's also useful to all network fses.  Basically we already developed a lot of features for fscache, it just needs time to upstream.<br>
<p>
Overall I just tried to say currently composefs is very similar to EROFS, even it has some difference (such as directly accessing files) it can be adapted without any diffcult.<br>
<p>
<span class="QuotedText">&gt; Would it ever be possible to use fscache from a user namespace?</span><br>
<p>
I missed this part at that time, sorry.  I think EROFS has the same security model as all on-disk fses with on-disk permission model (no matter it's block-based or file-based.) So the question is no different from other on-disk fses, including composefs.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/917494/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor917456"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Composefs for integrity protection and data sharing</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 8, 2022 18:45 UTC (Thu)
                               by <b>hsiangkao</b> (guest, #123981)
                              [<a href="/Articles/917456/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; What version are you looking at? It does since <a href="https://github.com/containers/composefs/pull/24/commits/5...">https://github.com/containers/composefs/pull/24/commits/5...</a></span><br>
<p>
I'm sorry I didn't follow the recent version, glad to know it's already improved.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/917456/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor917556"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Squashfs on-disk format and &quot;lack of development&quot;</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 9, 2022 18:44 UTC (Fri)
                               by <b>plougher</b> (guest, #21620)
                              [<a href="/Articles/917556/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; One of the main reasons was Squashfs on-disk format having not be developed for a decade and many improvements with no response (at that time or until now, [8][9][10] and more.) or NACK [11]. It becames inactive despite it has more and more complaints [12] [13].</span><br>
<p>
If you wish to throw mud, please do it on a forum that I use.<br>
<p>
The reason why the Squashfs on-disk format has "not been developed" for a decade is because it was a condition of mainlining in 2009.<br>
<p>
Also you seem to have deliberately cherry-picked emails which show myself in a bad-light, concentrating on 2018/2019 when I was *extremely* busy in my paid work as kernel maintainer for Redhat, dealing with the fallout of Spectre/Meltdown etc.<br>
<p>
My Squashfs work is *unpaid* and *voluntary*, and it will take second place to paid work.<br>
<p>
I don't think someone being paid to work on a filesystem is in a position to criticise.<br>
<p>
Phillip Lougher (Squashfs author and maintainer).<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/917556/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor917594"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Squashfs on-disk format and &quot;lack of development&quot;</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 10, 2022 0:12 UTC (Sat)
                               by <b>hsiangkao</b> (guest, #123981)
                              [<a href="/Articles/917594/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; If you wish to throw mud, please do it on a forum that I use.</span><br>
<p>
Since I don't think it needs some real discussion, it just shows a fact of squashfs work during 2018-2020 (maybe).<br>
<p>
<span class="QuotedText">&gt; My Squashfs work is *unpaid* and *voluntary*, and it will take second place to paid work.</span><br>
<span class="QuotedText">&gt; I don't think someone being paid to work on a filesystem is in a position to criticise.</span><br>
<p>
My work at Red Hat was _only_ XFS and currently EROFS still only takes very little time of me (we still need a lot of time to maintain our kernel storage stack.)<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/917594/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2022, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
