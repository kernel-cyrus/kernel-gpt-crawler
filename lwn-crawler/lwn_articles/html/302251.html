        <!DOCTYPE html>
        <html lang="en">
        <head><title>Btrfs to the mainline? [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/302251/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/301380/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/302251/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>Btrfs to the mainline?</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>We're bad at marketing</b>
<p>
We can admit it, marketing is not our strong suit. Our strength is
writing the kind of articles that developers, administrators, and
free-software supporters depend on to know what is going on in the
Linux world. Please <a href="/Promo/nsn-bad/subscribe">subscribe today</a> to help us keep doing that, and so
we donâ€™t have to get good at marketing.
</blockquote>
<div class="FeatureByline">
           By <b>Jake Edge</b><br>October 8, 2008</br>
           </div>
<p>
One of the kernel projects that seems to be attracting a fair amount of
attention these days is the new, copy-on-write filesystem, <a
href="http://btrfs.wiki.kernel.org/">Btrfs</a>.  While still rather
immature&mdash;the disk format is slated to be finalized by the end of the
year&mdash;Btrfs has reached a point where lead developer Chris Mason wants
to <a href="/Articles/302256/">start talking about when to merge it</a>
into the mainline.  Some are advocating moving quickly, while others are a
bit more skeptical that merging it will lead to faster development.
</p>

<p>
Merging Btrfs would have a number of advantages, but more eyes is what
Mason is seeking:
<div class="BigQuote">
But, the code is very actively developed, and I believe the best way to
develop Btrfs from here is to get it into the mainline kernel (with a
large warning label about the disk format) and attract more extensive
review of both the disk format and underlying code.
<p>
The Btrfs developers are committed to making the FS work and to working
well within the kernel community.  I think everyone will be happier with
the final result if I am able to attract eyeballs as early as possible.
</div>
</p>

<p>
Typically, kernel code is not merged until it is ready, but an argument can
be made that filesystems, <a
href="http://lwn.net/Articles/298570/">like device drivers</a>, are
sufficiently isolated from the rest of the kernel that an early inclusion
will do little harm.  Also, a kind of precedent was set by the early "merge" of
ext4, though that was an evolution of the existing ext3 filesystem, while
Btrfs is entirely new.  Andrew Morton has been <a
href="/Articles/302255/">encouraging</a> Mason to get 
Btrfs "<q>into linux-next asap and merge it into 2.6.29</q>".  He
describes his reasoning:

<div class="BigQuote">
My thinking here is that btrfs probably has a future, and that an early
merge will accelerate its development and will broaden its developer base. 
If it ends up failing for some reason, well, we can just delete it
again.
<p>
For various reasons this approach often isn't appropriate as a general
policy thing, but I do think that Linux has needed a new local
filesystem for some time, and btrfs might be The One, and hence is
worth a bit of special-case treatment.
</div>
</p>

<p>
Adrian Bunk is <a href="/Articles/302297/">not convinced</a> that an early
merge will bring the benefits that Morton is touting.  He points to an <a
href="http://lwn.net/Articles/189950/">early ext4 development plan</a>,
noting that the timelines outlined in that message were, perhaps, overly
optimistic. "<q>When comparing with what happened in reality it kinda
disproves 
your 'acceleration' point</q>".
</p>

<p>
There is a difference, though, between ext4 and Btrfs, that Serge Hallyn <a
href="/Articles/302299/">points out</a>:
<div class="BigQuote">
OTOH, maybe it's just me, but I think there is more excitement around
btrfs.  Myself I'm dying for snapshot support, and can't wait to try
btrfs on a separate data/scratch partition (where i don't mind losing
data).  btrfs and nilfs - yay.  Ext4?  &lt;yawn&gt;  That can make all the
difference.
</div>
</p>


<p>
The original timeline showed mid-2007 as a target for a stable ext4
filesystem, but the project overshot that by a year or so.  A recent <a
href="http://lwn.net/Articles/302148/">patch</a>
proposes renaming ext4dev to ext4 because it "<q>is getting stable
enough that it's time to drop 
the 'dev' prefix</q>".  Unexpected difficulties led to
ext4 development taking longer, as Mason <a
href="/Articles/302303/">describes</a>: 
<div class="BigQuote">
Ext4 has always had to deal with the ghost of ext3.  Both from a
compatibility point of view and everyone's expectations of stability.  I
believe that most of us underestimated how difficult it would be to move
ext4 forward.
</div>
</p>

<p>
Many seem to think that Btrfs is different, but it still has a ways to go.
Currently, it does not handle I/O errors very well, while running out of
space on 
the disk can be fatal.  But it is getting close to usable&mdash;at least for
testing and benchmarking.  Getting the code into the mainline would cause
more folks to look at it, as well as test various filesystem changes
against it.  Mason gives an example of how that can work:
<div class="BigQuote">
For example, see the streaming write patches I sent to fsdevel last
week.  I wouldn't test against ext4 as often if I had to hunt down
external repos just to get something consistent with the current
development kernels.  ext4 in mainline makes it much easier for me to
kick the tires.
</div>
</p>

<p>
Btrfs has an <a
href="http://btrfs.wiki.kernel.org/index.php/Development_timeline">aggressive
schedule</a> that targets a 1.0 release this year.  The focus of that release
is to nail down the on-disk format so that changes after that point will be
backward compatible.  Given that 2.6.29 will likely be released in
early to mid-2009, it seems quite possible that Btrfs will be "merge-worthy" by
then, which means that it really is not premature to start considering it
now.
</p><br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Development_model">Development model</a></td></tr>
            <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Filesystems-Btrfs">Filesystems/Btrfs</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/302251/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor302369"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Tux3</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 9, 2008 4:25 UTC (Thu)
                               by <b>ncm</b> (guest, #165)
                              [<a href="/Articles/302369/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
How far along is Tux3, by comparison?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/302369/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor302374"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Tux3</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 9, 2008 5:24 UTC (Thu)
                               by <b>axboe</b> (subscriber, #904)
                              [<a href="/Articles/302374/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Is tux3 along at all? There's no comparison, btrfs is actually usable by now and has a sane lead developer. The latter is especially important for the longevity and success of the project.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/302374/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor302375"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Tux3</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 9, 2008 5:55 UTC (Thu)
                               by <b>bronson</b> (subscriber, #4806)
                              [<a href="/Articles/302375/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Code-wise or marketing-wise?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/302375/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor302427"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Tux3</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 9, 2008 13:08 UTC (Thu)
                               by <b>daniel</b> (guest, #3181)
                              [<a href="/Articles/302427/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Why don't you <a href=http://tux3.org/tux3?cmd=manifest;manifest=a8456109ec2b23e147613204e1a38cee15db1509;path=/user/test/>see for yourself?</a>
      
          <div class="CommentReplyButton">
            <form action="/Articles/302427/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor303337"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Btrfs to the mainline?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 16, 2008 8:34 UTC (Thu)
                               by <b>Janne</b> (guest, #40891)
                              [<a href="/Articles/303337/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I'm not really convinced by Adrian Bunk's argument. It's basically that <br>
"ext4 was merged early, and it has fallen behind it's schedule". Well, it <br>
could very easily be that the schedule was just too optimistic, and that if <br>
they didn't merge early, they could be even further behind their schedule.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/303337/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor314022"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Btrfs to the mainline?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 8, 2009 13:23 UTC (Thu)
                               by <b>angelortega</b> (guest, #1306)
                              [<a href="/Articles/314022/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
For what is worth, I've translated this article to spanish here: <br>
<a href="http://triptico.com/docs/lwn_302251.html">http://triptico.com/docs/lwn_302251.html</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/314022/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2008, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
