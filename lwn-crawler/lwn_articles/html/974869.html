        <!DOCTYPE html>
        <html lang="en">
        <head><title>The rest of the 6.10 merge window [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/974869/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/974710/">Return to the Front page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/974869/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>The rest of the 6.10 merge window</h1>
</div>
<div class="ArticleText">
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>May 27, 2024</br>
           </div>
Linus Torvalds <a href="/Articles/975144/">released 6.10-rc1</a> and closed
the 6.10 merge window on May&nbsp;26.  By that time, 11,534 non-merge
changesets had been pulled into the mainline for the next release; nearly
5,000 of those came in after "<a href="/Articles/973687/">The first half of
the 6.10 merge window</a>" was written.  While the latter half of the merge
window tends to focus more on fixes, there was also a lot of new
functionality that landed during this time.
<p>
Significant changes merged since the first-half summary
include:
<P>


<h4>Architecture-specific</h4>
<p>
<ul class="spacylist">

<li> 32-Bit Arm systems can now be built with <a
     href="/Articles/898040/">Clang-based control-flow integrity</a>.
<li> The PowerPC BPF JIT compiler now supports kfuncs.
<li> The RISC-V architecture has gained support for the Rust language.
</ul>


<p><blockquote class="ad">
<b><tt>$ sudo subscribe today</tt></b>
<p>
Subscribe today and elevate your LWN privileges. You’ll have
access to all of LWN’s high-quality articles as soon as they’re
published, and help support LWN in the process.  <a href="https://lwn.net/Promo/nst-sudo/claim">Act now</a> and you can start with a free trial subscription.
</blockquote>
<p>
<h4>Core kernel</h4>
<p>
<ul class="spacylist">

<li> It is now possible to map tracing ring buffers directly into user
     space.   See <a href="https://git.kernel.org/linus/53683e408013">this
     merge message</a> and <a
     href="https://git.kernel.org/linus/a1e0dd7ce38a">this documentation
     commit</a> for more information.
<li> An initial set of patches toward the eventual <a
     href="/Articles/974491/">consolidation of hugetlbfs</a> into the core
     memory-management subsystem has been merged; there should be no
     user-visible changes.
<li> The <a href="/Articles/961884/">ntsync subsystem</a>, which provides
     a set of Windows NT synchronization primitives for Linux, has been
     merged.  It is, however, marked as "broken" for this release and
     cannot yet be used for its intended purpose.
<li> After a significant amount of discussion and change, the <a
     href="/Articles/958438/"><tt>mseal()</tt> system call</a> was merged
     as one of the final features for this development cycle.
     <tt>mseal()</tt> allows a process to forbid future changes to portions
     of its address space; the initial application is in the Chrome
     browser, which will use it to strengthen its internal sandboxing.  More
     information can be found in <a
     href="https://git.kernel.org/linus/c010d0990082">this documentation
     commit</a>.

</ul>

<p>
<h4>Filesystems and block I/O</h4>
<p>
<ul class="spacylist">

<li> There is a new netlink-based protocol for the control of the NFS
     server in the kernel; a new <tt>nfsdctl</tt> tool is said to be on its
     way into the nfs-utils package.
<li> The XFS filesystem continues to gain more online repair functionality. 
<li> The filesystems in user space (FUSE) subsystem now supports integrity
     protection with <a
     href="https://docs.kernel.org/filesystems/fsverity.html">fs-verity</a>.
<li> The overlayfs filesystem is now able to create temporary files using
     the <tt>O_TMPFILE</tt> option.
</ul>

<p>
<h4>Hardware support</h4>
<p>
<ul class="spacylist">
<li> <b>Clock</b>:
     Sophgo CV1800 series SoCs clock controllers,
     STMicroelectronics stm32mp25x clocks,
     NXP i.MX95 BLK CTL clocks, and
     Epson RX8111 realtime clocks.
<li> <b>Media</b>:
     Broadcom BCM283x/BCM271x CSI-2 receivers and
     sixth-generation Intel image processing units.
<li> <b>Miscellaneous</b>:
     Acer Aspire 1 embedded controllers,
     Lenovo WMI camera buttons,
     ACPI Quickstart buttons,
     Lenovo Yoga Tablet 2 1380 fast chargers,
     Dell AIO UART backlight interfaces,
     MeeGoPad ANX7428 Type-C switches,
     Zhaoxin I2C interfaces,
     Lenovo SE10 watchdog timers,
     ARM MHUv3 mailbox controllers,
     Samsung HDMI PHYs,
     MediaTek 10GE SerDes XFI T-PHYs, and
     Rockchip USBDP COMBO PHY.
</ul>

<p>
<h4>Miscellaneous</h4>
<p>
<ul class="spacylist">

<li> The <tt>perf</tt> tool has, as usual, seen a lot of changes; details
     can be found in <a
     href="https://git.kernel.org/linus/29c73fc794c8">this merge
     message</a>. 

</ul>


<p>
<h4>Networking</h4>
<p>
<ul class="spacylist">

<li> The new <tt>IORING_CQE_F_SOCK_NONEMPTY</tt> operation for io_uring
     can be used to determine whether there are more connection requests
     waiting on a socket.

</ul>

<p>
<h4>Security-related</h4>
<p>
<ul class="spacylist">

<li> The <a
     href="https://docs.kernel.org/security/landlock.html">Landlock</a>
     security module is now able to apply policies to <tt>ioctl()</tt>
     calls; see <a href="https://git.kernel.org/linus/a3746da89faf">this
     documentation commit</a> for a bit more information.
<li> The new <tt>init_mlocked_on_free</tt> boot option will cause any
     memory that is locked into RAM with <a
     href="https://man7.org/linux/man-pages/man2/mlock.2.html"><tt>mlock()</tt></a>
     to be zeroed if (and only if) it is freed without having been first
     unlocked with <tt>munlock()</tt>.  The purpose is to protect memory
     that may be holding cryptographic keys from being exposed after an
     application crash.
</ul>


<p>
<h4>Internal kernel changes</h4>
<p>
<ul class="spacylist">

<li> Developers may be unaware of the <a
     href="https://elixir.bootlin.com/linux/latest/source/include/linux/printk.h#L122"><tt>no_printk()</tt></a>
     macro.  Its job is to do nothing, but to preserve <tt>printk()</tt>
     statements in the code should somebody need to restore them for future
     debugging purposes.  In prior kernels, <tt>no_printk()</tt> still
     contributed <a href="/Articles/857148/">indexing data</a> to the
     kernel image, even though it printed nothing; that has been fixed for
     6.10.
<li> Some changes to how memory for executable code in the kernel is
     allocated have made it possible to enable ftrace and kprobes without
     the need to enable loadable-module support.
<li> Work items in <a href="/Articles/960041/">BH workqueues</a> can now be
     enabled and disabled; with this change, it should be possible to
     convert all tasklet users over to the new mechanism.
<li> The (sometimes controversial) <a
     href="/Articles/974380/">memory-allocation profiling</a> subsystem has
     been merged; this should help developers optimize memory use and track
     down memory leaks.  See <a
     href="https://git.kernel.org/linus/ebdf9ad4ca98">this documentation
     commit</a> for some more information.
<li> There are 371 more symbols exported to modules in 6.10, and 18 new
     kfuncs; see <a href="/Articles/975138/">this page</a> for the full
     list of changes.
</ul>
<p>
If this development cycle follows the usual timeline (and they all do
anymore), then the final 6.10 release will happen on July&nbsp;14
or&nbsp;21.  Between now and then, though, there will be a need for a lot
of testing and bug fixing.
<p>
[Note that LWN subscribers can find more information about the
contributions to 6.10-rc1 in <a href="/ksdb/">the LWN kernel-source
database</a>.]<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Releases-6.10">Releases/6.10</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/974869/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor975424"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The rest of the 6.10 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 27, 2024 16:07 UTC (Mon)
                               by <b>aszs</b> (subscriber, #50252)
                              [<a href="/Articles/975424/">Link</a>] (22 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Could sshd (or its linker) have used this mseal() system call to block the xz backdoor from overwriting its entry points?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/975424/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor975428"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The rest of the 6.10 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 27, 2024 16:51 UTC (Mon)
                               by <b>mussell</b> (subscriber, #170320)
                              [<a href="/Articles/975428/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Yes and no. The dynamic linker can use mseal() to prevent the permissions of GOT/PLT from being modified during runtime, thus ensuring it is always read-only throughout the entire execution of a program. It wouldn't have helped against the xz backdoor as it used IFUNC handlers to modify the PLT during loading before it would have been marked read-only.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/975428/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor975443"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The rest of the 6.10 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 27, 2024 19:52 UTC (Mon)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/975443/">Link</a>] (20 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
No, but it will prevent libsystemd from working properly because new lazy dynamic dependencies won't work if the text is sealed before one of them is called.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/975443/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor975455"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The rest of the 6.10 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 27, 2024 22:13 UTC (Mon)
                               by <b>aszs</b> (subscriber, #50252)
                              [<a href="/Articles/975455/">Link</a>] (17 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
ok... considering that change would have blocked the XY backdoor, apparently a naive use of mseal() would be a step backwards... and it sounds like in this case preventing transitive dependencies from setting IFUNCs would be the most obvious hole to plug.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/975455/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor975472"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The rest of the 6.10 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 28, 2024 0:34 UTC (Tue)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/975472/">Link</a>] (16 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The correct change would have been splitting the libsystemd into libmeaculpa and libjournald. Where libmeaculpa would have contained only the basic systemd interaction functionality (readiness and other housekeeping features) and libjournald would have had everything to do with the journal (including decompressors). It also would have solved the problems with the ssh, but without adding tons of new infrastructure.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/975472/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor975498"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The rest of the 6.10 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 28, 2024 8:24 UTC (Tue)
                               by <b>bluca</b> (subscriber, #118303)
                              [<a href="/Articles/975498/">Link</a>] (15 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Do you really have to repeat this nonsense under every article? It's really tiring, you obviously have no idea how any of this works the way it does and why, so how about you just drop it? Pretty please?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/975498/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor975508"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The rest of the 6.10 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 28, 2024 12:25 UTC (Tue)
                               by <b>diegor</b> (subscriber, #1967)
                              [<a href="/Articles/975508/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Do you have a link to the rationale of why not splitting the library? I'm quite interested to know why.<br>
<p>
Thanks.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/975508/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor975572"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The rest of the 6.10 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 28, 2024 15:07 UTC (Tue)
                               by <b>pbonzini</b> (subscriber, #60935)
                              [<a href="/Articles/975572/">Link</a>] (13 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
But it's true. There's parts of libsystemd that are simple stuff, that has already been implemented dozens of times and that should be a simple copylib rather than a shared library. The rest is the journal.<br>
<p>
Using libsystemd for the former is just laziness as things stand. As a copylib it makes more sense.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/975572/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor975584"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The rest of the 6.10 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 28, 2024 16:13 UTC (Tue)
                               by <b>bluca</b> (subscriber, #118303)
                              [<a href="/Articles/975584/">Link</a>] (12 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Yeah, trivial stuff like a complete D-Bus library, session management APIs and device events handling. Couple of lines that can be copy pasted with no trouble.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/975584/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor975590"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The rest of the 6.10 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 28, 2024 16:42 UTC (Tue)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/975590/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Yet compressor dependencies are only needed for the journal part. Unless I'm missing something?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/975590/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor975592"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The rest of the 6.10 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 28, 2024 16:51 UTC (Tue)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/975592/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Also, having a DBUS implementation in a library that gets loaded into every process is NOT a point of pride.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/975592/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor975594"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The rest of the 6.10 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 28, 2024 17:55 UTC (Tue)
                               by <b>daroc</b> (editor, #160859)
                              [<a href="/Articles/975594/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I think this is getting somewhat off topic; the technical details of how mseal() could or couldn't be used by systemd are interesting. Relitigating systemd's design decisions is both not really relevant to that, and unlikely to come to anything when nobody seems to be changing their mind.<br>
<p>
So let's please end this thread (and the related one with Lennart) here.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/975594/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor975602"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The rest of the 6.10 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 28, 2024 20:24 UTC (Tue)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/975602/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I'm sorry, but I think the design decisions related to libsystemd are absolutely relevant here. mseal() interaction with dynamic loading seems to be relevant, as is the possible future pinsyscalls() analog.<br>
<p>
libsystemd is certainly not the only offender, glibc with NSS and PAM modules is another example. But glibc is moving in the _opposite_ direction and has removed dynamically loaded libpthread.<br>
<p>
And I don't think that the overall systemd design is in question here, just the libsystemd part. And for the record, I _love_ systemd infrastructure in general.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/975602/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor975603"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The rest of the 6.10 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 28, 2024 20:49 UTC (Tue)
                               by <b>daroc</b> (editor, #160859)
                              [<a href="/Articles/975603/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I do agree that it's interesting to know how mseal() interacts with dynamic loading, and that design decisions of systemd touch on that. The message I responded to seemed to me to be getting away from that -- and also to be somewhat confrontational. If you had said something like "And having a DBUS connection in every process is a source of unnecessary complexity, since many processes do not use it", I wouldn't have said anything.<br>
<p>
I definitely don't want to stop you an bluca from having an interesting conversation about the future of this technology and the systemd project. I do really like the details we get from discussions in the comments; I just wanted to try and prevent another heated argument like the one we had this past weekend. We ended up having to turn on comment moderation for that article, so perhaps I'm just being overly-sensitive to comment moderation right now.<br>
<p>
Please do talk about how mseal() will or will not change things for systemd. Please don't get heated about it.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/975603/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor975605"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The rest of the 6.10 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 28, 2024 20:51 UTC (Tue)
                               by <b>daroc</b> (editor, #160859)
                              [<a href="/Articles/975605/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
(And, I should say -- this naturally applies to everyone. I'm not trying to single out Cyberax. Let's all remember to remain polite, respectful, and informative, like the box above the comment submission form says)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/975605/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor975595"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The rest of the 6.10 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 28, 2024 17:56 UTC (Tue)
                               by <b>bluca</b> (subscriber, #118303)
                              [<a href="/Articles/975595/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Usual rubbish. What you, again, fail to understand, is that it's there for free, given there _will_ be multiple processes actively using those APIs, which means the shared library is already loaded in memory by the kernel, and cached among all processes using it. So there is (next to) no extra cost if you don't need it, and if suddenly requirements change and you do need it, you get it for free.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/975595/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor975601"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The rest of the 6.10 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 28, 2024 20:14 UTC (Tue)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/975601/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The question here is not just the overhead (though it IS an issue for containers), but the attack/failure surface. I don't think it's good that every application now has DBUS interface code, just out of pure design cleanliness perspective. Even if it's mostly dormant.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/975601/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor975607"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The rest of the 6.10 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 28, 2024 22:19 UTC (Tue)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/975607/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
THIS!<br>
<p>
Does this mean any attacker who manages to hijack my program, now has access to DBUS with my credentials?<br>
<p>
Not that I understand DBUS in the slightest, but the less code there is in my programs that I don't understand, the happier I am.<br>
<p>
And that is actually a real danger - if I'm clueless about DBUS (because I don't knowingly use it), then how am I supposed to defend myself against its misuse (and more to the point - why should I have to)?<br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/975607/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor975608"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The rest of the 6.10 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 28, 2024 22:36 UTC (Tue)
                               by <b>mjg59</b> (subscriber, #23239)
                              [<a href="/Articles/975608/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The entire point of arbitrary code execution in a process context is that you can execute arbitrary code, not just whatever code already existed in the process.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/975608/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor975796"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The rest of the 6.10 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 29, 2024 16:40 UTC (Wed)
                               by <b>pbonzini</b> (subscriber, #60935)
                              [<a href="/Articles/975796/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
You're right, it's actually much worse than I remembered.<br>
<p>
I was referring basically to sd-daemon.h. Those are the only bits that are of interest to projects outside systemd. If you want to keep it as a .so, move everything else out of the way; but they shouldn't be in the same place as journal, D-BUS and everything else.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/975796/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor975798"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The rest of the 6.10 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 29, 2024 16:51 UTC (Wed)
                               by <b>bluca</b> (subscriber, #118303)
                              [<a href="/Articles/975798/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; Those are the only bits that are of interest to projects outside systemd.</span><br>
<p>
A quick search for 'sd_bus_message' on Github, excluding the systemd org, shows ~12700 results, and that's just one subset of one family of APIs, so I'm going to go with a big and fat &lt;citation needed&gt;<br>
<p>
<span class="QuotedText">&gt; If you want to keep it as a .so, move everything else out of the way</span><br>
<p>
No<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/975798/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor975558"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The rest of the 6.10 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 28, 2024 14:30 UTC (Tue)
                               by <b>mezcalero</b> (subscriber, #45103)
                              [<a href="/Articles/975558/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
That's just rubbish, you apparently have no idea what you are talking about. When you have dlopen() dependencies you resolve your symbols manually via dlsym(), not implicitly via ELF's GOT/PLT. Hence, mseal()ing the GOT/PLT won't affect things for dlopen() based "weak" deps at all. (It won't be able to lock down the security of the pointers you store dlsym() return values in either though, but that's not quite the same as cause "libsystems working properly".)<br>
<p>
Anyway, would appreciate if you'd stop your uneducated FUD, not helpful.<br>
<p>
Lennart<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/975558/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor975591"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The rest of the 6.10 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 28, 2024 16:50 UTC (Tue)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/975591/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; It won't be able to lock down the security of the pointers you store dlsym() return values in either though, but that's not quite the same as cause "libsystems working properly"</span><br>
<p>
As I understand, mseal() should prevent dlopen() from working? Is it not?<br>
<p>
<span class="QuotedText">&gt;  Anyway, would appreciate if you'd stop your uneducated FUD, not helpful.</span><br>
<p>
Introducing brittle workarounds for clearly specious reasons is not helpful either. You screwed up by turning libsystemd from a small 50kb library with utility functions into a large library with decompressors and DBUS implementation.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/975591/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2024, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
