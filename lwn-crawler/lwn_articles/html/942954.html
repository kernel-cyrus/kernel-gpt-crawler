        <!DOCTYPE html>
        <html lang="en">
        <head><title>The first half of the 6.6 merge window [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/942954/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/943200/">Return to the Front page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/942954/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>The first half of the 6.6 merge window</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>This article brought to you by LWN subscribers</b>
<p>
Subscribers to LWN.net made this article &mdash; and everything that
       surrounds it &mdash; possible.  If you appreciate our content, please
       <a href="/Promo/nst-nag3/subscribe">buy a subscription</a> and make the next
       set of articles possible.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>August 31, 2023</br>
           </div>
As of this writing, 4,588 non-merge changesets have been pulled into the
mainline repository for the 6.6 kernel release.  The 6.6 merge window, in
other words, is just getting started.  Nonetheless, a fair amount of
significant work has already been pulled, so the time has come to summarize
what has happened so far in this development cycle.
<br clear="all">
<p>

Interesting changes pulled for 6.6, to date, include:
<p>

<h4>Architecture-specific</h4>
<p>
<ul class="spacylist">

<li> The PA-RISC architecture has gained a just-in-time BPF compiler. 

</ul>


<p>
<h4>Core kernel</h4>
<p>
<ul class="spacylist">

<li> The <tt>/sys/devices/system/cpu/smt/control</tt> knob has, until now,
     only been able to accept two values: <tt>on</tt> to turn simultaneous
     multithreading ("hyperthreading") on, or <tt>off</tt> to disable it.
     This knob has been enhanced to also accept a numeric value indicating
     the number of threads that should be enabled per core.  Initially this
     feature will be used by the PowerPC architecture, which can (in some
     CPUs) run up to 16 threads in each core.
<li> The <a href="/Articles/925371/">earliest eligible virtual deadline
     first (EEVDF) CPU scheduler</a> has been merged; it should provide
     better performance and fairness while relying less on fragile
     heuristics.  The <a
     href="https://git.kernel.org/linus/3ca9a836ff53">merge message</a>
     notes that there may be some rare performance regressions with some
     workloads, and that work is ongoing to resolve them.  
</ul>

<p>
<h4>Filesystems and block I/O</h4>
<p>
<ul class="spacylist">

<li> There is a new flag, <tt>FSCONFIG_CMD_CREATE_EXCL</tt>, for the mount
     API; if it is present, it prevents a mount from sharing an in-kernel
     superblock with another mount.  As explained in <a
     href="https://git.kernel.org/linus/22ed7ecdaefe">this commit</a>,
     superblock sharing can result in mount options being ignored, which
     can lead to security problems.  The intent is to enable the addition
     of a new <tt>--exclusive</tt> flag to the <tt>mount</tt> command so
     that administrators can request that superblock sharing not be
     allowed.
<li> The virtual filesystem layer now supports fine-grained timestamps on
     files.  As described in <a href="/Articles/937247/">this article</a>,
     these timestamps allow filesystems like NFS to detect changes quickly
     for correct cache management while minimizing the overhead of
     maintaining timestamps in general.  Currently fine-grained timestamps
     are supported by the Btrfs, ext4, tmpfs, and XFS filesystems.
<li> The tmpfs filesystem has gained a number of features, including quota
     support, user extended attributes, direct I/O, and stable directory
     offsets (fixing a problem with filesystems exported via NFS).
<li> The kernel will no longer allow the changing of permissions on
     symbolic links. 
<li> The <a href="/Articles/939217/"><tt>fchmodat2()</tt> system call</a>
     has been added.  This version supports the <tt>flags</tt> argument
     that is defined as part of <a
     href="https://linux.die.net/man/2/fchmodat"><tt>fchmodat()</tt></a>,
     but which has never been supported by Linux.  This new system call
     will enable the removal of some inelegant hacks that were needed by C
     libraries to implement the missing functionality.  <a
     href="https://git.kernel.org/linus/475d4df82719">This merge
     message</a> describes the currently supported flags.
<li> The erofs filesystem has gained a bloom filter that speeds up
     negative extended-attribute lookups and support for the <a
     href="https://en.wikipedia.org/wiki/Deflate">Deflate</a> compression
     algorithm.
<li> The XFS filesystem has gained the ability to use large folios in the
     page cache and some associated optimizations, all of which should
     improve performance significantly for some workloads.
<li> It is now possible to <a href="/Articles/930173/">build a kernel
     without buffer-head support</a>, though doing so greatly restricts the
     filesystems that are available.  This is part of the <a
     href="/Articles/931809/">ongoing effort</a> to get rid of — or at
     least greatly reduce — the use of buffer heads in the kernel.
<li> The <a href="/Articles/903855/">ublk</a> user-space block driver has
     gained (undocumented) support for zoned-storage devices.
</ul>

<p>
<h4>Hardware support</h4>
<p>
<ul class="spacylist">
<li> <b>GPIO and pin control</b>:
     ADI DS4520 I2C-based GPIO expanders.
<li> <b>Hardware monitoring</b>:
     Renesas HS3001 humidity and temperature sensors.
<li> <b>Miscellaneous</b>:
     Loongson SPI controllers and
     Cirrus Logic CS42L43 SPI controllers.
<li> <b>Networking</b>:
     Broadcom ASP 2.0 Ethernet controllers,
     Marvell 88Q2XXX PHYs, and
     TI PRU ICSS Industrial Ethernet peripherals.
<li> <b>Regulator</b>:
     Qualcomm REFGEN voltage regulators,
     ADI MAX77857/MAX77831 regulators,
     Richtek RTQ2208 SubPMIC regulators, and
     Awinic AW37503 dual output power regulators.
</ul>

<p>
<h4>Miscellaneous</h4>
<p>
<ul class="spacylist">

<li> The kernel has moved forward to Rust 1.71.1 and bindgen 0.65.1.
     There have been a number of changes to low-level utilities; see <a
     href="https://git.kernel.org/linus/a031fe8d1d32">this merge
     message</a> for the details.

</ul>


<p>
<h4>Networking</h4>
<p>
<ul class="spacylist">

<li> The <a href="/Articles/750845/">AF_XDP</a> address family has gained
     the ability to deal with packets stored in multiple buffers; <a
     href="https://git.kernel.org/linus/3226e3139dfe">this changelog</a>
     and <a href="https://git.kernel.org/linus/49ca37d0d825">this
     documentation patch</a> have a fair amount of detail on how it works.
<li> There is a new BPF hook into packet defragmentation that makes it
     easier to see (and filter) complete packets; <a
     href="https://git.kernel.org/linus/eb03993a6078">this merge
     message</a> has a little more information.
<li> A new BPF hook (<tt>update_socket_protocol</tt>) allows a BPF program
     to change the requested protocol for a new socket.  Its primary
     purpose seems to be to transparently cause programs requesting TCP
     connections to use <a href="/Articles/544399/">multipath TCP</a>
     instead.  MPTCP has also gained some initial support for BPF programs
     that route packets to different subflows.
<li> The <a href="/Articles/776703/">io_uring subsystem</a> has gained
     partial support for network operations, though the full set will wait
     until the 6.7 cycle.
</ul>

<p>
<h4>Security-related</h4>
<p>
<ul class="spacylist">

<li> The <a
     href="https://man7.org/linux/man-pages/man2/seccomp.2.html"><tt>seccomp()</tt></a>
     system call has gained a new flag
     (<tt>SECCOMP_USER_NOTIF_FD_SYNC_WAKE_UP</tt>) that indicates that
     events from the watched process will be handled synchronously; that
     allows the kernel to schedule the two processes more efficiently.
<li> The <a href="/Articles/938637/"><tt>kmalloc()</tt> randomness
     patches</a> have been merged.  This work adds a bit of entropy to
     memory allocations, making exploits a bit harder.
<li> The SELinux subsystem, formerly "NSA SELinux", has <a
     href="https://git.kernel.org/linus/90aa4f5e92f2">been
     "de-branded"</a>.  "<q>While NSA was the original primary developer
     and continues to help maintain SELinux, SELinux has long since
     transitioned to a wide community of developers and maintainers</q>".

</ul>


<p>
<h4>Virtualization and containers</h4>
<p>
<ul class="spacylist">

<li> The <a
     href="https://man7.org/linux/man-pages/man2/userfaultfd.2.html"><tt>userfaultfd()</tt></a>
     system call has gained a new operation, <tt>UFFDIO_POISON</tt>, that
     can mark pages as being poisoned.  The use case here is in
     virtual-machine migration; if a memory page has been corrupted (and
     thus "poisoned") on the old system, <tt>userfaultfd()</tt> can be used
     to retain that marking on the new system.

</ul>

<p>
<h4>Internal kernel changes</h4>
<p>
<ul class="spacylist">

<li> The "kunit" unit-testing framework can now run the <a
     href="https://git.kernel.org/linus/a66d733da801">Rust documentation
     tests</a> along with the rest.
<li> The <a href="/Articles/386090/">Frontswap</a> mechanism was added to
     the kernel in 2010.  In 2023, it's removal is <a
     href="https://git.kernel.org/linus/42c06a0e8ebe">now complete</a>. 
<li> The <a href="/Articles/937839/"><tt>struct ptdesc</tt> patches</a>
     have been merged.  They take the page-table-related fields of
     <tt>struct page</tt> and split them into a separate structure,
     continuing the process of separating the various uses of <tt>struct
     page</tt>. 
<li> A <a href="/Articles/939842/">change to internal symbol handling</a>
     was merged to make it harder for proprietary modules to bypass
     restrictions on GPL-only symbols.
<li> The <a href="/Articles/940973/">dynamic software I/O TLB patch
     series</a> has been merged, providing better support for devices that,
     for one reason or another, need to use bounce buffering.

</ul>
<p>
The 6.6 merge window can be expected to remain open through
September&nbsp;10, after which the development community will spend seven
or eight weeks stabilizing all of this work.  As always, LWN will catch up
with the rest of the merge window once it closes.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Releases-6.6">Releases/6.6</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/942954/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor943224"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The first half of the 6.6 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 31, 2023 16:45 UTC (Thu)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/943224/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt;  A new BPF hook (update_socket_protocol) allows a BPF program to change the requested protocol for a new socket. Its primary purpose seems to be to transparently cause programs requesting TCP connections to use multipath TCP instead. MPTCP has also gained some initial support for BPF programs that route packets to different subflows. </span><br>
<p>
It seems like this functionality should be represented via a normal prctl() option, rather than via ad-hoc BPF hooks.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/943224/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor944960"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The first half of the 6.6 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 20, 2023 11:40 UTC (Wed)
                               by <b>ghane</b> (guest, #1805)
                              [<a href="/Articles/944960/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Is MP-TCP in actual use on the public internet?  I am not aware of any deployments except test beds.<br>
<p>
Information welcome.<br>
<p>
-- <br>
Sanjeev<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/944960/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor945091"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The first half of the 6.6 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 20, 2023 20:48 UTC (Wed)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/945091/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Apple uses it for Siri: <a href="https://www.tessares.net/apples-mptcp-story-so-far/">https://www.tessares.net/apples-mptcp-story-so-far/</a><br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/945091/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor945106"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The first half of the 6.6 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 20, 2023 23:36 UTC (Wed)
                               by <b>Fowl</b> (subscriber, #65667)
                              [<a href="/Articles/945106/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I’d be surprised if they hadn’t moved to or at least planned to add QUIC/HTTP3.<br>
<p>
Wonder how long until we see that in the kernel. SMB3 has a QUIC transport now, for example. Perhaps even the first(?) io_uring exclusive user space API - at least on the server - the browser people like to keep control. /musings<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/945106/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor945402"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The first half of the 6.6 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2023 21:06 UTC (Sat)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/945402/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It still uses it.<br>
<p>
Siri has to work with all kinds of crappy hotel networks, so QUIC is not an option. It relies on UDP which is frequently blocked. MP-TCP is basically just TCP, so it works everywhere.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/945402/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor945369"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The first half of the 6.6 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2023 8:28 UTC (Sat)
                               by <b>mupuf</b> (subscriber, #86890)
                              [<a href="/Articles/945369/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
We used it to broadcast cycling competitions over the 4G network in Finland. Each motorcycle-mounted camera had four 4G modems with SIM cards from different providers.<br>
<p>
Worked wonderfully well! It was good-enough for live national TV too :)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/945369/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor943236"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">PA-RISC?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 31, 2023 18:27 UTC (Thu)
                               by <b>kschendel</b> (subscriber, #20465)
                              [<a href="/Articles/943236/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; The PA-RISC architecture has gained a just-in-time BPF compiler.</span><br>
<p>
That woke me up.  I thought PA-RISC was EOL'ed ages ago.  I guess there are still machines and users?<br>
<p>
I always thought that the architecture deserved better than HP support and HP-UX.  (I'll restrain myself from the usual misspelling.)<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/943236/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor943240"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The first half of the 6.6 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 31, 2023 20:10 UTC (Thu)
                               by <b>willy</b> (subscriber, #9762)
                              [<a href="/Articles/943240/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; The XFS filesystem has gained the ability to use large folios in the page cache and some associated optimizations, all of which should improve performance significantly for some workloads</span><br>
<p>
XFS has been using large folios in the page cache since May 2021 (merged into v5.17). What's changed here is the ability to create large folios for cached writes. Previously, large folios were only created by read() or mmap().<br>
<p>
The patches from Ritesh aren't exactly associated. His motivation was random-write workloads with a block size &lt; PAGE_SIZE, almost the exact opposite problem. It's purely scheduling that they ended up in the same git pull.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/943240/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor943247"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The first half of the 6.6 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 31, 2023 23:36 UTC (Thu)
                               by <b>th0ma7</b> (subscriber, #24698)
                              [<a href="/Articles/943247/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; The kernel will no longer allow the changing of permissions on symbolic links. </span><br>
<p>
Wouldn't this affect user space?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/943247/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor943248"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Changing permissions on symbolic links</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 31, 2023 23:45 UTC (Thu)
                               by <b>corbet</b> (editor, #1)
                              [<a href="/Articles/943248/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      No, I would not expect this change to affect user space.  Most filesystems already do not allow symlink permissions to be changed, and those permissions are meaningless in any case.
<p>
Note that we're not talking about changing permissions on the <i>target</i> of a symlink, only the symlink itself.


      
          <div class="CommentReplyButton">
            <form action="/Articles/943248/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor943266"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Changing permissions on symbolic links</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 1, 2023 13:39 UTC (Fri)
                               by <b>eru</b> (subscriber, #2753)
                              [<a href="/Articles/943266/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Has it even been possible to express the operation of changing symlink permissions? "chmod symlink" dereferences the link to the thing it points to.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/943266/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor943269"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Changing permissions on symbolic links</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 1, 2023 13:48 UTC (Fri)
                               by <b>corbet</b> (editor, #1)
                              [<a href="/Articles/943269/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <tt>fchmodat()</tt> can do that; see <a href="/Articles/939217/">this article from July</a>.


      
          <div class="CommentReplyButton">
            <form action="/Articles/943269/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor943249"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The first half of the 6.6 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 31, 2023 23:53 UTC (Thu)
                               by <b>jalla</b> (guest, #101175)
                              [<a href="/Articles/943249/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
half expected this to be dominated by bcachefs. still pretty excited to see it be as far as it is, and it hopefully making it into experimental<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/943249/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor943303"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The first half of the 6.6 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 1, 2023 14:56 UTC (Fri)
                               by <b>gray_-_wolf</b> (subscriber, #131074)
                              [<a href="/Articles/943303/">Link</a>] (11 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I am curious, should we expect the rust version to change often?  GCC is still sufficient in 5.1 (pretty old) for example.<br>
<p>
Packaging firefox is sometimes a fun exercise in getting it build with the version of rust you have on hand.  Should the same be expected from the kernel or is this just a temporary thing and the rust version required will stabilize one day and be not increased this often?<br>
<p>
I do not know much about rust backwards compatibility story...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/943303/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor943306"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The first half of the 6.6 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 1, 2023 15:07 UTC (Fri)
                               by <b>willy</b> (subscriber, #9762)
                              [<a href="/Articles/943306/">Link</a>] (10 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
https://rust-for-linux.com/rust-version-policy<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/943306/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor943770"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The first half of the 6.6 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 7, 2023 2:51 UTC (Thu)
                               by <b>milesrout</b> (subscriber, #126894)
                              [<a href="/Articles/943770/">Link</a>] (9 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
That doesn't answer the question. It says "It remains to be decided how often the Rust version upgrades will land. Ideally we would track the latest Rust release, but it remains to be seen how other kernel developers feel about it." What is the actual policy?<br>
<p>
Putting a language into the kernel that is so unstable that the "ideal" solution is to track the *latest release* is so insane I can't believe it's being seriously considered.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/943770/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor943865"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The first half of the 6.6 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 7, 2023 16:18 UTC (Thu)
                               by <b>angelsl</b> (subscriber, #144646)
                              [<a href="/Articles/943865/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Why does it being ideal that the latest Rust version is used imply that Rust is unstable?<br>
<p>
It's not. It's perfectly fine to stay on some fixed version. But Rust is still getting new features that make it more ergonomic especially for low-level development like the kernel and people want to use those features.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/943865/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor943930"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The first half of the 6.6 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 7, 2023 22:22 UTC (Thu)
                               by <b>gray_-_wolf</b> (subscriber, #131074)
                              [<a href="/Articles/943930/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Doesn't that increase the difficulty of using newer kernel on older distribution?  I feel there is a difference between difficulty of backporting a new kernel and backporting a new kernel and all the required rust machinery, since the version my distro has can no longer build the current kernel.<br>
<p>
In the same vein, I am sure gcc has nice features people would like to use in at least some versions between 5.1 (minimal requirement) and 13.2 (current version).<br>
<p>
I am unsure why there is (or will be) difference in policy between those two compilers.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/943930/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor944204"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The first half of the 6.6 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 11, 2023 18:08 UTC (Mon)
                               by <b>ojeda</b> (subscriber, #143370)
                              [<a href="/Articles/944204/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; Doesn't that increase the difficulty of using newer kernel on older distribution? I feel there is a difference between difficulty of backporting a new kernel and backporting a new kernel and all the required rust machinery, since the version my distro has can no longer build the current kernel.</span><br>
<p>
Distributions can ignore Rust for the time being if they wish to do so. Some distributions, when I checked with them, told me they would be happy to provide a package (or support in some other way) to compile the kernel with the latest Rust release, assuming they need it.<br>
<p>
Ubuntu, for instance, offers experimental support for it, by providing a package with the required Rust toolchain.<br>
<p>
<span class="QuotedText">&gt; In the same vein, I am sure gcc has nice features people would like to use in at least some versions between 5.1 (minimal requirement) and 13.2 (current version).</span><br>
<span class="QuotedText">&gt;</span><br>
<span class="QuotedText">&gt; I am unsure why there is (or will be) difference in policy between those two compilers.</span><br>
<p>
There is definitely a difference nowadays; however, the plan is to remove that difference as soon as it is possible/reasonable. Please see this section in the webpage: https://rust-for-linux.com/rust-version-policy#after-a-minimum-version-is-declared.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/944204/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor944201"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The first half of the 6.6 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 11, 2023 18:06 UTC (Mon)
                               by <b>ojeda</b> (subscriber, #143370)
                              [<a href="/Articles/944201/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; That doesn't answer the question. It says "It remains to be decided how often the Rust version upgrades will land. Ideally we would track the latest Rust release, but it remains to be seen how other kernel developers feel about it." What is the actual policy?</span><br>
<p>
It does answer the questions that gray_-_wolf posed.<br>
<p>
As the webpage mentions, we are currently trying out upgrading to the latest Rust release as they land. So far, it has not been a problem for the kernel developers using Rust.<br>
<p>
But, to be clear, as the webpage also says, this is just the policy before we can establish a minimum version. Being in the latest one will make it much easier to establish so when it happens, it makes development easier and allows us to give feedback to the Rust teams on the unstable features we need.<br>
<p>
<span class="QuotedText">&gt; Putting a language into the kernel that is so unstable that the "ideal" solution is to track the *latest release* is so insane I can't believe it's being seriously considered.</span><br>
<p>
The Rust language is stable. Some features we need are not. I will add a note to the webpage to make it clear that Rust promises backwards compatibility (for the stable language).<br>
<p>
And it is not an ideal solution: the webpage makes it clear that in the end we want to establish a policy similar to GCC, Clang or other tools used in the kernel.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/944201/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor944208"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The first half of the 6.6 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 11, 2023 18:34 UTC (Mon)
                               by <b>pizza</b> (subscriber, #46)
                              [<a href="/Articles/944208/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; The Rust language is stable. Some features we need are not. </span><br>
<p>
That strikes me as a distinction without a difference.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/944208/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor944211"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The first half of the 6.6 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 11, 2023 19:25 UTC (Mon)
                               by <b>mb</b> (subscriber, #50428)
                              [<a href="/Articles/944211/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Do you want to wait for all the gcc extensions used by the kernel to land in an official C standard before you can use such a kernel?<br>
It's the same thing.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/944211/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor944213"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The first half of the 6.6 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 11, 2023 20:32 UTC (Mon)
                               by <b>pizza</b> (subscriber, #46)
                              [<a href="/Articles/944213/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; Do you want to wait for all the gcc extensions used by the kernel to land in an official C standard before you can use such a kernel? It's the same thing.</span><br>
<p>
It's only the same thing if each kernel release required you to use the latest release of GCC because "C is stable but the features we need are not."<br>
<p>
(Meanwhile, the kernel only requires GCC 5.1, which was released over eight years ago.  So.. yeah, not the same thing at all)<br>
<p>
<p>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/944213/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor944229"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The first half of the 6.6 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 12, 2023 6:03 UTC (Tue)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/944229/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Some kernel features like control flow integrity checking or shadow stacks (just merged) require a much newer GCC.<br>
<p>
Yes, Rust is even newer than that. But that's a distinction without a difference: some kernel features require very new toolchains.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/944229/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor944230"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The first half of the 6.6 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 12, 2023 6:17 UTC (Tue)
                               by <b>mb</b> (subscriber, #50428)
                              [<a href="/Articles/944230/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Correct.<br>
Some Distributions even used to ship a special gcc compiler just for compiling the kernel.<br>
The kernel has very special requirements. That's true for C and Rust alike.<br>
And I really don't see why that would be a problem.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/944230/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor943457"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The first half of the 6.6 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 4, 2023 1:12 UTC (Mon)
                               by <b>shenki</b> (guest, #49715)
                              [<a href="/Articles/943457/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; the PowerPC architecture, which can (in some CPUs) run up to 16 threads in each core.</span><br>
<p>
This should be 8, I don't think there are any SMT16 CPUs.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/943457/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor943458"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">PPC CPU threads</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 4, 2023 1:41 UTC (Mon)
                               by <b>corbet</b> (editor, #1)
                              [<a href="/Articles/943458/">Link</a>] 
      </p>
      
      </div>
      </summary>
      That number came from <a href="https://git.kernel.org/linus/6f49693a6c85e7">this merge message</a> (from the pull request).  If I was wrong, it's a copy-and-paste error :)


      
          <div class="CommentReplyButton">
            <form action="/Articles/943458/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2023, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
