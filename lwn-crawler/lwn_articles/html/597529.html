        <!DOCTYPE html>
        <html lang="en">
        <head><title>Networking on tiny machines [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/597529/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/596963/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/597529/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>Networking on tiny machines</h1>
</div>
<div class="ArticleText">
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>May 7, 2014</br>
           </div>
<a href="/Articles/596754/">Last week's article</a> on "Linux and the
Internet of Things" discussed the challenge of shrinking the kernel to fit
on to computers that, by contemporary standards, are laughably
underprovisioned.  Shortly thereafter, the posting of a kernel-shrinking
patch set sparked a related discussion: what needs to be done to get the
kernel to fit into tiny systems and, more importantly, is that something
that the kernel development community wants to even attempt?
<p>
<h4>Shrinking the network stack</h4>
<p>
The patch set in question was <a href="/Articles/597398/">a 24-part
series</a> from Andi Kleen adding an option to build a minimally sized
networking subsystem.  Andi is looking at running Linux on systems with as
little as 2MB of memory installed; on such systems, the Linux kernel's
networking stack, which weighs in at about 400KB for basic IPv4 support, is
just too big to 
shoehorn in comfortably.  By removing a lot of features, changing some
data structures, and relying on the <a href="/Articles/512548/">link-time
optimization</a> feature to remove the (now) unneeded code, Andi was able
to trim things down to about 170KB.  That seems like a useful reduction,
but, as we will see, these changes have a rough road indeed ahead of them
before any potential merge into the mainline.
<p>
Some of the changes in Andi's patch set include:
<p><blockquote class="ad">
<b><tt>$ sudo subscribe today</tt></b>
<p>
Subscribe today and elevate your LWN privileges. You’ll have
access to all of LWN’s high-quality articles as soon as they’re
published, and help support LWN in the process.  <a href="https://lwn.net/Promo/nst-sudo/claim">Act now</a> and you can start with a free trial subscription.
</blockquote>
<p>
<ul>
<li> Removal of the "ping socket" feature that allows a non-setuid
     <tt>ping</tt> utility to send ICMP echo packets.  It's a useful
     feature in a general-purpose distribution, but it's possibly less
     useful in a single-purpose tiny machine that may not even have a
     <tt>ping</tt> binary.  Nonetheless the change was
     <a href="/Articles/597532/">rejected</a>: "<q>We want to move away
     from raw sockets, and making this optional is not going to help us
     move forward down that path</q>".
<p>
<li> Removal of raw sockets, saving about 5KB of space.  <a
     href="/Articles/597533/">Rejected</a>: "<q>Sorry, you can't have
     half a functioning ipv4 stack.</q>" 
<p> 
<li> Removal of the <a href="/Articles/508865/">TCP fast open</a> feature.
     That feature takes about 3KB to implement, but it also requires the
     kernel to have the crypto subsystem and AES code built in.  <a
     href="/Articles/597534/">Rejected</a>: "<q>It's for the sake of the
     remote service not the local client, sorry I'm not applying this, it's
     a facility we want to be ubiquitous and in widespread use on as many
     systems as possible.</q>"
<p>
<li> Removal of the BPF packet filtering subsystem.  <a
     href="/Articles/597535/">Rejected</a>: "<q>I think you highly
     underestimate how much 'small systems' use packet capturing and thus
     BPF.</q>"
<p>
<li> Removal of the MIB statistics collection code (normally accessed via 
     <tt>/proc</tt>) when <tt>/proc</tt> is configured out of the kernel.
     <a href="/Articles/597548/">Rejected</a>: "<q>Congratulations, you
     just broke ipv6 device address netlink dumps amongst other
     things</q>". 
</ul>
<p>
The above list could be made much longer, but the point should be apparent
by now: this patch set was not welcomed by the networking community with
open arms.  This community has been working with a strong focus on
performance and features on contemporary hardware; networking developers
(some of them, at least) do not want to be 
bothered with the challenges of trying to accommodate users of tiny
systems.  As Eric Dumazet <a href="/Articles/597537/">put it</a>:
<p>
<div class="BigQuote">
	I have started using linux on 386/486 pcs which had more than 2MB
	of memory, it makes me sad we want linux-3.16 to run on this kind
	of hardware, and consuming time to save few KB here and here.
</div>
<p>
The networking developers also do not want to start getting bug reports
from users of a highly pared-down networking stack wondering why things
don't work anymore.  Some of that would certainly happen if a patch set
like this one were to be merged.  One can try to imagine which features are
absolutely necessary and which are optional on tiny systems, but other
users solving different problems will come to different conclusions.  A
single "make it tiny" option has a significant chance of providing a
network stack with 99% of what most tiny-system users need — but the
missing 1% will be different for each of those users.
<p>
<h4>Should we even try?</h4>
<p>
Still, pointing out some difficulties inherent in this task is different
from saying that the kernel should not try to support small systems at all,
but that appears to be the message coming from the networking community.
At one point in the discussion, Andi <a href="/Articles/597538/">posed a
direct question</a> to networking maintainer David Miller: "<q>What
parts would you remove to get the foot print down for a 2MB single purpose
machine?</q>" David's <a href="/Articles/597539/">answer</a> was simple:
"<q>I wouldn't use Linux, end of story.  Maybe two decades ago, but not
now, those days are over.</q>"  In other words, from his point of view,
Linux should not even try to run on machines of that class; instead, some
sort of specialty operating system should be used.
<p>
That position may come as a bit of a surprise to many longtime observers of
the Linux development community.  As a general rule, kernel developers have
tried to make the system work on just about any kind of hardware
available.  The "go away and run something else" answer has, on rare
occasion, been heard with regard to severely proprietary and locked-down
hardware, but, even in those cases, somebody usually makes it work with
Linux.  In this case, though, there is a class of hardware that
<i>could</i> run Linux, with users who would <i>like</i> to run Linux, but
some kernel developers are telling them that there is no interest in adding
support for them.  This is not a message that is likely to be welcomed in
those quarters.
<p>
Once upon a time, vendors of mainframes laughed at minicomputers — until
many of their customers jumped over to the minicomputer market.
Minicomputer manufacturers treated workstations, personal computers, and
Unix as toys; few of those companies are with us now.  Many of us
remember how the proprietary Unix world treated Linux in the early days:
they dismissed it as an underpowered toy, not to be taken seriously.
Suffice to say that we don't hear much from proprietary Unix now.  It's a
classic <a 
href="http://en.wikipedia.org/wiki/The_Innovator%27s_Dilemma">Innovator's
Dilemma</a> story of disruptive technologies sneaking up on incumbents and
eating their lunch.
<p>
It is not entirely clear that microscopic systems represent this type of
disruptive technology; the "wait for the hardware to grow up a bit"
approach has often worked well for Linux in the past.  It is usually safe
to bet on computing hardware increasing in capability over time, so effort
put into supporting underpowered systems is often not worth it.  But we may
be dealing with a different class of hardware here, one where "smaller and
cheaper" is more important than "more powerful."  If these systems can be
manufactured in vast numbers and spread like "smart dust," they may well
become a significant part of the computing substrate of the future.

<p>
So the possibility that tiny systems could be a threat to Linux should
certainly be considered.  If Linux is not running on
those devices, something else will be.  Perhaps it will be a Linux kernel
with the networking stack replaced entirely by a user-space stack like <a
href="http://savannah.nongnu.org/projects/lwip/">lwIP</a>, or perhaps it
will be some other free operating system whose community is more interested
in supporting this hardware.  Or, possibly, it could be something
proprietary and unpleasant.  However things go, it would be sad to look
back someday and realize that the developers of Linux could have made the
kernel run on an important class of machines, but they chose not to.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Embedded_systems">Embedded systems</a></td></tr>
            <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Networking">Networking</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/597529/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor597646"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 7, 2014 14:30 UTC (Wed)
                               by <b>rossburton</b> (subscriber, #7254)
                              [<a href="/Articles/597646/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Regarding lwIP, Andy covered that in his post:<br>
<p>
"There were proposals to instead use LWIP in user space. LWIP with its socket interface comes in at a bit over 100k overhead per application."<br>
<p>
Andy's current series is 170K for kernel-based networking, and can possibly go further.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597646/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor597654"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 7, 2014 15:09 UTC (Wed)
                               by <b>stefanha</b> (subscriber, #55072)
                              [<a href="/Articles/597654/">Link</a>] (26 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
For something really small look at iPXE's TCP/IP stack that is under 64 KB.  But you lose all of the "operating system" niceties like threads, memory management, userspace, POSIX, etc.<br>
<p>
The stack also doesn't match the performance of Linux simply because it doesn't use as many buffers and doesn't implement all the advanced TCP/IP features.<br>
<p>
<a href="https://git.ipxe.org/ipxe.git/tree/HEAD:/src/net">https://git.ipxe.org/ipxe.git/tree/HEAD:/src/net</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597654/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor597684"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 7, 2014 16:07 UTC (Wed)
                               by <b>epa</b> (subscriber, #39769)
                              [<a href="/Articles/597684/">Link</a>] (25 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Didn't the old ka9q implement a full TCP/IP stack (as well as SLIP)?  How much memory did that need?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597684/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor597688"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 7, 2014 16:21 UTC (Wed)
                               by <b>raven667</b> (subscriber, #5198)
                              [<a href="/Articles/597688/">Link</a>] (24 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I'm sure what's considered a "full" TCP/IP stack changes over time, for example I would consider IPv6 and cryptographically secure sequence numbers to be mandatory now.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597688/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor597698"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 7, 2014 17:01 UTC (Wed)
                               by <b>epa</b> (subscriber, #39769)
                              [<a href="/Articles/597698/">Link</a>] (23 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I'm not sure I would; much as we would wish the world to use IPv6 everywhere by now, it does not; and if you assume that anything important will be encrypted higher up the stack, then TCP sequence number spoofing is only a DoS attack, and there are plenty of those to pick from anyway.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597698/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor597777"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 8, 2014 4:05 UTC (Thu)
                               by <b>drag</b> (guest, #31333)
                              [<a href="/Articles/597777/">Link</a>] (22 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
If you want to be able to do the 'smart dust' type thing then ipv6 is going to be needed. Or something else other then Ipv4, at the very least. In fact it may be more useful in the long run to look at striping out ipv4 support altogether. And it's not a 'long long run'... more like 3-5 years long run.<br>
<p>
"cryptographically secure sequence" addresses is a bit suspect. Does anybody actually use that stuff?  Randomized addresses is much more accommodating to the 'small system' meme, though. No need to figure out any address, just find the network address and pick a number at random. Couldn't be any simpler.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597777/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor597792"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 8, 2014 7:22 UTC (Thu)
                               by <b>kleptog</b> (subscriber, #1183)
                              [<a href="/Articles/597792/">Link</a>] (19 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; In fact it may be more useful in the long run to look at striping out ipv4 support altogether. And it's not a 'long long run'... more like 3-5 years long run.</font><br>
<p>
I don't know. Internal corporate networks are moving even slower than I thought possible. RFC1918 addresses are ubiquitous and plentiful.<br>
<p>
For consumer connections IPv6 is going to be necessary just due to the number of devices, but if you can hide an entire business behind a handful of IPs and use RFC1918 internally... I think the transition is going to take much longer, if ever in that context.<br>
<p>
At home, I have a handful of devices using DHCP, switching to IPv6 is simple. At work I have dozens of machines, all talking to each other on RFC1918 addresses, which don't need to talk to the outside world, why would I ever switch? And if you do need something from the internet, HTTP proxies satisfy almost every need.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597792/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor597832"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 8, 2014 13:43 UTC (Thu)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/597832/">Link</a>] (17 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;RFC1918 addresses are ubiquitous and plentiful.</font><br>
Plentiful they are not.<br>
<p>
There's really just one usable /8 which might look much, but once you start allocating addresses from it for a company with multiple sites and try to do VPN for remote access, it's almost inevitable that you'll have collisions with many CPEs.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597832/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor597897"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 8, 2014 19:04 UTC (Thu)
                               by <b>drag</b> (guest, #31333)
                              [<a href="/Articles/597897/">Link</a>] (16 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I know that Comcast, and I am guessing other people with very large networks, has had to come up with a schemes for internal NAT'ng and tunnels that involved tunneling IPv4 over IPv4 because they need multiple 10.0.0.0/8 networks to be able to address all their subnets and equipment.<br>
<p>
Once you run out of IPv4 private addresses things start to get really ugly really quick.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597897/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor597902"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 8, 2014 19:25 UTC (Thu)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/597902/">Link</a>] (15 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Nope, Comcast simply got additional public IPs for their internal control plane: <a rel="nofollow" href="http://www.ipv4depletion.com/?p=493">http://www.ipv4depletion.com/?p=493</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597902/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor597941"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 9, 2014 1:23 UTC (Fri)
                               by <b>drag</b> (guest, #31333)
                              [<a href="/Articles/597941/">Link</a>] (14 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I don't think that lasted very long, then. 2010 is a very long time ago when it comes to internet addresses.<br>
<p>
Nowadays I think that it's most likely Comcast, and probably others, have gone dual stack with IPv4 tunneling over IPv6. That's the most sane solution and it opens up those big blocks IPv4 space to be leased to customers.<br>
<p>
For people that don't want to go that route there is always 'NAT444'. <br>
<p>
<a href="http://www.networkworld.com/community/node/45776">http://www.networkworld.com/community/node/45776</a><br>
<p>
Public IPv4 being NAT'd to private IPv4 networks using other private IPv4 networks. Given my experiences with my phone and various protocols on 'WAN' networks I can guess which direction many of the phone carriers decided to go.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597941/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor597949"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 9, 2014 2:50 UTC (Fri)
                               by <b>rahvin</b> (guest, #16953)
                              [<a href="/Articles/597949/">Link</a>] (13 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Carrier grade NAT is a reality in Europe and Asia, and I have no doubt we'll be seeing it implemented in the US in due course. <br>
<p>
Someone like government or Google/Facebook with a lot of IP space and basically a key component of the internet needs to step up and move completely to IPV6 and force everyone's hand. If major groups moved their services to IPv6 and refused to provide ipv4 services it could start the landslide that shifted the entire internet. If it's going to ever happen it needs to start soon because there is still a lot of equipment out there that's not ipv6 compatible.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597949/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor597961"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 9, 2014 7:56 UTC (Fri)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/597961/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
so you are saying that some critical part of the internet should make itself inaccessible to 90%+ [1] of the internet for some unknown timeframe (but probably years) to force everyone to upgrade.<br>
<p>
somehow I think that the competiton would just step in and the company would go out of business in the meantime.<br>
<p>
<p>
[1] last I heard, IPv6 traffic is somewhere in the 3-6% range, and every network stack I've heard of uses IPv6 in preference to IPv4 if it works<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597961/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor597963"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 9, 2014 8:24 UTC (Fri)
                               by <b>khim</b> (subscriber, #9252)
                              [<a href="/Articles/597963/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <blockquote><font class="QuotedText">last I heard, IPv6 traffic is somewhere in the 3-6% range</font></blockquote>

<p>3.01% by <a href="http://www.google.com/intl/ru/ipv6/statistics.html">latest Google's estimate</a>. But it's grows quite strongly: the same time last year it barely crossed 1% mark.</p>

<p>It's well-known fact that <a href="http://www0.cs.ucl.ac.uk/staff/m.handley/papers/only-just-works.pdf">Internet only just works</a>. This time (as every time previosly) all attempts to postpone the switch were used in the very same way they were used in the past: to push switch back few years and do nothing in the meanwhile.</p>

<p>Only when screams “Aaargh. I need, really <b>need</b> XX IPv4 addresses or else my whole company will go down in flames” started getting calm “Oh, I'm so sorry that your company is going down in flames. Nice weather, isn't it?” response people started switching en-masse to IPv6.</p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/597963/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor597965"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 9, 2014 8:31 UTC (Fri)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/597965/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
3% is hardly "people started switching en-masse" That's still in the "early adopters" combined with a little bit of "people don't realize they're using it" where some network people setup IPv6 because "it's the right thing to do" (as opposed to any push from the users)<br>
<p>
now, if your last paragraph was written in future mode rather than in past tense, then I could possibly agree with you. But I think that there is a LOT more room for 'temporary' fixes (including sales of IPv4 addresses) in the meantime.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597965/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor597973"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 9, 2014 10:47 UTC (Fri)
                               by <b>jem</b> (subscriber, #24231)
                              [<a href="/Articles/597973/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <p>Check out the numbers on https://www.google.com/intl/en/ipv6/</p>
<p>
The growth is steady, and there is a chance the for the global percentage to jump to 6-7 before the end of the year. The 3 % figure is for the whole Internet; the percentages for some countries are much bigger, e.g. USA 7.14%, Germany 8.38%, France 5.23%, Belgium 16.93%.</p>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597973/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor598133"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 10, 2014 14:12 UTC (Sat)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/598133/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; 3% is hardly "people started switching en-masse"</font><br>
<p>
It's not en-masse but it's millions: enough to prove it works on a massive scale.<br>
<p>
<font class="QuotedText">&gt; That's still in the "early adopters" combined with a little bit of "people don't realize they're using it" </font><br>
<p>
I think the vast majority of people start using IPv6 when their ISP (and new Android version...) starts, which means they indeed don't even realize it.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/598133/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor600374"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 27, 2014 15:32 UTC (Tue)
                               by <b>krakensden</b> (subscriber, #72039)
                              [<a href="/Articles/600374/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Comcast claims they're up to 16%:<br>
<p>
<a href="http://www.comcast6.net/index.php/8-ipv6-trial-news-and-information/132-comcast-worlds-largest-ipv6-deployment">http://www.comcast6.net/index.php/8-ipv6-trial-news-and-i...</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/600374/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor598388"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 13, 2014 0:33 UTC (Tue)
                               by <b>rahvin</b> (guest, #16953)
                              [<a href="/Articles/598388/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
You are correct abandoning ipv4 isn't the right course, in retrospect what I should have said was more along the lines of popping up a big scary warning that tells the user to call their ISP. <br>
<p>
I'm sure half their users calling support because Google told them their is something wrong with their internet would do two things, the first is make the ISP hate Google with a passion and the second is cause the ISP to ensure ipv6 is implemented and being used in preference to ipv4. <br>
<p>
It's frustrating for me because I'm on Comcast business, just a month ago I finally got a free modem upgrade to support Docsis 3 and ipv6 (I had to specifically request this upgrade), when I inquired about ipv6 support which their own tools say are fully deployed on my CMTS I was told it's in beta on the business side and the beta is closed. That Beta was open to users last year. In other words the only way I can use ipv6 is if I had a modem that supported it and I requested to be part of a "beta" a year ago when I didn't have a modem that supported it. I'd take sweet relish in Google or Facebook doing that to Comcast. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/598388/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor598018"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 9, 2014 15:43 UTC (Fri)
                               by <b>raven667</b> (subscriber, #5198)
                              [<a href="/Articles/598018/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;  moved their services to IPv6 and refused to provide ipv4 services</font><br>
<p>
That's not going to happen, not now not ever.  That's just not how the world works.<br>
<p>
<font class="QuotedText">&gt;  Google/Facebook with a lot of IP space and basically a key component of the internet needs to step up and move completely to IPV6</font><br>
<p>
This has pretty much happened, both Google and Facebook are dual-stack for their public facing properties, as are some of the major CDNs, Netflix and YouTube as well.  There is a long tail of IPv4-only services that will exist for the next decade or two but all the highest traffic services are ready and waiting for clients to convert over.<br>
<p>
<font class="QuotedText">&gt; there is still a lot of equipment out there that's not ipv6 compatible</font><br>
<p>
Not true of end-user devices like computers and phones but is true for many consumer routers, even though the cable DOCSIS 3 standard mandates IPv6 support for the modem, a lot of routers will have to be replaced (good business opportunity for router makers really, hopefully we can shoe-horn CoDel in the new deployment as well)<br>
<p>
<font class="QuotedText">&gt; Carrier grade NAT is a reality</font><br>
<p>
Even my organization is moving forward with a large NAT system but we are tying the deployment of NAT with the deployment of IPv6 because everything which routes directly (all the most popular web properties mentioned above) doesn't have to go through the NAT which greatly  reduces the expense of it.<br>
<p>
I expect these two factors to drive IPv6 for home users, it should be cheaper for ISPs to provision than expanding the NAT and it should be lower latency for customers where that matters like VoIP and gaming.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/598018/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor598134"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 10, 2014 14:17 UTC (Sat)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/598134/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; I expect these two factors to drive IPv6 for home users, it should be cheaper for ISPs to provision than expanding the NAT and it should be lower latency for customers where that matters like VoIP and gaming.</font><br>
<p>
Peer to peer.<br>
<p>
The one thing that crazy/triple NATs break is peer to peer.<br>
<p>
I would only take a couple of successful peer-to-peer applications (think Napster, Skype, some decentralized game,...) to force ISPs to implement IPv6. <br>
<p>
So what is very effectively delaying IPv6 (forever?) is... "cloud computing".<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/598134/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor600375"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 27, 2014 15:34 UTC (Tue)
                               by <b>krakensden</b> (subscriber, #72039)
                              [<a href="/Articles/600375/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; some decentralized game</font><br>
<p>
Many multiplayer console games- like Call of Duty- are, it saves on hosting costs. It's mostly invisible to the players though.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/600375/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor600377"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 27, 2014 15:54 UTC (Tue)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/600377/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
So, "carrier-grade NAT" (really need to find a more appropriate name for this kludge, preferably a funny one) is doomed?<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/600377/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor600404"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 27, 2014 16:41 UTC (Tue)
                               by <b>mathstuf</b> (subscriber, #69389)
                              [<a href="/Articles/600404/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Maybe "[aircraft] carrier-sized gnat" problems?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/600404/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor600410"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 27, 2014 16:49 UTC (Tue)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/600410/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Hmm... And guided high-velocity ammunition seems to be a great solution for both of them!<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/600410/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor597864"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 8, 2014 14:39 UTC (Thu)
                               by <b>raven667</b> (subscriber, #5198)
                              [<a href="/Articles/597864/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I would think that any devices which need to communicate with the new "smart dust" would have IPv6 as an available feature, there are very few devices which aren't IPv6 capable, just many which don't currently have IPv6 enabled.  It makes more sense to build toward the future than the past.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597864/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor597883"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">sequence numbers</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 8, 2014 17:13 UTC (Thu)
                               by <b>tialaramex</b> (subscriber, #21167)
                              [<a href="/Articles/597883/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The cryptographically secure sequence numbers aren't for addressing, they're to avert an attack <a href="http://en.wikipedia.org/wiki/TCP_sequence_prediction_attack">http://en.wikipedia.org/wiki/TCP_sequence_prediction_attack</a><br>
<p>
So yes, people use that. You would presumbly be able to do without it on a closed network, but then again, strictly speaking you could choose to do without TCP/IP altogether on such a network. Diverging too far from normal risks losing most of the benefits of choosing TCP/IP in the first place.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597883/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor597896"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">sequence numbers</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 8, 2014 19:00 UTC (Thu)
                               by <b>drag</b> (guest, #31333)
                              [<a href="/Articles/597896/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Ok. Thanks for the correction. I was thinking you were referring to one of the more esoteric ipv6 addressing schemes. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597896/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor597670"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 7, 2014 15:23 UTC (Wed)
                               by <b>johill</b> (subscriber, #25196)
                              [<a href="/Articles/597670/">Link</a>] (29 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Not sure I understand davem's logic here - if some other OS with another IP stack is used, it seems it would also not implement those features that Andy was removing, so the "ubiquitous and in widespread use" thing won't happen anyway ...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597670/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor597683"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 7, 2014 16:09 UTC (Wed)
                               by <b>proski</b> (subscriber, #104)
                              [<a href="/Articles/597683/">Link</a>] (19 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I assume the logic is that if Linux won't budge, the manufacturers would have to increase the amount of memory to accommodate Linux.  I doubt they would be happy to use VxWorks in watches and wearables.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597683/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor597687"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 7, 2014 16:15 UTC (Wed)
                               by <b>javispedro</b> (guest, #83660)
                              [<a href="/Articles/597687/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Maybe it is time to start considering Minix :)<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597687/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor597691"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 7, 2014 16:24 UTC (Wed)
                               by <b>epa</b> (subscriber, #39769)
                              [<a href="/Articles/597691/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
He went on to say "I wouldn't use Linux, end of story".  So the other poster is quite right to point out that this contradicts the desire to have TCP fast open available on as many hosts as possible.<br>
<p>
I wonder whether a minimal AES implementation written just for TCP fast open could be used instead of the full crypto subsystem.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597691/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor597720"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 7, 2014 19:18 UTC (Wed)
                               by <b>fandingo</b> (guest, #67019)
                              [<a href="/Articles/597720/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I think we've all learned recently that cryptosystems are seriously under maintained and reviewed. The last thing we need is a special-purpose one that will only be used by a niche industry (embedded computing) that hasn't ever had an acceptable attention to security. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597720/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor597733"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 7, 2014 20:39 UTC (Wed)
                               by <b>epa</b> (subscriber, #39769)
                              [<a href="/Articles/597733/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I agree; there are plenty of independently maintained and reviewed AES implementations which could be used.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597733/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor597799"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 8, 2014 10:57 UTC (Thu)
                               by <b>intgr</b> (subscriber, #39733)
                              [<a href="/Articles/597799/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
This isn't really comparable. Implementing a symmetric cipher is quite straightforward and easy to test. Basically it's just doing arithmetic operations and table lookups in a loop.<br>
<p>
But I'm sure they could just invoke the existing AES code directly without going through the kernel's crypto API, for similar savings in code size.<br>
<p>
All the complexities and vulnerabilities in crypto libraries tend to come from protocol logic and data structure parsing, not the ciphers/primitives themselves.<br>
<p>
<font class="QuotedText">&gt; cryptosystems</font><br>
<p>
Just a nitpick, "cryptosystem" refers to a set of algorithms for a single purpose (such as the RSA encryption cryptosystem, comprised of key generation, encryption and decryption).<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597799/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor597950"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 9, 2014 4:41 UTC (Fri)
                               by <b>jeff_marshall</b> (subscriber, #49255)
                              [<a href="/Articles/597950/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Agreed; implementing a block cipher is stupid simple unless you are trying to mitigate the relevant side channel attacks, and for this use case side channels aren't a meaningful threat.<br>
<p>
I've implemented AES myself in software for several different platforms on bare metal, and helped others to implement it in hardware. In all cases, it was pretty straightforward.<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597950/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor597714"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 7, 2014 18:54 UTC (Wed)
                               by <b>josh</b> (subscriber, #17465)
                              [<a href="/Articles/597714/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
That would be drastically overestimating the influence of a single objecting Linux kernel maintainer versus the maintenance of an out-of-tree branch that incorporates the patches.  Note that almost every other kernel maintainer has been more than willing to merge patches to shrink the kernel.<br>
<p>
The designers of devices and bills of material (BOMs) will fight for every last expense, and will not change their planned amounts of memory or storage when they can change software to be more efficient instead.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597714/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor598027"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 9, 2014 16:28 UTC (Fri)
                               by <b>lacos</b> (guest, #70616)
                              [<a href="/Articles/598027/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; The designers of devices and bills of material (BOMs) will fight for</font><br>
<font class="QuotedText">&gt; every last expense, and will not change their planned amounts of memory</font><br>
<font class="QuotedText">&gt; or storage when they can change software to be more efficient instead.</font><br>
<p>
Indeed, there's a reason why they're called *hard*ware and *soft*ware.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/598027/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor598139"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 10, 2014 14:42 UTC (Sat)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/598139/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; The designers of devices and bills of material (BOMs) will fight for every last expense, and will not change their planned amounts of memory or storage when they can change software to be more efficient instead.</font><br>
<p>
For small software changes you are right. Good luck explaining the concept of  "upstreaming code" to some hardware engineers...<br>
<p>
If on the other hand you talk about switching to a different operating system, which is effectively a major product change, then of course everyone from top to bottom listens.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/598139/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor597719"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 7, 2014 19:13 UTC (Wed)
                               by <b>daniels</b> (subscriber, #16193)
                              [<a href="/Articles/597719/">Link</a>] (9 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Which won't happen: compare the surface area required by the ARM Cortex-M (microcontroller subset of the usual ARMv7 architecture), to that required by even as little as 16MB of memory. Total non-starter.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597719/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor597725"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 7, 2014 19:54 UTC (Wed)
                               by <b>gioele</b> (subscriber, #61675)
                              [<a href="/Articles/597725/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; compare the surface area required by the ARM Cortex-M (microcontroller subset of the usual ARMv7 architecture), to that required by even as little as 16MB of memory. Total non-starter.</font><br>
<p>
Could somebody provide these numbers for us non-experts?<br>
<p>
What is the surface area of an ARM Cortex-M? And of 16MB of RAM (or other kinds of memory)?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597725/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor597729"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 7, 2014 20:05 UTC (Wed)
                               by <b>daniels</b> (subscriber, #16193)
                              [<a href="/Articles/597729/">Link</a>] (7 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I don't have the 16MB area off the top of my head, but ARM lists (for the core only) between 0.04-0.56mm² for the Cortex-M4, or 0.03-0.43mm² for the Cortex-M3.<br>
<p>
TI doesn't ship their Cortex-Ms with anything more than 256kB of SRAM, which you have to say isn't likely to be due to the cost of that much memory ...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597729/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor597781"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 8, 2014 5:11 UTC (Thu)
                               by <b>ncm</b> (guest, #165)
                              [<a href="/Articles/597781/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I think I must be misreading those numbers: between 1/25 and 1/2 of a square mm, really?  Depending on what? Process geometry? Amount of RAM? Cache size?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597781/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor597807"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 8, 2014 9:52 UTC (Thu)
                               by <b>daniels</b> (subscriber, #16193)
                              [<a href="/Articles/597807/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
That's the floorplan area for just the core processor, so does not include any of the peripherals such as RAM, cache, display controller, etc.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597807/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor597839"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 8, 2014 14:04 UTC (Thu)
                               by <b>jonnor</b> (guest, #76768)
                              [<a href="/Articles/597839/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Depending on the process. <br>
256kB SRAM is roughly the same die size as a Cortex M3 CPU core.<br>
<a href="http://zeptobars.ru/en/read/MDR32F9Q2I-1986VE91T-whats-inside-russian-arm">http://zeptobars.ru/en/read/MDR32F9Q2I-1986VE91T-whats-in...</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597839/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor597878"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 8, 2014 17:12 UTC (Thu)
                               by <b>yaap</b> (subscriber, #71398)
                              [<a href="/Articles/597878/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
There's a pretty big range of micro-controllers, from a stripped down core with not even an integer hardware multiplier to uC with MMU, FPU and L1 caches controller. The core logic (no memory) roughly goes from 8 to 80 kgates.<br>
<p>
A stripped down core at ~8 kgates could be less than 0.05 mm2 in 90nm (when synthesized for reduced size, not speed). Typically those uC contain mixed logic and do not use the finer processes, it's more in the 65 to 180 nm range.<br>
<p>
Then the ratio of SRAM to logic density is very very roughly 1.2: you can store 1.2 bit on average in the area used by a logic gate. Be careful, there are a lot of variations here depending on the chosen trade-off between area, power (dynamic and leakage) and speed, for both logic and memories. So only take this as a very rough order a magnitude number.<br>
<p>
From that, you can see that even a high-end uC logic at ~80 kgates is only as big as ~12 kB of SRAM (bytes not bits now). And such a high-end uC would be over dimensioned for a basic connected sensor.<br>
It may be surprising to some, but a core logic is quite negligible compared to the attached memories. The logic size still does matter but indirectly, as it's somewhat related to the power efficiency.<br>
<p>
There are several levels of M2M / IoT systems, and their implementation can be very different. There are also threshold effects on the memory sizes.<br>
<p>
At the low-end, linux is over kill. All the memory is embedded in the die, and it must be very small (few 10s kB to 100s kB). There are many free OS for this area, RTOS actually, and one of the most popular is FreeRTOS.<br>
<p>
At the other end, for high performance / fancy devices, linux usually makes perfect sense and its size is not an issue. There's a big threshold effect: if one need an external SDRAM, the smallest/cheapest long term supported size nowadays would be 128 MB LPDDR2. Linux fits without problem, and there is absolutely no point in optimizing the IP stack size.<br>
This memory could cost ~$0.85 in standard temperature range, and ~$1 in industrial range.<br>
<p>
Then in between there is an area where optimizing linux may be useful, but it's not a given. Here too there are threshold effects. For medium systems one could use an external chip containing some Flash and pSRAM (it's SDRAM, but made too look like SRAM to the uC. So the uC doesn't need an SDRAM controller) for example. That can go up to 8 MB typically. It's cheaper, but you can't pick any size. If you need a bit over 2 MB, then it's 4 MB let's say. It's not practical to embed such big SRAM in the uC die, as they don't use small nodes (see above).<br>
Maybe optimizing can get one to the lower size, but then one has to compare the effort to the saving. You would need a high volume to justify it.<br>
And then, one can question if linux is the best choice there. If footprint is this critical one could use a rich RTOS. There are also free options, see eCos (<a href="http://ecos.sourceware.org">http://ecos.sourceware.org</a>, bought by Red Hat if my memory serves well). It's leaner than linux, due to being simpler too of course, but enough for a simple connected device.<br>
<p>
So I think DaveM reaction makes sense. Pushing upstream the burden of maintaining a special configuration of Linux for what looks like a corner case where using a different OS may be even better from a BoM cost point of view doesn't seem justified at this stage. Let someone prove the case by selling real products based on such optimization in volume first seems a sensible approach to me. I'm not holding my breath to be frank.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597878/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor598129"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 10, 2014 11:38 UTC (Sat)
                               by <b>mgedmin</b> (subscriber, #34497)
                              [<a href="/Articles/598129/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Thank you, this was very interesting.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/598129/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor598138"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 10, 2014 14:38 UTC (Sat)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/598138/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; I think I must be misreading those numbers: between 1/25 and 1/2 of a square mm, really? Depending on what? Process geometry? Amount of RAM? Cache size?</font><br>
<p>
For pure comparisons between features/blocks I think it's easier to look at number of gates - independent from the process.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/598138/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor597847"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 8, 2014 14:34 UTC (Thu)
                               by <b>jonnor</b> (guest, #76768)
                              [<a href="/Articles/597847/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
SRAM die sizes are roughly 0.5mm^2/Mbit on sub-40nm process, or around 64mm^2 for 16MB.<br>
<a href="http://techon.nikkeibp.co.jp/english/NEWS_EN/20130226/268112/">http://techon.nikkeibp.co.jp/english/NEWS_EN/20130226/268...</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597847/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor597686"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 7, 2014 16:11 UTC (Wed)
                               by <b>epa</b> (subscriber, #39769)
                              [<a href="/Articles/597686/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I didn't understand that "we want to move away from raw sockets", but at the same time a patch to allow turning off raw sockets was rejected.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597686/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor597715"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 7, 2014 18:56 UTC (Wed)
                               by <b>josh</b> (subscriber, #17465)
                              [<a href="/Articles/597715/">Link</a>] (7 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
And in particular, the various rejections claiming that embedded systems will want every last feature of the existing networking stack do not match up with the real-world embedded systems that explicitly don't.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597715/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor597739"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 7, 2014 21:48 UTC (Wed)
                               by <b>smurf</b> (subscriber, #17840)
                              [<a href="/Articles/597739/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Not to mention that many of those systems will not be connected to the Big Bad Internet. They'll be on a tightly-constrained firewalled-off subnet where near-realtime responsiveness on embedded hardware is much more relevant than having crypto available. Or a packet filter. Heck, even IP fragmentation+reassembly makes no sense whatsoever on a restricted LAN with no outside traffic.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597739/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor597746"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 7, 2014 22:14 UTC (Wed)
                               by <b>PaulWay</b> (subscriber, #45600)
                              [<a href="/Articles/597746/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Please don't say that :-)  Because as we've seen from SCADA systems, things that people say "no-one would ever connect this directly to the internet with no firewall" will... be connected directly to the internet with no firewall.  People are lazy.  Security is everyone's concern.<br>
<p>
Have fun,<br>
<p>
Paul<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597746/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor597747"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 7, 2014 22:21 UTC (Wed)
                               by <b>josh</b> (subscriber, #17465)
                              [<a href="/Articles/597747/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Even if these systems are connected to the Internet, if they don't have a packet filter configured, they might as well not have packet filtering compiled in.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597747/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor597827"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 8, 2014 13:51 UTC (Thu)
                               by <b>k3ninho</b> (subscriber, #50375)
                              [<a href="/Articles/597827/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Of course I was going to put my fridge-freezer on the public internet*! How else would it tweet that I left the door open and all the contents were ruined. It might be a tough ask to get a twitter client inside 2MB of RAM, TBH. :-)<br>
<p>
*: However well you idiot-proof the world, nature breeds a better class of idiot.<br>
<p>
K3n.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597827/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor597900"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 8, 2014 19:17 UTC (Thu)
                               by <b>drag</b> (guest, #31333)
                              [<a href="/Articles/597900/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
 People need to stop considering private networks as secure. Unless here is a air-wall between it and the outside networks there are just too many holes in and out to automatically assume that nobody is able to get in and attack vulnerable systems or insecure protocols.<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597900/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor598176"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 11, 2014 0:28 UTC (Sun)
                               by <b>eean</b> (subscriber, #50420)
                              [<a href="/Articles/598176/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Talk to Iranian nuclear researchers about air wall security. :p<br>
<p>
Mostly while the Linux kernel shouldn't be insecure itself, its role in providing security is for sure not always needed.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/598176/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor599944"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 22, 2014 14:16 UTC (Thu)
                               by <b>quanstro</b> (guest, #77996)
                              [<a href="/Articles/599944/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
it might be a mistake to over generalize from a targeted attack on a high-value asset.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/599944/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor597704"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 7, 2014 17:43 UTC (Wed)
                               by <b>ibukanov</b> (guest, #3942)
                              [<a href="/Articles/597704/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It is interesting that an idea of a user-space IP stack is useful not only for tiny systems, but for those that wants to handle 1e6 connections with minimal latency. Perhaps indeed the extremes can not be handled by a common stack in the kernel. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597704/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor598161"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 10, 2014 21:23 UTC (Sat)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/598161/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; It is interesting that an idea of a user-space IP stack is useful not only for tiny systems, but for those that wants to handle 1e6 connections with minimal latency.</font><br>
<p>
Done at least here: <a href="http://www.shenick.com/products/diversifeye/">http://www.shenick.com/products/diversifeye/</a> ; possibly also elsewhere.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/598161/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor599095"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 16, 2014 18:36 UTC (Fri)
                               by <b>piotrjurkiewicz</b> (guest, #96438)
                              [<a href="/Articles/599095/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Luigi Rizzo's netmap goes that way: <a rel="nofollow" href="http://info.iet.unipi.it/~luigi/netmap/">http://info.iet.unipi.it/~luigi/netmap/</a><br>
<p>
I think such an approach could be a solution for the problems mentioned in the article too. I mean to implement some kind of lightweight kernel interface between NIC and userspace. Than user would be able to disable kernel networking and use his own userspace networking stack (either tiny or performance-oriented one) in extreme cases.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/599095/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor599101"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 16, 2014 18:41 UTC (Fri)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/599101/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
that's already available, that's what LWIP is that Andi mentioned in his original post. It's not that small, and it only takes a few apps before it becomes larger than the kernel version (and only a couple to be larger than Andi's stripped down version)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/599101/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor597709"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 7, 2014 18:22 UTC (Wed)
                               by <b>boog</b> (subscriber, #30882)
                              [<a href="/Articles/597709/">Link</a>] (7 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I completely agree with the many suggestions in this article that the rejections risk being short-sighted. One only needs to look at what has happened to Windows. They made the bet that computers would only become more powerful and have struggled for years with netbooks and tablets, etc.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597709/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor597734"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 7, 2014 20:41 UTC (Wed)
                               by <b>epa</b> (subscriber, #39769)
                              [<a href="/Articles/597734/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Computers become more powerful but software also becomes more bloated over time at nearly the same rate, so if your operating system runs like a dog on low-end hardware today that will likely still be the case in five years.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597734/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor598135"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 10, 2014 14:36 UTC (Sat)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/598135/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; One only needs to look at what has happened to Windows. They made the bet that computers would only become more powerful and have struggled for years with netbooks and tablets, etc.</font><br>
<p>
Computers have obviously become much more powerful. The problem is that Microsoft made a much bigger bet than this: they made the bet that the power of computers would grow much FASTER than Windows bloat.<br>
<p>
With Windows phone it looks like they finally learned how to trim bloat. But too little, too late. Also, very poor choice of a name. They were probably too proud of it which shows how they've lost it.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/598135/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor598156"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 10, 2014 20:44 UTC (Sat)
                               by <b>giraffedata</b> (guest, #1954)
                              [<a href="/Articles/598156/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <blockquote>
<blockquote>
One only needs to look at what has happened to Windows. They made the bet that computers would only become more powerful and have struggled for years with netbooks and tablets, etc.
</blockquote>
Computers have obviously become much more powerful. 
</blockquote>
<p>
You seem to have missed the point, because computers have <em>not</em> become universally more powerful.  Several entire classes of computers less powerful than previously common ones have been introduced and taken over much of the workload of those previous ones.  So even if Microsoft hadn't added any bloat at all, it still would have lost market share.  To stay even, it would have had to do what this article reports is proposed for Linux: take stuff out.

      
          <div class="CommentReplyButton">
            <form action="/Articles/598156/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor598158"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 10, 2014 20:56 UTC (Sat)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/598158/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Even some micro-controllers today are more powerful than the first systems Windows ran on...<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/598158/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor598160"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 10, 2014 21:23 UTC (Sat)
                               by <b>giraffedata</b> (guest, #1954)
                              [<a href="/Articles/598160/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <blockquote>
Even some micro-controllers today are more powerful than the first systems Windows ran on...
</blockquote>
<p>
True, but I don't know how that's relevant here, because the claim was that Microsoft bet that computers would continually get more powerful, not that they would always be more powerful than the first ones Windows ran on.
<p>
Actually, thinking about it some more, I realize that one of these backward steps happened well before the netbooks and tablets.  It happened with laptop computers.  The first laptops were far less powerful in every dimension than previously typical computers they replaced.  They didn't even have color displays.
<p>
But I don't know how Windows fared in that transition.

      
          <div class="CommentReplyButton">
            <form action="/Articles/598160/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor598168"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 10, 2014 22:30 UTC (Sat)
                               by <b>raven667</b> (subscriber, #5198)
                              [<a href="/Articles/598168/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; But I don't know how Windows fared in that transition.</font><br>
<p>
This is a good point I hadn't seen mentioned before. What happened was that people ran Windows on both laptops and desktops, so Windows didn't suffer here, but people were highly award that laptops were inferior in almost every way so it is laptop sales which suffered, only people who valued portability above all else used them. Laptops only became generally popular in the mid 2000s when the specs finally caught up to desktops, or at least when single-core speeds leveled off. <br>
<p>
Since we are on the subject it should be mentioned that the whole net book category of computers was designed for Linux first and in the competitive marketplace traditional Linux desktops lost fair and square, people returned them in droves.  <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/598168/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor598948"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 15, 2014 22:08 UTC (Thu)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/598948/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
People returned them in droves? I think you've been taken in by propaganda!<br>
<p>
There was the highly publicised example of one manufacturer. I think they claimed "the majority of our linux netbooks have been returned", only for somebody else to point out they didn't make any!!!<br>
<p>
And when I asked (at ASDA, our Walmart subsidiary) I was told that they'd had pretty much NO returns at all. That was where I bought my netbook (which unfortunately I broke - I ended up thanks to wifely pressure trying to install XP on it. Somehow that trashed the BIOS :-(<br>
<p>
No - there was a lot of propaganda to try and make linux netbooks look bad, but as far as I can make out, every time anybody dug into the figures they discovered somebody was lying with statistics ...<br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/598948/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor597738"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 7, 2014 21:20 UTC (Wed)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/597738/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
what was even more bothersome to me was his statement saying to just use a 2.4 kernel, and when questioned on this his response of (paraphrased) "so you are saying that the 2.4 maintainer is incompetent"<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597738/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor597742"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Linux CAN be made to run small</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 7, 2014 21:42 UTC (Wed)
                               by <b>tbird20d</b> (subscriber, #1901)
                              [<a href="/Articles/597742/">Link</a>] 
      </p>
      
      </div>
      </summary>
      It's a shame to see these patches rejected for such specious reasons.  Reports from ELC indicate that the kernel <b>can</b> be made to run in small-footprint devices with useful functionality.
<p>
The micro-Yocto project has shown a recent kernel running in under 2M RAM, with networking (and presumably with these patches).  Vitaly Wool presented some information about running Linux on a system with 2M flash and 256K ram (but the kernel was a bit old - 2.6.33).
<p>
Here are links to their presentations:
<ul>
<li>
<a href="http://elinux.org/images/5/54/Tom.zanussi-elc2014.pdf">
microYocto and the Internet of Tiny</a>
</li><li>
<a href="http://elinux.org/images/c/ca/Spreading.pdf">
Spreading the disease: Linux on microcontrollers</a>
</li>
</ul>
<p>
It would be nice to be able to share this work widely, by getting it upstream.
      
          <div class="CommentReplyButton">
            <form action="/Articles/597742/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor597749"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 7, 2014 23:24 UTC (Wed)
                               by <b>liam</b> (guest, #84133)
                              [<a href="/Articles/597749/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
L4 based kernels, fiasco.oc, seem a better choice for such hardware.<br>
They require more development to bring up but they can be incredibly customized.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597749/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor597761"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 8, 2014 1:38 UTC (Thu)
                               by <b>ras</b> (subscriber, #33059)
                              [<a href="/Articles/597761/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I wish I could find the patches.<br>
<p>
I'm guessing the put the feature under the control of a CONFIG_XXX setting in the kernel build system.  Hell, he might even have put it under "Minimal Linux ABI" to warn the user if they features are enabled they would break the conventional userspace ABI.<br>
<p>
If so, I'm struggling to understand DaveM's NACK's.  Particularly his reasons.  I could have understood "sorry, supporting this in the future will be a nightmare".  But "I don't want a 1/2 working networking stack".  Maybe he doesn't, when the choice is not using Linux at all or a 1/2 working networking stack, some people are going to take the latter.  His response of "no you don't" sounds a tad condescending.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597761/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor597762"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 8, 2014 1:43 UTC (Thu)
                               by <b>ras</b> (subscriber, #33059)
                              [<a href="/Articles/597762/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Apologies to DaveM.  He did make that argument: <a href="http://lwn.net/Articles/597626/">http://lwn.net/Articles/597626/</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597762/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor597836"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 8, 2014 13:57 UTC (Thu)
                               by <b>simlo</b> (guest, #10866)
                              [<a href="/Articles/597836/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
But isn't testing of a special configuration left to the users of that configuration to test? That way there is no testing burden on the kernel developers.<br>
<p>
But there is a solution: Maintain a branch out of the main tree. If the patches are of no burden to the network developers, then it ought to be easy to merge to and maintain the branch.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597836/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor597874"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 8, 2014 15:29 UTC (Thu)
                               by <b>PaulMcKenney</b> (<b>&#x272D; supporter &#x272D;</b>, #9624)
                              [<a href="/Articles/597874/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Good point, similar to the -rt tree.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597874/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor597894"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 8, 2014 19:01 UTC (Thu)
                               by <b>simlo</b> (guest, #10866)
                              [<a href="/Articles/597894/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Let us hope there will be no conflicts when merging -tinynet and -rt then.<br>
<p>
Feature management is done best by config options not branches. On the other hand maintaining special cases on branches let the core developers concentrate on core functionality not the special cases.<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597894/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor597901"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 8, 2014 19:25 UTC (Thu)
                               by <b>PaulMcKenney</b> (<b>&#x272D; supporter &#x272D;</b>, #9624)
                              [<a href="/Articles/597901/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I am not all that worried about conflicts between -rt and -tinynet.  After all, we manage frequent conflicts between well over 100 developer trees as it is.  And separate trees allow large changes to be tested, refined, and otherwise improved without mainline breakage.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/597901/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor598163"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 10, 2014 21:26 UTC (Sat)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/598163/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Feature management is done best by config options not branches.</font><br>
<p>
It's one of the most classic configuration management trade-off. Only simple problems have simple answers here.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/598163/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor598488"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 13, 2014 19:40 UTC (Tue)
                               by <b>mwsealey</b> (guest, #71282)
                              [<a href="/Articles/598488/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Question: 2MB of writable memory or 2MB of XIP flash?<br>
<p>
Can we even think of an application that justifies a 2MB kernel (or even a 1MB kernel!?) that wouldn't also take up more than 2MB?<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/598488/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor598490"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 13, 2014 19:47 UTC (Tue)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/598490/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
well, if turning on networking by itself is 400K, that's 40% of your 1M kernel before you do anything else. So it's going to be pretty easy to hit that limit.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/598490/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor600420"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 27, 2014 18:17 UTC (Tue)
                               by <b>garyamort</b> (guest, #93419)
                              [<a href="/Articles/600420/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I think it's been pretty clear for quite a while that the gatekeepers for Linux have been pretty much focused primarily on servers and the bright shiny 16-cpu their employers buy them for quite a number of years.<br>
<p>
BFS was declared a failure because it didn't handle well on 16+ cpu's....which while that may have been common for linux kernel coders back in 2009 - it's not common for most people.<br>
<p>
Android devs realized quite early that enhancements to make Linux function well on embedded devices would be difficult to get accepted - so they made the sensible choice of writing complete replacements for linux functions rather then try to maintain a patch set against libraries which kernel devs could change and break the patches.  Which seems to have upset some kernel devs that instead of playing catch up and stroking their ego's - android devs just side stepped them.<br>
<p>
It's really not that big of a deal though  - in the end all that really happens is Linux gets forked into a specialized version - and if the distro becomes popular enough, kernel devs eat crow and grudgingly accept the code they previously rejected.   <br>
<p>
Sure, in the end a lot of kernel devs end up looking like incompetent twits when their 'reasoned arguments' turn out to be a bunch of narcissistic ego stroking, but Linux itself continually improves by absorbing the code that works well while at the same time avoiding having the handle all the fiddly debugging.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/600420/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor600424"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 27, 2014 19:08 UTC (Tue)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/600424/">Link</a>] (7 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
the huge changes the Android devs have been making aren't in the kernel, they are in userspace.<br>
<p>
There have been a handful of features that they've added to the kernel, and after a lot of discussion those are getting integrated (or replaced with something the upstream devs and the android devs can agree on)<br>
<p>
So at best you are mixing issues.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/600424/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor600433"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 27, 2014 22:09 UTC (Tue)
                               by <b>renox</b> (guest, #23785)
                              [<a href="/Articles/600433/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; the huge changes the Android devs have been making aren't in the kernel, they are in userspace.</font><br>
<p>
<p>
Uh? These changes are not relevant here, as the GP was talking about Linux.<br>
<p>
<font class="QuotedText">&gt; There have been a handful of features that they've added to the kernel, and after a lot of discussion those are getting integrated (or replaced with something the upstream devs and the android devs can agree on). So at best you are mixing issues.</font><br>
<p>
Given the time and the difficulty for to have these 'handful of features' integrated into the mainline, I'd say that he is right..<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/600433/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor600440"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 28, 2014 0:01 UTC (Wed)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/600440/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
well, the OP talks about replacing functions instead of maintining patches against libraries.<br>
<p>
what libraries does the kernel maintain?<br>
<p>
It's far from obvious that this is talking about kernel functions.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/600440/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor600451"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 28, 2014 6:03 UTC (Wed)
                               by <b>smurf</b> (subscriber, #17840)
                              [<a href="/Articles/600451/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
There are a couple of reasons why wakelocks or the Binder haven't been accepted as they are, and those have nothing to do with mobile phones' small footprints, memory or otherwise.<br>
<p>
Don't twist history.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/600451/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor600474"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 28, 2014 14:43 UTC (Wed)
                               by <b>raven667</b> (subscriber, #5198)
                              [<a href="/Articles/600474/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
You are right that the reason these features were rejected as-is is not due to mobile devices small resources but it has a lot to do with the fact that the kernel has many many constituencies a large number of which are big iron and any new features have to be workable across the entire gamut of places where Linux is used, so features have to integrate well with the overall scheme, layout and style of the kernel, can't cause too many regressions on other completely unrelated systems and should be generally useful to those other systems as well which is why the specific code wasn't pulled in, as it was too much bolted on and single use, but the fact that these features were written provides an example of what is possible and what is needed so they were re-implemented in ways that had broader consensus across the Linux kernel ecosystem.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/600474/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor600549"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 29, 2014 7:43 UTC (Thu)
                               by <b>smurf</b> (subscriber, #17840)
                              [<a href="/Articles/600549/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
That being said, IMHO the demand for shrinking the kernel back down to something that works well on single-digit MByte machines is a reasonable goal.<br>
<p>
It'll probably live in its own tree before getting into mainline, but then the linux-tiny patchset of earlier times did the same thing. So did/do the RT patches, for that matter.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/600549/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor600858"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 31, 2014 4:22 UTC (Sat)
                               by <b>garyamort</b> (guest, #93419)
                              [<a href="/Articles/600858/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
"any new features have to be workable across the entire gamut" - no they don't.  In the case of things like various schedulers and power control management - as long as the userspace API is identical they don't need to work across all systems.<br>
<p>
The i/o scheduler for example has many different patterns, some of which work better under different circumstances.<br>
<p>
Multiple processor schedulers could be included in the kernel as well - rather then requiring constantly updated patch sets for every new kernel.<br>
<p>
For an area I am familiar with, just browse through the ARM directories:<br>
<a rel="nofollow" href="https://github.com/torvalds/linux/tree/master/arch/arm">https://github.com/torvalds/linux/tree/master/arch/arm</a><br>
<p>
Lots of kernel bits there for custom chips which are only found in specific hardware devices.<br>
<p>
Also since there seems to be some confusion, I'm not saying a lot of kernel devs are hostile to mobile phones or whatnot - I'm saying that for the most part, their personally concerned with large, multiprocessor servers and high end hardware.  If a new feature doesn't have some affect on what their interested in, it is quite often dismissed.  Consider the comments quoted for this article.<br>
<p>
Changes which would provide real benefits today but "don't further" some future goal, which historically can take years to be implemented, and which don't benefit the personal use cases of the maintainer - rejected.<br>
<p>
Changes which provide performance benefits in real use cases by the submitter are rejected because the maintainer guesses that they won't apply to others -  while at the same time admitting that he wouldn't use Linux for any of those use cases so he is not in a good position to judge.<br>
<p>
<p>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/600858/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor600864"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Networking on tiny machines</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 31, 2014 7:56 UTC (Sat)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/600864/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The question of schedulers has been discussed many times. This is one of those things that Linus has very strong feelings on.<br>
<p>
He's seen other systems start to have vastly different schedulers for different purposes, and the end result is that there is a lot of confusion and each one is tailored for a specific use case, but that use case doesn't match what the users are actually needing to do (and/or users end up needing to do a little bit of multiple different types of work that each scheduler developer says "well, if you want to do that, don't use my scheduler")<br>
<p>
and I'll say that the current disk schedulers seem to have this problem, although there is a little bit of a difference in that sometimes the disk controller does some of the work for the kernel, so there is more of a case for the noop scheduler, but there isn't the equivalent for the task scheduler)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/600864/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2014, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
