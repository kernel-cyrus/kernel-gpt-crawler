        <!DOCTYPE html>
        <html lang="en">
        <head><title>A Nouveau graphics driver update [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/953144/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/953382/">Return to the Front page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/953144/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>A Nouveau graphics driver update</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Ready to give LWN a try?</b>
<p>
With a subscription to LWN, you can stay current with what is happening in the Linux and free-software community and take advantage of subscriber-only site features.  We are pleased to offer you <b><a href="https://lwn.net/Promo/nst-trial/claim">a free trial subscription</a></b>, no credit card required, so that you can see for yourself.  Please, join us!
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>December 1, 2023</br>
           <hr>
<a href="/Archives/ConferenceByYear/#2023-Linux_Plumbers_Conference">LPC</a>
</div>
Support for NVIDIA graphics processors has traditionally been a sore point
for Linux users; NVIDIA has not felt the need to cooperate with the kernel
community or make free drivers available, and the reverse-engineered
Nouveau driver has often struggled to keep up with product releases.  There
have, however, been signs of improvement in recent years.  At the <a
href="https://lpc.events/event/17/page/198-lpc-2023-overview">2023 Linux
Plumbers Conference</a>, graphics subsystem maintainer Dave Airlie provided
an update on the state of support for NVIDIA GPUs and what remains to be
done. 
<p>
The kernel community's relationship with NVIDIA "has gone up and down" over
the years, Airlie began.  Recently, though, the company has rearchitected
its products, adding a large RISC-V processor (the GPU system processor, or
GSP) and moving much of the functionality once handled by drivers into the
GSP firmware.  The company allows that firmware to be used by Linux and shipped
by distributors.  This arrangement brings a number of advantages; for
example, it is now possible for the kernel to do reclocking of NVIDIA GPUs,
running them at full speed just like the proprietary drivers can.
It is, he said, a big improvement over the Nouveau-only firmware that was
provided previously.
<p>

<a href="/Articles/953147/"><img
src="https://static.lwn.net/images/conf/2023/lpc/DaveAirlie-sm.png" alt="[Dave Airlie]"
title="Dave Airlie" class="rthumb"></a>

There are a number of disadvantages too, though.  The firmware provides no
stable ABI, and a lot of the calls it provides are not documented.  The
firmware files themselves are large, in the range of 20-30MB, and two of
them are required for any given device.  That significantly bloats a
system's <tt>/boot</tt> directory and initramfs image (which must provide
every version of the firmware that the kernel might need), and forces the
Nouveau developers to be strict and careful about picking up firmware
updates.
<p>
Nouveau work has taken a bit of a setback since longtime developer Ben
Skeggs left the project, but he did manage to do a lot of refactoring
before he went.  Nouveau now has initial GSP support for one firmware
version; that code was merged in for the 6.7-rc1 release.  It is only
enabled for the <a
href="https://www.nvidia.com/en-us/geforce/ada-lovelace-architecture/">Ada</a>
series of GPUs by default; with a command-line argument it can be made to
work with <a href="https://www.nvidia.com/en-us/geforce/turing/">Turing</a>
and <a
href="https://www.nvidia.com/en-us/data-center/ampere-architecture/">Ampere</a>
devices as well.  It is missing some features, including fault handling
(which "shouldn't be too hard" to add) and sensor monitoring, which doesn't
work at all.
<p>
NVIDIA's firmware, Airlie said, comes with a set of include files that, in
turn, define structures that change over time.  To deal with these changes,
the driver is going to need some sort of automated ABI generation; he noted
that the developers working on the Apple M1 GPU driver have run into the
same problem.  This problem could be made easier to tackle, he suggested,
if the driver were, like the M1 driver, to be rewritten in Rust.
<p>
<h4>Next steps</h4>
<p>
Supporting the GSP firmware is just the beginning, though; at this point,
Airlie took a step back and talked about the task of making a useful GPU
driver in general.  Years ago, a graphics card came with some video RAM
and a <a
href="https://en.wikipedia.org/wiki/Graphics_address_remapping_table">graphics
translation table (GTT)</a>.  The driver would map system memory into the
graphics card; user space could then submit buffer handles that would be
relocated for the graphics device.  This approach works, he said, but it is
slow.
<p>
Current GPUs have full virtual memory, instead, which saves a lot of that
overhead.  The kernel has grown a number of subsystems for working with
this virtual memory, including the <a
href="https://docs.kernel.org/gpu/drm-mm.html#the-graphics-execution-manager-gem">graphics
execution manager (GEM)</a> for buffer-object management, the <a
href="https://docs.kernel.org/gpu/drm-mm.html#the-translation-table-manager-ttm">translation
table manager (TTM)</a> for discrete video-RAM buffer-object management, 
and a bunch of synchronization and fencing code.  Initially, the DRM
subsystem would tie the allocation of a buffer to an allocation of virtual
memory at the same time; that was easy to do and sufficed to implement
OpenGL.  But, he said, the graphics world moved on from there.
<p>
Specifically, <a href="https://www.vulkan.org/">Vulkan</a> came along.  It
brought the concept of sparse memory and, with it, virtual memory that is
managed by user space.  Vulkan can handle both synchronous and asynchronous
virtual-area updates, but it "gets complicated".  Various drivers started
inventing their own virtual-area management; as a way of bringing that work
back together, the <a
href="https://www.kernel.org/doc/html/latest/gpu/drm-vm-bind-async.html">VM_BIND</a>
API was developed.
<p>
This is consistent with a recurring pattern, Airlie said.  The DRM
developers work to share common code between graphics drivers, but the
driver developers keep trying to reinvent wheels, a tendency that has to be
resisted.  The subsystem did well with regard to mode setting, he said, but
less well on the acceleration side; there is a "common GPU scheduler" that
is only used by one driver, for example.  Similarly, there are a lot of
drivers implementing VM_BIND by doing their own virtual-area management.
<p>
In response, Airlie came up with the "good idea" of getting somebody else
to write a common virtual-area manager, called GPUVM, inspired by the
amdgpu code.  It is intended to be useful for all drivers; it is used by
the Nouveau, Xe (Intel's new driver), and Panfrost drivers now.  Hopefully
the amdgpu and MSM drivers will pick it up as well.  The best part is that
there are multiple developers who understand it and can help to keep it
from going off in the wrong direction.  GPUVM has been through a lot of
iterations, he said, providing "lots of learning experiences".
<p>
As an example, he talked about the problem of fence signaling.  A fence
indicates when a series of GPU operations has been completed; waits for
these fences have to be time-bounded, or the memory-management subsystem
might deadlock.  In short, a GPU can easily pin down all of a system's RAM
if given the opportunity.  There is a shrinker that can be called when
memory gets tight, but it will have to wait for fences to be signaled to
know when memory can be freed.  If the code that set the fence decides to
allocate more memory while this is happening, a deadlock results.

To avoid this outcome, developers have to strictly limit the operations
that can be performed in fence-signaling critical sections; care must also
be taken before acquiring any locks.  It would be nice to be able to update
the page tables during this code, but that ran into deadlock problems and
had to be backed out.
<p>
Returning to Nouveau, Airlie said that the initial VM_BIND API, using
GPUVM, synchronous objects, and integration with the scheduler, was merged
for the 6.6 release.  There are a lot of improvements in the works that
should land in 6.8.  At this point, he said, we have the core of a modern
GPU driver for NVIDIA hardware — for graphics, at least.  More work will be
required before Nouveau can support compute applications.
<p>
On the user-space side, Faith Ekstrand has been developing the NVK Vulkan
driver for Nouveau; this driver recently <a
href="https://www.collabora.com/news-and-blog/news-and-events/nvk-reaches-vulkan-conformance.html">reached
Vulkan&nbsp;1.0 conformance</a>.  This work involved creating a new
compiler, called NAK, that has just been merged into Mesa; this compiler
yields far better performance (from 20 frames per second to over 1000) than
the old "codegen" compiler did.  Naturally, this compiler is written in
Rust.  The next step, Airlie concluded, is to move forward to
Vulkan&nbsp;1.3. 
<p>
<a
href="https://www.youtube.com/live/LipsVK5d_vM?si=MvJmtsFKbpa5JyqC&t=326m21s">Video</a>
and <a
href="https://lpc.events/event/17/contributions/1505/attachments/1315/2641/Nouveau%20GSP%20GPU%20VA%20management.pdf">slides</a>
from the talk are available.
<p>

[Thanks to the Linux Foundation, LWN's travel sponsor, for supporting our
travel to this event.]<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Device_drivers-Graphics">Device drivers/Graphics</a></td></tr>
            <tr><td><a href="/Archives/ConferenceIndex/">Conference</a></td><td><a href="/Archives/ConferenceIndex/#Linux_Plumbers_Conference-2023">Linux Plumbers Conference/2023</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/953144/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor953614"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A Nouveau graphics driver update</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 3, 2023 6:19 UTC (Sun)
                               by <b>logang</b> (subscriber, #127618)
                              [<a href="/Articles/953614/">Link</a>] (12 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
My perspective as a user or the Linux graphics stack has been poor. I have one machine stuck on an aging 5.4 kernel as the Intel integrated graphics doesn't work on anything newer. And another older machine that, after upgrading to bookworm, the Nouveau driver stopped working. I was forced to install the proprietary Nvidia driver just to get any work done, and now the graphics on that machine are far buggier and crash prone than it used to be. I've spent way too much time trying to solve both these problems. I miss the days when Linux would reliably work on nearly any hardware -- seems to only be getting worse now.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/953614/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor953621"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A Nouveau graphics driver update</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 3, 2023 11:16 UTC (Sun)
                               by <b>tux3</b> (subscriber, #101245)
                              [<a href="/Articles/953621/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I mostly remember days where getting any sound out of it was a hero's journey, wifi was complicated, and the GPU was for displaying a tty and/or wallpaper (when Xorg wasn't crashing)<br>
<p>
I'm not sure moving all the software into the GSP is a good sign of nvidia-upstream collaboration, but pragmatically maybe it's easier to manage than the current situation?<br>
<p>
Won't fix your old GPU, but if the new way is "keep a giant blob around", we could hope old hardware support will have less places to bitrot.<br>
Not that I would bet on it, mind you.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/953621/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor953626"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A Nouveau graphics driver update</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 3, 2023 15:50 UTC (Sun)
                               by <b>Gerardo</b> (subscriber, #37539)
                              [<a href="/Articles/953626/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Try setting i915.modeset=0 in the kernel cmdline.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/953626/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor953634"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A Nouveau graphics driver update</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 3, 2023 20:15 UTC (Sun)
                               by <b>roc</b> (subscriber, #30627)
                              [<a href="/Articles/953634/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; I miss the days when Linux would reliably work on nearly any hardware</span><br>
<p>
I'm a huge Linux fan, been running it on my laptops and desktops for &gt; 15 years, and those days never existed.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/953634/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor953635"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A Nouveau graphics driver update</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 3, 2023 20:42 UTC (Sun)
                               by <b>mb</b> (subscriber, #50428)
                              [<a href="/Articles/953635/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt;and those days never existed</span><br>
<p>
Yes, the hardware compatibility as of today is better than it has ever been.<br>
<p>
20 years ago one has to check "Linux compatibility" before buying hardware.<br>
Today virtually all new hardware just works.<br>
And old hardware keeps working most of the time.<br>
<p>
Today it is possible to buy a random Laptop and everything just works.<br>
That was not the case 20 years ago.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/953635/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor953636"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A Nouveau graphics driver update</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 3, 2023 20:51 UTC (Sun)
                               by <b>himi</b> (subscriber, #340)
                              [<a href="/Articles/953636/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Certainly never for graphics or sound, and a fairly wide range of other "consumer" devices.<br>
<p>
Most of the sound issues have gone away since the sound card market kind of went away (outside the "pro" market) - everything's integrated these days, which means there's a much smaller set of things that need some level of support, and they generally come from larger vendors. So sound mostly "just works" now.<br>
<p>
Graphics is a /long/ way from getting to that point, though it's not /that/ hard to pick hardware that will likely work out of the box. There are really only three vendors to worry about, and two of them work pretty well with Linux - if you get a laptop with integrated Intel or AMD graphics you're probably not going to have many issues (though that's far from guaranteed). But the graphics market includes crazy shit like Prime, which is a nightmare to deal with sensibly - I've got a laptop with an NVidia card that's got perfectly solid (if proprietary) driver support, and an integrated Intel chip that's really well supported, but the combination falls over regularly.<br>
<p>
Obviously the server side is different, but in that market Linux is the 800 pound gorilla. Consumer markets, not so much . . . <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/953636/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor953637"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A Nouveau graphics driver update</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 3, 2023 22:28 UTC (Sun)
                               by <b>ballombe</b> (subscriber, #9523)
                              [<a href="/Articles/953637/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
On the other hand, no operating system in history support as much hardware as linux.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/953637/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor953642"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A Nouveau graphics driver update</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 4, 2023 0:07 UTC (Mon)
                               by <b>willy</b> (subscriber, #9762)
                              [<a href="/Articles/953642/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I don't really care how many ISA cards work on a MIPS platform if my new ethernet card doesn't work. This is a red herring.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/953642/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor953651"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A Nouveau graphics driver update</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 4, 2023 5:03 UTC (Mon)
                               by <b>wtogami</b> (subscriber, #32325)
                              [<a href="/Articles/953651/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Nothing else comes close to Linux in terms of dropping your disk into another x86_64 machine and it probably working. Windows is a f*ing mess with mutual conflicting drivers that often breaks this.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/953651/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor953938"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A Nouveau graphics driver update</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 7, 2023 11:01 UTC (Thu)
                               by <b>ceplm</b> (subscriber, #41334)
                              [<a href="/Articles/953938/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
???<br>
<p>
When was the last time that particularly Ethernet card didn’t work for you? Their manufacturers are now absolutely crazy about supporting Linux, because with the dominant position Linux has in the server world Ethernet card which doesn’t work with it is dead.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/953938/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor953939"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A Nouveau graphics driver update</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 7, 2023 11:42 UTC (Thu)
                               by <b>james</b> (subscriber, #1325)
                              [<a href="/Articles/953939/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Depends if we're still counting "wireless Ethernet". Realtek RTL8821/8822 chips provide 802.11ce / Wi-Fi 5 and Bluetooth on a single chip: <a href="https://lwn.net/Articles/834082/">the configuration I had</a> didn't work with an in-tree driver until kernel 5.12 in 2021.<p>
The Windows drivers on the Realtek website date from 2017.<p>
Incidentally, the last three cheap-ish Core 5/Ryzen 5 laptops I've specced (HP, Dell, Asus) have all had the chip — I presume it's cheap.<p>
Thank goodness for USB dongles.






      
          <div class="CommentReplyButton">
            <form action="/Articles/953939/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor954063"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A Nouveau graphics driver update</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 8, 2023 0:37 UTC (Fri)
                               by <b>jschrod</b> (subscriber, #1646)
                              [<a href="/Articles/954063/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Last year, I set up a rather old small Lenovo box (that we never used) as a disaster backup for one of my firewalls. I bought a 2nd Intel network card and then discovered that the box came with a RealTek network controller. (I would have to boot the system to check what the actual Realtek network controller is -- but it's 01:36am now and I won't do this if it's not necessary.)<br>
<p>
Under Debian 11, I needed the proprietary module r8168-dkms to enable it. Robust support was not provided by the in-kernel driver r8169.<br>
<p>
Debian unstable still lists this proprietary kernel module package in sid -- and I would have thought they would got rid of it if all network devices are supported in-kernel by now.<br>
<p>
Are all RealTek network devices that are listed in <a href="https://packages.debian.org/de/sid/r8168-dkms">https://packages.debian.org/de/sid/r8168-dkms</a> are fully supported now by r8169? That would be good news.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/954063/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor953640"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A Nouveau graphics driver update</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 4, 2023 0:12 UTC (Mon)
                               by <b>gerdesj</b> (subscriber, #5446)
                              [<a href="/Articles/953640/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
"My perspective as a user or [of] the Linux graphics stack has been poor. I have one machine stuck on an aging 5.4 kernel as the Intel integrated graphics doesn't work on anything newer. And another older machine that, after upgrading to bookworm, the Nouveau driver stopped working."<br>
<p>
I remember XFree86 mode line challenges that could end in real tears and not just fuzzy lines on a CRT.  Those are tears of sadness at a destroyed monitor, not unpleasant graphic artifacts.  I recall using a Windows wifi driver via some magnificent hack on one laptop.<br>
<p>
For me, around 2005ish, graphic support on Linux generally became reliably stable, with some spectacular buggerations!  Certainly no worse than Windows.  Even today, we (I own a small IT company) have Windows laptops being ... retired after everyone has given up getting something to work properly, be it graphics, wifi or whatever.<br>
<p>
My last few laptops have been customer cast offs and my current one an employee cast off.  They might be shite for Windows but still fine for this old nerd running Arch (actually).  I'm currently rocking a (smbios-sys-info) ... "HP 255 G6 Notebook PC" - good enough for me, barely runs Win 10 and won't ever see Win 11!  It does grind a little when I fire up some CAD apps.  I can still run this: <a href="http://webglsamples.org/aquarium/aquarium.html">http://webglsamples.org/aquarium/aquarium.html</a> with 30,000 fish and the fan barely twitches.  I use KDE as my WM which is hardly tiny.   I also run ESET AV to show solidarity and tick various boxes.<br>
<p>
My general experience of Linux is that it really does generally work on nearly anything I throw it at but might need some tweaks, which is the same of any other OS I have ever encountered.  I generally "upgrade" to the next laptop by moving my M.2 SSD and getting on with work and life. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/953640/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor953625"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A Nouveau graphics driver update</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 3, 2023 15:24 UTC (Sun)
                               by <b>wsy</b> (subscriber, #121706)
                              [<a href="/Articles/953625/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Just tried NVK on latest kernel + mesa. The result is beyond my expectation. A lot of vulkan demos[1] just work. <br>
<p>
You guys are heroes.<br>
<p>
[1] <a href="https://github.com/SaschaWillems/Vulkan">https://github.com/SaschaWillems/Vulkan</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/953625/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor953638"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A Nouveau graphics driver update</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 3, 2023 21:18 UTC (Sun)
                               by <b>PastyAndroid</b> (subscriber, #168019)
                              [<a href="/Articles/953638/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I'm glad to see there is more progress on Nouveau! I've been watching it since it came out hoping for improvements.<br>
<p>
It's a shame that more often than not when discussing Linux with potential new users I have to ask that question "Do you have an AMD or Nvidia GPU?" followed by "Well, if it's Nvidia you might have to do this that and this to make it work.".<br>
<p>
It's not ideal, and it is unreasonable to suggest to someone to replace their hardware for best results. On most distributions it is relatively easy to setup the proprietary drivers. However, it is still an entry barrier, however small, for a new user.<br>
<p>
I do find it amusing how the situation has been flipped, where previously the advice would have been to avoid ATI/AMD and get Nvidia instead for 3D on Linux.<br>
<p>
I'm hoping that someday both AMD and Nvidia can work out the box in the same way on any given distribution. But in the mean time, I will continue using my AMD GPU.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/953638/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor953643"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A Nouveau graphics driver update</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 4, 2023 0:23 UTC (Mon)
                               by <b>khim</b> (subscriber, #9252)
                              [<a href="/Articles/953643/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <font class="QuotedText">&gt; It's not ideal, and it is unreasonable to suggest to someone to replace their hardware for best results.</font>

<p>It's very reasonable and I often say it's the right thing to do. If you buy some crazy device with integrated Intel PowerVR based GPU then you couldn't use with <b>any</b> operation system today: it's too underpowered to run Windows 10 and Linux drivers don't exist (except for some old version of Android and then these are binary-only).</p>

<p>Okay, many nVidia-based laptops are not that old, but still… you wouldn't expect great usability from some poor device with HDD and soldered-on 4GB of RAM in Windows 11, why should Linux support anything and everything?</p>

<p>Linux suffers from it's inability to provide SDK which would make it possible to develop software for it, but expecting full-blown support for any random hardware is unreasonable: <b>none</b> of OSes that exist achieve that feat.</p>



      
          <div class="CommentReplyButton">
            <form action="/Articles/953643/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor953743"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A Nouveau graphics driver update</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 4, 2023 18:58 UTC (Mon)
                               by <b>PastyAndroid</b> (subscriber, #168019)
                              [<a href="/Articles/953743/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
That is true in the case of obscure hardware. But for mainstream hardware, it is unreasonable to suggest hardware replacement simply because of a driver.<br>
<p>
For example, if someone has a NVIDIA GeForce RTX 3060, a very popular Nvidia card that is not obscure, it would be unreasonable to tell this person they must switch to AMD to use Wayland for example. (Wayland on Nvidia is still a mess.)<br>
<p>
Bearing in mind, aside from having to provide instructions on how to install the proprietary drivers (which can vary depending on the distribution), even if they have the drivers installed the experience with Wayland may be less than optimal due to poor driver functionality.<br>
<p>
To be clear though, I am not blaming the open source developers here. I am blaming Nvidia. Nvidia can, and should, go the same route as AMD whereby users can buy any AMD graphics card and simply plug and play on Linux, without further instructions being necessary.<br>
<p>
I should also make it clear; I am talking about potential new users, who have no prior Linux experience. I hope that it will become as easy and as simple for them as possible.<br>
<p>
Everyone deserves the freedom of FOSS, even if they are not technically minded.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/953743/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor953641"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A Nouveau graphics driver update</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 3, 2023 23:57 UTC (Sun)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/953641/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I assume that the firmware is encrypted, so it can't be compressed? Perhaps NVidia can switch to signing instead, so that binary diffs can meaningfully decrease the size?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/953641/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2023, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
