        <!DOCTYPE html>
        <html lang="en">
        <head><title>KS2010: Big out-of-tree projects [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/412748/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/412748/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>KS2010: Big out-of-tree projects</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>LWN.net needs you!</b>
<p>
Without subscribers, LWN would simply not exist.  Please consider
       <a href="/Promo/nst-nag2/subscribe">signing up for a subscription</a> and helping
       to keep LWN publishing.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>November 2, 2010</br>
           <hr>
<a href="/Articles/KernelSummit2010/">2010 Kernel Summit</a>
</div>
For almost as long as the kernel has existed, there have been large kernel
projects which live outside of the mainline.  At the 2010 Kernel Summit,
Roland Dreier and Chris Mason led a session to discuss these projects and
what, if anything, should be done about them.
<p>
Roland started off by talking about the OpenFabrics Enterprise Distribution
(OFED), which is <a href="http://www.openfabrics.org/">described</a> as:
<p>
<div class="BigQuote">
	...a downloadable, networking open-source software package that
	implements Remote Direct Memory Access (RDMA) and kernel bypass
	mechanisms to deliver high-efficiency computing, wire-speed
	messaging, ultra-low microsecond latencies and fast I/O for
	servers, block storage and file systems.
</div>
<p>
In reality, it's a large chunk of out-of-tree code distributed by the
OpenFabrics alliance.  There are a number of enhancements to the InfiniBand
infrastructure, backports to older kernels, and so on.  Hardware companies
have been telling their customers to use the OFED stack instead of
mainline; the enterprise distributions have been shipping it.
<p>
So why does OFED exist?  Roland says it's partly his fault; he has not been
merging stuff into the mainline quickly enough.  He has had trouble getting
people to help review all of that code.  But, he says, there is also an
incentive for OFED: it gives the OpenFabrics Alliance an ongoing reason to
exist.  Perhaps OFED should go into the staging tree?  The OFED tree consists
mainly of patches to code which is already in the mainline; it's not a set
of standalone drivers which can sensibly be put into the staging tree.
<p>
It was suggested (nobody was able to confirm it) that Red Hat will not be
shipping updated OFED stacks in 
the future.  Chris said that the distributors need to push back more
against this kind of out-of-tree code.  Oracle, he noted, is doing that.
<p>
Ted Ts'o asked about the scope of the problem - what other large,
out-of-tree projects exist?  The list started with Xen's Dom0 code.  Jeremy
Fitzhardinge took a moment to update the crowd on the status of Dom0; most
of the trickiest bits have been merged for 2.6.37, so it's actually
possible to boot a Dom0 kernel.  There are no backend drivers, though, so
that kernel will have no devices available; Jeremy allowed that this
limitation reduces the usefulness of that kernel somewhat.  Some of those
drivers will be merged in forthcoming development cycles; others are so
ugly that they may never get in.
<p>
Other significant out-of-tree projects include the Lustre filesystem, the
realtime preemption tree, OpenVZ, the LTTng trace kit, the grsecurity
patches, and the always
controversial SCSI target code.  In general, it was agreed, we are doing
much better than before.  
<p>
The process needs to continue, though.  According to Chris, Oracle has
found every vendor driver it has ever encountered to be horribly broken and
unsupportable.  So Oracle has taken a strong position that only upstream
drivers can be supported.  Ted said that, for enterprise systems, the
problem has mostly been solved; the same is, alas, not true in the embedded
area.  So we will have to go through the same education process with
embedded vendors.
<p>
It may be the same problem, but out-of-tree code may be harder to eradicate
in the embedded world.  Vendors of embedded systems are incredibly
price-sensitive; upstream drivers fall by the wayside when compared to a
savings of a few cents on a component.  What's needed is to make "upstream
drivers" a stronger part of the procurement process; it must be a technical
requirement for any candidate components.  Tim Bird said that this problem
had been discussed at a recently concluded embedded Linux summit; the
result is a new effort to encourage a "preference" for open-source
drivers.  Many vendors apparently claim that they have never even heard
that free drivers are preferable; the first step is to cure them of that
impression.
<p>
The session concluded with a statement that, while out-of-tree projects
still exist, things have improved and are continuing to do so.
<p>
<a href="/Articles/412749/">Next: Checkpoint/restart</a>.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Development_model">Development model</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/412748/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor412766"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">KS2010: Big out-of-tree projects</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 2, 2010 8:06 UTC (Tue)
                               by <b>Lumag</b> (subscriber, #22579)
                              [<a href="/Articles/412766/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Hmm. What about Google/Android kernel. It's also a "big" oot project, isn't it?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/412766/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor413038"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">KS2010: Big out-of-tree projects</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 3, 2010 14:24 UTC (Wed)
                               by <b>neilbrown</b> (subscriber, #359)
                              [<a href="/Articles/413038/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<p>
Google/Android is not really one big oot project - it lots of distinct bits - drivers for various hardware, the suspend-blocker thing, and some IPC subsystem.  So maybe it is lots of little projects that can be merged one by one, and to some extent are.  I haven't heard any suggestion of the IPC thing being merged in any form though - I wonder if anyone else has heard anything.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/413038/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor412810"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">KS2010: Big out-of-tree projects</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 2, 2010 14:19 UTC (Tue)
                               by <b>ccurtis</b> (guest, #49713)
                              [<a href="/Articles/412810/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      To echo Tim's sentiments, a place I worked would actually _prefer_ vendor code to open code.  We had one vendor supply a library that we had to use to access their hardware (the kernel driver was just a shim).  This library was a non-stop source of bugs and instability in the product.  Eventually the company decided we needed a new revision of the device and went to a different outside vendor to design one.  They came back with something designed around a Broadcom chip.  I immediately began asking about source code; the response was "we will own everything - the design, the software - everything".  Only after asking for a third time about the Broadcom driver specifically, the response was, "Oh, well, nobody has access to THAT".  The design went ahead as planned...
      
          <div class="CommentReplyButton">
            <form action="/Articles/412810/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor412812"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">KS2010: Big out-of-tree projects</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 2, 2010 14:23 UTC (Tue)
                               by <b>ccurtis</b> (guest, #49713)
                              [<a href="/Articles/412812/">Link</a>] 
      </p>
      
      </div>
      </summary>
      I should clarify that last comment ... the project went ahead as planned, but the design was changed considerably.  The more questions I asked about the software, the more problems I found.  Eventually it was admitted that no consideration was made for software design at all in this project.  Fortunately, I'm not there now to see how the product turned out.
      
          <div class="CommentReplyButton">
            <form action="/Articles/412812/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor413029"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">KS2010: Big out-of-tree projects</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 3, 2010 12:54 UTC (Wed)
                               by <b>NAR</b> (subscriber, #1313)
                              [<a href="/Articles/413029/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It's interesting to compare this quote "Chris said that the distributors need to push back more against this kind of out-of-tree code" with a quote from an earlier page: "In general, it can be better if new interfaces stay out of the kernel for a while." It might compare apples with oranges (ABIs vs out-of-tree projects), but still interesting.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/413029/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor416435"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">OpenVZ</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 20, 2010 21:00 UTC (Sat)
                               by <b>Lennie</b> (subscriber, #49641)
                              [<a href="/Articles/416435/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
When you say OpenVZ is a big out-of-tree project.<br>
<p>
One of the reasons has always been that it was unclear how to get the changes of projects like Linux-VServer and OpenVZ into the kernel and they are actively working on getting those changes into the kernel in the form of Linux Containers. And many things already are in the kernel. So it isn't so much out-of-tree anymore.<br>
<p>
I keep wondering what lxc is still missing that not more people are moving to lxc instead of OpenVZ and Linux-VServer.<br>
<p>
Is it just some kind of migration-tooling ? Or some host-migration-tooling, I think OpenVZ has the ability to stop a container and move it over to an other machine, but the mainline kernel does not yet have that.<br>
<p>
Or is it just that not all userspace tooling has been created/needs more documentation ?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/416435/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2010, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
