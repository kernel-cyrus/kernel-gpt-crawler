        <!DOCTYPE html>
        <html lang="en">
        <head><title>Finding a patch's kernel version with git [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/392293/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/391868/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/392293/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>Finding a patch's kernel version with git</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Ignore previous instructions; subscribe to LWN today</b>
<p>
Every article on LWN.net is written by humans, for humans. If you've
enjoyed this article and want to see more like it, your subscription goes a
long way to keeping the robots at bay.  We are offering <a href="https://lwn.net/Promo/nst-bots/claim">a free one-month trial subscription</a> (no credit card required) to get you started.
</blockquote>
<div class="FeatureByline">
           By <b>Jake Edge</b><br>June 16, 2010</br>
           </div>
<p>
Back in May, Jan Kara posted a VFS <a href="/Articles/392303/">patch</a>
that fixed a regression and he sent the patch to the stable tree folks as
well.  Linus Torvalds <a href="/Articles/392304/">noted</a> that it had
been introduced in the merge window, so it wasn't relevant for the stable
tree.  That led to a discussion about how to figure out which kernel
version includes a particular patch.  While the conversation is a month old,
the advice is pretty much timeless.
<p>
Andrew Morton's <a href="/Articles/392305/">method</a> is rather
sub-optimal: "<q>I just keep lots of kernel trees around and poke about with `patch
--dry-run'.  PITA.</q>"  Christoph Hellwig and James Bottomley both
suggested <tt>git-describe &lt;revid&gt;</tt>, which will show the tag of the version a
patch was applied to, or was pulled into if you use the <tt>--contains</tt>
flag.  As one might guess, though, Torvalds had some more <a href="/Articles/392306/">elaborate
suggestions</a>.  One can use <tt>git name-rev</tt> in much the same way as
<tt>git-describe --contains</tt>, but a more "<q>obscure</q>" way to
get the same kind of information is:
<pre>
    git log --tags --source --author=viro --oneline fs/namei.c
</pre>
which shows commits by Al Viro of <tt>fs/namei.c</tt> along with the tagged
version 
each commit was included into.  On a recent kernel tree, the start of that
output looks like:
<pre>
    d83c49f v2.6.34 Fix the regression created by "set S_DEAD on unlink()..." commit
    3e297b6 v2.6.34-rc3 Restore LOOKUP_DIRECTORY hint handling in final lookup on op
    781b167 v2.6.34-rc2 Fix a dumb typo - use of &amp; instead of &amp;&amp;
    1f36f77 v2.6.34-rc2 Switch !O_CREAT case to use of do_last()
</pre>
<p>
While the specific example Torvalds gave might not be widely applicable,
the basic 
idea behind it is.  Using <tt>git-blame</tt> to track down the commit where
a particular change was made is often useful, but the dates in the log can
be misleading with regards to which kernel(s) the change ended up in.
Using some combination of <tt>describe</tt> and <tt>log</tt> will make
figuring those kinds of things out much easier.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Development_tools-Git">Development tools/Git</a></td></tr>
            <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Git">Git</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/392293/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor392469"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Finding a patch's kernel version with git</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jun 17, 2010 15:39 UTC (Thu)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/392469/">Link</a>] (25 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Here is at last a feature centralized systems make much easier (except subversion which has still not understood what a tag is)<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/392469/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor392487"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Finding a patch's kernel version with git</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jun 17, 2010 16:44 UTC (Thu)
                               by <b>dgm</b> (subscriber, #49227)
                              [<a href="/Articles/392487/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Could you provide an example? I could no think of an easy way to do this in anything I know of.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/392487/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor392497"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Finding a patch's kernel version with git</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jun 17, 2010 18:01 UTC (Thu)
                               by <b>iabervon</b> (subscriber, #722)
                              [<a href="/Articles/392497/">Link</a>] (23 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
To the extent that, with a centralized system, developers can't do any development that would make the naive method wrong, that's true.<br>
<p>
In this particular case, however, I suspect that, if they'd been using a centralized system, it still would have looked like a fix was needed for earlier versions, but that impression would have been correct. A decentralized system makes it feasible to use a process which prevents bugs from affecting releases that one would expect them to affect. Even aside from getting the analysis right, it's hard to say that, when it looks like a bug affects several releases, you'd rather it actually affect all of them than turn out to have been excluded from them.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/392497/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor392630"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Finding a patch's kernel version with git</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jun 18, 2010 9:53 UTC (Fri)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/392630/">Link</a>] (22 responses)
      </p>
      
      </div>
      </summary>
      In a centralized system you can easily *order* commits in time and then use this order as a much user-friendlier commit ID than a checksum (this is exactly what subversion does).
<blockquote>
> Could you provide an example?
</blockquote>
<pre>
Revision  Event
238       release_4 tag
345       bugfix commit
525       release_5 tag
</pre>
<p>
From the above it is obvious that release 5 is fixed while release 4 is not.

<blockquote> > To the extent that, with a centralized system, developers can't do any development that would make the naive method wrong, that's true.</blockquote>

I guess this is more or less what I meant: by making branching and merging expensive, you prevent yourself from going into a complicated situation where you cannot easily track commits any more.

<blockquote>
>  A decentralized system makes it feasible to use a process which prevents bugs from affecting releases that one would expect them to affect. Even aside from getting the analysis right, it's hard to say that, when it looks like a bug affects several releases, you'd rather it actually affect all of them than turn out to have been excluded from them.
</blockquote>
Now you lost me.

      
          <div class="CommentReplyButton">
            <form action="/Articles/392630/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor392638"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Finding a patch's kernel version with git</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jun 18, 2010 11:11 UTC (Fri)
                               by <b>farnz</b> (subscriber, #17727)
                              [<a href="/Articles/392638/">Link</a>] (16 responses)
      </p>
      
      </div>
      </summary>
      <p>Except that your "obvious" is wrong.
<p>Release 4 clearly can't contain commit 345, which occurred after release 4; but, thanks to branching, release 5 may also not contain commit 345. Consider the following timeline:
<pre>
Revision|Branch               |Event
--------+---------------------+--------
238     |TRUNK                |release_4 tag
239     |TRUNK                |Create release_4_maintenance branch
345     |release_4_maintenance|bugfix commit
525     |TRUNK                |release_5 tag
</pre>
<p>It should be obvious that release 5 is not fixed, while some maintenance release of release 4 (say 4.1) is fixed. The apparent order in the commit ID has confused things, as while commit 345 happened before release 5 was tagged, it happened in a branch. I'm assuming here that thanks to human error, the developer forgot to ensure that the fix was present on TRUNK as well as the release_4_maintenance branch - this could happen if he's fixing it in a hurry because R4.1 is due out and this bug is important to a customer.
      
          <div class="CommentReplyButton">
            <form action="/Articles/392638/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor392655"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Finding a patch's kernel version with git</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jun 18, 2010 13:26 UTC (Fri)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/392655/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
You did not read the rest of my post.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/392655/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor392656"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Finding a patch's kernel version with git</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jun 18, 2010 13:34 UTC (Fri)
                               by <b>farnz</b> (subscriber, #17727)
                              [<a href="/Articles/392656/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <p>No, I read it, but I thought you were completely and utterly out of touch with reality. <b>Everyone</b> I know who uses source control has multiple branches; if nothing else, you branch when you tag so that you have somewhere to work on maintenance fixes separately from your feature improvements. All that the difficulty in merging that SVN and CVS impose (but other centralised systems don't - this isn't a natural advantage of DVCSes) does is ensure that I'm more likely to make the sort of human error that I mention in my post.
<p>Clearly, you did not bother to read my post; you just saw a counterexample to your point, and decided to play hurt.
      
          <div class="CommentReplyButton">
            <form action="/Articles/392656/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor392809"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Finding a patch's kernel version with git</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jun 20, 2010 7:23 UTC (Sun)
                               by <b>chad.netzer</b> (subscriber, #4257)
                              [<a href="/Articles/392809/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
And perhaps you didn't read the LKML thread linked to in the article, which says the buggy patches were created in December (thus "ordered in time" like your SVN revisions).  However, they were not actually merged into the stable branch at all, only into the development branch much later.  An analogous situation with SVN could just as easily occur, as it was a really a matter of making an incorrect assumption based on the "ordering in time" of the commit.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/392809/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor392857"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Finding a patch's kernel version with git</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jun 20, 2010 21:00 UTC (Sun)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/392857/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; An analogous situation with SVN could just as easily occur,</font><br>
<p>
Please demonstrate it in more detail, thanks. Warning: you're not allowed completely artificial commands or workflows that a regular SVN user would never use in pratice.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/392857/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor392876"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Finding a patch's kernel version with git</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jun 21, 2010 8:11 UTC (Mon)
                               by <b>chad.netzer</b> (subscriber, #4257)
                              [<a href="/Articles/392876/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I'm intrigued by your warning; I'm not sure I want to take on the responsibility of not disappointing you.<br>
<p>
Any system of development with feature branches, release branches, and a trunk can allow this situation to occur, since not all features need be merged into trunk before a release.  farnz's example was adequate; rev numbers themselves aren't an indicator of when and where a bug might have been merged into trunk.  That's why nearly all modern systems have history visualization.<br>
<p>
You were discussing "centralized systems", and made the claim "by making branching and merging expensive, you prevent yourself from going into a complicated situation where you cannot easily track commits any more."  However, I was discussing SVN, and one of the features of SVN is that branches are cheap:<br>
<p>
<a href="http://en.wikipedia.org/wiki/Apache_Subversion#Features">http://en.wikipedia.org/wiki/Apache_Subversion#Features</a><br>
<p>
So, does your claim apply to SVN?  If so, perhaps you can suggest a change to the example SVN workflow on Wikipedia, demonstrating "many branches", so that it can be improved.<br>
<p>
<a href="http://en.wikipedia.org/wiki/Apache_Subversion#Branching_and_tagging">http://en.wikipedia.org/wiki/Apache_Subversion#Branching_...</a><br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/392876/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor392933"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Finding a patch's kernel version with git</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jun 21, 2010 16:18 UTC (Mon)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/392933/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; one of the features of SVN is that branches are cheap</font><br>
<p>
This is about the implementation while I am talking about the workflow.<br>
<p>
Please have a look at one of Linus' rants about centralized systems where he typically complains about the inconvenience of branching *and merging* in such systems.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/392933/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor392956"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Finding a patch's kernel version with git</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jun 21, 2010 18:40 UTC (Mon)
                               by <b>chad.netzer</b> (subscriber, #4257)
                              [<a href="/Articles/392956/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It's not clear *what* you are talking about.  You stated "here is at last a feature centralized systems make much easier", but I don't see that supported, unless you are implying that centralized systems force an inherently linear history or short lived branches.  It certainly is not the case that "because you can easily order commits in time and use that order as a commit ID", that you can know without inspection that a bug fix commit is included in a release or not.  That requires checking the merge history.  Certainly that's not unique to distributed systems.<br>
<p>
If you mean that the common workflow in centralized systems does not allow long lived branches, and certainly not across releases, well I suppose I can accept that, but it is more a matter of discipline than central vs. distributed.  Basically it means keeping non-mergeable feature branches out of the repository, or always rebasing them after a new release, so that branch rev ids are contained strictly between two releases.  Neither option seems pleasant.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/392956/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor392856"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Finding a patch's kernel version with git</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jun 20, 2010 20:56 UTC (Sun)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/392856/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Consider the following timeline: [...] The apparent order in the commit ID has confused things,...</font><br>
<p>
In a centralized system no one ever considers such a timeline which mixes different branches. Why would you shoot yourself in the foot like this? It would not make any sense.<br>
<p>
The unfortunate side-effect of a decentralized system is that you cannot avoid considering such timelines, because of the incredible ease of branching and merging that you have there.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/392856/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor392859"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Finding a patch's kernel version with git</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jun 20, 2010 21:35 UTC (Sun)
                               by <b>farnz</b> (subscriber, #17727)
                              [<a href="/Articles/392859/">Link</a>] (7 responses)
      </p>
      
      </div>
      </summary>
      <p>Consider the following arrangement (which isn't uncommon); development takes place on the main branch (trunk in SVN terminology). When a release is made, the release manager tags it with a tag like "release-4-0-0", and they also create a "maint-4-0" branch for bugfixes only. Development of new features continues apace on trunk, leading towards a 4.1 release (tag "release-4-1-0", branch "maint-4-1").
<p>During a deployment of 4.0.0, a bug report comes in; as the sustaining engineer responsible for 4.0, I have a copy of the maint-4-0 branch checked out, as well as a copy of trunk. It's late on a Friday, but as the bug reporter is important, I diagnose the bug, discovering that it's an obscure interaction between something very specific in their configuration and our software. Because it's an obscure interaction, it's unlikely to be seen by anyone else, and automated testing won't catch it. However, it's a simple bug to fix, so I code the fix, check it in, and send the reporter a hotfix to test.
<p>I duly note in the bug tracker that I've checked in a fix, SVN revision 155234. Process tells me that I need to forward port the fix to trunk as well as check it in to maintenance, but I'm now very tired, and don't trust myself to forward port it properly, so I leave it, fully intending to come back and do the rest of the job later.
<p>Life intervenes, and I forget. The only formal record of the problem says it was fixed in revision 155234; my colleages note that trunk is now at 156974, and assume that the fix is in trunk. Because we got ahead of plan on feature development, 4.1.0 is ready before we've accumulated enough minor bugs to make a 4.0.1 release worthwhile; we can tell from the revision number that my fix is after 4.0 was released, but before 4.1 was ready. The resulting assumption upsets the original bug reporter, because they saw a 4.0 release that failed, a quick fix that I said was checked in, and a 4.1 release that fails again in the same way.
<p>And before you claim this is unrealistic, that no-one uses SVN like this, please be aware that I've not worked anywhere in the last 10 years that uses centralised VCS (not just SVN, but commercial VCS as well), and <b>doesn't</b> use it like this. Most large projects have a need for branches - if nothing else, one for development, one for maintenance, so that users can pick up just bug fixes to the latest release without picking up half-baked new features too.
      
          <div class="CommentReplyButton">
            <form action="/Articles/392859/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor392879"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Finding a patch's kernel version with git</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jun 21, 2010 8:24 UTC (Mon)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/392879/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; I duly note in the bug tracker that I've checked in a fix, SVN revision 155234.</font><br>
<font class="QuotedText">&gt; [...]</font><br>
<font class="QuotedText">&gt; The only formal record of the problem says it was fixed in revision 155234; my colleages note that trunk is now at 156974, and assume that the fix is in trunk.</font><br>
<p>
This is the unrealistic part. The above assumes that you *and* your colleagues have never heard about branching in their entire life.<br>
<p>
Everyone using SVN knows well that a revision number is meaningless without a branch. In the real (and centralized) world, you duly note in the bug tracker in which revision *and branch* you committed the fix. Even if you are clueless and forget the branch information, then your less incompetent colleagues will notice your mistake and find this information instantly in just one simple "svn log -r 155234" command: much easier than in decentralized, branching-fest system.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/392879/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor392883"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Finding a patch's kernel version with git</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jun 21, 2010 8:52 UTC (Mon)
                               by <b>farnz</b> (subscriber, #17727)
                              [<a href="/Articles/392883/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <p>Actually, this is based on real events - it <b>does</b> happen like this in the real world, because I've been there to experience it. My colleague noted the revision number in bugtracker, expecting it to be obvious and implicit that he was working on the maint branch, because he was the sustaining engineer for that version (as well as working on features for the new version). He forgot (human error, it happens) to forward port it, or to flag that he hadn't done so.
<p>When the release manager looked to see if all bugs were fixed, they assumed (because this is true for most bugs in our bugtracker, and because we'd decided relatively early in the process to skip 4.0.1, so very little work had been done on maint - it was just bad luck that this was one of the first "in-the-field" bugs for that release) that the fixed-in revision  was for trunk, and thus assumed that it was fixed in trunk but not maint.
<p>Had we done a 4.0.1 release, this would have been caught, as the release manager would have noticed then that he had a bug fixed in maint but not on trunk, or in trunk but not maint (either way round, not acceptable). Had we not decided relatively early to skip 4.0.1, it would have been obvious that we had bugs from 4.0.0 which only had one fixed in revision, so that we couldn't have fixed them on both trunk and maint. However, most bugs from 4.0.0 were just fixed on trunk, because we knew we weren't going to do a 4.0.1.
<p>Had the revision number not been so "obviously" ordered, we'd have not made the mistake either; CVS style revision numbers would have protected us, because it would have been clear that the fix was on a branch only, and DVCS-style commit hashes would have protected us, because we'd have to ask the tools to tell us which branches contained the fix. Indeed, had we not had "obviously" ordered revision numbers, the release manager would have used the tools we'd built on top of SVN to confirm that bug fixes were in trunk as well as maint - it was the combination of very few fixes actually made to maint, and the hassle of running the tool when it was "obvious" from revision numbers that the fix was in the release we were about to make that resulted in this bit of human error.
<p>Of course, this takes us a <b>long</b> way from your claim that this is an advantage of CVCS - you had said that all I had to do was look at revision numbers; I've given you a counterexample from experience where the ordering of revision numbers resulted in human confusion, and you're saying that it couldn't have happened like that, because people don't make that sort of mistake.
      
          <div class="CommentReplyButton">
            <form action="/Articles/392883/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor392889"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Finding a patch's kernel version with git</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jun 21, 2010 11:46 UTC (Mon)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/392889/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Of course, this takes us a long way from your claim that this is an advantage of CVCS - you had said that all I had to do was look at revision numbers;</font><br>
<p>
Yes, all you have to do is to look at revision numbers *in the same branch* (otherwise the order is obviously meaningless). SVN makes this very easy whereas git does not (because branches are so much more flexible in git). That's all really.<br>
<p>
The rest is just about the day you overlooked SVN branches, not very relevant to this discussion.<br>
<p>
As long as you use "branchless" SVN revision numbers + make wild guesses about these numbers then you will hit the same problem again and again. Simply stop making guesses; how difficult is that? By the way your painfully long explanation above demonstrates that this type of mistake is not common, even for your team.<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/392889/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor392890"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Finding a patch's kernel version with git</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jun 21, 2010 12:11 UTC (Mon)
                               by <b>farnz</b> (subscriber, #17727)
                              [<a href="/Articles/392890/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <p>The problem is that because revision numbers are <b>not</b> per-branch in most CVCSes (CVS is one exception), it's far too easy to accidentally compare revision numbers in different branches, without realising that that's what you've done. You're <b>never</b> going to stop people throwing around branchless revision numbers (whether they be SVN repository versions, or git SHA tags), because they're a convenient shorthand and happen to work just fine most of the time.
<p>Further, because it's "obvious" that r176594 came after r176593, it's all too easy to assume that whatever changed in r176593 is also changed in r176594. This isn't a safe assumption in a world with branches, but in a CVCS world, you normally get away without explicitly stating which branch a revision is on. Same applies in the DVCS world, but because there's no "obvious" order to DVCS commit IDs, people don't make assumptions when they see a bare revision number; they'll check one way or another.
<p>The painfully long explanation is simply because you <b>refused</b> to believe that people did this sort of thing when I presented it without explanation. Now I've added an explanation, you're complaining that it's unrealistic because I've had to tell you in great detail just how it happens, since you didn't believe that it did happen at all unless you had it explained in great detail?!? Oh, and your <a href="http://lwn.net/Articles/392630/">initial example</a> didn't include branch names as part of the revision ID, either; if you really expect that developers don't use bare revision IDs, but use the combination of branch name and revision ID, why didn't your example include them?
      
          <div class="CommentReplyButton">
            <form action="/Articles/392890/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor392911"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Finding a patch's kernel version with git</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jun 21, 2010 16:12 UTC (Mon)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/392911/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; 1. it's far too easy to accidentally compare revision numbers in different branches, without realising that that's what you've done.</font><br>
<font class="QuotedText">&gt; [...]</font><br>
<font class="QuotedText">&gt; 2. branchless revision numbers happen to work just fine most of the time.</font><br>
<p>
If you cannot see the contradiction above then there is not much that can be done.<br>
<p>
<p>
<font class="QuotedText">&gt; The painfully long explanation is simply because you refused to believe that people did this sort of thing when I presented it without explanation. </font><br>
<p>
The only reason your explanation is long is because it has to enumerate an unlikely long chain of mistakes, oversights and clueless SVN users. Or are you seriously saying such branch confusion happens often at your place? And yet you are still using branchless numbers? Hard to believe.<br>
<p>
I asked for more detail because your first "explanation" was just: "thanks to human error, the developer forgot to ensure that the fix was present on TRUNK". This did not explain anything.<br>
<p>
<p>
<font class="QuotedText">&gt; and your initial example didn't include branch names as part of the revision ID, either;[...] why didn't your example include them?</font><br>
<p>
Because you were supposed to read the entire post, not just the beginning of it. OK: this second post of mine sucked. Believe it or not, but I am glad you pushed me in clarifying the whole thing.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/392911/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor392938"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Finding a patch's kernel version with git</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jun 21, 2010 16:43 UTC (Mon)
                               by <b>bronson</b> (subscriber, #4806)
                              [<a href="/Articles/392938/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; If you cannot see the contradiction above then there is not much that can be done.</font><br>
<p>
Obviously he sees the contradiction -- he pointed it out.  "You're never going to stop people throwing around branchless revision numbers" means that until 'svn st' includes the branch name so people will copy-n-paste both into an email in one swipe, svn users will tend to use branchless revision numbers even when they know better.<br>
<p>
You both are doing a great job of slinging insults and quote mining, making very little forward progress on what is ultimately an absurdly simple concept.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/392938/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor392909"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Finding a patch's kernel version with git</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jun 21, 2010 15:48 UTC (Mon)
                               by <b>anselm</b> (subscriber, #2796)
                              [<a href="/Articles/392909/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <p>
The underlying problem here is that SVN, being conceptually a souped-up CVS, basically deals in »snapshots of trees«. A branch in SVN is essentially just another subdirectory inside the repository (alongside »trunk«), and snapshots of the whole repository tree get numbered consecutively no matter where any changes happen.
</p>
<p>
DVCSes like git, on the other hand, normally work in terms of »changesets«, i.e., atomic collections of patches to files in the repository. A branch is just a sequence of changesets that hasn't yet been applied to the main repository (the »trunk« if you will).
</p>
<p>
The advantage of the changeset-based approach is that it is a lot easier to tell whether a repository contains a given change(set), where with SVN the system needs to try to infer this after the fact from looking at the files in question &ndash; which is why DVCSes are generally much better at merging than SVN. If the previous poster had used a DVCS instead of SVN, it would have been very obvious that the 4.0.1 bug fix had not been reintroduced to the mainline (i.e., the changeset incorporating the fix had not been merged), where SVN, on the other hand, didn't really help with this. The idea of numbering revisions consecutively even if that doesn't mean anything in the context of a branched repository is not one of the high points of SVN's design.
</p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/392909/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor392667"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Finding a patch's kernel version with git</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jun 18, 2010 16:40 UTC (Fri)
                               by <b>iabervon</b> (subscriber, #722)
                              [<a href="/Articles/392667/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The situation is actually:<br>
<p>
 2.6.33       Release<br>
 2.6.33+5     Commit that introduces a bug<br>
 2.6.34       Release<br>
 2.6.35-rc1   Merge the buggy commit to mainline<br>
 2.6.35-rc1+1 Bugfix<br>
<p>
In a centralized system, it would be obvious whether the bugfix would have to be backported to the 2.6.34 release; with a decentralized system, it requires inspecting the commit graph. However, with a centralized system, the bugfix would have to be backported to the 2.6.34 release, because the bug was in work that was committed before the 2.6.34 release; with a decentralized system, merging new development could be put off until after the release without making it harder to do the development, so the bug was not in the 2.6.34 release.<br>
<p>
The unstated assumption in many comparisons is that, in a centralized system, the item labeled "2.6.33+5" above would have been where the item labeled "2.6.35-rc1" is, but this is unrealistic because it would require the developer to either wait until that time to write the code, or leave the change uncommitted and wait until "2.6.35-rc1" to do any other work. With the order of events fixed, it becomes clear that the choice is between thinking a release had a bug and being right, and thinking a release had a bug and being wrong.<br>
<p>
As a general rule, bugfixes get considered for backporting at the point where they are merged into the mainline, and it's obvious at that point that no release contains them yet (you can't tell from the bugfix commit whether it missed a release, but you can tell from the pull request). The interesting question is when the bug was introduced, since that determines what backports are needed, and these backports go into patch release branches which have linear histories. When considering whether a fix is in 2.6.33.N and looking at the commit that fixes it for 2.6.33.*, you can just look at the commit dates.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/392667/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor392880"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Finding a patch's kernel version with git</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jun 21, 2010 9:36 UTC (Mon)
                               by <b>chad.netzer</b> (subscriber, #4257)
                              [<a href="/Articles/392880/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
"In a centralized system, it would be obvious whether the bugfix would have to be backported to the 2.6.34 release; with a decentralized system, it requires inspecting the commit graph. "<br>
<p>
How is this true?   Not all feature branches in a centralized system need be merged before a release, and so it seems to not be a matter of centralized vs. distributed.  Bazaar supports both centralized (ie. non-local commit, merging, etc.) and full DVCS semantics (local branching/merging), and I'm having a hard time seeing how your example would not require graph inspection in either mode, since the commit was written before a release, but merged afterwards according to the comment.<br>
<p>
If you simply require all branches in a centralized system to be merged before a release, with non-merged branches to be re-written/rebased off the latest release, then that's one thing.  But that can be enforced in a distributed system as well (though it sounds like a painful policy, more painful than whatever it intends to fix).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/392880/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor392910"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Finding a patch's kernel version with git</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jun 21, 2010 16:12 UTC (Mon)
                               by <b>iabervon</b> (subscriber, #722)
                              [<a href="/Articles/392910/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The distinction is really as to whether the development is forced to be linear by having only a single branch, or whether there are multiple branches. Obviously, a decentralized system has to have multiple branches, because each branch can only have one authoritative source. And it has historically been the case that systems designed to be centralized either don't support branches or don't have the necessary merging support to make long-term feature branches feasible, which means that changes which are written before a release and aren't included in it won't be merged (or, at least, the project history that people will see for versions that get released won't include the history of the change as was recorded there).<br>
<p>
So, if you understand a system to be "decentralized" if the software includes the necessary features for not having a central repository, even if it is used with a central repository in actual deployment, then the systems still considered "centralized" essentially require all branches to be rebased around a release just because merging them is otherwise too hard to get right.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/392910/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor392969"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Finding a patch's kernel version with git</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jun 21, 2010 19:45 UTC (Mon)
                               by <b>chad.netzer</b> (subscriber, #4257)
                              [<a href="/Articles/392969/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Ah, this also explains marcH's points a bit better.  I still contend that this is not a "centralized vs. distributed" issue, then, but really a matter of linear vs. non-linear history, and branch management between releases.  Certainly the "centralized repo" tools that I'm familiar with have gained better branch and merge support over the years, and more easily support long lived branches and feature branches, without rebasing after each release.<br>
<p>
Here is an informative workflow example, demonstrating marcH's "strict ordering" principle:<br>
<a href="http://lsimons.wordpress.com/2010/02/19/using-long-lived-stable-branches/">http://lsimons.wordpress.com/2010/02/19/using-long-lived-...</a><br>
<p>
It works in this case because trunk has no other branches than stable, and stable is (obviously) never merged back into trunk.  That same workflow works even with a distributed system (by rebasing before pushing to the main repo, for example).  It blends history among developers, however, which can be a disadvantage at times, especially with many developers and features in active development.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/392969/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor394151"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Finding a patch's kernel version with git</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jun 29, 2010 14:58 UTC (Tue)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/394151/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; I still contend that this is not a "centralized vs. distributed" issue, then, but really a matter of linear vs. non-linear history, and branch management between releases.</font><br>
<p>
Agreed I guess, except you conveniently omit the huge influence that a centralized system has on branching policies (the "workflow").<br>
<p>
<font class="QuotedText">&gt; Certainly the "centralized repo" tools that I'm familiar with have gained better branch and merge support over the years,</font><br>
<p>
As long a system is centralized, you will neither be able to permanently erase branches nor to re-organize the past in any way. And you will need some human-level protocol to avoid collisions. These, and probably others reasons I miss will always have a chilling effect on branching. Why do you think git-svn is so popular?<br>
<p>
I am pretty sure that the main reason why most decentralized systems were invented is because their authors wanted to increase the branching and merging freedom.<br>
<p>
My point here is that the tool has a huge influence on the way it is used. Sure you can often hammer down a nail with a screwdriver, but do people do that routinely?<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/394151/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor532233"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">How to patch Linux kernel , preferably with git</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 10, 2013 11:47 UTC (Thu)
                               by <b>ranjuchhatna</b> (guest, #85778)
                              [<a href="/Articles/532233/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Dear Sir/Madam,<br>
  I am mtech final year student of IITkgp,India, roll no-11cs60r23. I am working on a project i.e. adapting Linux kernel for future multi core architecture. I want to know how to patch Linux kernel preferably using git. I searched in net a lot about it but could not find useful material. If possible please try to help as much as possible.<br>
thanking you,<br>
yours faithfully,<br>
Sachin Agarwalla<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/532233/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2010, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
