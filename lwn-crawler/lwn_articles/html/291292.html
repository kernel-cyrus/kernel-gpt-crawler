        <!DOCTYPE html>
        <html lang="en">
        <head><title>Linux-next meets the merge window [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/291292/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/290428/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/291292/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>Linux-next meets the merge window</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Benefits for LWN subscribers</b>
<p>
The primary benefit from <a href="/Promo/nst-nag5/subscribe">subscribing to LWN</a>
       is helping to keep us publishing, but, beyond that, subscribers get
       immediate access to all site content and access to a number of extra
       site features.  Please sign up today!
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>July 23, 2008</br>
           </div>
Recent LWN articles on the linux-next tree have noted that, while this tree
has been working well in its role of identifying merge conflicts between
subsystem trees, it has not yet been through a full kernel development
cycle.  2.6.27 will be the first kernel release where linux-next was in
existence for the entire preceding cycle; in theory, everything which goes
into 2.6.27 should have been aged in linux-next first.  As the end of the
2.6.27 merge window nears, a look at how linux-next has affected the
process seems warranted.
<p>

One might think that linux-next maintainer Stephen Rothwell would be able
to take a break during the merge window; it should mostly be a matter of
watching the linux-next tree drain into the mainline.  As it happens, the
daily linux-next postings (<a href="/Articles/291294/">example)</a> suggest
a fair amount of scrambling to deal with merge conflicts, build failures,
and more.  There are a number of reasons for this, one of which being that
subsystem trees are merged into the mainline in an order which is
completely unrelated to their order in linux-next.  Patches which remain in
linux-next are being applied to a highly unstable base.
<p>

Another interesting phenomenon has been a fair number of patches appearing
in linux-next during the merge window.  Some of these are actually patches
intended for 2.6.28; once maintainers have dumped their 2.6.27 patches into
the mainline, they are starting to acquire stuff for the next time around.
Stephen has <a href="/Articles/291295/">asked them not to do that</a>,
requesting that 2.6.28 material not be directed toward linux-next until
after the 2.6.27-rc1 release.  The goal is that linux-next should be nearly
empty when 2.6.27-rc1 comes out.
<p>

Other patches, though, are intended for 2.6.27 but simply have not done
their time in the linux-next tree.  That had led to a certain amount of
developer grumpiness at times.  It is interesting to note, though, that one
of the biggest examples of linux-next avoidance - David Miller's merging of
the multiqueue networking code which he had finished writing hours before -
has generated relatively few complaints.  But various other types of
conflicts have generated a steady steam of terse notes from Andrew Morton
(who is in the unfortunate position of basing his work on top of
linux-next) on how new stuff should have been in linux-next weeks ago.
<p>

Another area of, say, colorful conversation has been around the TTY
subsystem, currently been subjected to a much-needed thrashing by Alan Cox.
Some developers have been unhappy with Alan for merging code which failed
to compile, even though those problems had already been identified in
linux-next.  Alan, instead, has become irritated with other developers who
have surprised him with TTY-layer changes of their own, causing Alan's
patches not to apply.  Alan has some quaint notions about actually testing
his patches, so the resolution of this kind of conflict requires the
running of a new set of regression tests and such; after this had happened
a few times in a row, he started getting a little short-tempered.  These issues
would appear to have been worked out at this point, but the idea behind
linux-next was to keep them from happening in the first place.

<p>
Yet another source of occasional merge issues is the rebasing of trees.
Rebasing, in git-speak, is the process of modifying the commit history in a
repository to cause a series of patches to look like they were written
against a later version of the code than they really were.  Rebasing can be
a useful technique; it generates a series of patches which applies cleanly
to the current state of the tree without generating a bunch of unsightly
merge commits.
<p>

Rebasing can be especially useful in the context of linux-next.  If testing
turns up a patch which breaks the build, simply committing a fix will leave
a period in the history where the kernel cannot be built, and that is bad
for people running bisections.  With the use of git's history editing
features, the offending patch can be fixed in place and all evidence of the
mistake disappears.  In essence, that embarrassing commit mentioning the
Eurasian campaign can be fixed up to properly note that we've always been
at war with Eastasia.
<p>

But rebasing a repository changes the history (by design), creating, in the
process, an entirely new set of commits.  Those commits are new code, to
the point that any results from testing the older version may no longer
apply.  The commits also have new names, so any other developer who was
using a version of the repository will be shaken off and unable to merge.
Issues related to rebasing have come up a couple of times during the merge
window, leading Linus to post a <a href="/Articles/291302/">series</a> <a
href="/Articles/291303/">of</a> <a href="/Articles/291304/">lectures</a> on
the problems that rebasing can cause.  It is clearly a tool which must be
used with restraint, but occasional use of rebasing can, in the linux-next
context, lead to a better final merge.  Finding the right balance is
something each developer will have to learn.
<p>

In the end, the merge window remains a bit of an unruly time.  The process
of channeling the work of several hundred developers into the mainline over
a two-week period is unlikely to ever be an entirely smooth experience.
But, for all its glitches, the 2.6.27 merge window has been (so far!)
easier than 2.6.26.  The presence of the linux-next tree almost certainly
has something to do with that.  This tree's role continues to evolve, but
its benefits are starting to be felt.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Development_model-linux-next">Development model/linux-next</a></td></tr>
            <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#linux-next">linux-next</a></td></tr>
            <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Releases-2.6.27">Releases/2.6.27</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/291292/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor292615"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Nice 1984 reference</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 4, 2008 17:43 UTC (Mon)
                               by <b>anton</b> (subscriber, #25547)
                              [<a href="/Articles/292615/">Link</a>] 
      </p>
      
      </div>
      </summary>
      For those who have not read "1984", the mentioning of Eurasia and Eastasia refers to the history rewriting that constantly happens in the Ministry of Truth.
      
          <div class="CommentReplyButton">
            <form action="/Articles/292615/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2008, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
