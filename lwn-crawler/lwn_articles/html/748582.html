        <!DOCTYPE html>
        <html lang="en">
        <head><title>Virtual private networks with WireGuard [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/748582/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/748358/">Return to the Front page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/748582/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>Virtual private networks with WireGuard</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>This article brought to you by LWN subscribers</b>
<p>
Subscribers to LWN.net made this article &mdash; and everything that
       surrounds it &mdash; possible.  If you appreciate our content, please
       <a href="/Promo/nst-nag3/subscribe">buy a subscription</a> and make the next
       set of articles possible.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>March 6, 2018</br>
           </div>
Virtual private networks (VPNs) offer a lot in the way of increased
security and privacy.  They have also tended to offer less desirable
features like administrative complexity and reduced performance, though; as
a result, many potential VPN users decide not to bother.  A relatively new
project called <a href="https://www.wireguard.com/">WireGuard</a> hopes to
address both of those problems with an in-kernel solution that is both
simple and fast.
<p>
A VPN works by establishing an encrypted connection from an endpoint system
to a trusted host elsewhere on the network.  That host becomes the router
through which some or all network traffic from the endpoint passes.
Since this tunnel is encrypted, traffic that travels over the VPN
is protected from eavesdroppers — until it reaches the trusted host, at
least.  Setting up the VPN connection in the first place requires 
authentication between the endpoints;  that, in turn, allows hosts to place
some trust in the packets coming over the VPN connection.  It is thus a
common configuration 
to only allow internal resources to be accessed via a VPN connection.
<p>
There are other advantages to VPNs as well.  Today's youth tend to be well
acquainted with the use of a VPN to bypass various types of content
filtering.  A VPN can be used to change a user's apparent network location,
helping to circumvent annoyances like country-specific content blocking.
The first eavesdropper many of us are likely to encounter is our own
Internet service provider, which tends to take a great interest in
collecting data on web traffic and such to sell to advertisers; using a VPN
will frustrate this kind of prying.
<p>
Linux users have a number of VPN options available to them.  In many cases,
a set of OpenSSH tunnels will do the trick for specific applications.  <a
href="https://openvpn.net/">OpenVPN</a> is a popular, open-core system that
provides comprehensive VPN functionality.  But OpenVPN suffers from a fair
amount of complexity and, since it is a user-space implementation, it takes
a toll on networking performance.  <a
href="https://en.wikipedia.org/wiki/IPsec">IPsec</a> is built into the
kernel and has fewer performance problems, but it makes up for that with
even more complexity.
<p>
<h4>Enter WireGuard</h4>
<p>
In June 2016, Jason Donenfeld showed up with <a href="/Articles/693015/">a
new VPN implementation called WireGuard</a> that claims to avoid the
problems associated with other options.  It is an in-kernel
implementation (though still out of tree) that has been developed with
performance in mind.  The implementation is quite small (about 4,000 lines
of code), making it relatively easy to verify.  Configuration of the system
is relatively simple though, as with any sort of network configuration it
seems, the "relatively" qualification is important.
<p>
Donenfeld has gone out of his way to make it easy to experiment with
WireGuard; there are <a href="https://www.wireguard.com/install/">prebuilt
packages</a> available for a wide range of distributions.  Those packages
contain the source for the WireGuard implementation; it is built on the fly
using the <a href="https://github.com/dell/dkms">DKMS</a> framework.  Once
the installation is done, the user is left with a kernel module
(<tt>wireguard.ko</tt>) and the <tt>wg</tt> tool for configuration.
<p>
Every host connecting to a WireGuard implementation must use a
public/private key pair for communication.  The first step, thus, is to
generate a new private key with a command like:
<p>
<pre>
    # wg genkey
    uHCQ+Damh4F5zNVr9PvHiflW2aRU1SE0GQCVYkvxiEc=
</pre>
<p>
The keys are generated using the <a
href="https://en.wikipedia.org/wiki/Curve25519">Curve25519</a> elliptic
curve; as a result they are quite a bit shorter than keys used by other
algorithms.  The associated public key can be created from the private key
with the <tt>wg&nbsp;pubkey</tt> command.
<p>

WireGuard presents itself as a new type of network interface that can be
used to route packets into a VPN.  Thus, setting up a WireGuard implementation
requires creating and configuring this interface, using a command series
like:
<p>
<pre>
    # ip link add wg0 type wireguard
    # ip addr add 10.0.0.1/24 wg0
    # wg set wg0 private-key &lt;private-key-file&gt;
    # ip link set wg0 up
</pre>
<p>
These commands create a new network interface called <tt>wg0</tt>, loading
the <tt>wireguard</tt> kernel module in the process.  This interface is assigned
the network address <tt>10.0.0.1</tt>, and its private key is set to a key
generated with <tt>wg&nbsp;genkey</tt>.
Just running a bare <tt>wg</tt> command at this point will produce output
like:
<p>
<pre>
    # wg
    interface: wg0
      public key: FNqV9pbUECLd7SNQ98jDlDRxqtppMTT9CEE8p1w6bTU=
      private key: (hidden)
      listening port: 41415
</pre>
<p>
Like many recent protocols, WireGuard is based on UDP.  Packets at one end are
encrypted, then sent to the remote endpoint encapsulated within UDP
packets, where they are decrypted and sent on their way.  The above output
tells us that port 41415 was chosen to listen for these UDP packets; the
port number can also be explicitly configured with the <tt>wg</tt>
command. 
<p>
A command series like this must be carried out at both ends of the VPN
connection; the IP addresses should be different, of course, but on the
same subnet (<tt>10.0.0.0/24</tt> in this case).  Imagine we did something
like that on the remote host, giving it IP address <tt>10.0.0.2</tt> and
putting it on port 44556.  The next step is to connect those two interfaces
together so that they may pass packets back and forth.  On the original
machine (the one whose <tt>wg0</tt> interface has address
<tt>10.0.0.1</tt>), we would run something like:
<p>
<pre>
    wg set wg0 peer &lt;public-key&gt; allowed-ips 10.0.0.2/32 endpoint &lt;ip-addr&gt;:44556
</pre>
<p>
Here, <tt>ip-addr</tt> is the real-world (not VPN) address of the other end
of the connection. 
A similar command would be required on that other system, using the
appropriate public key and IP address.  At that point, it will be possible
to communicate between the two hosts by using the appropriate addresses.
Once the connection has been established the IP addresses can change; if
one end is a laptop, for example, the VPN will still work after moving to a
new network. 
<p>
In a sense, that's really about all there is to it.  But the real world does
tend to be a bit more complicated, of course.  For example, it is common to
want the endpoint
 to send <i>all</i> of its network traffic over the VPN.  That
could be accomplished by setting the <tt>allowed-ips</tt> parameter in the
above command to <tt>0.0.0.0/0</tt> and using <tt>ip&nbsp;route</tt> to set
the default route to go through <tt>wg0</tt>.  A slightly more complex
setup (turning on IP forwarding, probably setting up NAT) would then be required
on the other end to make the routing work.
<p>
The advantage of the WireGuard approach can be seen here, though; it creates
interfaces that can be connected to each other.  After that all of the
normal networking routing and traffic-control features can be used to cause
that VPN link to be used in a wide variety of ways.  There are also some
special features designed to allow WireGuard interfaces to be used within
network namespaces.
<p>
I ran a test, using WireGuard to set up a link between the desktop machine
and a remote cloud instance.  It took a little while, but that is mostly a
matter of being extremely rusty with the <tt>ip</tt> command set.  The VPN
tunnel worked as advertised in the end.  Before enabling the tunnel, a <a
href="https://speedof.me/">SpeedOf.Me</a> test showed 137Mbps bandwidth
down and 12.9Mbps up; the ping time to an LWN server was 76ms.  With all
traffic routing over the WireGuard VPN link, downward bandwidth dropped to
131Mbps and upward to 12.4Mbps; ping times were nearly unchanged.  That is
not a zero cost, but it is not huge and one should 
bear in mind that going through a NAT gateway at the far end will be a big
chunk of the total performance hit.  So WireGuard does indeed appear to be
reasonably fast.
<p>
One test is not a comprehensive evaluation, of course.  It will be
interesting to try WireGuard at the next conference with an overloaded network
to see how well it copes with packet loss, for example, and no attempt was
made to verify the cryptographic aspects of the protocol.  WireGuard does
seem like a relatively simple and fast VPN implementation, though, that
could go a long way toward making VPN use nearly universal on Linux
systems.
<p>
<h4>Next steps</h4>
<p>
Getting to that point will require that WireGuard be merged into the
mainline kernel, though.  Donenfeld has stated that upstreaming the code
was his intent from the beginning, but there have been almost no postings
of the code on the kernel mailing lists.  It is, thus, unsurprising that
WireGuard remains out of tree.

Donenfeld did post an <a href="/Articles/748584/">upstreaming
roadmap</a> in November; it suggests that the code is unlikely to be merged
right away since, for example, an overhaul of the cryptographic API is
evidently a precondition.
That overhaul has not yet happened, and neither has the promised near-term
posting of the WireGuard code.
<p>
Chances are that this all will happen eventually, though.  WireGuard seems
to have generated a high level of interest, and it appears to have been
deployed in many settings already.  It has, for example, been <a
href="https://danrl.com/blog/2017/luci-proto-wireguard/">integrated into
OpenWrt</a> with a set of configuration screen in the LuCi web interface.
So there is clearly an audience for this functionality.  Once the process
of getting it upstream begins in earnest, it may run its course relatively
quickly.
<p>
See <a href="https://www.wireguard.com/papers/wireguard.pdf">this white
paper [PDF]</a> for lots of details on how WireGuard works.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Networking-Virtual_private_networks">Networking/Virtual private networks</a></td></tr>
            <tr><td><a href="/Security/Index/">Security</a></td><td><a href="/Security/Index/#Encryption-Network">Encryption/Network</a></td></tr>
            <tr><td><a href="/Security/Index/">Security</a></td><td><a href="/Security/Index/#Linux_kernel-Virtual_private_network_VPN">Linux kernel/Virtual private network (VPN)</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/748582/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor748611"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Virtual private networks with WireGuard</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 6, 2018 15:28 UTC (Tue)
                               by <b>dezgeg</b> (subscriber, #92243)
                              [<a href="/Articles/748611/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It might be worth noting that even the Penguin Chief himself has expressed his opinion on wanting WireGuard merged: <a href="https://lkml.org/lkml/2018/2/13/752">https://lkml.org/lkml/2018/2/13/752</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/748611/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor748612"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Virtual private networks with WireGuard</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 6, 2018 15:44 UTC (Tue)
                               by <b>zx2c4</b> (subscriber, #82519)
                              [<a href="/Articles/748612/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Getting to that point will require that WireGuard be merged into the mainline kernel, though. Donenfeld has stated that upstreaming the code was his intent from the beginning, but there have been almost no postings of the code on the kernel mailing lists.</font><br>
<p>
Expect to see some patches in the spring for this. We're steadily moving ahead to our v1 submission. I should write another status update to netdev; thanks for encouraging me here.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/748612/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor748631"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Virtual private networks with WireGuard</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 6, 2018 16:42 UTC (Tue)
                               by <b>Lekensteyn</b> (guest, #99903)
                              [<a href="/Articles/748631/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; It will be interesting to try WireGuard at the next conference with an overloaded network to see how well it copes with packet loss.</font><br>
<p>
WireGuard encapsulates IP packets in its transport messages and does no attempt on retransmission (leaving this up to the upper layers). The initial handshake consists of only two (small) UDP datagrams (one for each direction), there are no explicit acknowledgement messages.<br>
<p>
Compare this to (for example), OpenVPN with its TLS authentication mode that requires many more UDP datagrams to transport the full TLS handshake (including large certificates), it seems likely that WireGuard is faster to establish a session.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/748631/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor748634"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Virtual private networks with WireGuard</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 6, 2018 17:06 UTC (Tue)
                               by <b>yokem_55</b> (guest, #10498)
                              [<a href="/Articles/748634/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The nice thing about ipsec vpn's is that there is a fair amount of intervendor interoperability that is possible. A mixed vendor ipsec network with Cisco, Juniper and Ubiquiti endpoints is possible. OpenVPN is portable to lots of different platforms. <br>
<p>
Will wireguard ever be more than just a linux thing?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/748634/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor748638"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Virtual private networks with WireGuard</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 6, 2018 18:08 UTC (Tue)
                               by <b>dsix</b> (guest, #111931)
                              [<a href="/Articles/748638/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
While there is no guarantee of adoption, there is a page and a plan for cross-platform userspace implementations: <a href="https://www.wireguard.com/xplatform/">https://www.wireguard.com/xplatform/</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/748638/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor748641"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Virtual private networks with WireGuard</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 6, 2018 19:30 UTC (Tue)
                               by <b>zx2c4</b> (subscriber, #82519)
                              [<a href="/Articles/748641/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      WireGuard is available for Ubiquiti equipment actually.

For other operating systems, we're developing several cross-platform implementations. So we should have pretty good compatibility throughout.
      
          <div class="CommentReplyButton">
            <form action="/Articles/748641/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor748651"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Virtual private networks with WireGuard</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 6, 2018 20:27 UTC (Tue)
                               by <b>SEJeff</b> (guest, #51588)
                              [<a href="/Articles/748651/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Assuming you mean it would work with the Unified Security Gateway and/or EdgeRouter series of equipment? Anything else (I overlap in current Ubiquiti owner + potential fan of wireguard after seeing Thomas Ptacek say such nice things about it.)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/748651/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor748652"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Virtual private networks with WireGuard</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 6, 2018 20:33 UTC (Tue)
                               by <b>zx2c4</b> (subscriber, #82519)
                              [<a href="/Articles/748652/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      Specifically I mean: https://github.com/Lochnair/vyatta-wireguard/releases -- so their EdgeRouter devices.
      
          <div class="CommentReplyButton">
            <form action="/Articles/748652/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor748655"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Virtual private networks with WireGuard</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 6, 2018 21:16 UTC (Tue)
                               by <b>SEJeff</b> (guest, #51588)
                              [<a href="/Articles/748655/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Ah thanks! They both run EdgeOS, so it will probably work on the security gateway as well. I might give it a go and let upstream know.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/748655/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor748983"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Virtual private networks with WireGuard</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 10, 2018 0:53 UTC (Sat)
                               by <b>coolhandluke</b> (guest, #114151)
                              [<a href="/Articles/748983/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Just to chime in for the possible benefit of others and in addition to the other comments here, Jason (zx2c4) previously stated [0] that "Mac and Windows support ... [is] already mostly done" but that "there may still be a bit of work to do here".<br>
<p>
So it certainly looks like cross-platform interoperability is both desired and actively being worked on (as far as open-source devices go, of course). On closed platforms (IOS, JunOS, etc.), it would obviously be up to the vendor whether they decided to add support for WireGuard.<br>
<p>
Personally, I'd love to support for WireGuard available in both FreeBSD and OpenBSD. I expect that this will happen eventually, likely some time after it is fully upstreamed in mainline and most of the kinks have been worked out.<br>
<p>
[0]: <a href="https://lwn.net/Articles/748584/">https://lwn.net/Articles/748584/</a><br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/748983/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor748639"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Virtual private networks with WireGuard</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 6, 2018 18:57 UTC (Tue)
                               by <b>dmoreno</b> (guest, #46333)
                              [<a href="/Articles/748639/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Using the included wg-quick (<a href="https://git.zx2c4.com/WireGuard/about/src/tools/wg-quick.8">https://git.zx2c4.com/WireGuard/about/src/tools/wg-quick.8</a>) makes configuration and management a bit easier, giving away some control. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/748639/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor748654"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Virtual private networks with WireGuard</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 6, 2018 20:41 UTC (Tue)
                               by <b>zdzichu</b> (subscriber, #17118)
                              [<a href="/Articles/748654/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Moreover, systemd-networkd includes support for WireGuard for couple of versions. The config file format is of course the same. So basically Linux distribution will support WireGuard almost universally the moment it's included in kernel.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/748654/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor748640"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Virtual private networks with WireGuard</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 6, 2018 19:03 UTC (Tue)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/748640/">Link</a>] (7 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
What is the advantage compared to IPSec? The in-kernel ipsec encryption is perfectly adequate for most purposes (just ignore the crappy ciphers). <br>
<p>
The userspace key agreement protocol (IKE) is another story, but you don't have to use it, ipsec actually has a standardized cross-platform API to manage the kernel-level keys.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/748640/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor748664"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Virtual private networks with WireGuard</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 7, 2018 2:18 UTC (Wed)
                               by <b>amworsley</b> (subscriber, #82049)
                              [<a href="/Articles/748664/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The key advantage as stated was a vastly smaller implementation (4000 lines) making vastly easier to check for flaws.<br>
Another additional design features is that it has very few options and deliberately selected modern algorithms likely to be secure for much time in the future. Greatly reducing the chance of insecurity through mis-configuration versus ipsec.<br>
Finally once a secure tunnel is set up the remote end can change IP as the public key is used to verify any new IP address automatically - removing another "brittleness" where transport network changes can kill the connectivity.<br>
<p>
I am not aware of how it handles replay and denial of service attacks but hopefully when it is merged in there will be many chances to check for these and other issues.<br>
<p>
Also if it is 4000 lines to implement it would be hard to add it to other platforms.<br>
Presumably if it is popular Android phones could start using fairly quickly.<br>
It would be interesting to know how it would handle the China's great firewall.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/748664/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor748677"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Virtual private networks with WireGuard</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 7, 2018 14:12 UTC (Wed)
                               by <b>bavay</b> (subscriber, #60804)
                              [<a href="/Articles/748677/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I am absolutely naive with VPNs, so my questions might be totally off, but one thing I find potentially dangerous is the ability to silently loose a VPN connection. If you are transmitting sensitive data over a link that you know is most probably under surveillance, you absolutely don't want the VPN to disconnect and your data transfer to resume over the non-VPN network (when accessing public IPs). Is it something that is addressed at the VPN level or should it be addressed at another level? Does WireGuard offers something to prevent it?<br>
<p>
Mathias<br>
PS: Yes, the data transfer itself is also encrypted, but better safe than sorry and encapsulate it within a VPN alongside masses of uninteresting data<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/748677/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor748678"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Virtual private networks with WireGuard</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 7, 2018 14:45 UTC (Wed)
                               by <b>smurf</b> (subscriber, #17840)
                              [<a href="/Articles/748678/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Wireguard does not "lose a connection" the way a VPN link dies. The connection and the rest of the kernel setup are is still there, packets simply get dropped until the connection is re-established.<br>
<p>
I've been using it for months on my office VPN. Zero problems, it's a breeze to set up compared to OpenVPN (and much faster).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/748678/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor748982"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Virtual private networks with WireGuard</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 10, 2018 0:20 UTC (Sat)
                               by <b>coolhandluke</b> (guest, #114151)
                              [<a href="/Articles/748982/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
In the case where all traffic absolutely *must* go over a VPN (or else not be sent at all), I have previously configured firewall rules (both on the host itself as well as its upstream router, for an additional layer of defense) to only permit outbound IP traffic destined to the VPN gateway and drop any other traffic.<br>
<p>
This ensures that traffic will not be sent out if the VPN link dies for any reason.<br>
<p>
Whether or not this approach is an acceptable solution for you obviously depends on your specific requirements.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/748982/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor749131"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Virtual private networks with WireGuard</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 12, 2018 22:46 UTC (Mon)
                               by <b>james</b> (subscriber, #1325)
                              [<a href="/Articles/749131/">Link</a>] 
      </p>
      
      </div>
      </summary>
      I've seen people go one stage further and configure the router without a default gateway, just with routes to the public IP addresses of the VPN concentrators.<p>Those routes to the VPN concentrators are the <em>only</em> routes over the WAN link(s): even without a firewall, the router won't know which way to send packets to the Internet until the VPN is up. Then routing protocols (configured to talk to the internal addresses of the VPN concentrators) can add more routes.

      
          <div class="CommentReplyButton">
            <form action="/Articles/749131/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor748679"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Virtual private networks with WireGuard</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 7, 2018 14:57 UTC (Wed)
                               by <b>smurf</b> (subscriber, #17840)
                              [<a href="/Articles/748679/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Wireguard simply throws away packets it can't decrypt. It works at wire speed (for some definition of "wire", anyway) so even if you saturate the link with bogus encrypted packets, that's no worse than saturating it with any other kind of packet.<br>
<p>
Android will get a userspace implementation.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/748679/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor748791"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Virtual private networks with WireGuard</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 8, 2018 5:37 UTC (Thu)
                               by <b>thestinger</b> (guest, #91827)
                              [<a href="/Articles/748791/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It's worth noting that as of Android 8.0, there's a toggle to block connections not made via the always-on VPN to deal with issues like an OpenVPN app dying. A kernel implementation is more efficient but there's a sane way to use userspace VPN implementations.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/748791/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor748653"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Virtual private networks with WireGuard</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 6, 2018 20:36 UTC (Tue)
                               by <b>judas_iscariote</b> (guest, #47386)
                              [<a href="/Articles/748653/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
"I ran a test, using WireGuard to set up a link between the desktop machine and a remote cloud instance. It took a little while, but that is mostly a matter of being extremely rusty with the ip command set. "<br>
<p>
Current versions of systemd-networkd, (v237+) support setting up wireguard without any fiddling with "ip" atrocious command interface .. of course you still need the out of tree kernel modules.<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/748653/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor748774"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Virtual private networks with WireGuard</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 7, 2018 22:43 UTC (Wed)
                               by <b>flussence</b> (guest, #85566)
                              [<a href="/Articles/748774/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
What does the systemd equivalent of the example command in the article look like? I don't run it, just curious.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/748774/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor748776"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Virtual private networks with WireGuard</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 7, 2018 23:04 UTC (Wed)
                               by <b>smurf</b> (subscriber, #17840)
                              [<a href="/Articles/748776/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
There is no special command; if you need the command line, continue to use "wg".<br>
<p>
With systemd, you add a .netdev file (the contents of which are almost identical to a wireguard config file) to /etc/systemd/network, and restart systemd-networkd.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/748776/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor748820"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Virtual private networks with WireGuard</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 8, 2018 12:21 UTC (Thu)
                               by <b>Alphix</b> (subscriber, #7543)
                              [<a href="/Articles/748820/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      There's some examples in the Debian wiki <a href="https://wiki.debian.org/Wireguard">Wireguard page</a>.
      
          <div class="CommentReplyButton">
            <form action="/Articles/748820/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor749216"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Virtual private networks with WireGuard</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 13, 2018 23:29 UTC (Tue)
                               by <b>Bronek</b> (guest, #120079)
                              [<a href="/Articles/749216/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Would be nice to also have the support for WireGuard interfaces added to netctl<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/749216/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor749670"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Virtual private networks with WireGuard</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 19, 2018 15:43 UTC (Mon)
                               by <b>zuki</b> (subscriber, #41808)
                              [<a href="/Articles/749670/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Also "Example 13" in <a href="https://www.freedesktop.org/software/systemd/man/systemd.netdev.html#Example">https://www.freedesktop.org/software/systemd/man/systemd....</a>.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/749670/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor748667"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Host &quot;names&quot;</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 7, 2018 8:38 UTC (Wed)
                               by <b>ejr</b> (subscriber, #51652)
                              [<a href="/Articles/748667/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
One very useful aspect of the Anyconnect-style (at least ocserv) certificate management is that I can embed a host name in the key and not need to worry about setting up my own mapping.  As far as I can tell, WireGuard punts that to higher-level tools.  The choice is fine but may slow deployment.<br>
<p>
(I dodge DNS altogether for server-&gt;client lookups via occtl.  Maybe not the best choice, but it certainly keeps things simple for connecting back to my RaspberryPi sensors.)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/748667/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor748906"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Virtual private networks with WireGuard</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 9, 2018 8:37 UTC (Fri)
                               by <b>z3ntu</b> (subscriber, #117661)
                              [<a href="/Articles/748906/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Are you sure "ip addr add 10.0.0.1/24 wg0" shouldn't be "ip addr add 10.0.0.1/24 dev wg0"?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/748906/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor748835"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What lead to different designs in the past?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 9, 2018 10:00 UTC (Fri)
                               by <b>jarmar</b> (guest, #103679)
                              [<a href="/Articles/748835/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I am not a kernel programmer, but reading through the introduction and motivation in the white paper, this (behaving like any other network interface) seems like the "obvious" way to implement VPNs (as also evidenced by the small amount of code required). For that reason, it would be interesting to read why previous offerings *didn't* use this solution. What are the downsides of this approach? The whitepaper mentions:<br>
<p>
<font class="QuotedText">&gt;  It intentionally lacks cipher and protocol agility. If holes are found in the underlying primitives, all endpoints will be required to update.</font><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/748835/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor748913"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What lead to different designs in the past?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 9, 2018 12:16 UTC (Fri)
                               by <b>zdzichu</b> (subscriber, #17118)
                              [<a href="/Articles/748913/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
This isn't innovative. There were always two approaches, WireGuard just choose one of them.<br>
<p>
Within IPSec the appropaches are called "modes". There is a "transport mode", which encrypts data which would normally go unencrypted. And there is a "tunnel mode" which gives you separate network interface handling only encrypted traffic. Both have their advantages and disadvantages – for example transport mode gives you ability to encrypt only some of the streams between two hosts. And with tunnel mode you get another set of network address prefixes to deal with, which complicates routing.<br>
<p>
WireGuard avoids complexivity of IPSec by making a sensible choices.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/748913/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor749137"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What lead to different designs in the past?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 13, 2018 3:33 UTC (Tue)
                               by <b>perennialmind</b> (guest, #45817)
                              [<a href="/Articles/749137/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
IPSec tunnels encapsulate packets much as do other tunnels, but they behave very differently in practice. IPSec policy, for both tunnel and transport mode, imposes a colleciton of special cases on the normal routing path. I tend think of it as another, particularly rigid firewall/NAT layer. I find it much easier to internalize the "route-based" and "point-to-point" IPSec modes: VTI and BEET respectively. The former has broad industry support and allows you to largely opt-out of key elements of the original IPSec design. That's about as politic as I can be on the subject.<br>
<p>
Much network-level flexibility is simply off the table if you stick to policy-based IPSec. Want failover? Don't count on routing protocols like OSPF or IS-IS to work over standard IPSec tunnels. Forget about Bidirectional Forwarding Detection helping you figure out whether your tunnel is actually good for handing off packets. Do not forget to take extra care with your firewall to distinguish between the pre- and post- encapsulation stages as packets get cloned and re-injected.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/749137/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor749477"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">What lead to different designs in the past?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 16, 2018 9:55 UTC (Fri)
                               by <b>jengelh</b> (subscriber, #33263)
                              [<a href="/Articles/749477/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;with tunnel mode you get another set of network address prefixes to deal with, which complicates routing.</font><br>
<p>
Not necessarily. I have a tunnel mode setup running that looks like this, and no extra routes are needed.<br>
<p>
    conn x<br>
        leftid=@a<br>
        left=5.9.23.70/32<br>
        leftsubnet=5.9.23.70/32,88.198.1.160/29<br>
        rightid=@b<br>
        right=62.245.7.1<br>
        rightsubnet=62.245.7.1/32<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/749477/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor748985"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Virtual private networks with WireGuard</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 10, 2018 0:54 UTC (Sat)
                               by <b>pabs</b> (subscriber, #43278)
                              [<a href="/Articles/748985/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Does WireGuard have forward secrecy?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/748985/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor748989"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Virtual private networks with WireGuard</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 10, 2018 6:17 UTC (Sat)
                               by <b>smurf</b> (subscriber, #17840)
                              [<a href="/Articles/748989/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Yes. You can also add a pre-shared key for further data confabulation.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/748989/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor749600"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Virtual private networks with WireGuard</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 19, 2018 12:04 UTC (Mon)
                               by <b>biergaizi</b> (guest, #92498)
                              [<a href="/Articles/749600/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I believe WireGuard offers the most robust, latest state-of-art cryptography and the highest performance and best quality of implementation compared to any other solutions. Even the humble base64 encoding is implemented in cryptographic-grade constant-time code.<br>
<p>
If I remembered correctly, the lifetime of a single session key is 5 minutes, every five minutes the session key is rotated by X25519 Diffie-Hellman key exchange. The key exchange itself can be further protected by 256-bit ChaCha20 encryption using a pre-shared key, in case a massive quantum computer breaks ECC in the future (yes, it's explicitly designed for this use case) - a quick-and-dirty approach towards Post-Quantum Cryptography. And because the Diffie-Hellman is still there, losing the PSK doesn't affect every a single bit of security without considering quantum computers.<br>
<p>
In 2050 when a giant quantum computer have been built by the NSA, all PGP, HTTPS, TLS, IPSec, etc-encrypted data will be broken, but your WireGuard traffic is still secured if your PSK is exchanged out-of-band.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/749600/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor773009"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">WireGuard: Problem with routing all traffic through the tunnel </h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 27, 2018 14:01 UTC (Tue)
                               by <b>DarkMelman</b> (guest, #128875)
                              [<a href="/Articles/773009/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I have a working setup with WireGuard „Server“ on a Ubuntu 18.04.1 System. <br>
1 Client also Ubuntu is working fine a all the traffic goes through the tunnel with config 0.0.0.0/0<br>
When I am using my iPhone with the WireGuard App, with AllowedIPs = 0.0.0.0/0 I can ping the server an the other client but I can’t reach the internet. <br>
When I configured AllowedIPs = 10.0.0.2/24 then I can connect the internet but an Iip-check shows, that its using the public ip from the iPhone and not from the server.<br>
<p>
Did anyone have an idea what can be the issue?<br>
Thanks a lot! Best Regards<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/773009/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2018, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
