        <!DOCTYPE html>
        <html lang="en">
        <head><title>The 3.11 merge window closes [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/558940/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/558598/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/558940/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>The 3.11 merge window closes</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>LWN.net needs you!</b>
<p>
Without subscribers, LWN would simply not exist.  Please consider
       <a href="/Promo/nst-nag2/subscribe">signing up for a subscription</a> and helping
       to keep LWN publishing.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>July 16, 2013</br>
           </div>
<img src="https://static.lwn.net/images/2013/3.11-logo.png" alt="[New logo]" widgh=80 height=80
hspace=3 align="right">
Linus <a href="/Articles/558828/">announced</a> the release of 3.11-rc1 —
and the closing of the 3.11 merge window — on July&nbsp;14.  While the
merge window was open, 9,494 non-merge changesets were pulled into the
mainline kernel repository.  The <a
href="http://git.kernel.org/linus/ad81f0545ef01ea651886dddac4bef6cec930092">last</a>
of those changes changed the kernel's codename to "Linux for Workgroups"
and modified the boot-time logo; the new version appears to the right.
Clearly, Linux development has moved into a new era.
<p>
Of those 9,494 changes, 1,219 were pulled since <a
href="/Articles/558126/">last week's summary</a>.  User-visible changes in
that final batch of patches include:
<p>
<ul>

<li> The new <tt>O_TMPFILE</tt> ABI has changed slightly in response to <a
     href="/Articles/558949/">concerns</a> expressed by Linus.  In short,
     <tt>open()</tt> ignores unknown flags, so software using
     <tt>O_TMPFILE</tt> on older kernels has no way of knowing that it is
     not, in fact, getting the expected temporary file semantics.
     Following <a href="/Articles/558951/">a suggestion</a> from Rasmus
     Villemoes, Al Viro changed the user-space view of <tt>O_TMPFILE</tt>
     to include the <tt>O_DIRECTORY</tt> and <tt>O_RDWR</tt> bits — a
     combination that always results in an error on previous kernels.  So
     applications should always get an error if they attempt to use
     <tt>O_TMPFILE</tt> on a kernel that does not support that option.
<p>
<li> The <a href="/Articles/537422/">zswap</a> compressed swap cache has 
     been merged into the mainline.  The changes to make the memory
     allocation layer modular, <a href="/Articles/548109/">called for</a>
     at this year's Storage, Filesystem, and Memory Management Summit,
     appear not to have been made, though.
<p>
<li> The "blk-throttle" I/O bandwidth controller now properly supports
     control group hierarchies — but only if the non-default
     "<tt>sane_behavior</tt>" flag is set.
<p>
<li> The "<tt>dm-switch</tt>" device mapper target maps I/O requests to a set of
     underlying devices.  It is intended for situations where the mapping
     is more complicated than can be expressed with a simple target like
     "stripe";  see <a
     href="/Articles/558947/">Documentation/device-mapper/switch.txt</a>
     for more information.
<p>
<li> New hardware support includes:
     <p>
     <ul>

     <li> <b>Systems and processors</b>:
     	  ARM System I/O memory management units (hopefully pointing to an
     	  era where ARM processors ship with a standard IOMMU) and
	  Broadcom BCM3368 Cable Modem SoCs.
     <p>
     <li> <b>InfiniBand</b>:
     	  Mellanox Connect-IB PCI Express host channel adapters.
     <p>
     <li> <b>Miscellaneous</b>:
     	  Intel's "Rapid Start Technology" suspend-to-disk mechanism and
  	  Intel x86 package thermal sensors (see <a
     	  href="/Articles/558945/">Documentation/thermal/x86_pkg_temperature_thermal</a>
     	  for more information).
     <p>
     <li> <b>Video4Linux</b>:
     	  OKI Semiconductor ML86V7667 video decoders,
	  Texas Instruments THS8200 video encoders, and
	  Fushicai USBTV007-based video capture devices.
     <p>
     <li> <b>Watchdog</b>:
     	  Broadcom BCM2835 hardware watchdogs and
	  MEN A21 VME CPU carrier board watchdog timers.
     <p>
     <li> <b>Staging graduations</b>:
     	  TI OMAP thermal management subsystems.
     </ul>
</ul>
<p>
Changes visible to kernel developers include:
<p>
<ul>
<li> Module loading behavior has been changed slightly in that the
     load will no longer fail in the presence of unknown module
     parameters.  Instead, such parameters will be ignored after the
     issuing of a log message.  This change allows system configurations to
     continue working after a module parameter is removed or when an older
     kernel is booted.
<p>
<li> The MIPS architecture now supports building with
     <tt>-fstack-protector</tt> buffer overflow detection.
</ul>
<p>

Recent development cycles have lasted for about 70 days (though 3.10, at 63
days, was significantly shorter).  If that pattern holds for this cycle,
the 3.11 kernel can be expected around September&nbsp;9.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Releases-3.11">Releases/3.11</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/558940/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor559063"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 16, 2013 18:03 UTC (Tue)
                               by <b>yokem_55</b> (guest, #10498)
                              [<a href="/Articles/559063/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Given the timing of when this comes out and the expiration of Greg-KH's support of the 3.0.xx series, is it reasonable to infer the 3.11 will be the new long term stable release?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/559063/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor559089"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 16, 2013 19:48 UTC (Tue)
                               by <b>smoogen</b> (subscriber, #97)
                              [<a href="/Articles/559089/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I would say not until or unless Greg says so. He might decide that 3.9.x was his next or 3.10 or 3.12<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/559089/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor559098"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 16, 2013 20:10 UTC (Tue)
                               by <b>djc</b> (subscriber, #56880)
                              [<a href="/Articles/559098/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Probably not 3.9:<br>
<p>
<a href="https://lwn.net/Articles/558874/">https://lwn.net/Articles/558874/</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/559098/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor559500"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 18, 2013 15:31 UTC (Thu)
                               by <b>mgross</b> (guest, #38112)
                              [<a href="/Articles/559500/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I hope its 3.10.  If it ends up being 3.11 it will be very hard to move my product trees to 3.11 and harden the code before the end of the year.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/559500/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor559070"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 16, 2013 18:44 UTC (Tue)
                               by <b>geofft</b> (subscriber, #59789)
                              [<a href="/Articles/559070/">Link</a>] (18 responses)
      </p>
      
      </div>
      </summary>
      I missed the definition of O_TMPFILE. The best explanation seems to be the <a href="https://lwn.net/Articles/557314/">previous LWN article</a>:

<blockquote>
The new O_TMPFILE option to the open() and openat() system calls allows filesystems to optimize the creation of temporary files — files which need not be visible in the filesystem. When O_TMPFILE is present, the provided pathname is only used to locate the containing directory (and thus the filesystem where the temporary file should be). So, among other things, programs using O_TMPFILE should have fewer concerns about vulnerabilities resulting from symbolic link attacks.
</blockquote>

Pretty useful.
      
          <div class="CommentReplyButton">
            <form action="/Articles/559070/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor559144"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 17, 2013 3:10 UTC (Wed)
                               by <b>proski</b> (subscriber, #104)
                              [<a href="/Articles/559144/">Link</a>] (17 responses)
      </p>
      
      </div>
      </summary>
      I hope the files would still be visible in the filesystem.  Otherwise we would get DOS-style "hidden" and "system" files.
      
          <div class="CommentReplyButton">
            <form action="/Articles/559144/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor559146"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 17, 2013 3:42 UTC (Wed)
                               by <b>geofft</b> (subscriber, #59789)
                              [<a href="/Articles/559146/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
This isn't DOS-style at all. If anything, this is UNIX-style hidden files. The semantics are exactly the same as if you picked a unique name, opened the file, and then deleted the file -- something you can do in UNIX, but not, traditionally, on DOS. (Windows NT attempts to support this, but doesn't do so well.) UNIX leaves files on disk until the last reference is gone, whether that reference is a name on disk or an open file handle.<br>
<p>
The additional feature here is that there's no effort spent picking a unique name, just to stop using that name.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/559146/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor559147"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 17, 2013 4:52 UTC (Wed)
                               by <b>viro</b> (subscriber, #7872)
                              [<a href="/Articles/559147/">Link</a>] (15 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
No.  These files are created opened, without any links.  So as soon as they are closed, they get deleted - just as a file you'd opened and unlinked.  tmpfile() == fdopen(open("/tmp", O_TMPFILE | O_EXCL | O_RDWR, 0600), "rw");<br>
_Without_ O_EXCL you are able to create a link to them later with something like linkat(AT_FDCWD, "/proc/self/fd/42", AT_FDCWD, pathname, AT_SYMLINK_FOLLOW) (if 42 is a descriptor of normal opened-and-unlinked file, you'd get -ENOENT from that, and so you would with O_TMPFILE|O_EXCL opened descriptors).<br>
<p>
So there are two uses - one is race-free temp files (deleted when closed, never reachable from any directory, not subject to symlink attacks, not requiring to come up with unique names, etc. - basically, tmpfile(3) done right) and another is "create an initially unreachable file, write whatever you want into it, fchmod()/fchown()/fsetxattr() it as you wish, then atomically link it in, already fully set up".<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/559147/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor559153"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 17, 2013 6:15 UTC (Wed)
                               by <b>epa</b> (subscriber, #39769)
                              [<a href="/Articles/559153/">Link</a>] (14 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
In fact, that sounds like a better way to write files in general.  No more pesky partially-written files if something goes wrong; instead open with O_TMPFILE and atomically link it with a certain name once you're finished.<br>
<p>
The piece that's missing is an atomic link-and-unlink operation where you link a file into a directory with a given name, at the same time unlinking any file that was previously there with that name (or even renaming the existing file atomically).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/559153/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor559154"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 17, 2013 6:16 UTC (Wed)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/559154/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Also, an ability to create several files at once atomically would be appreciated.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/559154/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor559161"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 17, 2013 9:27 UTC (Wed)
                               by <b>Karellen</b> (subscriber, #67644)
                              [<a href="/Articles/559161/">Link</a>] (12 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
"that sounds like a better way to write files in general. No more pesky partially-written files if something goes wrong;"<br>
<p>
You can do that already by creating a file with the "wrong" name (e.g. "config.cfg.new") and calling rename(2) when you're finished. e.g.<br>
<p>
  rename("config.cfg.new", "config.cfg");<br>
<p>
"instead open with O_TMPFILE and atomically link it with a certain name once you're finished."<br>
<p>
Unfortunately, there currently is no way to create a new link to a file for which you only have a file handle.<br>
<p>
There are some cases in which it wouldn't make sense, such as trying to link a socket fd into a filesystem, or creating a link in a mountpoint where the file does not reside, but a hypothetical fdlink() could return EXDEV as per rename() in that case. In any case, no-one's implemented it yet.<br>
<p>
"The piece that's missing is an atomic link-and-unlink operation where you link a file into a directory with a given name, at the same time unlinking any file that was previously there with that name"<br>
<p>
rename(2) already does this.<br>
<p>
"(or even renaming the existing file atomically)."<br>
<p>
You can do this with link(2), by e.g.<br>
<p>
  link("config.cfg", "config.cfg.old");<br>
  rename("config.cfg.new", "config.cfg");<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/559161/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor559166"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 17, 2013 10:12 UTC (Wed)
                               by <b>epa</b> (subscriber, #39769)
                              [<a href="/Articles/559166/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <blockquote>Unfortunately, there currently is no way to create a new link to a file for which you only have a file handle.</blockquote>
I thought the <code>linkat</code> trick described by Al Viro in the grandparent comment would achieve that.
<p>
I believe that <code>rename</code> is not fully atomic.  As the manual page says, "However, when overwriting there will probably be a window in which both oldpath and newpath refer to the file being renamed.".  It's also not atomic over NFS (though enhancements to the NFS protocol may be out of scope for Linux kernel discussions).
<p>
However, it is atomic in the looser sense that the filename at any moment links to either the old file or the new one.  That may be good enough for many applications.
      
          <div class="CommentReplyButton">
            <form action="/Articles/559166/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor559168"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 17, 2013 10:40 UTC (Wed)
                               by <b>Karellen</b> (subscriber, #67644)
                              [<a href="/Articles/559168/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
"I thought the linkat trick described by Al Viro in the grandparent comment would achieve that."<br>
<p>
Doh! That'll teach me to skim some messages.<br>
<p>
Wow. That's incredibly neat. Hadn't thought of/seen that before. Thanks.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/559168/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor559224"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 17, 2013 17:22 UTC (Wed)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/559224/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
If the file doesn't currently have a filename, then there is no window where there are multiple paths to the file (not that having multiple paths to a file should be any problem, that's a 'normal' case on a Unix filesystem)<br>
<p>
as long as the target path always exists, and always points at either the old or the new, you should be in good shape.<br>
<p>
<p>
now, to be crash safe, you need to fsync the file before doing the rename, and you need to not be using ext3 which has such horrid fsync behavior.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/559224/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor559169"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 17, 2013 10:43 UTC (Wed)
                               by <b>mjg59</b> (subscriber, #23239)
                              [<a href="/Articles/559169/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
You've missed the bit where you have to fsync() the file because POSIX says the metadata can be updated before the data hits the disk and you can end up with an empty file, except you shouldn't do that because ext3 will then write out the entire journal and you'll block for several seconds.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/559169/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor559343"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 17, 2013 23:35 UTC (Wed)
                               by <b>Karellen</b> (subscriber, #67644)
                              [<a href="/Articles/559343/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
"You've missed the bit where you have to fsync()..."<br>
<p>
I've seen that argument before, but it's always confused me. Surely that's only wanted as protection against an unexpected system crash/failure? Except - I didn't think that POSIX made any guarantees at all in that event. I thought your OS was "allowed" to overwrite your partition tables and FS journals completely in the event of a crash and still be POSIX-compliant.<br>
<p>
(If not, how does POSIX expect to guarantee otherwise, unless POSIX compliance requires the absence of certain classes of bugs?)<br>
<p>
Looking at the rationale section of POSIX fsync[0] documentation, fsync() is allowed to be the null operation, or to not cause data to actually be written, and that fsync() correctness could be considered a QoI issue.<br>
<p>
However, the Open Group website documentation the closest thing I have to the actual POSIX spec. If there is another section somewhere dealing with the general problem of compliance in the face of bugs/power outages which is more enlightening, I would welcome a link to it, or a quote from it.<br>
<p>
(FWIW, I think that Linux writing metadata before data is a poor QoI decision, and that the filesystem devs should strive to do otherwise, no matter what POSIX allows. However, IANA Kernel/FS developer, and am not properly informed on how hard, impractical or pessimal that might be.)<br>
<p>
[0] <a href="http://pubs.opengroup.org/onlinepubs/009695399/functions/fsync.html">http://pubs.opengroup.org/onlinepubs/009695399/functions/...</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/559343/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor559356"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 18, 2013 0:25 UTC (Thu)
                               by <b>mjg59</b> (subscriber, #23239)
                              [<a href="/Articles/559356/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
If we weren't concerned about such things, ext4 wouldn't default to committing every 5 seconds. We can't guarantee that systems will remain powered or that software is perfect, and so if your expectation is that your code will always either read the new file or the old file and never see an intermediate representation then you probably want to handle the not-uncommon case of the device ceasing to function at around the same time.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/559356/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor559830"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The meaning of fsync</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 20, 2013 17:56 UTC (Sat)
                               by <b>giraffedata</b> (guest, #1954)
                              [<a href="/Articles/559830/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <blockquote>
I thought your OS was "allowed" to overwrite your partition tables and FS journals completely in the event of a crash and still be POSIX-compliant.
</blockquote>
<p>
The thing about adherence to any standard is that one specifies the very adherence with myriad conditions, most of them implied.  So POSIX doesn't say, "if the system crashes, a read doesn't have to get back the same data that was written."  Rather, the system designer says, "the system is POSIX-compliant as long as the system never crashes."  And as I said, that condition is usually not actually spoken.  There are tons of similar conditions: the superuser does not write directly to the disk; the disk drive never makes a mistake; cosmic rays don't change magnetic state; etc.
<p>
Of course, designers do whatever they can to reduce the conditions; few systems today are offered on a "if the power ever goes out, nothing in the POSIX standard applies" basis.
<p>
Fsync drives us into the awkward territory of robustness.  Robustness is a system's ability to work when it is broken.  That contradiction in terms is why any specification of fsync is bound to be fuzzy.  It's like saying, "I will pay you back by Tuesday.  If I don't, ..."

      
          <div class="CommentReplyButton">
            <form action="/Articles/559830/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor559477"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 18, 2013 14:06 UTC (Thu)
                               by <b>Tobu</b> (subscriber, #24111)
                              [<a href="/Articles/559477/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <p>The unavailability of good (O_PONIES) semantics continues to amaze me.
</p>
<p>The only option right now seems to be a combination of f(data)sync and deferred threads; but introducing threads has a nasty engineering cost.
</p>
<p>The last I've seen of these issues (on the XFS list), maintainers were willing to take a new flag (don't know if that's possible; the VFS seems misdesigned to ignore new flags, see O_TMPFILES above) or a new VFS syscall that might be progressively implemented.
</p>

      
          <div class="CommentReplyButton">
            <form action="/Articles/559477/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor559478"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 18, 2013 14:23 UTC (Thu)
                               by <b>viro</b> (subscriber, #7872)
                              [<a href="/Articles/559478/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
FWIW, it's much worse than any VFS design flaws; those we could deal with, but there's fuck-all we can do about existing userland ABI.  Which, for open(2), had been "ignore any unknown bits", all the way since the very beginning.  And yes, it *is* a sucky ABI.  Unknown values in flags, etc., should be rejected with "I don't know what are you talking about", rather than silently ignored.  Sadly, open(2) is one of the places where that principle had been violated.  What's really sad is that openat(2) did not add such validation, even though it had happened much more recently.<br>
<p>
See the talk by Michael Kerrisk re ABI suckitude a while ago - this is a prime example of such ;-/<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/559478/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor559497"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 18, 2013 15:18 UTC (Thu)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/559497/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I really wish that Linux would stop piling flags upon flags to existing syscalls. The man page for open() already looks like one of those 'interactive novells'.<br>
<p>
Just create a new syscall, say open2(), with a better-designed ABI. Old programs can still use open() and new ones can use the new syscall to get new features.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/559497/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor559554"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 18, 2013 19:58 UTC (Thu)
                               by <b>paulj</b> (subscriber, #341)
                              [<a href="/Articles/559554/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
And if a new syscall is added, at least divide the flag space up into "Don't care if not implemented" and "Mandatory, error if not implemented".<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/559554/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor559908"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 21, 2013 22:05 UTC (Sun)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/559908/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Oh, great. Because one of the things that's really *nice* about the Windows API is its profusion of Foo and FooEx and FooExEx calls.<br>
<p>
No, what you do if you really think programs will care is introduce a new open2(), wire it to a new version of open() in glibc, change the values of all the O_* constants in glibc (but *not* the kernel) to some new value range that doesn't intersect the old, and have glibc redirect all calls using any old flag values to the old open() and all new ones to open(), mapping the 'new' flag values in the userspace API to the kernel values (probably by subtracting a constant). You can also expose the old flags under new names, OBS_EXCL and the like,. That way, old apps get the old syscall, new ones get the new syscall, and new apps that really, really want the old semantics can get them.<br>
<p>
If you thought it mattered that much, and really needed to do it, that's how you'd do it. No uglifying programs with horrible open2() nonsense. (Yes, you need a new glibc version to use this, but you need a new glibc to use any new syscall *anyway*.)<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/559908/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor559132"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Was this patch series included?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 16, 2013 22:43 UTC (Tue)
                               by <b>roskegg</b> (subscriber, #105)
                              [<a href="/Articles/559132/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<a href="https://git.kernel.org/linus/75485363ce8552698bfb9970d901f755d5713cca">https://git.kernel.org/linus/75485363ce8552698bfb9970d901...</a><br>
<p>
Was this patch series to fix swap problems included in the 3.11 merge?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/559132/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor559133"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Was this patch series included?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 16, 2013 22:48 UTC (Tue)
                               by <b>corbet</b> (editor, #1)
                              [<a href="/Articles/559133/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      I'm not sure I understand the question...you gave a link to Linus's repository, so you're aware that the patch is in the mainline.  Yes, it was pulled in during the 3.11 merge window, if that's the question.
      
          <div class="CommentReplyButton">
            <form action="/Articles/559133/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor559148"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Was this patch series included?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 17, 2013 4:57 UTC (Wed)
                               by <b>roskegg</b> (subscriber, #105)
                              [<a href="/Articles/559148/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Thank you for answering the question I meant to ask.  In the early days of Linux, people weren't so gentle.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/559148/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor559214"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Was this patch series included?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 17, 2013 17:04 UTC (Wed)
                               by <b>jimparis</b> (guest, #38647)
                              [<a href="/Articles/559214/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <p>Given a git commit ID and a local up-to-date clone, you can figure
that out with:
<pre>
$ git describe --contains 75485363ce8552698bfb9970d901f755d5713cca
v3.11-rc1~99^2~392
</pre>
which tells you that the first tag containing this commit was
v3.11-rc1, so it made the window.  It used to be that you could get this information from kernel.org's <a
href="http://unix.stackexchange.com/questions/45120/given-a-git-patch-id-how-to-find-out-which-kernel-release-contains-it">"raw"
gitweb output</a>, saving the need for a local clone, but they recently switched to cgit which doesn't seem to provide that info.


      
          <div class="CommentReplyButton">
            <form action="/Articles/559214/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor559236"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Was this patch series included?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 17, 2013 17:58 UTC (Wed)
                               by <b>mathstuf</b> (subscriber, #69389)
                              [<a href="/Articles/559236/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Has X-Git-Tag been mentioned to cgit upstream?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/559236/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor559250"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Was this patch series included?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 17, 2013 18:27 UTC (Wed)
                               by <b>jimparis</b> (guest, #38647)
                              [<a href="/Articles/559250/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <p>I sent a mail to the kernel.org webmaster about a month ago, because they <a href="https://www.kernel.org/pelican.html">said</a> "If you notice that something that used to work with gitweb no longer works for you with cgit, please drop us a note", but haven't received a reply.  I haven't sent anything to cgit upstream though.
      
          <div class="CommentReplyButton">
            <form action="/Articles/559250/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor559145"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 17, 2013 3:05 UTC (Wed)
                               by <b>timrichardson</b> (subscriber, #72836)
                              [<a href="/Articles/559145/">Link</a>] (9 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Linux for Workgroups :) Although 3.1 was the first Windows for Workgroups release. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/559145/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor559155"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 17, 2013 8:00 UTC (Wed)
                               by <b>rvfh</b> (guest, #31018)
                              [<a href="/Articles/559155/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
To most of us who were using computers at that time, _the_ WfW is definitely 3.11 (<a href="http://toastytech.com/guis/win311logo.gif">http://toastytech.com/guis/win311logo.gif</a>).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/559155/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor559156"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 17, 2013 8:16 UTC (Wed)
                               by <b>dsommers</b> (subscriber, #55274)
                              [<a href="/Articles/559156/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
That's fine for me, as long as the next release isn't Linux95 ... ;-)<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/559156/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor559159"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 17, 2013 9:04 UTC (Wed)
                               by <b>dgm</b> (subscriber, #49227)
                              [<a href="/Articles/559159/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
For that you'll have to wait for 4.0, codenamed "Cairo".<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/559159/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor559203"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 17, 2013 16:18 UTC (Wed)
                               by <b>drag</b> (guest, #31333)
                              [<a href="/Articles/559203/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Coincidentally "Windows for Workgroups" was the first Windows operating system that Microsoft started using internally for development. Prior to that Windows and DOS systems were programmed using Microsoft's Unix variants. <br>
<p>
I also expect that most people here already know this, but Microsoft's first operating systems were Unix variants, not DOS.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/559203/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor559276"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 17, 2013 19:14 UTC (Wed)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/559276/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Incorrect. UNIX has never been used much in MS (even during the Xenix era).<br>
<p>
And by the time 3.11 was released, NT was almost done. And the NT group had been dogfooding their own builds for more than a year by then.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/559276/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor559334"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">First Microsoft OS</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 17, 2013 22:59 UTC (Wed)
                               by <b>man_ls</b> (guest, #15091)
                              [<a href="/Articles/559334/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <blockquote type="cite">
I also expect that most people here already know this, but Microsoft's first operating systems were Unix variants, not DOS.
</blockquote>
I found a <a href="http://www.softpanorama.org/People/Torvalds/Finland_period/xenix_microsoft_shortlived_love_affair_with_unix.shtml">detailed article</a> which does not agree: apparently the first Xenix release was late in 1982, while <a href="https://en.wikipedia.org/wiki/MS-DOS">DOS</a> was released in August 1981. It is true that Microsoft had been working on Xenix since before they started with DOS, though. So it depends on how you define "first operating systems".
      
          <div class="CommentReplyButton">
            <form action="/Articles/559334/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor559451"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">First Microsoft OS</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 18, 2013 13:33 UTC (Thu)
                               by <b>anselm</b> (subscriber, #2796)
                              [<a href="/Articles/559451/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <p>
When Microsoft got started, the BASIC interpreter on many computers doubled up as the operating system since it was the (ROM-based) program that was booted when the computer was switched on and supported commands for operating-system-like tasks. Since Microsoft was behind most BASIC interpreters of late-70s/early-80s vintage computers, that would make those Microsoft's first »operating systems«.
</p>
<p>
{MS,PC}-DOS, when it was new, was basically a CP/M-80 knockoff for the 8088 CPU. It would probably have been reasonable at the time to do DOS development on CP/M, at least to the degree necessary to get a kernel running on the 8088 machine. It was possible to translate Z80 assembly language to 8088 assembly language automatically, so once you had a call-compatible CP/M-like kernel around you could probably get most of your other stuff across fairly quickly.
</p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/559451/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor560729"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 25, 2013 13:37 UTC (Thu)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/560729/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Windows 3.1 did not contain any networking code.<br>
<p>
WfW 3.11 was the first version to contain a TCP/IP stack, and the TCP/IP update disk for Windows 3.1 was released at the same time. It effectively upgraded 3.1 to 3.11.<br>
<p>
I was there - the network stack (was designed to?) break WordPerfect 6, and I remember the grief it gave us, forcing us to choose between networking or word processing. That was a major factor in our office shifting from WordPerfect to Word.<br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/560729/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor560832"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 25, 2013 20:19 UTC (Thu)
                               by <b>BenHutchings</b> (subscriber, #37955)
                              [<a href="/Articles/560832/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Windows and WfWg were two different products, both of which had 3.1 and 3.11 releases. But I think a lot of OEMs switched straight from Windows 3.1 to WfWg 3.11.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/560832/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor559482"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 18, 2013 14:30 UTC (Thu)
                               by <b>Tobu</b> (subscriber, #24111)
                              [<a href="/Articles/559482/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <blockquote>Module loading behavior has been changed slightly in that the load will no longer fail in the presence of unknown module parameters. Instead, such parameters will be ignored after the issuing of a log message. This change allows system configurations to continue working after a module parameter is removed or when an older kernel is booted.
</blockquote>

That's short-sighted; it trades easy-to-diagnose failures for hard-to-diagnose failures.  Udev rules won't be able to unambiguously require module features anymore.  Surely the fact that previously working functionality now requires a human to read a logfile would be a red flag.
      
          <div class="CommentReplyButton">
            <form action="/Articles/559482/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor559641"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 19, 2013 6:00 UTC (Fri)
                               by <b>rusty</b> (guest, #26)
                              [<a href="/Articles/559641/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
modinfo will work for documented parameters, at least.<br>
<p>
You were never supposed to remove module  parameters, but that rule has proven difficult to enforce.  This was chosen as a lesser evil, but of I'm wrong I will revert it before release.<br>
<p>
Cheers,<br>
Rusty.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/559641/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor559736"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">module changes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 19, 2013 16:37 UTC (Fri)
                               by <b>pflugstad</b> (subscriber, #224)
                              [<a href="/Articles/559736/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
A number of internet references[1] recommend disabling module (one-shot) by passing:<br>
<p>
    &lt;moduleName&gt;.blacklist=yes<br>
<p>
on the kernel command line.  I'm guessing this works because of the old behavior (fail module load due to unknown param).  So this change would break that?  Or is actual "blacklist" parameters handled differently?<br>
<p>
[1]: <a href="http://askubuntu.com/questions/110341/how-to-blacklist-kernel-modules">http://askubuntu.com/questions/110341/how-to-blacklist-ke...</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/559736/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor560607"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 25, 2013 0:46 UTC (Thu)
                               by <b>heijo</b> (guest, #88363)
                              [<a href="/Articles/560607/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
What about applications that somehow accidentally used the O_TMPFILE flag value and worked correctly because the old kernels were ignoring it?<br>
<p>
It seems to me adding any such flags breaks compatibility, and that adding a new "openat2" syscall is needed due to the preexisting mistake of not returning an error on invalid flags.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/560607/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor560834"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.11 merge window closes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 25, 2013 20:27 UTC (Thu)
                               by <b>BenHutchings</b> (subscriber, #37955)
                              [<a href="/Articles/560834/">Link</a>] 
      </p>
      
      </div>
      </summary>
      O_TMPFILE now includes multiple bits that were already defined and could not be used together, plus one new bit (__O_TMPFILE).  <em>All</em> of those bits must be set to create an unnamed temporary file.  So, new userland that uses O_TMPFILE will fail cleanly on old kernels, and old userland that sets __O_TMPFILE will run unchanged on new kernels.

      
          <div class="CommentReplyButton">
            <form action="/Articles/560834/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2013, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
