        <!DOCTYPE html>
        <html lang="en">
        <head><title>2.6.38 merge window part 2 [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/423541/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/422857/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/423541/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>2.6.38 merge window part 2</h1>
</div>
<div class="ArticleText">
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>January 19, 2011</br>
           </div>
As of the <a href="/Articles/423623/">2.6.38-rc1 release</a>, some 7616
non-merge changesets 
had been pulled into the mainline kernel.  A number of significant changes
have been merged since <a href="/Articles/422420/">last week's summary</a>;
the most interesting changes visible to users are:
<p>
<ul>

<li> The <a href="/Articles/423584/">transparent huge pages</a> feature has 
     been merged.  THP attempts to maximize the use of huge pages in the
     system (boosting performance) without requiring application changes or
     administrator overhead.
<p>
<li> A new tool called <tt>turbostat</tt> has been added; it can be used to
     obtain various types of performance statistics from Intel processors.
     Also added is <tt>x86_energy_perf_policy</tt>, which can be used to
     tweak the performance/power usage tradeoff on Intel CPUs.
<p>
<li> The taskstats API has been changed to use different alignments for
     returned values; this may break applications which were dependent on
     the old arrangement.
<p><blockquote class="ad">
<b><tt>$ sudo subscribe today</tt></b>
<p>
Subscribe today and elevate your LWN privileges. You’ll have
access to all of LWN’s high-quality articles as soon as they’re
published, and help support LWN in the process.  <a href="https://lwn.net/Promo/nst-sudo/claim">Act now</a> and you can start with a free trial subscription.
</blockquote>
<p>
<li> The kernel can now synchronize its internal time to an external
     pulse-per-second (PPS) signal with a high degree of accuracy.  The kernel
     has also gained the ability to generate (and accept) PPS signals on a
     parallel port, assuming one can still find a computer with such a port.
<p>
<li> The x86 architecture can now boot XZ-compressed kernels.
<p>
<li> Basic support for multitouch panels has been added to the human input
     devices (HID) layer.
<p>
<li> The kernel now has support for the RFC4106 AES-GCM cryptographic
     algorithm.
<p>
<li> The <tt>fallocate()</tt> system call can now be used to <a
     href="/Articles/415889/">punch holes</a> in the middle of files.
     Currently this feature is supported by XFS and OCFS2.
<p>
<li> The XFS filesystem supports the <tt>FITRIM</tt> <tt>ioctl()</tt>,
     allowing discard operations to be initiated from user space.
     "<q>This is not intended to be run during normal workloads, as the
     freepsace btree walks can cause large performance degradation.</q>"
<p>
<li> The LIO SCSI target core has been merged.
<p>
<li> The block I/O bandwidth controller can now be used with hierarchical
     control groups.
<p>
<li> The block layer has a new <a href="/Articles/423619/">"events
     handling" mechanism</a>.  What that
     means is that detection of device events (the insertion of an optical
     disc, for example) can be done in the drivers, eliminating the need to
     poll devices from user space.
<p>
<li> The device mapper dm-crypt target has a new "multikey" mode whereby
     different blocks can be encrypted with different keys.  The crypt
     target is also now able to access encrypted partitions created with
     the out-of-tree loop-AES package.
<p>
<li> The device mapper has gained the ability to manage RAID 4/5/6 volumes
     using the MD RAID drivers.
<p>
<li> The <tt>clone()</tt> system call no longer honors the long-deprecated
     <tt>CLONE_STOPPED</tt> flag.
<p>
<li> The btrfs filesystem has gained support for read-only snapshots and
     LZO compression.

<p>
<li> New drivers:
     <p>
     <ul>
     <li> <b>Systems and processors</b>:
     	  ALPHAPROJECT AP-SH4A-3A and AP-SH4AD-0A reference boards,
	  Acme Systems srl FOX G20 boards,
	  GeoSIG GS_IA18_S boards,
	  and Atheros AR71XX/AR724X/AR931X SoCs.

     <p>
     <li> <b>Audio</b>: HP t5325 audio devices,
     	  Realtek alc562x codecs,
	  Wolfson Micro WM8770 and WM8995 codecs,
	  Wolfson Micro WM8958 multi-band compressors, and
	  Wolfson Micro WM8737 analog-to-digital converters.

     <p>
     <li> <b>Input</b>: Austria Microsystem AS5011 joysticks.
     <p>

     <li> <b>Miscellaneous</b>: 
          NXP Semiconductors PN544 near-field communication chips,
	  Oki Semiconductor ML7213 IOH GPIO controllers,
	  Freescale MC13892 PMIC regulators,
	  Freescale MCF548x watchdog timers,
	  TI TPS6524X Power regulators,
	  AMD/ATI SP5100 TCO timer/watchdog chipsets,
	  Atheros AR71XX/AR724X/AR913X hardware watchdogs,
	  nVidia TCO timer/watchdog devices,
	  Intel EG20T platform controller hubs, and
	  Maxim MAX17042/8997/8966 fuel gauges.
     </ul>

</ul>
<p>
Changes visible to kernel developers include:
<p>
<ul>

<li> <tt>ktest.pl</tt>, a script which can automate the process of building,
     testing, and bisecting kernels, has been added to the <tt>tools</tt>
     directory.
<p>
<li> The "<tt>%pK</tt>" format specifier can be used to print the value of
     potentially sensitive kernel pointers, especially in places like
     <tt>/proc</tt> files.  The behavior of this specifier depends on the
     value of <tt>/proc/sys/kernel/kptr_restrict</tt>; a value of zero
     means that kernel pointers will be printed as usual, one causes
     pointers to be printed as zero for users without <tt>CAP_SYSLOG</tt>,
     and two hides the pointers for all users.
<p>
<li> <tt>cdev_index()</tt> has been removed; since there are no in-kernel
     users, nobody is likely to notice.
<p>
<li> The new function <tt>kref_test_and_get()</tt> will take a reference
     only if the current reference count is not zero.
<p>
<li> Some new dentry operations have been added to support automounters
     within the VFS.
<p>
<li> The <tt>fallocate()</tt> filesystem callback has been moved from
     <tt>struct inode_operations</tt> to <tt>struct file_operations</tt>. 

</ul>
<p>
With the 2.6.38 feature set complete, the process of stabilizing all of
this new code can continue; expect a final 2.6.38 release sometime in late
March.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Releases-2.6.38">Releases/2.6.38</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/423541/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor423879"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">2.6.38 merge window part 2</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 20, 2011 11:56 UTC (Thu)
                               by <b>broonie</b> (subscriber, #7078)
                              [<a href="/Articles/423879/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The WM8958 is an entire smartphone CODEC which happens to include multi-band compressor support among its features rather than just a multi-band compressor.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/423879/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor424103"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">dm-crypt target has a new &quot;multikey&quot;</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 21, 2011 21:32 UTC (Fri)
                               by <b>jeremiah</b> (subscriber, #1221)
                              [<a href="/Articles/424103/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      Well this look like fun. We can finally achieve a true "turn both keys at the same time" kind of system. I for one am looking forward to having one more key fob to lose and thus rendering a system unusable.
      
          <div class="CommentReplyButton">
            <form action="/Articles/424103/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor424548"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">dm-crypt target has a new &quot;multikey&quot;</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 25, 2011 12:40 UTC (Tue)
                               by <b>asalor</b> (subscriber, #39266)
                              [<a href="/Articles/424548/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
This is just for supporting compatible mapping scheme for loopaes devices, I hope nobody will use it for anything else:-)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/424548/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor424987"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">xz support for squashfs merged</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 27, 2011 4:01 UTC (Thu)
                               by <b>brunowolff</b> (guest, #71160)
                              [<a href="/Articles/424987/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I didn't see xz support for squashfs noted. This is resulting in pretty significant savings (19% on Desktop spin, 9% on Games spin) for Fedora's live images for F15.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/424987/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2011, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
