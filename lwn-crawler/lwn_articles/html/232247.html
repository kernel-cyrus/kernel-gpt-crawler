        <!DOCTYPE html>
        <html lang="en">
        <head><title>Merged (and to be merged) for 2.6.22 [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/232247/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/231899/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/232247/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>Merged (and to be merged) for 2.6.22</h1>
<div class="Byline">[Posted May 2, 2007 by corbet]
               <p>
               </div>
</div>
<div class="ArticleText">
The 2.6.22 merge window has opened, with almost 2,000 changesets merged as
of this writing.  The merge process appears to have slowed somewhat; it may
be that the level of traffic on linux-kernel is so high (even by
linux-kernel standards) that nobody has time to deal with actual patches.
Be that as it may, user-visible changes merged so far include:

<p>
<ul>

<li> Lots of networking changes, including improvements to the forward 
     receive timeout recovery (<a
     href="http://www.ietf.org/rfc/rfc4138.txt">RFC4138</a>)
     implementation, a <a href="
     http://wil.cs.caltech.edu/pfldnet2007/paper/YeAH_TCP.pdf">YeAH-TCP
     congestion control [PDF]</a> implementation, a <a
     href="http://www.ews.uiuc.edu/~shaoliu/tcpillinois/index.html">TCP
     Illinois congestion control</a> implementation, and a new RxRPC secure
     socket layer (along with support for using RxRPC in the AFS
     filesystem). 
     Also, the old, IPv4-only connection tracking code has been removed as
     per the feature removal schedule.
<p>
<li> The cfg80211 patches - a new, netlink-based interface for configuring
     wireless interfaces - have been merged.  At the same time, the netlink
     version of the "wireless extensions" interface has been removed.
<p>
<li> The OCFS2 filesystem now has sparse file support.
<p>
<li> The <a href="http://www.linux-mtd.infradead.org/doc/ubi.html">UBI</a>
     patch, which performs flash-aware partitioning and volume management,
     has been merged.
<p>
<li> New drivers for USB webcams based on zr364xx chipsets, AT26Fxxx
     dataflash devices, CM-X270-based NAND flash memory, Freescale SOC USB
     controllers, and Marvell Libertas 802.11 adaptors (used in the OLPC
     system).

     <p>
     It's also worth noting that the <a
     href="http://ivtvdriver.org/index.php/Main_Page">IVTV video
     driver</a>, long out of the mainline, has finally been merged.
     "<q>It took three core maintainers, over four years of work, eight
     new i2c modules, eleven new V4L2 ioctls, three new DVB video ioctls, a
     Sliced VBI API, a new MPEG encoder API, an enhanced DVB video MPEG
     decoding API, major YUV/OSD contributions from Ian and John,
     web/wiki/svn/trac support from Axel Thimm, (hardware) support from
     Hauppauge, support and assistance from the v4l-dvb people and the
     many, many users of ivtv to finally make it possible to merge this
     driver into the kernel.</q>"
<p>
<li> A new "sony-laptop" layer which replaces sonypi and provides better
     Sony support.  The old "ibm_acpi" module has been renamed
     "thinkpad-acpi," and it features improved support for those laptops.
<p>
<li> The CFQ I/O scheduler has been reworked.  Taking inspiration from the
     CFS CPU scheduler, it now uses a red-black tree to sort pending
     requests by expected execution time and track them.   


</ul>

<p>
Changes visible to kernel developers include:
<p>

<ul>

<li> The <tt>eth_type_trans()</tt> function now sets the
     <tt>skb-&gt;dev</tt> field, consistent with how similar functions for
     other link types operate.  As a result, many Ethernet drivers have
     been changed to remove the (now) redundant assignment.
<p>
<li> The header fields in the <tt>sk_buff</tt> structure have been renamed
     and are no longer unions.  Networking code and drivers can now just
     use <tt>skb-&gt;transport_header</tt>,
     <tt>skb-&gt;network_header</tt>, and <tt>skb-&gt;skb_mac_header</tt>.
     There are new functions for finding specific headers within packets:
     <tt>tcp_hdr()</tt>, <tt>udp_hdr()</tt>, <tt>ipip_hdr()</tt>, and
     <tt>ipipv6_hdr()</tt>. 
<p>
<li> Also in the networking area: the packet scheduler has been reworked to
     use <tt>ktime</tt> values rather than <tt>jiffies</tt>.
</ul>
<p>

Those who are curious about what else might get in to 2.6.22 can have a
look at Andrew Morton's <a href="http://lwn.net/Articles/232432/">2.6.22
merge plans</a> document.  Interestingly, <a
href="http://lwn.net/Articles/218766/">Lguest</a>, the <a
href="http://lwn.net/Articles/225714/">signalfd</a> work, and the <a
href="http://lwn.net/Articles/229984/">SLUB allocator</a> are all planned
for merging, but all have become less certain since:
<p>
<ul>
<li> There have been some complaints that Lguest has not been sufficiently
     reviewed.  Since this development is independent and will not bother
     those who do not use it, the concerns are less likely to delay its
     inclusion.
<p>
<li> Signalfd has a new competitor in the form of the <a
     href="http://lwn.net/Articles/232685/">pollfs</a> patch.  Pollfs takes
     takes a different approach to many of the same problems and throws in
     polling for futex operations as well.  It is far from clear that
     pollfs is better (some of the early reviews have been on the
     unfavorable side), but the process of figuring out whether that is
     true could delay signalfd past the closing of the merge window.
<p>
<li> The SLUB allocator has also been subject to <a
     href="/Articles/232774/">concerns</a> that it has not been
     sufficiently tested for such a fundamental change.  Additionally,
     there seems to be a difference of goals between Andrew Morton (who
     would like to see SLUB eventually replace the current slab allocator)
     and SLUB developer Christoph Lameter, who had seen the two coexisting
     indefinitely.  Chances are these issues will get worked out and SLUB
     will go in as scheduled.
</ul>
<p>

There are a few things of interest which are not on Andrew's list.  The
reiser4 filesystem seems certain to sit out (at least) another cycle,
despite a resurgence in interest in getting it ready for inclusion.  Xen is
not mentioned, but it seems that, behind the scenes, it is being worked
on.  So Xen could actually show up before the merge window closes.  There
will be no major scheduler rework in 2.6.22; it's too soon for any of those
patches to go in.  The anti-fragmentation patches look likely to wait a
little longer; Andrew worries that they still haven't seen enough review
and benchmarking despite many iterations over a few years.  The <a
href="http://lwn.net/Articles/227937/">integrity management patches</a> are
considered to be unready and will not be merged.
<p>

Beyond that, there will be doubtless be surprises over the next week or so;
stay tuned.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Releases-2.6.22">Releases/2.6.22</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/232247/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor232888"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">cfg80211</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 3, 2007 9:30 UTC (Thu)
                               by <b>johill</b> (subscriber, #25196)
                              [<a href="/Articles/232888/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Actually, the note about cfg80211 isn't quite true; we have so far only merged the kernel components and a very slim sysfs userspace interface, the netlink part is not going into mainline yet.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/232888/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor232921"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Thinkpad-acpi?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 3, 2007 11:25 UTC (Thu)
                               by <b>pointwood</b> (guest, #2814)
                              [<a href="/Articles/232921/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      "# The old "ibm_acpi" module has been renamed "thinkpad-acpi," and it features improved support for those laptops."<br>
<p>
Is there more info about this somewhere?<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/232921/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor232936"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Thinkpad-acpi?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 3, 2007 12:30 UTC (Thu)
                               by <b>nowster</b> (subscriber, #67)
                              [<a href="/Articles/232936/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      You might want to read the archive of the ibm-acpi mailing list:
<a href="http://news.gmane.org/gmane.linux.acpi.ibm-acpi.devel">http://news.gmane.org/gmane.linux.acpi.ibm-acpi.devel</a>
      
          <div class="CommentReplyButton">
            <form action="/Articles/232936/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor233006"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Thinkpad-acpi?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 3, 2007 17:14 UTC (Thu)
                               by <b>hmh</b> (subscriber, #3838)
                              [<a href="/Articles/233006/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <p>I heavily suggest a visit to <a href="http://thinkwiki.org/">ThinkWiki</a> and the <a href="http://dir.gmane.org/gmane.linux.hardware.thinkpad">archive for the linux-thinkpad mailinglist</a>, the two major sources of information on ThinkPad Linux support.</p>
<p>Anyway, there is nothing breath-taking in thinkpad-acpi for 2.6.22, the mass of new features merge happened in 2.6.21.</p>
<p>2.6.22 thinkpad-acpi will feature a hwmon-compatible interface for the temperatures and fan control, though.  There is also a rename of the backlight device to "thinkpad_screen" and some other assorted minor stuff.</p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/233006/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor232976"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">sonypi</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 3, 2007 14:21 UTC (Thu)
                               by <b>mattdm</b> (subscriber, #18)
                              [<a href="/Articles/232976/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Clarification -- from the documentation, it doesn't look like sony-laptop in its current state is a complete replacement for sony-pi. For example, it doesn't cover the special keys and jogdial which are reported in this way.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/232976/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor233037"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Merged (and to be merged) for 2.6.22</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 3, 2007 20:19 UTC (Thu)
                               by <b>jengelh</b> (subscriber, #33263)
                              [<a href="/Articles/233037/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      I don't get the hype about netlink. It's unrealiable compared to ioctls...<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/233037/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor233220"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Merged (and to be merged) for 2.6.22</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 6, 2007 21:41 UTC (Sun)
                               by <b>zdzichu</b> (subscriber, #17118)
                              [<a href="/Articles/233220/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      Nice troll.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/233220/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor233221"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Merged (and to be merged) for 2.6.22</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 6, 2007 22:06 UTC (Sun)
                               by <b>jengelh</b> (subscriber, #33263)
                              [<a href="/Articles/233221/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Nice post. Instead of just calling me a troll you could have posted a pointer as to why netlink is preferred.<br>
<p>
But first, here is the `man 7 netlink` excerpt, which is why I asked what's with netlink:<br>
<p>
<font class="QuotedText">&gt;Netlink is not a reliable protocol. It tries its best to deliver a message to its destination(s), but may drop messages when an out-of-memory condition or other error occurs. (For reliable transfer the sender can request an acknowledgement from the receiver by setting the NLM_F_ACK flag.)</font><br>
<p>
And handling the extra ACK increases code complexity (it may get hidden in wrapper libraries like libnetlink though).<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/233221/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor234138"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Merged (and to be merged) for 2.6.22</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 13, 2007 15:18 UTC (Sun)
                               by <b>muwlgr</b> (guest, #35359)
                              [<a href="/Articles/234138/">Link</a>] 
      </p>
      
      </div>
      </summary>
      In about 10 years, Linux may easily come to communicating everything via 9P :&gt;<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/234138/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor233136"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Merged (and to be merged) for 2.6.22</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 4, 2007 18:13 UTC (Fri)
                               by <b>i3839</b> (guest, #31386)
                              [<a href="/Articles/233136/">Link</a>] 
      </p>
      
      </div>
      </summary>
      The text about SLUB isn't quite correct:<br>
<p>
It seems clear that everyone wants SLUB, the disagreement is about how fast it should replace SLAB. So the question isn't whether SLUB will be merged in the next release, but when it will enabled by default.<br>
<p>
Christoph Lameter timeline can be found at:<br>
<p>
<a href="http://lkml.org/lkml/2007/5/2/434">http://lkml.org/lkml/2007/5/2/434</a><br>
<p>
It's interesting to note that he thinks that SLUB can replace SLOB as well.<br>
<p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/233136/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2007, Eklektix, Inc.<BR>
            
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
