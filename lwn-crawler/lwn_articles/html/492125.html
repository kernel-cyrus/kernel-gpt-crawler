        <!DOCTYPE html>
        <html lang="en">
        <head><title>Toward more reliable logging [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/492125/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/492103/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/492125/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>Toward more reliable logging</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Please consider subscribing to LWN</b>
<p>
Subscriptions are the lifeblood of LWN.net.  If you appreciate this
content and would like to see more of it, your subscription will
help to ensure that LWN continues to thrive.  Please visit
<a href="/Promo/nst-nag1/subscribe">this page</a> to join up and keep LWN on
the net.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>April 13, 2012</br>
           </div>
Messages from the kernel are created by humans, usually using one of the
many variants of the <tt>printk()</tt> function.  But, increasingly, those
messages are read by machines in the form of log file parsers, automated
management systems, and so on.  The machines have, for some time, struggled
to make sense out of those human-created messages which, often as not, are
unpredictable in their organization, lacking important information, and
subject to change.  So it is not surprising that there has been ongoing
interest in adding some structure to kernel log messages; the subject was
recently raised by the audience at the Collaboration Summit <a
href="/Articles/491258/">kernel panel</a>.  
Even so, almost every attempt to improve kernel logging has failed to make
much (if any) headway.  
<p>
The same fate seemed to be in store for Lennart Poettering
and Kay Sievers when they presented their ideas at the <a
href="/Articles/464276/">2011 Kernel Summit</a>; in particular, their
concept of attaching 128-bit unique ID numbers to each message was met with
almost universal disdain.  Lennart and Kay have not given up, though.  The
latest form of their work on the kernel side of the problem can be seen in
the <a href="/Articles/490690/">structured <tt>printk()</tt> patch</a>
recently posted by Kay.
<p>
The patch does a few independent things - a cause for a bit of complaining
on the mailing list.  The first of these is to change the kernel's internal
log buffer from a stream of characters into a series of records.  Each
message is stored into the buffer with a header containing its length,
sequence number, facility number, and priority.  In the end, Kay says, the
space consumed by messages does not grow; indeed, it may shrink a bit.
<p>
The record-oriented internal format has a number of advantages.  If
messages are being created faster than they can be consumed by user space,
it is necessary to overwrite the oldest ones.  Current kernels simply write
over the character stream, with the result that truncated messages can find
their way into the log.  The new implementation drops entire messages at
once, so the stream, while no longer complete, is not corrupted.  The
sequence numbers allow any consumer to know that messages have been dropped
- and exactly how many it missed.  The record-oriented format also enables
improved handling of continuation lines at the cost of making the use of the
<tt>KERN_CONT</tt> "priority" mandatory for such lines.
<p>
The second change is to allow the addition of a facility number and a
"dictionary" containing 
additional information that, most likely, will be of interest to automated
parsers.  The dictionary contains "<tt>KEY=value</tt>" pairs, separated by
spaces; these pairs will contain, for example, device and subsystem names to
unambiguously identify the device that generated the message.  Kernel code
that wants to attach a facility number and/or dictionary to a message will
use the new function <tt>printk_emit()</tt> to do so:
<p>
<pre>
    int printk_emit(int facility, int level, const char *dict, 
			size_t dictlen, const char *fmt, ...);
</pre>
<p>
Regular <tt>printk()</tt> turns into a call to <tt>printk_emit()</tt> with
a <tt>facility</tt> of zero and a null <tt>dict</tt>.  
<p>
Creation of the dictionary string itself is left as an exercise for the
caller; it is not something one is likely to see done in most places where
<tt>printk()</tt> is called.  In fact, the only full user
of <tt>printk_emit()</tt> in 
the patch is <tt>dev_printk()</tt> which uses it to add a dictionary with
<tt>SUBSYSTEM</tt> and <tt>DEVICE</tt> fields describing the device of
interest.  If some form of this patch is merged, one can expect this usage
pattern to continue; the creation of dictionaries with ancillary
information will mostly be done with subsystem-specific print functions.
<p>
Finally, the patch changes the appearance of log messages when they reach
user space.  After <a href="/Articles/492134/">some complaints from
Linus</a>, the format has evolved to look something like this:
<p>
<pre>
    7,384,6193747;sr 1:0:0:0: Attached scsi CD-ROM sr0
     SUBSYSTEM=scsi
     DEVICE=+scsi:1:0:0:0
</pre>
<p>
The comma-separated fields at the beginning are the message priority (7, in
this case), the sequence number (384), and the system time in microseconds
since boot.  The rest of the line is the message as passed to
<tt>printk()</tt>.  If the message includes a dictionary, it appears in the
following lines; following the style set in RFC&nbsp;821, continuation
lines begin with white space.  The result, it is hoped, is an output format
that is simultaneously easy for humans to read and machines to parse.
<p>
The behavior of the <tt>/dev/kmsg</tt> device changes somewhat as well.  In
current kernels, this device is only useful for injecting messages into the
kernel log stream.  Kay's patch turns it into a device supporting
<tt>read()</tt> and <tt>poll()</tt> as well, with multiple concurrent
readers supported.  If messages are overwritten before a particular reader
is able to consume them, the next <tt>read()</tt> call will return an
<tt>EPIPE</tt> error; subsequent reads will start from the next available
message.  This device thus becomes a source of kernel log data that is easy
to work with and that reliably delivers log messages or ensures that the
recipient knows something was lost.
<p>
Modulo some quibbling over the log format, the response to the patch seems
to be mostly positive.  The biggest exception is arguably Ingo Molnar,
whose <a href="/Articles/492273/">suggestion</a> that tracepoints and perf
should be used instead does not appear to have received a lot of support.
Even Linus seems mostly happy; the absence of the
128-bit unique ID perhaps has a lot to do with that.  But, beyond that, a
more robust log 
buffer with sequence numbers has some clear advantages; Linus <a
href="/Articles/492140/">suggested</a> that, if that part were split out,
he might even consider merging it for the 3.4 release.  That
seems unlikely to happen at this point in the cycle, but it wouldn't be
surprising to see something 
come together for the 3.5 development cycle.  If that happens, Linux will
still lack a true structured logging mechanism, but it would have something
with  more structure and reliability than it has now.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Kernel_messages">Kernel messages</a></td></tr>
            <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Messages">Messages</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/492125/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor492346"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Toward more reliable logging</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 13, 2012 20:26 UTC (Fri)
                               by <b>vrfy</b> (guest, #13362)
                              [<a href="/Articles/492346/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The patches are here:<br>
  <a href="http://git.kernel.org/?p=linux/kernel/git/kay/patches.git;a=tree">http://git.kernel.org/?p=linux/kernel/git/kay/patches.git;...</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492346/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor492351"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Toward more reliable logging</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 13, 2012 21:06 UTC (Fri)
                               by <b>slashdot</b> (guest, #22014)
                              [<a href="/Articles/492351/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The dictionary API seems a totally wrong design, because it has redundant information, is incredibly cumbersome to use and thus is not likely to be used by anyone.<br>
<p>
MUCH better API:<br>
printk(KERN_EMERG "%[subsys]s: %[dev]s: device caught fire", subsys_name, dev_name);<br>
<p>
Then just output the format string and arguments separately instead of doing formatting in the kernel (and of course, emulate the old interface by doing it in the kernel on demand).<br>
<p>
For info that shouldn't be in the human-readable output, add a special syntax such as %{subsys}s that doesn't output anything.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492351/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492441"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Toward more reliable logging</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 14, 2012 18:48 UTC (Sat)
                               by <b>smurf</b> (subscriber, #17840)
                              [<a href="/Articles/492441/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
This work until you happen to come across a substituted string which happens to contain a colon.<br>
Your proposal also is much more complicated, for no tangible gain AFAICS.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492441/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492475"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Toward more reliable logging</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 15, 2012 0:40 UTC (Sun)
                               by <b>slashdot</b> (guest, #22014)
                              [<a href="/Articles/492475/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
You don't parse the colons...<br>
<p>
The kernel sees "%[subsys]s" and adds the argument as the value of the "subsys" key, using the same format (or alternatively, just prints the unformatted format string, and userspace does the work).<br>
<p>
This would make the API easy to use, compared to the patch which requires horrible code like this:<br>
<p>
char* buf = kmalloc(64 + strlen(subsys_name) + strlen(dev_name));<br>
sprintf(buf, "SUBSYS=%s\nDEVICE=%s\n", subsys_name, dev_name);<br>
printk_emit(buf, strlen(buf), KERN_EMERG "%s: %s: device caught fire", subsys_name, dev_name);<br>
kfree(buf);<br>
<p>
Compare that to just:<br>
printk(KERN_EMERG "%[subsys]s: %[device]s: device caught fire", subsys_name, dev_name);<br>
<p>
It's clear that the API in the patch is totally inferior and that almost nobody will use it except dev_printk.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492475/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492526"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Toward more reliable logging</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 15, 2012 14:56 UTC (Sun)
                               by <b>abacus</b> (guest, #49001)
                              [<a href="/Articles/492526/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Does that mean that you're not familiar with kasprintf() ?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492526/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor492358"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Toward more reliable logging</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 13, 2012 22:00 UTC (Fri)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/492358/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
generating a sequence number will require a global lock around this value, and can lead to cache ping-pong between processors. I thought this type of thing was being frowned upon.<br>
<p>
text buffers can (conceptually anyway) be per-cpu and combined only when read.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492358/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492362"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Toward more reliable logging</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 13, 2012 22:12 UTC (Fri)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/492362/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
You'll need sync points to write to log buffers anyway.<br>
<p>
And if you spend significant amount of time on locking the log buffer then you probably have MUCH bigger problems.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492362/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492363"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Toward more reliable logging</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 13, 2012 22:21 UTC (Fri)
                               by <b>slashdot</b> (guest, #22014)
                              [<a href="/Articles/492363/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Well, in theory if you have synchronized TSCs you can write the TSC to a local buffer, and then merge the buffers, generating sequence numbers only for the final log.<br>
<p>
While the log merging thread does indeed need to synchronize, it doesn't add latency to the log writers, at the cost of multiplying the memory comsumption by the number of CPUs.<br>
<p>
But this is an implementation detail, and isn't likely to be worth bothering since logging is supposed to be rare.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492363/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492424"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Toward more reliable logging</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 14, 2012 15:08 UTC (Sat)
                               by <b>Ben_P</b> (guest, #74247)
                              [<a href="/Articles/492424/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Using the TSC seems like it would cause some serious issues if the id's need to increase with time.  It is pretty common for some cores to get clocked down or completely turned off in the course of normal operation. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492424/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492752"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Toward more reliable logging</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 17, 2012 5:25 UTC (Tue)
                               by <b>Jannes</b> (subscriber, #80396)
                              [<a href="/Articles/492752/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
A modern TSC keeps counting, at the same constant rate.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492752/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor493525"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Toward more reliable logging</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 20, 2012 12:37 UTC (Fri)
                               by <b>jengelh</b> (subscriber, #33263)
                              [<a href="/Articles/493525/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Which not everybody has.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/493525/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor492474"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Toward more reliable logging</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 15, 2012 0:35 UTC (Sun)
                               by <b>jzbiciak</b> (guest, #5246)
                              [<a href="/Articles/492474/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Something tells me that the amount of cacheline ping-ponging this would cause wouldn't be measurable in the least.  The context switch for the logger to receive the message ought to be at least an order of magnitude more expensive.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492474/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor492361"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 13, 2012 22:09 UTC (Fri)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/492361/">Link</a>] (59 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
When considering the format for the output, they should be paying attention to the lumberjack project, which has developers from syslog-ng, rsyslog, nxlog, RedHat representatives and others (including me) discussing how to standardize structured logs across the board.<br>
<p>
It's disappointing that Lennart and Kay are choosing not to participate in these discussions and going their own way.<br>
<p>
So far, Lumberjack seems to be standardizing on a JSON representation as the least-common-denominator format for passing structured logs around.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492361/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492372"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 13, 2012 23:33 UTC (Fri)
                               by <b>ebiederm</b> (subscriber, #35028)
                              [<a href="/Articles/492372/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
What is wrong with structured format in RFC5424?<br>
<p>
Call me dense but it looks to me like the problem of structured logging have already solved and standardized.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492372/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492379"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 14, 2012 1:08 UTC (Sat)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/492379/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
RFC5424 lets you do flat name/value pairs, but it turns out that it's extremely valuable to be able to have more structure than that. Thus the move to JSON<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492379/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492570"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2012 6:21 UTC (Mon)
                               by <b>quotemstr</b> (subscriber, #45331)
                              [<a href="/Articles/492570/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; RFC5424 lets you do flat name/value pairs, but it turns out that it's extremely valuable to be able to have more structure than that.</font><br>
<p>
Having more structure than that adds too much complexity to be worthwhile. You can approximate structure using keys.with.dots or numbers --- e.g., filename1=foo filename2=bar. Hierarchy adds far more complexity to makes indexing and browsing, very common cases, than it adds to the very rare log message with repeated units.<br>
<p>
Can you give me an example of a situation in which hierarchical logging is clearly better than key-value pairs?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492570/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492571"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2012 6:30 UTC (Mon)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/492571/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Flattening hierarchy is extremely easy. So why not do it if you want?<br>
<p>
And I don't really see how hierarchical data makes logging more complex. If you don't care about it, then simply ignore it.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492571/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor492874"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 17, 2012 16:34 UTC (Tue)
                               by <b>k8to</b> (guest, #15413)
                              [<a href="/Articles/492874/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It's really hard to describe transactions with simple keyval pairs.<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492874/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492876"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 17, 2012 16:36 UTC (Tue)
                               by <b>quotemstr</b> (subscriber, #45331)
                              [<a href="/Articles/492876/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Can you give me a concrete example?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492876/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor492466"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 14, 2012 23:27 UTC (Sat)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/492466/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
For what it's worth, Rainer Gerhards (the author of RFC5424) is a participant in both the lumberjack project, and the CEE standardization project (<a rel="nofollow" href="http://cee.mitre.org/">http://cee.mitre.org/</a> working to standardize log messages)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492466/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor492375"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 13, 2012 23:52 UTC (Fri)
                               by <b>aliguori</b> (subscriber, #30636)
                              [<a href="/Articles/492375/">Link</a>] (46 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
JSON cannot reliably represent integers.  Its a poor choice for something that will log large integers often.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492375/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492380"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 14, 2012 1:16 UTC (Sat)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/492380/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I may be missing something, but as I understand it, JSON does let you represent Integers, it doesn't force all numbers to be floating point<br>
<p>
I raised the issue of very large integers (&gt;32 bits) and the feeling is that they are rare enough that we can live with them being treated as strings.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492380/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492391"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 14, 2012 4:20 UTC (Sat)
                               by <b>nybble41</b> (subscriber, #55106)
                              [<a href="/Articles/492391/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Even if it did force all numbers to be floating-point, the range of integers which can be represented precisely in double-precision (eight-byte) IEEE floating point format is a superset of both signed and unsigned 32-bit fixed-point notation.<br>
<p>
Floating-point has a certain reputation, but much of it is undeserved, at least for plain integer math. Lua, for example, treats all numbers as double-precision floating point by default on platforms with an FPU; there is no separate integer type. You only run into problems when you exceed 52 significant bits. (Note that any fraction with a factor larger than two in the denominator requires infinite significant bits, which is obviously much more than 52. This is where most of the reputation originates. However, it doesn't affect integers.)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492391/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492410"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 14, 2012 10:58 UTC (Sat)
                               by <b>liljencrantz</b> (guest, #28458)
                              [<a href="/Articles/492410/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
JavaScript does the same.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492410/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor499319"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 30, 2012 21:38 UTC (Wed)
                               by <b>scientes</b> (guest, #83068)
                              [<a href="/Articles/499319/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;(Note that any fraction with a factor larger than two in the denominator requires infinite significant bits, which is obviously much more than 52. This is where most of the reputation originates. However, it doesn't affect integers.)</font><br>
<p>
not really. It's rather, any factor with a denominator that is not in the part of the set 2^n, (or with decimal floating point, 2^n * 5^m)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/499319/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor499343"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 31, 2012 0:19 UTC (Thu)
                               by <b>nybble41</b> (subscriber, #55106)
                              [<a href="/Articles/499343/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;&gt; (Note that any fraction with a factor larger than two in the denominator requires infinite significant bits, which is obviously much more than 52. This is where most of the reputation originates. However, it doesn't affect integers.)</font><br>
<p>
<font class="QuotedText">&gt; not really. It's rather, any factor with a denominator that is not in the part of the set 2^n, (or with decimal floating point, 2^n * 5^m)</font><br>
<p>
I was referring to the prime factors; any number of the form 2^n * 5^m with naturals n and m (!= 0) has prime factors 2 and 5. A number with a prime factor of 3 or 7, for example, would not terminate in either binary or decimal. However, your description is equivalent.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/499343/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor494936"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 27, 2012 15:42 UTC (Fri)
                               by <b>mirabilos</b> (subscriber, #84359)
                              [<a href="/Articles/494936/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
JSON definitely does not put any upper or lower boundaries on integers, so the limits of the language or parser/encoder that operate on it apply.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/494936/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor492381"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 14, 2012 1:25 UTC (Sat)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/492381/">Link</a>] (39 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Do you have a suggestion for a serialization format to use that would be better?<br>
<p>
among the selection criteria are (not in order)<br>
<p>
1. size of the resulting serialized string (XML struggles here)<br>
<p>
2. availability of libraries in all languages to deal with the serialization format.<br>
<p>
3. ability to be transported through traditional logging mechanisms (syslog for example)<br>
<p>
4. ability for existing logging tools that can deal with ad-hoc formats to be able to interact with the serialized data<br>
<p>
5. human readability of the resulting string<br>
<p>
6. ability to represent hierarchical structures.<br>
<p>
7. avoiding people saying 'why did you use X' (JSON obviously fails here as well, but it does have a fairly large mindshare)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492381/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492385"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 14, 2012 2:46 UTC (Sat)
                               by <b>slashdot</b> (guest, #22014)
                              [<a href="/Articles/492385/">Link</a>] (7 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Are hierarchical structures really needed in logging? Why?<br>
<p>
How do you plan to index and search a set of records consisting of hierarchical structures?<br>
<p>
A list of key/value pairs seems much better, and can support indexing and SQL queries trivially.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492385/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492464"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 14, 2012 23:21 UTC (Sat)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/492464/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Are hierarchical structures really needed in logging? Why?</font><br>
<p>
I was not involved with the discussions, but a few things come to mind<br>
<p>
1. the data you want to log may include structures<br>
<p>
2. you may need to log multiple data items of the same type (like a list of filesnames)<br>
<p>
you can always choose to flatten a hierarchical structure if you need to, but it's much harder to re-create the structure after you have flattened it<br>
<p>
not all storage is SQL.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492464/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492468"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 14, 2012 23:35 UTC (Sat)
                               by <b>man_ls</b> (guest, #15091)
                              [<a href="/Articles/492468/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      Nice! Now all we need is a MongoDB database inside the kernel. And it could be used for all kinds of things: device trees, file structures, even memory management come to mind.
<p>
Just joking. I think I get the least-common-denominator motivation. But isn't getting JSON into any kind of logging facility going to cause immediate "designed-by-committee" fears into kernel developers, and therefore ignore the lumberjack project?

      
          <div class="CommentReplyButton">
            <form action="/Articles/492468/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492472"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 15, 2012 0:01 UTC (Sun)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/492472/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
remember that what we are talking about is not anything consumed inside the kernel, just the format of a one-way feed to output from the kernel to userspace<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492472/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492479"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 15, 2012 1:01 UTC (Sun)
                               by <b>man_ls</b> (guest, #15091)
                              [<a href="/Articles/492479/">Link</a>] 
      </p>
      
      </div>
      </summary>
      OK, that makes sense. JSON is trivial to generate.
      
          <div class="CommentReplyButton">
            <form action="/Articles/492479/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor492875"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 17, 2012 16:38 UTC (Tue)
                               by <b>k8to</b> (guest, #15413)
                              [<a href="/Articles/492875/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
To be fair, a list of say filenames isn't hard to do in kv pairs.<br>
<p>
filename:foo filename:bar filename:baz<br>
<p>
Sure, that's more trouble to parse than assuming you can't have repeats, but it's not much work.<br>
<p>
However, it starts getting tedious if you need to say something like:<br>
<p>
severity:fatal message="corruption in filesystem regarding following items" filename:foo inode:3 filename:bar inode:6 filename:baz inode:8<br>
<p>
At this point you really want more structure, or else the consuming end has to intuit to group things.  <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492875/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor493673"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 21, 2012 8:19 UTC (Sat)
                               by <b>neilbrown</b> (subscriber, #359)
                              [<a href="/Articles/493673/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<p>
.... filename-1:foo inode-1:3 filename-2:bar inode-2:6 filename-3:bar inode-3:8<br>
<p>
Explicit structure embedded in the names of name:value pairs.<br>
<p>
Yes, it's ugly.  But it's simple and if most cases don't need any real structure, then the ugliness will hardly be noticed.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/493673/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor492485"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 15, 2012 1:56 UTC (Sun)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/492485/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
to some extent, hierarchical structures can be simulated by item names<br>
<p>
for example, a firewall log message needs to have the following items in it<br>
<p>
the device generating the log message<br>
the device that is the source of the traffic<br>
the device that is the destination of the traffic<br>
<p>
each of these device definitions may include more than one piece of information (hostname, FQDN, IP address, port number)<br>
<p>
you could have<br>
<p>
loghost: hostname, logip: 1.1.1.1, sourcehost: hostname2, sourceIP: 2.2.2.2, sourceport: 1234, destinationhost: hostname3, destinationIP: 3.3.3.3, destinationport:1234<br>
<p>
or you could have<br>
logsource { name: hostname, ip: 1.1.1.1}, source { name: hostname2, ip: 2.2.2.2, port: 1234}, destination { name: hostname3, ip: 3.3.3.3, port 1234 }<br>
<p>
personally, I find the second arrangement better and less likely to get confused by people adding extra information to a particular component<br>
<p>
as another example, think of all the contexts that a userid can appear in, including what user the applications writing the log message is running as, should all these different possible contexts use a different tag? or are we better off using the same tag everywhere and using the hierarchy information to determine the context?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492485/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor492384"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 14, 2012 3:20 UTC (Sat)
                               by <b>drag</b> (guest, #31333)
                              [<a href="/Articles/492384/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
This may come off as a bit abusive and probably is full of fail but what I'd like to see in a log format is null deliminated strings. <br>
<p>
<p>
And it would look something like this:<br>
log_version\0 machine_ident\0 machine_fqdn\0 timestamp\0 service_ident\0 service_string\0 process_id\0 severity\0 data\0 checksum\0\0\n<br>
<p>
<p>
<p>
something simple like that. The *ident fields are UUID and are completely arbitrary. <br>
<p>
The 'machine_ident' would be generated when the syslog-like daemon first starts up like ssh keys are. When the logging daemon connects to a service or starts a new log file it just pukes out a log entry with various useful system identification strings that can be easily picked up by any logging parsing software. Like how browsers do when they connect to a web server. That way it makes it easy to identify the machine by UUID. As long as you can read the first log entry in any file or any time it connects to a network logging daemon then you can figure out what it is pretty easily.<br>
<p>
Timestamps are just x.xxxx seconds from unix epoch, GMT. Can have a fine grain of a time stamp as the application warrants and the system can deliver on.<br>
<p>
Severity level is similar to how Debian does their apt-pinning. Just a number, like 0-1000. And that number maps to different severity levels:<br>
0-250 - debug<br>
250-500 - info<br>
500-750 - warning<br>
750-1000 - error<br>
<p>
That way application developers have a way of saying "well this error is more of a error then that error", which seems important.<br>
<p>
The actual data field can be whatever you want. Any data as long as no nulls. Probably more structuring can be layered on later, but this makes it easy to incorporate legacy logging data into this format. Just take the string as delivered by the application/server, stuff the entire thing into &lt;data&gt; and wrap it in those other fields as well as can be done. &lt;data&gt; being JSON would be fine by me and the fact that it's JSON or whatever would be recorded as part of the version string.<br>
<p>
I know something like that would make my job a lot easier. :)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492384/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492465"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 14, 2012 23:23 UTC (Sat)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/492465/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The biggest problem with your approach is that it requires throwing away all existing logging and log processing tools, and as you aren't going to get everyone to buy into the new scheme at once and modify every program in the world to use your new scheme the probable result is that nothing will happen instead.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492465/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492495"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 15, 2012 3:38 UTC (Sun)
                               by <b>drag</b> (guest, #31333)
                              [<a href="/Articles/492495/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I guess so. <br>
<p>
I figured it would be the logging daemon's job to put in all the fields as well as it can, but shovel in the log from the application into the 'data' section.  If it leaves the 'severity' section empty or whatever then that would be legal. It's a 'best effort' type thing rather then requiring strict compliance. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492495/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492498"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 15, 2012 4:03 UTC (Sun)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/492498/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The idea here (lumberjack and CEE) is to support and encourage the applications (including the kernel) to create structured logs so that the data that you are referring to as the 'data' section is easier (and thus more reliable) to deal with.<br>
<p>
the first step is to have the normal message just stuck in the 'data' section, and the lumberlog library ( <a rel="nofollow" href="http://algernon.github.com/libumberlog/umberlog.html">http://algernon.github.com/libumberlog/umberlog.html</a> ) is designed to do just that. It can be LD_PRELOADed for any application and it modifies the syslog() call to log a structured log (JSON structure with added metadata). It then allows the application programmer to change syslog() calls to ul_syslog() calls and add additional name-value pairs.<br>
<p>
the next step is to create a more complete logging API that allows the application programmer to more easily create structured logs. Debate over how that could/should work is ongoing.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492498/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor492476"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 15, 2012 0:45 UTC (Sun)
                               by <b>jzbiciak</b> (guest, #5246)
                              [<a href="/Articles/492476/">Link</a>] (18 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
YAML, perhaps?  I guess YAML is a superset of JSON anyway these days.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492476/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492480"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 15, 2012 1:08 UTC (Sun)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/492480/">Link</a>] (16 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
what is it about YAML that would make it preferable? What can you encode in YAML that you can't do in JSON? (remember we are talking about logs here, not arbitrary documents) What can you encode in YAML better (more clearly, more simply) than you can in JSON?<br>
<p>
doing a quick google search for YAML vs JSON I am not seeing anything that strikes me as being drastically better about JAML, and the fact that the JSON spec is considerably simpler seems to be an advantage.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492480/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492482"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 15, 2012 1:27 UTC (Sun)
                               by <b>jzbiciak</b> (guest, #5246)
                              [<a href="/Articles/492482/">Link</a>] (15 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Nothing in particular.  It was the only other format that seemed to fit all your selection criteria.  I wasn't too surprised to find out that YAML 1.2 is a strict superset of JSON.  JSON probably wins on simplicity.<br>
<p>
Some additional things in YAML that might be helpful that I don't think are in JSON (but could be mistaken):  Explicit typecasting, and the ability to have internal cross-references.<br>
<p>
I'm not entirely certain internal cross-references would be useful, although maybe they're useful to refer back to a component of an earlier log message.  (Flip side:  There's value in redundancy in logs, especially when records go missing.)  Explicit typecasting might be useful if there's ever a case where a given value looks like a number but really ought to be treated as a string.<br>
<p>
All that said, those are dubious benefits, and JSON probably wins on simplicity.  I only mentioned YAML because it was the only other format I could think of offhand that survives the selection criteria fairly well.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492482/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492484"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 15, 2012 1:46 UTC (Sun)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/492484/">Link</a>] (14 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Given that filtering criteria may mean that prior log entries are not available, references to them can't count on working, and I don't see much likelihood of them being useful within a single log message (a full document yes, a single log message no)<br>
<p>
My query about different serialization protocols was serious. I don't pretend that I know all of them and the advantages of each, so it is very possible that there is something out there that's better.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492484/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492489"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 15, 2012 2:41 UTC (Sun)
                               by <b>jzbiciak</b> (guest, #5246)
                              [<a href="/Articles/492489/">Link</a>] (13 responses)
      </p>
      
      </div>
      </summary>
      <P>The fact that very few standard formats survive the selection criteria illustrates the challenge, too.  Good luck!
</P><P>
I mentioned YAML because I've found it very lightweight for the things I've used it for, and it is very human-friendly.  I didn't realize <A rel="nofollow" HREF="https://en.wikipedia.org/wiki/YAML#JSON">that JSON is a proper subset of YAML</A> until I looked up some comparisons.  So, JSON wins similarly in the human-friendly department, and its simpler spec makes it easier to adopt.
</P>
<P><A rel="nofollow" HREF="https://en.wikipedia.org/wiki/Simple_Declarative_Language">Simple Declarative Language</A> looks interesting.  It appears to be a modest step up from JSON, adding explicit types to containers and the ability to add attributes to the type.  Sure, you can capture that in a JSON serialization by adding explicit fields, but making it a first class aspect of the syntax has a certain economy to it.  I hadn't heard of SDL before today. It looks interesting.  Unfortunately, the list of languages that have SDL APIs seems out of line with my usual requirements of C and Perl.</P>
      
          <div class="CommentReplyButton">
            <form action="/Articles/492489/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492490"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 15, 2012 3:00 UTC (Sun)
                               by <b>jzbiciak</b> (guest, #5246)
                              [<a href="/Articles/492490/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <P>Expanding on my SDL comment...  You could easily imagine capturing many repeated aspects of a log entry in the entry type and attributes, rather than fields within the entry record itself. eg:</P>
<P>Example record from my<TT> /var/log/messages</TT>:</P>
<PRE>
Apr  8 14:23:44 elysium kernel: [9234662.980516] r8169 0000:03:00.0: eth0: link up
</PRE>
<P>One possible way to split between attributes and keys within the container:</P>
<PRE>
entry date=1333913564 host=elysium source=kernel level=info timestamp=9234662.980516 \
     { message="r8169 0000:03:00.0: eth0: link up" }</PRE>
<P>Or something...</P>
<P>Honestly, I go back and forth between the value of attributed types vs. just embedding the information as fields within the structure.  What color do I want my bikeshed today?</P>
      
          <div class="CommentReplyButton">
            <form action="/Articles/492490/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492503"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 15, 2012 6:33 UTC (Sun)
                               by <b>lindi</b> (subscriber, #53135)
                              [<a href="/Articles/492503/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
You'd also want to have a way to extract that "eth0" in a programmatic way.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492503/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor493610"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 20, 2012 21:18 UTC (Fri)
                               by <b>giraffedata</b> (guest, #1954)
                              [<a href="/Articles/493610/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      You'd also want to extract the "0000:03:00.0", "r8169" (device driver name), and possibly "up".
<p>
And the date, host, and source values aren't from the kernel, so they wouldn't be in there.

      
          <div class="CommentReplyButton">
            <form action="/Articles/493610/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor493614"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 20, 2012 21:29 UTC (Fri)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/493614/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
the information may not be from the kernel, but by the time anything other than the log transport sees the data, it will need to be there (and arguably the timestamp should be put there by the kernel)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/493614/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor493629"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 20, 2012 22:28 UTC (Fri)
                               by <b>giraffedata</b> (guest, #1954)
                              [<a href="/Articles/493629/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      Aren't we talking about in what form the kernel should produce log messages?

      
          <div class="CommentReplyButton">
            <form action="/Articles/493629/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor493631"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 20, 2012 22:30 UTC (Fri)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/493631/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I had wandered a bit from that, but yes, that's where we started.<br>
<p>
And the kernel should put the timestamp on the messages it generates, you don't know how long it's going to be before some other process picks them up and could add a timestamp to them.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/493631/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor492492"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 15, 2012 3:03 UTC (Sun)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/492492/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I agree abut SDL, but whatever is used needs to be supported in every language (or something that's easy enough to manually create)<br>
<p>
Keep in mind that JSON is just the least common denominator, the 'everything must support this' option. It is expected that most logging libraries, and the logging transports (i.e. syslog daemons) will support additional options. At the moment the other options expected for later are<br>
<p>
BSON (more efficient transport with type information)<br>
<p>
XML (because someone will want it, it's hard to do structured stuff and ignore XML ;-)<br>
<p>
but others can be added as/if needed.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492492/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor493466"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 20, 2012 7:54 UTC (Fri)
                               by <b>man_ls</b> (guest, #15091)
                              [<a href="/Articles/493466/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      What about <a href="http://en.wikipedia.org/wiki/Protocol_Buffers">protocol buffers</a>? Have they fallen out of grace already?
      
          <div class="CommentReplyButton">
            <form action="/Articles/493466/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor493547"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 20, 2012 15:11 UTC (Fri)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/493547/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
protocol buffers are good for some things, but they serialize into a binary format, which is not compatible with existing logging tools.<br>
<p>
Also (as I understand them) protocol buffers require absolute agreement between the sender and the receiver on the data structures to be passed. This is hard to do for logging libraries that will be written in many different languages, multiple log transport tools, and the vast array of log analysis/storage tools.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/493547/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor493574"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 20, 2012 17:23 UTC (Fri)
                               by <b>smurf</b> (subscriber, #17840)
                              [<a href="/Articles/493574/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
No, they're backwards compatible<br>
From the documentation:<br>
<p>
<font class="QuotedText">&gt;&gt; You can add new fields to your message formats without </font><br>
<font class="QuotedText">&gt;&gt; breaking backwards-compatibility; old binaries simply </font><br>
<font class="QuotedText">&gt;&gt; ignore the new field when parsing</font><br>
<p>
<a href="https://developers.google.com/protocol-buffers/docs/overview">https://developers.google.com/protocol-buffers/docs/overview</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/493574/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor493578"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 20, 2012 17:31 UTC (Fri)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/493578/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Ok, but in any case, they won't work with the existing (text based) logging tools.<br>
<p>
Yes, any change to the message being logged 'breaks' existing tools that depend on exact matches of known log messages, but as long as the new log format is still text based, all the existing tools can be tweaked (new regex rules) and handle the log messages.<br>
<p>
If you switch to something other than text streams for your messages, you will require that all logging tools be re-written to handle your new format. Since this is unlikly to happen, there is a very large emphisis in being compatible with the existing tools.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/493578/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor493608"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 20, 2012 21:10 UTC (Fri)
                               by <b>man_ls</b> (guest, #15091)
                              [<a href="/Articles/493608/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      Protocol buffers is a binary protocol, like BSON. If binary formats are being considered (as I deduced from your message) then protocol buffers should be considered. (I myself think that BSON has a much brighter future, but I was just wondering.)
      
          <div class="CommentReplyButton">
            <form action="/Articles/493608/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor493615"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 20, 2012 21:37 UTC (Fri)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/493615/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
nxlog already has a binary transport, but it can only be used from nxlog to nxlog. There is though of having a binary transport, but that's a bit out still as the discussion is still focusing on the right way to generate the data and what tags are going to be used.<br>
<p>
CEE is supposed to be releasing a 1.0beta spec, and the initial fields planned are documented at <a rel="nofollow" href="https://fedorahosted.org/lumberjack/wiki/FieldList#UnifiedFieldList">https://fedorahosted.org/lumberjack/wiki/FieldList#Unifie...</a><br>
<p>
for the API, the initial focus is on trying to get a good C API that can replace the syslog() call. RedHat has a largish project that they've been calling ELAPI (Enhanced Logging API <a rel="nofollow" href="https://fedorahosted.org/ELAPI/wiki/WikiPage/Architecture">https://fedorahosted.org/ELAPI/wiki/WikiPage/Architecture</a> ) that they are now realizing largely overlaps with the capabilities of the modern syslog daemons, so they are going though the code they wrote for that and ripping out lots of it to only keep what's needed. There is some question of if the result is still in the 'sledgehammer to swat a fly' category and so you have lumberlog working from the other direction<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/493615/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor492491"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">NOT YAML</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 15, 2012 2:54 UTC (Sun)
                               by <b>dskoll</b> (subscriber, #1630)
                              [<a href="/Articles/492491/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <p>No, not YAML!  YAML used to be a nice simple language, but the spec has become bloated and byzantine.  It includes features that are completely inappropriate for structured logging like the ability to represent self-referential data structures.

<p>I recently went through a large amount of pain converting our (commercial) product to use JSON for serialization rather than YAML just because YAML was becoming such a PITA.

<p>Compare the <a href="http://json.org/">one-page JSON spec</a> with the <a href="http://www.yaml.org/spec/1.2/spec.html">monstrous YAML 1.2 spec</a>.
      
          <div class="CommentReplyButton">
            <form action="/Articles/492491/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor492477"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 15, 2012 0:54 UTC (Sun)
                               by <b>aliguori</b> (subscriber, #30636)
                              [<a href="/Articles/492477/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I really don't have a suggestion.  The closest thing I can think of is S-Expressions or YAML.<br>
<p>
JSON is woefully under specified.  There is no guidance in the spec about how implementations should handle numerics.  It defers to EMCAScript for any specification ambiguity and EMCAScript is pretty clear that all numbers are represented as IEEE double precision floating point numbers.<br>
<p>
AFAICT, a conforming implementation must truncate any number &gt; 2^52 or at least treat two numbers as equivalent if they truncate to the same number.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492477/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492481"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 15, 2012 1:36 UTC (Sun)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/492481/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
what is the numeric range in YAML?<br>
<p>
2^52 is a rather large number, how likely are you to need larger numbers in log messages? Are those cases distinct enough that you could just use the 'string' type for the number?<br>
<p>
S-Expressions seem even more under specified than JSON from what I see from a quick google search<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492481/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492488"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 15, 2012 2:10 UTC (Sun)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/492488/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
2^64-1 is quite likely to appear at least in some log entries.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492488/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor492493"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 15, 2012 3:02 UTC (Sun)
                               by <b>dskoll</b> (subscriber, #1630)
                              [<a href="/Articles/492493/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <p>According to the JSON specification, the following is a perfectly valid number:

<p><tt><b>18446744073709551615</b></tt>  (AKA 2<sup>64</sup>-1)

<p>It may be that some (most?) JSON libraries can't handle such a large number correctly, but it's valid according to the JSON grammar.

      
          <div class="CommentReplyButton">
            <form action="/Articles/492493/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor494940"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 27, 2012 15:45 UTC (Fri)
                               by <b>mirabilos</b> (subscriber, #84359)
                              [<a href="/Articles/494940/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Only floats. Integers are not limited.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/494940/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor492633"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2012 16:48 UTC (Mon)
                               by <b>jhoblitt</b> (subscriber, #77733)
                              [<a href="/Articles/492633/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The use of JSON (and/or YAML and/or a serialization format that handles nested data types) is absolutely the right approach as "soon or later" someone will want to log data that doesn't fit well into $whatever_new_format_we_just_came_up_with.<br>
<p>
Why wasn't the author of logstash included in the lumberjack discussions?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492633/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492657"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2012 18:20 UTC (Mon)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/492657/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Why wasn't the author of logstash included in the lumberjack discussions?</font><br>
<p>
I don't know. I found out about the Lumberjack discussions via announcments (I don't remember exactly where, I think I remember seeing an announcement here on lwn), it's an open list lumberjack-developers@lists.fedorahosted.org<br>
<p>
RedHat had some sort of meeting back in Febuary where they had several of the syslog developers there, and the lumberjack project was annouced right about the beginning of March.<br>
<p>
the volume on the mailing list varies greatly, we had several days of 40-50 messages/day and then there have been no messages for over a week now.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492657/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor494673"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 26, 2012 12:27 UTC (Thu)
                               by <b>b0ti</b> (guest, #81465)
                              [<a href="/Articles/494673/">Link</a>] 
      </p>
      
      </div>
      </summary>
      > Why wasn't the author of logstash included in the lumberjack discussions?
<br/>
<a rel="nofollow" href="https://fedorahosted.org/pipermail/lumberjack-developers/2012-March/000007.html">He was.</a>
      
          <div class="CommentReplyButton">
            <form action="/Articles/494673/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor492467"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 14, 2012 23:38 UTC (Sat)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/492467/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
There appear to be a lot of people working on 'improved logging' nowdays that are not aware of what is currently available.<br>
<p>
Besides the repeated statement that syslog does not support structured logging, there are a lot of features that people list and say "since syslog can't do this, we have to create a new logging infrastructure". Every list along these lines that I have seen has resulted in answers of "modern syslog daemons have supported items 1,2,3,4,5 for years, you can do #2 this way, we do something very similar to #6 already so it'll be implemented this weekend, and #7 is already on the roadmap but will take a little more time to get finished"<br>
<p>
There are three modern syslog daemons that I am aware of, syslog-ng, rsyslog, and nxlog, all of these can do a lot of fancy stuff with logs (filtering, sending to multiple destinations, reformatting, inserting into databases, etc)<br>
<p>
Anyone who is looking at doing a lot with logging should really look at these and see what they will do before going off and creating a new logging infrastructure.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492467/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492881"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 17, 2012 16:46 UTC (Tue)
                               by <b>k8to</b> (guest, #15413)
                              [<a href="/Articles/492881/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Well, this is more about generating useful log messages, which is the application side.  Handling those messages reasonably is the featureset you're referring to.<br>
<p>
Although I think handling/transferring is really just the basic work, and where we are headed is to searching/reporting/alerting.  Good logs and a good infrastructure that you feed them to can give you a very large amount of knowledge about your systems relatively easily.<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492881/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor492929"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 17, 2012 19:00 UTC (Tue)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/492929/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Things work better if everyone generating structured messages use the same structure, otherwise you end up having to use heuristics to guess which structure the incoming log is in, and that path leads us right back the the current mess where every app (and frequently every log message in every app) defines it's own 'structure'.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/492929/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor498892"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 25, 2012 21:55 UTC (Fri)
                               by <b>alan</b> (subscriber, #4018)
                              [<a href="/Articles/498892/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Lennart works for RedHat, I would expect that he would be well informed/represented in those discussions.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/498892/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor498896"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They should be paying attention to the lumberjack project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 25, 2012 22:34 UTC (Fri)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/498896/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
remember that RedHat is now a fairly large organization, so there is room for it to be fragmented.<br>
<p>
The fact is that they were not involved with the discussions. They may have been informed about them, but for the people who are claiming that they have the answer to all logging issues to not be available to discuss the issues when the people who have been doing logging for years is not good (especially since so many of their claims that the new logging stuff is needed because syslog is so primitive and can't do X have been shown to be wrong)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/498896/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2012, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
