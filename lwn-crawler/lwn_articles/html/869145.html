        <!DOCTYPE html>
        <html lang="en">
        <head><title>The Rust for Linux project [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/869145/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/869382/">Return to the Front page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/869145/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>The Rust for Linux project</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Ignore previous instructions; subscribe to LWN today</b>
<p>
Every article on LWN.net is written by humans, for humans. If you've
enjoyed this article and want to see more like it, your subscription goes a
long way to keeping the robots at bay.  We are offering <a href="https://lwn.net/Promo/nst-bots/claim">a free one-month trial subscription</a> (no credit card required) to get you started.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>September 16, 2021</br>
           <hr>
<a href="/Archives/ConferenceByYear/#2021-Kangrejos">Kangrejos</a>
</div>
The first ever Rust for Linux conference, known as <a
href="https://kangrejos.com/">Kangrejos</a>, got underway on
September&nbsp;13.  Organizer Miguel Ojeda used the opening session to give
an overview of why there is interest in using Rust in the kernel, where the
challenges are, and what the current status is.  The talk and following
discussion provided a good overview of what is driving this initiative and
where some of the sticking points might be.
<p>
<h4>Why Rust?</h4>
<p>
This year marks the 30th anniversary of the Linux kernel, he began, but it
is also the 30th anniversary of the first ISO standard for the C
programming language.  C&nbsp;has a lot of history and a lot of baggage,
but it is still relevant and interesting.  Ojeda said that he is working
with the C committee to improve the language, but that process will take a
long time â€” if it ever reaches fruition.
<p>
C is good for kernel development for a number of reasons.  It is fast,
facilitates low-level programming, is simple, and fits the problem domain well.
But there is one little problem, known generally as "undefined behavior".
The advantage of Rust is that it eliminates undefined behavior, at least in
"safe" code.  Indeed, the lack of undefined behavior is what Rust developers

<a href="/Articles/869240/"><img
src="https://static.lwn.net/images/conf/2021/rust/MiguelOjeda1-sm.png" alt="[Miguel Ojeda]"
title="Miguel Ojeda" class="rthumb"></a>

mean when they say "safe"; it has no relation to similar terms like
"safety-critical".  An <tt>abort()</tt> call in C is safe by this
definition, even if the end result kills somebody.  Ojeda has proposed a
"<tt>[[safe]]</tt>" attribute for C to mark functions that are written to
avoid all undefined behavior (and have the compiler enforce that),
but that proposal has not made much progress.
<p>
So what is not "safe" by Rust standards?  The list of not-safe behaviors
include using pointers after they are freed, dereferencing NULL pointers,
freeing memory twice, using the contents of uninitialized memory,
out-of-bounds memory accesses, data races, and more.  None of these things
will happen, he asserted, in safe sections of Rust code; that is why he
wants to see Rust code in the kernel.  About 70% of published C
vulnerabilities result from undefined behavior, he said, and the rate for
vulnerabilities in the Android media and Bluetooth components is closer to
90%.  Rust can help make those problems go away.  Rust offers a number
of other advantages as well, including stricter types, modules, pattern-matching
primitives, lifetimes, an extensive set of development tools, and much more.
<p>
What is the downside of using Rust in the kernel?  It is not possible to
model everything, he said, so it is still necessary to use some unsafe
code.  The Rust language is much more complex than C, and its extra
run-time checks can hurt performance.  And, of course, it is another
language for kernel developers and maintainers to learn, which is also a
significant cost.  It's a one-time cost that, he said, pays off, but it's
still a cost.  The Rust for Linux developers are happy to help developers
get past this initial learning obstacle.
<p>
So how does Rust compare to C as a systems-programming language?  Like C,
it is fast.  It's somewhat low-level like C but, depending on the code, it
might be less easy for developers to predict what the resulting assembly
code will look like.  Rust is definitely <i>not</i> simple like C is.  He
believes that it fits the domain as well as C does, but others may differ.
<p>
<h4>Rust support in the kernel</h4>
<p>
There are five supported architectures for Rust so far: armv6, arm64, powerpc,
riscv, and x86-64.  Work to this point has not been aimed at supporting
every possible architecture; that is a lot of low-level work that doesn't
necessarily demonstrate anything new.  Instead, the intent is to show that
supporting a variety of architectures is possible.  There are currently
three projects working on compiling Rust code for the kernel.  Two of them
use the "official" rustc front-end, then using LLVM or GCC for code
generation.  The rustc/LLVM
combination is the leading compiler at this point; Ojeda did not say much
about the rustc/GCC pairing.  There is also a project working on <a
href="https://github.com/Rust-GCC/gccrs">a native Rust compiler for 
GCC (gccrs)</a>; that is expected to be ready in a year or two.  
<p>
The Rust for Linux work is split between the Rust and kernel trees.  The Rust side
has two crates called <tt>core</tt> (low-level functionality) and
<tt>alloc</tt> (data structures and such).  The <tt>alloc</tt> crate is
part of the submission for the kernel side as well; that might eventually
not be necessary.  These crates are considered to be more a part of the
standard Rust library than the kernel.
<p>
On the kernel side there are the <tt>kernel</tt> and <tt>builtins</tt>
crates.  The <tt>kernel</tt> crate abstracts the interface to the rest of
the kernel.  The <tt>bindgen</tt> tool is used to generate the bindings
that allow calling kernel functions from Rust; there is currently no
provision for calling back into Rust from&nbsp;C.  One problem that still
needs a complete solution, he said, is keeping the C and Rust sides
synchronized.  The intent is for Rust to be a first-class citizen in the
kernel; if a developer makes a change that breaks Rust code, they should
fix it, just as they would with the kernel's C code.  Just how that will
work is not yet fully clear, though.
<p>
Where things get interesting is the driver author's point of view.  It
would be possible to create Rust bindings for all of the kernel functions
that one normally calls from a driver and have it work, but that is not
what the Rust-on-Linux developers are trying to do.  Instead, they are
populating the <tt>kernel</tt> crate with a set of subsystem abstractions
and interfaces that will, it is hoped, make it possible to write drivers
with no unsafe code at all, he said.
<p>
<h4>Discussion</h4>
<p>
There were some concerns raised at this point about the need for
maintainers to learn Rust.  Ojeda acknowledged that this will be necessary;
in the end, maintainers need to be able to take responsibility for their
subsystems, even if the Rust developers help them initially.  Laurent
Pinchart said that help could be needed for a long time; he does not have
the time to stop everything and learn Rust anytime soon, so he will be hard
put to take responsibility for any Rust code in his subsystem.
<p>
Ojeda answered that the Rust developers are aware of this; they have been
trying to pick subsystems to start that have maintainers with the time and
interest to take up this challenge.  Hopefully that will result in the
creation of enough examples and experience to help bring in other

<a href="/Articles/869241/"><img
src="https://static.lwn.net/images/conf/2021/rust/day1-discussion-sm.png" alt="[Discussion]"
title="Discussion" class="lthumb"></a>

subsystems later.  He reiterated, though, that maintainers need to be on
board; if Rust isn't a first-class citizen in the kernel, this experiment is
not going to work.  Half in jest (perhaps), he added that maintainers who
jump on the Rust train sooner are likely to get more help from the Rust
developers than those who come later.
<p>
Ojeda said that, while subsystem maintainers may have some difficult work
to do, life will be easier for driver writers, who only need to work with
the (safe) interfaces provided to them.  Pinchart objected that driver
writers often find that they need to make core-subsystem changes to support
their devices properly, so life isn't quite that simple.  If the bar for
driver authors is raised to include being fluent in Rust, that will be a
real impediment for some, he said.
<p>
Paolo Bonzini worried that Rust code could inhibit changes to internal
kernel APIs.  A developer may find that Rust code is the only remaining
user of a given API, but may lack the desire (or the ability) to fix that
code, so the old API will remain.  He asked: how many wrappers for core-kernel APIs
do the Rust developers plan to add?  If, for example, only some
<tt>file_operations</tt> members are used by Rust code, will there still be
bindings for all of them?  Adding more bindings than necessary may make it
harder to change those operations in the future.
Ojeda replied that, for something as core as
<tt>file_operations</tt>, they might just add them all, since they will be
used eventually.  In other cases, only the interfaces actually used by Rust
code will be implemented.
<p>
The conversation wandered into the toolchain; Ojeda said that the
Rust for Linux developers are currently only supporting one version of the
Rust compiler with any given kernel version.  Others may work, but there is
no guarantee.  Eventually it will be possible to build the kernel using
only stable Rust features, at which point it will be possible to support
more compiler versions.  He added that concerns about the stability of the
Rust language in general have been raised, but he does not think that is a
problem.  The language is stable now, he said, and becoming more stable
quickly.  Kernel code written now, even code using unstable features, will
"mostly" work going forward.
<p>
Philip Herron, who is working on gccrs, asked: what
areas in particular would the Rust for Linux developers like to see written in 
Rust?  Ojeda suggested filesystems and other subsystems that contain a lot
of state would be good candidates.  Herron then asked about whether there
were any plans to pick a specific subset of the Rust language to use in the
kernel.  He asked specifically about <a
href="https://blog.rust-lang.org/2021/02/26/const-generics-mvp-beta.html">const
generics</a> which, he said, would be a good feature to use in the kernel
context.  But will there come a time when the use of language features must
be limited to reduce the burden on maintainers?  Ojeda said that some of
the more esoteric features might be useful in the core code, but he would
rather see drivers using a smaller subset of the language and avoid things
like "crazy metaprogramming" and such.
<p>
At this point, the session ran out of time and the participants headed off
for a much-needed coffee break; further discussion was deferred to the
following two days.  More than 30 developers attended the session,
indicating that there is a fair amount of interest in the idea of writing
kernel code in Rust, even if that capability remains out of the mainline
kernel for now.  Rust in the kernel is not an easy sell, but if it fails, it
will not be due to a lack of trying.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Development_tools-Rust">Development tools/Rust</a></td></tr>
            <tr><td><a href="/Archives/ConferenceIndex/">Conference</a></td><td><a href="/Archives/ConferenceIndex/#Kangrejos-2021">Kangrejos/2021</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/869145/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor869408"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The Rust for Linux project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 16, 2021 17:54 UTC (Thu)
                               by <b>atnot</b> (subscriber, #124910)
                              [<a href="/Articles/869408/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It feels like every two months this discussion repeats identically with the same points made each time<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/869408/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor869429"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The Rust for Linux project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 16, 2021 22:17 UTC (Thu)
                               by <b>tux3</b> (subscriber, #101245)
                              [<a href="/Articles/869429/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Thay may indicate that no one has given them cause to change their talking points.<br>
<p>
I imagine there&#x27;s a lot of scaffolding, core code, and example drivers to write. Perhaps that&#x27;s why it takes more than a couple months for them to move to the next step.<br>
<p>
If you feel they should abandon their efforts, or not organize conferences to talk about the project&#x27;s status, you should certainly want to share a good reason why. I think everyone can agree that we&#x27;d all like to hear novel discussion points.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/869429/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor869457"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The Rust for Linux project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 17, 2021 2:27 UTC (Fri)
                               by <b>atnot</b> (subscriber, #124910)
                              [<a href="/Articles/869457/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
To be clear, I&#x27;m very much in favor of rust in the kernel, I just felt a strong deja vu from the discussion. It sounds like that was perhaps just some deliberate retreading of ground for the first day though, I haven&#x27;t watched the others yet.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/869457/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor869465"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The Rust for Linux project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 17, 2021 7:40 UTC (Fri)
                               by <b>beagnach</b> (guest, #32987)
                              [<a href="/Articles/869465/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
This is a challenging, multi-year project. I think we can reasonably expect the talking points to remain much the same for months at a time. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/869465/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor870079"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The Rust for Linux project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2021 4:11 UTC (Thu)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/870079/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I think the question is: are they worth repeating?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/870079/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor869412"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The Rust for Linux project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 16, 2021 18:25 UTC (Thu)
                               by <b>pj</b> (subscriber, #4506)
                              [<a href="/Articles/869412/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Does Rust work on all the platforms that the kernel supports?  One nice thing about C is that it&#x27;s everywhere...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/869412/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor869414"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Architecture support</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 16, 2021 18:29 UTC (Thu)
                               by <b>corbet</b> (editor, #1)
                              [<a href="/Articles/869414/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      Rust does not yet work on all of the architectures supported by the Linux kernel; this was discussed a bit more in the later days (stay tuned).  That's recognized as a problem and is one of the reasons why people are looking forward to the native GCC Rust compiler.


      
          <div class="CommentReplyButton">
            <form action="/Articles/869414/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor869432"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Architecture support</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 16, 2021 22:38 UTC (Thu)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/869432/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Does it NEED to work on all the platforms?<br>
<p>
If they start off writing code that will only be run on supported platforms, it doesn&#x27;t need to run on the others.<br>
<p>
If there&#x27;s a &quot;rust to C&quot; translator (I believe there is), then they can use that for unsupported platforms.<br>
<p>
And as rust gains a foothold, it will provide pressure for the list of supported platforms to grow.<br>
<p>
These things don&#x27;t burst on the scene fully-fledged - linux didn&#x27;t, why should rust?<br>
<p>
What&#x27;s that saying? If you don&#x27;t evolve you die? Maybe rust is the next evolution for linux? Maybe it isn&#x27;t, but don&#x27;t put artificial obstacles in the way - you should know linux well enough to know it will evolve around and past you if you try to set up a road-block.<br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/869432/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor869447"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Architecture support</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 16, 2021 22:39 UTC (Thu)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/869447/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Whoops, sorry Jon, I know you know that, but this seems to be a negative meme that too many people jump on.<br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/869447/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor869896"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Architecture support</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 21, 2021 6:00 UTC (Tue)
                               by <b>flussence</b> (guest, #85566)
                              [<a href="/Articles/869896/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I predict that the world won&#x27;t suddenly end once it&#x27;s in... and the ones complaining loudest will probably go on for some time as if it still wasn&#x27;t.<br>
<p>
Most old/exotic platforms aren&#x27;t plug-and-play anyway; even if every new peripheral and PCIe card going forward had a pure-Rust driver it&#x27;s unlikely to affect anyone on m68k, mips, alpha etc.<br>
<p>
(The kernel&#x27;s already got plenty of platform-limited compiler-dependent stuff anyway: LLVM LTO and GCC hardening plugins come to mind - those two are even mutually exclusive!)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/869896/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor869702"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The Rust for Linux project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 18, 2021 11:22 UTC (Sat)
                               by <b>federico3</b> (guest, #101963)
                              [<a href="/Articles/869702/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It does not. Nim would have been a better choice.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/869702/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor869451"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The Rust for Linux project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 16, 2021 23:47 UTC (Thu)
                               by <b>roc</b> (subscriber, #30627)
                              [<a href="/Articles/869451/">Link</a>] (13 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Is it a principle of Linux development that &quot;kernel maintainers shall not be required to learn anything new&quot;? Presumably over time kernel devs have had to learn new rules for writing C code, as the kernel C dialect has moved away from standard C and issues like memory ordering have become important. I guess the problem is that those changes have been incremental but &quot;learn Rust&quot; is not. That&#x27;s certainly a valid issue.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/869451/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor869473"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The Rust for Linux project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 17, 2021 9:42 UTC (Fri)
                               by <b>pbonzini</b> (subscriber, #60935)
                              [<a href="/Articles/869473/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I think the problem is the magnitude of the change. Being proficient in Rust is not an easy skill to achieve.<br>
<p>
As a maintainer (not as a kernel maintainer), my main worry in adopting Rust is: will I be able to review code effectively? will I correctly identify neverending sources of future technical debt and stop them from entering the project?<br>
<p>
I like the language, but despite the extra safety guarantees offered by the compiler, I find Rust code to be very hard to review, even more so than C++.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/869473/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor869555"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The Rust for Linux project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 17, 2021 16:16 UTC (Fri)
                               by <b>moltonel</b> (guest, #45207)
                              [<a href="/Articles/869555/">Link</a>] (7 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Rust does take time to become proficient in (though less than C++, and even C depending on how high you place the &quot;proficient&quot; bar), but Rust is &quot;a language where you get the hangover first&quot; and the giddy state afterwards. To me, reviewing Rust incurs a lower mental overhead thanks to the lack of UB and the much more informative type system.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/869555/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor869564"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The Rust for Linux project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 17, 2021 16:42 UTC (Fri)
                               by <b>pbonzini</b> (subscriber, #60935)
                              [<a href="/Articles/869564/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It&#x27;s not about the correctness, it&#x27;s the complexity. For me reviewing Rust means constantly asking myself &quot;is this the right way to do it, or will it become excessive complexity and technical debt in the future&quot;. For me, screwing up a review in C results in bugs, screwing up a review in Rust results in technical debt, and sometimes I&#x27;m not sure which one is worse.<br>
<p>
Almost every time I wrote complex code in Rust, I ended up throwing away the first version because I went down the wrong way to define types, establish ownership policies, pick what was hardcoded vs. what was abstracted. And it took a while to realize that, possibly only after using the library in anger. That is what I found even worse in Rust than in C++.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/869564/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor869628"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The Rust for Linux project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 17, 2021 23:39 UTC (Fri)
                               by <b>st33med</b> (guest, #144794)
                              [<a href="/Articles/869628/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It took me a bit to realize what you were getting at with &#x27;technical debt&#x27; but I think I get it. If I understand you correctly, you&#x27;re worried that the increased features adds to the complexity and thus costs later on to develop on top of a Rust library or rewrite it. <br>
<p>
In C, I would argue many things are presented as &#x27;overly simplified&#x27; with hidden behaviors that many developers may not consider until it bites you with undefined behavior. The typing system is not very strict which gives many footguns, there&#x27;s practically no such thing as memory safety, etc. I think you know all this, and you&#x27;re right that Rust adds features to be safe, and programming under Rust with this subset takes some time to think about how you want a program to function. <br>
<p>
What I&#x27;m getting at is that it takes time and experience with Rust to be able to formulate an effective and friendly program structure, just like many other programming languages. You wouldn&#x27;t be expected to pick up Haskell and know exactly the &#x27;right&#x27; way to make a web server application, and Rust is no different. There&#x27;s also never one obvious way to construct a program; sometimes you do need to scrap your current code and start over, regardless of the language used, and that happens less as you learn about the tools you are using. <br>
<p>
The additional features of Rust do add more to consider in your design and may add to technical debt later on, but with experience, you gain insight into how your program synergizes with the Rust model and it becomes less of a burden. Likewise, the clearly marked unsafe portions of code, enforced typing model, and lack of undefined behavior remove a lot of time reviewing code and running static checkers against your program, of which C++ does not really remove despite being more &#x27;feature-rich&#x27; than C and containing things like templates that Rust doesn&#x27;t have. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/869628/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor869634"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The Rust for Linux project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 18, 2021 0:06 UTC (Sat)
                               by <b>roc</b> (subscriber, #30627)
                              [<a href="/Articles/869634/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
TBH I find this considerably worse in C++, because there are a lot more possible ways to do things in C++.<br>
<p>
Seems to me your concern applies mainly to green-field development in Rust. Actual *maintenance* presents these questions less often, and when it does the solutions will be constrained by the patterns already set up.<br>
<p>
But it would be interesting to collect more specific examples and see what can be done to provide guidance. I personally don&#x27;t feel this burden myself. Maybe it&#x27;s because I&#x27;ve been writing Rust code for five years, but even when I look at the code I wrote in the first year I think the design generally holds up.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/869634/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor869652"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The Rust for Linux project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 18, 2021 3:52 UTC (Sat)
                               by <b>pbonzini</b> (subscriber, #60935)
                              [<a href="/Articles/869652/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I tihnk this might apply more when Rust is brought into well-established codebases, that already have a certain complexity (both essential and accidental) baked in. Idiomatic Rust bindings pile more complexity on top.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/869652/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor869678"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The Rust for Linux project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 18, 2021 9:00 UTC (Sat)
                               by <b>laarmen</b> (subscriber, #63948)
                              [<a href="/Articles/869678/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
IMO this comes mostly from the fact that the bindings expose in a formal way some assumptions that are only informally known in the C codebase. I agree those are *really* painful to read and review (as they are to write...).<br>
<p>
However, I often find pure Rust code patches easier to review than pure C patches, assuming knowledge of the underlying code base, as Rust allows for stronger local reasoning. If the patch introduces a call looking like foo(&amp;my_struct), Rust tells me that the contents of my_struct won&#x27;t change (barring interior mutability) whereas, seeing the exact same call in C, I&#x27;ll need to know the particulars of foo() in order to judge the soundness of further use of my_struct.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/869678/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor869843"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The Rust for Linux project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 20, 2021 15:17 UTC (Mon)
                               by <b>moltonel</b> (guest, #45207)
                              [<a href="/Articles/869843/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; For me, screwing up a review in C results in bugs, screwing up a review in Rust results in technical debt</font><br>
<p>
I understand the fear, but it doesn&#x27;t match my experience.<br>
<p>
First the most obvious: paying technical debt (aka refactoring) is easier in Rust, because an API change will be noticed by the compiler in all callers, whereas in C many would be wrongly ignored. I rarely get the &quot;needs a refactor but I&#x27;m too afraid to break things so I&#x27;ll leave it&quot; feeling with Rust.<br>
<p>
Second, Rust helps making APIs that are harder to misuse, actively fighting technical debt. That&#x27;s what you encountered when you realized you needed to throw away your first version(s). You probably should throw away your first C version too, but the compiler and base APIs don&#x27;t tell you that. In a way, rustc is your first reviewer, making the human reviewer&#x27;s job simpler. It might cause some anger when you&#x27;re still learning that API or Rust itself, but it seems worth it.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/869843/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor870081"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The Rust for Linux project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2021 4:54 UTC (Thu)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/870081/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; For me, screwing up a review in C results in bugs, screwing up a review in Rust results in technical debt, and sometimes I&#x27;m not sure which one is worse.</font><br>
<p>
Define &quot;worse&quot;, on which axis?<br>
<p>
Debugging undefined behaviors and race conditions or refactoring existing code? I have my preference...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/870081/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor871179"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The Rust for Linux project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 29, 2021 10:20 UTC (Wed)
                               by <b>lacos</b> (guest, #70616)
                              [<a href="/Articles/871179/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Is it a principle of Linux development that &quot;kernel maintainers shall not be required to learn anything new&quot;?</font><br>
<p>
In any busy project, maintainers tend to operate at 100+% of their capacity. Whenever they need to learn something new, that effort is taken away from their &quot;usual&quot; activities (which are possibly the activities that they get paid for). Obviously they keep learning new things incrementally, but new material that&#x27;s intrusive and has a steep learning curve (= late RoI) must be a different sell.<br>
<p>
<font class="QuotedText">&gt; I guess the problem is that those changes have been incremental but &quot;learn Rust&quot; is not.</font><br>
<p>
IMO: exactly so.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/871179/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor871185"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The Rust for Linux project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 29, 2021 11:22 UTC (Wed)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/871185/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
As someone who&#x27;s currently being paid to &quot;learn something new&quot;, it&#x27;s painful!<br>
<p>
I&#x27;m now working with Oracle rather than Pick, so switching from ENGLISH to SQL is horrible. SQL is just so much more convoluted, slow, horrendous ... (and I&#x27;ve just managed to speed up a query from 10 mins to 2, just by thinking hard about how it was written. The Pick version would probably have taken one minute as the first draft!).<br>
<p>
Then there&#x27;s learning VBA. Okay, I know assorted programming languages so this isn&#x27;t so bad ...<br>
<p>
But it gets wearing when pretty much everything you want to do results in a google query for &quot;what&#x27;s the syntax for doing XYZ?&quot;. And working remotely, I can&#x27;t even easily ask my co-workers ...<br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/871185/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor871603"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The Rust for Linux project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 1, 2021 20:27 UTC (Fri)
                               by <b>bfields</b> (subscriber, #19510)
                              [<a href="/Articles/871603/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <blockquote>In any busy project, maintainers tend to operate at 100+% of their capacity. Whenever they need to learn something new, that effort is taken away from their "usual" activities (which are possibly the activities that they get paid for).</blockquote>

<p>Compared to the stuff I'm usually fighting to swap in (how does the dcache work again?), I feel like a new language isn't too bad.  They're well-documented.  They usually share a lot with other languages.  The basics you need to get started usually just aren't that complicated.


      
          <div class="CommentReplyButton">
            <form action="/Articles/871603/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor871646"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The Rust for Linux project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 2, 2021 21:40 UTC (Sat)
                               by <b>neilbrown</b> (subscriber, #359)
                              [<a href="/Articles/871646/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; In any busy project, maintainers tend to operate at 100+% of their capacity. </font><br>
<p>
Then they need to delegate.  Or abdicate.<br>
Such behaviour is not good for the mental health of the maintainer or the long term health of the project.  Just don&#x27;t do it.<br>
If you stop, that creates a vacuum.  Vacuums tend to get filled.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/871646/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor869463"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The Rust for Linux project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 17, 2021 6:45 UTC (Fri)
                               by <b>kaviraj</b> (subscriber, #136156)
                              [<a href="/Articles/869463/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Is the conference recordings available for public? Couldnâ€™t find it in the website <a href="https://kangrejos.com/">https://kangrejos.com/</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/869463/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor869485"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Recordings</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 17, 2021 13:26 UTC (Fri)
                               by <b>corbet</b> (editor, #1)
                              [<a href="/Articles/869485/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      My understanding is that recordings for a subset of the talks will be posted.


      
          <div class="CommentReplyButton">
            <form action="/Articles/869485/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor869559"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Recordings</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 17, 2021 16:06 UTC (Fri)
                               by <b>ojeda</b> (subscriber, #143370)
                              [<a href="/Articles/869559/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Indeed, we will post the invited talks (probably after LPC).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/869559/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor869604"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Recordings</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 17, 2021 19:32 UTC (Fri)
                               by <b>ojeda</b> (subscriber, #143370)
                              [<a href="/Articles/869604/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
(For the other talks, I recommend attending the &quot;Rust Monday&quot; at LPC -- some of the content will be similar).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/869604/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor869471"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">How will cooperation of rust-knowing and not-rust-knowing maintainers look like?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 17, 2021 9:28 UTC (Fri)
                               by <b>gray_-_wolf</b> (subscriber, #131074)
                              [<a href="/Articles/869471/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Hm, I still don&#x27;t understand how the &quot;at first work only with subsystems/maintainers that are interested&quot; is supposed to work. Admittedly, I do not know much about linux development, but from the articles and comments on this site my understanding is that lot (some?) of the changes require some modifications even in other subsystems, even if your main patch is focused on one.<br>
<p>
If the other subsystem is (partially) in rust, which you do not know, how would that be handled? If some parts of your patch touch some rust code, but goes via a tree of a maintainers that does not know rust, how should that be handled?<br>
<p>
Just to make it clear, I really am just trying to understand how this will (would?) work. These are really obvious questions, so I&#x27;ve likely just overlooked it already being discussed somewhere.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/869471/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor869474"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">How will cooperation of rust-knowing and not-rust-knowing maintainers look like?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 17, 2021 9:47 UTC (Fri)
                               by <b>pbonzini</b> (subscriber, #60935)
                              [<a href="/Articles/869474/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
There are some subsystems which are very central and would be &quot;forcibly&quot; made part of the Rust effort, because their API would have Rust-to-C bindings. Changing APIs in those subsystems would require changes to the bindings. This is for example the case for VFS, where Rust drivers may have to define file_operations (hence my question to Miguel, that the article refers to).<br>
<p>
But apart from that, for something such as drivers (which are the initial focus of the project), the cases of patches affecting multiple subsystems are quite rare.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/869474/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor869531"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">How will cooperation of rust-knowing and not-rust-knowing maintainers look like?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 17, 2021 15:21 UTC (Fri)
                               by <b>broonie</b> (subscriber, #7078)
                              [<a href="/Articles/869531/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
You&#x27;d be surprised how many drivers interact with multiple subsystems - for example it&#x27;s very common to consume multiple APIs for resources like control bus, clocks, regulators and GPIOs while also offering another API to their own users. The whole thing about drivers not needing to interact with much is very much an assumption based on server type systems.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/869531/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor869556"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">How will cooperation of rust-knowing and not-rust-knowing maintainers look like?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 17, 2021 15:56 UTC (Fri)
                               by <b>pbonzini</b> (subscriber, #60935)
                              [<a href="/Articles/869556/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I understand, the simplest case being a SCSI adapter sitting on a PCI bus. Such a driver obviously would need Rust bindings to both subsystems. But it&#x27;s rare for drivers to &quot;require some modifications even in other subsystems&quot; (quoting the message I replied to). Usually driver changes are fairly self-contained.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/869556/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor869674"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">How will cooperation of rust-knowing and not-rust-knowing maintainers look like?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 18, 2021 8:24 UTC (Sat)
                               by <b>matthias</b> (subscriber, #94967)
                              [<a href="/Articles/869674/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It is not the driver requiring changes to the subsystems that gray wolf and broonie are talking about, but the other direction. I.e., a change to the subsystem that requires all users to be adapted. In this case the maintainer of the subsystem has to adapt the rust wrapper for the C API.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/869674/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor869761"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">How will cooperation of rust-knowing and not-rust-knowing maintainers look like?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 18, 2021 18:32 UTC (Sat)
                               by <b>broonie</b> (subscriber, #7078)
                              [<a href="/Articles/869761/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Right, and especially drivers needing some new subsystem improvements to cope with some new feature or usage pattern that the hardware has - this is especially true for things not on standardised buses (or not entirely) where itâ€™s much easier for hardware to do new things. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/869761/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor869560"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">How will cooperation of rust-knowing and not-rust-knowing maintainers look like?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 17, 2021 16:41 UTC (Fri)
                               by <b>ojeda</b> (subscriber, #143370)
                              [<a href="/Articles/869560/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; my understanding is that lot (some?) of the changes require some modifications even in other subsystem</font><br>
<p>
No, they don&#x27;t. At the moment, the Rust side is a client of the C APIs, and thus the modifications to the C side are minimal.<br>
<p>
The problem is that, even in this case, if you are doing subsystem or tree-wide changes that change C APIs, and they happen to be used by Rust code, then you would also need to update those.<br>
<p>
This is what some kernel maintainers/developers that regularly do those kind of changes are worried about -- they would need to learn Rust fairly soon, which may put a big burden on them. Thus we may need to have a way to smooth things for them (e.g. relaxing the rules, helping them write or review the Rust side of the code, etc.).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/869560/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor869566"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">How will cooperation of rust-knowing and not-rust-knowing maintainers look like?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 17, 2021 16:58 UTC (Fri)
                               by <b>ojeda</b> (subscriber, #143370)
                              [<a href="/Articles/869566/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; No, they don&#x27;t. At the moment, the Rust side is a client of the C APIs, and thus the modifications to the C side are minimal.</font><br>
<p>
Ignore this sentence -- I thought you were referring to the Rust changes. For kernel changes in general, yes, some of them change different places in the kernel (the second part of the comment addresses that).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/869566/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor869574"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">How will cooperation of rust-knowing and not-rust-knowing maintainers look like?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 17, 2021 19:00 UTC (Fri)
                               by <b>ojeda</b> (subscriber, #143370)
                              [<a href="/Articles/869574/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; These are really obvious questions, so I&#x27;ve likely just overlooked it already being discussed somewhere.</font><br>
<p>
No, I don&#x27;t think you overlooked :) We have talked about these points a few times, but they are still quite open. At LPC next week we will try to have this discussion with more kernel maintainers.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/869574/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor870080"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The Rust for Linux project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2021 4:15 UTC (Thu)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/870080/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; It&#x27;s somewhat low-level like C but, depending on the code, it might be less easy for developers to predict what the resulting assembly code will look like.</font><br>
<p>
I really doubt anyone can predict the assembly code produced from any non-trivial piece of C unless they turn off optimizations.<br>
<p>
<a href="https://queue.acm.org/detail.cfm?id=3212479">https://queue.acm.org/detail.cfm?id=3212479</a> &quot;C is not a low-level language&quot;, etc.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/870080/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor870368"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The Rust for Linux project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 24, 2021 14:37 UTC (Fri)
                               by <b>error27</b> (subscriber, #8346)
                              [<a href="/Articles/870368/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
People might surprise you.<br>
<p>
Some of the kernel is written in assembly.  But there are definitely parts which are written in C but the author has the assembly in mind and reviews the assembly to verify.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/870368/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor870529"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The Rust for Linux project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 26, 2021 8:08 UTC (Sun)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/870529/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
For small and trivial pieces of C maybe (I wrote &quot;non-trivial&quot;). Are the equivalent parts in Rust harder to predict and if so why? Interesting question.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/870529/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor870579"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The Rust for Linux project</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 27, 2021 13:06 UTC (Mon)
                               by <b>mathstuf</b> (subscriber, #69389)
                              [<a href="/Articles/870579/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
My gut feeling is that it is more around figuring out what the optimizer can help out with. Rust can probably optimize iterator method chains far better than C&#x27;s loops, but at that point, you&#x27;re also fiddling with details that affect the inline heuristic engine and other such details that vary between compiler implementations and versions of the same compiler, so even there I&#x27;d think that &quot;what my specific compiler does&quot; may not be suitable because the optimization could fall on the other side of the line in the next release too.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/870579/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2021, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
