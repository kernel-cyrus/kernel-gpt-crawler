        <!DOCTYPE html>
        <html lang="en">
        <head><title>Video4Linux2 part 5a: colors and formats [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/218798/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/218036/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/218798/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>Video4Linux2 part 5a: colors and formats</h1>
<div class="Byline">[Posted January 24, 2007 by corbet]
               <p>
               </div>
</div>
<div class="ArticleText">
<table class="tlr">
<tr><td>The <a href="http://lwn.net/Articles/203924/">LWN.net Video4Linux2
API series</a>.
</td></tr></table>

This is the fifth article in the irregular LWN series on writing video
drivers for Linux.  Those who have not yet read <a
href="http://lwn.net/Articles/203924/">the introductory article</a> may
want to start there.
<p>

Before any application can work with a video device, it must come to an
understanding with the driver about how video data will be formatted.  This
negotiation can be a rather complex process, resulting from the facts that
(1)&nbsp;video hardware varies widely in the formats it can handle, and
(2)&nbsp;performing format transformations in the kernel is frowned upon.
So the application must be able to find out what formats are supported by
the hardware and set up a configuration which is workable for everybody
involved.  This article will cover the basics of how formats are described;
the next installment will get into the API implemented by V4L2 drivers to
negotiate formats with applications.

<p>

<h3>Colorspaces</h3>
<p>
A colorspace is, in broad terms, the coordinate system used to
describe colors.  There are several of them defined by the V4L2
specification, but only two are used in any broad way.  They are:
<p>
<ul>
<li> <tt>V4L2_COLORSPACE_SRGB</tt>.  The [red, green, blue] tuples familiar 
     to many developers are covered under this colorspace.  They provide a
     simple intensity value for each of the primary colors which, when
     mixed together, create the illusion of a wide range of colors.  There
     are a number of ways of representing RGB values, as we will see below.
<p>
     This colorspace also covers the set of YUV and YCbCr representations.
     This representation derives from the need for early color
     television signals to be displayable on monochrome TV sets.  So the
     Y (or "luminance") value is a simple brightness value; when
     displayed alone, it yields a grayscale image.  The U and V (or Cb and
     Cr) "chrominance" values describe the blue and red components of the
     color; green can be derived by subtracting those components from the
     luminance.   Conversion between YUV and RGB is not entirely
     straightforward, however; there are <a
     href="http://www.fourcc.org/fccyvrgb.php">several formulas</a> to
     choose from.
     <p>
     Note that YUV and YCbCr are not exactly the same thing, though the
     terms are often used interchangeably.
<p>
<li> <tt>V4L2_COLORSPACE_SMPTE170M</tt> is for analog color representations
     used in NTSC or PAL television signals.  TV tuners will often produce
     data in this colorspace.
</ul>
<p>
Quite a few other colorspaces exist; most of them are variants of
television-related standards.  See <a
href="http://v4l2spec.bytesex.org/spec/x2123.htm">this page from the V4L2
specification</a> for the full list.
<p>

<h3>Packed and planar</h3>
<p>

As we have seen, pixel values are expressed as tuples, usually consisting
of RGB or YUV values.  There are two commonly-used ways of organizing those
tuples into an image:
<p>
<ul>
<li> <b>Packed</b> formats store all of the values for one pixel together 
     in memory.
<p>
<li> <b>Planar</b> formats separate each component out into a separate
     array.  Thus a planar YUV format will have all of the Y values stored
     contiguously in one array, the U values in another, and the V values
     in a third.  The planes are usually stored contiguously in a single
     buffer, but it does not have to be that way.
</ul>
<p>
Packed formats might be more commonly used, especially with RGB formats,
but both types can be generated 
by hardware and requested by applications.  If the video device
supports both packed and planar formats, the driver should make them both
available to user space.
<p>

<h3>Fourcc codes</h3>
<p>

Color formats are described within the V4L2 API using the venerable
"fourcc" code mechanism.  These codes are 32-bit values, generated from
four ASCII characters.  As such, they have the advantages of being easily
passed around and being human-readable.  When a color format code reads,
for example, '<tt>RGB4</tt>', there is no need to go look it up in a
table.
<p>
Note that fourcc codes are used in a lot of different settings, some of
which predate Linux.  The MPlayer application uses them internally.  fourcc
refers only to the coding mechanism, however, and says nothing about which
codes are actually used - MPlayer has a translation function for converting
between its fourcc codes and those used by V4L2.


<h3>RGB formats</h3>
<p>

In the format descriptions shown below, bytes are always listed in memory
order - least significant bytes first on a little-endian machine.  The
least significant bit of each byte is on the right; for each color field,
the lighter-shaded bit is the most significant.
<p>
<table>
<tr><th>Name</th><th>fourcc</th><th>Byte 0</th><th>Byte 1</th><th>Byte
2</th><th>Byte 3</th></tr>

<tr class="Odd">
    <td><tt>V4L2_PIX_FORMAT_RGB332</tt></td>
    <td><tt>RGB1</tt></td>
    <td><table><tr>
    	<td bgcolor="lightblue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="lightgreen">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="pink">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	</tr></table></td>
    <td></td><td></td><td></td></tr>

<tr class="Even">
    <td><tt>V4L2_PIX_FORMAT_RGB444</tt></td>
    <td><tt>R444</tt></td>
    <td><table><tr>
    	<td bgcolor="lightgreen">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="lightblue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="pink">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	</tr></table></td>
    <td></td><td></td></tr>

<tr class="Odd">
    <td><tt>V4L2_PIX_FORMAT_RGB555</tt></td>
    <td><tt>RGB0</tt></td>
    <td><table><tr>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="pink">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="lightblue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="lightgreen">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	</tr></table></td>
    <td></td><td></td></tr>

<tr class="Even">
    <td><tt>V4L2_PIX_FORMAT_RGB565</tt></td>
    <td><tt>RGBP</tt></td>
    <td><table><tr>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="pink">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="lightblue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="lightgreen">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	</tr></table></td>
    <td></td><td></td></tr>

<tr class="Odd">
    <td><tt>V4L2_PIX_FORMAT_RGB555X</tt></td>
    <td><tt>RGBQ</tt></td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="lightblue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="lightgreen">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	</tr></table></td>
    <td><table><tr>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="pink">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    </tr></table></td>
    <td></td><td></td></tr>

<tr class="Even">
    <td><tt>V4L2_PIX_FORMAT_RGB565X</tt></td>
    <td><tt>RGBR</tt></td>
    <td><table><tr>
    	<td bgcolor="lightblue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="lightgreen">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	</tr></table></td>
    <td><table><tr>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="pink">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    </tr></table></td>
    <td></td><td></td></tr>

<tr class="Odd">
    <td><tt>V4L2_PIX_FORMAT_BGR24</tt></td>
    <td><tt>BGR3</tt></td>
    <td><table><tr>
    	<td bgcolor="lightblue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	</tr></table></td>
    <td><table><tr>
    	<td bgcolor="lightgreen">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	</tr></table></td>
    <td><table><tr>
    	<td bgcolor="pink">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    </tr></table></td>
    <td></td></tr>

<tr class="Even">
    <td><tt>V4L2_PIX_FORMAT_RGB24</tt></td>
    <td><tt>RGB3</tt></td>
    <td><table><tr>
    	<td bgcolor="pink">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="lightgreen">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	</tr></table></td>
    <td><table><tr>
    	<td bgcolor="lightblue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	</tr></table></td>
    <td></td></tr>


<tr class="Odd">
    <td><tt>V4L2_PIX_FORMAT_BGR32</tt></td>
    <td><tt>BGR4</tt></td>
    <td><table><tr>
    	<td bgcolor="lightblue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	</tr></table></td>
    <td><table><tr>
    	<td bgcolor="lightgreen">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	</tr></table></td>
    <td><table><tr>
    	<td bgcolor="pink">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    </tr></table></td>
    </tr>

<tr class="Even">
    <td><tt>V4L2_PIX_FORMAT_RGB32</tt></td>
    <td><tt>RGB4</tt></td>
    <td><table><tr>
    	<td bgcolor="pink">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="lightgreen">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	</tr></table></td>
    <td><table><tr>
    	<td bgcolor="lightblue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	</tr></table></td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    </tr></table></td>
    </tr>


<tr class="Odd">
    <td><tt>V4L2_PIX_FORMAT_SBGGR8</tt></td>
    <td><tt>BA81</tt></td>
    <td><table><tr>
    	<td bgcolor="lightblue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	</tr></table></td>
    <td><table><tr>
    	<td bgcolor="lightgreen">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	</tr></table></td>
    <td><table><tr>
    	<td bgcolor="lightblue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	</tr></table></td>
    <td><table><tr>
    	<td bgcolor="lightgreen">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	</tr></table></td>
    </tr>
<tr class="Odd">
    <td></td>
    <td></td>
    <td><table><tr>
    	<td bgcolor="pink">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="lightgreen">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	</tr></table></td>
    <td><table><tr>
    	<td bgcolor="pink">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="lightgreen">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	<td bgcolor="green">&nbsp;</td>
    	</tr></table></td>
    </tr>
</table>
<p>

When formats with empty space (shown in gray, above) are used, applications
may use that space for an alpha (transparency) value.
<p>
The final format above is the "Bayer" format, which is generally something
very close to the real data from the sensor found in most cameras.  There
are green values for every pixel, but blue and red only for every other
pixel.  Essentially, green carries the more important intensity
information, with red and blue being interpolated across the pixels where
they are missing.  This is a pattern we will see again with the YUV formats.
<p>

<h3>YUV formats</h3>
<p>
The packed YUV formats will be shown first.  The key for reading this table
is:
<p>
<ul>
<li> <table align="left"><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	</tr></table> = Y (intensity)
<br clear="all">
<li> <table align="left"><tr>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	</tr></table> = U (Cb)
<br clear="all">
<li> <table align="left"><tr>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	</tr></table> = V (Cr)

</ul>
<p>

<table>
<tr><th>Name</th><th>fourcc</th><th>Byte 0</th><th>Byte 1</th><th>Byte
2</th><th>Byte 3</th></tr>

<tr class="Odd">
    <td><tt>V4L2_PIX_FORMAT_GREY</tt></td>
    <td><tt>GREY</tt></td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	</tr></table></td>
    <td></td><td></td><td></td></tr>


<tr class="Even">
    <td><tt>V4L2_PIX_FORMAT_YUYV</tt></td>
    <td><tt>YUYV</tt></td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	</tr></table></td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	</tr></table></td>
    </tr>

<tr class="Even">
    <td><tt>V4L2_PIX_FORMAT_UYVY</tt></td>
    <td><tt>UYVY</tt></td>
    <td><table><tr>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	</tr></table></td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	</tr></table></td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    </tr></table></td>
    </tr>

<tr class="Odd">
    <td><tt>V4L2_PIX_FORMAT_Y41P</tt></td>
    <td><tt>Y41P</tt></td>
    <td><table><tr>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	</tr></table></td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	</tr></table></td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    </tr></table></td>
    </tr>

<tr class="Odd">
    <td></td>
    <td></td>
    <td><table><tr>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	</tr></table></td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	</tr></table></td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    </tr></table></td>
    </tr>

<tr class="Odd">
    <td></td>
    <td></td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    </tr></table></td>
    </tr>

</table>
<p>

There are several planar YUV formats in use as well.  Drawing them all out
does not help much, so we'll go with one example.  The commonly-used
"YUV&nbsp;4:2:2" format (<tt>V4L2_PIX_FMT_YUV422</tt>, fourcc
<tt>422P</tt>) uses three separate arrays.  A 4x4 image would be
represented like this:
<p>

<table>
<tr>
    <td>Y plane:</td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    </tr></table></td>
    </tr>
    <tr><td></td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    </tr></table></td>
    </tr>
    <tr><td></td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    </tr></table></td>
    </tr>
    <tr><td></td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    	<td bgcolor="gray">&nbsp;</td>
    </tr></table></td>
    </tr>

<tr><td colspan=2>&nbsp;</td></tr>

<tr>
    <td>U plane:</td>
    <td><table><tr>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    </tr></table></td>
    </tr>
<tr>
    <td></td>
    <td><table><tr>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    	<td bgcolor="blue">&nbsp;</td>
    </tr></table></td>
    </tr>

<tr><td colspan=2>&nbsp;</td></tr>

<tr>
    <td>V plane:</td>
    <td><table><tr>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    </tr></table></td>
    </tr>
<tr>
    <td></td>
    <td><table><tr>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    </tr></table></td>
    <td><table><tr>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    	<td bgcolor="red">&nbsp;</td>
    </tr></table></td>
    </tr>
</table>

<p>
As with the Bayer format, YUV 4:2:2 has one U and one V value for every
other Y value; displaying the image requires interpolating across the
missing values.  The other planar YUV
formats are:
<p>
<ul>

<li> <tt>V4L2_PIX_FMT_YUV420</tt>: the YUV 4:2:0 format, with one U and one
     V value for every four Y values.  U and V must be interpolated in both
     the horizontal and vertical directions.  The planes are stored in
     Y-U-V order, as with the example above.
<p>
<li> <tt>V4L2_PIX_FMT_YVU420</tt>: like YUV 4:2:0, except that the
     positions of the U and V arrays are swapped.
<p>
<li> <tt>V4L2_PIX_FMT_YUV410</tt>: A single U and V value for each sixteen
     Y values.  The arrays are in the order Y-U-V.
<p>
<li> <tt>V4L2_PIX_FMT_YVU410</tt>: A single U and V value for each sixteen
     Y values.  The arrays are in the order Y-V-U.
</ul>

<p>
A few other YUV formats exist, but they are rarely used; see <a
href="http://v4l2spec.bytesex.org/spec/x3891.htm">this page</a> for the
full list.
<p>

<h3>Other formats</h3>
<p>

A couple of formats which might be useful for some drivers are:
<p>
<ul>
<li> <tt>V4L2_PIX_FMT_JPEG</tt>: a vaguely-defined JPEG stream; a little
more information can be found <a
href="http://v4l2spec.bytesex.org/spec/r11285.htm">here</a>.
<p>
<li> <tt>V4L2_PIX_FMT_MPEG</tt>: an MPEG stream.  There are a few variants
on the MPEG stream format; controlling these streams will be discussed in a
future installment.
</ul>
<p>
There are a number of other, miscellaneous formats, some of them
proprietary; <a href="http://v4l2spec.bytesex.org/spec/x5665.htm">this
page</a> has a list of them.
<p>

<h3>Describing formats</h3>
<p>

Now that we have an understanding of color formats, we can take a look at
how the V4L2 API describes image formats in general.  The key structure
here is <tt>struct v4l2_pix_format</tt> (defined in
<tt>&lt;linux/videodev2.h&gt;</tt>, which contains these fields: 
<p>
<ul>

<li> <tt>__u32 width</tt>: the width of the image in pixels.
<p>
<li> <tt>__u32 height</tt>: the height of the image in pixels.
<p>

<li> <tt>__u32 pixelformat</tt>: the fourcc code describing the image
     format. 
<p>
<li> <tt>enum v4l2_field field</tt>: many image sources will interlace the
     data - transferring all of the even scan lines first, followed by the
     odd lines.  Real camera devices normally do not do interlacing.  The
     V4L2 API allows the application to work with interlaced fields in a surprising
     number of ways.  Common values include <tt>V4L2_FIELD_NONE</tt>
     (fields are not interlaced), <tt>V4l2_FIELD_TOP</tt> (top field only),
     or <tt>V4L2_FIELD_ANY</tt> (don't care).  See <a
     href="http://v4l2spec.bytesex.org/spec/x6386.htm">this page</a> for a
     full list.
<p>
<li> <tt>__u32 bytesperline</tt>: the number of bytes between two adjacent
     scan lines.  It includes any padding the device may require.  For
     planar formats, this value describes the largest (Y) plane.
<p>
<li> <tt>__u32 sizeimage</tt>: the size of the buffer required to hold the
     full image.
<p>
<li> <tt>enum v4l2_colorspace colorspace</tt>: the colorspace being used.
</ul>
<p>

All together, these parameters describe a buffer of video data in a
reasonably complete manner.  An application can fill out a
<tt>v4l2_pix_format</tt> structure asking for just about any sort of format
that a user-space developer can imagine.  On the driver side, however,
things have to be restrained to the formats the hardware can work with.  So
every V4L2 application must go through a negotiation process with the
driver in an attempt to arrive at an image format that is both supported by
the hardware and adequate for the application's needs.  The next
installment in this series will describe how this 
negotiation works from the device driver's point of view.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Device_drivers-Video4Linux2">Device drivers/Video4Linux2</a></td></tr>
            <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Video4Linux2">Video4Linux2</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/218798/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor218995"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Video4Linux2 part 5a: colors and formats</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 25, 2007 4:34 UTC (Thu)
                               by <b>jwb</b> (guest, #15467)
                              [<a href="/Articles/218995/">Link</a>] 
      </p>
      
      </div>
      </summary>
      This excellent article reminds me of another excellent article, <a href="http://lurkertech.com/lg/packings/index.html">The Pixel Rosetta Stone: Packings and Colorspaces</a> which is part of a much larger work, <a href="http://lurkertech.com/lg/">The Lurker's Guide to Video</a>, which has been around for eons but remains somewhat obscure.
      
          <div class="CommentReplyButton">
            <form action="/Articles/218995/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor219356"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">RGB332 doesn't look right</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 27, 2007 0:29 UTC (Sat)
                               by <b>tbird20d</b> (subscriber, #1901)
                              [<a href="/Articles/219356/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      In your diagram for the RGB332 format, there should be two colors with 3 bits of information, and there are only 2 (for a total of 7 used bits instead of 8 bits).  I think this is an error.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/219356/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor219358"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">RGB332 doesn't look right</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 27, 2007 0:43 UTC (Sat)
                               by <b>corbet</b> (editor, #1)
                              [<a href="/Articles/219358/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      A red bit got away from me - they can be awfully slippery sometimes.  I found another one and stuck it in.
      
          <div class="CommentReplyButton">
            <form action="/Articles/219358/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor219835"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">RGB332 doesn't look right</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 30, 2007 21:22 UTC (Tue)
                               by <b>roelofs</b> (guest, #2599)
                              [<a href="/Articles/219835/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <FONT COLOR="#880044"><I>A red bit got away from me - they can be awfully slippery sometimes.</I></FONT>

<P>
You lost another one:  RGB0.  (Damned bits...  This sort of thing never used to happen when the MCP was in control.)

<P>
Greg
      
          <div class="CommentReplyButton">
            <form action="/Articles/219835/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor219840"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">RGB332 doesn't look right</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 30, 2007 21:38 UTC (Tue)
                               by <b>corbet</b> (editor, #1)
                              [<a href="/Articles/219840/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      Hmph.  That was a color problem from before I figured out which colors I really wanted to use.  The bit wasn't gone, just hiding.  Fixed.
      
          <div class="CommentReplyButton">
            <form action="/Articles/219840/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor219843"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">RGB332 doesn't look right</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 30, 2007 22:14 UTC (Tue)
                               by <b>roelofs</b> (guest, #2599)
                              [<a href="/Articles/219843/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <FONT COLOR="#884400"><I>That was a color problem from before I figured out which colors I really wanted to use.</I></FONT>

<P>
Everybody's a critic, I know, but...  I think it might work better to stick with a single shade for each channel and use a bullet or mid-dot or something to mark the most significant bit.  (Are these made out of mini-tables?  That was my assumption, but I haven't looked at the source yet.)  I find the pale blue and pale green to be much more similar to each other than to the "regular" blue and green, to the point that the very first case (light blue, dark blue, light green, ...) looks more like a single bit on a pale background than a two-bit grouping followed by a three-bit one.

<P>
To put it another way, the grouping of same-color bits is more important information than which individual bit is most significant, but the extreme paleness of the MSBs makes them the most visually striking part of the diagrams.  (IMHO. :-) )

<P>
Thanks,<BR>
Greg
      
          <div class="CommentReplyButton">
            <form action="/Articles/219843/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor219838"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">color spaces, whee!</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 30, 2007 22:03 UTC (Tue)
                               by <b>roelofs</b> (guest, #2599)
                              [<a href="/Articles/219838/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <FONT COLOR="#448800"><I>This colorspace also covers the set of YUV and YCbCr representations. This representation derives from the need for early color television signals to be displayable on monochrome TV sets.</I></FONT>

<P>
Well, that's one (techno-historical) way to look at it...  But perhaps more accurately, it derives from the physiology of the human eye, which basically has YUV- or YCbCr-like sensors in it.  The fact that YUV/YCbCr better lend themselves to certain compression tricks (even lossless ones, which is still sort of amazing to me) plays a role, too.

<P>
<FONT COLOR="#448800"><I>Conversion between YUV and RGB is not entirely straightforward, however; there are several formulas to choose from.</I></FONT>

<P>
Heck, conversion between RGB and RGB isn't entirely straightforward, either.  Aside from "gamma" (~brightness/contrast), which most of us are vaguely aware of, there are a whole host of other, interlinked concepts involved:  chromaticity, white point, color temperature, gamut, surround (ambient background lighting), rendering intent, ...  In addition, there are separate exponential transfer functions (~"gamma") for cameras, monitors, display cards (LUTs!), etc.; you need to know details about both the source <I>and</I> the destination devices, and often there are files in between.  It's a complicated mess, and it's <I>really</I> easy to get some (or all) of it wrong. :-/

<P>
Greg
      
          <div class="CommentReplyButton">
            <form action="/Articles/219838/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor219877"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">__u32 pixelformat:</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 31, 2007 4:06 UTC (Wed)
                               by <b>roelofs</b> (guest, #2599)
                              [<a href="/Articles/219877/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <FONT COLOR="#008844"><I>the fourcc code describing the image format</I></FONT>

<P>
...stored in <A HREF="http://v4l2spec.bytesex.org/spec/c1740.htm">little-endian format</A> (not native!), in case anyone else was wondering.

<P>
Greg
      
          <div class="CommentReplyButton">
            <form action="/Articles/219877/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor248713"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Video4Linux2 part 5a: colors and formats</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 7, 2007 11:04 UTC (Fri)
                               by <b>miku</b> (guest, #35152)
                              [<a href="/Articles/248713/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Various links to v4l2 spec seems to be broken.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/248713/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor256965"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Video4Linux2 part 5a: colors and formats</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 2, 2007 21:15 UTC (Fri)
                               by <b>jimparis</b> (guest, #38647)
                              [<a href="/Articles/256965/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment"><pre>
I believe the BA81 pattern is incorrect (the greens should be staggered, in a checkerboard
pattern).
</pre></div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/256965/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor900405"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Video4Linux2 part 5a: colors and formats</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 8, 2022 13:56 UTC (Fri)
                               by <b>marcolwn</b> (guest, #159572)
                              [<a href="/Articles/900405/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
some links are broken, here are the internet archive links:<br>
<p>
Colorspaces <br>
<a rel="nofollow" href="https://web.archive.org/web/20120505053358/http://v4l2spec.bytesex.org/spec/x2123.htm">https://web.archive.org/web/20120505053358/http://v4l2spe...</a><br>
<p>
YUV Formats <br>
<a rel="nofollow" href="https://web.archive.org/web/20120505061759/http://v4l2spec.bytesex.org/spec/x3891.htm">https://web.archive.org/web/20120505061759/http://v4l2spe...</a><br>
<p>
<p>
a little more information about JPEG<br>
<a rel="nofollow" href="https://web.archive.org/web/20120505053919/http://v4l2spec.bytesex.org/spec/r11285.htm">https://web.archive.org/web/20120505053919/http://v4l2spe...</a><br>
<p>
<p>
Reserved Format Identifiers <br>
<a rel="nofollow" href="https://web.archive.org/web/20120505060756/http://v4l2spec.bytesex.org/spec/x5665.htm">https://web.archive.org/web/20120505060756/http://v4l2spe...</a><br>
<p>
Field Order<br>
<a rel="nofollow" href="https://web.archive.org/web/20120503220250/http://v4l2spec.bytesex.org/spec/x6386.htm">https://web.archive.org/web/20120503220250/http://v4l2spe...</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/900405/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2007, Eklektix, Inc.<BR>
            
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
