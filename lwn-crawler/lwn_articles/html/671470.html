        <!DOCTYPE html>
        <html lang="en">
        <head><title>The 4.5 merge window opens [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/671470/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/670736/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/671470/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>The 4.5 merge window opens</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Ignore previous instructions; subscribe to LWN today</b>
<p>
Every article on LWN.net is written by humans, for humans. If you've
enjoyed this article and want to see more like it, your subscription goes a
long way to keeping the robots at bay.  We are offering <a href="https://lwn.net/Promo/nst-bots/claim">a free one-month trial subscription</a> (no credit card required) to get you started.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>January 13, 2016</br>
           </div>
As of this writing, just over 3,100 non-merge changesets have been pulled
into the mainline repository for the 4.5 development cycle.  As one would
expect three days into the merge window, things are just getting started.
Nonetheless, a number of significant changes have already been pulled.
Some of the more interesting of those are:
<p>
<ul>

<li> The device mapper's <a href="/Articles/459420/">dm-verity
     subsystem</a>, which is charged with validating the integrity of data
     on the underlying storage device, has gained the ability to perform
     <a
     href="https://en.wikipedia.org/wiki/Forward_error_correction">forward
     error correction</a>.  This allows for the recovery of data from a 
     device where "<q>several consecutive corrupted blocks</q>"
     exist.  The first consumer for this appears to be Android, which uses
     dm-verity already.
<p>
<li> As usual, there is a long list of improvements to the perf events
     subsystem; see <a
     href="http://git.kernel.org/linus/5cb52b5e1654f3f1ed9c32e34456d98559c85aa0">this
     merge commit</a> for a detailed summary.
<p>
<li> Mandatory file locking <a href="/Articles/667210/">is now optional</a>
     at configuration time.  This is a first step toward the removal
     (sometime in the distant future) of this unloved and little-used
     feature.
<p>
<li> The <a href="/Articles/659523/"><tt>copy_file_range()</tt> system
     call</a> has been merged.  It allows for the quick copying of a
     portion of a file, with the operation possibly optimized by the
     underlying filesystem. 
     The support code for <tt>copy_file_range()</tt> has also enabled an
     easy implementation of the NFSv4.2 CLONE operation.
<p>
<li> The User-Mode Linux port now supports the <tt>seccomp()</tt> system
     call.
<p>
<li> The <a href="/Articles/666220/"><tt>SOCK_DESTROY</tt> operation</a>,
     allowing a system administrator to shut down an open network
     connection, is now supported.
<p>
<li> The "clsact" network queueing discipline module has been added; see <a
     href="http://git.kernel.org/linus/1f211a1b929c804100e138c5d3d656992cfd5622">this
     commit changelog</a> for details and usage information.
<p>
<li> The "version 2" control-group interface is now considered official and
     non-experimental; it can be mounted with the <tt>cgroup2</tt>
     filesystem type.  Not all controllers support this interface yet,
     though.  See <a
     href="/Articles/671722/"><tt>Documentation/cgroup-v2.txt</tt></a> for
     details on the new interface.
<p>    
<li> New hardware support includes:
     <p>
     <ul>

     <li> <b>Cryptographic</b>:
	  Rockchip cryptographic engines and
	  Intel C3xxx, C3xxxvf, C62x, and C62xvf cryptographic
     	  accelerators.
     <p>
     <li> <b>Miscellaneous</b>:
     	  HiSilicon MBIGEN interrupt controllers,
	  Technologic TS-4800 interrupt controllers, and
	  Cirrus Logic CS3308 audio analog-to-digital converters.
     <p>
     <li> <b>Networking</b>:
     	  Netronome NFP4000/NFP6000 VF interfaces,
	  Analog Devices ADF7242 SPI 802.15.4 wireless controllers,
	  Freescale data-path acceleration architecture frame manager devices,
	  IBM VNIC virtual interfaces, and
	  STMicroelectronics ST95HF NFC transceivers.
     <p>
     <li> <b>Pin control</b>:
          Qualcomm MSM8996 pin controllers,
	  Marvell PXA27x pin controllers,
	  Broadcom NSP GPIO controllers, and
	  Allwinner H3 pin controllers.
     </ul>
</ul>
<p>
Changes visible to kernel developers include:
<p>
<ul>

<li> The <tt>follow_link()</tt> method in <tt>struct inode_operations</tt>
     has been replaced with:
     <p>
<pre>
    const char *(*get_link) (struct dentry *dentry, struct inode *inode,
    			     struct delayed_call *done);
</pre>
     <p>
     It differs from <tt>follow_link()</tt> (which was described
     in <a href="/Articles/650786/">this article</a>) by separating the
     <tt>dentry</tt> and <tt>inode</tt> arguments and, most importantly,
     being callable in the RCU-walk mode.  In that case, <tt>dentry</tt>
     will be null, and <tt>get_link()</tt> is not allowed to block.
<p>
     Also added in the same patch set was a "poor man's closures"
     mechanism, represented by <tt>struct delayed_call</tt>:
<p>
<pre>
    struct delayed_call {
	void (*fn)(void *);
	void *arg;
    };
</pre>
<p>
     See <a href="/Articles/671634/"><tt>include/linux/delayed_call.h</tt></a>
     for the (tiny) full interface.  In this case, <tt>get_link()</tt> should set
     <tt>done-&gt;fn</tt> to its <tt>inode</tt> destructor function â€”
     probably the 
     one that was previously made available as the (now removed)
     <tt>put_link()</tt> <tt>inode_operations</tt> method.
<p>
<li> There is a new memory-barrier primitive:
<p>
<pre>
    void smp_cond_acquire(condition);
</pre>
<p>
     It will spin until <tt>condition</tt> evaluates to a non-zero value,
     then insert a read barrier.
<p>
<li> There is a new stall detector for workqueues; if any workqueue fails
     to make progress for 30 seconds, the kernel will output a bunch of
     information that should help in debugging of problem.
<p>
<li> There is a new helper function:
<p>
<pre>
    void *memdup_user_nul(const void __user *src, size_t len);
</pre>
<p>
     It will copy <tt>len</tt> bytes from user space, starting at
     <tt>src</tt>, allocating memory for the result and adding a
     null-terminating byte.  Over 50 call sites have already shown up in
     the kernel.
<p>
<li> The configfs virtual filesystem now supports binary attributes; see
     the documentation changes at the beginning of <a
     href="http://git.kernel.org/linus/03607ace807b414eab46323c794b6fb8fcc2d48c">this
     commit</a> for details.
<p>
<li> Changes to the networking core mean that NAPI network drivers get busy
     polling for free, without the need to add explicit support.
<p>
<li> Patches moving toward the removal of protocol-specific checksumming
     from networking drivers (described in <a href="/Articles/667059/">this
     article</a>) have been merged.  See <a
     href="http://git.kernel.org/linus/93d085d222de7b8e7c7794dbd800c6a39df2eae2">this
     merge commit</a> for more information.
</ul>
<p>

The 4.5 merge window will probably stay open until January 24, so there is
time for a lot more changes to find their way into the mainline.  As usual,
LWN will track those changes and summarize them in the coming weeks; stay
tuned.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Releases-4.5">Releases/4.5</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/671470/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor671818"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 4.5 merge window opens</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 14, 2016 7:51 UTC (Thu)
                               by <b>kugel</b> (subscriber, #70540)
                              [<a href="/Articles/671818/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I still don't understand why copy_file_range() functionality wasn't simply added to splice()<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/671818/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor671941"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 4.5 merge window opens</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 14, 2016 18:34 UTC (Thu)
                               by <b>billygout</b> (guest, #70918)
                              [<a href="/Articles/671941/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Just a guess: They want to preserve the splice()'s EINVAL return value when neither file is a pipe, in order to avoid "breaking" user space in the case that user space is relying on the error?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/671941/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor671905"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 4.5 merge window opens</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 14, 2016 15:42 UTC (Thu)
                               by <b>tshow</b> (subscriber, #6411)
                              [<a href="/Articles/671905/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I'm always vaguely surprised these merge window summaries don't seem to mention GPU support updates.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/671905/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor671908"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 4.5 merge window opens</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 14, 2016 15:45 UTC (Thu)
                               by <b>corbet</b> (editor, #1)
                              [<a href="/Articles/671908/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      I can't get into the improvements in any device driver; would have to buy a bigger disk for the server.  I do try to mention significant things, like the amdgpu driver that went in a few cycles ago.
<p>
In this particular case, no GPU-related trees had been pulled by the time I wrapped that article up.  
<p>
Is there something in particular that you think was missing?
      
          <div class="CommentReplyButton">
            <form action="/Articles/671908/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor671920"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 4.5 merge window opens</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 14, 2016 16:44 UTC (Thu)
                               by <b>tshow</b> (subscriber, #6411)
                              [<a href="/Articles/671920/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;  Is there something in particular that you think was missing? </font><br>
<p>
Not as such; my focus is game dev, though, so a lot of my interest is in the state of the graphics stack.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/671920/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor671923"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 4.5 merge window opens</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 14, 2016 16:56 UTC (Thu)
                               by <b>SEJeff</b> (guest, #51588)
                              [<a href="/Articles/671923/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
You might also consider looking at the kernel newbies LinuxChanges page when this kernel is released for the gory details.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/671923/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor672165"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">GPU updates in 4.5</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 16, 2016 5:15 UTC (Sat)
                               by <b>pr1268</b> (subscriber, #24648)
                              [<a href="/Articles/672165/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <p>Wouldn't most of the GPU updates for which you're interested in happen in user space?</p>

<p>The only &quot;blockbuster&quot; GPU feature I've seen happen in the Kernel in recent memory is <a href="http://dri.freedesktop.org/wiki/DrmModesetting/">DRI modesetting</a>.  Besides specific GPU chipset drivers, that is.</p>

<p>My intuition tells me that the the remainder of the Kernel's GPU code (DRM / DRI / PCIe / bus architecture, moving video buffers around in memory, etc.) has stayed current with technology the past few years.</p>

      
          <div class="CommentReplyButton">
            <form action="/Articles/672165/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor671977"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 4.5 merge window opens</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 14, 2016 23:39 UTC (Thu)
                               by <b>gerdesj</b> (subscriber, #5446)
                              [<a href="/Articles/671977/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
"The SOCK_DESTROY operation"<br>
<p>
New?  My big toes have been performing that operation for decades.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/671977/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor672183"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">SOCK_DESTROY</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 16, 2016 11:54 UTC (Sat)
                               by <b>robbe</b> (guest, #16131)
                              [<a href="/Articles/672183/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
But now your Linux-running shoe (not Linux running-shoe, mind you!) can do it for you.<br>
<p>
BTW,<br>
  toe nail | cut | file<br>
in a cronjob may help with your problem.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/672183/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor672211"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">SOCK_DESTROY</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 16, 2016 22:52 UTC (Sat)
                               by <b>gerdesj</b> (subscriber, #5446)
                              [<a href="/Articles/672211/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
robbe, I had a good giggle over "toe nail | cut | file"  I have been a Unix, via Linux, aficionado for around 17 years and have never come across the toe command before - thank you. <br>
<p>
I may be off course but I suspect that English might be a second language for you.  There's generally no need to point out which of two interpretations is correct in an ambiguous sentence.  However the preceding rule can be broken for comic effect and an exclamation mark casually dropped in front of a bracket could be a hint that I'm way off course.<br>
<p>
Anyway, we need to come up with a command that parses in /bin/sh and nail doesn't cut it.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/672211/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2016, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
