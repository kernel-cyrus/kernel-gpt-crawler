        <!DOCTYPE html>
        <html lang="en">
        <head><title>The linux-next and -stable trees [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/571980/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/571558/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/571980/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>The linux-next and -stable trees</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Benefits for LWN subscribers</b>
<p>
The primary benefit from <a href="/Promo/nst-nag5/subscribe">subscribing to LWN</a>
       is helping to keep us publishing, but, beyond that, subscribers get
       immediate access to all site content and access to a number of extra
       site features.  Please sign up today!
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>October 29, 2013</br>
           <hr>
<a href="/Articles/KernelSummit2013/">2013 Kernel Summit</a>
</div>
While most kernel development focuses on the mainline, Linus's tree is not
the only one out there.  Two 2013 Kernel Summit sessions focused on a
couple of the other important trees: linux-next and the stable tree;
coverage of both those sessions has been combined into this article.
<p>
<h4>linux-next</h4>
<p>
Linux-next maintainer Stephen Rothwell attended the Kernel Summit as the
last stop in a long journey away from the office — and from maintenance of
the linux-next tree.  That tree continued to function in his absence, the

<a href="/Articles/572015/"><img
src="https://static.lwn.net/images/conf/2013/lce-ks/StephenRothwell-sm.jpg" width=125 height=156
alt="[Stephen Rothwell]" border=0 hspace=3 vspace=3 align="Right"></a>


first time it has ever done so.  Stephen's session covered the current
state of this tree and how things could maybe be made to work a little
better.
<p>
He started by thanking Thierry Reding and Mark Brown for keeping linux-next
going during his break.  Linux-next is a full-time job for him, so it has
been hard to hand off in the past, but the substitute maintainership
appears to have worked this time.
<p>
Stephen routinely looks at the code that flows into the mainline during
merge windows to see how much of it had previously appeared in linux-next.
For recent kernels, that figure has been approaching 90%; it would probably
be difficult, he said, to do better than that.  What might be improved a
bit, though, is how <i>long</i> that code is in linux-next.  In general,
only 72% of
the code that appears in linux-next is there  one week before the merge window
opens; that figure drops to less than 60% two weeks prior.  So he tends to
be busy in the last couple weeks of the development cycle, dealing with
lots of merge conflicts and build 
failures.  It leads to some long days.  It would, he allowed, be nice of
more of that code got into linux-next a bit earlier.
<p>
There are, he said, 181 active trees merged into linux-next every day.
Some of those are second-level trees that, eventually, reach mainline by
way of another subsystem maintainer's tree.  
<p>
The worst problem he encounters is whole-tree changes that affect files
across the kernel.  Those create a lot of little messes that he must then
try to clean up.  It would be nice, he said, to find a better way to do
things like API changes that require changes all over.  Linus added that
the reformatting of files to fix coding-style issues before applying small
changes is "really nasty," leading to "conflicts from hell."  It would be
better to separate things like white-space changes from real work by a full
release — or to not do the trivial changes at all.  Ben Herrenschmidt
suggested that white-space changes could be done at the end of a series,
making them easy to drop, but Linus said that doesn't help, that the
conflicts still come about.  The best way to do white-space changes if they
must be done, he said, is to do them to otherwise quiescent code.
<p>
Stephen said that he still sees more rebasing of trees than he would like;
rebasing should be avoided whenever possible.  Grant Likely asked about one
of the common cases for rebasing: the addition of tags like Acked-by to
patches that already appear in linux-next.  Linus said that this is a bit
of a gray area but that, in general, if those tags do not show up in a
timely manner, it's usually best not to bother with them.  Stephen added
that the addition of tags to patches in a published git tree may be an
indication that the tree has been published prematurely; such trees should
not be fed into linux-next until they are deemed ready for merging.
<p>
James Bottomley pointed out that developers often publish git trees to get
attention from Fengguang Wu's automated build-and-test system.  But such
trees do not need to be fed into linux-next to get that kind of testing;
they can be put out on a separate testing branch.  Ingo Molnar said that
some tags, like Tested-by, can arrive fairly late; we really do not
want to drop them and fail to credit our testers.  Ted Ts'o added that
employers often count things like Reviewed-by tags and that it is important
to get them in.
<p>
Linus's response was that timeliness matters; a too-late review is
essentially useless anyway.  That said, he also said that some people do
take the "no-rebase" policy a little bit too far.  There are times when
rebasing a tree can be justified, especially if other developers are not
basing their own trees on the rebased tree.  For example, when a patch
turns out to be a bad idea, it can be better make it disappear from the
history and to "pretend that all crap just didn't happen."  Ben added that
he asks his submitters to base their trees on the mainline; then he can
rebase his tree and they will not be adversely affected by it.
<p>
Dave Jones complained about bugs which are claimed to be "fixed in
linux-next," but those fixes then sit in linux-next for months until the
next development cycle comes around.  The right response to that problem,
Andrew Morton said, was to "steal them" and forward them directly to Linus
for immediate merging.
<p>
In general, Linus said, he has been using the linux-next tree a lot more
than he used to because it is working a lot better.  It has become a good
indication of what will be coming in the next merge window.  In general,
the group agreed that linux-next is a valuable resource that has done a lot
to make the development process work more smoothly.
<p>
<h4>The stable tree</h4>
<p>
Stable tree maintainer Greg Kroah-Hartman gave a quick update on the state
of the various stable trees he runs.  One of the biggest changes in stable
tree maintenance, he said, is that he is starting to delay the inclusion of
patches until they have appeared in one of Linus's -rc kernels; that delay
will typically be one or two weeks.  There have
been a few incidents recently where "stable" patches have caused
regressions; Greg hopes that, by inserting a small delay, he can flush out
the problematic patches before shipping them in a stable release.
<p>
Among the other problems that Greg is trying to address is maintainers who
never mark 
any patches for the stable tree.  "We need to fix that," he said.  There is
also the problem Dave mentioned, where stable fixes live in linux-next for

<a href="/Articles/572018/"><img
src="https://static.lwn.net/images/conf/2013/lce-ks/GregKH-sm.jpg" width=125 height=156
alt="[Greg Kroah-Hartman]" border=0 hspace=3 vspace=3 align="left"></a>

months; "don't do that."  If a patch is tagged for stable, he said, that
means it should go out soon, not languish for months.  James said that
sometimes he will hold stable fixes because he needs people to test them;
he does not have every piece of SCSI hardware, and so cannot verify that
every patch works as advertised.
<p>
Greg went on to say that it would be nice to have some way to automate the
task of figuring out how far back a given patch needs to be backported.  To
that end, some developers are proposing the addition of a "Fixes:" tag to
bug-fix patches.  That tag would include the SHA hash of the commit that
caused the original problem, along with that patch's subject line.
Including the hash of the bad commit is better than just putting an initial
version; it helps maintainers of non-mainline trees figure out if the fix
applies to their version of the kernel or not.
<p>
Linus jumped in to say that he would like everybody to run this command in
their repositories:
<p>
<pre>
    git config core.abbrev 12
</pre>
<p>
That causes git to abbreviate commit hashes to 12 characters.  The default
of seven characters is too small to prevent occasional hash collisions in
the kernel; it was, he said, a big mistake made early in git's history.  He
also noted that he spends a lot of time fixing up hashes in patch, many of
which are "clearly bogus."  Most of the problems, most likely, are caused
by the rebasing of trees.
<p>
James asked: what should be done about patches that should have been marked
for stable but, for whatever reason, did not get tagged?  The answer was to
send the relevant mainline git IDs to stable@vger.kernel.org; the rest will
be taken care of.
<p>
Arnd Bergmann asked whether there had been complaints about the dropping of
support for the 3.0.x series.  Greg answered that people are mostly happy
and not complaining.  One person is considering picking up 3.0 maintenance,
but Greg does not think that will happen.
<p>
Other problems that Greg mentioned including people reporting that things
have been broken in stable, but the real problem is in the mainline.  Those
reports usually come, he said, from people who are not testing Linus's -rc
releases.  He also mentioned "certain distributors" who are not good about
sending in the fixes they apply to their own kernels.  Those fixes tend to
be especially useful, since they were applied in response to a real problem
that somebody encountered.  If anybody wants to help out the stable process, he
said, digging through distributor kernels for these fixes would be a useful
thing to do.
<p>
As the session wound to a close, Greg was asked about what he does with
patches that do not apply to older kernels.  His response is that he will
bounce them back to the maintainer for backporting.  Subsystem maintainers,
he said, need not worry about patches being tweaked on their way into
-stable.
<p>
[Next: <a href="/Articles/571991/">Testing</a>].<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Development_model-linux-next">Development model/linux-next</a></td></tr>
            <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Development_model-Stable_tree">Development model/Stable tree</a></td></tr>
            <tr><td><a href="/Archives/ConferenceIndex/">Conference</a></td><td><a href="/Archives/ConferenceIndex/#Kernel_Summit-2013">Kernel Summit/2013</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/571980/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor572204"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The linux-next and -stable trees</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 30, 2013 13:07 UTC (Wed)
                               by <b>and</b> (guest, #2883)
                              [<a href="/Articles/572204/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Would anybody care to create a speculative list of these "certain distributors" and their possible motivations? I suppose that both are mainly of commercial nature...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/572204/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor572206"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Certain distributors</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 30, 2013 13:12 UTC (Wed)
                               by <b>corbet</b> (editor, #1)
                              [<a href="/Articles/572206/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      Greg named a few.  I think it has a lot more to do with available time and attention than any sort of overt competitive moves.
      
          <div class="CommentReplyButton">
            <form action="/Articles/572206/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor572207"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Certain distributors</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 30, 2013 13:19 UTC (Wed)
                               by <b>and</b> (guest, #2883)
                              [<a href="/Articles/572207/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; I think it has a lot more to do with available time and attention than any sort of overt competitive moves.</font><br>
<p>
ah, okay. Still, not taking one's time to properly upstream a fix is usually motivated by commercial constraints; it's just not malicious ;)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/572207/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor572513"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Certain distributors</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 31, 2013 15:41 UTC (Thu)
                               by <b>gregkh</b> (subscriber, #8)
                              [<a href="/Articles/572513/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
No, it's usually the non-commercial (i.e. no corporate backing) that are the worse offenders.<br>
<p>
With the notable exception of Debian, they are wonderful, and push their stuff upstream to me very well, as does Fedora.  Those two are the best, everyone else is bad, with some much worse than others.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/572513/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor572459"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The linux-next and -stable trees</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 31, 2013 9:32 UTC (Thu)
                               by <b>mgedmin</b> (subscriber, #34497)
                              [<a href="/Articles/572459/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The name of the list is a bit male-centric, wouldn't you say?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/572459/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor572460"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The linux-next and -stable trees</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 31, 2013 9:33 UTC (Thu)
                               by <b>mgedmin</b> (subscriber, #34497)
                              [<a href="/Articles/572460/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Gag, this was meant for a different article.  Apologies.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/572460/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor573273"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The linux-next and -stable trees</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 7, 2013 23:09 UTC (Thu)
                               by <b>BenHutchings</b> (subscriber, #37955)
                              [<a href="/Articles/573273/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Some other points I noted from the linux-next discussion:<br>
<p>
Steven Rostedt noted the practice of adding a Link tag in commits with the URL of the original patch mail.  This allows too-late tags to be found indirectly.<br>
<p>
Stephen Rothwell said he is only compile-testing linux-next at the moment.  However, some other developers, including Mark Brown, do develop on top of it so are actually booting and running it.  Others (such as Fengguang Wu) are running automated boot tests.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/573273/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2013, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
