        <!DOCTYPE html>
        <html lang="en">
        <head><title>2.6.31 merge window, week 2 [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/338063/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/337854/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/338063/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>2.6.31 merge window, week 2</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Benefits for LWN subscribers</b>
<p>
The primary benefit from <a href="/Promo/nst-nag5/subscribe">subscribing to LWN</a>
       is helping to keep us publishing, but, beyond that, subscribers get
       immediate access to all site content and access to a number of extra
       site features.  Please sign up today!
</blockquote>
<div class="FeatureByline">
           By <b>Jake Edge</b><br>June 24, 2009</br>
           </div>
<p>
There have been around 2050 non-merge changesets merged into the mainline
since last week's <a href="http://lwn.net/Articles/336953/">article</a>,
bringing the total to 8288 changes merged for 2.6.31.  The merge
window has closed, so all major features of 2.6.31 (with the possible
exception of the S+Core architecture) will have been merged.
Interesting changes since last week that are user visible include:

<ul>

<p>
<li>
The MIPS architecture has added support for hugetlbfs, as well as
hibernation support (but only for uni-processor systems).  

<p>
<li>
The SLUB page allocator has added new diagnostic information
<tt>printk()</tt>s for
debugging OOM conditions.

<p>
<li>
A <tt>/proc/softirqs</tt> file has been added to show the number of
software interrupts for each CPU.  Also, a "softirq" line has been added to
<tt>/proc/stat</tt>. 

<p>
<li>
The <a href="http://lwn.net/Articles/338548/">gcov profiling
infrastructure</a>, for code coverage testing, has been 
merged.  It adds functions needed by the profiling code, kbuild support for
building kernels with gcov profiling, along with a debugfs interface to
retrieve the profiling data.

<p>
<li>
An <a href="http://lwn.net/Articles/338549/">API for pulse-per-second (PPS)
devices</a> has been added.  These are 
devices which provide a high-precision signal that can be used to adjust
system clock time.

<p>
<li>
The <tt>EXT4_IOC_MOVE_EXT</tt> <tt>ioctl()</tt> has been added to support
ext4 online defragmentation.

<p>
<li>
A sysfs interface to add I2C devices, which takes the place of various
force_* module parameters, has been merged.

<p>
<li>
A command stream checker for Radeon r3xx-r5xx hardware has been added to
stop user-space processes from accessing memory outside of what they own.

<p>
<li>
The perf tool has added multiple features, including raw data output as well as call graph profiling.

<p>
<li>
The PowerPC architecture has added support for software performance counters.

<p>
<li>
PCI end-to-end CRC checking (ECRC) can now be enabled or disabled with the
<tt>ecrc</tt> boot parameter.

<p>
<li>
A PCI Express Advanced Error Reporting (AER) software error injector has
been merged.

<p>
<li>
<a href="http://lwn.net/Articles/313437/">NFS version 4.1</a> client
support has been added as an experimental feature. 
Server support for 4.1 is, as yet, not merged.

<p>
<li>
Firewire (IEEE 1394) now has support for IPv4 networking.

<p>
<li>New device drivers

    <ul>
    <p>
    <li><b>Architectures/processors/systems</b>: Keymile KMETER1 PPC
    boards, X-ES Freescale MPC85xx-based single-board computers, Palm Treo
    680 smartphones, Openmoko GTA02 / Freerunner phones, MINI2440
    ARM-based development boards.

    <p>
    <li><b>Network</b>: Xtensa S6105 GMAC ethernet devices.

    <p>
    <li><b>Input devices</b>: TI DaVinci DM355 EVM keypads and IR
    remotes, TWL4030 Power buttons, WM97xx Atmel accelerated touchscreens,
    LM8323 keypad chips, W90P910 touchscreens, EETI touchscreen panels,
    Synaptics I2C touchpads, 

    <p>
    <li><b>Miscellaneous</b>: Toshiba TXx9 SoC DMA controllers, TX4939
    hardware random number generators, ST-Ericsson AB3100 Mixed Signal
    circuits (core functionality needed for other AB3100 devices), PCAP
    ASIC for EZX phones (needed to support other devices), Epson
    RX-8025SA/NB real-time clocks, IBM CPC925 PPC Memory Controller,
    PrimeCell PL061 GPIO devices, TI DaVinci DM355 EVM Keypad and IR
    remote devices, VIA SD/MMC card readers,  MSM7K onboard serial devices,
    NAND Flash devices for OMAP2 and OMAP3, Broadcom BCM47xx watchdog
    timers, PNX833x hardware watchdog timers, TWL4030 watchdog timers,
    ST-Ericsson COH 901 327 watchdog timers, Freescale STMP3XXX watchdog
    timers, FibreChannel ELS/CT pass-thru support, Synopsys DesignWare I2C
    adapters, Maxim MAX17040 Fuel Gauge batteries.


    <p>
    <li><b>Staging</b>: Cavium Networks Octeon ethernet ports, CPC CAN USB
    driver, USB Quatech ESU-100 8 Port Serial Driver (as serqt_usb2,
    replacing the 
    obsolete serqt_usb staging driver), RDC_17F3101X IDE devices,
    Displaylink USB framebuffer devices, Realtek RTL8192 USB wifi devices.
    
    </ul>

</ul>

<p>
Changes visible to kernel developers include:

<ul>

<p>
<li>
Quite a bit of Big Kernel Lock (BKL) removal code has been merged in the
<tt>fs/</tt> tree.  Now, all of the <tt>super_operations</tt> and
<tt>address_space_operations</tt> are called without holding
the BKL.

<p>
<li>
<tt>IRQF_SAMPLE_RANDOM</tt>, which governs whether a driver's interrupts
are used as an entropy source, has been added to the
feature-removal-schedule.

<p>
<li>
The memory debugging infrastructure for DRM has been removed. "<q>It hasn't been used in ages, and having the user tell your how much
    memory is being freed at free time is a recipe for disaster even if it
    was ever used.</q>"

<p>
<li>
David Miller is now the IDE subsystem maintainer, taking over from
Bartlomiej Zolnierkiewicz, in a friendly handoff.  Miller plans to put IDE
into maintenance-only mode.

<p>
<li>
The SCSI device information matching has added support for multiple
blacklist tables.

<p>
<li>
The instrumentation of jbd2 and ext4 has been converted from kernel markers
to tracepoints.

<p>
<li>
OCFS2 has added support for lockdep, by adding the proper lockdep
annotations for all of the cluster locks except those that are acquired for
a node, rather than a process.

<p>
<li>
Access control list (ACL) information is now cached in <tt>struct inode</tt> for
some filesystems (jfs, ext2, ext3, ext4, jffs2, btrfs, reiserfs, nilfs2,
xfs). 

</ul>

<p>
Since the merge window has closed, the next step is stabilization.
Something approaching 3000 more changes will likely make their way into the
mainline before the 2.6.31 release, which should happen in late
August or early September.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Releases-2.6.31">Releases/2.6.31</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/338063/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor338651"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">2.6.31 merge window, week 2</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jun 25, 2009 14:08 UTC (Thu)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/338651/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <blockquote>
A command stream checker for Radeon r3xx-r5xx hardware has been added to stop user-space processes from accessing memory outside of what they own. 
</blockquote>

This wasn't already present?! Wasn't this a gigantic security hole? (If not, why not?)

      
          <div class="CommentReplyButton">
            <form action="/Articles/338651/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor338698"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">2.6.31 merge window, week 2</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jun 25, 2009 16:23 UTC (Thu)
                               by <b>elanthis</b> (guest, #6227)
                              [<a href="/Articles/338698/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Yes, but that was experimental code, not meant to be used by the general populace just yet and hence not enabled by default in kernel builds.  The whole radeon-CP, TTM, DRI2, KMS stuff is all brand new, after all.  Some distros have been enabling it by default, granted, but that's their security failing.  :)<br>
<p>
Note that the new checker is about video memory, not general process memory, so the security implications are a bit limited (although still serious enough to warrant fixing on multi-user systems, of course).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/338698/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor338745"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">2.6.31 merge window, week 2</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jun 25, 2009 19:07 UTC (Thu)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/338745/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Ah, good, it's not as bad as the mach64 DRI, which was never merged <br>
anywhere because it allowed the video card to be instructed to DMA over <br>
*anything*.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/338745/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor339814"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">2.6.31 merge window, week 2</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 3, 2009 1:17 UTC (Fri)
                               by <b>kabloom</b> (guest, #59417)
                              [<a href="/Articles/339814/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It appears from last week's story about the merge window that this code is the second part of Radeon Kernel Modesetting which was merged last week, and it wasn't necessary before.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/339814/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor339032"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">2.6.31 merge window, week 2</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jun 29, 2009 1:55 UTC (Mon)
                               by <b>bfields</b> (subscriber, #19510)
                              [<a href="/Articles/339032/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <p>"Server support for 4.1 is, as yet, not merged. "

<p>Actually, it was merged in 2.6.30.  It's incomplete, though.
      
          <div class="CommentReplyButton">
            <form action="/Articles/339032/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2009, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
