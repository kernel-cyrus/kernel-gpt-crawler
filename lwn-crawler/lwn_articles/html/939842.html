        <!DOCTYPE html>
        <html lang="en">
        <head><title>Making life (even) harder for proprietary modules [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/939842/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/940291/">Return to the Front page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/939842/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>Making life (even) harder for proprietary modules</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>This article brought to you by LWN subscribers</b>
<p>
Subscribers to LWN.net made this article &mdash; and everything that
       surrounds it &mdash; possible.  If you appreciate our content, please
       <a href="/Promo/nst-nag3/subscribe">buy a subscription</a> and make the next
       set of articles possible.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>August 3, 2023</br>
           </div>
The kernel community has never had a smooth relationship with the purveyors
of proprietary kernel modules.  Developers tend to strongly dislike those
modules, which cannot be debugged or fixed by anybody other than their
creator, and many see them as a violation of the kernel's license and their
copyrights on the code.  Nonetheless, proprietary modules are tolerated,
within bounds.  A recent patch from Christoph Hellwig suggests that those
bounds are about to be tightened slightly, in a somewhat surprising way.
<p>
Back in 2006, there was <a href="/Articles/215075/">a brief effort</a> to
ban the loading of proprietary kernel modules altogether.  That attempt was
<a href="/Articles/214149/">shut down</a> by Linus Torvalds for a number of
reasons, starting with the fact that simply loading a proprietary module
into the Linux kernel is, on its own, not a copyright violation; it is
something that any Linux user is allowed to do.  Trying to ban such
modules, Torvalds said, would be an indication that the development
community is more interested in arguing about licenses than in improving
the technology.
<p>
<i>Distributing</i> a proprietary module might be a copyright violation,
though, if the module itself is a derived work of the kernel code.  But
"derived work" is a fuzzy concept, and the kernel itself cannot really
make that judgment.  There is a longstanding mechanism in the kernel
designed to keep infringing modules out, though: GPL-only exports.  A
kernel module cannot do anything useful without accessing symbols
(functions and data structures) exported to it by the kernel.  Many of
those symbols are restricted to modules that have declared a GPL-compatible
license, thus fencing proprietary modules away from a lot of kernel
functionality. 
<p>
In theory, the GPL-only marking indicates that a symbol is so deeply tied
into the kernel that any code making use of it must necessarily be a
derived work of the kernel.  In practice, the developers making those
decisions do not carry out an analysis to determine whether that is the
case â€” and they are not usually qualified to do such an analysis anyway.
Instead, symbols are routinely marked GPL-only as a way of making life
harder for proprietary modules in general.
<p>
To the surprise of, well, almost nobody, the creators of proprietary
modules have long sought ways around the limitations imposed by GPL-only
exports.  This has included falsely declaring a GPL-compatible license, but
doing so is such an overt admission of guilt that companies instinctively
avoid it.  Instead, they look for more subtle ways to get the access they
need. 

One scheme was inadvertently <a href="/Articles/827596/">revealed</a> in
2020 as part of a larger patch set intended to make a form of peer-to-peer
DMA work.  If a module declares itself to have a GPL-compatible license, it
will have full access to all of the symbols exported by the kernel.  If
that module then imports symbols from a proprietary module, it can serve as a
go-between, making the full kernel available to the proprietary code.  This
is a variant of the often-used "GPL condom" approach.
<p>
At that time, <a href="https://git.kernel.org/linus/262e6ae7081d">Hellwig
merged a patch</a> intended to make that method more difficult.  In current
kernels, any module that uses symbols from a proprietary module is treated
as being proprietary itself; it immediately loses its ability to access
GPL-only symbols.  If the module has already gained access to any GPL-only
symbols, any attempt it makes to import symbols from a proprietary module
will fail.  This check breaks the ability of a module to serve as a
go-between, sending proprietary-module vendors scurrying back to their
lairs complaining about how they have been foiled again.
<p>
There is always another way, though, it seems.  The kernel provides a macro
called <a
href="https://elixir.bootlin.com/linux/v6.4.7/source/include/linux/module.h#L303"><tt>symbol_get()</tt></a>,
which turns around and calls <a
href="https://elixir.bootlin.com/linux/v6.4.7/source/kernel/module/main.c#L1296"><tt>__symbol_get()</tt></a>
to do the real work, which happens to be looking up the address associated
with a kernel symbol.  This function, which has been in the kernel since
the 2.5.48 release in 2002 (where it was added as a part of the wholesale
replacement of the module loader), has a specific limitation, though: it
only looks up symbols provided by loadable modules.  It is intended for use
with tightly linked modules that need to reference each other in situations
where one of the modules may not be loaded, and without creating reference
loops.  By appearances, it cannot be used to find the location of GPL-only
kernel symbols, and would seem to be of little use for proprietary-module
vendors trying to bend the rules.
<p>
What <tt>symbol_get()</tt> <i>can</i> be used for, though, is obtaining
addresses from a proprietary module without going through the normal import
mechanism (and its restrictions).
It can, in other words, be used to circumvent the 2020 fix, making it once
again possible for a nominally GPL-licensed module to call into a
proprietary module and give that module access to the kernel functionality
it needs.  Hellwig has <a
href="/ml/linux-kernel/20230731083806.453036-6-hch@lst.de/">asserted</a>
that NVIDIA, a company long known for its proprietary kernel modules, has
duly modified its code to make use of this workaround.
<p>
In response, he posted <a
href="/ml/linux-kernel/20230731083806.453036-1-hch@lst.de/">this patch
set</a> (since <a
href="/ml/linux-kernel/20230801173544.1929519-1-hch@lst.de/">revised</a>)
to close the hole once again.  It changes the behavior of
<tt>symbol_get()</tt>, causing it to fail when asked to look up a symbol
that is <i>not</i> marked GPL-only.  This is an inversion of the usual test,
which denies access to symbols that <i>are</i> marked GPL-only.  The
reasoning is that <tt>symbol_get()</tt> has always been intended for
low-level cooperation deep within the kernel, where everything is expected
to be GPL-only anyway.  As it happens, a handful of the uses in the kernel
were for symbols that were not so marked, so the patch set includes changes
to make the symbols referenced in those cases GPL-only.
<p>
The <tt>symbol_get()</tt> change also, coincidentally, makes it impossible
for a GPL-licensed kernel module to resolve symbols defined inside a
proprietary module using <tt>symbol_get()</tt>.  Once this change finds its
way into a mainline release and, from there, into distributions, the
developers of proprietary modules will have to find another way to gain
access to the kernel internals they need.  The change has been <a
href="/ml/linux-kernel/ZMqeJT9Fv0zzw3%2Fv@bombadil.infradead.org/">applied</a>
by module maintainer Luis Chamberlain, so the chances of it going into the
mainline eventually seem fairly good.
<p>
Given how long this conflict has been simmering, there is little doubt that
authors of proprietary modules will find another way to bypass the intent
of the kernel community.  Proprietary or not, modules are running within
the kernel's address space, so the attack surface available to any module
attempting to circumvent the kernel's symbol-access policies is large and
can probably never be properly secured.  The best that can be done is to
continue to make life uncomfortable for those who would ship binary-only
kernel modules in the hope that they eventually take the hint and create a
freely licensed solution.  It is not a perfect technique, but it has often
worked over the years.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Copyright_issues">Copyright issues</a></td></tr>
            <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Modules-Exported_symbols">Modules/Exported symbols</a></td></tr>
            <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Releases-6.6">Releases/6.6</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/939842/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor940368"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 3, 2023 17:59 UTC (Thu)
                               by <b>hailfinger</b> (subscriber, #76962)
                              [<a href="/Articles/940368/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The games played by wrapper modules go back even further (April 2004): <a href="https://lwn.net/Articles/82309/">https://lwn.net/Articles/82309/</a><br>
<p>
Back then, the complaint was that MODULE_LICENSE checks were circumvented by inserting  a "\0" into the license declaration:<br>
MODULE_LICENSE("GPL\0for files in the \"GPL\" directory; for others, only LICENSE file applies");<br>
<p>
String comparisons stop at the first "\0", so the module loader didn't complain.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940368/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940392"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 3, 2023 20:41 UTC (Thu)
                               by <b>NUXI</b> (subscriber, #70138)
                              [<a href="/Articles/940392/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Woah #tbt<br>
<p>
I'm the Jon from that email thread. Can't believe that was 19 years ago now.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940392/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940419"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">@mtu.edu</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 4, 2023 5:34 UTC (Fri)
                               by <b>saladin</b> (subscriber, #161355)
                              [<a href="/Articles/940419/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I see you had a mtu.edu email address back before I was born. I'll starting there in a few weeks myself.<br>
<p>
How's that for a throwback?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940419/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor940387"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 3, 2023 20:24 UTC (Thu)
                               by <b>flussence</b> (guest, #85566)
                              [<a href="/Articles/940387/">Link</a>] (24 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I thought the situation with NVIDIA nowadays was that they'd contributed a "GPL" DRM driver that just loads a firmware blob larger than the average allyesconfig zImage and a userspace libGL blob larger than the average Debian install. Which sounds like it'd be entirely within the letter of the law here (Linux has strong opinions on both those things being permissible), yet obviously still useless.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940387/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940391"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 3, 2023 20:32 UTC (Thu)
                               by <b>farnz</b> (subscriber, #17727)
                              [<a href="/Articles/940391/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <p>That's where they're headed, but they're not yet there - most installs of the NVIDIA driver will use the traditional proprietary module, not the GPL one.
<p>It looks like the GPL driver relies on there being a microprocessor on the GPU that can run most of the "old" proprietary driver code, reducing the kernel driver to interfacing userspace to that microprocessor. This has advantages for nouveau replacements, in that you can reuse the NVIDIA firmware blob with Free userspace code, but is basically about moving the proprietary code off the CPU into a processor inside the GPU.


      
          <div class="CommentReplyButton">
            <form action="/Articles/940391/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor941196"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 11, 2023 8:18 UTC (Fri)
                               by <b>jengelh</b> (subscriber, #33263)
                              [<a href="/Articles/941196/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt;moving the proprietary code off the CPU into a processor inside the GPU</span><br>
<p>
Ironic to see how we're going back to how things were done ~30 years ago, when functionality was in fact on the daughterboard and didn't take up so much resources of the main system (particularly CPU cycles?).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/941196/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor941210"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 11, 2023 10:27 UTC (Fri)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/941210/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
And 60 years ago, when your mainframe was (still is?) a bunch of individual boards all working together.<br>
<p>
Somewhere I remember it being discussed, and how it's all just a trade-off. Back in the days of winmodems and winprinters, the cpu was cheaper than dedicated power on the network card / in the printer, so cost conscious manufacturers moved all the compute into the cpu. Before that, the cpu was too slow and dedicated silicon was a better choice. Now with powerful GPUs it's swinging the other way - separate GPUs are both cheaper and faster.<br>
<p>
And even with things like AMD's APUs, I get the impression they are actually a CPU and a GPU sharing the same chip, so they are actually separate silicon, just right next to each other to make things run faster with shared cache and physical proximity.<br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/941210/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor940413"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 4, 2023 2:51 UTC (Fri)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/940413/">Link</a>] (20 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
NVidia has truly opened their driver, but its source code is deep in the "eye cancer" region of quality. So there's no chance of it being merged into the mainline any time soon. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940413/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940439"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 4, 2023 13:20 UTC (Fri)
                               by <b>rahulsundaram</b> (subscriber, #21946)
                              [<a href="/Articles/940439/">Link</a>] (19 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; NVidia has truly opened their driver, but its source code is deep in the "eye cancer" region of quality.</span><br>
<p>
My understanding is that Nvidia didn't truly open their driver but instead move a lot of functionality over to proprietary firmware.  Is that not the case?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940439/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940487"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 4, 2023 14:46 UTC (Fri)
                               by <b>jgg</b> (subscriber, #55211)
                              [<a href="/Articles/940487/">Link</a>] (12 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Most HW these days has FW. Some of it is very big and complicated. Go look at your storage device, for instace. Or what is running under your cloud VM. Or the BIOS that boots Linux in the first place.<br>
<p>
Most of the server HW these days is some open driver that talks to some FW thing. Linux on servers pretty much runs inside a cacoon of propritary FW/SW layers.<br>
<p>
An open driver that can drive a FW interface is still an open driver, at least as far as Linux is concerned.<br>
<p>
Open HW and Open FW is an interesting philisophical position, there are definately groups pushing that way, but Linux kernel is not.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940487/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940490"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 4, 2023 14:55 UTC (Fri)
                               by <b>rahulsundaram</b> (subscriber, #21946)
                              [<a href="/Articles/940490/">Link</a>] (11 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; An open driver that can drive a FW interface is still an open driver, at least as far as Linux is concerned.</span><br>
<p>
Sure but my question was more specific than that.   Did Nvidia open up their driver as it is or did they open it up after moving critical functionality to a proprietary firmware.  <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940490/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940491"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 4, 2023 15:18 UTC (Fri)
                               by <b>pizza</b> (subscriber, #46)
                              [<a href="/Articles/940491/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; Sure but my question was more specific than that. Did Nvidia open up their driver as it is or did they open it up after moving critical functionality to a proprietary firmware. </span><br>
<p>
Please don't tell me you agree with the FSF that proprietary firmware is okay as long as it's not upgradable/replaceable by the user.<br>
<p>
Every piece of hardware in [1] or connected to [2] the system I'm typing this on is running proprietary firmware.  Some of it is loaded at runtime [3], but most of it is not.  All of them have "Critical functionality" [4] implemented in proprietary firmware yet have fully Free Software drivers that are part of the mainline Linux kernel.<br>
<p>
nVidia moving to this approach (for the hardware that is capable of operating like this) represents a massive improvement over the old status quo and should be applauded, yet instead we're giving them grief for not going above and beyond what the "good guys" [5] are doing.<br>
<p>
[1] CPU, BIOS/embedded controller, ethernet controller, wifi controller, display controller, both SSDs, DVD drive, and so on.<br>
[2] Keyboard, Mouse, USB hubs, card readers/memory sticks/memory cards, USB speaker, both displays, webcam, and so on.<br>
[3] CPU, Display controller, ethernet &amp; wifi controllers, and maybe more.<br>
[4] As in without said proprietary firmware they're useful only as paperweights.  If even that.<br>
[5] ie AMD and Intel, which have been using this "open mainline driver that talks to highly proprietary firmware" approach for the better part of two decades.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940491/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940510"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 4, 2023 19:35 UTC (Fri)
                               by <b>dvdeug</b> (guest, #10998)
                              [<a href="/Articles/940510/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; nVidia moving to this approach (for the hardware that is capable of operating like this) represents a massive improvement over the old status quo </span><br>
<p>
Why? I see a minor reliability improvement by separating the Linux kernel code to be handled as a complete software package under the control of the Linux kernel community, and nVidia doing everything under the control of its subcomputer. But it does little or nothing to make the computer code more available to be examined or fixed, more open.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940510/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940514"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 4, 2023 20:44 UTC (Fri)
                               by <b>pizza</b> (subscriber, #46)
                              [<a href="/Articles/940514/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Before, nVidia GPUs less than about a decade old were effectively unusable with F/OSS drivers.  Meanwhile, the proprietary drivers, while highly performant for many things, caused all manner of system integration problems with non-LTS-type linux distributions.   You basically had to choose between fast-and-completely-proprietary (and a bit out of date) or unusably-slow-and-open (and up-to-date).  Or purchase different hardware.<br>
<p>
Going forward both nVidia's proprietary and F/OSS userspace build on top of the same kernel driver and device firmware.  That driver can be mainlined and kept up to date with ongoing kernel developments.   The amount of necessary proprietary code has shrunk significantly, and in the longer run, only the device firmware will remain proprietary.  This is effectively identical to what AMD has been doing for many years now, and what pretty much every other modern hardware vendor also does.<br>
<p>
Would it be nice if nVidia would open up their hardware entirely?  Of course!  But the overwhelming majority of the hardware the Linux supports has _always_ been proprietary, including all of what nVidia's competition produces.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940514/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor944938"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 20, 2023 7:53 UTC (Wed)
                               by <b>daenzer</b> (subscriber, #7050)
                              [<a href="/Articles/944938/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; Going forward both nVidia's proprietary and F/OSS userspace build on top of the same kernel driver and device firmware. That driver can be mainlined and kept up to date with ongoing kernel developments.</span><br>
<p>
While the open source nvidia driver might be mainlineable in principle, Nvidia have not committed to doing so. So I wouldn't hold my breath.<br>
<p>
(I don't know if they have committed to phasing out the proprietary driver in favour of the open source one)<br>
<p>
<span class="QuotedText">&gt; This is effectively identical to what AMD has been doing for many years now, [...]</span><br>
<p>
Still quite a long way off, really. The amdgpu driver has been upstream for almost a decade (after years of preparation), and it contains pretty extensive documentation of how the hardware works.<br>
<p>
Being an upstream driver, amdgpu has to maintain backwards compatibility with older firmware versions. I don't know if Nvidia have committed to doing the same for their open source driver.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/944938/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor940517"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 4, 2023 21:02 UTC (Fri)
                               by <b>mfuzzey</b> (subscriber, #57966)
                              [<a href="/Articles/940517/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Having completely open source code on the CPU is still an advantage, even if it involves some of the functionality moving into closed firmware.<br>
<p>
Firstly it's better from a security / auditability point of view. Of course the closed firmware could still do nasty stuff but code running on an external device is significantly more limited in things it can touch than kernel code, especially if there is an IIOMMU as is usually the case these days.<br>
<p>
Secondly closed firmware does not constrain the whole system the way closed software does. By definition firmware only has to run on the hardware (external chip) it is intended to support. For example if you want to use a closed source kernel driver on an architecture it wasn't built for (Risc V  for example), you're out of luck, you can't recompile it. But if you have an open source kernel driver you can recompile it to support any CPU that Linux runs on with the firmware blob only needing to run on the external hardware so not caring about the CPU architecture.<br>
<p>
Of course, it would be even better to have open source firmware too but open kernel drivers are still a step in the right direction.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940517/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor943119"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 30, 2023 17:50 UTC (Wed)
                               by <b>cstrahan</b> (guest, #104863)
                              [<a href="/Articles/943119/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; But it does little or nothing to make the computer code more available to be examined or fixed, more open.</span><br>
<p>
Sure. But it does make things better in a couple important ways: If NVIDIA wants to shove critical functionality into firmware blobs, at least the experience of using NVIDIA GPUs will suck equally everywhere. In practice, that means that they'll either work harder (than they would writing Linux kernel module code) to get things right, or if they can't, then they can be punished in the market, and we can all opt to acquire competing cards.<br>
<p>
And while you and I would prefer to have access to all of the code, this move is still better than before for another reason: while the GPU may be stuck with buggy firmware blobs, at least that's not running in kernel space, with the power to crash your system.<br>
<p>
Maybe an analogy would help: If I order food delivered, the delivery driver may take a crazy, convoluted route through town, and he may curb his vehicle, or get in a wreck, etc, and I don't have any control over that. But do you know what the delivery driver *isn't* going to do? Any of the above to *my* vehicle. If I *could* control the delivery driver's actions, I would have them safely and optimally delivery my food, but because I can't, at least I'll be happier knowing that they can only total their own car, while my car is sitting safely in my garage.<br>
<p>
Having the proprietary NVIDIA kernel module loaded is like handing your keys over to a delivery driver you have never met and trusting they won't financially ruin you.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/943119/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor940492"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 4, 2023 15:42 UTC (Fri)
                               by <b>jgg</b> (subscriber, #55211)
                              [<a href="/Articles/940492/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Why does it matter at all how the old proprietary driver was constructed? What does "critical functionality" even mean?<br>
<p>
NVIDIA provided an open GPL-compatible licensed driver and a closed FW. Just like the majority of server HW out there these days. This new FW is NVIDIA's primary FW for all new HW. It is is not some special crippled open source release.<br>
<p>
If you are familiar with the NVIDIA ecosystem you can see that the new FW and open source driver support the entire propritary userspace NVIDIA software stack. Today. This means everything you can do with CUDA/etc can be done through this FW.<br>
<p>
So was "critical functionality" blocked off somehow? I guess not.<br>
<p>
I think the more productive way to look at the situation is to ask what can be done on the open source side with this FW interface.<br>
<p>
DRM maintainers have long held that an open userspace and open compiler are essential parts they need to consider something open.<br>
<p>
It appears this FW is good enough that nouveau can make an open vulkan graphics stack, running at full performance, using the open userspace compiler that already exists. This is a big improvement.<br>
<p>
If this FW release made nouveau, and its fully open stack, dramatically better - is it more or less open source friendly?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940492/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor940502"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 4, 2023 16:47 UTC (Fri)
                               by <b>farnz</b> (subscriber, #17727)
                              [<a href="/Articles/940502/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <p>NV moved all of the "proprietary" information to a microprocessor inside the GPU, which runs a large firmware blob. This blob does much of what used to be done on the host CPU by the driver, but on-GPU instead of on-host.
<p>The kernel-mode driver thus does much less work than it used to do, because instead of handling low-level details of the system, it uses higher-level communications with the firmware blob to do its work. Nouveau and similar can use this directly, since they're able to talk the same higher-level interface; in this regard, it's similar to a modern x86 CPU with all its embedded controllers doing power management and the like, just with the firmware for those ECs uploaded at runtime, not stored in ROM or the boot firmware Flash chip.


      
          <div class="CommentReplyButton">
            <form action="/Articles/940502/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940505"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 4, 2023 17:10 UTC (Fri)
                               by <b>rahulsundaram</b> (subscriber, #21946)
                              [<a href="/Articles/940505/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; NV moved all of the "proprietary" information to a microprocessor inside the GPU, which runs a large firmware blob. This blob does much of what used to be done on the host CPU by the driver, but on-GPU instead of on-host. </span><br>
<p>
Thank you for actually answering the question.  The other responses here were much more evasive on this.  FWIW I do think it is an improvement over the prior status quo but the details here matter.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940505/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940506"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 4, 2023 17:59 UTC (Fri)
                               by <b>jgg</b> (subscriber, #55211)
                              [<a href="/Articles/940506/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It is not evasive.<br>
<p>
Nobody really knows what NVIDIA did because the open source community cannot see inside the old propritary driver. We can assume that everything in the FW used to be on the CPU, we have no idea what % that is, certainly we have no idea if it is "most". We don't know if it is "critical", or whatever. It is obviously all the "proprietary" information, but who knows what that actual functionally is. A huge amount of code was still released in the open driver.<br>
<p>
There is lots of clues in the open driver and in nouveau's use of the FW that gives some light on what kind of stuff must be in there, but I've never seen anyone publish some robust assesment.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940506/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940512"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 4, 2023 20:00 UTC (Fri)
                               by <b>rahulsundaram</b> (subscriber, #21946)
                              [<a href="/Articles/940512/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; It is not evasive.</span><br>
<p>
I found answering questions with other questions evasive.  In any case, I don't see any disagreement that some functionality has moved over into the proprietary firmware, so I have the answer I was looking for.  Let's move on.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940512/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor940524"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 5, 2023 5:24 UTC (Sat)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/940524/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
No. The firmware has always contained a ton of functionality (power management, command processing, etc.), and the new open source driver works fine with "old" firmware.<br>
<p>
Some of "secret sauce" remains in the closed userspace part, just like with AMD. But I don't believe that they actually moved functionality that is important for the kernel driver into the firmware.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940524/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940977"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 9, 2023 21:02 UTC (Wed)
                               by <b>intelfx</b> (subscriber, #130118)
                              [<a href="/Articles/940977/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; No. The firmware has always contained a ton of functionality (power management, command processing, etc.), and the new open source driver works fine with "old" firmware.</span><br>
<p>
I don't believe that's true. The new open-source driver only works with the GSP-enabled generations, starting with Turing.<br>
<p>
<span class="QuotedText">&gt; Some of "secret sauce" remains in the closed userspace part, just like with AMD. But I don't believe that they actually moved functionality that is important for the kernel driver into the firmware.</span><br>
<p>
Let's discuss an example.<br>
<p>
For instance, one of the long-standing issues with NVIDIA's GPUs was power management, specifically reclocking. On those generations where reclocking was successfully reverse-engineered and implemented in nouveau, the driver was able to change the clocks at will (and overclocking was likely possible).<br>
<p>
Now, I did not look at the "new" open-source kernel driver code, but I bet that the reclocking decisions are made entirely by the "new" proprietary firmware, while the kernel driver merely indicates the desired power state (or maybe even less than that, maybe it's only possible to indicate the upper limit). I also bet that there is zero support for overclocking, such that it remains a Windows-exclusive feature.<br>
<p>
Does this "new" open-source code make it possible for nouveau to implement "some" support for reclocking? Yes. Will it be even remotely as useful as the hypothetical (reverse-)engineered interface to the low-level firmware? Not at all.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940977/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940979"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 9, 2023 21:35 UTC (Wed)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/940979/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt;  I don't believe that's true. The new open-source driver only works with the GSP-enabled generations, starting with Turing.</span><br>
<p>
I mean that the OpenSource driver doesn't need a special firmware for it. <br>
<p>
<span class="QuotedText">&gt; For instance, one of the long-standing issues with NVIDIA's GPUs was power management, specifically reclocking. On those generations where reclocking was successfully reverse-engineered and implemented in nouveau, the driver was able to change the clocks at will (and overclocking was likely possible).</span><br>
<p>
Noveau still used firmware for reclocking, even on older devices. See: <a href="https://www.phoronix.com/forums/forum/linux-graphics-x-org-drivers/open-source-nvidia-linux-nouveau/998310-nouveau-persevered-in-2017-for-open-source-nvidia-but-2018-could-be-much-better/page4#post998427">https://www.phoronix.com/forums/forum/linux-graphics-x-or...</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940979/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor941002"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 10, 2023 2:11 UTC (Thu)
                               by <b>intelfx</b> (subscriber, #130118)
                              [<a href="/Articles/941002/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt;  I mean that the OpenSource driver doesn't need a special firmware for it. </span><br>
<p>
Then this does not address GP's concerns at all.<br>
<p>
<span class="QuotedText">&gt; Noveau still used firmware for reclocking, even on older devices</span><br>
<p>
Nope, they wrote their own PMU firmware for supported devices.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/941002/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor940982"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 9, 2023 21:39 UTC (Wed)
                               by <b>pizza</b> (subscriber, #46)
                              [<a href="/Articles/940982/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; Does this "new" open-source code make it possible for nouveau to implement "some" support for reclocking? Yes. Will it be even remotely as useful as the hypothetical (reverse-)engineered interface to the low-level firmware? Not at all.</span><br>
<p>
This "new" codebase is infinitely more useful than the current status quo, which prevents _any_ reclocking because nVidia locked things down cryptographically.  Furthermore, attempting to tinker with those cryptographic locks exposes oneself to massive civil (and possibly criminal) liabilities in most jurisdictions.<br>
<p>
nVidia has gone from actively impeding development of functionally useful F/OSS GPU drivers for their hardware to actively helping.  This represents a massive improvement; why do you feel the need to dump on it for not being perfect?<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940982/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940987"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 9, 2023 21:59 UTC (Wed)
                               by <b>intelfx</b> (subscriber, #130118)
                              [<a href="/Articles/940987/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt;  Furthermore, attempting to tinker with those cryptographic locks exposes oneself to massive civil (and possibly criminal) liabilities in most jurisdictions</span><br>
<p>
Could you please point out how exactly "attempting to tinker with cryptographic locks" on the hardware I legally own exposes me to liabilities "in most jurisdictions"? I fear I might need to turn myself in and report most of my friends and relatives :-)<br>
<p>
If this is about DMCA, then, thankfully, USA != most jurisdictions. And even then, jailbreaking is exempt.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940987/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor940393"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Netgpu and the GPL</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 3, 2023 21:02 UTC (Thu)
                               by <b>geofft</b> (subscriber, #59789)
                              [<a href="/Articles/940393/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
A little off topic, but:<br>
<p>
<span class="QuotedText">&gt; One scheme was inadvertently revealed in 2020 as part of a larger patch set intended to make a form of peer-to-peer DMA work.</span><br>
<p>
I don't really understand what happened here (<a href="https://lwn.net/Articles/827596/">https://lwn.net/Articles/827596/</a>, <a href="https://lwn.net/ml/netdev/20200728163100.GD4181352@kroah.com/">https://lwn.net/ml/netdev/20200728163100.GD4181352@kroah....</a>) - the patch was posted by Facebook, not NVIDIA, and Greg K-H insisted that it get approval from a corporate lawyer, presumably meaning Facebook.<br>
<p>
Facebook doesn't (I assume) have any rights to sublicense NVIDIA's code, nor were they writing code that required such rights. The code they posted could have been written by anyone who received an ordinary proprietary license of the NVIDIA driver.<br>
<p>
Furthermore, Facebook isn't redistributing any proprietary drivers. The patchset mentions mlx5, i.e., Mellanox - it's pretty clear that the use case here is server-class machines in Facebook data centers where they want to squeeze every bit of zero-copy performance out of multi-machine GPU workloads (either actual graphics processing or machine learning), not Oculus devices or anything.<br>
<p>
By the same argument Linus made that loading a proprietary module into the kernel is not a copyright violation, patching your local kernel to better support proprietary modules (e.g., replace EXPORT_SYMBOL_GPL with EXPORT_SYMBOL or reverting this current tightenting of symbol_get), for internal use alone, is not a copyright violation either, right? I can certainly see the argument that this last patch isn't upstreamable (and the patchset said it was an RFC patchset, and made it relatively clear that this wasn't really going to be upstreamable), and I can maybe see the argument that it was rude to ask the kernel maintainers to code-review a use case that they don't support, even if such a use case is legal. But that's it, right? What would Facebook's corporate signoff have added?<br>
<p>
Or in other words - this module wasn't a bypass of anything, right? It did something that is perfectly well permissible by the current rules (and doesn't involve any copyright violations, assuming you don't believe the NVIDIA driver itself is one) - it's GPL'd code (actually GPL'd, because it was published to LKML!), which is a derivative work of two things, the Linux kernel itself and the proprietary NVIDIA driver. It links, in normal ways, symbols exported from the core kernel as well as symbols exported from NVIDIA. It wasn't being done at NVIDIA's behest to increase the capabilities given to the driver - it was being done by an end user.<br>
<p>
Maybe the idea is that things that are derivative works of both the kernel and a proprietary module should be disallowed? If so that actually seems relatively easy to enforce: don't let GPL'd modules depend on non-GPL'd modules. Would that break any extant use cases?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940393/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940398"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Netgpu and the GPL</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 3, 2023 22:06 UTC (Thu)
                               by <b>NYKevin</b> (subscriber, #129325)
                              [<a href="/Articles/940398/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt;  It did something that is perfectly well permissible by the current rules (and doesn't involve any copyright violations, assuming you don't believe the NVIDIA driver itself is one) - it's GPL'd code (actually GPL'd, because it was published to LKML!), which is a derivative work of two things, the Linux kernel itself and the proprietary NVIDIA driver. </span><br>
<p>
There are some issues to consider with that:<br>
<p>
1. If it is a derivative work of NVIDIA's code, then it infringes NVIDIA's copyright unless they have given permission to use it. See e.g. 17 USC 106(2) (and comparable laws in just about every jurisdiction in the world).<br>
2. If it infringes NVIDIA's copyright, then it arguably(!) offends this passage of the GPL, particularly the final sentence:<br>
<p>
<span class="QuotedText">&gt; If, as a consequence of a court judgment or allegation of patent infringement or for any other reason (not limited to patent issues), conditions are imposed on you (whether by court order, agreement or otherwise) that contradict the conditions of this License, they do not excuse you from the conditions of this License. If you cannot distribute so as to satisfy simultaneously your obligations under this License and any other pertinent obligations, then as a consequence you may not distribute the Program at all.</span><br>
<p>
In other words: If your purportedly GPL'd code violates someone else's copyright, then the GPL recognizes that fact and forbids you from distributing it in violation of that copyright. This is important, because otherwise, we would have a huge GPL loophole. You could have company X write some proprietary code, company Y release a derivative work of X's code under the GPL (without X's permission), and then company Z tries to use Y's purportedly GPL'd code in compliance with the GPL, only for X to sue Z and not Y (X is under no obligation to enforce their copyright uniformly against everyone - copyright is not trademark). The net result? GPL'd code that you can't safely use or build on. The FSF foresaw this problem and added a clause to the GPL explicitly forbidding it.<br>
<p>
Or at least, that is the way it has been explained to me. It is also possible to read this passage as simply clarifying that the GPL is not subject to the impossibility or frustration of purpose doctrines (i.e. it prevents people from going into court and saying "your honor, complying with the GPL would violate this other contract..." and thus excusing themselves from GPL compliance), and not as imposing a substantive obligation on the licensee. I don't know if this has ever been litigated.<br>
<p>
3. If NVIDIA *has* given permission to create this sort of thing (e.g. in their EULA), then the fact that it's being done by Facebook and not NVIDIA is immaterial. NVIDIA could just as easily do it themselves.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940398/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940400"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Netgpu and the GPL</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 3, 2023 22:20 UTC (Thu)
                               by <b>farnz</b> (subscriber, #17727)
                              [<a href="/Articles/940400/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <blockquote>
 3. If NVIDIA *has* given permission to create this sort of thing (e.g. in their EULA), then the fact that it's being done by Facebook and not NVIDIA is immaterial. NVIDIA could just as easily do it themselves.
</blockquote>
<p>It's not quite immaterial; if the resulting work is a copyright infringement of someone else's work (e.g. the Linux kernel), then the fact that it's done outside NVIDIA protects NVIDIA from being ordered to open up their proprietary driver as a remedy for infringement.
<p>This is very much a corner case, since courts rarely order that sort of specific performance where monetary damages are possible, but it gives NVIDIA a reason to prefer to give permission and let someone else do it rather than do it themselves.


      
          <div class="CommentReplyButton">
            <form action="/Articles/940400/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor940401"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Netgpu and the GPL</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 3, 2023 22:13 UTC (Thu)
                               by <b>Sesse</b> (subscriber, #53779)
                              [<a href="/Articles/940401/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Once someone has decided you are the enemy, they will not want to support you even in doing things that they would otherwise find reasonable.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940401/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor941298"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Netgpu and the GPL</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 11, 2023 15:38 UTC (Fri)
                               by <b>Karellen</b> (subscriber, #67644)
                              [<a href="/Articles/941298/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Once someone has reason to believe that you repeatedly act in bad faith, they will be suspicious of everything you do, even if it appears to be reasonable on its face.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/941298/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor941301"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Netgpu and the GPL</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 11, 2023 15:56 UTC (Fri)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/941301/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
"reason to believe".<br>
<p>
The problem with that is the people who don't bother to check the  facts (ie most of us, most of the time).<br>
<p>
As I put it, "your reality is not my reality", or as Einstein would put it, "what you observe depends on where you are standing". There are too many people who cannot understand how anyone else could have a different point of view. (One only has to look at the recent "heated discussion" over Free Software and Open Source :-)<br>
<p>
So let me rephrase your comment - Once someone's tinted glasses have given them reason to believe you have acted in bad faith ... it happens, and it probably happens far more often than it should ...<br>
<p>
We've seen it happen here, where people just refuse to accept that somebody else (Red Hat, anyone) might have had good grounds for doing what they've done.<br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/941301/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor940402"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 3, 2023 22:25 UTC (Thu)
                               by <b>jreiser</b> (subscriber, #11027)
                              [<a href="/Articles/940402/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      Create a loop-around internal <tt>pipe()</tt>, run <tt>kallsysms</tt> and direct the output into the pipe, read the pipe, parse the address and symbol name, call by pointer.  Takes around one second or less.


      
          <div class="CommentReplyButton">
            <form action="/Articles/940402/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940405"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 3, 2023 23:43 UTC (Thu)
                               by <b>willy</b> (subscriber, #9762)
                              [<a href="/Articles/940405/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
What a byzantine approach! Just pass the address of the symbol you need as a module parameter...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940405/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940432"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 4, 2023 10:30 UTC (Fri)
                               by <b>dullfire</b> (guest, #111432)
                              [<a href="/Articles/940432/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Sorry Willy, however you are not thinking enough like a "horrible out-of-tree-driver writer" (not to imply ALL out of tree driver writers are horrible, just that the topic is the subset of them that are): you would need to load your symbol(s) by having the module open a file, and then call the read entry points. Then of course you have to parse the file. Because obviously in need to be in a (incorrect use of) XML format.<br>
<p>
<p>
<p>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940432/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor940525"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 5, 2023 5:18 UTC (Sat)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/940525/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Or expose it as a /proc file, to be read by the userspace.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940525/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor940442"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 4, 2023 14:14 UTC (Fri)
                               by <b>spmfox</b> (subscriber, #125241)
                              [<a href="/Articles/940442/">Link</a>] (28 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I get it for Nvidia, I just hope this doesn't make it harder to install ZFS on Linux. I'm not familiar enough with the process to know if it applies to the ZFS module installation (DKMS or kmod) or not.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940442/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940504"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 4, 2023 17:07 UTC (Fri)
                               by <b>intelfx</b> (subscriber, #130118)
                              [<a href="/Articles/940504/">Link</a>] (25 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I hope it does. The ZFS situation is no different. It has to be decided one way or the other, it either needs to become a first-class Linux citizen (complete with a reasonable integration into the VFS layer) or fade into obscurity.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940504/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940507"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 4, 2023 17:31 UTC (Fri)
                               by <b>spmfox</b> (subscriber, #125241)
                              [<a href="/Articles/940507/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I understand this point of view however, unlike Nvidia, the devs would like ZFS to be a first class citizen. They are forced due the licensing woes of Oracle. And despite efforts by various groups, including Red Hat themselves, no one has been able to come up with an equivalent filesystem yet.<br>
<p>
So until that happens, yeah I'd like ZFS to keep working and not have the dev's work be harder to do.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940507/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor940511"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 4, 2023 19:29 UTC (Fri)
                               by <b>darmengod</b> (subscriber, #130659)
                              [<a href="/Articles/940511/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I would very much love to see ZFS become a first-class Linux entity but, for the love of God, I hope the arms race between kernel devs and "antisocial" out-of-tree devs doesn't end up making it (even) hard(er) for ZFS to be used on Linux.<br>
<p>
There really *is* no substitute, it's a fantastic filesystem (storage stack?) and nothing in the Linux ecosystem quite compares to it yet.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940511/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940522"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 4, 2023 23:44 UTC (Fri)
                               by <b>shemminger</b> (subscriber, #5739)
                              [<a href="/Articles/940522/">Link</a>] (7 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Get Oracle lawyers to fix the problems.<br>
It is a waste of effort for developers to spend time finding license backdoors.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940522/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940529"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 5, 2023 7:20 UTC (Sat)
                               by <b>NYKevin</b> (subscriber, #129325)
                              [<a href="/Articles/940529/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
How will freeing ZFS cause Oracle to make more money than they do now?<br>
<p>
This is not an idle question. If it doesn't make them any money, then they will not do it. See discussion in <a href="https://youtu.be/-zRN7XLCRhc?t=2085">https://youtu.be/-zRN7XLCRhc?t=2085</a> for more information.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940529/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940540"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 5, 2023 9:03 UTC (Sat)
                               by <b>james</b> (subscriber, #1325)
                              [<a href="/Articles/940540/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      How much does Oracle Linux compete with non-Linux OSes, and how much is it in a space where we've won?
<p>
Traditionally, ZFS was a reason to buy Solaris, but with that going end-of-life in 2034, very few enterprises are going to do fresh installs on Solaris. ZFS is no longer a killer feature for Solaris.
<p>
But if ZFS is a first-class filesystem on Oracle Linux, that might encourage clients to buy support from Oracle even if other distros have it. It would certainly help sell Oracle Linux instead of Windows.





      
          <div class="CommentReplyButton">
            <form action="/Articles/940540/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940565"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 5, 2023 19:10 UTC (Sat)
                               by <b>willy</b> (subscriber, #9762)
                              [<a href="/Articles/940565/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Oracle Linux does not ship ZFS.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940565/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940634"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 7, 2023 12:47 UTC (Mon)
                               by <b>james</b> (subscriber, #1325)
                              [<a href="/Articles/940634/">Link</a>] 
      </p>
      
      </div>
      </summary>
      And Oracle Linux has no USP over other Linux distributions, except that you can get support from the same company that supports your database if you're unfortunate enough to have an Oracle database.
<p>
I'm saying that it would be worth Oracle's while to allow ZFS into the Linux kernel and support it on Oracle Linux: this wouldn't negatively affect commercial Solaris (since its days are numbered), but would benefit Linux in general and Oracle Linux in particular.


      
          <div class="CommentReplyButton">
            <form action="/Articles/940634/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor940779"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 8, 2023 16:42 UTC (Tue)
                               by <b>paulj</b> (subscriber, #341)
                              [<a href="/Articles/940779/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
This is the irony, Oracle can't ship ZFS with Linux cause of the licence.<br>
<p>
This is also the answer to NYKevin's question: Oracle could make more money by relicensing ZFS to be GPL compatible as that would allow them to ship ZFS with Oracle Linux, and market it as "We invented it, so we can support it best!".<br>
<p>
The slight problem there is that a lot of ZFS on Linux development has been done outside of Solaris, and most (all?) of the Sun ZFS developers have long left Sun/Oracle.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940779/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor941304"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 11, 2023 16:34 UTC (Fri)
                               by <b>BenHutchings</b> (subscriber, #37955)
                              [<a href="/Articles/941304/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
CDDL has an upgrade clause, so in fact they can relicense it. However, in doing so they would also be relicensing everything else that's under CDDL 1.0 (that doesn't say "no license upgrades").<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/941304/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor941326"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 11, 2023 18:38 UTC (Fri)
                               by <b>mjg59</b> (subscriber, #23239)
                              [<a href="/Articles/941326/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
They could special-case the GPL compatibility in a similar way to GFDL 1.3 existing to allow Wikipedia to relicense to CC.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/941326/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor940528"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 5, 2023 7:12 UTC (Sat)
                               by <b>cyphar</b> (subscriber, #110703)
                              [<a href="/Articles/940528/">Link</a>] (13 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
ZFS is not going to fade into obscurity, that is a laughable notion. The only question is whether Linux users can easily take advantage of the technology or not.<br>
<p>
Critically, in contrast to the shenanigans of proprietary module developers -- ZFS is free software under a copyleft licence, and does not attempt to subvert Linux's module loading license rules. I'm sure the OpenZFS developers would love it for it to be accepted by Linux as a first-party filesystem. They are not the bad guys here.<br>
<p>
The licensing issue is very unfortunate, I understand the trepidation. But let's not paint people who work on CDDL code with the same brush as out-of-tree developers who seem to enjoy making things worse for everyone.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940528/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940530"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 5, 2023 7:26 UTC (Sat)
                               by <b>mjg59</b> (subscriber, #23239)
                              [<a href="/Articles/940530/">Link</a>] (12 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
CDDL defaults to having a "or later" clause that would allow Oracle to publish a GPL-compatible version of the license that solved most of this problem, but at least one OpenZFS developer has chosen to license their work specifically under CDDL 1.1 without that, so I'm not sure that it's universally true that OpenZFS developers would love it to be accepted.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940530/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940532"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 5, 2023 7:42 UTC (Sat)
                               by <b>cyphar</b> (subscriber, #110703)
                              [<a href="/Articles/940532/">Link</a>] (11 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I'm aware, and if I could make Oracle do one thing, making the CDDL GPL-compatible would be high on the list. However, given the way Oracle dealt with dtrace-on-Linux (by dual-licensing it), it seems very unlikely they will ever do that.<br>
<p>
As for the CDDL-1.1-only code, I don't know which developer you are referring to, but unless they've explicitly stated that they wouldn't want their code to be GPL-compatible, it's also possible they were worried that CDDL could be changed by Oracle to allow for proprietary forks (if they did, it would allow them to use OpenZFS in their proprietary ZFS fork). As usual in license discussions, the risks cut both ways.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940532/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940543"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 5, 2023 9:37 UTC (Sat)
                               by <b>snajpa</b> (subscriber, #73467)
                              [<a href="/Articles/940543/">Link</a>] (10 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I would _love_ to see this supposed GPL vs CDDL incompatibility challenged in court, btw. So far it's only the Linux kernel community kicking and screaming they're incompatible, but both of these are FOSS licenses and those are not code, intents matter. No harm to either side when combining these two works matters IMHO even more. =&gt; IMHO the licenses are not as incompatible as some paint them to be<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940543/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940547"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 5, 2023 12:58 UTC (Sat)
                               by <b>pizza</b> (subscriber, #46)
                              [<a href="/Articles/940547/">Link</a>] (9 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; I would _love_ to see this supposed GPL vs CDDL incompatibility challenged in court, btw. So far it's only the Linux kernel community kicking and screaming they're incompatible, but both of these are FOSS licenses and those are not code, intents matter</span><br>
<p>
Intents only matter when the text is ambiguous, which is not the case here.<br>
<p>
The fundamental conflict between the CDDL and the GPL is that they both require derived works to be licensed solely under that license.   While broadly similar, the licenses are not identical, and the differences (eg the CDDL has stricter patent language) become "additional restrictions" that are not allowable under the other.  Therefore the licenses are incompatible.<br>
<p>
Oh, it's a lot more than the linux kernel community saying this -- Sun folks are on the record saying the CDDL was intentionally drafted to be incompatible with the GPL, and pretty much every F/OSS lawyer (other than the ones on Canonical's payroll) also agrees on this front.<br>
<p>
Sure, ultimately it's up to a court and a zealous deep-pocketed plantiff to test this, but while you can probably trust a typical Linux contributor to not stir the pot, OpenZFS's rights are still largely held by Oracle, whose lawyers have shown time and time again they will happily boil the oceans if they think they can get away with it.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940547/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940588"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 6, 2023 3:38 UTC (Sun)
                               by <b>NYKevin</b> (subscriber, #129325)
                              [<a href="/Articles/940588/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; Oh, it's a lot more than the linux kernel community saying this -- Sun folks are on the record saying the CDDL was intentionally drafted to be incompatible with the GPL, and pretty much every F/OSS lawyer (other than the ones on Canonical's payroll) also agrees on this front.</span><br>
<p>
I'm not sure that's a fair characterization of the issue. The SFLC has a long and nuanced post on the issue (see [1]) which I would summarize as "it's complicated, but arguing over ZFS on the internet is not a productive use of anybody's time. The kernel developers should either send Canonical a C&amp;D letter, or stop whining."<br>
<p>
[1]: <a href="https://softwarefreedom.org/resources/2016/linux-kernel-cddl.html">https://softwarefreedom.org/resources/2016/linux-kernel-c...</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940588/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940599"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 6, 2023 12:46 UTC (Sun)
                               by <b>pizza</b> (subscriber, #46)
                              [<a href="/Articles/940599/">Link</a>] (7 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; "it's complicated, but arguing over ZFS on the internet is not a productive use of anybody's time. The kernel developers should either send Canonical a C&amp;D letter, or stop whining."</span><br>
<p>
As I said in the message you replied to; its not the kernel authors that Canonical (or the other kernel devs) should worry about; Instead it's Oracle's lawyers, who are well known for suing over software licensing minutae.<br>
<p>
<p>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940599/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940606"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 6, 2023 17:06 UTC (Sun)
                               by <b>NYKevin</b> (subscriber, #129325)
                              [<a href="/Articles/940606/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Hasn't Canonical been doing this for years now? Where's the lawsuit?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940606/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940616"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 6, 2023 22:41 UTC (Sun)
                               by <b>pizza</b> (subscriber, #46)
                              [<a href="/Articles/940616/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; Hasn't Canonical been doing this for years now? Where's the lawsuit?</span><br>
<p>
Perhaps Oracle doesn't think Canonical has deep enough pockets to be worth suing, and is biding their time unti a more lucrative target (if only Canonical in a few more years) presents itself?<br>
<p>
As both the stewards of CDDL and copyright holder of most of the ZFS codebase, Oracle could make this problem go away completely if they wanted to.  Yet they have not.<br>
<p>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940616/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940714"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 8, 2023 5:39 UTC (Tue)
                               by <b>NYKevin</b> (subscriber, #129325)
                              [<a href="/Articles/940714/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
You can't just do that. The US gives you three years from the date of the infringement to file a (civil) suit, and most other jurisdictions have similar statutes of limitations (although they may not all be exactly the same length). See 17 USC 507.[1]<br>
<p>
They could still sue for ongoing infringement after that point, assuming Canonical continues to distribute ZFS, but common law jurisdictions may apply the doctrine of laches if the plaintiff was aware of the infringement and intentionally delayed enforcement to prejudice the defendant, regardless of whether the statute of limitations applies. See for example Danjaq LLC v. Sony Corp., 263 F.3d 942 (9th Cir. 2001).[2] The key quote (in my opinion):<br>
<p>
<span class="QuotedText">&gt; Next, we conclude that claims of infringement stemming from re-releases of Bond movies on DVD have been "delayed" for purposes of laches. On the one hand, we recognize the seemingly paradoxical nature of this conclusion. After all, how can it fairly be said that a lawsuit filed in 1998, relating to a DVD released in 1997 (to take the example of Dr. No) was "delayed"? The answer is simple: Where, as here, the allegedly infringing aspect of the DVD is identical to the alleged infringements contained in the underlying movie, then the two should be treated identically for purposes of laches. It would be incongruous indeed to hold the opposite â€” to say, that is, that McClory's claim for infringement on a re-release survives, despite the dismissal for laches of the same claim regarding the original work. This exception would effectively swallow the rule of laches, and render it a spineless defense. In analogous contexts, similar theories have been roundly rejected. See, e.g., Hot Wax, Inc. v. Turtle Wax, Inc., 191 F.3d 813, 821-22 (7th Cir. 1999) (trademark case; rejecting the argument that each new instance of infringement must start the clock anew on laches: "Without the  availability of the application of laches to a claim arising from a continuing wrong, a party could, theoretically, delay filing suit indefinitely."). We decline to reach such a result here.</span><br>
<span class="QuotedText">&gt;</span><br>
<span class="QuotedText">&gt; For similar reasons, we reject McClory's argument that laches may never bar a claim for infringement brought within the statute of limitations. We have already determined that laches may sometimes bar a statutorily timely claim. Kling, 225 F.3d at 1039; Jackson, 25 F.3d at 888. And, although such an application of laches may be unusual, see Telink, 24 F.3d at 45 n. 3, it is appropriate here. Even leaving aside the special circumstance of re-releases, we conclude in any event that McClory's extraordinary delay and the extraordinary prejudice to Danjaq render laches appropriate despite the statute of limitations. Id. at 46 n. 5 ("If the defendant can show harm from the delay, the court may, in extraordinary circumstances, defeat the claim based on laches, though the claim is within the analogous limitations period.").</span><br>
<p>
[1]: <a href="https://www.law.cornell.edu/uscode/text/17/507">https://www.law.cornell.edu/uscode/text/17/507</a><br>
[2]: <a href="https://casetext.com/case/danjaq-llc-v-sony-corporation">https://casetext.com/case/danjaq-llc-v-sony-corporation</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940714/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940720"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 8, 2023 11:43 UTC (Tue)
                               by <b>pizza</b> (subscriber, #46)
                              [<a href="/Articles/940720/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; You can't just do that. The US gives you three years from the date of the infringement to file a (civil) suit, and most other jurisdictions have similar statutes of limitations (although they may not all be exactly the same length). See 17 USC 507.[1]</span><br>
<p>
Thanks for that, but for purposes of my own understanding, how is this current scenario materially different from the delays from initial infringement-to-enforcement in SCO v IBM (which I think is _still_ not quite technically over) and more recently, Oracle v Google?  Ultimately both were more about ongoing infringement, no?<br>
<p>
The SCO debacle in particular is where the Linux kernel's Developer Certificate of Origin came from, and I think it's safe to state that, regardless of any technical/stylistic/etc issues, there's no way [Open]ZFS would ever get accepted into the mainline without "signed-off-by: legal@oragle.com" or shipping [Open]ZFS binaries as part of OracleLinux.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940720/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940774"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 8, 2023 14:53 UTC (Tue)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/940774/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; Thanks for that, but for purposes of my own understanding, how is this current scenario materially different from the delays from initial infringement-to-enforcement in SCO v IBM (which I think is _still_ not quite technically over) and more recently, Oracle v Google? Ultimately both were more about ongoing infringement, no?</span><br>
<p>
Firstly, it's very easy to sue in the US even when you have no case.<br>
<p>
Secondly, certainly in the SCOG case we think the initial aim was to get IBM to buy them off, and then (for SCOG) it turned into an existential fight for survival plus a fraud to milk the company. So they were simply prolonging the case any which way they could.<br>
<p>
And then, when you really have a case, it gets summarily dismissed (WP vs MS) - based on a mis-direction by a Judge I believe. WordPerfect thought that the statute of limitations had been stayed by Netscape vs MS, only to discover when they tried to litigate using Netscape as precedent, that it hadn't and they were out of time. I think what they *should* have done was launch the suit and at the same time ask the Judge to stay the case until NS vs MS was over. But either counsel misled them, or they mis-understood counsel.<br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940774/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor940999"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 10, 2023 0:37 UTC (Thu)
                               by <b>dvdeug</b> (guest, #10998)
                              [<a href="/Articles/940999/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
This seems to have been overruled by Petrella v. Metro-Goldwyn-Mayer, Inc., 572 U.S. 663 (2014), where the Supreme Court said "Laches cannot bar a claim for damages brought within the three-year window. By permitting retrospective relief only three years back, the limitations period takes account of delay."<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940999/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor940608"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 6, 2023 17:16 UTC (Sun)
                               by <b>DemiMarie</b> (subscriber, #164188)
                              [<a href="/Articles/940608/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
And nobody is claiming that the ZFS license is being infringed.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940608/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor940541"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 5, 2023 9:01 UTC (Sat)
                               by <b>snajpa</b> (subscriber, #73467)
                              [<a href="/Articles/940541/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
fade into obscurity? keep on dreaming :D<br>
<p>
In case you haven't noticed, OpenZFS does not focus on a single kernel; integrating with Linux is not happening, as it isn't the project's goal. Which also makes for +1 argument that it is _not_ a derivative work of Linux. It was developed independently and while Linux was the only kernel for a while, now there are two, FreeBSD and Linux - and support for more is coming.<br>
<p>
I guess some really, really envy what OpenZFS can do and Linux can't? But this vitriol is not the way how to persuade people to abandon working on OpenZFS and make them see the light and go re-develop it from scratch for Linux. If anything, it'll make us double down working on OpenZFS. As a cherry on top, one doesn't have to deal with the awful dev experience that the LKML brings :-D<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940541/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor940535"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 5, 2023 7:59 UTC (Sat)
                               by <b>snajpa</b> (subscriber, #73467)
                              [<a href="/Articles/940535/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
no worries, in the worst case, we'll just need to "DKMS" the whole kernel with such politics-in-code patched out, so such a DKMS run will take a bit longer... but there will always be a way, it's both free software - both Linux and OpenZFS... so with a little bit of patching... ROFL<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940535/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940537"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 5, 2023 8:13 UTC (Sat)
                               by <b>snajpa</b> (subscriber, #73467)
                              [<a href="/Articles/940537/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
btw, I've been doing that for a while already, I got tired of this whole debate and I wanted to integrate OpenZFS with Linux a bit more than was available at the time, so it's the easiest thing under the sun to do... just patch the _GPL out :D now I can spawn the ZIO threads on a given NUMA node where I want, OpenZFS knows about swapcache, it works with various code sanity checkers, etc... arguing with people is a waste of time when one can just modify the code<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940537/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor940533"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 5, 2023 7:51 UTC (Sat)
                               by <b>snajpa</b> (subscriber, #73467)
                              [<a href="/Articles/940533/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
This is just nonsense. There are always going to be workarounds. In the worst case, one will have to recompile a patched kernel without such useless lines of code, to be able to load whatever modules, but it will still be doable. So there will be a """DKMS"""-like run that will take about 20 min, who cares ~o~... With ever more capable hardware underneath, such compile runs will be always shorter and shorter :D<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940533/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940545"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 5, 2023 11:40 UTC (Sat)
                               by <b>wtarreau</b> (subscriber, #51152)
                              [<a href="/Articles/940545/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; In the worst case, one will have to recompile a patched kernel without such useless lines of code</span><br>
<p>
Sure it's always possible, but it's a pain in field. I used to have highly patched kernels for a few decades, starting with ip_masq patches + IDE hotplug patches on top of kernel 1.2.13, VM+ipchains+NFS patches in 2.0, 2.1-ac on production servers, then 2.2+vlan+knfsd+raid+reiseirfs+FSACL on many servers including at customers, I can assure you one thing: from this point I started to slow down on patched kernels, especially when it comes to my data. I remember having to borrow a SIMM DRAM at work one evening to try to fsck my out-of-tree FS running on top of out-of-tree RAID over an out-of-tree SCSI driver. You don't feel very proud of you until you see fsck complete successfully! I've later run 2.4 with loop-aes and many other patches (~200 total), but this time not on critical data. Loop-aes was only used to protect customer's traces on my laptop.<br>
<p>
From this era I decided not to use any out-of-tree stuff to store my data: hardware drivers, block layout, file system, etc. It's far too painful, you're not free to upgrade your kernel when you want, and whatever kernel you want to try requires to first apply all the mandatory patches you're relying on, and to fix rejects by hand. I've done that for 20 years and consider it's not worth the effort and the hassle. Filesystems are pretty good nowadays, I wouldn't value the ZFS improvements enough to experience this trouble anymore. By then in 2.2, there was a motivation to patch for reiserfs, it was the first usable journaled FS which didn't require 20 minutes of fsck at boot after a kernel panic or a power outage. Now ext4 is pretty good for general use and small files in general, XFS is good on large files, btrfs is reasonably balanced and has more features. That's sufficient to me. I'll wait for ZFS to reach mainline to try it.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940545/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940546"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 5, 2023 12:18 UTC (Sat)
                               by <b>snajpa</b> (subscriber, #73467)
                              [<a href="/Articles/940546/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I trust OpenZFS with data more than anything from native kernel code; esp. in a multitenant server environment for today's deployments. Though it might change in the longer-term future, for now MGLRU is still not quite where the ARC is in OpenZFS + bcachefs is still too young and from my point of view incomplete (eg. <a href="https://github.com/koverstreet/bcachefs-tools/issues/50">https://github.com/koverstreet/bcachefs-tools/issues/50</a>). It was also easier for us to implement the uid/gid shifting mechanism into OpenZFS code before the new mount API and its ID-mapping feature.<br>
<p>
We're forced to do our own thing since OpenVZ guys went fully their distro-only way and it's now less transparent to an outsider; we started as a kind of community-run hosting for members in 2009; now we run vanilla with custom patches for special treatment of the 1st level user-ns, syslog ns and a few other things to make it closer to full-VM experience; but unlike OpenVZ being RH-cenric based, we compose it with Nix/nixpkgs into our own live-OS release. I just painted it too rosey about being able to contribute our changes back, we'd need to double the community in size to be able to afford more devs :D and now with the inflation... crazy times :D<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940546/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940589"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 6, 2023 4:19 UTC (Sun)
                               by <b>wtarreau</b> (subscriber, #51152)
                              [<a href="/Articles/940589/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt; I trust OpenZFS with data more than anything from native kernel code</span><br>
<p>
It's not a matter of trust. Any FS may fail, and any system may fail to boot due to manipulation errors or FS corruption, and the day it fails you need to know how you can recover your data when your server is sick. It's where there is a big difference between booting the server from a random distro's USB stick and copy all the data over night onto a USB external drive, and having to go through the complex hoops of building the kernel that supports your FS from another machine (possibly someone else's when it's your dev machine that died). If you know that regular distros include support for your FS on the default boot images, that could be OK. Otherwise it's really a pain.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940589/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor940597"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 6, 2023 11:50 UTC (Sun)
                               by <b>mpr22</b> (subscriber, #60784)
                              [<a href="/Articles/940597/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Anyone who runs ZFS in production on multiple machines is probably capable of building their own recovery image with ZFS support.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940597/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor940600"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 6, 2023 14:18 UTC (Sun)
                               by <b>cyphar</b> (subscriber, #110703)
                              [<a href="/Articles/940600/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
There are OpenZFS packages available on basically every Linux distribution. Usually the only extra steps needed to get access to your data from a recovery USB stick is to enable a particular repository and install the package.<br>
<p>
I highly doubt this will ever stop being the case. But even if that does happen, because ZFS is multi-platform you can always use FreeBSD or Illinois in a pinch. The same cannot be said for most of Linux's filesystems.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/940600/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor941045"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 10, 2023 13:22 UTC (Thu)
                               by <b>kpfleming</b> (subscriber, #23250)
                              [<a href="/Articles/941045/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Even the "Debian recovery" image available at OVH for bare-metal dedicated servers has ZFS built in. This made my life much easier the last time I rebuilt a machine there :-)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/941045/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor941044"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 10, 2023 12:49 UTC (Thu)
                               by <b>net_benji</b> (subscriber, #75195)
                              [<a href="/Articles/941044/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
"At that time, Hellwig merged a patch intended to make that method more difficult."<br>
<p>
Maybe it's pedantic but I would say that Christoph Hellwig *submitted* that patch. It was *merged* to mainline Linux by other people.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/941044/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor942895"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 28, 2023 13:34 UTC (Mon)
                               by <b>irvingleonard</b> (guest, #156786)
                              [<a href="/Articles/942895/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
So, is DRM good? Is it bad? Does it depend on who wields it? (it's ok when "we" do it). Would be crazy to think some distro(s) might end up having DRM-less kernels (patched) or maybe the possibility of installing/running both?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/942895/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor942901"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 28, 2023 14:09 UTC (Mon)
                               by <b>mathstuf</b> (subscriber, #69389)
                              [<a href="/Articles/942901/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
DRM is bad. However, the interoperability here is well-defined: obey the GPL.<br>
<p>
Interoperability with the typical DRM-protected resource is illegal (according to the US-based DMCA at least, probably effectively exported to elsewhere via treaties by this point). There are some exceptions, but they are subject to change every 3 years by the Library of Congress (and also subject to lobbying efforts).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/942901/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor942938"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 28, 2023 16:00 UTC (Mon)
                               by <b>mb</b> (subscriber, #50428)
                              [<a href="/Articles/942938/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<span class="QuotedText">&gt;However, the interoperability here is well-defined: obey the GPL.</span><br>
<p>
It's by far not that well-defined.<br>
It's rather that some developer had the opinion that using a certain symbol would surely be a GPL violation. That is not well-defined at all.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/942938/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor942942"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Making life (even) harder for proprietary modules</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 28, 2023 18:32 UTC (Mon)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/942942/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Yup. The GPL is, unfortunately, as clear as mud (but it's not its fault).<br>
<p>
It's full of assumptions as to what a derived work is (which is a matter for the law, not the GPL).<br>
<p>
It's full of assumptions as to what is copyrightable subject matter (which again is the law, not the GPL).<br>
<p>
The GPL is only clear when you're talking about statically linked binaries, which are rare as hens teeth on linux ...<br>
<p>
And although my favourite system (Scarlet) is GPL, if I tried to use the GPL try to to stop people shipping systems chock full of binaries, with only the publically available source made available to the customer, I'd probably be on an extremely sticky wicket ...<br>
<p>
Oh, and what happens if I build my own kernels (which I do, I run gentoo). All these (allegedly) proprietary modules which the kernel refuses to run, they CAN'T be GPL violations, because it was me that created the binary, and it's me running the binary, so the GPL doesn't apply.<br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/942942/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2023, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
