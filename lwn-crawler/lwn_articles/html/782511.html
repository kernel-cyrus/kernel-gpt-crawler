        <!DOCTYPE html>
        <html lang="en">
        <head><title>5.1 Merge window part 1 [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/782511/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/782582/">Return to the Front page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/782511/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>5.1 Merge window part 1</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Benefits for LWN subscribers</b>
<p>
The primary benefit from <a href="/Promo/nst-nag5/subscribe">subscribing to LWN</a>
       is helping to keep us publishing, but, beyond that, subscribers get
       immediate access to all site content and access to a number of extra
       site features.  Please sign up today!
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>March 8, 2019</br>
           </div>
As of this writing, 6,135 non-merge changesets have been pulled into the
mainline repository for the 5.1 release.  That is approximately  halfway
through the expected merge-window volume, which is a good
time for a summary.  A number of important new features have been merged
for this release; read on for the details.
<p>

<h4>Core kernel</h4>
<p>
<ul class="spacylist">

<li> Support for the ancient <tt>a.out</tt> executable format has been
     deprecated, with an eye toward removing it entirely later this year if
     nobody objects.  
<li> The BPF verifier has gained the ability to detect and remove dead
     code from BPF programs.
<li> The <a href="/Articles/779120/">BPF spinlock</a> patches have been
     merged, giving BPF programs increased control over concurrency.
<li> There is a new <tt>prctl()</tt> option for controlling speculative
     execution; <tt>PR_SPEC_DISABLE_NOEXEC</tt> disables enough speculation
     to block the <a
     href="https://en.wikipedia.org/wiki/Speculative_Store_Bypass">speculative
     store bypass vulnerability</a>, but only until the process calls
     <tt>exec()</tt>.
<li> A whole new set of system calls using 64-bit time values has been
     added; they are part of the kernel's <a
     href="/Articles/776435/">year-2038 preparation</a>.  See <a
     href="https://git.kernel.org/linus/b1b988a6a035">this commit</a> for
     the full list.
<li> A new sysctl knob (<tt>kernel/sched_energy_aware</tt>) can be used to
     disable energy-aware scheduling.  This feature is already disabled on
     most platforms, but by default it will be turned on for asymmetric
     systems where it makes sense.  There are also two new documents on <a
     href="https://git.kernel.org/linus/81a930d3a64a">energy-aware
     scheduling</a> and <a
     href="https://git.kernel.org/linus/1017b48ccc11">the energy model
     framework</a>. 
<li> There is a new <tt>F_SEAL_FUTURE_WRITE</tt> operation for memfd
     regions that allows the caller to continue to write to the region but
     prevents any others from doing so.  This feature supports an Android
     use case; see <a href="https://git.kernel.org/linus/ab3948f58ff8">this
     commit</a> for some more information.
<li> The <a href="/Articles/775618/">timer-events oriented CPU-frequency
     governor</a> has been merged; it should yield better 
     power-saving results on systems with tickless scheduling enabled.
</ul>

<p>
<h4>Filesystems</h4>
<p>
<ul class="spacylist">

<li> The Btrfs filesystem now supports the use of multiple ZSTD compression
     levels.  See <a href="https://git.kernel.org/linus/3f93aef535c8">this
     commit</a> for some information about the feature and the performance
     characteristics of the various levels.

</ul>

<h4>Hardware support</h4>
<p>
<ul class="spacylist">
<li> <b>Audio</b>:
     Cirrus Logic CS4341 and CS35L36 codecs,
     Rockchip RK3328 audio codecs,
     NXP pulse density modulation microphone interfaces,
     Mediatek MT8183 audio platforms,
     MediaTek MT6358 codecs,
     Qualcomm WCD9335 codecs, and
     Ingenic JZ4725B codecs.
<li> <b>Industrial I/O</b>:
     Sensirion SPS30 particulate matter sensors,
     Plantower PMS7003 particulate matter sensors,
     Texas Instruments ADS124S08 analog-to-digital converters,
     Analog Devices ad7768-1 analog-to-digital converters,
     Analog Devices AD5674R/AD5679R digital-to-analog converters,
     STMicroelectronics LPS22HH pressure sensors,
     Nuvoton NPCM analog-to-digital converters,
     Invensense ICM-20602 motion trackers,
     Maxim MAX44009 ambient light sensors, and
     Texas Instruments DAC7612 digital-to-analog converters.
<li> <b>Miscellaneous</b>:
     STMicroelectronics FMC2 NAND controllers,
     Amlogic Meson NAND flash controllers,
     ROHM BD70528 power regulators,
     Maxim MAX77650/77651 power regulators,
     Loongson-1 interrupt controllers,
     Broadcom STB reset controllers,
     OP-TEE-based random number generators,
     Habana AI accelerators,
     Mediatek GNSS receivers, and
     NVIDIA Tegra combined UARTs.
<li> <b>Networking</b>:
     NXP ENETC gigabit Ethernet controller physical and virtual devices, and
     MediaTek MT7603E (PCIe) and MT76x8 wireless interfaces.
<li> <b>SPI</b>:
     Freescale quad SPI controllers,
     NXP Flex SPI controllers, and
     SiFive SPI controllers.
<li> <b>USB</b>:
     Marvell A3700 comphy and UTMI PHYs and
     Cadence D-PHYs.
</ul>

<p>
<h4>Networking</h4>
<p>
<ul class="spacylist">

<li> There is a new socket option called "<tt>SO_BINDTOIFINDEX</tt>":
     "<q>It behaves similar to SO_BINDTODEVICE, but takes a network
     interface index as argument, rather than the network interface
     name.</q>".  See <a
     href="https://git.kernel.org/linus/f5dd3d0c9638">this changelog</a>
     for more information.
<li> As part of the <a href="/Articles/705884/">"make WiFi fast"
     effort</a>, the mac80211 layer has gained an awareness of airtime
     fairness and the ability to share the available airtime across
     stations.  
<li> The year-2038-safe socket timestamp options described in <a
     href="/Articles/776435/">this article</a> have been merged.
<li> The new "devlink health" mechanism provides notifications when an
     interface device has problems.  See <a
     href="https://git.kernel.org/linus/0739d24d0c7b">this merge commit</a> 
     and <a href="https://git.kernel.org/linus/db2ab7a08f06">this
     documentation patch</a> for details.
<li> The mac80211 layer now has support for multiple BSSIDs (MAC addresses,
     essentially) for wireless devices.
</ul>
<p>
<h4>Internal kernel changes</h4>
<p>
<ul class="spacylist">

<li> The ancient <tt>get_ds()</tt> function, which originally retrieved
     the value of the <tt>%ds</tt> segment on x86 systems, has been
     removed; all in-tree callers (of which there are few) have been
     changed to simply use the <tt>KERNEL_DS</tt> constant instead.
<li> Much of the API for dealing with atomic variables is now automatically
     generated from a set of descriptions; the intent is to provide better
     consistency across architectures and to make it easier to add
     instrumentation.  <a
     href="https://git.kernel.org/linus/ace9bad4df26">This commit</a>
     gives an overview of how it all works.
<li> The definitions of the <tt>GFP_</tt>* memory-allocation flags have
     been changed to allow the most frequently used bits to be represented
     more compactly.  According to <a
     href="https://git.kernel.org/linus/d71e53cee7c2">this commit</a>, that
     reduces the size of Arm kernels by about&nbsp;0.1%.
<li> Memory compaction has been <a
     href="/ml/linux-kernel/20190118175136.31341-1-mgorman@techsingularity.net/">reworked</a>,
     resulting in  
     significant improvements in success rates and CPU time required.
<li> The new "on-chip interconnect API" provides a generic mechanism for
     the control of connections within complex peripheral devices; see <a
     href="/Articles/782595/">Documentation/interconnect/interconnect.rst</a>
     for details.
</ul>

<p>
The 5.1 merge window will probably stay open through March 17, with the
final 5.1 release due at the beginning of May.  As always, we'll catch up
with the rest of the merge-window activity once it has closed; stay tuned.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Releases-5.1">Releases/5.1</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/782511/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor782665"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.1 Merge window part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 8, 2019 19:24 UTC (Fri)
                               by <b>johill</b> (subscriber, #25196)
                              [<a href="/Articles/782665/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <p>For the record, you wrote:
<p>
<ul><li>The mac80211 layer now has support for multiple BSSIDs (MAC addresses, essentially) for wireless devices.</li></ul>
<p>
This is rather misleading. Depending on how you look at it and what exactly you're thinking of, this either makes no sense or has been supported all along (depending on driver support).
<p>
Rather, what we did add was support for the "multi-BSSID" part of the spec, and there only scanning for and connecting to them. It's been defined for a while but is now seeing uptake in the upcoming HE specification (802.11ax). What "multi-BSSID" does isn't add support for multiple BSSIDs, but rather it adds support for an AP to have multiple BSSIDs without sending multiple beacons. Until now, if an AP wanted to advertise multiple networks, it would use multiple BSSIDs but then would have to send a beacon for each one. The "multi-BSSID" extension allows it to send a single beacon which inside the data advertises that in fact the AP has a few more BSSIDs, along with their SSID (network name) and other capabilities. This optimises air time usage because sending a lot of very similar beacons is a waste thereof.
<p>
But in a sense even that is only half the story because so far we only added support for the client-side, i.e. a mac80211-based driver connecting to such an AP. The driver also still has to support it separately due to changes in the TIM Element used for powersave; changes to iwlwifi will be coming to do so, though those are mostly in firmware with a little driver pass-through support.
<p>
What's still missing, unfortunately, is the AP-side support for this, which requires having multiple AP interfaces (netdevs) but linking them together in a suitable way that not each one will beacon. How we do that is TBD, perhaps we'll hash out a solution at netdev 0x13 in ~2 weeks.
      
          <div class="CommentReplyButton">
            <form action="/Articles/782665/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor783396"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.1 Merge window part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 18, 2019 19:40 UTC (Mon)
                               by <b>jg</b> (guest, #17537)
                              [<a href="/Articles/783396/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The MAC 802.11 airtime fairness work is important for people to pick up on.  Drivers need to be updated to use it, so initially, it depends what wifi chip you have as to whether you will see benefit.<br>
<p>
The feature not only ensures that you get a "fair share" of available WiFi bandwidth, but this also has the effect of using the available bandwidth much more efficiently (multiple stations end up able to get more total bandwidth), so it helps busy networks.<br>
<p>
See:<br>
<a href="https://www.usenix.org/system/files/conference/atc17/atc17-hoiland-jorgensen.pdf">https://www.usenix.org/system/files/conference/atc17/atc1...</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/783396/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor782688"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.1 Merge window part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 9, 2019 10:28 UTC (Sat)
                               by <b>hrw</b> (subscriber, #44826)
                              [<a href="/Articles/782688/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<a href="https://fedora.juszkiewicz.com.pl/syscalls.html">https://fedora.juszkiewicz.com.pl/syscalls.html</a> got updated to use latest syscall data.<br>
<p>
Firoz Khan did great job with moving system calls lists from header files into plain text. Looks like all architectures got recent syscall updates at same time.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/782688/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor782823"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.1 Merge window part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 12, 2019 14:34 UTC (Tue)
                               by <b>anton</b> (subscriber, #25547)
                              [<a href="/Articles/782823/">Link</a>] (23 responses)
      </p>
      
      </div>
      </summary>
      <blockquote>
Support for the ancient a.out executable format has been deprecated, with an eye toward removing it entirely later this year if nobody objects. 
</blockquote>

Where do I register my objections?

<p>Just today <a href="http://al.howardknight.net/msgid.cgi?ID=155239944700">I found</a> that my system can run my good old QMAGIC binaries with a little help from me (I have yet to find out how to do it as non-root, and how to run ZMAGIC binaries).  I use this to compare the old stuff to the new one, both in features and in performance, and want to continue to do so in the next decades.

<p>Couldn't  the same be achieved by always recompiling from the source?  No, for several reasons: 1) One of the things I compare is what the compiler produced.  2) Unlike the Linux kernel maintainers, compiler maintainers usually do not give a guarantee not to break existing code, and consequently, the chances of 20+-year old source code compiling on a current compiler are not that great.

<p>Interestingly, my recent investigation of a.out binaries was in reaction to <a href="http://al.howardknight.net/msgid.cgi?ID=155240062700">a posting</a> containing the claim:

<blockquote>
So, [Windows has] a window of ~ 25 years where binaries still typically work, 
vs Linux being "maybe a few years, and only on a single distro".
</blockquote>

Do the Linux kernel maintainers want to prove that poster right?  And that despite giving the guarantee not to break existing code?  Of course, binary compatibility problems are not just a kernel issue, but kernel maintainers should do their part in maintaining binary compatibility (as should others).
      
          <div class="CommentReplyButton">
            <form action="/Articles/782823/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor782856"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.1 Merge window part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 12, 2019 16:35 UTC (Tue)
                               by <b>willy</b> (subscriber, #9762)
                              [<a href="/Articles/782856/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I was the one who proposed it be removed entirely.<br>
<p>
Continuing to support the a.out format has risks. The initial proposal to remove the a.out coredump support was due to bugs being found in it. Given the amount of testing the a.out code receives as a whole, I have little doubt that a determined attacker could find a security hole to exploit in it.<br>
<p>
Since you appear to be a programmer yourself, how would you like to take up Alan Cox's suggestion of writing an a.out loader entirely in userspace?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/782856/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor782938"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.1 Merge window part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 13, 2019 18:16 UTC (Wed)
                               by <b>anton</b> (subscriber, #25547)
                              [<a href="/Articles/782938/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      Unfortunately, I do not have the time to pursue such a project.  I can provide binaries and libraries for testing, if someone wants to do it, though.

<p>As for the security excuse: 1) You don't even have any proof of such a vulnerability; is your belief enough justification to break existing code?  2) Even if there was such a vulnerability, the attacker would have to break into my system first before exploiting it.  3) Those who are nervous about such a hypothetical vulnerability can disable the module.
      
          <div class="CommentReplyButton">
            <form action="/Articles/782938/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor783707"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.1 Merge window part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 22, 2019 8:15 UTC (Fri)
                               by <b>flussence</b> (guest, #85566)
                              [<a href="/Articles/783707/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
If you can hold on to 20 year old binaries then surely you can afford to keep a compatible disk image and qemu around?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/783707/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor783019"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.1 Merge window part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 14, 2019 13:51 UTC (Thu)
                               by <b>nilsmeyer</b> (guest, #122604)
                              [<a href="/Articles/783019/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;  Do the Linux kernel maintainers want to prove that poster right? And that despite giving the guarantee not to break existing code? Of course, binary compatibility problems are not just a kernel issue, but kernel maintainers should do their part in maintaining binary compatibility (as should others). </font><br>
<p>
If that guarantee is broken you can of course demand your money back - you see where I'm going with this? <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/783019/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor783430"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.1 Merge window part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 19, 2019 8:54 UTC (Tue)
                               by <b>anton</b> (subscriber, #25547)
                              [<a href="/Articles/783430/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      Looks to me like you want to insult the Linux kernel maintainers by insinuating that their guarantee has no value.
      
          <div class="CommentReplyButton">
            <form action="/Articles/783430/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor783444"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.1 Merge window part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 19, 2019 13:39 UTC (Tue)
                               by <b>nilsmeyer</b> (guest, #122604)
                              [<a href="/Articles/783444/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
You're the one who expects others to maintain your pet feature for free, indefinitely. I find that unreasonable. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/783444/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor783313"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.1 Merge window part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 18, 2019 4:37 UTC (Mon)
                               by <b>dvdeug</b> (guest, #10998)
                              [<a href="/Articles/783313/">Link</a>] (13 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
ELF support came to Linux in 1995 (e.g. Slackware 3.0), the same year as Windows 95 (the first 32-bit consumer Windows) was released. And modern Windows doesn't support 16-bit programs, so Linux without a.out support offers support as far back as Windows does, about 24 years. It's a lot easier to run an old Linux in a VM, but there's more support for emulating old Windows programs.<br>
<p>
In any case, proprietary code has been rare on Linux, and definitely pre-1995. Besides bragging rights, what do you gain from having a.out support in Linux?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/783313/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor783382"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.1 Merge window part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 18, 2019 16:55 UTC (Mon)
                               by <b>deater</b> (subscriber, #11746)
                              [<a href="/Articles/783382/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; In any case, proprietary code has been rare on Linux, and </font><br>
<font class="QuotedText">&gt; definitely pre-1995.</font><br>
<p>
Not necessarily true.  A lot of software back then depended on the Motif gui library, so even nominally free software ended up being statically linked against that.<br>
<p>
I know I had an a.out "xmcd" binary that I used for many many years after the ELF transition, though I do admit I no longer run a.out files on a regular basis (though I do regularly run binary-only software written in the 1980s, just not on Linux).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/783382/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor783429"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.1 Merge window part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 19, 2019 8:33 UTC (Tue)
                               by <b>dvdeug</b> (guest, #10998)
                              [<a href="/Articles/783429/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Wow, <a href="https://www.amb.org/xmcd/">https://www.amb.org/xmcd/</a> is still up and that page is a blast from the past. Last change was in 2004, so you might be able to compile a new version, but I don't know how well it would work with PulseAudio.<br>
<p>
Hopefully current virtual machines would handle the need for running Motif-linked binaries. It seems unlikely a GUI program would need the blistering speed of native hardware, and the more complex library-wise you get, the more headaches you get trying to install that on a modern system. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/783429/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor784010"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.1 Merge window part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 26, 2019 13:12 UTC (Tue)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/784010/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The painful part might be actually accessing a CD drive from inside the VM. Even with various forms of USB and ATA passthrough, in my experience it's still a toss-up whether that sort of thing works or causes an obscure and ridiculous error or even crashes the host (not with USB, but ATA/PCI passthrough is evil).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/784010/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor783431"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.1 Merge window part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 19, 2019 9:32 UTC (Tue)
                               by <b>anton</b> (subscriber, #25547)
                              [<a href="/Articles/783431/">Link</a>] (9 responses)
      </p>
      
      </div>
      </summary>
      32-bit Windows programs were supported since Windows NT (release 1993), and Win32s for Windows 3.1 (beta 1992).  And Windows 10 (the most modern Windows) actually does support 16-bit applications in its 32-bit variant.  Anyway, the issue is about running 32-bit binaries, just a different format.

<p>I have 5 OMAGIC, 9 ZMAGIC, and 14 QMAGIC binaries in my /usr/local/bin.  One of the QMAGIC binaries is from a program that I have in source but that does not compile with current gcc (unfortunately, gcc maintainers like to break existing programs in newer gcc versions; of course they justify it by claiming that the programs were broken before, but that does not change the fact that they don't compile programs that they used to compile in earlier versions).  I have not checked the others whether they can be compiled.

<p>So what do I gain? I can run old binaries, without needing to recompile them, which may not be possible, and in any case, requires some effort.

<p>There is value in being able to run old software: We can better study and compare it if we can run it.  And the basis of all that is a willingness to support it.

<p>If the Linux kernel maintainers retract their support for old software, why should those who you point to as alternative not retract support, too.  E.g., you claim we can run old Linux kernels in a VM, and old binaries in that.  But why should VM maintainers support old Linux kernels?  Do you guarantee that they won't change their VM a few years down the road in a way that supports only modern kernels that don't have a.out support if you get your way?
      
          <div class="CommentReplyButton">
            <form action="/Articles/783431/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor783434"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.1 Merge window part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 19, 2019 10:00 UTC (Tue)
                               by <b>edeloget</b> (subscriber, #88392)
                              [<a href="/Articles/783434/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; But why should VM maintainers support old Linux kernels? </font><br>
<font class="QuotedText">&gt; Do you guarantee that they won't change their VM a few years </font><br>
<font class="QuotedText">&gt; down the road in a way that supports only modern kernels </font><br>
<font class="QuotedText">&gt; that don't have a.out support if you get your way?</font><br>
<p>
Wouldn't that be antithetical to the purpose of a virtual machine, which is to provide a kind of emulation layer for the hardware? A VM that can only run a selected list of OS is of no use, and they cannot assume what you'll feed to them.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/783434/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor783441"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.1 Merge window part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 19, 2019 12:44 UTC (Tue)
                               by <b>anton</b> (subscriber, #25547)
                              [<a href="/Articles/783441/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      I am not an expert on the business of VMs, but I imagine that, just like some here don't consider it the purpose of the kernel to run old binaries, VM maintainers might also consider it not their purpose to run old OSs:
They  could (and probably do) decide to emulate hardware that is too recent for OSs above a certain age.


      
          <div class="CommentReplyButton">
            <form action="/Articles/783441/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor783497"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.1 Merge window part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 19, 2019 19:08 UTC (Tue)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/783497/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Nobody stops you from using an old version of QEMU. It should be fine for the next 25-30 years or so - before Linux developers remove ELF in favor of something newer like TROLL.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/783497/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor783675"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.1 Merge window part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 21, 2019 21:47 UTC (Thu)
                               by <b>mathstuf</b> (subscriber, #69389)
                              [<a href="/Articles/783675/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I feel like options such as ENT (executable notation table) or HOBBIT (handy object bundles built in tandem) would be better.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/783675/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor783519"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.1 Merge window part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 19, 2019 23:41 UTC (Tue)
                               by <b>mpr22</b> (subscriber, #60784)
                              [<a href="/Articles/783519/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Given that SIMH exists, and includes emulations for computers that are older than the first operating systems, I am not overly worried on this score :)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/783519/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor783493"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.1 Merge window part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 19, 2019 21:24 UTC (Tue)
                               by <b>dvdeug</b> (guest, #10998)
                              [<a href="/Articles/783493/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I thought about Windows NT, but I forgot about Win32s. But by that standard, Linux wins hands-down; it can run applications written for Unix in 1977, provided they were written in Bourne Shell. The question is running the applications that people want to run on the modern systems they're running, and the last 16-bit Windows programs came out quite a bit after the last Linux a.out programs.<br>
<p>
Most versions of Linux can't run ix86 binaries; only those compiled for ix86 or AMD64 can. Had Intel had their way, we'd be running Itanium without direct support for ix86 binaries. Perhaps in five or ten years, we'll be running ARM64 without direct support for ix86 or AMD64 binaries.<br>
<p>
We can better study something in its home environment, not by running it on a modern system where various things might not work (audio, modern resolutions, USB).<br>
<p>
Out of the box, Retropie supports the ZX-Spectrum, the TI-99, the MSX, the Atari ST, the Coco, the Colecovision, the Amstrad CPC, Amiga, SAM Coup√©, the Macintosh, MS-DOS and the Commodore 64, along with dozens of other, usually more gaming focused, systems. It seems unlikely emulating x86, one of the most common computer hardware platforms of all time, will be a big problem for the foreseeable future.<br>
<p>
You're demanding that Linux accept your solution for your obscure problem; there's not that many people who ran Linux before 1996, and many of those have given up all their old binaries from the time. If you were volunteering as a maintainer, you'd have more say in if this feature stays; if you were looking for solutions to a problem, people will be more willing to help. But to demand that a feature that doesn't fully work (i.e. core dumps were broken) be the only possible solution to your problem isn't helpful.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/783493/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor783659"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.1 Merge window part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 21, 2019 17:57 UTC (Thu)
                               by <b>anton</b> (subscriber, #25547)
                              [<a href="/Articles/783659/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <blockquote>
Most versions of Linux can't run ix86 binaries; only those compiled for ix86 or AMD64 can.
</blockquote>

That's beside the point.  This is not about running binaries for one architecture on other architectures, this is about removing support for a binary format, i.e., a pure software issue.

<p>[But anyway, the statement is wrong. IA-32 binaries could be run on Linux-Alpha.  Someone reported running an ARM binary of Gforth on an Intel-based Android tablet; and I expect that Android also has emulation the other way round.]

<blockquote>
We can better study something in its home environment, not by running it on a modern system where various things might not work (audio, modern resolutions, USB).
</blockquote>

I study and compare things in many different environments.  One thing that I study is how the various versions of the software perform on hardware, both on old hardware and new hardware.  And to do that, I need to run the old software on new hardware, with (necessarily) new kernels.  Retropie won't help me with that.  And fortunately, audio, resolutions, and USB are no problems for the stuff I do.

<blockquote>
You're demanding that Linux accept your solution for your obscure problem
</blockquote>

I just object to removing a feature from the kernel that I use.

<blockquote>
If you were volunteering as a maintainer, you'd have more say in if this feature stays
</blockquote>

Did anybody ask for a maintainer?  In any case, are you suggesting that, when Linus Torvalds says "Breaking user programs simply isn't acceptable", he means "Breaking maintainer programs simply is not acceptable, but breaking non-maintainer programs is"?

<blockquote>
But to demand that a feature that doesn't fully work (i.e. core dumps were broken) be the only possible solution to your problem isn't helpful.
</blockquote>

The feature works better now than with the proposed change; that's why I object to the change.

<p>Someone suggested a userspace loader for a.out binaries.  When that works with little overhead, it will be acceptable for me, too, but somebody has to write it, while the kernel support exists, and works better than the current state (non-existence) of the userspace loader.






      
          <div class="CommentReplyButton">
            <form action="/Articles/783659/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor783670"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.1 Merge window part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 21, 2019 19:53 UTC (Thu)
                               by <b>excors</b> (subscriber, #95769)
                              [<a href="/Articles/783670/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Someone reported running an ARM binary of Gforth on an Intel-based Android tablet; and I expect that Android also has emulation the other way round.</font><br>
<p>
Intel developed an ARM-to-x86 binary translator (Houdini) for their Android BSP, for compatibility with popular apps that contain ARM-only native code; I suspect that's why it worked. I doubt anyone has done it the other way round, because there are approximately zero Android apps with Intel-only native code.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/783670/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor783680"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.1 Merge window part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 22, 2019 0:42 UTC (Fri)
                               by <b>dvdeug</b> (guest, #10998)
                              [<a href="/Articles/783680/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Then Windows is moot? Cross-Linux compatibility versus Windows was certainly was part of the original discussion.<br>
<p>
At this point, I question the relevance of any numbers you get comparing these a.out binaries to modern systems. You're comparing a program compiled for the original Pentium with GCC 2.7 (at the latest) and libc4 to a different program natively running on a recent version of AMD64 using modern versions of GCC and GNU libc. Where the faults lay for speedups and slowdowns is going to be very hard to tell. In any case, for the near future, you can run a Linux 5.0 kernel in an virtual machine if you want to compare things.<br>
<p>
I'm not Linus, but I'm certainly more worried about some of the lost filesystem support making file recovery quite complex than I am about forcing a.out binaries to be run via qemu or a userspace loader, if anyone cares to write one. Supporting ancient binaries is much better and easier handled by emulators than trying to maintain a 25-year old environment mixed in with a modern one. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/783680/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor783613"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.1 Merge window part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 21, 2019 12:56 UTC (Thu)
                               by <b>wojtekka</b> (guest, #131045)
                              [<a href="/Articles/783613/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
If Wine can load and run binaries built for a completely different operating system, how hard can it be to create an application that loads and runs a.out binaries in user-space? This and binfmt_misc should make things completely transparent.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/783613/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor783812"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.1 Merge window part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 23, 2019 17:22 UTC (Sat)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/783812/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
If you're not a programmer, then getting Wine to run Windows binaries can actually be quite tricky ...<br>
<p>
If you're a company with programmers on tap, then most things are *possible*.<br>
<p>
Thing is, I'm a private individual with no real kernel experience (although my C was pretty decent), so getting old binaries to work is not *practical*.<br>
<p>
That's what I feel is often missed here - what is *possible* is not always *practical*.<br>
<p>
I'd love a guarantee like the IBM mainframes - I believe you can run "dawn of computing" mainframe software on the latest megabeasts, because the current system can emulate the previous system, which can emulate the one before that, which can emulate the one before that ... turtles all the way down. But that COSTS MONEY, which us little guys don't have, and most people don't seem to consider important enough to do as a project, be it commercial or private.<br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/783812/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor783891"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.1 Merge window part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 26, 2019 10:27 UTC (Tue)
                               by <b>wojtekka</b> (guest, #131045)
                              [<a href="/Articles/783891/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
If there's a need for running a.out binaries without kernel support someone *will* come up with a solution. Huge part of the software I use everyday was merely *possible* at some point and most probably was not *practical* because there were already alternatives available. Just sayin'.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/783891/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2019, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
