        <!DOCTYPE html>
        <html lang="en">
        <head><title>LPC: Booting Linux in five seconds [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/299483/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/299089/">Return to the Front page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/299483/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>LPC: Booting Linux in five seconds</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>We're bad at marketing</b>
<p>
We can admit it, marketing is not our strong suit. Our strength is
writing the kind of articles that developers, administrators, and
free-software supporters depend on to know what is going on in the
Linux world. Please <a href="/Promo/nsn-bad/subscribe">subscribe today</a> to help us keep doing that, and so
we donâ€™t have to get good at marketing.
</blockquote>
<div class="GAByline">
           <p>September 22, 2008</p>
           <p>This article was contributed by <a href="http://zgp.org/~dmarti/">Don Marti</a></p>
           </div>
<p>At the Linux Plumbers Conference Thursday,
<a href="http://www.fenrus.org/">Arjan van de
Ven</a>, Linux developer at Intel and author of
PowerTOP, and Auke Kok, another Linux developer at
Intel's <a href="http://oss.intel.com/en-us/">Open
Source Technology Center</a>, demonstrated a Linux
system booting in five seconds.  The hardware was
an Asus EEE PC, which has solid-state storage,
and the two developers beat the five second
mark with two software loads: one modified <a
href="http://fedoraproject.org/">Fedora</a> and one  
modified <a href="http://www.moblin.org/">Moblin</a>.
They had to hold up the EEE PC for the audience,
since the time required to finish booting was less
than the time needed for the projector to sync.</p>

<p>How did they do it?  Arjan said it starts with
the right attitude.  "<q>It's not about booting faster,
it's about booting in 5 seconds</q>".  Instead of saving
a second here and there, set a time budget for the
whole system, and make each step of the boot finish
in its allotted time.  And no cheating.  "<q>Done booting
means CPU and disk idle<q>", Arjan said.  No fair putting
up the desktop while still starting services behind
the scenes.  (An audience member pointed out that
Microsoft does this.)  The "done booting" time did
not include bringing up the network, but did include
starting NetworkManager.  A system with a conventional
hard disk will have to take longer to start up: Arjan
said he has run the same load on a ThinkPad and achieved
a 10-second boot time.</p>

<p>Out of the box, Fedora takes
45 seconds from power on to <a
href="http://www.gnome.org/projects/gdm/">GDM</a>  
login screen.  A tool called <a
href="http://www.bootchart.org/">Bootchart</a>,  
by Ziga Mahkovec, offers some details.  In a
Bootchart graph of the Fedora boot (fig. 1), the
system does some apparently time-wasting things.
It spends a full second starting the loopback
device&mdash;checking to see if all the network
interfaces on the system are loopback.  Then there's
two seconds to start "sendmail."  "<q>Everybody pays
because someone else wants to run a mail server<q>",
Arjan said, and suggested that for the common
laptop use case&mdash;an SMTP server used only
for outgoing mail&mdash;the user can simply run <a
href="http://packages.debian.org/stable/mail/ssmtp">ssmtp</a>.</p>  

<table align="left">
<tr><td>
<a href="http://lwn.net/Articles/299538/">
<img src="https://static.lwn.net/images/fastboot/fastboot-f1_sm.png" alt="[Fedora bootchart]"
border=0 width=150 hspace=3
height=249 align="left">
</a>
</td></tr>
<tr><td align="center">
<b>Figure 1</b>
</td></tr></table>

<p>Another time-consuming process
on Fedora was "setroubleshootd," a <a
href="http://danwalsh.livejournal.com/7995.html">useful  
tool</a> for finding problems with Security Enhanced
Linux (SELinux) configuration.  It took five seconds.
Fedora was not to blame for everything.  Some upstream
projects had puzzling delays as well.  The X Window
System runs the C preprocessor and compiler on
startup, in order to build its keyboard mappings.</p>

<p>Ubuntu's boot time is about the same: two
seconds shorter (fig. 2).  It spends 12 seconds running
modprobe running a shell running modprobe, which
ends up loading a single module.  The tool for adding
license-restricted drivers takes 2.5 seconds&mdash;on
a system with no restricted drivers needed.
"<q>Everybody else pays for the binary driver<q>", Arjan
said.  And Ubuntu's GDM takes another 2.5 seconds of
pure CPU time, to display the background image.</p>

<table align="right">
<tr><td>
<a href="http://lwn.net/Articles/299540/">
<img src="https://static.lwn.net/images/fastboot/fastboot-f2_sm.png" alt="[Ubuntu bootchart]"
border=0 width=150 hspace=3
height=230 align="right">
</a>
</td></tr>
<tr><td align="center">
<b>Figure 2</b>
</td></tr></table>

<p>Both distributions use splash screens.  Arjan and
Auke agreed, "<q>We hate splash screens.  By the time
you see it, we want to be done</q>".  The development
time that distributions spend on splash screens is
much more than the Intel team spent on booting fast
enough not to need one.</p>

<h3>How they did it: the kernel</h3>

<p>Step one was to make the budget.  The kernel
gets one second to start, including all modules.
"Early boot" including init scripts and background
tasks, gets another second.  X gets another second,
and the desktop environment gets two.</p>

<p>The kernel has to be built without initrd, which
takes half a second with nothing in it.  So all
modules required for boot must be built into the
kernel.  "<q>With a handful of modules you cover 95% of
laptops out there<q>", Arjan said.  He suggested building
an initrd-based image to cover the remaining 5%.</p>

<p>Some kernel work made it possible to do
asynchronous initialization of some subsystems.
For example, the modified kernel starts the Advanced
Host Controller Interface (AHCI) initialization,
to handle storage, at the same time as the Universal
Host Controller Interface (UHCI), in order to handle
USB (fig.3).  "<q>We can boot the kernel probably in
half a second but we got it down to a second and we
stopped<q>", Arjan said.  The kernel should be down to
half a second by 2.6.28, thanks to a brand-new fix
in the AHCI support, he added.</p>

<table align="left">
<tr><td>
<a href="http://lwn.net/Articles/299542/">
<img src="https://static.lwn.net/images/fastboot/fastboot-f3_sm.png" alt="[Asynchronous hardware
init]" border=0 width=250 hspace=3
height=71 align="left">
</a>
</td></tr>
<tr><td align="center">
<b>Figure 3</b>
</td></tr></table>

<p>One more kernel change was a small patch to support
readahead.  The kernel now keeps track of which blocks
it has to read at boot, then makes that information
available to userspace when booting is complete.
That enables readahead, which is part of the early
boot process.</p>

<h3>How they did it: readahead and init</h3>

<p>Fedora uses <a
href="http://upstart.ubuntu.com/">Upstart</a>  
as a replacement for the historic "init" that
traditionally is the first userspace program to run.
But the Intel team went back to the original init.
The order of tasks that init handles is modified
to do three things at the same time: first, an
"sReadahead" process, to read blocks from
disk so that they're cached in memory, second,
the critical path: filesystem check, then the <a
href="http://www.freedesktop.org/wiki/Software/dbus">D-Bus</a>  
inter-process communication system,
then X, then the desktop.  And the
third set of programs to start is the <a
href="http://www.freedesktop.org/wiki/Software/hal">Hardware  
Abstraction Layer (HAL)</a>, then the <a
href="http://www.kernel.org/pub/linux/utils/kernel/hotplug/udev.html">udev</a>  
manager for hot-plugged devices, then networking.
udev is used only to support devices that might
be added later&mdash;the system has a persistent,
old-school /dev directory so that boot doesn't depend
on udev.</p>

<p>The arrangement of tasks helps get efficient use
out of the CPU.  For example, X delays for about
half a second probing for video modes, and that's
when HAL does its CPU-intensive startup (fig. 4).</p>

<table align="right">
<tr><td>
<a href="http://lwn.net/Articles/299545/">
<img src="https://static.lwn.net/images/fastboot/fastboot-f4_sm.png" alt="[Parallel tasks]"
border=0 width=150 hspace=3
height=88 align="right">
</a>
</td></tr>
<tr><td align="center">
<b>Figure 4</b>
</td></tr></table>

<p>In a graph of disk and CPU use, both are
at maximum for most of the boot time, thanks
to sReadahead.  When X starts, it never has to
wait to read from disk, since everything it needs
is already in cache.  sReadahead is based on Fedora <a
href="http://dailypackage.fedorabook.com/index.php?/archives/59-Wednesday-Why-Readahead.html">Readahead</a>,
but is modified to take advantage of
the kernel's new list of blocks read.
sReadahead is to be released next week on <a
href="http://www.moblin.org/">moblin.org</a>,  
and the kernel patch is intended for mainline as
soon as Arjan can go over it with ext3 filesystem
maintainer Ted Ts'o.  (Ted, in the audience, offered
some suggestions for reordering blocks on disk to
speed boot even further.)</p>

<p>There's a hard limit of 75MB of reads in order
to boot, set by the maximum transfer speed of the
Flash storage:  3 seconds of I/O at 25MB/s.  So,
"<q>We don't read the whole file. We read only the
pieces of the file we actually use<q>", Arjan said.
sReadahead uses the "idle" I/O scheduler, so that if
anything else needs the disk it gets it.  
With readahead turned off, the system boots in seven
seconds, but with readahead, it meets the target of five.</p>

<p>X is still problematic.  "<q>We had to do a lot
of damage to X<q>", Arjan said.  Some of the work
involved eliminating the C compiler run by re-using
keyboard mappings, but other work was more temporary.
The current line of X development, though, puts more
of the hardware detection and configuration into the
kernel, which should cut the total startup time.
Since part of the kernel's time budget is already
spent waiting for hardware to initialize, and it
can initialize more than one thing at a time, it's
a more efficient use of time to have the kernel
initialize the video hardware at the same time it
does USB and ATA.  X developer Keith Packard, in the
audience and also an Intel employee, offered help.
Setting the video mode in the kernel would not
let the kernel initialize it at the same time as
the rest of the hardware, as shown in figure 3.
The fast-booting system does not use GDM but boots
straight to a user session, running the XFCE desktop
environment.  Instead of GDM, Arjan said later,
a distribution could boot to the desktop session of
the last user, but start the screensaver right away.
If a different user wanted to log in, he or she could
use the screensaver's "switch user" button.</p>

<table align="left">
<tr><td>
<a href="http://lwn.net/Articles/299546/">
<img src="https://static.lwn.net/images/fastboot/fastboot-f5_sm.png" alt="[5 second boot]"
border=0 width=66 hspace=3
height=230 align="left">
</a>
</td></tr>
<tr><td align="center">
<b>Figure 5</b>
</td></tr></table>


<p>In conclusion, Arjan said, "<q>Don't settle for 'make
boot faster.'  It's the wrong question.  The question
is 'make boot fast'</q>".  And don't make all users wait
because a few people run a filesystem that requires
a module or sendmail on their laptops.  "<q>Make it
so you only pay the price if you use the feature</q>".
Distributions shouldn't have to maintain separate
initrd-based and initrd-free kernel packages, he said
later.  The kernel could try to boot initrd-free,
then fall back if for whatever reason it couldn't
see /sbin/init, as might happen if it's missing the
module needed to mount the root filesystem.</p>

<p>PowerTOP spawned a flurry of power-saving hacks
from all areas of the Linux software scene.  The
combination of Bootchart, readahead, and a five-second
target looks likely to set off a friendly boot time
contest among Linux people as well.  At the conference
roundup Friday, speaker Kyle McMartin announced that
both Fedora and Ubuntu have fixed some delays in
their boot process, and there was much applause.</p>


FIGURE CREDIT: Arjan van de Ven and Auke Kok, Intel<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Bootstrap_process">Bootstrap process</a></td></tr>
            <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Fast_booting">Fast booting</a></td></tr>
            <tr><td><a href="/Archives/GuestIndex/">GuestArticles</a></td><td><a href="/Archives/GuestIndex/#Marti_Don">Marti, Don</a></td></tr>
            <tr><td><a href="/Archives/ConferenceIndex/">Conference</a></td><td><a href="/Archives/ConferenceIndex/#Linux_Plumbers_Conference-2008">Linux Plumbers Conference/2008</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/299483/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor299688"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 16:25 UTC (Mon)
                               by <b>hummassa</b> (guest, #307)
                              [<a href="/Articles/299688/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Is there a "how-to" or "make your eeepc boot in 5 seconds too" guide/tutorial<br>
around? with the patches?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299688/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299700"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 17:12 UTC (Mon)
                               by <b>a9db0</b> (subscriber, #2181)
                              [<a href="/Articles/299700/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<p>
Please?  For the rest of us less-than-elite hacker types?<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299700/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor317524"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 2, 2009 7:09 UTC (Mon)
                               by <b>lkundrak</b> (subscriber, #43452)
                              [<a href="/Articles/317524/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Check out the alpha version of Moblin distribution, it incorporates the features mentioned in this article.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/317524/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor299696"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 17:00 UTC (Mon)
                               by <b>paravoid</b> (subscriber, #32869)
                              [<a href="/Articles/299696/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Thanks a lot for the coverage!<br>
From the moment I saw the talk description I was wondering how on earth did they manage to cut the boot time to an order of magnitude from most systems.<br>
<p>
They took some shortcuts but they still did some amazing work. And of course it's nice to see that it has become a target for some very capable people.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299696/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor299698"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 17:06 UTC (Mon)
                               by <b>AJWM</b> (guest, #15888)
                              [<a href="/Articles/299698/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Cool stuff.<br>
<p>
Just don't forget the tune2fs options so you don't get the dreaded "fsck forced" on a 200G partition...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299698/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor299704"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Cheating: Not just for Microsoft anymore</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 17:26 UTC (Mon)
                               by <b>rfunk</b> (subscriber, #4054)
                              [<a href="/Articles/299704/">Link</a>] (27 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
"No fair putting up the desktop while still starting services behind the <br>
scenes."<br>
<p>
I'm pretty sure Ubuntu currently does this.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299704/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299744"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Cheating: Not just for Microsoft anymore</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 18:47 UTC (Mon)
                               by <b>SimonKagstrom</b> (guest, #49801)
                              [<a href="/Articles/299744/">Link</a>] (23 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I've never quite understood this sentiment. As long as I can start working while the system continues to start services in the background (albeit a bit slower), I think that's great.<br>
<p>
// Simon<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299744/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299750"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Cheating: Not just for Microsoft anymore</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 18:58 UTC (Mon)
                               by <b>drag</b> (guest, #31333)
                              [<a href="/Articles/299750/">Link</a>] (9 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It's kinda dirty. <br>
<p>
What ends up happening is that the user is presented with something that looks like it's ready to be used, but isn't. You may be missing your networking or not have file sharing, plus your system is using up all it's I/O and cpu, which means that it's not going to be responsive or open up your applications quickly. <br>
<p>
A extreme example of this sort of approach would be just posting a screenshot of the desktop as the splashscreen and let the parts fill in and replace bits of the screen as they are loaded. It could be a neat effect, but it would be a lousy way to hide the fact that it takes many minutes to boot up your system.<br>
<p>
<p>
Plus the point is to have the system fully bootable. So it's a challenge, a sport, so you have to have rules so nobody tries to cheat. :) Now if you have a system that boots under five seconds, but shaves off a second or two by bringing up a fake-ish user interface then that may be something else.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299750/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299773"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Cheating: Not just for Microsoft anymore</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 19:38 UTC (Mon)
                               by <b>SimonKagstrom</b> (guest, #49801)
                              [<a href="/Articles/299773/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Well, if it's a sport - I agree, there should be the same rules for everyone :-)<br>
<p>
However, otherwise I simply want to start working as soon as possible after I've logged in (as probably most people here, I seldomly boot). Obviously showing a screenshot of the desktop is just plain silly, but why should I have to wait for some network share to be mounted unless I really need it? <br>
<p>
Applications will start slower, sure, but if the system is unusable because of I/O caused by daemons starting in the background I'd consider that a plain bug which should be fixed.<br>
<p>
// Simon<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299773/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299861"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Cheating: Not just for Microsoft anymore</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 22:28 UTC (Mon)
                               by <b>drag</b> (guest, #31333)
                              [<a href="/Articles/299861/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
What if your application depends on data on a network share?<br>
<p>
I figure the services your starting up are starting up for good reason and you'll probably have applications that depend on them. Otherwise, on a desktop, what is the point of starting them? :)<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299861/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299918"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Cheating: Not just for Microsoft anymore</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 7:35 UTC (Tue)
                               by <b>mjthayer</b> (guest, #39183)
                              [<a href="/Articles/299918/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The distribution sets them up so that the user doesn't have to know about them at all.  E.g. the user doesn't have to know about CUPS in order to print.  (Although I would be interested to know how many Linux users have succeeded in printing without knowing about CUPS.)  Of course, that could also be made more intelligent - some services could be started when they are needed by default (I thought that was the point of upstart) and automatically moved to or from autostart on boot depending on how often the user needs them.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299918/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299984"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Cheating: Not just for Microsoft anymore</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 15:14 UTC (Tue)
                               by <b>macc</b> (guest, #510)
                              [<a href="/Articles/299984/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
CUPS is unpleasantly opaque.<br>
<p>
It's either there or not after<br>
boot ( server on remote host ).<br>
Though an easy way to _really_ <br>
flush printjobs that have gone bad <br>
would be nice too.<br>
<p>
The next bloodpressure raisers<br>
are beagle and that gaga <br>
network-manager. ( on SuSE )<br>
MACC<br>
 <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299984/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300079"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Cheating: Not just for Microsoft anymore</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 20:05 UTC (Tue)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/300079/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
What's wrong with 'lprm'? It works for me.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300079/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor299931"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Cheating: Not just for Microsoft anymore</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 9:08 UTC (Tue)
                               by <b>NAR</b> (subscriber, #1313)
                              [<a href="/Articles/299931/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
There are some daemons like spamd of spamassassin that are not necessary right after boot, so they could be started later in the background...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299931/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300063"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Cheating: Not just for Microsoft anymore</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 17:58 UTC (Tue)
                               by <b>arjan</b> (subscriber, #36785)
                              [<a href="/Articles/300063/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Spam Assassin should just be started on first use; if you only use gmail for your email you shouldn't pay for it (both in time and memory) after all.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300063/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor299895"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Cheating: Not just for Microsoft anymore</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 2:30 UTC (Tue)
                               by <b>k8to</b> (guest, #15413)
                              [<a href="/Articles/299895/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Well in the windows camp, for example, you can't even successfully operate the start menu.  So just triggering the attempted launch the programs you want can be really unworkable, and with a less than perfect io subsystem, your attempts to launch programs may cause thrashing, delaying your eventual ability to make use of your programs.<br>
<p>
Linux is of course a good deal better than this, but avoiding these devils bargains is still laudible.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299895/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor301804"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Cheating: Not just for Microsoft anymore</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 4, 2008 18:36 UTC (Sat)
                               by <b>pboddie</b> (guest, #50784)
                              [<a href="/Articles/301804/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <blockquote>Well in the windows camp, for example, you can't even successfully operate the start menu.</blockquote>

<p>Indeed. What's the point of showing the user the desktop if they can't actually use it? That's the question the Windows developers should be asking themselves.</p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/301804/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor299752"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Cheating: Not just for Microsoft anymore</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 19:11 UTC (Mon)
                               by <b>jzbiciak</b> (guest, #5246)
                              [<a href="/Articles/299752/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
On Windows boxes, at least, it's pretty onerous.  On my work laptop (where I'm forced to use WinXP), it takes me about 30-40 seconds to get to the login prompt, and then another minute or so for all the background services to finish launching after logging in.  The laptop isn't usable the bulk of those background services finish launching.  I suspect that that's a huge source of this sentiment, at least among folks that have to use both OSes.  We don't want this in our Linux.  :-)<br>
<p>
A lot of the problem is due to how Windows handles things.  I can *try* to use the laptop, but random things keep killing the keyboard focus, and launching certain apps "too early" causes them to merely crash.  (I suspect the app crashes are due to the firewall service, which I think is in the list of things started *after* login.)  There's all sorts of stupid things in that delayed startup, such as the backup software throwing a splash screen up.  I can only speculate on what keeps eating the keyboard focus.  SMS scripts I suspect.  (I get similar issues when the company rolls out patches--bizarre things happen to my keyboard focus and the whole desktop flashes.)<br>
<p>
I haven't had similar issues with delayed services starting under Linux, since they are far, far less disruptive.  Sure, the disk chugs a little in the background, but the only thing I've noticed is that Firefox might take a couple extra seconds to load.  So, as a practical matter, some things *can* be started late without upsetting the user.<br>
<p>
But, I suspect that wasn't the point.  What ought and ought not to be started late is a judgment call, and the overall impact on the user can be difficult to judge without putting the result in front of a lot of users.  For an apples-to-apples, this-is-the-real-thing-no-questions-asked comparison, it seems entirely appropriate to measure power-on to disk-and-CPU-idle.  This eliminates judgment calls and fuzzy, difficult to measure impacts.  It gives you a framework for tightly targeting a boot-time budget such as what Arjan described.  You don't get to wiggle around the budget by saying "Oh, we can defer that one."  Instead, you're forced to consider why it's slow and fix it.<br>
<p>
If you need to throw a few things out of that initial boot, such as full network bringup in this example, then you can separately determine what its impact is.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299752/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor299778"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Cheating: Not just for Microsoft anymore</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 19:41 UTC (Mon)
                               by <b>elanthis</b> (guest, #6227)
                              [<a href="/Articles/299778/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
They simply meant it wasn't fair for the sake of this exercise.<br>
<p>
It's not wrong, if done right.  It just didn't count for their target of <br>
"everything necessary in 5 seconds."  Minus networking, apparently, but <br>
that's fine, since with wireless I don't generally get net access until I <br>
login in and select an access point anyway.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299778/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor299794"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Cheating: Not just for Microsoft anymore</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 20:03 UTC (Mon)
                               by <b>arjan</b> (subscriber, #36785)
                              [<a href="/Articles/299794/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
We don't want to need this. We want to be DONE in 5 seconds. (and showed that it could be done)<br>
<p>
Doing the "stuff in the background" is just hiding latency/boot time, it's not reducing it fundamentally.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299794/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299974"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Cheating: Not just for Microsoft anymore</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 17:36 UTC (Tue)
                               by <b>pjm</b> (guest, #2080)
                              [<a href="/Articles/299974/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
What question are we discussing here?  Are we discussing what some useful rules for an artificial game are, or what should normal system startup behaviour be?<br>
<p>
Let's address the second of those first.<br>
<p>
Note that what's been demonstrated isn't in fact "done" by 5 seconds: networking isn't up, bluetooth isn't up, various other services aren't up.  Some users do want these services to be started at around boot time (e.g. maybe they can't get any work done until the network is up, or have only a bluetooth keyboard), but may nevertheless want to be able to start work before waiting for the some services to have started.  In other words, they do want the system to be "putting up a desktop while still starting services behind the scenes" (or at least put up a desktop before all services have started, i.e. further delaying some services to reduce resource contention while the user starts some applications).  Certainly many users would want to be able to enter their username &amp; password while other things are still starting, as an instance of parallelization.<br>
<p>
That still leaves various issues like avoiding bad behaviour when applications (including the one handling the login) don't have services they need, but we can at least say that in principle users would like to have a usable desktop as soon as possible even if some services that they want to be started around boot time haven't yet started.<br>
<p>
<p>
On to the question of good rules for a game.<br>
<p>
The idea of having such a game is for it to result in improvements to the systems that people actually run, where "improvements" is defined by what people actually care about.<br>
<p>
If the game rules result in a system too distant from what will run on real systems, then it's harder to translate the game-produced system across to real systems, which may result in this transferral not happening.  This suggests that the game rules should be such that the resulting system does start networking, avahi etc.  (That's not to say that the goodness metric should be simply the time taken for all services to have started.)<br>
<p>
Having game players spend time "do[ing] a lot of damage to X" or changes that break hardware that distributors want to support regardless of boot time, such work isn't useful unless someone does the remaining work of re-adding any of the lost functionality that the distributor considers more valuable than the corresponding reduction in boot time.  If there's doubt as to whether anyone would do that work, then maybe the rules shouldn't reward optimizations that do more damage than most distributors would accept; whereas in cases where it is likely that someone else would do the work, then perhaps it's better to reward work on such damaging optimizations than not to have those optimizations.<br>
<p>
Different users need different things started up before they can be productive with their machine.  The goodness metric for the game can either go for simplicity (choose a common case and optimize that while ignoring all others' needs), or we can try to weight different cases according to their importance to most distributors (which is somewhat arbitrary in choice of weighting, but should result in improvements for more users).  We don't have to choose the weights in advance, it's enough for game players to understand that it will be judged by a weighting of the value of the system for different types of users, and that the weighting and judgement of "system value" is intended to reflect real-world values.  (Of course there's value in game players being informed about the relative importance of different use cases or how people value boot time compared to lost functionality, but we don't need to specify it all in great detail before a game can begin.)<br>
<p>
<p>
On the question of delaying login to avoid applications misbehaving when services they need aren't started yet: Note that even the program handling the login might need the network up (for network filesystems or other remote databases) or need setroubleshootd running to debug a problem in that login handler.  Maybe some upstart (etc.) ideas can be applied to user applications rather than just init scripts.  (Some init replacements work statically, doing a topological sort to determine startup order, whereas other init replacements, possibly including upstart, allow for processes to be started but block on some service coming up.)<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299974/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300059"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Cheating: Not just for Microsoft anymore</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 17:56 UTC (Tue)
                               by <b>arjan</b> (subscriber, #36785)
                              [<a href="/Articles/300059/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
As for services that aren't "up":<br>
* cups -- run from xinetd when being printed to. And no, my netbook isn't a printserver<br>
* NFS -- made part of actual first NFS mount<br>
* avahi -- sure, can be added.<br>
* Networking -- network manager is loaded and started. if there was a network driver for the eee901 it'd have a link in the time.<br>
* bluetooth -- the device doesn't have BT.. so no I don't want that service started<br>
<p>
(and note that our prototype has about half a second to a second to spare for services you want to add)<br>
<p>
As for "login" needing NFS: sure if you configure NFS root, then you'll pay the price for NFS. I don't consider it acceptable that anybody who DOESN'T use NFS root has to pay that price. Even on a generic distro; the distro installer KNOWS nfs root is being used.<br>
<p>
So I disagree with you that this isn't applicable to general distributions. General distributions will have to deal with more cases, but they have to, and can, deal with them smartly: only the people who use a feature should pay the price for it in terms of boot time. That doesn't make the distro less generic... and yes it means the distro needs to get several things right, but I consider that fair game.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300059/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300499"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Again: arjan, ....</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 25, 2008 17:40 UTC (Thu)
                               by <b>hummassa</b> (guest, #307)
                              [<a href="/Articles/300499/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
us want linky linky :-) so us can tune our eee701 to boot in 5 seconds too...<br>
:-)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300499/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor301615"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Cheating: Not just for Microsoft anymore</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 3, 2008 7:50 UTC (Fri)
                               by <b>dgm</b> (subscriber, #49227)
                              [<a href="/Articles/301615/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; only the people who use a feature should pay the price for it in terms of boot time</font><br>
<p>
In fact, this should be applicable to any other system resource: CPU, memory and disk usage. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/301615/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor299922"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Cheating: Not just for Microsoft anymore</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 8:08 UTC (Tue)
                               by <b>farnz</b> (subscriber, #17727)
                              [<a href="/Articles/299922/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <p>That's orthogonal to what Arjan and Auke are doing. You can 
combine "boot complete in 5 seconds" with "start the desktop before some 
services are running", to get an even faster boot to the point where you 
can work (at least in theory - if the critical path is now kernel startup 
followed by X startup, you're doomed). Plus, the "boot complete in 5 
seconds" misses some services I need - my mouse is a bluetooth device, for 
example, and I use WiFi, both of which have to start after those 5 seconds 
are up.
<p>Also, "boot complete, CPU and disk idle" is a nice objective criteria, 
that can be measured by tools designed for the job. "Booted to the point 
where I can work" is not, and invokes the temptation to punt something 
that's critical for most people's work until after login - for example, 
with hotplug input device support in X, you could configure a core 
keyboard, and punt hotplug devices until after X boots. The result is a 
machine that you can use from the keyboard, but not with a mouse or 
touchpad - as a keyboard user, that wouldn't stop me working, but it 
wouldn't be in the spirit of "boot in 5 seconds".
<p>Finally, which is actually better for you:
<ul>
<li>Everything done after 5 seconds, machine idle and just doing what you 
want it to.
<li>At desktop in 4 seconds, just about usable, but busy spending the next 
6 seconds loading daemons for useful things like mouse support, printing 
and the like.
</ul>
      
          <div class="CommentReplyButton">
            <form action="/Articles/299922/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor301700"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Cheating: Not just for Microsoft anymore</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 3, 2008 17:25 UTC (Fri)
                               by <b>Janne</b> (guest, #40891)
                              [<a href="/Articles/301700/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I really don't understand this argument. So the machine has not really booted, since network (for example) is not up yet? Well, why should it be? Because you want to use the network right after you get to the desktop? Well, think about it: You get to the desktop, but the network is not yet running. You then decide to launch Firefox. It takes you maybe 2-4 seconds to click the Firefox-icon, it takes anout 2-4 seconds for Firefox to launch, and then it takes you another 2-4 seconds to type in an URL in Firefox. That means that the system has 6-12 additional seconds to bring the network up before you actually NEED to have the network up&amp;running. Network might not be running right after you get to the desktop, but it does not need to be, since it would take you several seconds to actually DO something with the network in any case! Do you need to have networking up if you are not actually using the network for anything?<br>
<p>
People who complain about services that are not running right after boot, fail to understand the fact that it takes several seconds for the user to actually DO anything with the system in any case. And that means that the system has quite a bit of time to bring any missing service up before the user actually needs it. Whenever I log in to a machine, I do not launch apps in a split-second or start frantically working right away. No, it takes me quite a few seconds to get up to speed. And the system can use those seconds to load any needed services that are not yet up.<br>
<p>
Of course there are wrong ways to do this, like what MS does with XP, where the system is actually un-usable for longish time after you get to the desktop. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/301700/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor301711"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Cheating: Not just for Microsoft anymore</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 3, 2008 19:07 UTC (Fri)
                               by <b>farnz</b> (subscriber, #17727)
                              [<a href="/Articles/301711/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <p>You're missing a lot in your example timeline; let me rework it the way 
it would actually happen:
<ul>
<li>My wife is in the kitchen, and finds that she's got ingredients she'd 
like to use for supper, but she'd like to use them for something different 
to her normal cooking style.
<li>She goes into the living room, and fires up my laptop.
<li>She wait, knowing that as soon as it's running, she'll want to log in.
<li>System boots. She logs in.
<li>She waits, knowing that as soon as it's logged in, she'll want to run 
Firefox.
<li>She clicks on the Firefox icon on her desktop.
<li>She waits, knowing that Firefox will come up maximised. Her mouse is 
hovering over where the bookmark for the recipe site she usually uses 
(when on my laptop, not hers - she has a much more complex set up on her 
own machine) will be.
<li>Firefox starts enough that she can click on that bookmark. If the 
network is not running by this point, things are broken for her, as she 
can't go to the ingredient search and work out she can cook with the 
contents of our fridge.
<li>She finds a recipe she'd like to try, and prints it - she likes to 
make notes on paper of changes she makes to a recipe while cooking, so 
that she can remember them easily later.
</ul>
<p>Looking at that timeline, one important thing is clear - she has 
<b>already</b> decided to go to a particular bookmarked website 
<b>before</b> she touches the power button. All the time taken between her 
pushing the power button and the website displaying is wasted by the 
computer. Thus, the only time the OS has free to waste is the time taken 
by Firefox to start up after the OS has started.
<p>Secondly, note that Firefox's start up will be slowed down if the 
computer is also trying to bring up the network, start printing services 
and generally do other things at the same time. It's incredibly hard to 
accurately judge how much idle time you have around application start 
time.
<p>Finally, in my experience, services are <b>not</b> delayed after 
thinking about use cases. Instead, the delay is based on getting the bare 
minimum up and running to let me log in, with functionality taking a while 
to come up after that. Making the challenge "get to idle in 5 seconds" 
leaves room for someone to come in later, and build on that work to get 
a "get to usable in 4 seconds, idle in 6", or even a "get to usable in 
under a second, but idle takes 6 seconds".
      
          <div class="CommentReplyButton">
            <form action="/Articles/301711/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor301720"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Cheating: Not just for Microsoft anymore</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 3, 2008 19:37 UTC (Fri)
                               by <b>Janne</b> (guest, #40891)
                              [<a href="/Articles/301720/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
In your example your wife would have to wait for few second for the network to become functional. Im sorry, but I don't really see that as a big issue. Especially considering the huge benefits users would get in "normal" use-cases.<br>
<p>
You are describing a situation where the user is twitching to do something with the computer. Where the user even pre-positions the mouse in order to be able to do stuff as fast as possible. Those cases are very, very rare. Normal users do NOT work like that. Normally people don't start their computers thinking "OMG, I need to get online NOW!". And even if they did, the fact that the system boots in 5 seconds, means that they could get online a lot faster than with "normal" boot-sequence.<br>
<p>
That said, I don't really understand the complaing about networking. My OpenSUSE-laptop takes ages to boot. And after it finally get to the desktop, it STILL spends few seconds connecting to the network! It would be A LOT better if it booted in 5 seconds, and then spend few seconds connecting to the network.<br>
<p>
It makes sense to exclude networking from this experiment, since connecting to the network is not really part of what we call "booting". It's not up to your computer, it's basically being held back by the network. And hacking the boot-sequence of your computer does not touch your network in any shape or form. Network is completely outside the scope of this test. And just because you do not have working networking for few seconds does not mean that the computer is not usable. And still, the "normal" distros are just as slow as far as networking is concerned, so there are no drawbacks in this experiment, as far as networking is concerned.<br>
<p>
So how would your wife benefit if the recipe-machine was using Ubuntu (for example)? Instead of booting in 5 seconds, the machine would boot in 45 seconds. Even if you had fully working networking after that 45 seconds (you wouldn't), it would still take about 30 seconds longer to get online than with this fast booting.<br>
<p>
"Secondly, note that Firefox's start up will be slowed down if the computer is also trying to bring up the network"<br>
<p>
Starting FIrefox taxes the HD and the CPU. Neither of those are taxed when your NIC is getting an IP-address.<br>
<p>
"start printing services"<br>
<p>
That could be started when the user actually wants to print. Why should we sit around, twiddling our thumbs, when the system starts printing-subsystem, even though the times we print are few and far between?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/301720/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor301786"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Cheating: Not just for Microsoft anymore</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 4, 2008 11:11 UTC (Sat)
                               by <b>farnz</b> (subscriber, #17727)
                              [<a href="/Articles/301786/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <p>Then you're missing the entire point of the exercise - <b>why</b> does 
she have to wait 45 seconds for the OS to boot? Why should she be waiting 
up to a minute for things to be ready to use? Why can't she turn the 
computer on and use it immediately?In short, why is using a computer with 
a 1.83GHz Core 2 Duo and 4GB of RAM full of delays, when using an IPTV set 
top box with typically 100MHz CPU and 32MB RAM is not? Granted, the tasks 
are different, but the computer is so much more powerful than the STB that 
it's a fair question.
<p>The idea Arjan and Auke were working to is to set a hard challenge - a 
typical Linux distro takes 30 seconds to get to the same point, they chose 
5 seconds - and remove all the obstacles. If you allow delayed service 
startup to not count, the danger is that you'll discount services that 
matter to users. Indeed, you're <b>already</b> trying to handwave away an 
important service for some use cases as "takes too long, and anyway users 
can wait"; this is <b>exactly</b> why someone doing the challenge 
<b>must</b> set a defined state in which boot is finished. Given the 
defined state, I can now look at it, compare it to my use cases, and 
say "yes, that's good enough", or "no, I need to work out how to fit WiFi 
startup into that 5 seconds".
<p>Again, as I've 
said several times, you can go from "5 seconds power applied to idle and 
ready" to "3 seconds power applied to usable, 3 more seconds to idle", and 
that's a much easier task than going from "60 seconds power applied to 
idle" to "3 seconds power applied to usable, 120 more seconds to idle.
<p>Plus, my experience of normal users is very different to yours - they 
don't have computers waiting and switched on, they don't start the 
computer up without a task in mind, they start the computer thinking "Do I 
have any e-mail waiting?", "Can I look up a recipe to use lemon sole, 
potatoes and tomatoes?", "What do I need to say in this letter to my bank 
manager?", "I need to get that proof printed for marking up" and things of 
that nature. To them, a computer is just a tool; you wouldn't get out your 
woodworking kit without something to build in mind, so why start up a 
computer without a job in mind?
      
          <div class="CommentReplyButton">
            <form action="/Articles/301786/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor302124"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Cheating: Not just for Microsoft anymore</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 7, 2008 12:59 UTC (Tue)
                               by <b>Janne</b> (guest, #40891)
                              [<a href="/Articles/302124/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
"why does she have to wait 45 seconds for the OS to boot?"<br>
<p>
She doesn't. I mean, you can apparently boot Linux in 5 seconds ;).<br>
<p>
"In short, why is using a computer with a 1.83GHz Core 2 Duo and 4GB of RAM <br>
full of delays, when using an IPTV set top box with typically 100MHz CPU <br>
and 32MB RAM is not?"<br>
<p>
Well, that set-top box is designed to do one thing, and it's designed to do <br>
it on one hardware-configuration. So they can optimize it like crazy. Those <br>
do not apple to Linux.<br>
<p>
that said, my DVR takes about 5-10 seconds to boot. My DVD-player takes few <br>
seconds as well. My router takes about 10 seconds to become reachable.<br>
<p>
"If you allow delayed service startup to not count, the danger is that <br>
you'll discount services that matter to users."<br>
<p>
But the thing is that we already have slow as hell boots, even with delayed <br>
services. Like I said, my laptop running OpenSUSE takes ages to boot, and <br>
when I DO get to the desktop, it's STILL not connected to the network! So <br>
the difference between this fast booting and my OpenSUSE is that Arjans <br>
system takes 5 seconds to boot, after which it takes few more seconds to <br>
connect to the network, whereas my laptop takes 45-50 seconds to boot, <br>
after which it takes few more seconds for it to connect to the network.<br>
<p>
In other words: it takes just as long for the two systems to connect to the <br>
network. The difference is that the things that happen before that net-<br>
connection take 45-50 seconds on my laptop, whereas on Arjans EEE it only <br>
takes 5 seconds.<br>
<p>
And how would you connect to the WiFi befire getting to the desktop? I <br>
mean, you might need to enter passwords and the like? Should the computer <br>
stop booting and prompt you for your WPA-passowrd? No. It should get you to <br>
the desktop and in to an usable state, and prompt you for any needed WiFi-<br>
passwords as needed.<br>
<p>
"Indeed, you're already trying to handwave away an important service for <br>
some use cases as "takes too long, and anyway users can wait"; this is <br>
exactly why someone doing the challenge must set a defined state in which <br>
boot is finished. Given the defined state, I can now look at it, compare it <br>
to my use cases, and say "yes, that's good enough", or "no, I need to work <br>
out how to fit WiFi startup into that 5 seconds"."<br>
<p>
But Wifi is not part of what we usually think of when we talk about <br>
"booting". And like I said: I see no difference between this 5-seconds boot <br>
when compared to normal booting, if we think of Wifi alone. In either case, <br>
WiFi is disconnected at the end of the boot.<br>
<p>
"Plus, my experience of normal users is very different to yours - they <br>
don't have computers waiting and switched on, they don't start the computer <br>
up without a task in mind, they start the computer thinking "Do I have any <br>
e-mail waiting?""<br>
<p>
Sure. But let's compare two scenarios:<br>
<p>
Normal distro:<br>
<p>
User turns the computer on. It boots for about 45 seconds, and the user <br>
logs in. After he gets to the desktop, he needs to wait for few seconds for <br>
the network to become usable. Then he can check his mail<br>
<p>
Arjans EEE:<br>
<p>
User turns on the computer. It boots in five seconds. User needs to wait <br>
for few more seconds for network to become usable. Then he can check his <br>
email.<br>
<p>
How is that normal distro handling networking better than the EEE is? It's <br>
not online either, at the end of the boot.<br>
<p>
removing WiFi from the equation we can focus on the subject at hand: <br>
booting. WiFi relaies on other things that are totally outside the scope of <br>
this project. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/302124/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor299766"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Cheating: Not just for Microsoft anymore</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 19:28 UTC (Mon)
                               by <b>madscientist</b> (subscriber, #16861)
                              [<a href="/Articles/299766/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It's true that Ubuntu does do this, but when the Ubuntu folks test boot times they enable auto-login and test the time to boot all the way to a stable, logged-in state.<br>
<p>
I have no problem with putting up the login screen as early as possible, since why should I wait until a bunch of background stuff is ready before I can enter my username/password (obviously, if you can't log in yet due to home directories not being present or whatever, then if the system lets me log in to a "broken" state that's a bug)?<br>
<p>
But, when testing boot times the number used should be the one Ubuntu folks are using: the time to get from power-on to a fully-settled, functional desktop... NOT to get to the login prompt.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299766/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300799"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Cheating: Not just for Microsoft anymore</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 27, 2008 15:22 UTC (Sat)
                               by <b>keybuk</b> (guest, #18473)
                              [<a href="/Articles/300799/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Actually, it isn't true.<br>
<p>
If you look at the Ubuntu boot sequence, while gdm isn't the last thing <br>
that we start, it's not far off.  Very few things are started after gdm, <br>
and this is mostly because X takes quite a while to start so we have some <br>
"free time" here.<br>
<p>
We deliberately don't keep starting services throughout login, because as <br>
you note, I do all my timings until full desktop login which is when the <br>
computer is actually usable - not just to when the gdm screen is up.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300799/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor302230"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Log-in screen</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 7, 2008 22:41 UTC (Tue)
                               by <b>pgan</b> (guest, #54573)
                              [<a href="/Articles/302230/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The log-in screen should be shown as early as possible (before even X) and should not block the boot process.  Thus the computer would be usable earlier, because the boot process would continue while the user is typing her password.  This is especially important for users who are slow to authenticate -- some users take about 4 seconds.  With a normal boot, they would wait n seconds to see the log-in screen, spend m extra seconds logging in, then wait d seconds till they can use the desktop.  If they can authenticate after x second while the computer is booting, they only wait max(n - x, m) + d seconds to use the computer.<br>
<p>
With a long boot, this also allows users to authenticate themselves whenever is convenient for them, rather than waiting to do it at the right time for the machine.<br>
<p>
And, knowing which user is logging in will allow further parallelization of loading the user's desktop components and services.  That will reduce the time "d" required to start up the desktop.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/302230/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor299706"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 17:29 UTC (Mon)
                               by <b>salimma</b> (subscriber, #34460)
                              [<a href="/Articles/299706/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Cool beans. Between this and the Ubuntu netbook launcher, which does not have a stable release yet (must be why Dell's netbook is still not shipping if ordered with Linux), we're in for some interesting times on the desktop.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299706/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor299734"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 18:27 UTC (Mon)
                               by <b>flewellyn</b> (subscriber, #5047)
                              [<a href="/Articles/299734/">Link</a>] (36 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I don't mean to be a wet blanket, but what benefit does fast booting give us, if we don't boot all that often?  If we use suspend to disk, or just keep our machines running, what benefit would we derive from this work?  Will it help to improve performance in other ways?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299734/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299764"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 19:20 UTC (Mon)
                               by <b>jzbiciak</b> (guest, #5246)
                              [<a href="/Articles/299764/">Link</a>] (17 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
In my mind, suspend is something of a hack to get around awful boot times, and it's still flaky for some users.  It also doesn't help you at all when you have to install OS updates that require a reboot.<br>
<p>
Sure, suspend has other benefits--you can keep all your applications open where you left off--but starting from a clean system often provides a better user experience, unfortunately.  (Fortunately, some of the bigger culprits here, such as Firefox, have fixed their memory leaks.  The Firefox-2-GMail leak really sucked.)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299764/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299767"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 19:25 UTC (Mon)
                               by <b>flewellyn</b> (subscriber, #5047)
                              [<a href="/Articles/299767/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I suppose so.  Even so, I'm wondering "what about regular runtime performance?  Any benefit there?"<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299767/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299782"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 19:55 UTC (Mon)
                               by <b>Yorick</b> (guest, #19241)
                              [<a href="/Articles/299782/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Any serious effort to bring down boot times will inevitably scrutinise each and every daemon and service started and likely do away with a few less essential ones. As a side-effect, that may very well make a system use less resources and be more stable and secure once the system has been brought up.<br>
<p>
I also believe that faster boots give us happier and more productive kernel hackers, because they reboot more often than anyone else. That alone makes it worth the trouble.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299782/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299920"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 7:40 UTC (Tue)
                               by <b>mjthayer</b> (guest, #39183)
                              [<a href="/Articles/299920/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Any serious effort to bring down boot times will inevitably scrutinise</font><br>
<font class="QuotedText">&gt; each and every daemon and service started and likely do away with a few </font><br>
<font class="QuotedText">&gt; less essential ones.</font><br>
<p>
Or profile how much users of a system use a particular service and start it by default if they use it a lot, or on demand if they use it occasionally.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299920/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor299783"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 19:58 UTC (Mon)
                               by <b>jzbiciak</b> (guest, #5246)
                              [<a href="/Articles/299783/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Probably not, as it stands.<br>
<p>
I suppose a complex application that takes a long time to start in its own right (OpenOffice, I'm looking at you) might take some hints from the methodology and try to parallelize and optimize its startup tasks.  I'm not sure how far you get with a userspace app like that though.<br>
<p>
I suppose if you have an embedded device that actually gets powered off and on semi-regularly (media player, cell phone), this work directly impacts the user experience.  Those devices could actually boot from scratch rather than dumping state to flash for suspend when they power off.  That extends flash lifetime, and it makes startup and shutdown quicker.<br>
<p>
My current cellphone takes a good 15 seconds to boot.  Booting in 5 would be a noticeable improvement.  Granted, I only shut it off when I'm flying somewhere or when the battery gets obnoxiously low, but still, it could make you a favorite with the jet setters.  Seeing as there's already interesting Linux distributions running on OpenMoko, I'm sure there's plenty of opportunity for cross-pollination.  (Check out this one:   <a href="http://mobile.slashdot.org/article.pl?sid=08/09/21/1730256">http://mobile.slashdot.org/article.pl?sid=08/09/21/1730256</a> )<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299783/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299797"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 20:10 UTC (Mon)
                               by <b>flewellyn</b> (subscriber, #5047)
                              [<a href="/Articles/299797/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Of course, I didn't even think of the impact for an embedded environment.  You're right, there's a lot of value there for devices that need to turn on and off regularly.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299797/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299898"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 3:26 UTC (Tue)
                               by <b>mrshiny</b> (subscriber, #4266)
                              [<a href="/Articles/299898/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Also, suspending is not the same as booting when it comes to your <br>
applications.  I can suspend my notebook by closing its lid, and when I <br>
come back every single program is exactly where I left it (except for <br>
those that depend on network sockets).  This is way better than shutting <br>
down and rebooting; even apps that support session management don't do <br>
that well compared to a nice suspend/resume.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299898/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor299871"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 0:09 UTC (Tue)
                               by <b>rlk</b> (guest, #47505)
                              [<a href="/Articles/299871/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I use suspend as much (or more) because I want to keep everything open with the running state than because of the reboot time.  For example, I often have a lot of emacs buffers and xterm windows, and I want that state preserved for as long as possible.  I've been known to keep login sessions going for months on end.<br>
<p>
With Session Manager, the Firefox annoyances aren't that big of a deal; it's the other stuff I want kept around.<br>
<p>
Suspend/resume does not eliminate the need for faster boot time, or vice versa.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299871/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor299908"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">suspend vs. reboot</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 6:31 UTC (Tue)
                               by <b>Cato</b> (guest, #7643)
                              [<a href="/Articles/299908/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I greatly prefer being able to suspend/resume - you have all the state of your applications, down to cursor position in documents, history and scrollback in shells, etc.  While Linux's session management is very nice it can't replicate all this, so faster boot doesn't help as much as getting suspend working - I usually don't bother trying to make it work as it's quite a hassle compared to hibernate.<br>
<p>
I don't find memory leaks an issue these days - Firefox still crashes enough (due to plugins mostly) that it clears out any leaks in any case.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299908/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor299939"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 13:29 UTC (Tue)
                               by <b>lbt</b> (subscriber, #29672)
                              [<a href="/Articles/299939/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; In my mind, suspend is something of a hack to get around awful boot times,</font><br>
<font class="QuotedText">&gt; and it's still flaky for some users. It also doesn't help you at all when</font><br>
<font class="QuotedText">&gt; you have to install OS updates that require a reboot.</font><br>
<p>
OK - that's your use...<br>
<p>
*I* have 6 virtual desktops, eg:<br>
1 with email, a browser window with 15-20 ever changing tabs,<br>
a dev desktop or 2 in various states of compile/dev for multiple projects<br>
an 'office' desktop with maybe OO Writer or Calc or QCAD or...<br>
an admin desktop with windows to various boxen<br>
<p>
I have a continually logged on experience interrupted by phone calls, sleep, food, social life, holidays etc  - but it's nice to save power at night or when I go for food or go out so I want to hibernate (and I do - I only login/reboot when I choose to upgrade the kernel)<br>
<p>
For those who argue that each app should do 'restore state' - why? Debian has what, 22,000 packages many of which would need to be able to restore state. Or we could use hibernate and get them all for free... Hmmm hard choice...<br>
<p>
As for "install OS updates that require a reboot." - are you on Linux? This just doesn't happen with any meaningful frequency.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299939/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300008"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 16:48 UTC (Tue)
                               by <b>bronson</b> (subscriber, #4806)
                              [<a href="/Articles/300008/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Are you talking about suspend or hibernate?  Resuming from suspsend takes about 9 seconds on my Thinkpad T42p, while resuming from hibernate takes 1.5 mins.  This is unfortunate because cold boot takes less than a minute...  I tend to suspend/resume a lot and never ever hibernate.<br>
<p>
When Linux supports process suspend/resume, hopefully resuming from hibernate becomes:<br>
- boot in 5 secs<br>
- restore your suspended apps<br>
<p>
I can't wait for containerization to hit.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300008/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300069"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 18:55 UTC (Tue)
                               by <b>jwb</b> (guest, #15467)
                              [<a href="/Articles/300069/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Why does your resume from suspend take so long?  On my ThinkPad it takes less than one second.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300069/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300088"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 20:18 UTC (Tue)
                               by <b>bronson</b> (subscriber, #4806)
                              [<a href="/Articles/300088/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
No idea...  The CD-ROM drive spins up (no disk in it though), there's some beeping from the speaker, after 3 seconds the backlight turns on, after 5 it switches to a real video mode, and it spends the last second or so drawing the password dialog.<br>
<p>
I don't mind too much, 8 seconds is tolerable.  At least it never crashes!<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300088/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor300328"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 25, 2008 1:56 UTC (Thu)
                               by <b>deleteme</b> (guest, #49633)
                              [<a href="/Articles/300328/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
That's awfully fast, it's more like 1.5 - 3.5 seconds here. The disks starts to spin the screenblinks and take a while to become something usefull-<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300328/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300338"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 25, 2008 2:49 UTC (Thu)
                               by <b>jwb</b> (guest, #15467)
                              [<a href="/Articles/300338/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Well maybe you're right, because I just took a video of my computer waking from sleep and it takes 6 seconds.  However, the time between when the backlight comes on and when the unlock dialog appears is a split second.  I guess I was mentally attributing the remainder of the time to the hardware/BIOS.<br>
<p>
Which brings us back around to the article.  The five seconds of booting does not include the time between power-on and when GRUB hands off to Linux.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300338/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor300600"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 26, 2008 2:12 UTC (Fri)
                               by <b>njs</b> (guest, #40338)
                              [<a href="/Articles/300600/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I thought restore from hibernate spent most of its time reading the (potentially multi-gigabyte) memory image from disk.  Booting doesn't need to load 500 megabytes of firefox into memory, etc.; is there some reason to think that restoring your individual apps would be faster than restoring the hibernate memory image?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300600/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300703"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 26, 2008 17:09 UTC (Fri)
                               by <b>bronson</b> (subscriber, #4806)
                              [<a href="/Articles/300703/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Because -- in theory -- you wouldn't have to restore every application, (don't worry about freezing the memory used by all those useless panel apps).  And the apps themselves could be smarter (Firefox wouldn't try to persist its in-memory caches).  Crash-only apps could just be terminated and re-launched (IM clients, mail clients, etc), no need to write them all out.<br>
<p>
I admit, it's all speculation at this point.  :)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300703/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor300017"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 17:04 UTC (Tue)
                               by <b>jzbiciak</b> (guest, #5246)
                              [<a href="/Articles/300017/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Ubuntu seems to push kernel updates that want a reboot every few weeks.  That said, I usually push it to a couple months before I do reboot.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300017/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor299765"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 20:17 UTC (Mon)
                               by <b>ebirdie</b> (guest, #512)
                              [<a href="/Articles/299765/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Together with kernel checkpointing/restart feature, what LWN.net covered in an article a while ago, this could be another possibility to extend battery life ie. when lid closes, checkpoint processes with open file descriptors and below X and shutdown, and then up again in 5 seconds.<br>
<p>
At least the fast booting seems to be a simpler way to achieve practically the same goal as the suspend/resume operation has. But the process checkpointing/restarting feature is yet taking its baby steps, so it is practically non-existent. Too bad. I'm haven't found myself comfortable with session features of KDE or Gnome and thus I'm totally relying to suspend/resume to get my desktop back to state, when I left the desktop. And I reboot as seldom as possible - I actually hate system updates requiring reboot or losing the desktop state.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299765/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor299830"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 21:16 UTC (Mon)
                               by <b>anselm</b> (subscriber, #2796)
                              [<a href="/Articles/299830/">Link</a>] (9 responses)
      </p>
      
      </div>
      </summary>
      <p>Why would I want to do suspend-to-disk if I can have a clean boot
in five seconds? Waking my machine from the suspend takes <em>way</em> 
longer than that.</p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/299830/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299865"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 23:20 UTC (Mon)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/299865/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Your applications might have nonpersistent state you want to preserve.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299865/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299870"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 23:49 UTC (Mon)
                               by <b>anselm</b> (subscriber, #2796)
                              [<a href="/Articles/299870/">Link</a>] (7 responses)
      </p>
      
      </div>
      </summary>
      <p>That's what I used to think, too. Nowadays most of my applications
do a reasonable job of coming up again where I left them before a 
shutdown, so it's not a big deal.</p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/299870/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299874"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 0:26 UTC (Tue)
                               by <b>rlk</b> (guest, #47505)
                              [<a href="/Articles/299874/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Emacs doesn't; shell buffers and xterms certainly don't have all their state preserved (possibly megabytes of output, and yes, I do care about that).  Much less any background processes I happen to have left running actively (Gutenprint tests, for example).<br>
<p>
As I said previously, fast reboot and suspend/resume solve different problems and shouldn't be considered alternatives for each other.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299874/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299880"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">That could be fixed</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 1:12 UTC (Tue)
                               by <b>JoeBuck</b> (subscriber, #2330)
                              [<a href="/Articles/299880/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      It would be possible to make Emacs session-aware.

      
          <div class="CommentReplyButton">
            <form action="/Articles/299880/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299916"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">That could be fixed</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 7:29 UTC (Tue)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/299916/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
You'd need to modify a good bit of Lisp (at least you'd need to think of <br>
something to do with process sentinels).<br>
<p>
Hm, perhaps a shutdown/restart could appear to the Lisp code like all the <br>
process sentinels signalling a process death/network disconnection, <br>
something they have to deal with anyway... obviously you'd also want a <br>
session-save-hook and session-restore-hook, so that things that *want* to <br>
be aware of shutdown/restart can be. (And let's implement it with proper <br>
serialization/deserialization of the in-core Lisp state, not with <br>
unexec()! :) )<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299916/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299983"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">That could be fixed</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 15:00 UTC (Tue)
                               by <b>shapr</b> (subscriber, #9077)
                              [<a href="/Articles/299983/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
What about emacs desktop? I've been using that for years.<br>
Right now emacs does not save the state of all the open buffers etc until I explicitly exit, but if it saved every minute or so even crashes would have most session state saved.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299983/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299985"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">That could be fixed</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 15:14 UTC (Tue)
                               by <b>rlk</b> (guest, #47505)
                              [<a href="/Articles/299985/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The issue isn't just open file buffers:<br>
<p>
* Shell buffers (input and output history -- including input and output history of the shell, which isn't quite the same thing as the emacs idea of that)<br>
<p>
* Command output buffers and other temporary buffers, including *scratch*<br>
<p>
* Files that you're looking at that may get changed behind your back that you deliberately haven't reverted yet.<br>
<p>
* The state of the lisp world<br>
<p>
Obviously, emacs loses all of this if it crashes, but this in the context of choosing to reboot vs. suspend/resume.  I'll take my chances on crashes, and I do save my work, but it's still more efficient to keep a session going as long as possible.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299985/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor299921"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 7:54 UTC (Tue)
                               by <b>mjthayer</b> (guest, #39183)
                              [<a href="/Articles/299921/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Nowadays most of my applications do a reasonable job of coming up again </font><br>
<font class="QuotedText">&gt; where I left them before a shutdown, so it's not a big deal.</font><br>
<p>
But they can take an awful long time to do so.  Don't know if suspend/resume is faster, because I have never trusted it enough to find out.  Perhaps a middle way would be best of all - suspending and resuming individual applications, perhaps even with the application's cooperation.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299921/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299923"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 8:23 UTC (Tue)
                               by <b>mjthayer</b> (guest, #39183)
                              [<a href="/Articles/299923/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Ahem, actually exactly what ebirdie said in a comment further up.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299923/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor300013"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 16:56 UTC (Tue)
                               by <b>s0f4r</b> (guest, #52284)
                              [<a href="/Articles/300013/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<p>
Please follow this calculation:<br>
<p>
Writing on cheap SSD's maxes out at maybe 10MB/sec max., reads at 30MB/sec max sustained. Suppose that you have a laptop with 512mb memory. It will take 51 seconds to suspend to disk. It will take 17 seconds to resume from disk.<br>
<p>
suspend to disk is just not the answer :)<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300013/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300018"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 17:05 UTC (Tue)
                               by <b>flewellyn</b> (subscriber, #5047)
                              [<a href="/Articles/300018/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I wouldn't trust an SSD, especially not a cheap one, as a root disk.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300018/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300099"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Flash life</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 21:27 UTC (Tue)
                               by <b>man_ls</b> (guest, #15091)
                              [<a href="/Articles/300099/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      Because of <a href="http://wiki.eeeuser.com/ssd_write_limit">the limited number of rewrites</a>? With 100,000 rewrites and if you suspend 10 times an hour, 8 hours a day your Eee will last 3.5 years. Add some wear levelling, 200,000 rewrites or a half-full memory and you can stop worrying.
      
          <div class="CommentReplyButton">
            <form action="/Articles/300099/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300129"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Flash life</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 24, 2008 0:41 UTC (Wed)
                               by <b>flewellyn</b> (subscriber, #5047)
                              [<a href="/Articles/300129/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Yeah, I'd heard that before, but Val Henson wrote a &lt;a href="<a href="http://valhenson.livejournal.com/25228.html">http://valhenson.livejournal.com/25228.html</a>"&gt;blog entry&lt;/a&gt; which made a strong counterargument.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300129/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300144"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Flash life</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 24, 2008 6:49 UTC (Wed)
                               by <b>man_ls</b> (guest, #15091)
                              [<a href="/Articles/300144/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Thanks for the link. It is not so convincing though: even without any wear levelling there is a big safety margin.<p>
But if flash memory life really worries you, you can buy an 8GB SD memory card for $20, stick it into your Eee and place the most frequently written-to filesystems (/var, swap) on it. If it ever goes wrong you just replace it (and maybe get a new one for free if inside the 5-year warranty).
<p>
I have a similar setup and it works fine. Just be sure to buy a fast SD card or suspend will take  a long time.
      
          <div class="CommentReplyButton">
            <form action="/Articles/300144/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor300332"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Flash life</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 25, 2008 1:59 UTC (Thu)
                               by <b>deleteme</b> (guest, #49633)
                              [<a href="/Articles/300332/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I've been running on Compact Flash since 2005 works fine.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300332/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor300361"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 25, 2008 7:27 UTC (Thu)
                               by <b>NCunningham</b> (guest, #6457)
                              [<a href="/Articles/300361/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
You're not accounting for compression. Yes, swsusp doesn't do compression, but the other implementations do. You generally get about 50% compression, so half the times for reading and writing.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300361/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor299762"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 19:14 UTC (Mon)
                               by <b>mezcalero</b> (subscriber, #45103)
                              [<a href="/Articles/299762/">Link</a>] (16 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
One should note that the Fedora system they showed wasn't actually a complete Fedora system. As mentioned, they removed sendmail. But it doesn't stop there. It didn't have Avahi, or CUPS, or Bluetooth and so on, which makes up a complete Fedora system. I'd have liked to see them actually booting a full system in under 5s.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299762/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299873"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 0:19 UTC (Tue)
                               by <b>rlk</b> (guest, #47505)
                              [<a href="/Articles/299873/">Link</a>] (15 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Different people need different things for a "full system".  I don't need Bluetooth at all and Avahi isn't really terribly valuable to me, either (I'm in a pure UNIX/Linux environment where I don't need to worry about file sharing, and otherwise I have a fairly static environment most of the time).  I do need CUPS but it's fine if it takes 10-30 seconds more to start; I'm not likely to print as the very first thing I do after boot.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299873/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299890"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 2:01 UTC (Tue)
                               by <b>arjan</b> (subscriber, #36785)
                              [<a href="/Articles/299890/">Link</a>] (14 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
We have cups starting from xinetd... on demand<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299890/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299915"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 7:20 UTC (Tue)
                               by <b>rvfh</b> (guest, #31018)
                              [<a href="/Articles/299915/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Could you tell us why Sys V init was prefered to upstart? Shouldn't upstart replace xinetd _and_ init _and_ provide faster boot through parallelisation?<br>
<p>
Do you think it's possible to boot in 5 seconds with upstart 0.5 or a later version? Or is upstart (partly) going the wrong way?<br>
<p>
Please enlighten us, or point us to a blog with your problems/decisions listed :-)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299915/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299927"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 8:46 UTC (Tue)
                               by <b>arjan</b> (subscriber, #36785)
                              [<a href="/Articles/299927/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
First of all, a misconception: Upstart isn't about parallel boot. (This is from discussing a lot with the Upstart author at LPC)<br>
<p>
Second: Parallel boot is the wrong technology. It's a good answer to the "I want to boot faster" question, but it's absolutely the wrong answer to the "I want to boot fast" question. Eg it's something that gets you from 45 seconds to 43 seconds.... but not to 5. (note that Fedora 9 already uses Upstart.. and still boots in 45 seconds).<br>
<p>
Parallel boot is the wrong thing; it ends up meaning that you're not really doing the critical path in sequential order; but let the system get distracted from that.<br>
<p>
Asynchronous boot (where you let the critical path go sequential, and non-critical pieces asynchronous) is the right answer; the article has a graph about this. And Asynchronous boot you can do just fine with SysVinit.... no magic about that.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299927/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299933"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 9:57 UTC (Tue)
                               by <b>rvfh</b> (guest, #31018)
                              [<a href="/Articles/299933/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Thanks a lot!<br>
<p>
I can't resist the desire to ask another question: I assume what you were told was that upstart was about event-driven starting/stopping of services, not parallelisation. Does it still make it possible to implement this 5-seconds boot with upstart? Or does upstart get, somehow, in the way?<br>
<p>
Thanks for the _very_ useful job you did: some of us still need to boot their machine sometimes ;-)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299933/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300015"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 17:00 UTC (Tue)
                               by <b>s0f4r</b> (guest, #52284)
                              [<a href="/Articles/300015/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It's definately possible to approach the same boot speed with upstart. However, the overhead of reading all the upstart configuration files and doing all the parsing of those is still a bit higher than using plain sysvinit, hence we chose to use that.<br>
<p>
This is not a weird choice: several netbook vendors currently do exactly the same thing for bootup. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300015/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor300359"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 25, 2008 7:17 UTC (Thu)
                               by <b>aleXXX</b> (subscriber, #2742)
                              [<a href="/Articles/300359/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Now with all the multicore processors, parallelizing boot should indeed <br>
bring a speedup, shouldn't it ?<br>
<p>
Alex<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300359/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300367"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 25, 2008 7:55 UTC (Thu)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/300367/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
only if the bottleneck was CPU cycles.<br>
<p>
and most of the time it's not. <br>
<p>
you have serialization on a lot of things<br>
<p>
disk I/O (reading files, searching for the 50 places a config file could be before you find the one where it is, etc)<br>
<p>
bus access (you can't query a PCI bus for multiple things at the same time)<br>
<p>
timeouts (waiting after sending a command to see if something responds).<br>
<p>
timeouts frequently combine with bus access as it may not be safe to do something else until you get a response from the device you just probed for (or decide that it's not really there)<br>
<p>
and sometimes you do really have number crunching CPU tasks to do.<br>
<p>
multi-core systems make a big difference if you really do have CPU as the limiting factor, but that's usually not the case (and IMHO software that has to do a lot of cpu work to just start up is probably in need of being fixed)<br>
<p>
yes, when you get down into the low single-digit bootup range on a relativly slow COU (like the eepc from the talk), you do have to pay attention to the CPU load, but if you have similar systems otherwise, a fast cpu doesn't make that big a difference on a normal distro bootup<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300367/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor300430"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 25, 2008 14:39 UTC (Thu)
                               by <b>arjan</b> (subscriber, #36785)
                              [<a href="/Articles/300430/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
With multi-core or hyperthreading it is worth doing some things asynchronous.<br>
But it's a subtle but important difference between doing things in parallel and doing some selected things asynchronous.<br>
<p>
The key thing is to do the "critical path" of the boot sequential and as tightly packed as possible, while doing non-critical (to the boot) things asynchronous.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300430/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor300089"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 20:19 UTC (Tue)
                               by <b>mezcalero</b> (subscriber, #45103)
                              [<a href="/Articles/300089/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
That doesn't really work. CUPS without the browsing is not really useful. And for the browsing you need to run it continuously all the time. Much like Avahi.<br>
<p>
It's nice to be able to boot in 5s, but this is far from a standard Fedora system. Be honest!<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300089/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300090"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 20:27 UTC (Tue)
                               by <b>rlk</b> (guest, #47505)
                              [<a href="/Articles/300090/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
As I said before, not everyone needs browsing -- a lot of people are in more or less static environments where the topology never changes.  There's no reason why those people should be burdened by the overhead of network browsing.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300090/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300101"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 21:30 UTC (Tue)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/300101/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Exactly. I have one printer, and it's connected to one machine. Why do I <br>
need browsing?<br>
<p>
(How many people not using laptops have multiple printers anyway? Is it <br>
really common outside offices?)<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300101/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor300107"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 22:02 UTC (Tue)
                               by <b>foom</b> (subscriber, #14868)
                              [<a href="/Articles/300107/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Actually, modern Cups actually uses dns-sd for printer discovery instead of special broadcast 
messages, so it no longer needs to be continuously running to receive the broadcasts: avahi will 
handily take care of that part. Yay consolidation.

      
          <div class="CommentReplyButton">
            <form action="/Articles/300107/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor300473"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 25, 2008 15:39 UTC (Thu)
                               by <b>msmeissn</b> (subscriber, #13641)
                              [<a href="/Articles/300473/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
CUPS does printer autodiscovery (zeroconf style, but on other ports), so <br>
some people want it running to find printers. :/<br>
<p>
And it manages local queues occasionaly, which was one reason I heard to <br>
have it run all the time. (Not sure if this applies.)<br>
<p>
Ciao, Marcus<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300473/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor300800"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 27, 2008 15:27 UTC (Sat)
                               by <b>keybuk</b> (guest, #18473)
                              [<a href="/Articles/300800/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Although according to your boot chart, you're not starting xinetd either ;)<br>
<p>
Starting CUPS on demand isn't quite ideal sadly, if the user is using <br>
network printers, then CUPS needs to have already been running for about <br>
30s before they try and print otherwise the network printer won't be shown.<br>
<p>
Sadly we can't "start CUPS 30s before the user needs it" ;)<br>
<p>
Though I entirely agree in principle that CUPS is not part of the critical <br>
path of the boot sequence, if the system is idle at some point, it's worth <br>
starting -- even if that means the disk isn't entirely inactive after boot.<br>
<p>
The most ideal way to deal with these kinds of services is to start them <br>
after boot, when the system is idle - with low CPU and I/O scheduler <br>
priority so that user activity takes precedence - or activate them on <br>
demand by xinetd or D-Bus when the user actually needs them.<br>
<p>
That way, if the user clicks print and cups wasn't running yet, it gets <br>
brought up -- or if the user leaves their PC alone for a bit, we start cups <br>
for the next time they click print.<br>
<p>
Of course, even better would be if we could do network printer discovery <br>
via other means like Avahi -- but then Avahi falls into the exact same <br>
"start on idle or first demand, whichever is sooner" category<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300800/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor301431"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 2, 2008 8:36 UTC (Thu)
                               by <b>renox</b> (guest, #23785)
                              [<a href="/Articles/301431/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Agreed, I understand the desire to do 'booting in 5s' without cheating, but CUPS is probably one exception here where cheating is okay:<br>
1) it's unlikely to take much CPU or IO load (if it does then it's a bug) so starting it in the background won't be felt as a slowdown for the user.<br>
<p>
2) users are unlikely to print just after starting the computer so launching the desktop before CUPS is okay.<br>
<p>
3) the critical part for the user here is the 'time to print' if having to find a network printer really slow downs printing then it make sense to have CUPS running all the time, not on demand.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/301431/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor299779"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 19:43 UTC (Mon)
                               by <b>SimonKagstrom</b> (guest, #49801)
                              [<a href="/Articles/299779/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Before someone else says it: Excellent article Don, very well written!<br>
<p>
// Simon<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299779/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor299781"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 19:56 UTC (Mon)
                               by <b>arekkusu</b> (subscriber, #54092)
                              [<a href="/Articles/299781/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Interesting Article! And impressive performance !<br>
I am not up to the technical detail but basically it look like there are quiet a lot of optimisation to do. <br>
I hope a lot can be done to do generalize optimisation and not just for customized for some system.<br>
Definitely "sendmail"(...) should be be loaded by default. <br>
<p>
I was wandering how much the SSD helped on the Eeepc. SSD should be good on boot because of the very fast access time. However the SSD on the EEPC is rather on the cheap side, not that fast compare to the high-end (100MB/s range).<br>
If we can get those time with a cheap SSD and a pretty slow processor I can't imagine with a better SSD. And there's little doubt SSD will get more affordable and faster with time. :)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299781/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299818"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 20:32 UTC (Mon)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/299818/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Well, some disk interfaces would have ruined any chance of booting in 5s. <br>
SCSI takes so long to start that you can start it asynchronously, but even <br>
then it can't give you userspace (even the initramfs) until SCSI's up. (I <br>
think it takes 10s on my machine with four disks in a rather old <br>
sym53x875: maybe newer controllers are faster?)<br>
<p>
More blockdev-related slowdowns that spring to mind: back in the early <br>
2.6.20 days, the MD raid5 and raid6 code was merged. As a result the <br>
system has to do boot-time benchmarking to find the fastest RAID-6 parity <br>
mechanism even if you're only using RAID-5. It seems to me that md could <br>
just start out using any old works-anywhere method, then benchmark and <br>
switch in the background. (It has to be able to switch at runtime anyway, <br>
or it couldn't choose among alternatives at startup like that.)<br>
<p>
Using LVM, if you're vgscanning it is of course going to be slower than <br>
not vgscanning: that could be sped up by simply not scanning unless you <br>
know that the hardware has changed, and you could probably determine if <br>
the set of available block devices has changed by digging in sysfs. (Alas <br>
it won't tell you if some complete bastard has pulled the VG, modified it, <br>
and put it back, but in that case the LVM cache files should *still* have <br>
been appropriately updated, so this looks safe to me, at least as long as <br>
the cache files exist. However if I'm wrong we're looking at big disk <br>
corruption...)<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299818/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor299868"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 23:25 UTC (Mon)
                               by <b>jwb</b> (guest, #15467)
                              [<a href="/Articles/299868/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I wondered the same thing.  I put a Samsung SLC SSD in my ThinkPad and the cost of reading a random page is hardly any slower than the cost of reading sequential pages, so the benefit of the linear readahead is small.  But it's still a lot slower than RAM, so if you can page it in ahead of time while the CPU is busy, you can still benefit.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299868/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor299941"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 10:56 UTC (Tue)
                               by <b>spaetz</b> (guest, #32870)
                              [<a href="/Articles/299941/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;Definitely "sendmail"(...) should be be loaded by default.</font><br>
<p>
<p>
Why is that? Some people might want it, but many won't. I know, I don't need it.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299941/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299958"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">fetchmail feature</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 13:29 UTC (Tue)
                               by <b>dmarti</b> (subscriber, #11625)
                              [<a href="/Articles/299958/">Link</a>] 
      </p>
      
      </div>
      </summary>
      The <a href="http://fetchmail.berlios.de/">Fetchmail</a> POP client used to deliver to the system SMTP daemon by default, so you needed sendmail running before you could check your mail.  Now the preferred alternative seems to be either a desktop all-in-one mail program, or <a href="http://software.complete.org/software/projects/show/offlineimap">OfflineIMAP</a>.
      
          <div class="CommentReplyButton">
            <form action="/Articles/299958/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor300016"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 17:03 UTC (Tue)
                               by <b>s0f4r</b> (guest, #52284)
                              [<a href="/Articles/300016/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<p>
Don't make 99% of all the users pay for something only you use. Sendmail does really not belong on netbooks and for those who really want to have it there: you can still start it manually. No netbook vendor should ship sendmail enabled by default.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300016/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300149"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 24, 2008 7:26 UTC (Wed)
                               by <b>ttonino</b> (guest, #4073)
                              [<a href="/Articles/300149/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
No server vendor should enable Sendmail as daemon by default either. Accepting mail on port 25 is uncommon. Sending out mail isn't, but it is done on demand with Sendmail from the command line. What cannot be sent can be pushed out with a cron job that does a sendmail -q every now and then.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300149/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor299817"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 20:26 UTC (Mon)
                               by <b>alspnost</b> (guest, #2763)
                              [<a href="/Articles/299817/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      Great work - and seeing the fruits of this in normal distributions cannot come a moment too soon. It's laughable that my 64-bit dual-core beast of a machine still takes longer to boot our favourite efficient, modular OS than my 166MHz Pentium took to boot Windoze in 1996.

<p>Let's declare war on bloat and get the majority out-of-the-box Linux desktops booting in <5 seconds! No-one cares if servers take a few minutes to boot, but this article highlights some of the silliness occurring with humble netbooks. Mind you, I did wonder about buying another cheap netbook and using it as a lightweight home server :-)
      
          <div class="CommentReplyButton">
            <form action="/Articles/299817/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299912"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 6:56 UTC (Tue)
                               by <b>man_ls</b> (guest, #15091)
                              [<a href="/Articles/299912/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      Well, not all that "bloat" is bad. udev, for example, is a great invention; we probably don't want to create static /dev's for every laptop out there (I know I don't). And I don't really care if it's 5 or 15 seconds, so there is a lot of margin for adding such things back. But trimming the boot fat is still excellent news. Let's hope these improvements trickle down soon!
      
          <div class="CommentReplyButton">
            <form action="/Articles/299912/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299924"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 8:31 UTC (Tue)
                               by <b>mjthayer</b> (guest, #39183)
                              [<a href="/Articles/299924/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
But if you are loading a kernel which has compiled-in support for a minimal hardware base, you can provide static /dev entries for just that hardware.  udev was loaded later anyway if I read correctly.  Actually, you could even have several such minimal kernels for different configurations and decide in advance which to load.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299924/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor299913"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 7:15 UTC (Tue)
                               by <b>njs</b> (guest, #40338)
                              [<a href="/Articles/299913/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; No-one cares if servers take a few minutes to boot</font><br>
<p>
Just FYI, historically servers have driven a lot of the, for instance, hardware changes necessary to get fast boot (ever noticed that default POST started skipping a number of mostly-useless checks in the last few years?).  Mostly because people wanted be able to write big enterprise contracts saying "the server will be up 99.999% of the time", which gives you 5.2 minutes downtime per year, and if one reboot blows your yearly downtime budget, well...<br>
<p>
(As far as I know no-one no-one cares about +-minute of reboot time in practice and the whole 99.999% thing is largely a gimmick, but you need it to be Marketing Compliant(TM), and apparently that's enough to drive BIOS changes etc.  And hey, faster boots for us.)<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299913/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300448"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 25, 2008 15:01 UTC (Thu)
                               by <b>BenHutchings</b> (subscriber, #37955)
                              [<a href="/Articles/300448/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I don't know which servers you're looking at, but I generally find them to be relatively slow to boot. Whereas Microsoft has made fast booting (from the BIOS to the Windows loader) a requirement for putting the Windows logo on desktops and laptops.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300448/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor299825"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Video is available on youtube</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 20:53 UTC (Mon)
                               by <b>arjan</b> (subscriber, #36785)
                              [<a href="/Articles/299825/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
just finished uploading the video of the fast booting laptop we used (for those in the room who couldn't see the netbooks)<br>
<p>
<a href="http://www.youtube.com/watch?v=s7NxCM8ryF8">http://www.youtube.com/watch?v=s7NxCM8ryF8</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299825/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299831"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Video is available on youtube</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 21:28 UTC (Mon)
                               by <b>bronson</b> (subscriber, #4806)
                              [<a href="/Articles/299831/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
That is an awesome video.  I understand quantitatively how fast 5 seconds is but there's nothing quite like actually watching it.  Love how the desktop smashes into existence at the very last second.<br>
<p>
Any chance of getting this to work on the OLPC...?  Since its power saving hasn't lived up to the promises, booting it fast would be very very handy.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299831/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor299956"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Video is available on youtube</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 13:24 UTC (Tue)
                               by <b>kjp</b> (guest, #39639)
                              [<a href="/Articles/299956/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
*mind blows*<br>
<p>
How much does Readahead help the SSD?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299956/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299980"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Benefit of sReadAhead on SSD</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 14:49 UTC (Tue)
                               by <b>jreiser</b> (subscriber, #11027)
                              [<a href="/Articles/299980/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
A little less than 3 seconds (75MB of data at 25MB/s).  The CPU and the SSD are both always busy from t=1.02 to t=4 seconds.  The transfer latency is almost completely hidden, whereas before there was little overlap.  Compare the bootcharts.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299980/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor300102"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Video is available on youtube</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 21:41 UTC (Tue)
                               by <b>arjan</b> (subscriber, #36785)
                              [<a href="/Articles/300102/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
it helps a little over 2 seconds; might sound little but remember that this is for a 4 second userspace part of the boot...<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300102/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor299859"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Now what about shutdown?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 22:21 UTC (Mon)
                               by <b>Felix_the_Mac</b> (guest, #32242)
                              [<a href="/Articles/299859/">Link</a>] (11 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<p>
This is fantastic, it really throws down the gauntlet to every distribution.<br>
Don't miss the video that Arjan has posted on youtube.<br>
<p>
If we can boot in 5 seconds surely we should be able to shutdown in less?<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299859/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299862"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Now what about shutdown?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 22, 2008 22:48 UTC (Mon)
                               by <b>drag</b> (guest, #31333)
                              [<a href="/Articles/299862/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Well if the applications are designed correctly then you can reduce the shutdown time to a few msec. <br>
<p>
<p>
So the applications should be designed that at any time they can have the power cut and not lose data. You could have a 'shutdown' thread in the kernel that does the equivalent of (in psuedo-shell):<br>
<p>
killall *  &amp;&amp;  sync &amp;&amp; acpi-poweroff<br>
<p>
<p>
----------<br>
<p>
For example;  Say your editing a file and Vim caught a shutdown message then it wouldn't bother you with the details. It would simply double check that the last change you've made was committed to a temporary file on disk (which should of already been done if you were gone long enough to navigate to the shutdown button) and just die. <br>
<p>
Next time you start up Vim you go right back to your edit. It does this mostly already.<br>
<p>
I can send a killall -9 epiphany-browser and when I open the browser again it just starts me off were it left off. That's what it does now. <br>
<p>
Similar things for OO.org and most other decent applications that I use. They don't need some complicated shutdown procedure.. just tell them to die, and then pull the power.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299862/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299883"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Just crash.</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 1:16 UTC (Tue)
                               by <b>dmarti</b> (subscriber, #11625)
                              [<a href="/Articles/299883/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Val Henson did a related LWN piece on <a href="http://lwn.net/Articles/191059/">Crash-only software</a>.  You have to write crash recovery anyway, so why not "crash" every time?
      
          <div class="CommentReplyButton">
            <form action="/Articles/299883/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor299882"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Now what about shutdown?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 1:16 UTC (Tue)
                               by <b>JoeBuck</b> (subscriber, #2330)
                              [<a href="/Articles/299882/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      Val Henson wrote an article about that for LWN: <a href="http://lwn.net/Articles/191059/">Link</a>.
<p>
The observation was that it often takes less time to crash and restart a program than it does to shut it down cleanly.  So why not always crash it?

      
          <div class="CommentReplyButton">
            <form action="/Articles/299882/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299917"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Now what about shutdown?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 7:31 UTC (Tue)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/299917/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Because programs that crash are not necessarily in a consistent state, so <br>
crash recovery can fail where ordinary bootups do not. (Of course, if you <br>
can make crash recovery reliable with something like application-level <br>
journalling, your point stands, unless like databases the post-crash <br>
bootup is really expensive. But that's probably a rare case.)<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299917/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300435"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Other fun features for &quot;crashable&quot; apps</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 25, 2008 14:59 UTC (Thu)
                               by <b>dmarti</b> (subscriber, #11625)
                              [<a href="/Articles/300435/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Programs that come back in a messed-up state after a crash make baby Jesus cry.  The vi clone "elvis" had good recovery very early, and we have enough disk space now to do it even for very large media files.

<p>A user actions log that an app could replay might have other uses, too.  Of course there's deep undo and bug reporting, and automatic macro writing by identifying common steps might be useful.  There was even a legal case a few years ago where a composer couldn't prove he had created a certain audio file, because he couldn't put the sliders of his GUI audio app on the exact right pixel.
      
          <div class="CommentReplyButton">
            <form action="/Articles/300435/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor299897"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Now what about shutdown?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 3:11 UTC (Tue)
                               by <b>arjan</b> (subscriber, #36785)
                              [<a href="/Articles/299897/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
So far we found one bottleneck in shutdown: all the dirty pagecache data needs to be flushed to the disk before we can power off, and some of the SSDs and disks out there are just not very fast.. this can take several seconds easily.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299897/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300454"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Now what about shutdown?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 25, 2008 15:13 UTC (Thu)
                               by <b>dmarti</b> (subscriber, #11625)
                              [<a href="/Articles/300454/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      If the app really needed that data it would have called fsync a while ago -- so just halt.  Applications are going to have to be able to handle coming back after a kernel panic or a kicked-out power cord anyway.
      
          <div class="CommentReplyButton">
            <form action="/Articles/300454/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300602"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Now what about shutdown?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 26, 2008 2:24 UTC (Fri)
                               by <b>njs</b> (guest, #40338)
                              [<a href="/Articles/300602/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Uh... so if I hit "save" while using my app, that app should always fsync before returning?  That sounds awful.  (I guess the alternative is that we just throw away the files that users thought they had saved, but that seems suboptimal.)<br>
<p>
IIRC emacs (used to?) do this by default, and until I disabled that it was unusable on a laptop, because hitting C-x C-s blocked everything for a few seconds waiting for the drive to spin up.  ELISP SMASH<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300602/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300670"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">When is &quot;save&quot; really &quot;maybe save&quot;?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 26, 2008 15:05 UTC (Fri)
                               by <b>dmarti</b> (subscriber, #11625)
                              [<a href="/Articles/300670/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      Applications could be smart about this.  The answer might be something like: fsync on save if 100 user actions or 10s of CPU time have been spent on the file since the last save.  Or fsync on save if the file has gone from a broken state (invalid HTML, spelling errors, audio that clips, program that won't compile) to a fixed state.

<p>(And you could always do the fsync in a separate thread or process, so the app is responsive again.)
      
          <div class="CommentReplyButton">
            <form action="/Articles/300670/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300744"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">When is &quot;save&quot; really &quot;maybe save&quot;?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 26, 2008 21:43 UTC (Fri)
                               by <b>njs</b> (guest, #40338)
                              [<a href="/Articles/300744/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
fsync doesn't mean "hey kernel actually write this to disk", it means "write this to disk *now*" (and in practice, "write everything to disk *now*", because our filesystems are not that great).  If you're running it async, then you get exactly the same semantics as a plain write.  The kernel already guarantees that stuff will be written to disk within n seconds, with n a tweakable parameter that's important for power saving.  I guess I just don't see the advantages of moving that to a million per-app settings, all using an inappropriate interface.<br>
<p>
If the goal is to reach a point where we can throw away a lot of data instead of flushing it to disk at shutdown, then this approach is making a classic mistake: it's trying to mark everything that *does* need to go to disk, and hoping that eventually everything will be marked and we'll be able to flip the switch and throw everything else away.  The better approach is to mark stuff that isn't important, like some fcntl to request "power-loss semantics" for writes to some file; then you could get some win immediately, and expand it incrementally over time.<br>
<p>
I doubt this is easy or important enough to actually get the coordinated effort needed to implement it, but that's how I'd do it...<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300744/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor300019"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Now what about shutdown?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 17:09 UTC (Tue)
                               by <b>s0f4r</b> (guest, #52284)
                              [<a href="/Articles/300019/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
So far we've seen large jitter in shutdown times - varying from 3 to well over 10 seconds. Shutdown is a really hard case for optimization as we have no idea what threads are going to be woken up and perform work when we killall9, and thus it's extremely unpredictable.<br>
<p>
We so try to send a sync() as early as we possibly can to the system to remove some of this load, which seem to help.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300019/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor299877"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 0:36 UTC (Tue)
                               by <b>csawtell</b> (guest, #986)
                              [<a href="/Articles/299877/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      While getting a lappie to boot in 5 seconds is quite an achievement, what I'd <em>really</em> like to see is my ThinkPad waking up from the suspend state almost instantaneously. Currently it takes about 8 seconds from opening the lid to a usable desktop.<p>Any chance of doing that?
      
          <div class="CommentReplyButton">
            <form action="/Articles/299877/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299881"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 1:14 UTC (Tue)
                               by <b>dmarti</b> (subscriber, #11625)
                              [<a href="/Articles/299881/">Link</a>] 
      </p>
      
      </div>
      </summary>
      What kernel are you running?  I had slow wakeups on an X61 but it went away some time before 2.6.26.5.
      
          <div class="CommentReplyButton">
            <form action="/Articles/299881/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor299925"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 8:53 UTC (Tue)
                               by <b>k3ninho</b> (subscriber, #50375)
                              [<a href="/Articles/299925/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
How much RAM do you have and how fast is your disk?  At best, 1GiB of Ram read at 60MiB per second will take 16ish seconds.  If you manage some compression and only take the parts of memory used in running programs, you'll speed things up.  But almost-instantaneous will be IO bound by your disk.<br>
<p>
K3n.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299925/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299935"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 10:05 UTC (Tue)
                               by <b>rvfh</b> (guest, #31018)
                              [<a href="/Articles/299935/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I assume he meant wake up from suspend-to-ram...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299935/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300100"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 21:22 UTC (Tue)
                               by <b>csawtell</b> (guest, #986)
                              [<a href="/Articles/300100/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; I assume he meant wake up from suspend-to-ram...</font><br>
He did.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300100/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor299894"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">No moss</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 2:33 UTC (Tue)
                               by <b>jreiser</b> (subscriber, #11027)
                              [<a href="/Articles/299894/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      The work was done nearly just-in-time, too.  The call for papers closed July 31, the conference was Sept. 16-19.
<a href="http://linuxplumbersconf.org/program/speakers/getspeaker.php?speaker=avandeven.txt">
"We're so annoyed that between the time of submission and the plumbers conference, we will make our netbooks boot in 5 seconds, and even talk about how we did it."</a>  Auke said that video was made the night before the presentation.
      
          <div class="CommentReplyButton">
            <form action="/Articles/299894/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300021"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">No moss</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 17:10 UTC (Tue)
                               by <b>s0f4r</b> (guest, #52284)
                              [<a href="/Articles/300021/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I don't recall saying that :)<br>
<p>
The video was shot about one week before the conference, not the evening before :)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300021/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor299900"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Hat's off to tux</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 4:42 UTC (Tue)
                               by <b>salinuxam</b> (guest, #50554)
                              [<a href="/Articles/299900/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Excellent piece of work :) Nice to see it all happening in 5 seconds.. I think debian always tried to follow this... :)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299900/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor299905"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">SPLASH!</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 5:42 UTC (Tue)
                               by <b>eru</b> (subscriber, #2753)
                              [<a href="/Articles/299905/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <i>The development time that distributions spend on splash screens is 
much more than the Intel team spent on booting fast enough not to need 
one.</i>
<p>
That one goes to my quotes file...
<p>
I, too, am mystified by this splash screen fashion: If starting up 
something really takes an unavoidably long time, it is far better to 
scribble status messages about what is really going on. It keeps the user 
(even a nontechnical user) better entertained than staring at some 
pretentious attempt at graphics design, and can be useful for 
troubleshooting. (Also for the nontechnical user, when he phones his 
friendly hacker after the the start-up freezes for some reason.)

      
          <div class="CommentReplyButton">
            <form action="/Articles/299905/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300368"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">SPLASH!</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 25, 2008 7:58 UTC (Thu)
                               by <b>cdamian</b> (subscriber, #1271)
                              [<a href="/Articles/300368/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I wonder if the new flicker free boot screen for fedora 10 will make things faster or slower. I sounds like a lot of work for something we don't want to see anyway.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300368/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor299907"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">X11 and CC?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 6:14 UTC (Tue)
                               by <b>eru</b> (subscriber, #2753)
                              [<a href="/Articles/299907/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <i>The X Window System runs the C preprocessor and compiler on startup, 
in order to build its keyboard mappings.</i>
<p>
Sounds very strange. Frankly I did not know it does this. Mapping 
keyboard presses to X's internal codes isn't exactly time-critical, so 
why doesn't it simply use a mapping table (or some kind of bytecode if a 
simple table is not powerful enough) loaded from a binary file? Using CC 
for this sounds like something done just for the hack value...

      
          <div class="CommentReplyButton">
            <form action="/Articles/299907/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299919"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">X11 and CC?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 7:34 UTC (Tue)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/299919/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It's not compiling anything: it's passing the keysym files through the C <br>
preprocessor before xkbcomping them. Everyone hates this (it's imake only <br>
not quite as ugly). I'm not sure if the rip-out-xkbcomp-at-every-X-start <br>
job is done yet, but it's definitely on people's lists<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299919/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300023"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">X11 and CC?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 17:12 UTC (Tue)
                               by <b>s0f4r</b> (guest, #52284)
                              [<a href="/Articles/300023/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
there is a patch and it'll likely be in git soon, we sent it to Keith P. :)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300023/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300084"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">X11 and CC?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 20:10 UTC (Tue)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/300084/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
YAY! Another ugly crock bites the dust...<br>
<p>
(of course we still need /lib/cpp for the occasional non-X program that <br>
uses imake. Can't live without xpilot, now, can we. ;) )<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300084/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor299926"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Splash screens and initramdisk</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 8:45 UTC (Tue)
                               by <b>mjthayer</b> (guest, #39183)
                              [<a href="/Articles/299926/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It should be possible to improve the look of the kernel boot without going to the lengths that Ubuntu or Fedora's splash screens do.  The splash can use the console instead of a custom graphics setup, the graphic logo can be put there by the boot loader and left where it is, and if the boot is that fast, I'm sure no one will mind a "Starting [distro name]", dot, dot, dot instead of a progress bar.  And of course that makes it easier to display any fatal messages without spoiling the general esthetics :)  Non-fatal messages should not be shown on the console by default of course.<br>
<p>
On a different subject, couldn't an initramdisk actually speed up booting from hard disk if done right - by just caching all the stuff which must be read to boot in a single file, which can be read with a single hard disk seek?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299926/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299932"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Splash screens and initramdisk</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 9:53 UTC (Tue)
                               by <b>etienne_lorrain@yahoo.fr</b> (guest, #38022)
                              [<a href="/Articles/299932/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Non-fatal messages should not be shown on the console by default of course.</font><br>
<p>
 Even if the only retribution the software writers ask for is a copyright line?<br>
 Even if the kernel is going to unsupported (tainted) mode loading a driver?<br>
 Anyways, it is a lost cause already.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299932/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299934"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Splash screens and initramdisk</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 10:04 UTC (Tue)
                               by <b>mjthayer</b> (guest, #39183)
                              [<a href="/Articles/299934/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Those things are hidden by bootsplashes even today.  But even if they weren't, how do you get around the problem of several hundred lines of attributions and notifications going past in a few seconds?  That will not help the people wanting recognition.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299934/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor299957"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Splash screens and initramdisk</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 13:26 UTC (Tue)
                               by <b>Cato</b> (guest, #7643)
                              [<a href="/Articles/299957/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Putting everything in an initramdisk is really optimising for hard disks, which have slow random I/Os.  SSDs don't have this problem, so it's better to find an optimisation that works for them too.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299957/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299962"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Splash screens and initramdisk</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 13:31 UTC (Tue)
                               by <b>mjthayer</b> (guest, #39183)
                              [<a href="/Articles/299962/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Wouldn't an alternative be to optimise for the system you are running on, assuming that on the whole it will not change much from one boot to the next?  And if it does change, you use the slower fallback for that boot.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299962/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300155"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Splash screens and initramdisk</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 24, 2008 8:57 UTC (Wed)
                               by <b>maney</b> (subscriber, #12630)
                              [<a href="/Articles/300155/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Hmmmm... Isn't that what Windows does, though without any very useful fallback when it fails?
      
          <div class="CommentReplyButton">
            <form action="/Articles/300155/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor300024"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Splash screens and initramdisk</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 17:14 UTC (Tue)
                               by <b>s0f4r</b> (guest, #52284)
                              [<a href="/Articles/300024/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Not really. The overhead of actually loading the ramdisk using the slowest read method (BIOS) the system has available is extremely expensive. Once the kernel is booted we can use the fastest methods to read the disk.<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300024/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor299949"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 12:24 UTC (Tue)
                               by <b>MisterIO</b> (guest, #36192)
                              [<a href="/Articles/299949/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I'm sorry, but I don't really see the benefit here. It's just 45 seconds! I actually consider this effort a waste of time! If it were from 4 minutes to 45 seconds, I'd have appreciated it, but just 45 seconds are more than acceptable!<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299949/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300025"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 17:20 UTC (Tue)
                               by <b>s0f4r</b> (guest, #52284)
                              [<a href="/Articles/300025/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
You can't save more power than a device that's off... <br>
<p>
That said, how about a linux-based phone that is completely powered off and wakes up when it's called? Would you want to have the caller hold for 45 seconds while your OS boots to start a voicemail application?<br>
<p>
Think about servers with a 99.999% uptime guarantee. with a 5 second shutdown and startup they can be rebooted 20x a year. with a 45 second shutdown and startup you can reboot them twice a year.<br>
<p>
You obviously haven't used a computer that boots in 5 seconds yet. I guarantee that when you do, you will never want the old 45 second boot again :)<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300025/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300109"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 22:12 UTC (Tue)
                               by <b>MisterIO</b> (guest, #36192)
                              [<a href="/Articles/300109/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Well, maybe you're right. We'll see. If it works out without any side effect, it'll be good anyway.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300109/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor299955"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 13:00 UTC (Tue)
                               by <b>jpmcc</b> (guest, #2452)
                              [<a href="/Articles/299955/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Why boot? why suspend? I have two mobile devices, a Palm TX and an Eee PC. The Palm is effectively always on - that's the real prize Linux hackers should be aiming for.<br>
<p>
John<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299955/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor299959"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 13:39 UTC (Tue)
                               by <b>etienne_lorrain@yahoo.fr</b> (guest, #38022)
                              [<a href="/Articles/299959/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
 If you have a software loaded using a library (for instance Glibc), then you upgrade the Glibc package, only the file on disk is updated, and only the application newly created will use this new file.<br>
Linux do not provide re-loading current tasks with the new libraries; during the time in between the library is upgraded and all the old users of the old library have disappered, the library file is twice is memory - and old programs will still contain bugs of the old library.<br>
 Debian seems to be good at restarting services when their dependancies are upgraded, but I am not sure they handle things like Glibc upgrade.<br>
 That is why booting from scratch is needed from times to times.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/299959/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300049"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 17:43 UTC (Tue)
                               by <b>hmh</b> (subscriber, #3838)
                              [<a href="/Articles/300049/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Yes, Debian deals with glibc upgrades.  But nothing is really perfect, it is best to just check for old libs in memory after an upgrade:<br>
<p>
lsof +L1 | grep lib<br>
<p>
together with<br>
<p>
lsof -n | grep 'path inode' | grep lib<br>
<p>
will give you that info, for example.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300049/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor301636"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 3, 2008 11:03 UTC (Fri)
                               by <b>pabs</b> (subscriber, #43278)
                              [<a href="/Articles/301636/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
A better way to do that is:<br>
<p>
apt-get install debian-goodies ; checkrestart -v<br>
<p>
That gives you package names and init scripts to run.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/301636/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor300065"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 23, 2008 18:12 UTC (Tue)
                               by <b>arjan</b> (subscriber, #36785)
                              [<a href="/Articles/300065/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
the FAA and TSA are 3 letter agencies that tend to make you turn off your devices.... just as an example<br>
<p>
not booting is obviously faster as any type of boot, no argument about that. The good news is that there's no exclusivity between the two.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300065/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300483"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 25, 2008 16:18 UTC (Thu)
                               by <b>kamil</b> (subscriber, #3802)
                              [<a href="/Articles/300483/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
My understanding is that the logic behind turning off your laptop during the take off/landing is not about electronic interference, but more about you being alert to what's going on on board.  Also keep in mind that they don't just ask you to turn them off, but also to stow them.  They simply don't want anything to obstruct the escape routes in case of an emergency, including any wires around your head.<br>
<p>
What I'm trying to say here is that in practice, suspending your laptop during take off/landing as opposed to turning it off is perfectly fine.  Your average flight attendant will likely flatly deny that when asked, but those people are not paid to think...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300483/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor301193"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 30, 2008 21:27 UTC (Tue)
                               by <b>salimma</b> (subscriber, #34460)
                              [<a href="/Articles/301193/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
And given that you don't really hear a chorus of start-up chimes from business travelers' laptops once the electronics gag has been lifted, that's obviously what they've been doing all along: suspending.<br>
<p>
Nobody fully turns off their PDAs too, as far as I can tell. Though you hope they do remember to put them to in-flight mode...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/301193/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor300257"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 24, 2008 17:58 UTC (Wed)
                               by <b>xed</b> (guest, #52285)
                              [<a href="/Articles/300257/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I very much appreciate the work that has been put into this. Just like the eee showed the world that a little cheap computer was possible (and, as a bonus, that Linux was possible even for normal folks) now, this shows that fast boots are possible. Maybe people will consider this goal to be more interesting and desirable. It certainly is for me. I currently use ratpoison on my eee because of the screen space and interface issues, but I do love the *much* faster boot cycle. I remember the computers of the 80's where you turn on the power switch and they were ready before you were.They were silent too...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300257/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor300370"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 25, 2008 8:34 UTC (Thu)
                               by <b>phillemann</b> (guest, #49231)
                              [<a href="/Articles/300370/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I don't quite unterstand what the "desktop environment" means in the context of boot time. It obviously gets 2 seconds in the 5 second boot time, so a large part.<br>
<p>
Is it the initialization of xfce (or even KDE which should take even longer)? If so, using a window manager like, fluxbox/ion/xmonad could save even more time.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300370/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300425"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 25, 2008 14:24 UTC (Thu)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/300425/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
As an example, X on my rather old 2001-vintage system takes seven seconds <br>
from typing 'startx' through to the display stabilizing and .Xinitrc <br>
beginning to be executed.<br>
<p>
That's a *long* time to change video mode.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300425/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor300440"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 25, 2008 14:56 UTC (Thu)
                               by <b>arjan</b> (subscriber, #36785)
                              [<a href="/Articles/300440/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It's from the start of the desktop environment (in our case XFCE) until it's done (in the "screen painted, cpu and disk idle" sense).<br>
<p>
Yes 2 seconds is very generous and more minimalistic desktops can go much faster than that. We decided to pick XFCE since, well, first of all, we could hack the code as kernel guys, and second, it has a feature set that at least is close to what the "big guys" do (which code we didn't feel we could hack as kernel guys).<br>
<p>
Can XFCE go faster than 2 seconds? probably. We met our budget for it after one small patch so we stopped working on it and focused on other parts instead. <br>
<p>
This may sound weird but our project really was about booting in 5 seconds, not about booting fast or fastest ;-).... we engineered it budget driven, which really helped us to spend our time effectively, specifically, on those parts of the boot process that were over budget, rather than getting bogged down in one part and spend 3 seeks making it go from 2.0 to 1.9 seconds.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300440/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor300385"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Filesystem optimization?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 25, 2008 11:24 UTC (Thu)
                               by <b>mlankhorst</b> (subscriber, #52260)
                              [<a href="/Articles/300385/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
What this article makes me interested in is doing the same for traditional <br>
hard disks. You could make an extension in ext4 that will reserve some <br>
space for sReadAhead which contains only the useful parts of files and a <br>
special index that says what data is in there. If ext4 will read during <br>
boot time that index and the subsequent data you would have read all data <br>
needed during boot and io would no longer be an issue.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300385/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor300592"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 26, 2008 0:41 UTC (Fri)
                               by <b>Hawke</b> (guest, #6978)
                              [<a href="/Articles/300592/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
So why aren't these optimizations being done "for real", with the intent of being packaged for normal distros?  It's great to know that in theory it can be done, but it's of little benefit if no one actually does it...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/300592/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor300656"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">They are</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 26, 2008 13:42 UTC (Fri)
                               by <b>dmarti</b> (subscriber, #11625)
                              [<a href="/Articles/300656/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      Actually, this stuff does look like it's on the way to becoming "real."  Ted Ts'o and Keith Packard (filesystem and X) were in the crowd, and both sounded interested in accepting this work, or something based on it, into the "real" versions of the software.  The actual readahead program is supposed to be on the <a href="http://www.moblin.org/">Moblin</a> site soon -- so Fedora, Ubuntu and the rest can download and integrate it if they want to.
      
          <div class="CommentReplyButton">
            <form action="/Articles/300656/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor301653"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Are the .config available</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 3, 2008 13:32 UTC (Fri)
                               by <b>ummmwhat</b> (guest, #54087)
                              [<a href="/Articles/301653/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Hi, I just want to know if you can post the .config of your presentation's kernel.<br>
<p>
Thanks in advance.<br>
<p>
Best regards...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/301653/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor301138"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 30, 2008 16:37 UTC (Tue)
                               by <b>syntropy</b> (guest, #54409)
                              [<a href="/Articles/301138/">Link</a>] 
      </p>
      
      </div>
      </summary>
      I have been booting in a rough eight seconds (GRUB->X) for months without the problematic issues of readahead and deferring startup to the 'background'. My system is loaded and synchronized in 8 seconds flat, without tearing out subsystems and destroying so many internals and hacks on Fedora. <br/>
<br/>
<a rel="nofollow" href="http://kyuba.org/">Kyuba.</a>
      
          <div class="CommentReplyButton">
            <form action="/Articles/301138/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor301444"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 2, 2008 12:13 UTC (Thu)
                               by <b>jwmittag</b> (guest, #43097)
                              [<a href="/Articles/301444/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <p>Some time ago there was this <a rel="nofollow" href="http://MachBoot.Com/">MachBoot</a> Linux Live-CD (read "Mach" as in "Supersonic Speed", not as in "Research Microkernel obsoleted 20 years ago and only kept alive by Apple and Hurd"). Their current record is 5.68s, which is pretty darn fast considering that CD-ROMs are both slow <em>and</em> have absolutely abysmal seek times.</p><p>Interesting times &#8230;</p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/301444/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor301619"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 3, 2008 7:44 UTC (Fri)
                               by <b>jordoex</b> (guest, #54491)
                              [<a href="/Articles/301619/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Looks like Ubuntu has some work to do for Jaunty Jackalope if they want to impress anybody now!<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/301619/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor301649"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">message output</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 3, 2008 12:48 UTC (Fri)
                               by <b>reed</b> (guest, #54499)
                              [<a href="/Articles/301649/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I noticed from your video that there is a minimum of message printouts on the console.  Output takes a lot of time, especially when there's such a flood of it, and it's easy to forget about.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/301649/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor301857"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LinuxBIOS / CoreBoot</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 6, 2008 10:58 UTC (Mon)
                               by <b>endecotp</b> (guest, #36428)
                              [<a href="/Articles/301857/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
How much more time could we save by booting using CoreBoot (aka LinuxBIOS) instead of the manufacturer's supplied BIOS ROM?<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/301857/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor301979"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">I can start my 1978 Ford Pinto in 4 seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 6, 2008 18:32 UTC (Mon)
                               by <b>gumby</b> (guest, #54545)
                              [<a href="/Articles/301979/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Providing its not to cold, I can turn ignition to start, fire up the cylinders put car in gear put foot on the gas, let clutch out in 4 seconds on a good day.<br>
<p>
Why are computers so slow at starting, maybe it takes them a while to warm up and get those electrons flowing.<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/301979/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor302016"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">I can start my 1978 Ford Pinto in 4 seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 6, 2008 20:46 UTC (Mon)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/302016/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Thank you for completing this discussion by providing the obligatory <br>
Stupid Car Analogy(TM). (It is well known that all computing discussions <br>
must eventually include a stupid and inappropriate analogy to the <br>
automobile.)<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/302016/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor302262"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">I can start my 1978 Ford Pinto in 4 seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 8, 2008 3:31 UTC (Wed)
                               by <b>pgan</b> (guest, #54573)
                              [<a href="/Articles/302262/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Well, using analogies is like two eggs sunny-side-up, flying through space.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/302262/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor303847"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 20, 2008 11:04 UTC (Mon)
                               by <b>skeldoy</b> (guest, #54795)
                              [<a href="/Articles/303847/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I got a custom OS built on the latest vanilla kernel and busybox to boot in 10 seconds without changing any code - it hardly does anything - I just wondered where you get you 5 extra seconds from. It has to be the kernel - my initrd and x-startup (all parallel except network) takes less than a second, so all the time that is spent is in the kernel.<br>
<p>
I just wondered what kind of stuff you did to the kernel to make it boot faster. Is there some smart stuff we can do to tweak it? Are some of the options real time consuming? Can you post a link to the .config?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/303847/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor306060"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC: Booting Linux in five seconds</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 5, 2008 21:10 UTC (Wed)
                               by <b>tholme</b> (guest, #54306)
                              [<a href="/Articles/306060/">Link</a>] 
      </p>
      
      </div>
      </summary>
      He got rid of the initrd and made som changes to the kernel. You can find them in his <a href="http://lwn.net/Articles/299591/">fastboot.git-tree</a>
      
          <div class="CommentReplyButton">
            <form action="/Articles/306060/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2008, Eklektix, Inc.<BR>
            
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
