        <!DOCTYPE html>
        <html lang="en">
        <head><title>5.3 Merge window, part 2 [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/793629/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/794274/">Return to the Front page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/793629/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>5.3 Merge window, part 2</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Ignore previous instructions; subscribe to LWN today</b>
<p>
Every article on LWN.net is written by humans, for humans. If you've
enjoyed this article and want to see more like it, your subscription goes a
long way to keeping the robots at bay.  We are offering <a href="https://lwn.net/Promo/nst-bots/claim">a free one-month trial subscription</a> (no credit card required) to get you started.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>July 22, 2019</br>
           </div>
At the end of the 5.3 merge window, 12,608 non-merge changesets had been
pulled into the mainline repository.  Nearly 6,000 of those were pulled
after <a href="/Articles/793246/">the first-half summary</a> was written.
As expected, there was still a lot of material yet to be merged for this
development cycle.
<p>
Some of the more significant changes merged in the second half of the merge
window are:
<p>
<h4>Architecture-specific</h4>
<p>
<ul class="spacylist">

<li> User-mode Linux now has a "<a
     href="https://git.kernel.org/linus/065038706f77">time-travel mode</a>"
     that can speed up or slow down time to help with debugging of
     timing-related code.
<li> The RISC-V architecture now has huge-page support.

</ul>


<p>
<h4>Core kernel</h4>
<p>
<ul class="spacylist">

<li> The <a href="/Articles/776703/">io_uring</a> mechanism has gained
     support for asynchronous <tt>sendmsg()</tt> and <tt>recvmsg()</tt>
     operations.
<li> Kernel probes ("kprobes") have gained the ability to dereference
     pointers into user space.  This can be used, for example, to look
     inside structures passed into system calls.  Some documentation can be
     found in <a href="https://git.kernel.org/linus/e65f7ae7f4da">this
     commit</a>.  It is also now possible to <a
     href="https://git.kernel.org/linus/970988e19eb0">set kprobes at boot
     time</a>. 
<li> There is a new configuration option (<tt>PREEMPT_RT</tt>) to select
     realtime preemption.  The code to implement that selection is not yet
     upstream, but this is <a
     href="/ml/linux-kernel/20190715150402.798499167@linutronix.de/">a
     signal that said code is coming soon</a>.
     
</ul>

<p>
<h4>Filesystems and block layer</h4>
<p>
<ul class="spacylist">

<li> The ubifs filesystem has gained support for zstd compression and
     verification of offline-signed filesystem images.
<li> The Ceph filesystem now supports security labels on files and, thus,
     now works with SELinux.
<li> There is a new mount option (<tt>nconnect=</tt>) for NFSv4 filesystems
     that allows the administrator to request that multiple TCP connections
     be established to the server.  Traffic is then load-balanced across
     those connections.
</ul>



<p>
<h4>Hardware support</h4>
<p>
<ul class="spacylist">

<li> <b>Graphics</b>:
     Samsung S6E63M0 RGB/SPI panels,
     OSD OSD101T2587-53TS DSI 1920x1200 video mode panels,
     ST-Ericsson multichannel display engines, and
     AMD NAVI GPUs.
<li> <b>Miscellaneous</b>:
     NXP IMX8MN pin controllers,
     Qualcomm SM8150 pin controllers,
     Cypress HyperBus-connected devices,
     ROHM BD70528 power-management ICs,
     Rockchip RK809 and RK817 power-management ICs
     Cirrus Logic CS47L15, CS42L92, CS47L92 and CS47L93 codecs,
     MediaTek MT7621/MT7628 I2C controllers,
     SiLabs 5341 and 5340 clock generators, and
     Apple SPI keyboards and trackpads.
</ul>


<p>
<h4>Security-related</h4>
<p>
<ul class="spacylist">

<li> There are two new command-line options, <tt>init_on_alloc=</tt> and
     <tt>init_on_free=</tt>, that will cause memory allocations to be
     initialized to zero at allocation and free time, respectively.  They
     improve security at some runtime cost, and are expected to be enabled
     on Android and ChromeOS systems.  See <a
     href="https://git.kernel.org/linus/6471384af2a6">this commit</a> for
     details.
<li> There is a new event filtering mechanism for perf events under KVM on
     the x86 architecture; it allows an administrator to specify which
     types of events can (or cannot) be monitored by guests.  Some details
     can be found in <a
     href="https://git.kernel.org/linus/66bb8a065f5a">this commit</a>.

</ul>

<p>
<h4>Virtualization and containers</h4>
<p>
<ul class="spacylist">

<li> The new <tt>virtio-iommu</tt> driver emulates an I/O memory-management
     unit on top of the virtio mechanism.
<li> There is a new <tt>virtio-pmem</tt> driver that emulates persistent
     memory devices in the guest.
</ul>


<p>
<h4>Internal kernel changes</h4>
<p>
<ul class="spacylist">

<li> Kernel makefiles can now contain a <tt>header-test-y</tt> declaration
     specifying header files that should be able to be compiled on their own; this
     assertion will be tested at build time if the <tt>HEADER_TEST</tt>
     configuration variable is set.  See <a
     href="https://git.kernel.org/linus/e846f0dc57f4">this commit</a> for
     details.  The plan is to test all kernel headers this way, but <a
     href="https://git.kernel.org/linus/43c78d88036e">many have to be
     excluded</a> in current kernels.
<li> The <a href="/Articles/692704/">conversion of kernel documentation</a>
     to the ReStructured Text format has jumped forward with <a
     href="https://git.kernel.org/linus/c309b6f24222">this massive
     patch set</a> taking care of most of the remaining plain-text files.  Now
     that the formatting issues are mostly taken care of, all that is left
     is the trivial task of integrating the documentation and updating it
     to match the current state of the kernel.
<li> The venerable floppy driver has been <a
     href="https://git.kernel.org/linus/be2ece49e683">marked as
     orphaned</a>, since the last remaining maintainer no longer has a
     working drive.
</ul>
<p>

Now comes the task of stabilizing all of that work.  If the usual schedule
holds — and it almost always does these days — the final 5.3 release can be
expected on September&nbsp;8 or&nbsp;15.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Releases-5.3">Releases/5.3</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/793629/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor794382"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 2</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 22, 2019 18:11 UTC (Mon)
                               by <b>mtaht</b> (subscriber, #11087)
                              [<a href="/Articles/794382/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Time travel mode looks potentially *wonderful* for finding bugs in long running daemons. There was a dhcpd6 once that only happened after 51 days of uptime, and I've hit numerous other bugs like that in my career.<br>
<p>
+10!<br>
<p>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/794382/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor794387"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 2</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 22, 2019 19:25 UTC (Mon)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/794387/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Yes, this is super-nice.<br>
<p>
You can also do that with VirtualBox (by specifying the "warp factor" via --warp-pct) but I'm not aware of any other virtualization environment that can do this.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/794387/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor794456"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 2</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 23, 2019 20:13 UTC (Tue)
                               by <b>johill</b> (subscriber, #25196)
                              [<a href="/Articles/794456/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I looked in qemu, and it sort of has this - if you emulate fully instead of using kvm, which is not feasible.<br>
<p>
I think it *could* be done in qemu, remove the TSC, simulate an HPET that has the desired properties and use a virt-aware guest to do the idle handling? But it's tricky and probably requires touching not only qemu and the guest kernel, but quite possibly also the host kernel. Though then I wonder how virtualbox does it, maybe I should look at that.<br>
<p>
Anyway, UML is good for me and actually simplifies my use case, so that's it for now. Seeing how much interest this has garnered, maybe somebody else will pick it up elsewhere :-)<br>
<p>
Btw, I broke it in a build fix at the last minute, so you need <a href="https://patchwork.ozlabs.org/patch/1134739/">https://patchwork.ozlabs.org/patch/1134739/</a> to actually use it.<br>
<p>
For wifi tests in wpa_s/hostapd it cut down the time required from ~45m to ~7m on my machine, but I run with more kernel debug options now (which wasn't even possible before) in ~10m.<br>
<p>
Next up is to add vhost-user support to UML (WIP) and then add a virtio-clock/idle driver to UML that uses it, so I can run multiple things (or instances of UML machines) on the same virtual time...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/794456/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor794454"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 2</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 23, 2019 19:23 UTC (Tue)
                               by <b>re:fi.64</b> (subscriber, #132628)
                              [<a href="/Articles/794454/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Have you seen Mozilla's rr debugger as well? <a href="https://rr-project.org/">https://rr-project.org/</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/794454/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor794383"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 2</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 22, 2019 18:43 UTC (Mon)
                               by <b>smurf</b> (subscriber, #17840)
                              [<a href="/Articles/794383/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Ah. Init to zero. Why not init to 0xdeadbeef1337babe, or something along these lines? that could at least find us some bugs instead of papering them over. (Yes I know, that's not helpful for Android users – but it'd be helpful for kernel developers.)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/794383/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor794388"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 2</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 22, 2019 20:13 UTC (Mon)
                               by <b>yann.morin.1998</b> (guest, #54333)
                              [<a href="/Articles/794388/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Hello,<br>
<p>
<font class="QuotedText">&gt; Why not init to 0xdeadbeef1337babe [...]</font><br>
<p>
I think the following, from the referenced commit, does already address your concerns:<br>
<p>
<font class="QuotedText">&gt; If either SLUB poisoning or page poisoning is enabled, those options take</font><br>
<font class="QuotedText">&gt; precedence over init_on_alloc and init_on_free: initialization is only</font><br>
<font class="QuotedText">&gt; applied to unpoisoned allocations.</font><br>
<p>
Regards,<br>
Yann E. MORIN.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/794388/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor794402"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 2</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 23, 2019 8:27 UTC (Tue)
                               by <b>unixbhaskar</b> (guest, #44758)
                              [<a href="/Articles/794402/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
"There is a new mount option (nconnect=) for NFSv4 filesystems that allows the administrator to request that multiple TCP connections be established to the server. Traffic is then load-balanced across those connections. "<br>
<p>
This is certainly getting over the lagging issue.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/794402/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor794457"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 2</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 23, 2019 20:56 UTC (Tue)
                               by <b>Sesse</b> (subscriber, #53779)
                              [<a href="/Articles/794457/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Or making it much worse by inducing bufferbloat.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/794457/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor794467"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">5.3 Merge window, part 2</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 24, 2019 0:43 UTC (Wed)
                               by <b>neilbrown</b> (subscriber, #359)
                              [<a href="/Articles/794467/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;  Or making it much worse by inducing bufferbloat.</font><br>
<p>
Certainly possible.  We would love to find a way to have the kernel auto-configure this number, but no brilliant ideas have come forward.<br>
<p>
When you have parallel hardware (multiple cables, multiple DMA engines, multiple offload engines, multiple CPU cores), having multiple TCP connections can really help.<br>
When you don't (or don't have enough), then multiple connections defeat congestion control and bloat buffers.<br>
<p>
Determining the capabilities of the hardware (which could change) is, as yet, an unsolved challenge.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/794467/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2019, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
