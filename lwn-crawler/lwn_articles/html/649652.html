        <!DOCTYPE html>
        <html lang="en">
        <head><title>4.2 Merge window part 2 [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/649652/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/649576/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/649652/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>4.2 Merge window part 2</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>We're bad at marketing</b>
<p>
We can admit it, marketing is not our strong suit. Our strength is
writing the kind of articles that developers, administrators, and
free-software supporters depend on to know what is going on in the
Linux world. Please <a href="/Promo/nsn-bad/subscribe">subscribe today</a> to help us keep doing that, and so
we don’t have to get good at marketing.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>July 1, 2015</br>
           </div>
<a href="/Articles/648995/">Last week's merge window summary</a> noted that
"things are just getting started."  Since then, Linus has pulled nearly
8,000 non-merge changesets into the mainline repository, making the total
for the 4.2 merge window just short of 11,000.  It is fair to say that
things have truly started now.
<p>
Whether 4.2 will, as <a
href="https://plus.google.com/+LinusTorvalds/posts/KZPWD3KURbK">Linus
recently predicted</a>, be the busiest development cycle ever remains to be
seen.  That record is currently held by 3.15, which saw just over 12,000
changesets pulled during its merge window.  Things seem to be winding down
on the 4.2 front, so it may not exceed 3.15's totals.  There is no doubt,
though, that this is a busy development cycle.
<p>
Some of the more interesting changes merged since last week's summary
include: 
<ul>

<li> The <a href="/Articles/635771/">Linux security module stacking
     patches</a> have been merged, finally giving the kernel the ability to
     combine security modules in a generic manner.
<p>
<li> A new packet classifier called "Flower" has been added.  With Flower,
     "<q>you will be able to classify packets based on a configurable
     combination of packet keys and masks.</q>"  This classifier appears
     to be entirely lacking in documentation, unfortunately.
<p>
<li> A driver for GENEVE (<a
     href="http://tools.ietf.org/html/draft-gross-geneve-02">Generic
     Network Virtualization Encapsulation</a>) tunnels has been added to
     the networking subsystem.
<p>
<li> The netfilter subsystem has gained support for ingress-time packet
     classification. 
<p>
<li> Unix-domain sockets now support the <tt>splice()</tt> system call.
<p>
<li> Support for the <a href="/Articles/645115/">delay-gradient
     congestion-control algorithm</a> has been merged.
<p>
<li> The F2FS filesystem has gained support for a number of features
     including per-file encryption and the <tt>FALLOC_FL_ZERO_RANGE</tt>
     and <tt>FALLOC_FL_COLLAPSE_RANGE</tt> <tt>fallocate()</tt>
     operations.
<p>
<li> The ext4 filesystem now supports the <a
     href="/Articles/629965/"><tt>FALLOC_FL_INSERT_RANGE</tt> 
     operation</a>, which inserts a range of zero-filled space into an existing
     file. 
<p>
<li> Support for the Renesas H8/300 architecture was removed a couple of
     years ago due to lack of maintenance; that code has now been rewritten,
     fixed up, and merged back into the kernel.
<p>
<li> The <a href="/Articles/648292/">control group writeback patches</a>
     have been merged.  This work allows for better control of data
     writeback within control groups, fixing an area that has not worked
     well for a long time.
<p>
<li> The device mapper's <tt>dm-cache</tt> module has gained support for
     stochastic multi-queue caching.  See <a
     href="http://git.kernel.org/linus/66a636356647a9be8885c2ce2948de126577698a">the
     commit message</a> for details.
<p>
<li> The thermal control subsystem has a new power-allocator governor,
     designed to divide power among heat sources while keeping the overall
     temperature of the system within bounds.  See <a
     href="/Articles/649777/"><tt>Documentation/thermal/power_allocator.txt</tt></a>
     for information on how it works.
<p>
<li> The XFS filesystem has gained the ability to directly access
     persistent-memory devices via the <a href="/Articles/610174/">DAX</a>
     interface. 
<p>
<li> The CIFS filesystem can now handle (in an experimental mode) version
     3.1.1 of the SMB protocol.
<p>     
<li> New hardware support includes:
     <p>
     <ul>
     <li> <b>Systems and processors</b>:
     	  Socionext UniPhier SoCs.
     <p>
     <li> <b>Audio</b>:
     	  Texas Instruments TAS5711/TAS5717/TAS5719 power amplifiers,
	  ZTE zx296702 I2S digital audio interfaces, and
	  Mediatek AFE PCM controllers.
     <p>
     <li> <b>Block</b>:
     	  Broadcom STB AHCI SATA controllers and
	  CEVA AHCI SATA controllers.
     <p>
     <li> <b>Graphics</b>:
          Samsung Exynos SoC mobile image compressors.
     	  Support has been merged for new AMD GPUs; it currently supports
     	  AMD "Tonga," "Iceland," and "Carrizo" systems.  The driver is not
     	  small, clocking in at well over 400,000 lines of code.
     	  There is also a new "virtio-gpu" driver that implements a
	  kernel-mode-setting virtual GPU for use within virtual machines. 
<p>
     <li> <b>I2C</b>:
	  APM X-Gene SoC SLIMpro I2C controllers,
	  MediaTek I2C adapters, and
	  Broadcom Settop I2C controllers.
     <p>
     <li> <b>IIO</b>:
	  Sensortek STK3310 ambient-light and proximity sensors,
	  Sensortek STK8312 and STK8BA50 3-axis accelerometers,
	  Bosh BMC150 magnetometers,
	  MEMSIC MMC35240 3-axis magnetic sensors,
	  ROHM BH1750 ambient light sensors,
	  ACPI ambient light sensors,
	  Mitsubishi M62332 digital-to-analog converters, and
	  Marvell Berlin2 analog-to-digital converters.
     <p>
     <li> <b>Media</b>:
     	  DataTranslation DT3155 frame grabbers (staging graduation),
	  Conexant CX24120-based tuners,
	  Cisco Cobalt video cards, and
	  STMicroelectronics BDISP 2D blitters.
     <p>
     <li> <b>Miscellaneous</b>:
     	  APM X-Gene SoC error-detection and correction units,
	  TI DRV2665 haptic controllers,
	  Dialog DA9063 power buttons,
	  Broadcom BCM2835 mailboxes,
	  Mediatek MT6397 realtime clocks,
	  Cortina Gemini SoC realtime clocks,
	  NVIDIA Tegra124 external memory controllers,
	  ARM CCI500 performance-monitoring units,
	  Qualcomm power-management units,
	  Allwinnner SoC SRAM controllers,
	  CoreSight Embedded Trace Macrocell 4.x tracer modules,
	  Unisys visorbus devices, and
	  Himax HX8357D LCD controllers.
     <p>
     <li> <b>Networking</b>:
     	  Cavium ThunderX network controllers,
	  Mellanox Technologies ConnectX-4 interfaces,
	  ATUSB transceivers,
	  Texas Instruments DP83867 Gigabit PHYs,
	  Mediatek MT7601U-based wireless USB dongles,
	  Cavium LiquidIO Intelligent Server adapters,
	  Renesas Electronics Ethernet AVB controllers,
	  EZchip Ethernet interfaces,
	  Atmel WILC1000 wireless interfaces, and
	  Unisys visornic interfaces.
     <p>
     <li> <b>Pin control</b>:
     	  NXP LPC18xx/43xx system control units,
	  Freescale IMX7D pin controllers,
	  IMG Pistachio SoC pin controllers,
	  Mediatek MT6397 pin controllers,
	  CSR SiRFatlas7 pinmux controllers,
	  Allwinner a33 SoC pin controllers,
	  Qualcomm 8660 pin controllers, and
	  Renesas R8A7794 SoC pin controllers.
     <p>
     <li> <b>Thermal</b>:
	  Intel Quark digital temperature sensors,
	  Qualcomm SPMI PMIC temperature alarms, and
	  Hisilicon thermal sensors.
     <p>
     <li> <b>TTY</b>:
	  UniPhier on-chip UARTs,
	  NXP LPC18xx/43xx serial ports, and
	  STMicroelectronics STM32 serial ports.
     <p>
     <li> <b>USB</b>:
     	  TI TUSB1210 ULPI PHY modules,
	  Broadcom STB SATA PHYs,
	  Marvell USB 2.0 28nm PHYs,
	  Marvell USB HSIC 28nm PHYs, and
	  IMG Pistachio USB2.0 PHYs.
     </ul>
</ul>
<p>
Changes visible to kernel developers include:
<p>
<ul>

<li> The networking subsystem's "page fragment" allocator has been moved
     into the memory-management subsystem.  Page fragments are arbitrarily
     sized chunks of memory, allocated for short periods of time.  They are
     allocated and freed with:
<p>
<pre>
    void *__alloc_page_frag(struct page_frag_cache *nc, unsigned int fragsz, 
                            gfp_t gfp_mask);
    void __free_page_frag(void *addr);
</pre>
<p>

<li> The kernel self-tests subsystem has gained tests for the futex and
     secure computing ("seccomp") subsystems.
<p>
<li> There is a new kernel subsystem called "libnvdimm," which provides
     various types of access to non-volatile memory (NVM) arrays.  At the lowest
     level, it is able to enumerate arrays found on the system and present
     them as devices to the rest of the system.  There are some add-on
     layers as well:
     <p>
     <ul>

     <li> Some new functions have been introduced for the safe writing of
     	  data to NVM devices: <tt>memremap_pmem()</tt>,
     	  <tt>memcpy_to_pmem()</tt>, and <tt>wmb_pmem()</tt>.  Their
     	  purpose is to ensure that data has actually been written to the
     	  device and is not lurking in a processor or bus cache somewhere —
     	  that it's actually persistent, in other words.
     <p>
     <li> "Regions" are ranges of NVM that are separated out into separate
     	  virtual devices; they may span more than one physical device.
     <p>
     <li> The "BLK" driver provides a mode of access where only a small
     	  "window" into an NVM device is mapped into the kernel's address
     	  space at any given time.  The primary purpose for this mode
     	  appears to be to minimize the chances of persistent-memory
     	  corruption via writes to random pointers.
     <p>
     <li> The "BTT" (block translation table) module adds an indirection
     	  layer to provide for atomic, sector-sized access to NVM arrays.
     	  The idea is to prevent the creation of corrupted filesystem
     	  blocks should the system go down in the middle of a block-write
     	  operation. 
     </ul>

<p>
     See <a
     href="/Articles/649840/"><tt>Documentation/nvdimm/nvdimm.txt</tt></a>
     for lots of details.

</ul>
<p>
By the usual schedule, the merge window should stay open until
July&nbsp;5.  Check back next week for a summary of the final commits
merged for this development cycle.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Releases-4.2">Releases/4.2</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/649652/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2015, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
