        <!DOCTYPE html>
        <html lang="en">
        <head><title>The 2006 Linux File Systems Workshop [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/190222/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/189547/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/190222/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>The 2006 Linux File Systems Workshop</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Did you know...?</b>
<p>
LWN.net is a subscriber-supported publication; we rely on subscribers
       to keep the entire operation going.  Please help out by <a
       href="/Promo/nst-nag4/subscribe">buying a subscription</a> and keeping LWN on the
       net.
</blockquote>
<div class="GAByline">
           <p>July 5, 2006</p>
           <p>This article was contributed by Valerie Aurora</p>
           </div>
The Linux file systems community met in Portland in June 2006 to
discuss the next 5 years of file system development in Linux.
Organized by <a href="http://www.nmt.edu/~val">Val Henson</a>, Zach
Brown, and Arjan van de Ven, and sponsored by <a
href="http://www.intel.com/software/opensource">Intel</a>, <a
href="http://code.google.com/">Google</a>, <a
href="http://oss.oracle.com">Oracle</a>, the <a
href="http://www.nmt.edu/~val/fs_workshop/">Linux File Systems
Workshop</a> brought together thirteen Linux file systems developers
and experts to share data and brainstorm for three days.  Our goal was
to discuss the direction of Linux file systems development during the
next 5 years, with a focus on disruptive technologies rather than
incremental improvements.  Our goal was not to design one new file
system to rule them all, but to come up with several useful new file
system architecture ideas (which may or may not reuse existing file
system code).  To stay focused, we explicitly ruled out discussion of
the design of distributed or clustered file systems, with the
exception of how they impact local file system design.  We came out of
the workshop with broad agreement on the problems facing Linux file
systems, several exciting file system architecture ideas, and a
commitment to working together on the next generation of Linux file
systems.
<p>

<h3>The Problem</h3>

Why do we need a Linux file systems workshop, when all seems well in
Linux file systems land?  Disks purr gently along, larger and fatter
than ever before, but still essentially the same.  I/O errors are an
endangered species, more rumor than fact, and easily corrected with a
simple fsck.  The "df" command returns a comforting 50% free on most
of your file systems.  You chuckle gently as you read old file system
man pages with directions for tuning inode/block ratios.  Sure, that
32-bit file system size limit is looming somewhere over the horizon,
but a quick patch to change the size of your block pointers is all you
need and you'll be back in business again.  After all, file systems
are a solved problem, right?  Right?
<p>

If computer hardware never changed, we kernel developers would have
nothing better to do than argue about the optimal scheduling algorithm
and flame each others' coding style.  Unfortunately, hardware has this
terrible habit of changing frequently, drastically, and worst of all,
exponentially.  File systems are especially vulnerable to changes in
hardware because of their long-lived nature.  Much of operating
systems software can be changed at will given a simple system reboot.
But file systems - and their on-disk data layouts - live on and on.
<p>

What has changed in hardware that affects file systems?  Let's start
with some simple, unavoidable facts about the way disks are evolving.
Everyone knows that disk capacity is growing exponentially, doubling
every 9-18 months.  But what about disk bandwidth and seek time?  At
the last <a href="http://www.snwusa.com/">Storage Networking World
conference</a>, Seagate presented some details of their hard disk
road map for the next 7 years (see page 16 of <a
href="http://www.snwusa.com/documents/presentations-s06/MarkKryder.pdf">the
slides [PDF]</a>).  Their predictions for 3.5 inch hard disks are summarized
in the following table.
<p>

<blockquote>
<table cellspacing=3>
<tr><th>Parameter</th><th>2006</th><th>2009</th><th>2013</th><th>Improvement</th></tr>
<tr class="Odd"><td>Capacity (GB)</td><td align="right">500</td><td align="right">2000</td><td align="right">8000</td><td align="right">16x</td></tr>
<tr class="Even"><td>Bandwidth (Mb/s)</td><td align="right">1000</td><td align="right">2000</td><td align="right">5000</td><td align="right">5x</td></tr>
<tr class="Odd"><td>Read seek time (ms)</td><td align="right">8</td><td align="right">7.2</td><td align="right">6.5</td><td align="right">1.2x</td></tr>
</table>
</blockquote>
<p>

In summary, over the next 7 years, disk capacity will increase by 16
times, while disk bandwidth will increase only 5 times, and seek time
will barely budge!  Today it takes a theoretical minimum 4,000
seconds, or about 1 hour to read an entire disk sequentially (in
reality, it's longer due to a variety of factors).  In 2013, it will
take a minimum of 12,800 seconds, or about 3.5 hours, to read an
entire disk - an increase of 3 times.  Random I/O workloads are even
worse, since seek times are nearly flat.  A workload that reads, e.g.,
10% of the disk non-sequentially will take much longer on our 8TB
2013-era disk than it did on our 500GB 2006-era disk.
<p>

Another interesting change in hardware is the rate of increase in
capacity versus the rate of reduction in I/O errors per bit.  In order
for a disk to have the same overall number of I/O errors, every time
capacity doubles, the per-bit I/O error rate must halve.  Needless to
say, this isn't happening, so I/O errors are actually more common even
though the per-bit error rate has dropped.
<p>

These are only a few of the changes in disk hardware that will occur
over the next decade.  What do these changes mean for file systems?
First, fsck will take a lot longer in absolute terms, because disk
capacity is larger, but disk bandwidth is relatively smaller, and seek
time is relatively much larger.  Fsck on multi-terabyte file systems
today can easily take 2 days, and in the future it will take even
longer!  Second, the increasing number of I/O errors means that fsck
is going to happen a lot more often - and journaling won't help.
Existing file systems simply weren't designed with this kind of I/O
error frequency in mind.
<p>

These problems aren't theoretical - they are already affecting systems
that you care about.  Recently, the main server for Linux kernel
source, kernel.org, suffered file system corruption from a failure at
the RAID level.  It took over a week for fsck to repair the (ext3)
file system, when it would have taken far less time to restore from
backup.
<p>


<h3>The workshop</h3>
<p>
Now that the stage is set, we'll move on to what happened at the 2006
Workshop.  The coverage has been split into the following pages:
<p>
<ul>

<li> <a href="/Articles/190223/">Day 1</a>, devoted mostly to understand
     the current state of the art: file system repair, disk errors, lessons
     learned from existing file systems, and major filesystem
     architectures.
<p>
<li> <a href="/Articles/190224/">Days 2 and 3</a>, concerned with the way
     forward: interesting ideas, near-term needs, and development plans.
</ul><br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#File_Systems_Workshop-2006">File Systems Workshop/2006</a></td></tr>
            <tr><td><a href="/Archives/GuestIndex/">GuestArticles</a></td><td><a href="/Archives/GuestIndex/#Aurora_Henson_Valerie">Aurora (Henson), Valerie</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/190222/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor190245"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2006 Linux File Systems Workshop</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 5, 2006 23:33 UTC (Wed)
                               by <b>jonabbey</b> (guest, #2736)
                              [<a href="/Articles/190245/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      Wonderful article.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/190245/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor190247"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2006 Linux File Systems Workshop</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 6, 2006 0:00 UTC (Thu)
                               by <b>DYN_DaTa</b> (guest, #34072)
                              [<a href="/Articles/190247/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Yes, a nice one :).<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/190247/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor190248"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2006 Linux File Systems Workshop</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 6, 2006 0:11 UTC (Thu)
                               by <b>cventers</b> (guest, #31465)
                              [<a href="/Articles/190248/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      Agreed! Now if we can just turn all the necessary gears to get reiser4 <br>
merged :)<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/190248/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor190264"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">File Systems Workshop Attendees</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 6, 2006 5:43 UTC (Thu)
                               by <b>Felix.Braun</b> (guest, #3032)
                              [<a href="/Articles/190264/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      I was kind of wondering, why Mr Reiser didn't attend. I have the impression he is quite opinionated when it comes to File System development. Could anybody comment?<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/190264/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor190399"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">File Systems Workshop Attendees</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 6, 2006 21:02 UTC (Thu)
                               by <b>khim</b> (subscriber, #9252)
                              [<a href="/Articles/190399/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <p><i>He is quite opinionated when it comes to File System development.</i></p>

<p>That's the reason. Mr Reiser is bright guy and he understands filesystems like noone else - but he is hard to budge. Quite often he's right and everyone else is wrong - but not always. And it takes herculean effort (typically month or so) to convince him when he's wrong. This means his attendance is mostly useless: better to read his papers - and agree or disagree.</p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/190399/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor190286"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2006 Linux File Systems Workshop</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 6, 2006 9:57 UTC (Thu)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/190286/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      Does reiser4 even try to solve any of the nasty problems Val mentions (the fsck crunch, the need for internal integrity checks, et al)?<br>
<p>
As far as I can tell it doesn't. It used to have nice support for small files, but that got turned off because it impacted benchmarks and I don't know if it was ever turned on again.<br>
<p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/190286/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor190448"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">reiser4</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 7, 2006 1:48 UTC (Fri)
                               by <b>xoddam</b> (guest, #2322)
                              [<a href="/Articles/190448/">Link</a>] 
      </p>
      
      </div>
      </summary>
      One thing mentioned in the article which reiser4 does implement (though <br>
Val doesn't include it in her list of examples) is copy-on-write atomic <br>
storage hierarchy updates -- depending on settings, changing an inode can <br>
result in allocation of new copies of the block containing the inode and, <br>
recursively, every parent block which references the change, right up to <br>
the master block.  The old versions are only freed once the root has been <br>
'committed' to its canonical location. <br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/190448/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor190250"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2006 Linux File Systems Workshop</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 6, 2006 1:34 UTC (Thu)
                               by <b>mattdm</b> (subscriber, #18)
                              [<a href="/Articles/190250/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Val, thanks for another excellent LWN article. Your contributions make me even more thankful for our subscription.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/190250/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor190253"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2006 Linux File Systems Workshop</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 6, 2006 2:51 UTC (Thu)
                               by <b>nivola</b> (guest, #5662)
                              [<a href="/Articles/190253/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      Excellent article, a perfect example of why I subscribe to LWN. Free Software is fortunate in having so many technically capable people working on the code, but those that combine technical ability with a talent for written expression are more rare. From this and her other recent articles it seems Val has joined Greg K-H and our esteemed editor in that list.
      
          <div class="CommentReplyButton">
            <form action="/Articles/190253/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor190685"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2006 Linux File Systems Workshop</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 10, 2006 0:25 UTC (Mon)
                               by <b>Lovechild</b> (guest, #3592)
                              [<a href="/Articles/190685/">Link</a>] 
      </p>
      
      </div>
      </summary>
      I completely agree, I'm a generally poor guy but I can readily afford the small monthly fee for LWN as it's more than worth it in terms of quality of information. It always brightens my thursday to open up LWN as the first thing and read the kernel section.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/190685/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor190255"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2006 Linux File Systems Workshop</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 6, 2006 3:43 UTC (Thu)
                               by <b>AdHoc</b> (guest, #1115)
                              [<a href="/Articles/190255/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      Val is my new favorite LWN contributor (don't worry Jon, I still love ya, man). I'm trying to narrow things down for my master's thesis and she's given me all kinds of directions for further research in specific areas. Also, very good writer, her articles have been easy to read without being shallow.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/190255/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor190295"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2006 Linux File Systems Workshop</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 6, 2006 11:13 UTC (Thu)
                               by <b>wingo</b> (guest, #26929)
                              [<a href="/Articles/190295/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Agreed! I just dropped into her web site and lost a couple hours. Wonderful stuff.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/190295/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor190256"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2006 Linux File Systems Workshop</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 6, 2006 3:44 UTC (Thu)
                               by <b>csamuel</b> (<b>&#x272D; supporter &#x272D;</b>, #2624)
                              [<a href="/Articles/190256/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Interesting set of slides from Seagate, my favourite is slide 11 - "What 
if automobiles had improved as much?". :-)
      
          <div class="CommentReplyButton">
            <form action="/Articles/190256/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor190263"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2006 Linux File Systems Workshop</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 6, 2006 5:44 UTC (Thu)
                               by <b>Los__D</b> (guest, #15263)
                              [<a href="/Articles/190263/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <i><p>"Another interesting change in hardware is the rate of increase in capacity versus the rate of reduction in I/O errors per bit. In order for a disk to have the same overall number of I/O errors, every time capacity doubles, the per-bit I/O error rate must halve. Needless to say, this isn't happening, so I/O errors are actually more common even though the per-bit error rate has dropped."</p></i>
<p>I don't understand how these are connected... Isn't the I/O error an artifact of reading or writing, and not a defect in the hardware? If it is, then it hardly matters, as you only care about I/O errors per second, or per bit read/written, not about I/O errors per bit of the total disksize.</p>
<p>Or maybe I misunderstood something?</p>
<p>Dennis</p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/190263/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor190269"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2006 Linux File Systems Workshop</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 6, 2006 7:19 UTC (Thu)
                               by <b>arjan</b> (subscriber, #36785)
                              [<a href="/Articles/190269/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      You can express the error rate as a probability like this:<br>
<p>
what is the probability that I can read this sector X days in the future<br>
<p>
That number seems to be more or less constant (compared to the capacity increase), but with the number of sectors increasing the<br>
<p>
what is the probability that I get an IO error in ANY sector in X days<br>
<p>
goes up....<br>
<p>
<p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/190269/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor190619"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Disk error rates</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 8, 2006 16:27 UTC (Sat)
                               by <b>giraffedata</b> (guest, #1954)
                              [<a href="/Articles/190619/">Link</a>] 
      </p>
      
      </div>
      </summary>
      The article failed to specify completely the denominators in the error rates mentioned.
<p>
The article means to say that the error rate per bit read has gone down, but the error rate per disk per day has gone up.  And with the implicit assumption that people have one filesystem per disk and use all the space, then the error rate per filesystem per day has gone up.  It obviously assumes a system that, as it keeps more data, accesses more data too.  
<p>
Oh, and an error is an instance of trying to read back a particular piece of data and not being able to.  It usually means permanent data loss.
<p>
The reason the article brings it up is that if the error rate per filesystem per day goes up, so does the FSCK rate per filesystem per day, and with the cost per FSCK also going up proportional to the filesystem size, the FSCK cost per day goes up.

      
          <div class="CommentReplyButton">
            <form action="/Articles/190619/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor204989"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2006 Linux File Systems Workshop</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 19, 2006 0:02 UTC (Thu)
                               by <b>eatsapizza</b> (guest, #41199)
                              [<a href="/Articles/204989/">Link</a>] 
      </p>
      
      </div>
      </summary>
      How do folks resolve the difference between MTBF for a disk and the<br>
bit error rates?<br>
<p>
I've read of MTBF's of about 1MHours, and bit error rates of about <br>
10E-15 (so the Mean Bits between Failures is 1E15).<br>
<p>
The reliability of a drive is R=exp(-t/MTBF), so the reliability<br>
of a drive for a year is about...<br>
R=exp(-8760/1E6) = about 99%<br>
<p>
But if you're reading from your disk...... even say only 1MB/s ..<br>
about 1 to 3% of its possible read rate,<br>
you would read, in a year.. 2.523E14 bits,<br>
and then:<br>
  R= exp(-2.523E14/1E15) = 77.7%  .. a very different result, and<br>
that's assuming the drive isn't really that busy.<br>
<p>
I know there is RAID 0+1 and RAID5, and RAID5 (6+2), all of which<br>
make things better, but how can the single disk result be so<br>
much different?<br>
<p>
eatsapizza<br>
<p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/204989/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor190281"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2006 Linux File Systems Workshop</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 6, 2006 9:32 UTC (Thu)
                               by <b>llloic</b> (guest, #5331)
                              [<a href="/Articles/190281/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      "Fsck on multi-terabyte file systems today can easily take 2 days, and in the future it will take even longer!"<br>
<p>
This is a bit imprecise, fsck of a given size file systems will be faster in the future that it is today, because the disks will have better bandwidth and smaller seek time.<br>
<p>
But I agree that fsck will be generally longer because the average file system size will be greater and the bandwidth and seek time won't scale accordingly.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/190281/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor190288"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2006 Linux File Systems Workshop</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 6, 2006 10:21 UTC (Thu)
                               by <b>arjan</b> (subscriber, #36785)
                              [<a href="/Articles/190288/">Link</a>] 
      </p>
      
      </div>
      </summary>
      actually... seek times are not really shrinking; they haven't for the last 5 years and if you look at the data in the article and the seagate pdf.. that'll not change really until 2013 at the minimum.<br>
<p>
<p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/190288/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor190306"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2006 Linux File Systems Workshop</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 6, 2006 13:08 UTC (Thu)
                               by <b>hmh</b> (subscriber, #3838)
                              [<a href="/Articles/190306/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      This is really an wonderful article, and I can't wait to see what effect the workshop will have on ext4.<br>
<p>
But while we wait for a production-stable fsck-friendly filesystem, we could teach MD RAID (and dm-raid for that matter) how to background scrub arrays.  It is much faster to write, test and deploy such code than a new filesystem :)<br>
<p>
Those without high-end RAID adapters and SANs (that do this by themselves) will welcome the feature, I think. I know I would...<br>
<p>
It won't get logical errors, or save you any fsck wait.  But it might avoid fscks in the first place, as it helps a great deal with IO errors due to bitrot.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/190306/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor190311"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2006 Linux File Systems Workshop</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 6, 2006 14:06 UTC (Thu)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/190311/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      md-raid can already do this.<br>
<p>
Just stick in cron something like<br>
<p>
2 5 15 * * echo check &gt; /sys/block/md-$blah/md/sync_action<br>
<p>
to check parity on array md-${blah} (which of course reads every block on every disk in the array).<br>
<p>
(OK, so you might want something a bit more elaborate to prevent checking if sync_action for the array is not 'idle' so as not to interrupt a real resync.)<br>
<p>
This will proceed in the background and respect other accesses to the block device by slowing down, just like md resyncs always have.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/190311/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor190316"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2006 Linux File Systems Workshop</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 6, 2006 14:29 UTC (Thu)
                               by <b>hmh</b> (subscriber, #3838)
                              [<a href="/Articles/190316/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      Thanks! That does half the job already, and will at least find errors that have already happened and attempt to fix them.<br>
<p>
It would be nice to have a "scrub" action that actually writes the entire array (all member devices, all sectors) to refresh aged sectors, though.  "check" won't help there, and forcing a resync on every member device in turn is a very awkward (not to mention suboptimal) way to do it.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/190316/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor190322"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2006 Linux File Systems Workshop</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 6, 2006 15:23 UTC (Thu)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/190322/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      Forcing a resync won't rewrite everything, in any case, only the parity stripes: the non-parity stripes will only be read (unless you hit a write error in the parity stripe, of course).<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/190322/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor190341"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2006 Linux File Systems Workshop</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 6, 2006 15:54 UTC (Thu)
                               by <b>hmh</b> (subscriber, #3838)
                              [<a href="/Articles/190341/">Link</a>] 
      </p>
      
      </div>
      </summary>
      You have to set the member device to be "refreshed" to faulty, hot-remove and hot-add it back.  This is, of course, dangerous depending on your array configuration.<br>
<p>
As I said, it is very awkward, and thus a scrub function would be welcome.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/190341/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor190474"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2006 Linux File Systems Workshop</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 7, 2006 9:26 UTC (Fri)
                               by <b>ekj</b> (guest, #1524)
                              [<a href="/Articles/190474/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      First, the author is stated as "Valerie Henson", whereas the organizer of the workshop is (among others) "Val Henson". I suppose the two are one and the same ? (allthough then it's a bit strange talking about oneself in the rhird person)<p>

Second, the observation that i/o to discs aren't keeping up with the size of the discs is an obvious one. And that will certainly have effects on the design of filesystems.<p>

I do have one question about the fsck-times.<p>

I was under the impression that fsck "only" checks and corrects filesystem metadata, without touching the the actual contents of the files. If that's so, wouldn't it be reasonable to expect fsck-performance to scale according to the number of elements in the filesystem instead of according to the size of the filesystem ?<p>

I'm thinking, the number of elements is growing much more slowly than the size of the filesystem, since the average size of an element is almost certainly growing.<p>

Even for the same sort of data, 5 years ago a picture from my digicam was maybe 300K (3 mpix, jpeg) today it's still one file, but more like 10MB. (8mpix, raw) The same is true for that kernel-tarball, it's still one file, but it's a lot larger than it used to be.<p>

But stronger than this effect is the effect caused by new types of files being storable (and thus stored) on larger discs. Noone stored a small collection of 10 handy DVD-isos in their homedirectory ten years ago. Today its trivial to do so, and basically everyone I know has one or more complete isos stored as a single file.<p>

When I first started using linux, 1.2.13 kernel, P-75 even storing the single cdrom it was delivered on (Slackware, still divided up in "floppy sets") on hard-disc was unreasonable, as that would command a large fraction of the disc.<p>

In short; the capacity of the discs will (as projected) go up by a factor of 16 or so until 2013. Isn't it reasonable to expect that the number of files stored will go up by a much smaller factor ? 
      
          <div class="CommentReplyButton">
            <form action="/Articles/190474/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor190533"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2006 Linux File Systems Workshop</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 7, 2006 17:07 UTC (Fri)
                               by <b>jzbiciak</b> (guest, #5246)
                              [<a href="/Articles/190533/">Link</a>] 
      </p>
      
      </div>
      </summary>
      The file size histogram has always had a peak near very small files, with a long tail stretching to the right.  Sure, the peak is shifting to the right, but it's still well below the current block size of 4K.<br>
<p>
And as for fsck time... Some data structures, such as block bitmaps and inode tables are sized in proportion to the total filesystem capacity, not the number of files you currently have.  So some component of fsck time is proportional to capacity, and some is proportional to space-in-use.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/190533/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor190559"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2006 Linux File Systems Workshop</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 7, 2006 19:44 UTC (Fri)
                               by <b>oak</b> (guest, #2786)
                              [<a href="/Articles/190559/">Link</a>] 
      </p>
      
      </div>
      </summary>
      I think that the largest number of utilized Linux file systems are still  <br>
going to keep in the gigabytes range for many years to come.  This is  <br>
because most of the Linux systems will be embedded ones and for mobile <br>
embedded devices storage device without moving parts is preferable.  <br>
 <br>
Currently largest Flash sizes are only few GBs, and they are so expensive <br>
that most devices use much smaller sized Flash chips.  <br>
 <br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/190559/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor190633"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Backups</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 8, 2006 22:20 UTC (Sat)
                               by <b>addw</b> (guest, #1771)
                              [<a href="/Articles/190633/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      One extra problem to put into the melting pot is "how do we back file systems up" ? The technology for this has not really advanced in decades, you basically choose: tar, cpio or dump (and I don't like dump 'cos the tape/... format is file system dependent).<br>
<p>
It is nice to:<br>
<p>
1) get a consistent file system backup<br>
2) do full &amp; incremental backups<br>
3) backup extra metadata (dump does, the others don't)<br>
4) backup sparse files w/out haveing to read zillions of NUL bytes<br>
<p>
The old DEC AdvFS (on their OSF/1 boxes) had a nice feature where you could get a snapshot of the file system, via a sort of special mount, that allowed you to do (1).<br>
<p>
The file system developers should not view this as being someone else's problem -- they can help.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/190633/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor190647"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Backups</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 9, 2006 4:48 UTC (Sun)
                               by <b>thedevil</b> (guest, #32913)
                              [<a href="/Articles/190647/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      On desktops, I think most people nowadays make a full copy of the file system on another disk (maybe a CD).  I use an external USB drive.  Together with the wonderful rdiff-backup program which stores unchanged files as links it's quite an economical solution.  For a server where you want to backup an expensive terabyte drive, that's quite a different story ...<br>
<p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/190647/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor190906"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Backups</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 11, 2006 10:11 UTC (Tue)
                               by <b>alspnost</b> (guest, #2763)
                              [<a href="/Articles/190906/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Glad you mentioned <b>rdiff-backup</b> - an excellent tool that I couldn't live without now.  I use that to backup crucial parts of my filesystems to an external USB drive.

Hopefully it'll still work in 10 years when I have a 16TB array in my machine and a 5TB external drive :-)
      
          <div class="CommentReplyButton">
            <form action="/Articles/190906/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor190660"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Backups</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 9, 2006 13:53 UTC (Sun)
                               by <b>khim</b> (subscriber, #9252)
                              [<a href="/Articles/190660/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <p><i>The file system developers should not view this as being someone else's problem -- they can help.</i></p>

<p>Hmm... The only thing where filesystem can help is (4) - and it'll make spare files waaay too special IMNSO (today filesystem can add or remove holes to file at will). (1) is easily solveable <a href="http://www.tldp.org/HOWTO/LVM-HOWTO/snapshotintro.html">elsewhere</a>, (2) and (3) don't need any changes in filesystems...</p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/190660/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor198405"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Backups</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 5, 2006 22:09 UTC (Tue)
                               by <b>anton</b> (subscriber, #25547)
                              [<a href="/Articles/198405/">Link</a>] 
      </p>
      
      </div>
      </summary>
      &lt;blockquote&gt;[snapshotting] is easily solvable elsewhere&lt;/blockquote&gt;<br>
<p>
To the best of my knowledge, even if you do this at the LVM level, you<br>
need file system support, in order to get a snapshot of a consistent<br>
file system.  Also, snapshotting at the file system will often be more<br>
efficient (e.g., no need to back up blocks for new files).  So I<br>
believe that the file system is a better place for snapshotting than<br>
LVM.<br>
<p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/198405/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor190674"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Backups</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 9, 2006 19:03 UTC (Sun)
                               by <b>hein.zelle</b> (guest, #33324)
                              [<a href="/Articles/190674/">Link</a>] 
      </p>
      
      </div>
      </summary>
      I'll heartily agree that making sufficient backups of large filesystems can become a serious problem, but perhaps you should also consider what kind of data will fill up a drive that is so large it actually becomes a problem.<br>
<p>
If a disk becomes so large that write times (of e.g. the entire disk) are too slow to do a regular backup to a similar disk, then I think you can assume that the data is not very volatile either: writing the changes would take too much time as well.  I think in many cases, huge databases could theoretically be split up in a small volatile part, and a large not-so-volatile part.  This makes it possible to backup the non-volatile part at low frequencies, while the volatile part gets backed up more often.<br>
<p>
We do something like this at work, where we have several terabytes (I suppose a relatively small dataset compared to others) of which about 500gb  changes often, and the rest is relatively or completely static.  We use external discs (usb) to backup the static or slowly changing part about once a month.  The volatile part is backed up more often, in this case also using external usb disks but with incremental and full backups.<br>
<p>
In our case we've chosen a raid5 main storage system with a hot-spare drive to provide some reliability by itself, apart from the backups.  We have not had to fall back on the backups yet, but everything appears to work well and the backup times are not bothersome at all.<br>
<p>
I suppose the problem will indeed get worse with the increasing drive sizes, and alternatives like tape may become impossible at some point.  However, using a spare drive (in usb enclosure or similar) should remain a viable backup option, I think.  If not, then I would seriously wonder if the owner of the disk shouldn't be considering a (or perhaps multiple) more expensive raid system(s) with redundancy to deal with the problem.  And there will obviously be exceptions where people actually do store lots and lots of volatile information that must be backed up, but I highly doubt that those exceptions would not consider the more expensive redundant options anyway.<br>
<p>
<p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/190674/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor192637"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Why not ZFS?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 24, 2006 22:37 UTC (Mon)
                               by <b>wos</b> (subscriber, #39371)
                              [<a href="/Articles/192637/">Link</a>] 
      </p>
      
      </div>
      </summary>
      As an old Multics hand, I looked at this and saw problems--and<br>
solutions--similar to what we did with NSS in 1976, and later<br>
with the volume scavenger.  Of course, disks were about <br>
1/10,000 the size we're talking about, but the problem (of<br>
fsck taking too long) was the same.<br>
<p>
However, we've learned a lot about filesystems since then, much<br>
of which seems to be embodied in ZFS: snapshots, live scrubbing, <br>
built-in integrity protection, etc. I haven't used ZFS, or<br>
studied it in any detail, but it sure looks like it's trying to<br>
solve these problems in a much more comprehensive way than just<br>
carving up a gigantic ext3 into chunks.<br>
<p>
<a rel="nofollow" href="http://www.opensolaris.org/os/community/zfs/">http://www.opensolaris.org/os/community/zfs/</a><br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/192637/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2006, Eklektix, Inc.<BR>
            
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
