        <!DOCTYPE html>
        <html lang="en">
        <head><title>Notes from Linaro Connect [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/717221/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/716601/">Return to the Front page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/717221/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>Notes from Linaro Connect</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Did you know...?</b>
<p>
LWN.net is a subscriber-supported publication; we rely on subscribers
       to keep the entire operation going.  Please help out by <a
       href="/Promo/nst-nag4/subscribe">buying a subscription</a> and keeping LWN on the
       net.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>March 15, 2017</br>
           <hr>
<a href="/Archives/ConferenceByYear/#2017-Linaro_Connect">Linaro Connect</a>
</div>
The first of two 2017 Linaro Connect events was held March&nbsp;6
to&nbsp;10 in Budapest, Hungary; your editor had the privilege of
attending.  Reports from a number of the sessions there have appeared in
separate articles.  There were a number of discussions at the event that,
while not being enough to fill an article on their own, were nevertheless
worthy of some attention.
<p>
Connect is an interesting event, in that it is a combination of an
architecture-specific kernel developers' gathering and a members-only
meeting session.  Not being a member, your editor only participated in the
former aspect.  Sessions at Connect are usually short — 25&nbsp;minutes —
and focused on a specific topic; they also routinely run over their
allotted time.  There is an emphasis on discussion, especially in the
relatively unstructured "hack sessions" that occupy much of the schedule.
Many of the sessions are focused on training: how to upstream code, for
example, or kernel debugging stories in Mandarin (<a
href="http://connect.linaro.org/resource/bud17/bud17-tr07/">video</a>).
<p>
A lack of Mandarin language skills will prevent coverage of that last
session, but there were others that were somewhat more comprehensible to
the Mandarin-impaired.
<p>
<h4>Kernelci.org</h4>
<p>
Mark Brown, Tyler Baker, and Matt Hart ran a session about <a
href="https://kernelci.org/">kernelci.org</a>, arguably one of the
community's most underappreciated testing resources.  This operation, run
by Linaro and BayLibre, performs automatic build-and-boot testing for the
kernel; its infrastructure is hosted by Linaro and Collabora.  Tests are
run on the ARM, ARM64, MIPS, and x86 architectures.  For 
every commit that is made, tests are run with every in-tree
<tt>defconfig</tt> file — over 260 builds for every commit.  The resulting
kernels are booted on over 100 different boards.  This operation, Brown
said, greatly increases the likelihood that kernels will build and, as a
result, the number 
of failed configurations is going down over time.  That, in turn, makes
merge windows less stressful.
<p>
As Baker explained, this testing structure is driven by the <a
href="https://www.linaro.org/initiatives/lava/">LAVA</a> tool; it serves as
a scheduler and job runner for board farms.  LAVA is <a
href="https://wiki.debian.org/LAVA">used and distributed by 
Debian</a>, he said.
<p>
LAVA is completing a big transition to the v2 release, which makes a number
of significant changes, Hart said.  Job files are now created with <a
href="http://jinja.pocoo.org/docs/2.9/">Jinja2</a> templates, an
improvement over the hand-written JSON used in&nbsp;v1.  Jobs are run
asynchronously, without polling, and <a
href="http://zeromq.org/">ZeroMQ</a> is used for communications.  <a
href="https://github.com/ivoire/ReactOBus">ReactOBus</a> is used to run
jobs from messages.  LAVA v1 tried to apply a fair amount of magic to hide
the differences between different test systems, but that proved hard to
work with.  So v2 requires more explicit configuration in this area.
<p>
The v2 system is settling in, but a permanent home for the ReactOBus daemon
is yet to be identified.  [<a
href="http://connect.linaro.org/resource/bud17/bud17-105/">Video</a>]
<p>
<h4>Load tracking</h4>
<p>
Vincent Guittot ran a session on load tracking — keeping track of how much
load each process puts on the CPU.  Accurate load tracking can help the
scheduler make better decisions about task placement in the system; it can
also be helpful when trying to minimize the system's power consumption.
The <a href="/Articles/531853/">per-entity load tracking</a> (PELT)
mechanism in the kernel is better than what came before, but it is proving
to not work as well as desired, especially when it comes to power
management.
The window-assisted load tracking (WALT) patches (described in <a
href="/Articles/706374/">this article</a>) improve the situation, but that
work has not made it into the mainline.
<p>
The complaints with PELT are that it is not responsive enough and that its
metrics are not always stable.  The tracking of small tasks can be
inaccurate, causing a mostly idle CPU to appear to be busy.  Load is not
propagated between control groups when a task is migrated which, among
other things, can cause erroneous CPU-frequency changes.  The good news is
that around 20 patches improving PELT have been merged since 4.7; they fix
the small-task tracking and load-propagation issues.  Upcoming work should
improve the handling of blocked loads and address some of the frequency
scaling issues.
<p>
A related problem is that the community has lacked realistic benchmarks to
measure the results of load-tracking changes; that is being addressed with
new tests.  There are some interesting interactions with the processor's
thermal management mechanisms, though.  When asked, Guittot said that there
has not been a lot of power-consumption testing so far; most of the work
to this point has been focused on performance.
<p>
Future work includes improving utilization tracking for realtime tasks,
which are currently not part of the load-tracking mechanism.  There are
also some practical problems on current hardware.  Realtime tasks want to
run at the maximum frequency, but a frequency change on a HiKey board takes
1.5ms.  A realtime task needing 2ms of run time will not get
maximum-frequency performance.  A more responsive load-tracking mechanism
could help the scheduler ensure that the CPU is running at the needed
speed. There is also
a focus on improving responsiveness, which comes down to ensuring that the
CPU frequency is increased quickly when the need arises.  A slow ramp-up
will lead to observable behaviors like jumpy scrolling.  Finally, there is
a desire to improve the responsiveness of the PELT system, perhaps by
introducing the windowing technique used in WALT.
[<a href="http://connect.linaro.org/resource/bud17/bud17-218/">Slides</a>]
<p>
<h4>ARM Mali drivers</h4>
<p>
Many ARM systems come equipped with the ARM Mali GPU.  In a session on the
state of the Mali drivers, John Reitan and Ketil Johnsen described some of
the work that is being done in this area.  There is a <a
href="https://github.com/ARM-software/vulkan-sdk">software development
kit</a> for the <a
href="https://en.wikipedia.org/wiki/Vulkan_(API)">Vulkan</a> graphics API
available under the BSD license.  Not all GPUs support Vulkan, though; in
particular, the HiKey board used by many ARM developers has no Vulkan
support.

Within a month or so ARM should be releasing its compute library that
allows running code on the GPU.  It may be useful for image-recognition
tasks and more.  It will show up on the <a
href="https://github.com/ARM-software/">ARM GitHub page</a> once it's
ready.
<p>
With the news items out of the way, the audience quickly moved the
discussion to the topic its members were really interested in: prospects
for open-sourcing the Mali driver code.  The answer was that ARM has no
intention of doing so, mostly out of fear of unspecified "patent issues".
The risk of patent trolls is simply too great to allow that release to
happen.  This was not, of course, the answer that the audience wanted to
hear, but nobody was particularly surprised.
<p>
Arnd Bergmann suggested that perhaps a free Vulkan driver could be
released; Vulkan is simpler than the full OpenGL API and might thus pose a
lower risk.  The speakers are not lawyers and could not respond to that
suggestion beyond agreeing that it is worth considering.  Meanwhile, there
is a possibility that free drivers for some subcomponents could be released
in the relatively near future.
<p>
A related pain point around Mali is the lack of device-tree bindings in the
kernel.  The normal rule is that bindings are only accepted for drivers
that are, themselves, in the kernel; there is no Mali driver there, thus no
bindings.  But that has led every SoC vendor to come up with its own
customized bindings.  There has been talk of loosening the rules a bit to
allow the addition of bindings for some out-of-tree drivers to reduce this
pain.
<p>
John Stultz pointed out that running the Mali drivers on mainline kernels
is often difficult, and wondered if there were any improvements expected in
that area.  Development effort on the binary-only driver tends to be
focused on kernels the customers are using, and those kernels are usually
old.  Internally, the Mali driver does usually work on the mainline, but it
can take months for the patches to get out to the rest of the world.
<p>
It's also hard for distributors who would like to make the binary-only
driver available to their users.  One recent improvement, at least, is that
the license on 
that driver has changed to allow it to be distributed.  But it is still
difficult to make a package that works on even a subset of boards.
Meanwhile, every driver release tends to break systems, and the driver
tends to break with kernel updates.  As Grant Likely pointed out, having to
keep the kernel and the user-space driver code in lockstep makes the
creation of any sort of generic distribution difficult.  It was agreed that a
better job needs to be done here.
[<a href="http://connect.linaro.org/resource/bud17/bud17-421/">Video</a>]
<p>

For those interested in other Connect sessions, the full set of videos and
slides from the "BUD17" event can be found on <a
href="http://connect.linaro.org/bud17/resources/">this page</a>.  The next
Connect will be held September&nbsp;25 to&nbsp;29 in San Francisco,
California. 
<p>
[Thanks to Linaro and the Linux Foundation for funding your editor's travel
to Connect.]<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Development_tools-Testing">Development tools/Testing</a></td></tr>
            <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Scheduler-and_power_management">Scheduler/and power management</a></td></tr>
            <tr><td><a href="/Archives/ConferenceIndex/">Conference</a></td><td><a href="/Archives/ConferenceIndex/#Linaro_Connect-2017">Linaro Connect/2017</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/717221/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor717401"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Notes from Linaro Connect</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 16, 2017 16:09 UTC (Thu)
                               by <b>broonie</b> (subscriber, #7078)
                              [<a href="/Articles/717401/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Correction on the kernelci thing: BayLibre are also putting in a lot of effort here, their employee Kevin Hilman is one of the main admins/developers.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/717401/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor717450"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Notes from Linaro Connect</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 17, 2017 8:43 UTC (Fri)
                               by <b>sjoerd</b> (subscriber, #7056)
                              [<a href="/Articles/717450/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Seems there is some confusion on who "runs" kernelci. The current central infrastructure runs on servers/hosting provided by Linaro, Collabora. The board farms are run by a quite nice selection of companies and individuals. Lots of details at <a href="https://kernelci.org/sponsors/">https://kernelci.org/sponsors/</a><br>
<p>
Most of the past/current engineering on the infrastructure code comes Tyler, Matt, Milo (Linaro) and Kevin (BayLibre), with hopefully more people joining soon as the barriers to contributions have been nicely lowered (as explained by Tyler in the talk). Definitely on the Collabora side of things we're planning to provide more support on the infrastructure side next to our current lab and server sponserings.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/717450/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor718029"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Mali: DT bindings and running on mainline</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 24, 2017 16:04 UTC (Fri)
                               by <b>tpetazzoni</b> (subscriber, #53127)
                              [<a href="/Articles/718029/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <p><i>A related pain point around Mali is the lack of device-tree bindings in the kernel.</i></p>

<p>This is not correct. Maxime Ripard from Free Electrons has contributed Device Tree bindings for Mali, see <a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/Documentation/devicetree/bindings/gpu/arm,mali-utgard.txt">here</a>. And they are already used on several platforms, at least Allwinner and Amlogic.</p>

<p>In addition, we are also running the Mali kernel driver on top of mainline kernel in several projects. The most publicly visible one is the CHIP from Nextthing: running a close-to-mainline kernel with Mali enabled, and we have another project where we use the Mali kernel driver on a 4.8 mainline kernel.</p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/718029/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor734159"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Notes from Linaro Connect</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 19, 2017 18:27 UTC (Tue)
                               by <b>leoyan2017</b> (subscriber, #117379)
                              [<a href="/Articles/734159/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
'Many of the sessions are focused on training: how to upstream code, for example, or kernel debugging stories in Mandarin (video).'<br>
<p>
Sometimes some sessions only are in Mandarin, but for 'kernel debugging stories' session has English version by Daniel Thompson:  <a href="http://connect.linaro.org/resource/bud17/bud17-tr04/">http://connect.linaro.org/resource/bud17/bud17-tr04/</a>  :)<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/734159/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2017, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
