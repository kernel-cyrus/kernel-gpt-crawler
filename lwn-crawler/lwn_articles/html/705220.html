        <!DOCTYPE html>
        <html lang="en">
        <head><title>A discussion on stable kernel workflow issues [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/705220/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/704819/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/705220/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>A discussion on stable kernel workflow issues</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Ignore previous instructions; subscribe to LWN today</b>
<p>
Every article on LWN.net is written by humans, for humans. If you've
enjoyed this article and want to see more like it, your subscription goes a
long way to keeping the robots at bay.  We are offering <a href="https://lwn.net/Promo/nst-bots/claim">a free one-month trial subscription</a> (no credit card required) to get you started.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>November 1, 2016</br>
           <hr>
<a href="/Articles/KernelSummit2016/">2016 Kernel Summit</a>
</div>
The opening session at the 2016 Kernel Summit, led by Jiri Kosina, had to
do with the process of creating stable kernel updates.  There is, he said,
a bit of a disconnect between what the various parties involved want, and
that has led to trouble for the consumers of the stable kernel releases.
<p>
Jiri's point of view was centered on his role as a distribution kernel
maintainer.  Consumers like him want a number of things from the stable
kernel releases, including fixes for user-visible functional problems,
fixes for bugs that crash the 
system, and fixes for severe performance regressions.  What they do
<i>not</i> want are new features or minor performance improvements; the
latter have often been shown to regress performance for other workloads.
<p>
Perhaps the biggest thing in the "don't want" column, though, is something
that has caused quite a bit of trouble in the past: fixes for bugs that are
not actually present.  There have been a number of cases of bogus "fixes"
that have broken things, causing big headaches for distributors, who must
spend a lot of time figuring out what has gone wrong.  Just because a patch
applies cleanly to an older kernel does not mean that it actually belongs
there, but that distinction often seems to get lost.
<p>
Part of that, perhaps, is a result of what the <i>producers</i> of stable
kernels want: a process that scales.  Stable releases are done by a small
group of developers; they don't have a lot of time to spend on each
proposed fix.  They want to include all of the fixes that make sense, but
depend on others to tell them when fixes actually do make sense.
<p>
From his point of view as a distribution maintainer, Jiri said that one of
the biggest issues with the stable process is that it is not clear why
specific patches got into stable.  The "CC: stable" tag applied to patches
is an opt-in mechanism, and the decision is often made by people who are
neither the author of the patch nor the maintainer of the relevant
subsystem.  The review process is far too lenient; it is a passive approval
approach that lets stuff get in unless somebody goes out of their way to
block it.  Maintainers often respond to proposed stable inclusions with the

<a href="/Articles/705227/"><img class="lthumb"
src="https://static.lwn.net/images/conf/2016/ks/JiriKosina-sm.jpg" 
alt="[Jiri Kosina]" title="Jiri Kosina"></a> 

equivalent of "oh yeah, whatever" without really thinking about the
problem.  The review barrier is too low; somebody needs to be thinking
about the semantics of every stable patch.
<p>
James Bottomley noted that the typical maintainer response is to think that
they already reviewed a specific patch when they first accepted it; they
aren't sure what else they should do when a patch comes around in a stable
release.  Mark Brown added that maintainers often can't remember what a
particular ancient kernel looked like, so it is hard for them to say
whether a specific patch makes sense there or not.
<p>
Christoph Hellwig pointed out that not all stable kernels are equal.  The
current review process is reasonable for recent kernels, he said, but it
does not work as well for the long-term stable releases.  Stable kernel
maintainer Greg Kroah-Hartman asked what "good" meant in general.  There
are always going to be bugs, what is the acceptable rate when five or six
patches are being applied to a two-year-old kernel every day?
<p>
Jiri said that there is always room for improvement.  One possible way to
make things better might be to require a <tt>Fixes:</tt> tag for every
patch going into a stable kernel release.  That tag identifies the bug that
a patch is meant to fix; without it, the stable maintainers don't know if a
patch fixes a bug that is actually present in an older kernel.

An alternative might be a new tag specifically related to inclusion into a
stable kernel; it would mean "I have thought about this responsibly."  That
tag should specify the version(s) of the kernel it should be applied to.
There could also be a tag for patches that should <i>not</i> be considered
for stable releases.
<p>
Ben Herrenschmidt asked about whether the stable kernels should include
patches to make new hardware work.  Jiri responded that those patches
aren't really wanted, but he didn't care too much if they don't break
things.  Greg added that addition of new device IDs and quirks is pretty
common in the stable kernels.  Laura Abbot noted that there is often a fine
line between a "feature" and a "bug fix."  The direct rendering subsystem,
for example, often comes up with large changes to make specific hardware
features perform well; without them, things run slowly.  DRM subsystem
bug-fix patches can also be quite large.
<p>
Rafael Wysocki said that, often, a maintainer knows that things broke, but
is not sure of which change caused the problem.  Jiri responded that, in
that case, the fix should not go into the stable releases.  Ben wondered
how a problem could be fixed if the developer didn't know what caused the
problem.  Linus chimed in to note that requiring a <tt>Fixes:</tt> tag
could lead to the addition of bogus tags when the maintainer doesn't know.
Maintainers should not do that, he said, but Mark worried that it could
happen as a "hoop-jumping" exercise.
<p>
Jiri said that, one way or another, somebody has to go through the exercise
of thinking about which stable kernels a patch should be applied to.  The
result can take the form of either a <tt>Fixes:</tt> tag or a list of
relevant versions, as long as that work has been done.
<p>
Dan Williams suggested that developers should add more test cases to
demonstrate bugs and prove their fixes.  These tests could be run against
older kernels to show whether they need the fix — and whether the fix works
as expected.  Steve Rostedt said he will often add tests in response to
bugs in his code; he suggested the addition of a new tag listing a test to
run for a patch.  But Linus was against the addition of new tags,
especially for passing information to other humans.  That sort of thing
should just be explained in the commit message, he said.  If we have too
many tags, their usage will be inconsistent at best.
<p>
Linus went on to point out a specific case of things going wrong.  The
stable trees recently shipped <a
href="https://git.kernel.org/linus/1c109fabbd51863475cd12ac206bdd249aee35af">a
three-line patch</a> that made a trivial root 
exploit possible on older CPUs.  He had suggested removing the patch from
the stable series, but the stable maintainers all chose to apply a 100-line
fix instead.  That was, he said, the wrong decision.  If a stable tree
takes a patch that breaks things, the response should not be to add more
patches.  Greg said that the stable maintainers would, as a general rule,
rather have the same changes that the mainline has so that the bugs are all
the same.
<p>
Ted Ts'o said that there are a lot of device vendors out there who are not
actually using the stable releases; instead, they are cherry-picking
patches that look relevant.  If, in this case, they got the problematic
three-line patch but missed the subsequent fix, the results would be bad.
In general, he said, the group had not yet talked much about how the stable
kernels are actually being used.  Rafael said that broken patches should
simply be reverted from the stable kernels rather than fixed further; that
way, it will be clear to others where the broken patch was.  But Ben
protested that patches often come in a series; reverting just one can break
things further.
<p>
Andy Lutomirski said that the fixup patch in this case was partly his work, even
though it didn't have his name on it when it was applied.  That fix
should never 
have been applied to the stable kernels, he said; stable maintainers, in
general, should never 
apply complex changes without asking first.
<p>
James said that the failure this time around was in the review process, but
Linus replied that the patch was, in fact, "fine and correct."  The problem
is that it <a href="/Articles/705226/">depended on another change</a> that
went into the 4.6 kernel.  He 
doesn't blame that specific patch for the trouble; the bug was not obvious,
and the backport was clean.  It would have taken a "superhuman" to realize
that the patch would be problematic in 4.1 without the exception-handling
change that was applied in 4.6.  The failure was when the patch was revealed to
have broken things; at that point, it should have been reverted immediately.
Mistakes will happen and the stable kernels will not be perfect; but, he
said, those kernels are too eager to accept patches, and to accept more
rather than reverting a patch that went wrong.
<p>
As the discussion wound down, perhaps the one solid conclusion was that
problematic patches should indeed be reverted rather than fixed; that
policy was immediately applied in subsequent
stable kernel releases (<a href="/Articles/705221/">example</a>).  There
will likely be more pressure for each 
patch destined for the stable releases to carry a <tt>Fixes:</tt> tag or
some version information making it clear that the relevant bug is present.
And, hopefully, stable releases will be a little more stable in the
future.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Development_model-Stable_tree">Development model/Stable tree</a></td></tr>
            <tr><td><a href="/Archives/ConferenceIndex/">Conference</a></td><td><a href="/Archives/ConferenceIndex/#Kernel_Summit-2016">Kernel Summit/2016</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/705220/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor705258"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A discussion on stable kernel workflow issues</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 1, 2016 21:42 UTC (Tue)
                               by <b>spender</b> (guest, #23067)
                              [<a href="/Articles/705258/">Link</a>] (12 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
So now we have the answer to the "a bug" fixed in 4.4.30:<br>
<p>
"The stable trees recently shipped a three-line patch that made a trivial root exploit possible on older CPUs."<br>
<p>
This is ridiculous.<br>
<p>
-Brad<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/705258/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor705265"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A discussion on stable kernel workflow issues</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 1, 2016 22:14 UTC (Tue)
                               by <b>alavaliant</b> (subscriber, #104924)
                              [<a href="/Articles/705265/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I wonder what the 'older CPUs' types are?   The number of machines that can be exploited would differ greatly depending on if the effected cpu classes are ones older than 2 years or ones older than 10 years.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/705265/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor705267"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A discussion on stable kernel workflow issues</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 1, 2016 22:22 UTC (Tue)
                               by <b>bronson</b> (subscriber, #4806)
                              [<a href="/Articles/705267/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
And it's ridiculous that this is how the word gets out.  I'm really struggling to understand the muddled thinking and communication that have gone into the last few days of stable kernel development.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/705267/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor705307"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A discussion on stable kernel workflow issues</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 2, 2016 13:24 UTC (Wed)
                               by <b>rich0</b> (guest, #55509)
                              [<a href="/Articles/705307/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I agree that there needs to be a better way to communicate things like this.<br>
<p>
I was working on updating a system to 4.4.29, and then I heard from somebody on IRC I think that somebody had mentioned at the summit to not bother as it had some issue and 4.4.30 was going to be released shortly.<br>
<p>
When the -announce list says "upgrade your systems" and the "wait, don't upgrade your systems" is part of the Q&amp;A at some conference, there is a problem somewhere.<br>
<p>
I fully get that sometimes there is going to be a vulnerability and you can't always wait to do updates.  However, it seems like the last few weeks have had far more updates than can be explained by this.  Preventing bugs from ever making their way into mainline is one challenge, but avoiding regressions in stable seems like another.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/705307/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor705264"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A discussion on stable kernel workflow issues</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 1, 2016 22:22 UTC (Tue)
                               by <b>spender</b> (guest, #23067)
                              [<a href="/Articles/705264/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
And to spell it all out:<br>
<p>
For the 4.4.x -stable series, the vulnerability affected 4.4.22 to 4.4.29 -- all 4.4 stable kernels from September 24th onward, including the ones everyone updated to to fix DirtyCOW.<br>
<p>
Presumably the "older CPUs" refers to pre-Ivy Bridge which lacked SMEP, as the broken fixup results in a jump to a userland address.  This post: <a href="http://www.mail-archive.com/linux-kernel@vger.kernel.org/msg1259923.html">http://www.mail-archive.com/linux-kernel@vger.kernel.org/...</a> shows a reproducer and the OOPS illustrating the userland instruction pointer address.  Grsecurity's i386 KERNEXEC and x64 UDEREF would both prevent this from being exploitable, mmap_min_addr would do nothing.<br>
<p>
-Brad<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/705264/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor705271"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A discussion on stable kernel workflow issues</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 1, 2016 23:19 UTC (Tue)
                               by <b>spender</b> (guest, #23067)
                              [<a href="/Articles/705271/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
To be specific, 4.4.29 is not vulnerable.  It includes the exception table handling patch.  For whatever reason (I guess we would have to be present at the kernel summit to know) they decided to revert both patches and leave the infoleak there for 4.4.30 instead.<br>
<p>
-Brad<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/705271/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor705273"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A discussion on stable kernel workflow issues</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 2, 2016 0:05 UTC (Wed)
                               by <b>jake</b> (editor, #205)
                              [<a href="/Articles/705273/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; For whatever reason (I guess we would have to be present at the kernel summit to know) </font><br>
<font class="QuotedText">&gt; they decided to revert both patches and leave the infoleak there for 4.4.30 instead.</font><br>
<p>
I think the answer you seek is in the article you are commenting on, Brad.<br>
<p>
jake<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/705273/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor705275"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A discussion on stable kernel workflow issues</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 2, 2016 0:15 UTC (Wed)
                               by <b>spender</b> (guest, #23067)
                              [<a href="/Articles/705275/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Unless the answer is dogmatic adherence to a new policy of reverting things that are fixed perfectly well, it's not.<br>
<p>
-Brad<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/705275/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor705287"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A discussion on stable kernel workflow issues</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 2, 2016 8:00 UTC (Wed)
                               by <b>citypw</b> (guest, #82661)
                              [<a href="/Articles/705287/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The truth of another "silent fix" ( again-_-)! Awesome, it seems vanilla kernel doesn't care if GNU/Linux users( individual/enterprise/etc) have important digital asset on those 0ld good machines without PaX/Grsecurity's KERNEXEC/UDEREF or SMEP/SMAP. Lacking mitigation to prevent 0ld shitty ret2usr exploit is one thing, while "a trivial root exploit" is another. Trivial root exploit? I wouldn't say any privilege escalation exploit is trivial;-)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/705287/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor705292"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A discussion on stable kernel workflow issues</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 2, 2016 8:25 UTC (Wed)
                               by <b>intgr</b> (subscriber, #39733)
                              [<a href="/Articles/705292/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Trivial root exploit? I wouldn't say any privilege escalation exploit is trivial;-)</font><br>
<p>
I assumed "trivial" means trivially easy to exploit... I doubt anyone meant to say that it's unimportant.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/705292/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor705296"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A discussion on stable kernel workflow issues</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 2, 2016 10:18 UTC (Wed)
                               by <b>citypw</b> (guest, #82661)
                              [<a href="/Articles/705296/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
oops, guess I misunderstand it...s0rry guys...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/705296/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor706440"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A discussion on stable kernel workflow issues</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 15, 2016 13:46 UTC (Tue)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/706440/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
In maths, "trivial" means "easy to reproduce". Doesn't mean it's easy to work out or discover in the first place.<br>
<p>
So something like RSA is trivial. BREAKING RSA is "trivial" (in the mathematical sense - it's a well understood problem with a well understood solution). But it's almost impossible to actually do.<br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/706440/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor705446"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A discussion on stable kernel workflow issues</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 3, 2016 12:08 UTC (Thu)
                               by <b>spender</b> (guest, #23067)
                              [<a href="/Articles/705446/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Since the above comment is now being linked to from oss-sec regarding a CVE request for the vuln (though oddly, for the infoleak itself and not the bad fix that results in privilege escalation) I want to add that I've verified that the KERNEXEC plugin also prevents exploitation.<br>
<p>
I do like though that the infoleak will receive a CVE, since simply not fixing the infoleak (which could have been done very easily in combination with reverting the "problematic" commits) is unacceptable.  We have a very elegant fix for it in grsecurity that doesn't rely on either commit.<br>
<p>
Also, since this covering up of security vulnerabilities has really gotten out of hand, we have finally started listing on our website an added benefit for customers that was previously unpublicized: we routinely send out notices for silently-fixed vulnerabilities with detailed analysis and how grsecurity affects exploitation.  Mails were sent out to customers for this vulnerability as well as DirtyCOW for instance, the day the commits were public.  I will note the information we provided answered at least one of solar's "challenges" and stood in constrast to much of the optimistic misinformation that was being spread about the vulnerability.<br>
<p>
Greg KH has publicly alluded that he wants to damage our ability to make a living from our work.  Greg, I would be happy for you to make this item of our services irrelevant by committing in the future to stop lying to your users.<br>
<p>
-Brad<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/705446/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor705295"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rant about unprofessional workflow</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 2, 2016 10:58 UTC (Wed)
                               by <b>NAR</b> (subscriber, #1313)
                              [<a href="/Articles/705295/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      I worked on projects where the rule was that no commit should go into the main repository without a reference to the bug or task tracker. All commits should be either fixes for bugs (in this case the reference should point to the bug in question) or implementation of new feature (in this case the reference should point to the  task tracker describing the new feature). Code cleanups, refactorings, etc. were considered "new feature" for this purpose. There was a field on the bug tracker ("introduced at") where the developer who fixed the bug had to state which version introduced the bug. This helped greatly the decision when we needed to backport a fix or not. Also the bug description obviously described if this is a severe bug (e.g. crash, security problem, etc.) or not.
<P>
Granted, this needs discipline. No cowboy-style commit-and-forget programming. For example if a developer finds a bug during code review or implementing some other feature, he had to create the bug report and go through the process - but in the long run it was really useful. I guess the kernel developers don't think that there's a bug or issue tracker that can cope with their workloads (hint: write one).
      
          <div class="CommentReplyButton">
            <form action="/Articles/705295/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor705677"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rant about unprofessional workflow</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 4, 2016 16:22 UTC (Fri)
                               by <b>imMute</b> (guest, #96323)
                              [<a href="/Articles/705677/">Link</a>] (7 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;Granted, this needs discipline. No cowboy-style commit-and-forget programming. For example if a developer finds a bug during code review or implementing some other feature, he had to create the bug report and go through the process - but in the long run it was really useful.</font><br>
<p>
And here's where people would just sit on uncommitted code because its too much work having to fill out a bug report on code that is still on a feature branch.  If it's a bug found by the second set of eyes to see the code, then I don't think a bug report is worth it - it's just needless paperwork.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/705677/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor705746"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rant about unprofessional workflow</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 6, 2016 14:36 UTC (Sun)
                               by <b>NAR</b> (subscriber, #1313)
                              [<a href="/Articles/705746/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It should not be much work to submit a bug report. Less than 5 minutes. And it usually helps to see the bug description in text, because the developer might realize what else is affected (or it's not a bug at all or some logs are missing, etc.). And it really helps a year later when somebody tries to find out why that particular change went into the codebase.<br>
<p>
I don't really understand the comment about feature branch: if it's a bug in the new (not yet released) feature, then there should be already an entry in the issue tracker about that feature. If it's a bug in an old (already released) feature, then it should be present on the "main" branch too, so it warrants a new bug entry.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/705746/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor705779"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rant about unprofessional workflow</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 7, 2016 12:19 UTC (Mon)
                               by <b>mathstuf</b> (subscriber, #69389)
                              [<a href="/Articles/705779/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Every substantive change, sure, maybe a mention in an issue tracker is important, but for issues like malloc/delete mismatches, whitespace fixes, doc typo fixes, and the like, it is just extra work. That's why "every commit requires an issue" is block headed. Maybe every topic/merge request, but certainly not every commit.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/705779/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor705787"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rant about unprofessional workflow</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 7, 2016 14:34 UTC (Mon)
                               by <b>excors</b> (subscriber, #95769)
                              [<a href="/Articles/705787/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
If you require every commit to reference an issue, then for trivial commits it might take a couple of minutes to copy a few lines from the commit message into the issue tracker which nobody will ever look at again, so it's wasted time. (For multiple closely-related commits you could combine them into a single issue, like "Fix coding style in xyzzy driver", so it's really an overhead per group of related work, not per commit.)<br>
<p>
But if you don't require every commit to reference an issue (and enforce that requirement), someone will occasionally make an important substantive commit without an issue, which will turn out to introduce some bugs or need backporting or need some documentation written about its rationale etc, and someone will have to spend hours searching through mailing lists and LWN articles trying to find all the possibly-years-old discussions about that commit (earlier versions, code reviews, related bug reports, etc). That's also wasted time, which could have been saved if the discussion about the commit had been tracked in a single place (even just as a collection of links to mailing list threads).<br>
<p>
If you require only substantive commits to reference an issue, you'll waste time deciding and then arguing with people over whether a commit is really substantive (e.g. a malloc/free bug could be a serious security vulnerability so surely that counts?), and you'll still sometimes fail to track a commit that should have been tracked.<br>
<p>
I think it's unclear which approach wastes the most time overall, but the most predictable is to require an issue for every commit - it's a mildly irritating overhead when writing patches, but it's easy to get into the habit of using the issue tracker for everything, and it can save some rare but substantial headaches in the future.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/705787/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor705832"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rant about unprofessional workflow</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 7, 2016 18:03 UTC (Mon)
                               by <b>bronson</b> (subscriber, #4806)
                              [<a href="/Articles/705832/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Furthermore, if you're iterating so fast that creating a tracker entry is an unbearable overhead...  I'm not sure your work belongs in the stable branch.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/705832/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor705821"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rant about unprofessional workflow</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 7, 2016 16:31 UTC (Mon)
                               by <b>NAR</b> (subscriber, #1313)
                              [<a href="/Articles/705821/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Whitespace, typo fixes, merge errors - they don't warrant issue tracker entries. The malloc/delete mismatches could be real, user facing errors (e.g. destructor not called), these should be tracked.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/705821/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor705828"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rant about unprofessional workflow</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 7, 2016 17:27 UTC (Mon)
                               by <b>madscientist</b> (subscriber, #16861)
                              [<a href="/Articles/705828/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Merge errors should be tagged with the tracker entry which introduced the merge error, so that an attempt to cherry-pick the broken commit has a chance of noticing the commit that fixes the error as well.<br>
<p>
For whitespace cleanups and typos, you can have a catch-all tracker entries (as mentioned above) for "whitespace cleanup" and "comment typos" that is just used for all those types of issues.  It incentivizes people to break these out into separate commits anyway, which is a good thing.<br>
<p>
When I introduced a similar requirement locally (using Git hooks on the server to reject pushes where the comment didn't provide the proper information) I originally thought it would be good to have an "out" where you could use a special tag like "trivial" or something and avoid creating a tracker entry.  Others in the team were against this and wanted to require a real tracker entry for every commit so that's what we did, and it has been fine.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/705828/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor706135"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rant about unprofessional workflow</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 10, 2016 18:02 UTC (Thu)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/706135/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The trouble is, (a) managing the kernel is like herding cats, and (b) many of them are blind :-) Without a spec it's too easy to make a mistake, and nobody wants to specify or document what *should* happen, so all too often it doesn't ...<br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/706135/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor705284"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A discussion on stable kernel workflow issues</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 2, 2016 11:16 UTC (Wed)
                               by <b>daenzer</b> (subscriber, #7050)
                              [<a href="/Articles/705284/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
My experience with the stable kernel workflow hasn't been bad overall, but there have been exceptions.<br>
<p>
My worst experience so far was when I received "stable review patch" e-mails for backporting e64c952efb8e0c15ae82cec8e455ab4910690ef1 ("drm/radeon: disable runtime pm on PX laptops without dGPU power control") to 4.4 and 4.5. I followed up as soon as I could, reporting that a regression had been bisected to that commit, so it would be better to hold off on backporting it. Greg KH's response to that was "Why not just provide stable with the bugfix as well?", but there was no such fix yet at that time. The change was backported anyway, which resulted in at least one additional bug report (and probably more people unnecessarily running into the regression).<br>
<p>
It left me wondering what the purpose of those "stable review patch" e-mails was.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/705284/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor705425"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A discussion on stable kernel workflow issues</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 3, 2016 0:42 UTC (Thu)
                               by <b>syrjala</b> (subscriber, #47399)
                              [<a href="/Articles/705425/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
One thing I'd like to see is some kind of central database of commits that should *not* be backported to stable, even if they have the cc:stable tag. We've had a few cases in i915 land where the cc:stable was possibly applied a bit too optimistically, or perhaps the patch really seemed like stable material at the time but was later found to cause a regression. It's quite tedious having to NAK the same patch over and over again when various people proceed to backport it to whatever stable branch they maintain. One NAK should be enough to block it from all stable trees IMO.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/705425/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor705457"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A discussion on stable kernel workflow issues</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 3, 2016 13:24 UTC (Thu)
                               by <b>jani</b> (subscriber, #74547)
                              [<a href="/Articles/705457/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Indeed. I think I'm starting to lean towards preferring Fixes: tags over Cc: stable at the time of applying patches, and doing separate stable backport requests later, when we've had more exposure to the candidate fixes. The stable backport requests could be scripted using the Fixes: tags, checking that the later commits don't contain reverts of the "fix" or commits fixing the "fix".<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/705457/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor705752"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A discussion on stable kernel workflow issues</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 6, 2016 18:48 UTC (Sun)
                               by <b>blackwood</b> (guest, #44174)
                              [<a href="/Articles/705752/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Greg apparently already reviews all patches with "Fixes:" tags and cherry-picks for stable what he deems appropriate ...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/705752/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2016, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
