        <!DOCTYPE html>
        <html lang="en">
        <head><title>The rest of the 6.11 merge window [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/982605/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/983268/">Return to the Front page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/982605/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>The rest of the 6.11 merge window</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Did you know...?</b>
<p>
LWN.net is a subscriber-supported publication; we rely on subscribers
       to keep the entire operation going.  Please help out by <a
       href="/Promo/nst-nag4/subscribe">buying a subscription</a> and keeping LWN on the
       net.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>July 29, 2024</br>
           </div>
The release of <a
href="/ml/all/CAHk-=wiyNokz0d3b=GRORij=mGvwoYHy=+bv6m2Hu_VqNdg66g@mail.gmail.com/">6.11-rc1</a>
marked the end of the 6.11 merge window on July&nbsp;28.  By that time,
12,102 non-merge changesets had been pulled into the mainline repository;
about 8,000 of those came in after <a href="/Articles/982034/">the
first-half summary</a> was written.  Quite a few significant changes were
to be found in those changesets; there is also one big change that did not
make it.
<p>
<!-- middle-ad -->
Some of the most interesting changes pulled into the mainline in the latter
part of the 6.11 merge window include:
<p>

<h4>Architecture-specific</h4>
<p>
<ul class="spacylist">

<li> There is a new implementation of the AES-GCM cipher for x86-64
     systems.  The resulting performance improvement is always welcome, but
     this contribution is also noteworthy for the extensive documentation
     of the code and how it works; see <a
     href="https://git.kernel.org/linus/b06affb1cb58">this commit</a> for
     the whole thing.
<li> Support for PowerPC 40x platforms has been removed.
<li> Memory hotplugging support has been added for RISC-V systems.
<li> The <a href="https://docs.kernel.org/dev-tools/kmsan.html">kernel
     memory sanitizer (KMSAN)</a> is now supported on s/390 systems.
<li> RISC-V systems have gained support for the <a
     href="/Articles/764325/">STACKLEAK</a> security feature.
</ul>


<p>
<h4>Core kernel</h4>
<p>
<ul class="spacylist">

<li> There is a new system call, <tt>uretprobe()</tt>, that is currently
     only implemented on x86-64 systems.  Its job is to optimize the
     handling of <a
     href="https://docs.kernel.org/trace/uprobetracer.html">uretprobes</a>
     (function-return tracepoints dynamically inserted into a user-space
     process); nothing good will come if a process tries to call it
     directly.  See <a
     href="https://git.kernel.org/linus/ff474a78cef5">this commit</a> for a
     description of how it works and <a href="/Articles/978335/">this
     LSFMM+BPF report</a> for some more information on the use case that
     motivated it.
<li> The single-user limit for the <a
     href="https://docs.kernel.org/trace/ftrace.html#function-graph-tracer">function-graph
     tracer</a> has been removed.
<li> The new <tt>reserve_mem=</tt> command-line parameter can be used to
     set aside a named region of memory; it is intended to be used, in
     conjunction with the new <tt>ramoops.mem_name=</tt> parameter, with
     the <a
     href="https://docs.kernel.org/admin-guide/pstore-blk.html">pstore</a>
     subsystem.  See <a
     href="https://git.kernel.org/linus/1e4c64b71c9b">this commit</a> and
     <a href="https://git.kernel.org/linus/d9d814eebb1a">this commit</a>
     for details.
<li> The control-group memory controller now supports a
     <tt>swappiness=</tt> parameter.  It allows proactive-reclaim
     algorithms to set the balance between swapping (reclaiming anonymous
     pages) and reclaiming file-backed pages.  See <a
     href="https://git.kernel.org/linus/68cd9050d871">this commit</a> for
     details.
<li> There is a new <tt>ioctl()</tt> interface to the memory-layout
     information found in <tt>/proc/<i>PID</i>/maps</tt> that allows for
     more efficient access.  See <a
     href="https://git.kernel.org/linus/c10cb9148e51">this commit</a> for
     minimal documentation, <a
     href="https://git.kernel.org/linus/ed5d583a88a9">this commit</a> for a
     long description of the work and the use case it addresses, and <a
     href="https://git.kernel.org/linus/81510a0eaa69">this commit</a> for
     test code showing how it is used.
</ul>
<p>
<h4>Filesystems and block I/O</h4>
<p>
<ul class="spacylist">

<li> The Btrfs filesystem recognizes a couple of new values
     (<tt>ignoremetacsums</tt> and <tt>ignoresuperflags</tt>) for the
     <tt>rescue=</tt> mount option; they are meant to assist in the recovery
     of filesystems that may have been partially converted by user-space
     tools (those that do checksum conversion in particular).
<li> The way that Btrfs does block-group reclaim has been improved in the
     hope of avoiding situations where free space is unavailable even
     though the filesystem is not full.  See <a
     href="https://git.kernel.org/linus/f5ff64ccf7bb">this commit</a> for a
     description of how the new dynamic reclaim threshold works.
<li> The ntfs3 filesystem has gained support for the "compressed" and
     "immutable" attributes on files.
</ul>

<p>
<h4>Hardware support</h4>
<p>
<ul class="spacylist">
<li> <b>Clock</b>:
     Amlogic C3 PLL clock controllers,
     Amlogic C3 peripherals clock controllers,
     Qualcomm SM7150 display clock controllers,
     Qualcomm SM7150 camera clock controllers,
     Qualcomm SM7150 video clock controllers,
     Qualcomm QCA8386 and QCA8084 NSS clock controllers,
     Qualcomm QCM2290 graphics clock controllers,
     Sophgo SG2042 PLL clock controllers, and
     T-HEAD TH1520 AP clock controllers.
<li> <b>GPIO and pin control</b>:
     NXP IMX91 pin control units,
     Nuvoton MA35 pin and GPIO controllers, and
     Qualcomm SM4250 LPASS LPI pin controllers.
<li> <b>Graphics</b>:
     Lincoln Technologies lcd197 panels,
     Ilitek ILI9806E-based panels, and
     STMicroelectronics LVDS display interface transmitters.
<li> <b>Industrial I/O</b>:
     Analog Devices AD7194 and AD7380 analog-to-digital converters,
     Vishay VEML6040 RGBW light sensors,
     ScioSense ENS160 multi-gas sensors,
     Texas Instruments ADS1119 analog-to-digital converters, and
     MediaTek MT6359 PMIC analog-to-digital converters.
<li> <b>Input</b>:
     Huion Inspiroy 2S and Dial 2 tablets,
     XP-PEN Deco Mini 4 tablets, and
     Cirrus Logic CS40L50 haptic drivers.
<li> <b>Media</b>:
     Sony IMX283 image sensors,
     Maxim MAX96717 GMSL2 serializers,
     Maxim MAX96714 GMSL2 deserializers,
     Imagination E5010 JPEG encoders,
     GalaxyCore gc08a3 sensors, and
     Raspberry Pi PiSP image signal processors.
<li> <b>Miscellaneous</b>:
     Lenovo Yoga C630 embedded controllers,
     ChromeOS EC LED controllers,
     Marvell 88PM886 power-management ICs,
     Qualcomm PM8008 PMIC regulators,
     ROHM BD96801 power-management ICs,
     Texas Instruments LM3509 backlight controllers,
     Silergy SY7802 flash LED controllers,
     Texas Instruments LP5569 LED controllers,
     Marvell Octeon data-processing units,
     KEBA CP500 system FPGAs,
     MediaTek DVFSRC EMI interconnects,
     Qualcomm MSM8953 interconnects,
     Marvel Octeon CN10K DMA packet interfaces,
     StarFive PCIe host controllers,
     Microchip LAN966x outbound interrupt controllers,
     Lenovo Yoga C630 battery controllers,
     Maxim MAX17201/MAX17205 fuel gauges,
     Qualcomm CPUCP mailbox controllers, and
     STMicroelectronics STM32 DMA3 controllers.
<li> <b>PHY</b>:
     StarFive JH7110 D-PHYs,
     Freescale i.MX8QM HSIO PHYs, and
     Airoha PCIe-PHYs.
<li> <b>Sound</b>:
     Senarytech HD-audio codecs,
     Realtek RT1320 codecs,
     Everest Semi ES8311 codecs,
     Qualcomm WCD9370/WCD9375 codecs,
     Realtek rt1318 audio amplifiers,
     Cirrus Logic CS530x analog-to-digital converters,
     Asahi Kasei AK4619 audio codecs, and
     NXP LPC32XX audio subsystems.
<li> <b>USB</b>:
     Lenovo Yoga C630 USCI interfaces.
</ul>

<p>
<h4>Miscellaneous</h4>
<p>
<ul class="spacylist">

<li> The <tt>perf</tt> tool has a number of new features; see <a
     href="https://git.kernel.org/linus/68b59730459e">this changelog</a>
     for the full list.
<li> A small set of <a
     href="https://git.kernel.org/linus/de6582833db0">Rust abstractions for
     firmware loading</a> has been merged.  There are still many pieces
     needed before nontrivial drivers can be written in Rust, but the list
     is slowly getting smaller.  Other merged abstractions include
     <tt>uaccess</tt> (user-space access) and <tt>page</tt> (for working
     with <tt>struct page</tt>).
<li> While the minimum version of Rust needed to build kernel code remains
     1.78.0, it is now also possible to use versions 1.79.0 or 1.80.0 as
     well.  The plan is to broaden the range of applicable compiler
     versions over time.
</ul>


<p>
<h4>Security-related</h4>
<p>
<ul class="spacylist">

<li> The <a href="/Articles/965837/">dedicated bucket slab allocator</a>
     has been merged; it is intended to provide protection against
     heap-spraying attacks.
<li> The generation of random data will be greatly accelerated by the
     new <a href="/Articles/980447/">vDSO implementation of
     <tt>getrandom()</tt></a>.  The implementation has changed somewhat
     since that article was written, though; see <a
     href="/Articles/983186/">this update</a> for the details.  Among other
     things, this work has added a new <tt>MAP_DROPPABLE</tt> flag for <a
     href="https://man7.org/linux/man-pages/man2/mmap.2.html"><tt>mmap()</tt></a>
     that requests memory that can be dropped by the kernel if need be.
</ul>


<p>
<h4>Virtualization and containers</h4>
<p>
<ul class="spacylist">

<li> There is now initial support for AMD's <a
     href="https://www.amd.com/en/developer/sev.html">SEV-SNP</a> secure
     encrypted virtualization mechanism in KVM, built on top of the
     architecture-level support added earlier in the merge window.
<li> There is a new KVM <tt>ioctl()</tt> call to pre-populate a guest's
     memory before it runs; see <a
     href="https://git.kernel.org/linus/9aed7a6c0b59">this commit</a> for
     documentation. 

</ul>

<p>
<h4>Internal kernel changes</h4>
<p>
<ul class="spacylist">

<li> The minimum version of GNU Make needed to build the kernel has been
     raised to&nbsp;4.0.
<li> There were 118 exported symbols removed from 6.11, and 464 additions,
     for a net growth of 346; there are also six new kfuncs.  See <a
     href="/Articles/983762/">this page</a> for the full list.
</ul>
<p>
On June 11, Linus Torvalds <a href="/Articles/978007/">announced</a> that
the <a href="/Articles/922405/">extensible scheduler class</a>
("sched_ext") would be merged for 6.11.  After that came <a
href="/ml/all/87ed8sps71.ffs@tglx/">a strongly worded discussion</a> about
whether that step was justified, or whether sched_ext needed more work
first.  The conclusion, it would seem, is that another development cycle
(at least) will be taken toward improving this code; sched_ext was
<i>not</i> merged for 6.11.  There have been some more constructive
conversations about this code since then, though, so it seems likely that
it will get there eventually.
<p>
Meanwhile, the work that <i>was</i> merged will need to be stabilized over
the next seven or eight weeks.  The most likely date for the 6.11 kernel to
be released is September&nbsp;15 — just in time for the 6.12 merge window
to land on top of the Open Source Summit Europe, Maintainers Summit, and
Linux Plumbers Conference.  But first, there will be a lot of testing and
bug fixing to be done.
<p>
(As a reminder, LWN subscribers can look into the <a
href="/ksdb/releases/v6.11/">LWN Kernel Source Database</a> for a lot of
details on where the code pulled for 6.11 came from).<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Releases-6.11">Releases/6.11</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/982605/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor983844"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">SEV-SNP</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 29, 2024 16:38 UTC (Mon)
                               by <b>pbonzini</b> (subscriber, #60935)
                              [<a href="/Articles/983844/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
note: architecture-level support for SEV-SNP was added in 6.9, not earlier during the merge window<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/983844/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor984030"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">PREEMPT_RT mainlining effort</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 31, 2024 1:10 UTC (Wed)
                               by <b>smosel</b> (subscriber, #87746)
                              [<a href="/Articles/984030/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
So nothing in there apropos the remaining printk() changes required?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/984030/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2024, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
