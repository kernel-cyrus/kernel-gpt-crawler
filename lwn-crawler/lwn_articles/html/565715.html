        <!DOCTYPE html>
        <html lang="en">
        <head><title>The 3.12 merge window opens [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/565715/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/565251/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/565715/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>The 3.12 merge window opens</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>LWN.net needs you!</b>
<p>
Without subscribers, LWN would simply not exist.  Please consider
       <a href="/Promo/nst-nag2/subscribe">signing up for a subscription</a> and helping
       to keep LWN publishing.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>September 5, 2013</br>
           </div>
The 3.12 merge window started right on time on September 3; by the time
this article was written, over 3,500 patches had been pulled into the
mainline.  There is, once again, a great deal of internal cleanup work
going on that does not look impressive in a feature list, but the benefits
of that work will be felt well into the future.  In particular, some of the
performance work that has been done this time around should speed up Linux
considerably in a number of settings.
<p>
User-visible features merged for 3.12 so far include:
<p>
<ul>

<li> The Lustre filesystem, added in 3.11, is now enabled in the build
     system.  Quite a bit of cleanup work for Lustre has been merged for
     3.12. 
<p>
<li> The long-deprecated <tt>/proc/acpi/event</tt> interface has been
     removed.  If anybody actually needed this file, they should raise a
     fuss during the 3.12 development cycle.
<p>
<li> The <a href="/Articles/434821/">pstore</a> mechanism (which stores
     crash information in a persistent storage location) is now able to
     store compressed data.
<p>
<li> The <a href="/Articles/558284/">full-system idle detection</a> patch
     set has been pulled.  This work enables the kernel to detect when the
     entire system is idle and turn off the clock tick, thus improving the
     performance when the full dynamic tick feature is used.
<p>
<li> The "paravirtualized ticket spinlocks" mechanism allows for more
     efficient locking in virtualized guests.  In short, if a spinlock is
     unavailable for anything more than a brief period, the lock code will
     stop spinning and call into the hypervisor to simply wait until the
     lock becomes available again.
<p>
<li> New hardware support includes:
     <p>
     <ul>
    
     <li> <b>Audio</b>:
     	  Wolfson Microelectronics WM8997 codecs,
   	  Atmel AT91ASM9x5 boards with WM8904 codecs,
	  TI PCM1792A and PCM1681 codecs,
	  Asahi Kasei Microdevices AK4554 audio chips,
	  Renesas R-Car SoC audio controllers, and
	  Freescale S/PDIF and SSI AC'97 controllers.
     <p>
     <li> <b>Block</b>:
     	  ATTO Technology ExpressSAS RAID adapters.
	  The ATA layer has also gained the ability to take advantage of
     	  newer solid-state drives 
	  that support the queued version of the TRIM command, removing
     	  much of the cost of TRIM operations.
     <p>
     <li> <b>Hardware monitoring and related</b>:
     	  Dialog Semiconductor DA9063 regulators,
	  Marvell 88PM800 power regulators,
	  Freescale PFUZE100 PMIC-based regulators, and
	  Measurement Specialties HTU21D humidity/temperature sensors.
     <p>
     <li> <b>Miscellaneous</b>:
     	  Humusoft MF624 DAQ PCI cards,
	  Xillybus generic FPGA interfaces,
	  Digi EPCA, Neo and Classic serial ports,
	  ST ASC serial ports,
	  Nuvoton NAU7802 analog-to-digital converters,
	  TI TWL6030 analog-to-digital converters,
	  TI Palmas series pin controllers,
	  Avago APDS9300 ambient light sensors, and
	  Bosch BMA180 triaxial acceleration sensors.
     <p>
     <li> <b>Networking</b>:
     	  Realtek RTL8188EU wireless interfaces.
     <p>
     <li> <b>Serial peripheral interface</b>:
     	  Freescale DSPI controllers,
	  Energy Micro EFM32 SoC-based SPI controllers,
	  Blackfin v3 SPI controllers, and
	  TI DRA7xxx QSPI controllers.
     <p>
     <li> <b>USB</b>:
     	  Faraday FOTG210 OTG controllers and
	  GCT GDM724x LTE chip-based USB modem devices.

     </ul>

</ul>
<p>
Changes visible to kernel developers include:
<p>
<ul>

<li> There is a new reference count called a "lockref", defined in
     <tt>&lt;linux/lockref.h&gt;</tt>.  It combines a spinlock and a
     reference count in a way that allows changes to the reference count to
     be made without having to take the lock.  See <a
     href="/Articles/565734/">this article</a> for details on how
     lockrefs work.
<p>
<li> The S390 architecture has been converted to the generic
     interrupt-handling mechanism.  Since S390 was the last holdout, this
     mechanism 
     will become mandatory and the associated CONFIG_GENERIC_HARDIRQS
     configuration option will go away.
<p>
<li> There is a new mechanism for debugging kobject lifecycle issues; it
     works by delaying the calling of the <tt>release()</tt> function when
     the reference count drops to zero.  Most of the time,
     <tt>release()</tt> is called while the driver is shutting down the
     associated device, but there is no guarantee of that.  Turning on
     CONFIG_DEBUG_KOBJECT_RELEASE will help find cases where the driver is
     not prepared for a delayed <tt>release()</tt> call.
<p>
<li> The <tt>PTR_RET()</tt> function has been renamed
     <tt>PTR_ERR_OR_ZERO()</tt>; 
     all internal users have been changed.
</ul>
<p>
Your editor predicts that the merge window will close on September&nbsp;15,
just before the start of LinuxCon and the Linux Plumbers Conference.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Releases-3.12">Releases/3.12</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/565715/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor566025"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.12 merge window opens</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 7, 2013 8:14 UTC (Sat)
                               by <b>chantecode</b> (subscriber, #54535)
                              [<a href="/Articles/566025/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
May I suggest a correction:<br>
<p>
"This work enables the kernel to detect when the entire system is idle and turn off the clock tick, thus improving the performance when the full dynamic tick feature is used. "<br>
<p>
The goal of this feature is actually not to improve the performances but to improve powersaving. The cpu that handles timekeeping wasn't allowed to shutdown its tick until now. With this patch now it can.<br>
<p>
-Frederic.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/566025/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor566127"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 3.12 merge window opens</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 10, 2013 2:25 UTC (Tue)
                               by <b>jzbiciak</b> (guest, #5246)
                              [<a href="/Articles/566127/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <P>I guess this is a hair-split: If I recall the original article correctly, this work reduces the performance impact of the full-system-idle detection step, so, in <I>that</I> sense improves performance.  As a result, because it's cheap enough, it becomes reasonable to detect when the whole system is idle so that that last processor can shut its tick off.</P>
<P>If I understood correctly, without this optimization, you would either need to keep the last processor on, or pay a performance penalty.</P>
<P>Or am I oversimplifying / misunderstanding?</P>
      
          <div class="CommentReplyButton">
            <form action="/Articles/566127/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2013, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
