        <!DOCTYPE html>
        <html lang="en">
        <head><title>In Brief [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/344038/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/342949/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/344038/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>In Brief</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>We're bad at marketing</b>
<p>
We can admit it, marketing is not our strong suit. Our strength is
writing the kind of articles that developers, administrators, and
free-software supporters depend on to know what is going on in the
Linux world. Please <a href="/Promo/nsn-bad/subscribe">subscribe today</a> to help us keep doing that, and so
we donâ€™t have to get good at marketing.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>July 29, 2009</br>
           </div>
<b>FAT timestamps</b>.  The FAT filesystem has a number of deficiencies.
The fact that it cannot record time stamps for the root directory of a
filesystem is probably not at the top of most peoples' lists, but Jorg
Schummer has put together <a href="http://lwn.net/Articles/343565/">a
patch</a> to provide those time stamps anyway.  The patch is a hack which
stores the time stamp information in the FAT volume label, essentially
hiding it from any system which doesn't know to look for it.  This is not a
new scheme; Mac&nbsp;OS&nbsp;X does the same thing.  There does not seem to
be a great clamor for this feature, but it is optional, the implementation
is straightforward, and it's off by default.  So there is little reason to
leave it out either.
<p>
<b>Remapping ext2/3 UIDs</b>.  Another failing of FAT is its inability to
associate user or group ownership information with files.  One would not
normally want to port this "feature" to more complete filesystems, but
Ludwig Nussel has <a href="http://lwn.net/Articles/343024/">noted a
problem</a>: a user moving an ext3 filesystem from one system to another
will have problems accessing the files if said user's accounts have
different user IDs on the two boxes.  The solution is to add a
<tt>uid=</tt> mount option to ext2 and ext3; the filesystem will then map
between the given user ID (on the running system) and zero (on the
filesystem).
<p>
There doesn't seem to be a great clamor for this feature either; the use of
ext3 on filesystems moved between machines is probably relatively rare.
Still, Andreas Dilger <a href="/Articles/344054/">indicated</a> that the
feature might have its uses, but that some changes would be welcome.  The
ability to create root-owned setuid files needed to go away, and it would
be nice to have a more general "remap UID1 to UID2" capability instead of
just mapping to and from the root UID.  Andreas also requested an ext4
version of the patch.
<p>
<b>Fanotify</b>.  Eric Paris has posted <a
href="http://lwn.net/Articles/343346/">a description of the new fanotify
API</a> for comments, noting that real patches will follow soon.  That API
has changed considerably since it was <a
href="http://lwn.net/Articles/339399/">covered here</a> at the beginning of
July; the strange use of <tt>getsockopt()</tt> to get notifications is no
more.  Instead, a relatively normal socket is created, with <tt>read()</tt>
being used to read notification events.  There were a number of comments
and suggestions, but the consensus seems to be that things are headed in
the right direction.
<p>

<b>ABUSE</b>.  We have FUSE, which allows the implementation of filesystems
in user space, and CUSE, which does the same for char devices.  So why not
do the same thing for block devices?  With Zachary Amsden's <a
href="http://lwn.net/Articles/343514/">ABUSE patch</a>, that now becomes
possible.  Zachary says: "<q>This device is not about
performance, is it about extending the boundaries of the kernel to the
almost improbable.</q>"  The code commentary notes that the feature can
be "incredibly useful," but it's not clear what use case is being targeted
at the moment.
<p>
ABUSE is highly unlikely to be merged, for the simple reason that much of
what it does is already doable with the network block device (NBD) driver.
Zachary <a href="/Articles/344067/">plans to move to NBD</a> for whatever
purpose he has in mind.  That purpose, apparently, makes it necessary to
have access to partitions, which is why FUSE cannot be used.
<p>
The partitions topic led to a small side discussion, where Alan Cox <a
href="/Articles/344068/">suggested</a> that partition support should be
removed from the kernel altogether.  Instead, the device mapper should be
used to implement partitions.  There are a lot of advantages - mostly
administrative flexibility - which come from the use of the device mapper,
but there are users, <a href="/Articles/344069/">Linus included</a>, who
are not interested in requiring its use.  So the kernel's partition code
will not be going anywhere anytime soon.

<p>
<b>A new book on the way</b>.  Man pages maintainer Michael Kerrisk, while
writing about a recent release, noted that he is well along in the writing
of a new book which extensively documents the Linux kernel's user-space
API.  It will not be light reading; it looks to end up at about 1500
pages.  For the curious, Michael has posted <a
href="http://blog.man7.org/2009/07/whats-book-about.html">a general
description of the book</a> and <a
href="http://blog.man7.org/2009/07/64-chapters.html">the table of
contents</a>.  Publication is expected sometime in the first half of 2010.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#fanotify">fanotify</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/344038/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor344344"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">In Brief</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 30, 2009 5:54 UTC (Thu)
                               by <b>bronson</b> (subscriber, #4806)
                              [<a href="/Articles/344344/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Remapping ext2/3 UIDs: this seems a little strange to me.  On small systems, chmod -R works great (feed it with a find -owner if you're paranoid).  And on big systems, it's really REALLY worth keeping your passwd files in sync.<br>
<p>
What's the intent behind this feature?  ext4 on usb flash drives?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/344344/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor344360"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">In Brief</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 30, 2009 6:56 UTC (Thu)
                               by <b>eru</b> (subscriber, #2753)
                              [<a href="/Articles/344360/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <i>What's the intent behind this feature? ext4 on usb flash drives?</i>
<p>
Yes, and why not? It makes even more sense with portable USB hard drives. Just the other day saw a 1000Gb one advertised for 79 euros. ext3 or ext4 is definitely better for it than VFAT.

      
          <div class="CommentReplyButton">
            <form action="/Articles/344360/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor345072"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">In Brief</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 3, 2009 21:48 UTC (Mon)
                               by <b>Velmont</b> (guest, #46433)
                              [<a href="/Articles/345072/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
This is *SO* needed. I've been bitten by this oh-so-many times.<br>
<p>
Why is VFAT the only usable file system for flash drives that I carry aronud to other Linux-systems? It's quite stupid if I might say so. :-)<br>
<p>
Yes, yes, yes to this feature. It's really needed.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/345072/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor346638"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Remapping UIDs: ext only?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 12, 2009 14:49 UTC (Wed)
                               by <b>sethml</b> (guest, #8471)
                              [<a href="/Articles/346638/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
What I don't understand is why this would be a feature for ext filesystems only, rather than a <br>
general VFS feature, applicable to any filesystems. I'd have certainly found it very useful for <br>
NFS mounts in the past, since with NFS you often really have no control over the server-side <br>
UIDs. (In my case, NFS-mounting a crappy NAS box which had some user UIDs conflicting <br>
with standard Debian role accounts.) <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/346638/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor344343"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">re: Remapping ext2/3 UIDs</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 30, 2009 6:02 UTC (Thu)
                               by <b>eru</b> (subscriber, #2753)
                              [<a href="/Articles/344343/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      Something like this really is needed, if one wants to replace the use of the famously patent-encumbered VFAT with a free alternative in removable media! For these, the UID should really be completely ignorable: When reading, the "uid=" option should remap everything to the given UID, not just files with zero UID. When writing, the UID on the media should probably be set to nobody (99), not root.

      
          <div class="CommentReplyButton">
            <form action="/Articles/344343/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor344361"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">re: Remapping ext2/3 UIDs</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 30, 2009 7:01 UTC (Thu)
                               by <b>tstover</b> (guest, #56283)
                              [<a href="/Articles/344361/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
damn straight <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/344361/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor344378"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">re: Remapping ext2/3 UIDs</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 30, 2009 8:36 UTC (Thu)
                               by <b>mp</b> (subscriber, #5615)
                              [<a href="/Articles/344378/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
You certainly meant to write "nobody (65534), not root", didn't you?<br>
<p>
If it's not root, configuration to allow for distro differences is necessary. Apparently the newest version of this patch allows it.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/344378/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor344384"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">re: Remapping ext2/3 UIDs</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 30, 2009 9:39 UTC (Thu)
                               by <b>eru</b> (subscriber, #2753)
                              [<a href="/Articles/344384/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      On the CentOS (RHEL clone) system I wrote this, "nobody" is 99, and 65534 is "nfsnobody". Actually that UID would be irrelevant, as long as it is unlikely to be a real user, or a system account (other than a "nobody"). Is there really no standard "nobody" number?

      
          <div class="CommentReplyButton">
            <form action="/Articles/344384/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor344395"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">re: Remapping ext2/3 UIDs</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 30, 2009 10:56 UTC (Thu)
                               by <b>NAR</b> (subscriber, #1313)
                              [<a href="/Articles/344395/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It doesn't really matter, if there is a standard for system users, if nobody cares. On a SuSE system nobody is 65534 in group 65535, while on a Solaris nobody is 60001 in group 60001. On Ubuntu nobody is 65534 in group 65534. I have no other OSes nearby to check.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/344395/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor344657"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">re: Remapping ext2/3 UIDs</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 31, 2009 2:18 UTC (Fri)
                               by <b>njs</b> (guest, #40338)
                              [<a href="/Articles/344657/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; When writing, the UID on the media should probably be set to nobody (99)</font><br>
<p>
My understanding of 'nobody' is that it's what you use to run processes when they aren't supposed to have any permissions. Giving those processes read/write access to whole filesystems seems to defeat that purpose.<br>
<p>
Better would be to make a new dedicated account for this purpose, and get LANANA to standardize the name and UID.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/344657/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2009, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
