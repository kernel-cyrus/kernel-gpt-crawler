        <!DOCTYPE html>
        <html lang="en">
        <head><title>2.6.27 - the rest of the story [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/291630/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/291461/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/291630/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>2.6.27 - the rest of the story</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>LWN.net needs you!</b>
<p>
Without subscribers, LWN would simply not exist.  Please consider
       <a href="/Promo/nst-nag2/subscribe">signing up for a subscription</a> and helping
       to keep LWN publishing.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>July 29, 2008</br>
           </div>
The 2.6.27 merge window closed with the <a
href="http://lwn.net/Articles/291838/">2.6.27-rc1</a> release on
July&nbsp;28.  Some 8100 changesets were merged this time around, making
2.6.27 another busy development cycle.  A number of interesting things went
in since <a href="http://lwn.net/Articles/291033/">last week's update</a>;
the most significant changes visible to Linux users include: 
<p>

<ul>
<li> There are new drivers for ILI9320 LCD controller chips,
     Cobalt server LCD frame buffers,
     SH7760/SH7763 integrated LCD controllers,
     NXP pca9532 LED controllers,
     Philips PCA955x I2C LED controllers,
     WMI-based hotkeys on HP laptops,
     Maxim MAX73xx I2C port expanders,
     Micronas DRX3975D/DRX3977D DVB-T demodulators,
     DvbWorld 2102 DVB-S USB2.0 receivers,
     MaxLinear MxL5007T silicon tuners,
     Renesas SH7763 evaluation boards,
     Renesas Solutions AP-325RXA boards,
     Renesas R0P7785LC0011RL boards, and
     Atmel integrated touchscreens.

     Also added is "mISDN," a new, modular ISDN driver intended to replace
     older code for a number of ISDN cards.  Support for using mISDN
     drivers remotely via an IP tunnel has been added.


<p>

<li> The Palm T|X handheld computer is now supported.
<p>
<li> The tmpfs filesystem has gained support for asynchronous I/O.
<p>

<li> The hugetlbfs mechanism can now support multiple huge page sizes.
     There is a new directory (<tt>/sys/kernel/hugepages</tt>) with
     information on huge page allocations.  The x86 (64-bit) architecture
     now supports 1GB pages; PowerPC can go to 16GB.
<p>
<li> Most system calls which create file descriptors <a
     href="http://lwn.net/Articles/281965/">can now accept a set
     of flags</a>; this change allows the race-free establishment of close-on-exec
     semantics, requesting non-blocking opens, and more.  Developers
     wanting to use this capability will have to wait for a version of
     glibc which adds the requisite interfaces.
<p>
<li> The unmaintained v850 architecture has been removed.
<p>
<li> The <a href="http://lwn.net/Articles/242107/">kexec jump</a> patch set,
     which uses the kexec mechanism as an alternative way of implementing
     suspend-to-disk, has been merged.
<p>
<li> The <a href="http://lwn.net/Articles/278028/">omfs filesystem</a> has
     been merged.
<p>
<li> <tt>/proc</tt> now has a file (called <tt>syscall</tt>) for each
     process; when read, it displays the process's current system call and
     the supplied arguments.
<p>
<li> Linux users hoping to upgrade their systems in the near future will be
     glad to know that 
     a series of patches designed to make the kernel scale to 4096
     processors has been merged.

</ul>
<p>
Changes visible to kernel developers include:
<p>
<ul>
<p>
<li> The tracehook mechanism for defining static trace points (described in
     <a href="http://lwn.net/Articles/291091/">this article</a>) has been
     merged, along with a number of trace points in the core kernel.
<p>
<li> A new, lockless form of <tt>get_user_pages()</tt> has been added:
<p>
<pre>
    int get_user_pages_fast(unsigned long start, int nr_pages, int write,
			struct page **pages);
</pre>
<p>
     Details of this interface can be found in <a
     href="http://lwn.net/Articles/275808/">this article</a>, with the one
     note that early versions were called <tt>fast_gup()</tt> instead.
     (See also the related <a
     href="http://lwn.net/Articles/291826/">lockless page cache</a> work,
     which was also merged).
<p>
<li> The long-debated <a
     href="http://lwn.net/Articles/266320/">mmu-notifiers patch</a> has
     been merged.  The notifiers 
     allow external memory management units (as may be seen in some
     graphics cards or in virtualized guests) to be told about decisions
     made by the core memory management code.
<p>

<li> There is a new framework for debugging boot-time memory
     initialization; there's also "a few basic defensive measures" intended
     to prevent difficult-to-debug boot problems.
<p>
<li> The new function:
<p>
<pre>
    int object_is_on_stack(void *obj);
</pre>
<p>
     returns a true value if the pointed-to object is on the current kernel
     stack.  
<p>
<li> There is a new macro for issuing warnings:
<p>
<pre>
    WARN(condition, format, ...);
</pre>
<p>
     It's much like <tt>WARN_ON()</tt> in that it will produce a full oops
     listing; the difference is the added <tt>printk()</tt>-style format
     string and arguments.
<p>
<li> A new helper function:
<p>
<pre>
    int flush_work(struct work_struct *work);
</pre>
<p>
     waits for the specific workqueue job <tt>work</tt> to finish
     executing. 
<p>
<li> <tt>dma_mapping_error()</tt> and <tt>pci_dma_mapping_error()</tt> have
     new prototypes:
<p>
<pre>
    int dma_mapping_error(struct device *dev, dma_addr_t dma_addr);
    int pci_dma_mapping_error(struct pci_dev *hwdev, dma_addr_t dma_addr);
</pre>
<p>
     In each case, they have gained a new argument specifying which device
     the mapping is being done for.
<p>
<li> There are a couple of new radix tree functions:
<p>
<pre>
    unsigned int radix_tree_gang_lookup_slot(struct radix_tree_root *root, 
                                             void ***results,
					     unsigned long first_index, 
					     unsigned int max_items);
    unsigned int radix_tree_gang_lookup_tag_slot(struct radix_tree_root *root, 
                                                 void ***results,
						 unsigned long first_index,
						 unsigned int max_items,
						 unsigned int tag);
</pre>
<p>
    They are useful for looking up multiple items in a single call.
<p>
<li> Slab cache constructors no longer have a pointer to the cache itself
     as an argument; they now take a single <tt>void&nbsp;*</tt> pointer to
     the object itself.
<p>
<li> The long list of Video4Linux2 <tt>ioctl()</tt> callbacks has been
     moved into its own structure (<tt>struct v4l2_ioctl_ops</tt>) which is
     pointed to by the <tt>ioctl_ops</tt> member of <tt>struct
     video_device</tt>. 

</ul>
<p>
Now begins the long task of finding and fixing all the bugs in all this new
code.  If the usual pattern holds, that process will take about two months,
suggesting that we can expect 2.6.27 sometime in October.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Releases-2.6.27">Releases/2.6.27</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/291630/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor292150"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">2.6.27 - the rest of the story</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 31, 2008 1:41 UTC (Thu)
                               by <b>lacostej</b> (guest, #2760)
                              [<a href="/Articles/292150/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <em>Linux users hoping to upgrade their systems in the near future will be glad to know that a series of patches designed to make the kernel scale to 4096 processors has been merged. 
</em>
<p>
Damn it, I will still have to use out of tree patches for my 8192 processors mythtv box.
<p>
Jonathan, thanks for the humor! Always appreciated.
      
          <div class="CommentReplyButton">
            <form action="/Articles/292150/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor292173"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">2.6.27 - the rest of the story</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 31, 2008 6:26 UTC (Thu)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/292173/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment"><pre>
our editor is modest enough not to have mentioned the final line of the announcement

Quote:
Go to kernelnewbies or lwn for more reporting, I'm going to sleep for 
twenty-four hours now ;)
</pre></div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/292173/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor292178"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">/proc/1234/syscall vs /proc/1234/wchan</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 31, 2008 8:23 UTC (Thu)
                               by <b>walles</b> (guest, #954)
                              [<a href="/Articles/292178/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      I've asked this before both <a href="http://lkml.org/lkml/2007/9/24/24">on the kernel mailing list</a> and <a href="http://bugs.debian.org/444880">in Debian's bug tracker</a> without getting any reply, but how is the syscall file different from the wchan file?
<p>
/proc/1234/wchan has been there for ages, but seems broken AFAICT (see the linked posts).
      
          <div class="CommentReplyButton">
            <form action="/Articles/292178/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor292511"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">/proc/1234/syscall vs /proc/1234/wchan</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 3, 2008 21:44 UTC (Sun)
                               by <b>jimparis</b> (guest, #38647)
                              [<a href="/Articles/292511/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <p>I don't get zero, but on my x86_32 machine I always get "_stext".  My x86_64 machine gives more reasonable values.  My guess would be this option:
<pre>
config SCHED_NO_NO_OMIT_FRAME_POINTER
        def_bool y
        prompt "Single-depth WCHAN output"
        depends on X86_32
        help
          Calculate simpler /proc/&lt;PID&gt;/wchan values. If this option
          is disabled then wchan values will recurse back to the
          caller function. This provides more accurate wchan values,
          at the expense of slightly more scheduling overhead.

          If in doubt, say "Y".
</pre>
<p>On x86_32, by default, you will get no frame pointers, so the wchan output is not particularly useful.  At least, that's how I read things.  See arch/x86/Kconfig, kernel/Makefile, and arch/x86_kernel/process_32.c
<p>By the way, this quadruple(?) negative in kernel/Makefile makes my head hurt:
<pre>ifneq ($(CONFIG_SCHED_NO_NO_OMIT_FRAME_POINTER),y)</pre>
If it's not true that we're not not omitting them... AAH
      
          <div class="CommentReplyButton">
            <form action="/Articles/292511/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor292486"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">2.6.27 - the rest of the story</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 2, 2008 20:00 UTC (Sat)
                               by <b>BackSeat</b> (guest, #1886)
                              [<a href="/Articles/292486/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <i>The Palm T|X handheld computer is now supported.</i><p>
Meaning Linux now runs on that platform? Pointer to more info, please.
<p>
Rant: why doesn't Google understand "T|X"?
      
          <div class="CommentReplyButton">
            <form action="/Articles/292486/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor294397"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">2.6.27 - the rest of the story</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 18, 2008 4:11 UTC (Mon)
                               by <b>SEJeff</b> (guest, #51588)
                              [<a href="/Articles/294397/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment"><pre>
Because google supports some extended regexp. Here is an example for you to google for:
+"happy tree friends" +"(date|candy)"
</pre></div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/294397/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor294398"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">2.6.27 - the rest of the story</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 18, 2008 4:14 UTC (Mon)
                               by <b>SEJeff</b> (guest, #51588)
                              [<a href="/Articles/294398/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment"><pre>
Sorry forgot to say you just escape it like a normal extended regexp:
+palm +"T\|X"

The above search in google finds exactly what you are looking for.

For better google-foo spend an afternoon glazing over this site:
<a href="http://johnny.ihackstuff.com/ghdb.php">http://johnny.ihackstuff.com/ghdb.php</a>
</pre></div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/294398/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2008, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
