        <!DOCTYPE html>
        <html lang="en">
        <head><title>The 2012 realtime minisummit [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/520704/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/520346/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/520704/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>The 2012 realtime minisummit</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Ready to give LWN a try?</b>
<p>
With a subscription to LWN, you can stay current with what is happening in the Linux and free-software community and take advantage of subscriber-only site features.  We are pleased to offer you <b><a href="https://lwn.net/Promo/nst-trial/claim">a free trial subscription</a></b>, no credit card required, so that you can see for yourself.  Please, join us!
</blockquote>
<div class="FeatureByline">
           By <b>Jake Edge</b><br>October 24, 2012</br>
           </div>
<p>
As is generally the case when realtime Linux developers get together, the
discussion soon turns to how (and when) to get the remaining pieces of the
realtime patch set into the mainline.  That was definitely the case at the 2012
realtime minisummit, which was held October&nbsp;18 in conjunction with the <a
href="https://www.osadl.org/RTLWS-2012.rtlws-2012.0.html">14th Real Time
Linux Workshop</a> (RTLWS) in Chapel Hill, North Carolina.  Some other
topics were 
addressed as well, of course, and a lively discussion, which Thomas Gleixner
characterized as "twelve people siting around a table not agreeing on
anything", ensued.  Gleixner's joke was just that, as there was actually a
great deal of agreement around that table.
</p>

<p>
I unfortunately missed the first hour or so of the
minisummit, so I am using Darren Hart's notes, Gleixner's recap for the
entire workshop on October&nbsp;19, and some conversations with attendees as the
basis for the report on that part of the meeting.
</p>

<a href="/Articles/521023/">
<img src="https://static.lwn.net/images/2012/rtlws-group-sm.jpg" border=0 hspace=5 align="right"
height=265 width=205 alt="[RTLWS group photo]">
</a>

<h4>Development process</h4>

<p>
The first topic was on using Bugzilla to track bugs in the realtime
patches.  Hart and 
Clark Williams have agreed to shepherd a Bugzilla to help ensure the bugs
have useful information and provide the needed pieces for the developers to
track the problems down.  Bugs can now be reported to the <a
href="http://bugzilla.kernel.org/">kernel Bugzilla</a> using
<tt>PREEMPT_RT</tt> for the "Tree" field. Doing so will send an email to
developers who have registered their interest with Hart.

<p>
Gleixner has "mixed feelings" about it because it
involves "web browsers, mouse clicks and other things developers hate".
Previously, the normal way to report a bug was via the realtime or kernel
mailing lists, but Bugzilla does provide a way to attach large files
(e.g. log files) to bugs, which may prove helpful.  The realtime hackers
will know better in a year how well Bugzilla is working out and will report
on it then, he said.
</p>

<p>
There was general agreement that the development process for realtime is
working well.  Currently, Gleixner is maintaining a patch set based on 3.6,
which will be turned over to Steven Rostedt when it stabilizes.  Rostedt
then follows the mainline stable releases and is, in effect, the stable
"team" for realtime.  Those stable kernels are the ones that users and
distributions generally base their efforts on.  In the future, Gleixner has
plans to update his 3.6-rt tree with incremental patches that have already
been merged into other stable realtime kernels (3.0, 3.2, 3.4) to keep it
closer to the mainline 3.6 stable release.
</p>

<p>
There was some discussion of the <a href="/Articles/484337/">long-term
support initiative</a> (LTSI) kernels and what relationship those kernels have
with the realtime stable kernels.  The answer is: not much. LTSI plans to
have realtime versions of its kernels, but when Hart suggested
aligning the realtime kernel versions with those of LTSI, it was not
met with much agreement.  Gleixner said that the LTSI kernels would likely be
supported for years, "probably decades", which is well beyond the scope of
what the realtime developers are interested in doing.
</p>

<h4>3.6 softirq changes</h4>

<p>
One of the topics that came up frequently as part of both the
workshop/minisummit and the extensive hallway/micro-brewery track was
Gleixner's <a href="/Articles/520076/">softirq processing changes</a>
released in 3.6-rt1.  The locks for the ten different softirq types have been
separated so that the softirqs raised in the context of a thread can be
handled in that thread&mdash;without having to handle unrelated softirqs.
This solves a number of problems with softirq handling (victimizing
unrelated threads to process softirqs, configuring separate softirq thread
priorities 
to get the desired behavior, etc.), but is a big change from the existing
mainline implementation&mdash;as well as from previous
realtime patch sets. 
</p>

<p>
In the minisummit, Gleixner emphasized that more testing of the patches is
needed.  Networking, which is the most extensive user of softirqs in the
kernel, needs more testing in particular.
But the larger issue is the possibility of eventually eliminating softirqs
in the kernel completely.  To that end, each of the specific kernel
softirq-using subsystems
was discussed, with an eye toward eliminating the softirq dependency for
both realtime and mainline.
</p>

<p>
The use of softirqs in the network subsystem is "massive" and even the
network developers are not quite sure why it all works, according to
Gleixner.  But, softirqs seem to work fine for Linux networking, though the
definition of "working" is not necessarily realtime friendly.  If the kernel can pass the
network throughput tests and fill the links on high-speed test
hardware, then it is considered 
to be working.  Any alternate solution will have to meet or exceed the
current performance, which may be difficult.
</p>

<p>
The block subsystem's use of softirqs is mostly legacy code.  Something
like 90% of the deferred work has been shifted to workqueues over the
years.  Eliminating the rest won't be too difficult, Gleixner said.
</p>

<p>
The story with tasklets is similar.  They should be "easy to get rid of",
he said, it will just be a lot of work.  Tasklets are typically used by
legacy drivers and are not on a performance-critical path.  Tasklet
handling could be moved to its own thread, Rostedt suggested, but Gleixner
thought it would be better to
eliminate them entirely.
</p>

<p>
The timer softirq, which is used for the timer wheel (described and
diagrammed in this <a href="/Articles/152436/">LWN article</a>), is more
problematic.  The timer wheel is mostly used for timeouts in the network
stack 
and elsewhere, so it is pretty low priority.  It can't run with interrupts
disabled in either the mainline or in the realtime kernel, but it has to run
somewhere, so pushing it off to <tt>ksoftirqd</tt> is a possibility.
</p>

<p>
The high-resolution timers softirq is mostly problematic because of POSIX
timers and their signal-delivery semantics.  Determining which thread
should be the "victim" to deliver the signal to can be a lengthy process,
so it is not done in the softirq handler in the realtime patches as it is
in mainline. One solution that may be acceptable to mainline developers is
to set a flag in the thread which requested the timer, and allow it to do
all of the messy victim-finding and signal delivery.  That would mean that
the thread which requests a POSIX timer pays the price for its semantics.
</p>

<p>
Williams asked if users were not being advised to avoid signal-based
timers. Gleixner said that he tells users to "use pthreads".  But,
"customers aren't always reasonable", Frank Rowand observed.  He pointed
out that some he knows of are using floating point in the kernel, and now
that they have hardware floating point want to add that context to what is
saved during context switches.  Paul McKenney noted that many processors
have lots of floating point registers which can add "multiple hundreds of
<strike>milliseconds</strike> microseconds" to save or restore.  Similar problems exist for the
auto-vectorization code that is being added to GCC, which will result in
many more registers needing to be saved.
</p>

<p>
Back to the softirqs, McKenney said that the read-copy-update (RCU) work
had largely <a href="/Articles/518953/">moved to 
threads in 3.6</a>, but that not all of the processing moved out of the
softirq.  He had tried to completely move out of softirq in a patch a ways
back, but Linus Torvalds "kicked it out immediately".  He has some ideas of
ways to address those complaints, though, so eliminating the RCU softirq
should be possible.
</p>

<p>
Finally, the scheduler softirq does "nothing useful that I can see",
Gleixner said.  It mostly consists of heuristics to do load balancing, and
Peter Zijlstra may be amenable to moving it elsewhere.  Mike Galbraith
pointed out that the <a href="/Articles/490114/#numa">NUMA scheduling</a>
work will make the problem worse, as 
will power
management.  ARM's <a href="/Articles/501501/">big.LITTLE scheduling</a>
could also complicate things, Rowand said.
</p>

<p>
There is a great deal of interest in getting those
changes into the 3.2 and 3.4 realtime kernels.  Later in the meeting,
Rostedt said that he would 
create an unstable branch of those kernels to facilitate that.  The
modifications are "pretty local", Gleixner said, so it should be fairly
straightforward to backport the changes.  In addition, it is unlikely that
backports of other fixes into the mainline stable kernels (which are picked up
by the realtime stable kernels) will touch the changed areas, so the
ongoing maintenance should not be a big burden.
</p>

<h4>Upstreaming</h4>

<p>
Gleixner said that he is "swamped" by a variety of tasks, including
stabilizing the realtime tree, the softirq split, and a "huge backlog" of
work that needs to be done for the CPU hotplug rework.  Part of the latter
was merged for 3.7, but there is lots more to do.  Rusty Russell has
offered to help once Gleixner gets the infrastructure in place, so he needs
to "get that out the door".  Beyond that, he also spends a lot of time
tracking down bugs found by the Open Source Automation Development Lab
(OSADL) testing and from Red Hat bug 
reports.  

<p>
He needs some help from the other realtime kernel developers in order
to move more of the patch set into the mainline.
Those in the room seemed very willing to help.  The first step is to go
through all of the realtime patches and work on any that are "halfway
reasonable to 
get upstream" first.
</p>

<p>
One of the top priorities for upstreaming is not a kernel change, but is a
change needed in the GNU C library (glibc).  Gleixner noted that the
development process for glibc has gotten a "lot better" recently and that
the new maintainers are doing a "great job".  That means that a
longstanding <a
href="http://sourceware.org/bugzilla/show_bug.cgi?id=11588">problem with
condvars and priority inheritance</a> may finally be able to be addressed.
</p>

<p>
When priority inheritance was added to the kernel, Ulrich Drepper wrote the
user-space portion for glibc.  He had a solution for the problem of
condvars not being 
able to specify that they want to use a priority-inheriting mutex, but that
solution was one that Gleixner and Ingo Molnar didn't like, so nothing was
added to glibc.
</p>

<p>
Three years ago, Hart presented a solution at the RTLWS in Dresden, but he
was unable to get it into glibc.  It is a real problem for users according
to Gleixner and Williams, so Hart's solution (or something derived from it)
should be merged into glibc.  Hart said he would put that at the top of his
list. 
</p>

<h4>SLUB</h4>

<p>
Another area that should be fairly easy to get upstream are changes to the
SLUB allocator to make it work with the realtime code.  SLUB developer
Christoph Lameter has done some work to make the core allocator lockless
and for it not to disable interrupts or preemption.  Lameter's work was mostly
to support enterprise users on large NUMA systems, but it
should also help make SLUB work better with realtime.
</p>

<p>
If SLUB can be made to work relatively easily, Gleixner would be quite
willing to drop support for SLAB.  The SLOB allocator is targeted at
smaller, embedded systems, including those without an MMU, so it is not
an interesting target.  Besides which, SLOB's "performance is terrible",
Rostedt said.  During the minisummit, Williams was able to build and boot
SLUB on a realtime system, which "didn't explode right away", Gleixner
reported in the recap.  That, coupled with SLUB's better NUMA performance,
may make it a much better target anyway, he said. 
</p>

<p>
Switching to SLUB might also get rid of a whole pile of "intrusive changes"
in the memory allocator code.  The realtime memory
management changes will be some of the hardest to sell to the
upstream developers, so any reduction in the size of those patches will be
welcome. 
</p>

<p>
There are a number of places where drivers call <tt>local_irq_save()</tt>
and <tt>local_irq_enable()</tt> that have been changed in the realtime tree
to call <tt>*_nort()</tt> variants.  There are about 25 files that use
those variants, mostly drivers designed for uniprocessor machines that have
never been fixed for multiprocessor systems.  No one really cares about
those drivers any more, Gleixner said, so the <tt>_nort</tt> changes can either go into
mainline or be trivially maintained out of it.
</p>

<h4>Spinlocks</h4>

<p>
Bit spinlocks (i.e. single bits used as spinlocks) need to be changed to
support realtime, and that can probably be sold because it would add
lockdep coverage.  Right now, bit spinlocks are not checked by lockdep,
which is a debugging issue.  In converting bit spinlocks to regular
spinlocks, Gleixner said 
he found 3-4 locking bugs in the mainline, so it would be beneficial to
have a way to check them.
</p>

<p>
The problem is that bit spinlocks are typically using flag
bits in size-constrained structures (e.g. <tt>struct page</tt>).  But, for
debugging, it will be acceptable to grow those structures when lockdep is
enabled. For realtime, there is a need to just "live with the fact that we
are growing some structures", Gleixner said.  There aren't that many bit
spinlocks; two others that he mentioned were the buffer head lock and the
journal head lock.
</p>

<p>
Hart brought up the sleeping spinlock conversion, but Gleixner said that part is
the least of his worries.  Most of the annotations needed have already been
merged, as have the header file changes.  The patches are "really
unintrusive now", though it is still a big change.
</p>

<p>
The CPU hotplug rework should eliminate most of the changes required for
realtime once it gets merged.  The <a href="/Articles/452884/">migrate
enable and disable patches</a> are 
self-contained.  The high-resolution timers changes and softirq changes can
be fairly self-contained as well.  Overall, getting the realtime patches
upstream is "not that far away", Gleixner said, though some thought is
needed on good arguments to get around the "defensive list" of some
mainline developers.
</p>

<p>
To try to ensure they hadn't skipped over anything, Williams put up a January
email from Gleixner with a "to do" list for the realtime patches.  There
are some <tt>printk()</tt>-related issues that were on the list.  Gleixner
said those still linger, and it will be "messy" to deal with them.
</p>

<p>
Zijlstra was at one time opposed to the explicit migrate enable/disable
calls, but that may be not be true anymore, Gleixner said.  The problem may
be that there will be a question of who uses the code when trying to get
the infrastructure merged.  It is a "hen-egg problem", but there needs to
be a way to ensure that processes do not move between CPUs, particularly
when handling 
per-CPU variables. 
</p>

<p>
In the mainline, spinlocks disable preemption (which disables migration),
but that's not true in realtime.  The current mainline behavior is somewhat
"magic", and realtime adds an explicit way to disable migration if that's
truly what's needed.  As Paul Gortmaker put it, "making it explicit is an
argument for it in it's own right".  Gleixner said he would talk to
Zijlstra about a use case and get the code into shape for mainline.
</p>

<p>
Gortmaker asked if there were any softirq uses that could be completely
eliminated.  McKenney believes he can do so for the RCU softirq, but he
does have the reservation that he has never successfully done so in the past.
High-resolution timers and the timer wheel can both move out of softirqs,
Gleixner said, though the former may be tricky.  The block layer softirq
work can be moved to workqueues, but the network stack is the big issue.
</p>

<p>
One possible solution for the networking softirqs is something Rostedt
calls "ENAPI" (even newer API, after "NAPI", the new API).  When using
threaded interrupt handlers, the polling that is currently done in the
softirq handler could be done directly in the interrupt handler thread.  If
that 
works, and shows a performance benefit, Gleixner said, the network driver
writers will do much of the work on the conversion.
</p>

<p>
Wait queues are another problem area.  While most are "pretty
straightforward", there are some where the wait queue has a callback that
is called on wakeup for every woken task.  Those callbacks could do most
anything, including sleep, which prevents those wait queues from being
converted to use raw locks. Lots of places can be replaced, but not for
"NFS and other places with massive callbacks", Gleixner said.
</p>

<p>
There are a number of pieces that should be able to go into mainline
largely uncontended.  Code to shorten the time that locks are held and
to reduce the interrupt and preempt disabled regions is probably
non-controversial. The <tt>_nort</tt> annotations may also fall into that
category as they don't hurt things in mainline.
</p>

<h4>CPU isolation</h4>

<p>
The final item on the day's agenda is a feature that is not part of the
realtime patches, but is of interest to many of the same users: CPU
isolation.  That feature, which is known by other names such as "adaptive
NOHZ", would allow users to dedicate one or more cores to user-space
processing by 
removing all kernel processing from those cores.  Currently, nearly all
processing can be moved to other cores using CPU affinity, but there is
still kernel housekeeping (notably CPU time accounting and RCU) that will
run on those CPUs.
</p>

<p>
Frédéric Weisbecker has been working on CPU isolation, and he attended the
minisummit at least partly to give an update on the status of the feature.
Accounting for CPU time without the presence of the timer tick is one of
the areas that needs work.  Users still want to see things like load
averages reflect the time being spent in user-space processing on an
isolated CPU, but that information is normally updated in the timer tick
interrupt. 
</p>

<p>
In order to isolate the CPU, though, the timer tick needs to be turned
off.  In the recap, Gleixner noted that the high-performance computer users
of the feature aren't so concerned about the time spent in the timer tick
(which is minimal), but the cache effects from running the code.  Knocking
data and instructions out of the cache can result in a 3% performance hit,
which is significant for those workloads.
</p>

<p>
To account for CPU time usage without the tick, adaptive NOHZ will use the
same hooks that RCU uses to calculate the CPU usage.  While the CPU is
isolated, the CPU time will just be calculated, but won't be updated until
the user-space process enters the kernel (e.g. via a system call).  The
tick might be restarted when system calls are made, which will eventually
occur so that the CPU-bound process can report its results or get new
data.  Restarting the tick would allow
the CPU 
accounting and RCU housekeeping to be done.  Weisbecker felt that it
should only be restarted if it was needed for RCU; even that might possibly
be offloaded to a separate CPU.
</p>

<p>
That led to a discussion of what the restrictions there are for using CPU
isolation.  There was talk of trying to determine which system calls will
actually require restarting the tick, but that was deemed too
kernel-version specific to be useful.  The guidelines will be that anything
other than one thread that makes no system calls on the CPU may result in
less than 100% of the CPU available.  Gleixner suggested adding a
tracepoint that would indicate when the CPU exited isolated mode and why.
McKenney suggested a warning
like "this code needs a more deterministic universe"&mdash;to some chuckles
around the table.
Weisbecker and Rostedt plan to work on CPU isolation in the near term, with
an eye toward getting it upstream soon.

<p>
And that is pretty much where the realtime minisummit ended.  While there
is plenty of work still to do, it is clear that there is increasing
interest in "finishing" the task of getting the realtime changes merged.
Gleixner confessed to being tired of maintaining it in the recap session,
and that feeling is probably shared by others.  Given that the mainline has
 benefited from the realtime changes already merged, it seems likely
that will continue as more goes upstream. The trick will be in convincing
the other kernel hackers of that.
</p>
<p>
[ I would like to thank OSADL and RTLWS for supporting my travel to the minisummit and workshop. ]<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Interrupts-Software">Interrupts/Software</a></td></tr>
            <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Realtime">Realtime</a></td></tr>
            <tr><td><a href="/Archives/ConferenceIndex/">Conference</a></td><td><a href="/Archives/ConferenceIndex/#Realtime_Linux_Workshop-2012">Realtime Linux Workshop/2012</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/520704/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor521051"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2012 realtime minisummit</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 24, 2012 20:16 UTC (Wed)
                               by <b>frowand</b> (guest, #26209)
                              [<a href="/Articles/521051/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Bugzilla is intended as a way to track realtime bugs and an additional way to report realtime bugs or archive information related to a bug.  The old method of sending bugs to the realtime and kernel mailing lists is still valid and will probably result in a faster response.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/521051/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor521093"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2012 realtime minisummit</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 24, 2012 22:16 UTC (Wed)
                               by <b>jeff_marshall</b> (subscriber, #49255)
                              [<a href="/Articles/521093/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;Paul McKenney noted that many processors have lots of floating point registers which can add "multiple hundreds of milliseconds" to save or restore.</font><br>
<p>
Surely this was either misspoken or misquoted? Even substituting microseconds for milliseconds doesn't add up - you can do a lot of work in that amount of time when your CPU clock runs in the Ghz.<br>
<p>
Am I missing something here?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/521093/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor521390"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2012 realtime minisummit</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 25, 2012 22:55 UTC (Thu)
                               by <b>PaulMcKenney</b> (<b>&#x272D; supporter &#x272D;</b>, #9624)
                              [<a href="/Articles/521390/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      The correct value is hundreds of microseconds, but it is entirely possible that I said &ldquo;milliseconds&rdquo; by mistake.  It would not be the first time.
      
          <div class="CommentReplyButton">
            <form action="/Articles/521390/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor521392"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2012 realtime minisummit</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 25, 2012 23:05 UTC (Thu)
                               by <b>jake</b> (editor, #205)
                              [<a href="/Articles/521392/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; it is entirely possible that I said “milliseconds” by mistake</font><br>
<p>
it's also entirely possible that I mis-heard you ... in any case, i struck milliseconds and added microseconds ...<br>
<p>
thanks,<br>
<p>
jake<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/521392/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor521538"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2012 realtime minisummit</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 26, 2012 14:22 UTC (Fri)
                               by <b>PaulMcKenney</b> (<b>&#x272D; supporter &#x272D;</b>, #9624)
                              [<a href="/Articles/521538/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Either way, thank you!<br>
<p>
Of course, if FPGAs and and GPGPUs were to have large private memories that needed to be saved and restored on context switch, then we could see truly huge context-switch times.  ;-)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/521538/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor521114"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2012 realtime minisummit</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 25, 2012 0:16 UTC (Thu)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/521114/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Gleixner has "mixed feelings" about it because it involves "web browsers, mouse clicks and other things developers hate".</font><br>
<p>
Just like git revolutionized version control, I can't wait for the day a few kernel hackers spare a few spare cycles and turn the database and web browser worlds on their head.<br>
<p>
The world can't wait any longer! Please think about and feel for all these other software developers silently suffering because this horribly painful, unreliable and inefficient invention of this age: the bug tracker. If only they knew they could just use mutt instead and make their life instantly better...<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/521114/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor521213"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2012 realtime minisummit</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 25, 2012 10:10 UTC (Thu)
                               by <b>mpr22</b> (subscriber, #60784)
                              [<a href="/Articles/521213/">Link</a>] 
      </p>
      
      </div>
      </summary>
      I'm rather fond of Debian's bug tracker. I wish more people used the same model.
      
          <div class="CommentReplyButton">
            <form action="/Articles/521213/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor524631"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">CPU Isolation observed in the wild on LG Nexus 4 handset?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 13, 2012 8:25 UTC (Tue)
                               by <b>alison</b> (subscriber, #63752)
                              [<a href="/Articles/524631/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
In the same week, I read two comments about accuracy of userspace timing and was struck by the juxtaposition.   <br>
<p>
0. Jake's coverage about CPU Isolation: "Accounting for CPU time without the presence of the timer tick is one of the areas that needs work. Users still want to see things like load averages reflect the time being spent in user-space processing on an isolated CPU, but that information is normally updated in the timer tick interrupt.  In order to isolate the CPU, though, the timer tick needs to be turned off."<br>
<p>
--AND-- <br>
<p>
1. Engadget's review of the new LG Nexus 4 handset at <a rel="nofollow" href="http://www.engadget.com/2012/11/02/nexus-4-review/:">http://www.engadget.com/2012/11/02/nexus-4-review/:</a> "we fully expected the phone to be even faster than the Optimus G, mainly because LG and Google have had the opportunity to make sure Android 4.2 is fully optimized with the manufacturer's hardware, and the lack of custom skin should theoretically keep everything running efficiently. The second concern is in the benchmarks we ran. . .  . Since the Nexus 4 and the Optimus G are so similar in their chipsets and other components, the two's metrics should be easily comparable -- or at least in the same neighborhood as each other. But as you can see in the table above, some of the numbers are the complete opposite of what we expected. In fact, some of these results (most notably, Quadrant and Vellamo) are even lower than what we typically get out of dual-core Snapdragon S4 processors."<br>
<p>
Hmmmm!   Coincidence or no?    Might some clever young Android engineer have optimized 4.2 for the flagship Nexus 4 a bit prematurely with CPU Isolation?    I'm curious to hear the verdict of you real-time experts.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/524631/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2012, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
