        <!DOCTYPE html>
        <html lang="en">
        <head><title>ELC: Status of embedded Linux [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/383363/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/382742/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/383363/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>ELC: Status of embedded Linux</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Ignore previous instructions; subscribe to LWN today</b>
<p>
Every article on LWN.net is written by humans, for humans. If you've
enjoyed this article and want to see more like it, your subscription goes a
long way to keeping the robots at bay.  We are offering <a href="https://lwn.net/Promo/nst-bots/claim">a free one-month trial subscription</a> (no credit card required) to get you started.
</blockquote>
<div class="FeatureByline">
           By <b>Jake Edge</b><br>April 14, 2010</br>
           </div>
<p>
<a href="http://www.embeddedlinuxconference.com/elc_2010/">Embedded Linux
Conference</a> (ELC) organizer Tim Bird surveyed the embedded Linux landscape in
a talk he gave at the conference.  He looked at new and proposed kernel
features that embedded developers might be interested in as well as issuing
a "call to arms" to those developers to get more involved with the
rest of the community.  This talk is a regular feature at ELC to help the
embedded community stay on top of the "<q>ripping</q>" speed of
kernel development.
</p>

<p>
There have been four new kernels since last year's conference, and Bird
listed the interesting features for the embedded space in each of
2.6.30-33, as well as noting that LogFS had finally made it into the kernel
in 2.6.34, something that he was concerned might not ever happen.  The
speed of kernel development is amazing, he said, and the great thing about
it is that "<q>even while I am sleeping in my bed, people are pounding
away on it</q>".
</p>

<p>
He pointed to a few "<q>patches to watch</q>" that may be coming in
new kernels, specifically the kbuild <tt>CROSS_COMPILE</tt> option, which
will make it easier to build for multiple architectures.  He also noted
Arnd Bergmann's <a href="http://lwn.net/Articles/357803/">asm-generic</a>
patches that are geared towards making it easier to add new architectures
to the kernel&mdash;without propagating the bugs and quirks from existing ones.
</p>

<h4>Boot speed</h4>

<p>
Bird then looked at different "technology areas" to point out interesting
features or work going on in those areas.  Boot time is a "<q>hot
topic</q>" right now; it would have been in the past if the embedded
community was more involved in mainline kernel development.  The Moblin <a
href="http://lwn.net/Articles/299483/">five second boot</a> effort really
kickstarted that work.  He noted that he has a Sony (his employer) video
camera that boots Linux in 1.5 seconds; "<q>I'm very proud of
that</q>", he said.
</p>

<p>
Several new kernel features are available to help reduce boot time,
including <a href="http://lwn.net/Articles/314808/">asynchronous function
calls</a>, which allow some parts of device initialization to run in
parallel.  There is also <tt>scripts/bootgraph.pl</tt> to help visualize
where boot time is being spent.
</p>

<p>
<a href="http://lwn.net/Articles/331818/">Devtmpfs</a> was also noted as a
way to decrease boot times, with some seeing a 0.6 second reduction on desktops.  Bird
said that there needs to be some testing done on the embedded side to see
how much it can help there.  He also listed two patches that speed up
symbol resolution for module loading by getting rid of the current linear
search.  One switches to a binary search and the other uses a hash table.
For Bird's use cases, he always statically links in drivers, but has heard
that more embedded developers are going the loadable module route.
<p>
Greg Kroah-Hartman piped up that he needed one of those two patches for MeeGo, but that
the submitters had disappeared.  There was general agreement that
contacting them and getting something upstream would be good.
</p>

<h4>Filesystems</h4>

<p>
Several different filesystems for embedded use cases were listed by Bird.
Squashfs has been out of the mainline for years, but was merged in 2.6.29,
and has since been improved by others in a "<q>classic case</q>"
demonstrating the advantages of mainline code.  Ubifs is also in the
mainline and folks at Toshiba have been characterizing its performance,
which they reported on at the CE Linux Forum (CELF) Japan Jamboree.  It has
"<q>really slow mount times</q>" in some cases, which CELF would like
to fund someone to fix. 
</p>

<p>
LogFS is "<q>way better optimized</q>" for certain flash devices and
has fast mount times, he said.  He noted that AXFS, the advanced
execute-in-place (XIP) filesystem, had kind of disappeared, so it didn't
appear to be on track for mainlining.  He has been
playing with AXFS at Sony to try to further decrease boot time.
</p>

<p>
Bird also noted that the <a href="http://lwn.net/Articles/338981/">VFAT
patent avoidance patches</a> had not made it into the mainline.  It would
be useful for some embedded devices, he said.  Most embedded developers
work around the patent by disabling VFAT and using 8.3 filenames, which is
somewhat unfortunate.  Another thing he is keeping an eye on is VFS-based
union mounts, which would allow embedded developers to stop creating
"<q>filesystems with weird links</q>" between them as is currently common.
</p>

<h4>Power management and realtime</h4>

<p>
The runtime power management code has been merged, which will allow suspending
and resuming individual system components to reduce power consumption.
There is ongoing work on asynchronous suspend/resume, which Bird said he
didn't know very much about, but it's "<q>gotta be really cool</q>".
An audience member helped out by saying that it is in some ways like the
asynchronous initialization code (for faster boot), but "<q>in the other
direction</q>". 
</p>

<p>
The <tt>RT_PREEMPT</tt> patchset "<q>continues its slow march into the
kernel</q>", with <a href="http://lwn.net/Articles/302043/">threaded
interrupt handlers</a> being merged in 2.6.30 and preparatory work for the future <a
href="http://lwn.net/Articles/357800/">sleeping spinlocks</a> merge that
went into 2.6.33.  There
are still some big kernel lock issues (BKL) to be resolved and CELF may fund some
work in that area.
</p>

<h4>Kernel size</h4>

<p>
The slide for kernel size and memory use had a picture of a "<q>hybrid
Winnebago</q>", which is the image Bird has of the kernel today.  It
just keeps growing in size.  To help embedded developers make better use of
limited memory, there is the <a
href="http://lwn.net/Articles/329458/">smem tool</a> that was funded by
CELF.  He has used it in a few projects this year and it "<q>has been
very helpful</q>".
</p>

<p>
Various compression methods have been added to compress the kernel image in
different ways.  LZMA can be up to 30% better than gzip,  and LZO is not as
good at compression, but is much faster.  There are tradeoffs dependent on
processor speed and I/O bandwidth that make it more difficult to pick the
right compression method, as Dirk Hohndel pointed out.
</p>

<p>The ramzswap device (also known as <a
href="http://lwn.net/Articles/334649/">compcache</a>) allows in-memory
compressed swap.  It is "<q>really cool</q>" but the maintainer only
was able to benchmark on desktop systems.  It would be good if someone
could do some benchmarking on embedded systems, Bird said.

<h4>Tracing and security</h4>

<p>
Ftrace now has support for dynamic probes that came in 2.6.33, and the perf
tool can place and use those probes as well.  There is  tracing of
kernel variable access and modification available now.  The perf "diff" mode can show the
performance differences between two runs, and also came in 2.6.33.

<p>
The TOMOYO merge in 2.6.30 was "<q>a big deal</q>" because it finally was able
to get path-based security into the kernel.  NTT Data is now adding TOMOYO
rules to Android.  Bird is in favor of a diversity of choices for security
as it gives people a chance to demonstrate which is the best solution for
various use cases.  As part of that, CELF funded a <a
href="http://www.embeddedalley.com/pdfs/Smack_for_DigitalTV.pdf">study [PDF]</a> for applying the
Smack security module in a television use case and found that the overhead
was higher than they expected.

<h4>CELF contract work</h4>

<p>
CELF has funded various projects over the last year including smem,
out-of-memory notifications in cgroups, SquashFS, the Smack analysis,
device trees for ARM, and the <tt>-ffunction-sections</tt> work to put each
kernel function in its own section to assist with dead code removal.  Going
forward, CELF has an <a
href="http://elinux.org/CELF_Open_Project_Proposal_2010">open project
proposal</a> plan that will start funding new projects in the next few
weeks.  It is also sponsoring Matt Mackall to be one of the two Linux kernel
embedded maintainers (David Woodhouse is the other).

<h4>A call to arms</h4>

<p>
Bird ended his talk with a list of things that embedded developers can do
to work better with the community.  At the top of that list was "<q>work
at top of tree</q>".  He realized that when he gives these talks, he is
generally talking to people who aren't using the kernels he talks about
because embedded folks tend to pick a kernel and stick with it. "<q>It's
difficult</q>" to work with the most recent kernel, but it's worth it.
"<q>Version gap is the single biggest problem</q>" in embedded Linux.
He suggested that embedded developers beat up on their board vendor to get
board support packages using the latest kernels and to do their testing on
boards that are already supported in the mainline.

<p>
The other suggestion he had was not to "<q>wait for others to test new
features</q>", and instead to do the testing themselves.  He listed a
number of things that need testing in the mainline: LogFS, Ubifs mount
times, ramzswap, runtime power management, and so on.  "<q>Post the
results to the <a href="http://elinux.org/Main_Page">elinux.org
wiki</a></q>" or come to the next conference (October 27-28 in
Cambridge, UK) and tell him about it.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Embedded_systems">Embedded systems</a></td></tr>
            <tr><td><a href="/Archives/ConferenceIndex/">Conference</a></td><td><a href="/Archives/ConferenceIndex/#Embedded_Linux_Conference-2010">Embedded Linux Conference/2010</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/383363/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor383682"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">ELC: Status of embedded Linux</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2010 19:23 UTC (Fri)
                               by <b>eparis123</b> (guest, #59739)
                              [<a href="/Articles/383682/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <p><i>&nbsp;&nbsp;&nbsp;&nbsp;As part of that, CELF funded a study [PDF] for applying the Smack security module in a television use case and found that the overhead was higher than they expected.</i></p>

<p>The full picture (report's conclusion):</p>

<p>As part of that, CELF funded a study [PDF] for applying the Smack security module in a television use case and found that the overhead was higher than they expected.</p>

<p>The last part of the document provides results of SMACK memory consumption and performance
analysis showing that SMACK is suitable for embedded systems and, in particular, to digital TV
platforms. Even though some numbers reported by performance tests can be relatively high, they have
been derived under unusual system load different from normal TV operations.</p>

      
          <div class="CommentReplyButton">
            <form action="/Articles/383682/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor383683"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">ELC: Status of embedded Linux</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 16, 2010 19:27 UTC (Fri)
                               by <b>eparis123</b> (guest, #59739)
                              [<a href="/Articles/383683/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <p>Sorry, that should have been:</p>

<p>"The proposed implementation is presented along with verification process and its results. It proves the
feasibility of SMACK application.</p>

<p>The last part of the document provides results of SMACK memory consumption and performance
analysis showing that SMACK is suitable for embedded systems and, in particular, to digital TV
platforms. Even though some numbers reported by performance tests can be relatively high, they have
been derived under unusual system load different from normal TV operations."</p>

<p>The PDF is also archived here: <a href="http://www.webcitation.org/5p2W9rjnH">http://www.webcitation.org/5p2W9rjnH</a></p>

      
          <div class="CommentReplyButton">
            <form action="/Articles/383683/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2010, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
