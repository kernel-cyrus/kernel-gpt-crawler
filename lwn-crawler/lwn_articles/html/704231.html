        <!DOCTYPE html>
        <html lang="en">
        <head><title>Dirty COW and clean commit messages [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/704231/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/704085/">Return to the Front page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/704231/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>Dirty COW and clean commit messages</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>This article brought to you by LWN subscribers</b>
<p>
Subscribers to LWN.net made this article &mdash; and everything that
       surrounds it &mdash; possible.  If you appreciate our content, please
       <a href="/Promo/nst-nag3/subscribe">buy a subscription</a> and make the next
       set of articles possible.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>October 21, 2016</br>
           </div>
We live in an era of celebrity vulnerabilities; at the moment, an
unpleasant kernel bug called "Dirty COW" (or CVE-2016-5195) is taking its
turn on the runway.  This one is more disconcerting than many due to its
omnipresence and the ease with which it can be exploited.  But there is
also some unhappiness in the wider community about how this vulnerability
has been handled by the kernel development community.  It may well be time
for the kernel project to rethink its approach to serious
security problems.
<p>
Dirty COW (which, naturally, has its own <a
href="http://dirtycow.ninja/">logo and web page</a>, though this one is a
bit on the satirical side) is a race condition in the kernel's memory-management
subsystem.  By timing things right, a local attacker can exploit the
copy-on-write mechanism to turn a read-only mapping of a file into a
writable mapping; with that, a file that should not be writable can be
written to.  It doesn't take much imagination to see how the ability to
overwrite files could be used to escalate privileges in any of a number of
ways.
<p>
The core code with the vulnerability is present in every Linux system
(excluding, perhaps, no-MMU systems, which lack the sort of protection that
has been defeated here in the first place).  The known exploit depends on
access to <tt>/proc/self/mem</tt>, which is <i>not</i> universally
available, but, even on systems that do not provide that access, there are
other ways to exploit the bug.  The exploit happily bypasses almost every
hardening technique out there; strong sandboxing with mechanisms like
<tt>seccomp()</tt> might slow it down, but counting on that is probably not
wise either.  The only real protection is to upgrade to a kernel containing
the fix.
<p>
Given that the nature of the vulnerability was known when the fix was
applied, one might think that the development community would go out of its
way to inform its users of the nature of the problem.  The actual fix, when
applied to the mainline, was grouped with a set of "cleanups"; Linus's <a
href="https://git.kernel.org/linus/63ae602cea637ee4a6490d940c0da5d78bd0bbe0">merge
commit</a> for that set mentioned this fix at the very end:
"<q>Additionally, there's a 
fix for an ancient bug related to FOLL_FORCE and FOLL_WRITE by me.</q>"
The <a
href="https://git.kernel.org/linus/19be0eaffa3ac7d8eb6784ad9bdbc7d67ed8e619">fix
itself</a> is not much more illuminating:
<p>
<div class="BigQuote">
	This is an ancient bug that was actually attempted to be fixed once
	(badly) by me eleven years ago in commit 4ceb5db9757a ("Fix
	get_user_pages() race for write access") but that was then undone
	due to problems on s390 by commit f33ea7f404e5 ("fix get_user_pages
	bug").
</div>
<p>
The fix was (properly) rushed out into <a href="/Articles/704078/">a set of
stable updates</a>, but there was no mention of the vulnerability there
either.  So users of the kernel are entirely reliant on others to inform
them that an important vulnerability has been fixed and that they should really
be updating their systems.
<p>
There is nothing new about this practice; Linus and others have long had a
habit of, at best, neglecting to mention vulnerabilities that have been
fixed in released kernels.  There are a number of reasons given for
operating this way, starting with a general disdain for the "security
circus" and the industry that lives on responding to yesterday's
vulnerabilities.  <i>Every</i> kernel release fixes a great many serious
bugs, they say, some of which certainly have security implications that
nobody has (publicly) noticed yet.  Highlighting specific vulnerabilities
only draws attackers' attention to them while glossing over the fact that
the only way to get all of the important fixes is to run the latest
releases.  Security bugs are just bugs, and we fix them like every other
bug.
<p>
Everything expressed in that viewpoint could be said to be entirely true
(though it glosses over the <i>new</i> vulnerabilities that can also come
with the latest releases), but it is, in your editor's view, insufficient
to justify this practice.
<p>
One of the core tenets of kernel development is that every change must
describe the problem that is being solved and what the impact of the change
will be.  The core <a
href="https://www.kernel.org/doc/Documentation/SubmittingPatches">SubmittingPatches</a>
document, to which all developers are referred, says:
<p>
<div class="BigQuote">
	Describe user-visible impact.  Straight up crashes and lockups are
	pretty convincing, but not all bugs are that blatant.  Even if the
	problem was spotted during code review, describe the impact you
	think it can have on users.
</div>
<p>
Core reviewer Andrew Morton asks developers to add information about
user-visible impacts so often (<a href="/Articles/704251/">example</a>)
that one assumes he has it bound to a special key sequence.  The idea that
a patch should describe what it does, and why, is deeply ingrained in the
community; it's the only way that we can judge patches properly, and it's
the only way that developers will know why a change was made when they
encounter it in the repository years later.  It's also the only way for
users and distributors to know how important a particular patch is known to
be.
Failing to document the security impact of patches  violates that rule at a
time when that information is needed the most.
<p>
When, for example, a kernel bug can cause random corruption and loss of
data within a filesystem, <a href="/Articles/645722/">the fix</a> describes
the problem and its consequences.  That way, users and distributors
understand the importance of the change.  Security bugs are bugs too, and
their consequences should be spelled out as well.  The fact that developers
are not always aware that a bug has security implications does not excuse
omitting that information when it is available.
<p>
It has been a long time since all but the laziest of attackers grepped the
changelogs for explicit mention of vulnerabilities.  As a rule, they are
far more interested in the changes that introduce the vulnerabilities in
the first place, or those that quietly fix vulnerabilities that the
original developer might not even realize are there.  Suppressing
information about security fixes may keep vulnerabilities out of the awareness of
those who are not actively looking for them — the users who may be
exploited via those vulnerabilities — but it doesn't fool the exploit
creators.
<p>
What suppressing security-related information <i>does</i> do is this: it
calls into question the community's seriousness about dealing with security
issues in general.  When users are not told about the known effects of
bugs, they rightly assume that they will be unaware of other silently fixed
problems.  So they can never know that they have the fixes for all known
security issues unless they run the absolute latest releases.  Staying on
the leading edge is not an option for a huge portion of our user base, so
they are forced to live with the worry that important fixes have been
hidden from them.  That is not a situation that engenders confidence in the
kernel in general.

<p>
To summarize: the suppression of information about the security
implications of a change runs counter to the kernel community's principles,
makes life harder for our users and distributors, does little or nothing to
slow down attackers, and hurts the kernel's reputation in general.  A
practice that might have made sense (but probably didn't) against script
kiddies in the early 1990s is clearly out of place in 2016.  Your editor
humbly suggests to the kernel development community that the time has long
since come to reconsider how security-related patches are handled.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Development_model-Security_issues">Development model/Security issues</a></td></tr>
            <tr><td><a href="/Security/Index/">Security</a></td><td><a href="/Security/Index/#Bug_reporting">Bug reporting</a></td></tr>
            <tr><td><a href="/Security/Index/">Security</a></td><td><a href="/Security/Index/#Linux_kernel">Linux kernel</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/704231/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor704275"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 21, 2016 17:40 UTC (Fri)
                               by <b>Kamiccolo</b> (subscriber, #95159)
                              [<a href="/Articles/704275/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I think that there is one more side of this story and argument for not leaving low hanging fruits for "script kidies" --- the vast amount of devices running ancient kernels without any option to patch  and/or no proper maintainance and communication from manufacturers.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704275/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor704277"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 21, 2016 18:00 UTC (Fri)
                               by <b>lambda</b> (subscriber, #40735)
                              [<a href="/Articles/704277/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <p>This issue has been all over the news due to active exploits in the wild. Hiding it from script kiddies clearly hasn't worked.
<p>Furthermore, there are a large number of troubling attacks these days that are not merely from script kiddies, but from both sophisticated organized crime operations and nation-state level actors, who have the resources to monitor and analyze patches for security relevance. Not publicly announcing the severity makes it harder for users, administrators, and distros to learn about and prioritize deploying the fixes, while leaving the window open for exploitation by malicious actors who have noticed the relevance.
      
          <div class="CommentReplyButton">
            <form action="/Articles/704277/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor704373"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">well funded super predators in the cyber jungle</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 23, 2016 18:40 UTC (Sun)
                               by <b>Garak</b> (guest, #99377)
                              [<a href="/Articles/704373/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
+1, Snowden happened<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704373/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor704276"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 21, 2016 18:00 UTC (Fri)
                               by <b>ware</b> (guest, #83607)
                              [<a href="/Articles/704276/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I appreciate the idea that the way security vulnerabilities in the Linux kernel are handled in a way that’s really out of the guidelines required for all other bugs.  That said, I see nothing here that implies a better way of handling them.  Are skilled security researchers looking at all the committs looking for changes that fix a security issue?  Absolutely.  Should the kernel community in their committ messages shoot up a flare identifying a security vulnerability so that everyone sees it?  I don’t think so.  The moment they do that, not only is everyone still vulnerabile until a distro update (or a recompile of your kernel if you’re rolling your own), but you’ve told everyone about it both good and bad.  I’m sure the kernel development community would be happy to entertain specific proposals that cover these concerns.<br>
<p>
The process that currently exists where distros get fixes out before security vulnerabilities are generally know usually works.  It has broken down a bit in this particular case, but it generally works.  I think what really needs to take place though is that the kernel community needs to be better about Responsible Disclouse once fixes are available.  I don’t have any problems with fairly innocuous commit messages that are later updated to reflect the full significance of a security patch.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704276/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor704284"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Embargos</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 21, 2016 18:26 UTC (Fri)
                               by <b>corbet</b> (editor, #1)
                              [<a href="/Articles/704284/">Link</a>] 
      </p>
      
      </div>
      </summary>
      If the article reads like it's against embargoes, that was not the intent.  Not everybody likes embargoes either, but I think a limited pre-disclosure time to get the updates together makes complete sense.  That's unrelated to the topic at hand here; the commits and releases in question happened after the embargo ended.
      
          <div class="CommentReplyButton">
            <form action="/Articles/704284/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor704282"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 21, 2016 18:29 UTC (Fri)
                               by <b>smoogen</b> (subscriber, #97)
                              [<a href="/Articles/704282/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It is simple. Just say what you know when you make the commit. If you know the problem has security implications, then say it. If you don't then don't. Trying to hedge around a bug that you know has security implications is ridiculous because of the following items.<br>
<p>
1. There are hundreds of red teams out there tearing apart every kernel to see what advantage they can get. They will either figure it out when you close off a working exploit they already had or when they see the commit.<br>
<p>
2. The vast number of linux users aren't going to be left out of the cold because there was  no time window between the commit and it being know to fix a security problem. They are going to be left out because their phone company will never ship them an updated kernel... and no amount of information blackout window is going to fix that. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704282/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor704306"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 22, 2016 1:33 UTC (Sat)
                               by <b>bojan</b> (subscriber, #14302)
                              [<a href="/Articles/704306/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Spoken with such clarity and simplicity! +1<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704306/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor704300"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 21, 2016 22:35 UTC (Fri)
                               by <b>clemensg</b> (guest, #94377)
                              [<a href="/Articles/704300/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The problem is that the security implications become public anyway. Also, if patches quickly find their way into the stable tree and if Linus himself authored them, I'd look at them if I were an attacker.<br>
Security by obscurity does not work, as we can see.<br>
<p>
The problem is not the guys who read the commit description of the fix, the problem is all those guys who already knew about the bug years before. Wasn't this bug discovered because it was actively exploited in the wild? And not the other way around..<br>
Imagine how many 0-day exploits the NSA found and keeps secret and how much it bums them out if these expensive 0-day bugs are discovered by someone else and then publicly disclosed. :-)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704300/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor704319"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 22, 2016 15:35 UTC (Sat)
                               by <b>raven667</b> (subscriber, #5198)
                              [<a href="/Articles/704319/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Imagine how many 0-day exploits the NSA found and keeps secret </font><br>
<p>
It would better for the world I think if the US Security services like the NSA put all their effort into disclosing bugs and closing holes rather than keeping them secret, even if the other worlds services do the opposite, as it will greatly raise the costs for the bad actors and maybe open up some conversations about code review, quality and serviceability from dispassionate experts rather than involved vendors.  Making the Internet more hostile to bad actors by securing more systems is more worth the money we spend than hoarding exploits.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704319/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor704279"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 21, 2016 18:03 UTC (Fri)
                               by <b>davidstrauss</b> (guest, #85867)
                              [<a href="/Articles/704279/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I've posted an additional mitigation path via syscall filtering using service configuration:<br>
<p>
<a href="https://medium.com/@davidtstrauss/mitigating-dirtyc0w-with-systemd-5f3bad6f376a">https://medium.com/@davidtstrauss/mitigating-dirtyc0w-wit...</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704279/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor704307"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 22, 2016 2:42 UTC (Sat)
                               by <b>nnewton</b> (subscriber, #40661)
                              [<a href="/Articles/704307/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Nice, was wondering if that would work. Thanks.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704307/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor704364"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 23, 2016 16:07 UTC (Sun)
                               by <b>justincormack</b> (subscriber, #70439)
                              [<a href="/Articles/704364/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
madvise is used by a lot of things, at least some versions of glibc use it to return memory to the OS.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704364/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor704369"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 23, 2016 17:02 UTC (Sun)
                               by <b>davidstrauss</b> (guest, #85867)
                              [<a href="/Articles/704369/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
You're absolutely right; use of madvise may be widespread. I did not test the mitigation against most popular daemons to see which use it directly or via something like glibc.<br>
<p>
I do know that some daemons and runtimes have models for allocation or freeing that may not require it:<br>
<p>
(1) PHP-FPM allocates whenever memory in a worker exceeds the pool already allocated for that process. It then periodically destroys and recreated the worker, freeing the worker's memory through means of the process not existing.<br>
<p>
(2) Some runtimes like the JVM seem to allocate a pool, as needed, up to a specified size. They then manage garbage collection within that memory.<br>
<p>
(3) Some alternative memory libraries (like but not including jemalloc) may avoid madvise calls to the point of not using them at all.<br>
<p>
So, I figured it wasn't impossible to work for some people. I mostly wanted to talk about syscall whitelisting, though.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704369/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor704302"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 21, 2016 22:21 UTC (Fri)
                               by <b>mst@redhat.com</b> (subscriber, #60682)
                              [<a href="/Articles/704302/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;  Your editor humbly suggests to the kernel development community that the time has long since come to reconsider how security-related patches are handled.</font><br>
<p>
As all problems in computer science we can solve this<br>
with another level of indirection.<br>
In particular report the issue in the kernel bugzilla.<br>
I would be very surprised if there will be any resistance<br>
to listing the bugzilla link in the commit log.<br>
CVE and other info can be attached to the bugzilla<br>
entry when and if it becomes available.<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704302/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor704345"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 23, 2016 7:16 UTC (Sun)
                               by <b>error27</b> (subscriber, #8346)
                              [<a href="/Articles/704345/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It has been a long time since I cared but back in the day red hat marked all these bugs as access denied. It's rarely useful for reviewing CVEs. I use the Ubuntu CVE list.<br>
<p>
Anyway, in this case the bug was first reported to security@kernel.org then everyone was like this is important and we should do coordinated release through linux-distros. There was no thought about hiding it. Everyone expected that this was a webpage and logo bug because it was so serious.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704345/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor704612"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 25, 2016 21:00 UTC (Tue)
                               by <b>lacos</b> (guest, #70616)
                              [<a href="/Articles/704612/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; It has been a long time since I cared but back in the day red hat marked all these bugs as access denied.</font><br>
<p>
MST was most likely not talking about the Red Hat Bugzilla, but the upstream kernel Bugzilla, at <a href="https://bugzilla.kernel.org/">https://bugzilla.kernel.org/</a>.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704612/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor704754"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 27, 2016 0:25 UTC (Thu)
                               by <b>ajdlinux</b> (subscriber, #82125)
                              [<a href="/Articles/704754/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Which subsystems actually use the kernel bugzilla actively? I know mine (powerpc) doesn't.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704754/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor704304"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 22, 2016 0:14 UTC (Sat)
                               by <b>pj</b> (subscriber, #4506)
                              [<a href="/Articles/704304/">Link</a>] (15 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<p>
<font class="QuotedText">&gt;When users are not told about the known effects of bugs, they rightly assume that they will be unaware of other silently fixed problems.  So they can never know that they have the fixes for all known security issues unless they run the absolute latest releases.  </font><br>
<p>
I think you strike closest to Linus' rationale here.  There are always more  'silently fixed problems' to both known and unknown security issues; the only benefit to calling out fixes to known security issues would be to give a false sense of security that 'all known bugs are fixed' - even though many other security issues may lie dormant and undiscovered in the exact same code.  Even the latest release with 'no known bugs' may be turned into 'most hackable version ever' the next day by the exposure of some heretofore unknown exploit.<br>
<p>
<font class="QuotedText">&gt;Staying on the leading edge is not an option for a huge portion of our user base, so they are forced to live with the worry that important fixes have been hidden from them.</font><br>
<p>
No fixes are hidden - they're all in the leading edge.  If people can't keep up with the leading edge, they likely can't upgrade at all, so sorting out 'important' from 'unimportant' fixes is moot.<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704304/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor704308"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 22, 2016 5:53 UTC (Sat)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/704308/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; If people can't keep up with the leading edge, they likely can't upgrade at all, </font><br>
<p>
There's not just one but a few worlds in the interval between kernel developers' workstations and dirt cheap, throw-away embedded systems. What's there is typically called "products".<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704308/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor704312"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 22, 2016 8:18 UTC (Sat)
                               by <b>PaXTeam</b> (guest, #24616)
                              [<a href="/Articles/704312/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; the only benefit to calling out fixes to known security issues would be to give a false sense of security that 'all known bugs are fixed' [...]</font><br>
<p>
first of all, i don't think you meant to say that as is, because if true it'd mean that some of the *known* bugs are *not* fixed and i'm sure i wouldn't be the only one who'd like to know just what those known but unfixed bugs are.<br>
<p>
second, assuming you just meant 'all bugs are fixed', is that a statement that you can back up with evidence? i've seen this 'argument' before and every time i asked for proof, i got exactly nothing. will you fare better? ;)<br>
<p>
also, let me ask you about another variant of your statement:<br>
<p>
<font class="QuotedText">&gt; the only benefit to calling out fixes to known file system corruption issues would be to give a false sense of security that 'all file system corruption bugs are fixed' [...]</font><br>
<p>
would you agree with the above statement too? if yes, then your kernel developers are doing the exact opposite, if no, you have a nice contradicton on your hands...<br>
<p>
<font class="QuotedText">&gt; No fixes are hidden - they're all in the leading edge.</font><br>
<p>
can you give me a list of filesystem corruption fixes that went into 4.9-rc1? remember, by your own claims, you must be able to give me an exhaustive list. if you miss one you'll have defeated your own argument.<br>
<p>
<font class="QuotedText">&gt; If people can't keep up with the leading edge, they likely can't upgrade at all[...]</font><br>
<p>
so you're saying that the only way to upgrade (a kernel) is to update to the leading edge. why do the -stable trees exist then? why do vendor kernels exist? is Red Hat going out of business?<br>
<p>
PS: when you go see a doctor, do you expect her to *not* tell you the disease(s) she identified on grounds that she may very well have missed some? because it's that kind of crazy that you're advocating for.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704312/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor704328"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 22, 2016 17:28 UTC (Sat)
                               by <b>flussence</b> (guest, #85566)
                              [<a href="/Articles/704328/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;PS: when you go see a doctor, do you expect her to *not* tell you the disease(s) she identified on grounds that she may very well have missed some? because it's that kind of crazy that you're advocating for.</font><br>
<p>
Since we're on the subject of tortuous security circus analogies, and you're here.<br>
<p>
When I go to a doctor, they usually act in my best interests. The medical science world has the Hippocratic Oath, and practising doctors are not ego-driven sociopaths for the most part. Not even Red Cross volunteers.<br>
<p>
If a clinic were to prescribe preventative medication and it turns out to cause a near-fatal side effect in 99% of patients, it would be very odd if anyone who tried to warn the doctor and public of this, along with anyone else who received the news, received a lifetime ban from the clinic. That would be a cut and dry case of medical malpractice, in fact.<br>
<p>
I shouldn't have to spell out the correct way to handle such a colossal fuckup is to apologise. We're all mature adults here, right? Right?<br>
<p>
Even in an alternate universe where the law offers no checks and balances for such actions, it would still be a career-ending move once people start wondering what other horrors the mad doctor is trying to hide from his test subjects.<br>
<p>
Food for thought, @grsecurity.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704328/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor704332"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 22, 2016 18:19 UTC (Sat)
                               by <b>PaXTeam</b> (guest, #24616)
                              [<a href="/Articles/704332/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Since we're on the subject of tortuous security circus analogies, and you're here.</font><br>
<p>
and i lost you about here too. can you write up your thoughts in a somewhat more coherent way that mere mortals can make sense of as well?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704332/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor704392"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 24, 2016 9:41 UTC (Mon)
                               by <b>FLHerne</b> (subscriber, #105373)
                              [<a href="/Articles/704392/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I assume this is about the Twitter thing a few months ago, where whoever controls @grsecurity tried to suppress a bug far more explicitly than the upstream kernel ever has.<br>
<p>
Someone tweeted "How to panic a current @grsecurity kernel as any user: $ script /dev/null &lt;/dev/zero (seriously, WTF)" and you:<br>
 - Blocked his account.<br>
 - Blocked his IP from your website.<br>
 - Blocked the accounts (and IPs?) of anyone else mentioning the bug, or the blocking.<br>
 - Removed @grsecurity and all its past tweets.<br>
<p>
Naturally, the Streisand effect put it all over the Internet.<br>
<p>
With that in recent memory, your complaint that _upstream_ handles security bugs poorly -- while IMO entirely true -- seems rather hypocritical.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704392/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor704394"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 24, 2016 10:49 UTC (Mon)
                               by <b>PaXTeam</b> (guest, #24616)
                              [<a href="/Articles/704394/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; [...]@grsecurity tried to suppress a bug far more explicitly than the upstream kernel ever has.</font><br>
<p>
i see, so let's do some fact checking then. the bugreport is here: <a href="https://forums.grsecurity.net/viewtopic.php?f=3&amp;t=4342">https://forums.grsecurity.net/viewtopic.php?f=3&amp;t=4342</a> and you tell me what was suppressed there.<br>
<p>
<font class="QuotedText">&gt; and you:[...]</font><br>
<p>
sorry to burst your bubble, but i didn't do any of that, it was spender's doing and he was simply cleaning up the trash (minus the IP banning which was obviously useless). as for the triggering tweet for all that shitstorm, it wasn't the one you cited (that was merely poking fun at him, or rather, us, considering it was my bug to begin with, not spender's) but the later outright *lies* that marcan spread. that had to be countered and it was, quite successfully in fact (he even came on IRC to explain himself and failed at it, perhaps someone who logged the channel can share it with the rest of us). he's still so upset that i exposed him as a liar that he's been trying to 'get even' ever since, last time he tried to sabotage the upstreaming of gcc plugins by fake licensing 'concerns' that too failed.<br>
<p>
<font class="QuotedText">&gt; With that in recent memory, your complaint that _upstream_ handles security bugs poorly -- while IMO entirely true -- seems rather hypocritical.</font><br>
<p>
what's hypocritical in 1. acknowledging the bug, 2. describing its nature, 3. fixing it without lying about it? if we had failed at any of those steps then you'd have a point but as the facts show, we didn't.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704394/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor704745"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 26, 2016 22:08 UTC (Wed)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/704745/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <blockquote>
sorry to burst your bubble, but i didn't do any of that, it was spender's doing and he was simply cleaning up the trash (minus the IP banning which was obviously useless)
</blockquote>
*BOGGLE*. I don't see how anyone can seriously characterize a mass of account blocking and deletion as 'cleaning up the trash'. It was utterly obviously a panicky cover-up to anyone older than the age of five. (And anyone over the age of ten could predict its inevitable failure.)
      
          <div class="CommentReplyButton">
            <form action="/Articles/704745/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor704851"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 27, 2016 17:41 UTC (Thu)
                               by <b>Arach</b> (guest, #58847)
                              [<a href="/Articles/704851/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; It was utterly obviously a panicky cover-up</font><br>
<p>
No sht, Sherlock. That's why the original bug report is still on the forum. And that's why spender stopped posting on twitter. Because all about it was is a cover-up, obviously.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704851/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor704400"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 24, 2016 13:31 UTC (Mon)
                               by <b>pj</b> (subscriber, #4506)
                              [<a href="/Articles/704400/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;second, assuming you just meant 'all bugs are fixed', is that a statement that you can back up with evidence? i've seen this 'argument' before and every time i asked for proof, i got exactly nothing. will you fare better? ;)</font><br>
<p>
You're correct, I meant to say "the only benefit to calling out fixes to known security issues would be to give a false sense of security that 'all bugs are fixed'".  As for 'proof'... prove what?  That if you say you've fixed 'all known bugs' then unsophisticated users think that means 'all bugs'?  I think that's fairly self-evident.<br>
<p>
<font class="QuotedText">&gt;also, let me ask you about another variant of your statement:</font><br>
<font class="QuotedText">&gt;&gt; the only benefit to calling out fixes to known file system corruption issues would be to give a false sense of security that 'all file system corruption bugs are fixed' [...]</font><br>
<font class="QuotedText">&gt;would you agree with the above statement too? if yes, then your kernel developers are doing the exact &gt;opposite, if no, you have a nice contradicton on your hands...</font><br>
<p>
Are they?  Any number of memory corruption or other types of bugs could cause file system corruption (in the sense of bad data making it to disk), but I don't think the fs developers list them all as 'file system corruption bugs'.  It's an interesting analogy though; I think one distinction it has from 'security bugs' is that bugs in filesystem code could corrupt data in the normal sequence of events, while security bugs take a malicious actor.  <br>
<p>
<font class="QuotedText">&gt;&gt; No fixes are hidden - they're all in the leading edge.</font><br>
<font class="QuotedText">&gt;can you give me a list of filesystem corruption fixes that went into 4.9-rc1? remember, by your own claims, you must be able to give me an exhaustive list. if you miss one you'll have defeated your own argument.</font><br>
<p>
Sure, every fix is a filesystem corruption fix, so the list of fixes is identical to the list of commits.  If it's not in the leading edge, it's not production ready, having not passed muster with enough maintainers to make it into the leading edge.<br>
<p>
<font class="QuotedText">&gt; If people can't keep up with the leading edge, they likely can't upgrade at all[...]</font><br>
so you're saying that the only way to upgrade (a kernel) is to update to the leading edge. why do the -stable trees exist then? why do vendor kernels exist? is Red Hat going out of business?<br>
<p>
I'm saying that these days there's little point in upgrading to anything other than the latest version - it has all the fixes and all the hardware support.<br>
<p>
-stable trees exist, as far as I can tell, to provide an unchanging base against which to do longer-term development work before then forward-porting said work to mainline.<br>
<p>
vendor kernels exist to be able to pull in non-mainline code, or to standardize build options across said vendor.<br>
<p>
Whether or not RH is going out of business is a non-sequitur.<br>
<p>
<font class="QuotedText">&gt;PS: when you go see a doctor, do you expect her to *not* tell you the disease(s) she identified on grounds that she may very well have missed some? because it's that kind of crazy that you're advocating for.</font><br>
<p>
I disagree; I think that when I go see a doctor, I expect her not to tell me the disease(s) she identified _that have already been treated_, which in this tortuous analogy is the analogue for bugs already fixed. <br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704400/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor704409"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 25, 2016 8:51 UTC (Tue)
                               by <b>PaXTeam</b> (guest, #24616)
                              [<a href="/Articles/704409/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; That if you say you've fixed 'all known bugs' then unsophisticated users think that means 'all bugs'? I think that's fairly self-evident.</font><br>
<p>
yes, provide proof of that statement as it's not self-evident. just so you don't diverge into grandma territory, the users of commit messages are people whose task is to build kernels for other people (users of distros and customers of companies). are you calling them unsophisticated? on what grounds?<br>
<p>
<font class="QuotedText">&gt; Are they?</font><br>
<p>
yes, e.g., b8927721ae9d5ac0582d29d7b8c267d465ad5f00 quite explicitly says 'Fix bugs that could cause kernel deadlocks or file system corruption' so clearly they don't think that your 'unsophisticated users' may mistake such statements as saying that other commits can't possibly fix similar issues.<br>
<p>
<font class="QuotedText">&gt; I think one distinction it has from 'security bugs' is that bugs in filesystem code could corrupt data in the normal sequence of events,</font><br>
<font class="QuotedText">&gt; while security bugs take a malicious actor.</font><br>
<p>
security bugs can also be triggered accidentally, there's no need for a malicious actor.<br>
<p>
<font class="QuotedText">&gt; Sure, every fix is a filesystem corruption fix.</font><br>
<p>
then explain how the bug fixed by commit 3fc6a642e4355abef986b2dd11672216fb18212e can cause file system corruption.<br>
<p>
<font class="QuotedText">&gt; If it's not in the leading edge, it's not production ready, having not passed muster with enough maintainers to make it into the leading edge.</font><br>
<p>
that's a very interesting take (though not in your favour as you'll see), so hold that thought ;).<br>
<p>
<font class="QuotedText">&gt; I'm saying that these days there's little point in upgrading to anything other than the latest version - it has all the fixes and all the hardware support.</font><br>
<p>
and all the new bugs and regressions that didn't exist before.<br>
<p>
<font class="QuotedText">&gt; -stable trees exist, as far as I can tell, to provide an unchanging base against which to do</font><br>
<font class="QuotedText">&gt; longer-term development work before then forward-porting said work to mainline.</font><br>
<p>
interesting, my reading of Documentation/stable_kernel_rules.txt doesn't at all suggest that, can you submit a patch to clear up the new rules?<br>
<p>
<font class="QuotedText">&gt; vendor kernels exist to be able to pull in non-mainline code, or to standardize build options across said vendor.</font><br>
<p>
vendor kernels exist to satisfy the needs of paying customers, including out-of-tree code is orthogonal to that (and usually frowned upon).<br>
<p>
in any case, putting together your statements you're basically saying vendor kernels have not passed muster and there's little point in upgrading to them.<br>
<p>
<font class="QuotedText">&gt; Whether or not RH is going out of business is a non-sequitur.</font><br>
<p>
as you can see, you drew that conclusion yourself by virtue of calling their kernels inadequate for use which means people should abandon them driving such vendors out of business. the fact that it's not happening should tell you something about your premises...<br>
<p>
<font class="QuotedText">&gt; &gt; PS: when you go see a doctor, do you expect her to *not* tell you the disease(s) she identified on grounds that she may very well have missed some?</font><br>
<font class="QuotedText">&gt; I disagree; I think that when I go see a doctor, I expect her not to tell me the disease(s) she identified _that have already been treated_,</font><br>
<font class="QuotedText">&gt; which in this tortuous analogy is the analogue for bugs already fixed.</font><br>
<p>
no, the analogy is this: bug = disease, bugfix = cure, commit message = disease *and* cure description. you're arguing that describing certain details of the particular disease is bad because that would somehow mislead people.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704409/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor704376"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 23, 2016 21:59 UTC (Sun)
                               by <b>drag</b> (guest, #31333)
                              [<a href="/Articles/704376/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; the only benefit to calling out fixes to known security issues would be to give a false sense of security that 'all known bugs are fixed' - even though many other security issues may lie dormant and undiscovered in the exact same code.</font><br>
<p>
The benefit to having security fixes called out is that they get priority to getting patched by end users. <br>
<p>
I deal with a large number of systems and for the most part they are pretty 'steady state'. Meaning they run on pretty much the same hardware using the same virtual machine technology running the same OSes and run similar software written with similar libraries and languages in similar ways.<br>
<p>
If there was something like a file system corruption bug that could of affected us it would of already caused problems for us. So even if there was a bug fix available for a issue like a file system corruption that then there isn't going to be a huge business reason to fix that.  If a bug doesn't affect us it doesn't affect us; period end of story.  So it'll get fix next round of scheduled OS updates.  No need for disrupting business, operations, or developers with kernel updates. <br>
<p>
However unlike most of our servers the external threat isn't so 'steady state'.  Security threats are ever evolving and ever changing. Things like CVEs and dorky websites and articles being written make it much easier for us to justify the disruption and downtime kernel updates cause. <br>
<p>
I also go out of my own way to keep track of security issues, but it's done on my own time.  Most systems engineers I work with have a half a dozen different projects they work on and really have no time to be scanning mailing lists and such things for hidden security problems.  We depend very much on the honesty of our OS vendors. <br>
<p>
Of course we practice 'security in depth', just like we back up our important data just in case of some yet unknown bug or hardware failure. I understand that all bugs are potentially security bugs, but that doesn't mean that it's a waste of time to update against known security problems. <br>
<p>
If OS vendor is not being honest then that increases our risk and increases our cost.  It may be useful for their marketing, but it makes it more difficult to justify spending money on support licenses. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704376/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor704475"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 24, 2016 19:27 UTC (Mon)
                               by <b>pj</b> (subscriber, #4506)
                              [<a href="/Articles/704475/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Shouldn't you be upgrading continuously, anyway?  And not just when "oh no, bad bug!" ?   In order to get not only bug fixes but also performance fixes and new useful features?  <br>
<p>
<font class="QuotedText">&gt;the disruption and downtime kernel updates cause. </font><br>
<p>
...should be mitigated by having a non-disruptive method to doing so.  "What you do often, you get good at."  So get good at doing kernel updates by figuring out a non-disruptive way to do them (testbed, slow-rollout, maintenance window, etc) and then doing them regularly.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704475/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor704486"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 24, 2016 22:24 UTC (Mon)
                               by <b>drag</b> (guest, #31333)
                              [<a href="/Articles/704486/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Shouldn't you be upgrading continuously, anyway? </font><br>
<p>
We upgrade at regularly scheduled intervals. I am not going to tell you those intervals. <br>
<p>
If you are talking about running 'while true; do yum -y update ; sleep 30; done'... no I am not going to do that.  <br>
<p>
<font class="QuotedText">&gt; ...should be mitigated by having a non-disruptive method to doing so. </font><br>
<p>
The non-disruptive way is to it at normally scheduled intervals.  We don't update the entire company in one go, however, if that is what you are talking about. <br>
<p>
I can be disruptive, however, if I need to be.  Important security updates are important. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704486/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor704502"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 25, 2016 4:09 UTC (Tue)
                               by <b>spender</b> (guest, #23067)
                              [<a href="/Articles/704502/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I'm sure everyone in the world updated to 4.8.4 immediately, 3 days after having already updated to 4.8.3.  This of course happens in the same fantasy world people like PJ live in where the latest kernels only bring new fixes, and not new bugs.<br>
<p>
Meanwhile in the real world, anyone can look at the following patches generated over the same timeframe:<br>
<p>
diffstat patch-4.8.1-2 | tail -n 1<br>
 52 files changed, 487 insertions(+), 213 deletions(-)<br>
<p>
diffstat patch-4.7.7-8 | tail -n 1<br>
 48 files changed, 425 insertions(+), 176 deletions(-)<br>
<p>
diffstat patch-4.4.24-25 | tail -n 1<br>
 27 files changed, 313 insertions(+), 137 deletions(-)<br>
<p>
and see the same thing any honest person who does any backporting work knows: that the majority of bugs being fixed in the latest kernels are for recently introduced bugs.  If Greg were an honest person, he would admit this.  But I realize he's got a lot of conflicting interests to juggle: to take money from the Linux Foundation to create the stable kernels, to keep people doing QA on the latest kernels by telling them the latest upstream kernel has the most fixes, to tell people not to use the old distro kernels because of a fake story he concocted about the exploitability of a tty bug, and to ensure nobody takes him seriously by intentionally covering up vulnerabilities for no reason other than a failed attempt at propping up the facade of "a bug is a bug".<br>
<p>
One other thing I find interesting that nobody talks about is that a lot of the unpublicized security fixes Greg backports land in his -stable kernels months after they appear upstream (visible to defenders and attackers alike).  Other LTS trees that depend on Greg's solely for backports are even worse.  I know this from seeing merged fixes months later from things I've already backported, or for issues I've reported/been cc'd on as I then get automated mails from the stable maintainers.  It's interesting how much belief is happening and how little critical thinking goes on, because I'm not sure how people can merge those facts with Greg's propaganda into a straightforward narrative.  Pay no attention to the man behind the curtain for now, maybe in a couple years LWN will repeat everything I've said (much like the article I'm commenting on now) and everyone will have a sudden epiphany.<br>
<p>
-Brad<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704502/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor704388"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 24, 2016 7:15 UTC (Mon)
                               by <b>mjthayer</b> (guest, #39183)
                              [<a href="/Articles/704388/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; No fixes are hidden - they're all in the leading edge. If people can't keep up with the leading edge, they likely can't upgrade at all, so sorting out 'important' from 'unimportant' fixes is moot.</font><br>
<p>
Brings the evil word "micro-kernel" to mind - especially after the article on user-space drivers.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704388/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor704343"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 23, 2016 4:22 UTC (Sun)
                               by <b>citypw</b> (guest, #82661)
                              [<a href="/Articles/704343/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Some exploitable bugs seems unlikely to exploit in an easy way, e.g: CVE-2014-9322 so called "BadIRET", it was fixed by kernel community in Nov 23 2014:<br>
<p>
<a href="http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=6f442be2fb22be02cafa606f1769fa1e6f894441">http://git.kernel.org/cgit/linux/kernel/git/torvalds/linu...</a><br>
<p>
Coundn't find any public discussion in English world until nergal's write-up in Feb 2 2015:<br>
<p>
<a href="https://labs.bromium.com/2015/02/02/exploiting-badiret-vulnerability-cve-2014-9322-linux-kernel-privilege-escalation/">https://labs.bromium.com/2015/02/02/exploiting-badiret-vu...</a><br>
<p>
Then we realized there was a public PoC( it may be the 1st one) released in a .ru forum in Dec 17 2014:<br>
<p>
<a href="https://rdot.org/forum/showthread.php?t=3341">https://rdot.org/forum/showthread.php?t=3341</a><br>
<p>
According to nergal's write-up, the most people think it's hard to exploit. But the exploit writer always trying harder 2 be themselves;-) <br>
<p>
<a href="http://blog.pi3.com.pl/?p=509">http://blog.pi3.com.pl/?p=509</a><br>
<p>
Thanks to pi3's work and we know how strong defense of PaX/Grsecurity does in the most cases.<br>
<p>
There are tons of kernel vulnerabilities doesn't have a brand name( yet?) like CVE-2016-5195( Dirty*F*Cow) and it doesn't mean they can't be exploited. KSPP is trying to follow what PaX/Grsecurity does for a decade, which is killing a class of bug/vuln by adding mitigation. We've been suffering from the philosophy of "a bug is bug" for too long. Hope this dirty fuc* cow can change the situation of "security through obscurity" in linux kernel community. Like corbet said, we are living in 2016 but 90s;-)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704343/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor704387"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 24, 2016 7:12 UTC (Mon)
                               by <b>mjthayer</b> (guest, #39183)
                              [<a href="/Articles/704387/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Then we realized there was a public PoC( it may be the 1st one) released in a .ru forum in Dec 17 2014:</font><br>
<p>
<a href="https://rdot.org/forum/showthread.php?t=3341">https://rdot.org/forum/showthread.php?t=3341</a><br>
<p>
But if I understand right, this shows that there is no real problem.  People wanting to know which patches to apply (and budding script kiddies) should simply follow .ru forums rather than the kernel change log.  (Interesting for a non-Russian from a linguistic point of view, from "инстант ребут", to wondering what "poc:" meant before realising it was Latin script.)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704387/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor704588"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 25, 2016 16:22 UTC (Tue)
                               by <b>sorokin</b> (guest, #88478)
                              [<a href="/Articles/704588/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
For those who are not familiar with Cyrillic script: "инстант ребут" is a transliteration of "instant reboot" in english. Transliterated English words are commonly used by programmers in Russia. I believe about 75% of the words mentioned in the referred page are so. To name a few: "фикс", "баг", "федора", "эксплойт", "РУТануть".<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704588/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor704354"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rolling LWN articles</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 23, 2016 13:20 UTC (Sun)
                               by <b>swilmet</b> (guest, #98424)
                              [<a href="/Articles/704354/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <p>A bit off-topic, but it's nice to have such LWN articles released early, not necessarily on the Thursday's Weekly Edition. In the past there were already articles released another day, but it seems that it is now more frequent after <a href="http://lwn.net/Articles/696017/">Some news from LWN</a> in August.</p>

<p>So, I wanted to report a positive feedback from this change, thanks :)</p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/704354/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor704465"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 24, 2016 15:58 UTC (Mon)
                               by <b>jezuch</b> (subscriber, #52988)
                              [<a href="/Articles/704465/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Well, I'm no security researcher nor a black hat hacker, and still I immediately knew something's up with that commit... by how small the stable release was :) It almost screamed "this is important!".<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704465/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor704592"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">KSM and Unix Shared Memory</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 25, 2016 16:32 UTC (Tue)
                               by <b>jhhaller</b> (guest, #56103)
                              [<a href="/Articles/704592/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
We ran into a bug where we built a semaphore in shared memory (the old Unix shared memory shm_* API). When we enabled Kernel Same Page Merging (KSM), and ran the code in a couple of VMs, the semaphore sometimes broke. Not needing KSM and not having time to investigate, we just turned off KSM. But, it does make me wonder if we ran into the same issue. The page with the semaphore was generally zero, so likely to be selected for KSM with some other zero page. KSM operates by making the shared page read-only, so it would handled in a way that would bring it close to the broken Dirty Cow code.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704592/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor704599"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Dirty COW and clean commit messages</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 25, 2016 17:35 UTC (Tue)
                               by <b>vapier</b> (guest, #15768)
                              [<a href="/Articles/704599/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; (excluding, perhaps, no-MMU systems, which lack the sort of protection that has been defeated here in the first place)</font><br>
<p>
this is a common misconception/conflation.  lack of virtual&lt;-&gt;physical translation does not mean there is no memory protection.  a number of embedded no-MMU CPUs have memory protection (MPUs) which means they can protect kernel/user space from each other, and protect processes from each other.<br>
<p>
<a href="https://blackfin.uclinux.org/doku.php?id=bfin:mpu">https://blackfin.uclinux.org/doku.php?id=bfin:mpu</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/704599/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2016, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
