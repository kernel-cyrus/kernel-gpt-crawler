        <!DOCTYPE html>
        <html lang="en">
        <head><title>The end for Video4Linux1 [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/380150/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/379330/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/380150/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>The end for Video4Linux1</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>We're bad at marketing</b>
<p>
We can admit it, marketing is not our strong suit. Our strength is
writing the kind of articles that developers, administrators, and
free-software supporters depend on to know what is going on in the
Linux world. Please <a href="/Promo/nsn-bad/subscribe">subscribe today</a> to help us keep doing that, and so
we donâ€™t have to get good at marketing.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>March 24, 2010</br>
           </div>
The Video4Linux1 (V4L1) ABI is deprecated, and has been for a long time; it
was ostensibly replaced by Video4Linux2 in the 2.5 development series.
But, as has been discovered many times, an ABI is a hard thing to get rid
of.  So the kernel still supports V4L1 applications; indeed, there are
still V4L1-only drivers in current kernels.  That situation has persisted
for a long time, but it may now be coming to an end.
<p>
Hans Verkuil has posted a multi-stage proposal for the removal of V4L1 from
the kernel.  <a href="/Articles/380153/">The first phase</a> involves the
conversion of the remaining V4L1 drivers - of which there are several - to
the newer ABI.  Some of those drivers have since been supplanted by GSPCA
and may just be deleted outright.  All told, this is a bit of much-needed
janitorial work.
<p>
<a href="/Articles/380154/">Phase 2</a> may be a bit more controversial,
though, in that it calls for the removal of the V4L1 compatibility layer in
the kernel.  This code allows V4L1 applications to work with V4L2 drivers -
most of the time.  It was an important bit of backward compatibility
support, but it has also helped to delay the updating of a number of old
V4L1 applications.  Given that these applications do still exist (many
distributions still ship xawtv, for example), it might be a bit surprising
that this layer is slated for removal, perhaps as soon as 2.6.36.
<p>
There are problems with the compatibility layer.  It cannot provide access
to much of the functionality of contemporary hardware and drivers, it
cannot always do the right thing in response to application requests, and
it has been a long time since anybody had any interest in maintaining this
code.  So the V4L developers would like to push it out into user space, and
into the libv4l1 library in particular.  Supporting old applications would
then be a matter of a quick edit (replacing <tt>ioctl()</tt> calls with
<tt>v4l1_ioctl()</tt>, for example) and a rebuild against the library.
Some old applications may be pulled into the V4L project, since their
original maintainers have almost certainly long since lost interest.
<p>
It's not a perfect solution; old, binary applications will cease to work on
newer kernels.  It is an ABI break, plain and simple, and it is possible
that there will be enough of an uproar to prevent this change from
happening in the end.  But it may also be that nobody really cares about
running binary V4L1 applications on new kernels, and that it is truly time
for this old interface to pass into history.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Video4Linux2">Video4Linux2</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/380150/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor380272"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The end for Video4Linux1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 25, 2010 9:53 UTC (Thu)
                               by <b>mjthayer</b> (guest, #39183)
                              [<a href="/Articles/380272/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Personally I welcome a certain tempering of the "binary compatibility for ever" line.  There <br>
are so many other reasons why it will be hard to get e.g. a binary build for Linux 0.99 to run<br>
on a current system that keeping the kernel binary interfaces that stable seems a bit silly.<br>
If you really need to run that sort of binary you can still go for an emulation or virtualisation<br>
solution of one shape or another, and there are other places compatibility layers can be kept<br>
than inside the security-critical kernel space.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/380272/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor380565"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The end for Video4Linux1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 26, 2010 16:36 UTC (Fri)
                               by <b>jwarnica</b> (subscriber, #27492)
                              [<a href="/Articles/380565/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The theory should also be flexible, and change as you get to more and more obscure things. And take into consideration the ecosystem of what actually uses that feature.<br>
<p>
V4L, almost by definition, deals with unusual and possibly obscure hardware. The usecases might neatly fall into: stable systems with old hardware that never changes, is never upgraded, etc. And: bleeding edge systems with new and cool hardware, tweaked to the Nth degree by some geek giant.<br>
<p>
At the very least: V4L deals with hardware. Old hardware? Old kernel. New hardware? New kernel. That seems fair and reasonable to me.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/380565/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor380277"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The end for Video4Linux1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 25, 2010 10:12 UTC (Thu)
                               by <b>farnz</b> (subscriber, #17727)
                              [<a href="/Articles/380277/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <p>Note that (AIUI) libv4l1 also comes with an LD_PRELOAD shim, that intercepts open, ioctl, mmap et al, passes through non-V4L usage, and calls v4l1_open etc for you.
<p>The net result is the ability to run V4L1 only applications unchanged.
      
          <div class="CommentReplyButton">
            <form action="/Articles/380277/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor380909"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The end for Video4Linux1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 29, 2010 18:46 UTC (Mon)
                               by <b>jimparis</b> (guest, #38647)
                              [<a href="/Articles/380909/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Assuming it's dynamically linked.  You'd need a bit more work for static binaries (eg., ptrace-based syscall interception)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/380909/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor383015"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Time for a new kernel major version?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 10, 2010 14:39 UTC (Sat)
                               by <b>goeran</b> (subscriber, #151)
                              [<a href="/Articles/383015/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Maybe removal of binary interfaces should be is for a major release?  Name the next kernel 3.0 where this, and maybe other obsolete interfaces, are removed!  New functionality is added continuously, and there will probably never be a "major" step in that sense.  But cleaning out of obsolete stuff could make sense to distinguish like this?<br>
<p>
Or at least a 2.7 series, which drops compatibility with 2.6.  That would be another way to give back some meaning to the first two numbers in the kernel version number.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/383015/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2010, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
