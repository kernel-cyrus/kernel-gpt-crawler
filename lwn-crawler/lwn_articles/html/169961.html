        <!DOCTYPE html>
        <html lang="en">
        <head><title>Van Jacobson's network channels [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/169961/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/169269/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/169961/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>Van Jacobson's network channels</h1>
<div class="Byline">[Posted January 31, 2006 by corbet]
               <p>
               </div>
</div>
<div class="ArticleText">
Your editor had the good fortune to see Van Jacobson speak at the 1989
USENIX conference.  His talk covered some of the bleeding-edge topics of
the time, including TCP slow start algorithms and congestion avoidance.  It
was the "how Van saved the net" talk (though he certainly did not put it
in those terms), and, many years later, the impression from that talk
remains.  Van Jacobson is a smart guy.
<p>

Unfortunately, attending Van's talk at linux.conf.au this year was not in
the program.  Fortunately, <a
href="http://vger.kernel.org/~davem/cgi-bin/blog.cgi/2006/01/27#vj_channels">David
Miller was there</a> and listening carefully.  Van has figured out how the
next round of networking performance improvements will happen, and he has
the numbers to prove it.  Expect some very interesting (and fundamental)
changes in the Linux networking stack as Van's ideas are incorporated.
This article attempts to cover the fundamentals of Van's scheme (called
"channels") based on David's weblog entry and <a
href="http://www.lemis.com/grog/Documentation/vj/lca06vj.pdf">Van's slides
[PDF]</a>.
<p>

Van, like many others, points out that the biggest impediment to
scalability on contemporary hardware is memory performance.  Current
processors can often execute multiple instructions per nanosecond, but
loading a cache line from memory still takes 50ns or more.  So cache
behavior will often be the dominant factor in the performance of kernel
code.  That is why simply making code smaller often makes it faster.  The
kernel developers understand cache behavior well, and much work has gone
into improving cache utilization in the kernel.
<p>

The Linux networking stack (like all others) does a number of things which
reduce cache performance, however.  These include:
<p>
<ul>

<li> Passing network packets through multiple layers of the kernel.  When a
     packet arrives, the network card's interrupt handler begins the task
     of feeding the packet to the kernel.  The remainder of the work may
     well be performed at software interrupt level within the driver (in a
     tasklet, perhaps).  The core network processing happens in another
     software interrupt.  Copying the data (an expensive operation in
     itself) to the application happens in kernel context.  Finally the
     application itself does something interesting with the data.  The
     context changes are expensive, and if any of these changes causes the
     work to move from one CPU to another, a big cache penalty results.
     Much work has been done to improve CPU locality in the networking
     subsystem, but much remains to be done.
<p>
<li> Locking is expensive.  Taking a lock requires a cross-system atomic
     operation and moves a cache line between processors.  Locking costs
     have led to the development of lock-free techniques like <a
     href="http://lwn.net/Articles/22818/">seqlocks</a> and <a
     href="http://lwn.net/Articles/37889/">read-copy-update</a>, but the
     the networking stack (like the rest of the kernel) remains full of locks.
<p>
<li> The networking code makes extensive use of queues implemented with
     doubly-linked lists.  These lists have poor cache behavior since they
     require each user to make changes (and thus move cache lines) in
     multiple places.
</ul>
<p>

To demonstrate what can happen, Van ran some <a
href="http://www.netperf.org/netperf/NetperfPage.html">netperf</a> tests on
an instrumented kernel.  On a single CPU system, processor utilization was
50%, of which 16% was in the socket code, 5% in the scheduler, and 1% in
the application.  On a two-processor system, utilization went to 77%,
including 24% in the socket code and 12% in the scheduler.  That is a worst
case scenario in at least one way: the application and the interrupt
handler were configured to run on different CPUs.  Things will not always
be that bad in the real world, but, as the number of processors increases,
the chances of the interrupt handler running on the same processor as any
given application decrease.
<p>

The key to better networking scalability, says Van, is to get rid of
locking and shared data as much as possible, and to make sure that as much
processing work as possible is done on the CPU where the application is
running.  It is, he says, simply the end-to-end principle in action yet
again.  This principle, which says that all of the intelligence in the
network belongs at the ends of the connections, doesn't stop at the
kernel.  It should continue, pushing as much work as possible out of the
core kernel and toward the actual applications.
<p>

The tool used to make this shift happen is the "net channel," intended to
be a replacement for the socket buffers and queues used in the kernel now.
Some details of how channels are implemented can be found in Van's slides,
but all that really matters is the core concept: a channel is a carefully
designed circular buffer.  Properly done, circular buffers require no locks
and share no writable cache lines between the producer and the consumer.
So adding
data to (or removing data from) a net channel will be a fast,
cache-friendly operation.
<p>

As a first step, channels can be pushed into the driver interface.  A
network driver need no longer be aware of <tt>sk_buff</tt> structures and
such; instead, it simply drops incoming packets into a channel as they are
received.  Making this change cuts the CPU utilization in the two-processor case
back to 58%.  But things need not stop there.  A next logical step would be
to get rid of the networking stack processing at softirq level and to feed
packets directly into the socket code via a channel.  Doing that requires
creating a separate channel for each socket and adding a simple packet
classifier so that the driver knows which 
channel should get each packet. The socket code must also be rewritten to do
the protocol processing (using the existing kernel code).  That change
drops the overall CPU utilization to 
28%, with the portion spent at softirq level dropping to zero.
<p>

But why stop there?  If one wants to be serious about this end-to-end
thing, one could connect the channel directly to the application.  Said
application gets the packet buffers mapped directly into its address space
and performs protocol processing by way of a user-space library.  This
would be a huge change in how Linux does networking, but Van's results
speak for themselves.  Here is his table showing the percentage CPU
utilization for each of the cases described above:
<p>
<blockquote>
<table cellspacing=3>
<tr><th></th><th>Total&nbsp;CPU</th><th>Interrupt</th><th>SoftIRQ</th>
    <th>Socket</th><th>Locks</th><th>Sched</th><th>App.</th></tr>

<tr class="Odd"><th>1 CPU</th>
                <td align="right">50</td>
                <td align="right">7</td>
                <td align="right">11</td>
                <td align="right">16</td>
                <td align="right">8</td>
                <td align="right">5</td>
                <td align="right">1</td>
</tr>

<tr class="Even"><th>2 CPUs</th>
                <td align="right">77</td>
                <td align="right">9</td>
                <td align="right">13</td>
                <td align="right">24</td>
                <td align="right">14</td>
                <td align="right">12</td>
                <td align="right">1</td>
</tr>


<tr class="Odd"><th>Driver channel</th>
                <td align="right">58</td>
                <td align="right">6</td>
                <td align="right">12</td>
                <td align="right">16</td>
                <td align="right">9</td>
                <td align="right">9</td>
                <td align="right">1</td>
</tr>

<tr class="Even"><th>Socket channel</th>
                <td align="right">28</td>
                <td align="right">6</td>
                <td align="right">0</td>
                <td align="right">16</td>
                <td align="right">1</td>
                <td align="right">3</td>
                <td align="right">1</td>
</tr>


<tr class="Odd"><th>App. channel</th>
                <td align="right">14</td>
                <td align="right">6</td>
                <td align="right">0</td>
                <td align="right">0</td>
                <td align="right">0</td>
                <td align="right">2</td>
                <td align="right">5</td>
</tr>

</table>
</blockquote>

<p>
The bottom line (literally) is this: processing time for the packet stream
dropped to just over 25% of the previous single-CPU case, and less than 20%
of the previous two-CPU behavior.  Three layers of kernel code have been
shorted out altogether, with the remaining work performed in the driver
interrupt handler and the application itself.  The test system running
with the full application channel code was able to handle twice the
network bandwidth as an unmodified system - with the processors idle most
of the time.
<p>

Linux networking hackers have always been highly attentive to performance
issues, so numbers like these are bound to get their attention.  Beyond
performance, however, this approach promises simpler drivers and a
reasonably straightforward transition between the current stack and a
future stack built around channels.  A channel-based user-space interface
will make it easy to create applications which can send and receive packets
 using any protocol.  If Van's results hold together in a "real-world"
implementation, the only remaining question would be: when will it be
merged so the rest of us can use it?<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Networking-Channels">Networking/Channels</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/169961/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor169986"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Small correction</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 31, 2006 20:43 UTC (Tue)
                               by <b>imcdnzl</b> (guest, #28899)
                              [<a href="/Articles/169986/">Link</a>] 
      </p>
      
      </div>
      </summary>
      A small correction to your story (as I was fortunate enough to be there) - the 50% is 100% of 1 CPU on a 2 CPU system - he was showing the results of the network card driver and the stack being bound to the same CPU.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/169986/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor170000"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Van Jacobson's network channels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 31, 2006 21:23 UTC (Tue)
                               by <b>job</b> (guest, #670)
                              [<a href="/Articles/170000/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      Thank you for yet another enlightening article which explains a foreign <br>
concepts so even mortals have at least a remote chance of understanding <br>
them! The concept sounds very interesting and I really look forward to <br>
seeing it in code. <br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170000/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor170001"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Van Jacobson's network channels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 31, 2006 21:28 UTC (Tue)
                               by <b>cloose</b> (guest, #5066)
                              [<a href="/Articles/170001/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <p><i>Thank you for yet another enlightening article which explains a  
foreign     
concepts so even mortals have at least a remote chance of understanding     
them!</i></p>  
    
<p>I totally agree. The just renewed subscription payed off again.</p>  
  
<p>   
Thank you for this great article!   
</p>  
      
          <div class="CommentReplyButton">
            <form action="/Articles/170001/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor170128"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">I concur on both points</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 1, 2006 15:19 UTC (Wed)
                               by <b>Baylink</b> (guest, #755)
                              [<a href="/Articles/170128/">Link</a>] 
      </p>
      
      </div>
      </summary>
      And, just to hammer the point home, Jon: you're at your best (and most compensable) when you're doing original journalism.  We pay you for your opinions, and your clarifications (like this one) of complicated topics.<br>
<p>
Do more.  :-)<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170128/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor171255"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Van Jacobson's network channels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 9, 2006 9:05 UTC (Thu)
                               by <b>burki99</b> (subscriber, #17149)
                              [<a href="/Articles/171255/">Link</a>] 
      </p>
      
      </div>
      </summary>
      After reading this article I immediately though: Wow, maybe I should finally subscribe after years of reading LWN a week delayed. This is the kind of article that differentiates this publication from the hundreds of other publications that just grabb a quote from LKML (Linus says no to GPL3) and add no insight at all.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/171255/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor170011"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Van Jacobson's network channels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 31, 2006 22:02 UTC (Tue)
                               by <b>ernest</b> (guest, #2355)
                              [<a href="/Articles/170011/">Link</a>] (10 responses)
      </p>
      
      </div>
      </summary>
      Interesting, but where do things like iptable and other network security <br>
fall in if the kernel doesn't do anything anymore with network packets ? <br>
 <br>
up to now that part fell into the Socket interface (I think). I can't <br>
beleive that last remaining 0% cpu still contains iptable handling. <br>
 <br>
can IP security be delegated to userspace ? <br>
 <br>
ernest. <br>
 <br>
 <br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170011/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor170014"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Van Jacobson's network channels and Netfilter</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 31, 2006 22:29 UTC (Tue)
                               by <b>csamuel</b> (<b>&#x272D; supporter &#x272D;</b>, #2624)
                              [<a href="/Articles/170014/">Link</a>] 
      </p>
      
      </div>
      </summary>
      I was fortunate enough to be both at the original presentation and when he repeated it for the "best of" stream at the end of LCA2006 and got to ask him about what the situation was with netfilter.<br>
<p>
His comment was that there was no reason why netfilter couldn't become just another consumer of packets, and my take on that is that whilst that would require patching to the netfilter code that too could be a good thing if it eliminates the use of double-linked lists (the use of which would cause you to fail CS 101 under VJ according to him :-)) but would probably be a lot of code.<br>
<p>
Of course this is only necessary if you go further than chanellising the drivers themselves as one of the really elegant things is that this change of thinking is that its very modular - you can convert drivers one at a time until they're all done, then start on looking at channelising the socket layer and then start on the consumers of the socket layer.<br>
<p>
There are 2 nice things about having the TCP stack running in user space, one is that it allows you to easily experiment and debug TCP issues and have custom behaviour for different applications based on need, and the second is that VJ explained the only reason it had to go into the kernel in Multics in the first place was that if a user process got pages out there it could take 2 minutes to get paged in, which TCP/IP doesn't like.. :-)<br>
<p>
Chris<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170014/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor170098"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Van Jacobson's network channels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 1, 2006 11:00 UTC (Wed)
                               by <b>james</b> (subscriber, #1325)
                              [<a href="/Articles/170098/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      Presumably you can do a <em>lot</em> of security when you set up the channels. It looks like the packet classifier:
<blockquote>
reads the protocol, ports, and addresses to determine the flow ID and uses this to find a channel
</blockquote>
(<a
href="http://vger.kernel.org/~davem/cgi-bin/blog.cgi/2006/01/27#vj_channels">Dave
Miller's blog</a>).
<p>
That looks like it's enough for most firewalling: it should give you pass (existing channel), fail (no channel), or needs more work (channel to netfilter).
      
          <div class="CommentReplyButton">
            <form action="/Articles/170098/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor170179"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Van Jacobson's network channels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 1, 2006 20:00 UTC (Wed)
                               by <b>NAR</b> (subscriber, #1313)
                              [<a href="/Articles/170179/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      I'm not sure I fully understand this, but it seems that these channels are used when there is a socket to the user space, i.e. an application running on the host sends/receives data to/from the network. But what about the case when there's no application? As far as I know, in routers the IP packets usually don't get to user space, but if protocol processing is moved to user space (netfilter), it might degrade performance, mightn't it?
<P>
<CENTER>Bye,NAR</CENTER>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170179/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor170270"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Van Jacobson's network channels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 2, 2006 5:45 UTC (Thu)
                               by <b>xoddam</b> (guest, #2322)
                              [<a href="/Articles/170270/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      The phased implementation described only moves packet processing to <br>
userspace at the very last stage.  At the 'ends' of the network this is <br>
appropriate for efficiency.  But even before that stage, channels are a <br>
better way to pass packets around within the kernel.  The task-oriented <br>
interface (using wakeups instead of soft interrupts) would probably mean <br>
netfilter no longer runs in tasklet context.  We might instead see <br>
several netfilter kernelspace daemons (like kswapd and friends), one for <br>
each CPU. <br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170270/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor170285"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Van Jacobson's network channels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 2, 2006 9:57 UTC (Thu)
                               by <b>NAR</b> (subscriber, #1313)
                              [<a href="/Articles/170285/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      Wouldn't it lead to code duplication? For example, a box doing NAT would need a (limited?) TCP/IP implementation in kernel space, while the host running e.g. an FTP client would need the full TCP/IP implementation in user space.
<P>
<CENTER>Bye,NAR</CENTER>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170285/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor170431"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Van Jacobson's network channels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 2, 2006 23:56 UTC (Thu)
                               by <b>xoddam</b> (guest, #2322)
                              [<a href="/Articles/170431/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <font class="QuotedText">&gt; Wouldn't it lead to code duplication? </font><br>
 <br>
Yes.  So does inlining :-) <br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170431/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor170406"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Van Jacobson's network channels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 2, 2006 21:46 UTC (Thu)
                               by <b>iabervon</b> (subscriber, #722)
                              [<a href="/Articles/170406/">Link</a>] 
      </p>
      
      </div>
      </summary>
      I don't see any reason that all of the channels would have to go to userspace. If a packet is to a kernel NFS client, it would end up in the kernel code, but without all the copies between the network and the VFS.<br>
<p>
Of course, the kernel would have to keep a TCP implementation, but that's not surprising, since static binaries that use sockets should continue to work.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170406/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor170316"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Van Jacobson's network channels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 2, 2006 12:29 UTC (Thu)
                               by <b>samj</b> (guest, #7135)
                              [<a href="/Articles/170316/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      If it doesn't cost anything, why not? You'd just plug netfilter in before the app and map packet buffers into its address space first. This can all be done  in a separate security context too. Looks to me like it would mean a lot less in the way of protocol specific handling and would allow you to chain such tasks easily (eg netfilter-&gt;ipsec or netfilter-&gt;reverse proxy-&gt;web server etc.).<br>
<p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170316/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor170385"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Van Jacobson's network channels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 2, 2006 20:12 UTC (Thu)
                               by <b>jonabbey</b> (guest, #2736)
                              [<a href="/Articles/170385/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Please, someone tell me they're not re-inventing STREAMS.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170385/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor170401"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Van Jacobson's network channels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 2, 2006 20:53 UTC (Thu)
                               by <b>caitlinbestler</b> (guest, #32532)
                              [<a href="/Articles/170401/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Connections can be channelized *after* they have<br>
passed netfilter inspection.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170401/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor170026"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">nitpicking</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 31, 2006 22:36 UTC (Tue)
                               by <b>xav</b> (guest, #18536)
                              [<a href="/Articles/170026/">Link</a>] 
      </p>
      
      </div>
      </summary>
      s/want to 77%/went to 77%/<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170026/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor170027"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Van Jacobson's network channels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 31, 2006 22:49 UTC (Tue)
                               by <b>csamuel</b> (<b>&#x272D; supporter &#x272D;</b>, #2624)
                              [<a href="/Articles/170027/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      A couple of other quick comments from my notes of the two instances of this talk done at LCA 2006:<br>
<p>
0) VJ said that the talk was *not* about fixing the Linux TCP stack as "the Linux TCP stack isn't broken" - but just because something has always been done this way (SKB's) doesn't mean it is necessarily the best way.<br>
<p>
1) VJ was asked about this code going into the kernel - his reply was that he would slap the GPL onto his new code for the drivers and the socket layer on the plane home but that the user layer TCP side may be a bit more difficult as he needs to get agreement from others.<br>
<p>
2) The entire user level TCP stack was done as a LD_PRELOAD'ed library and hence no actual changes to applications are necessary, so people can experiment to their hearts content with tuning TCP application by application. Fancy an Apache with a different congestion control method to your OpenSSH clients and server ?  Go for it..<br>
<p>
3) This reduced the amount of code in the interrupt handler of the e1000 considerably (from ~700 lines down to ~300) and removes all SKB code hence simplifing drivers, which can only be a good thing.<br>
<p>
4) The new channelised napi_poll() routine is generic, rather than the current device-dependant implementations.<br>
<p>
All in all an excellent talk <br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170027/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor170053"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Van Jacobson's network channels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 1, 2006 0:57 UTC (Wed)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/170053/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      Obviously in a full-userspace-TCP/IP implementation, the default implementation would go into something on a par with glibc. Giving everything that wants to do networking an LD_PRELOAD would hammer performance and give Ulrich Drepper an aneurysm ;)<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170053/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor170962"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Van Jacobson's network channels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 7, 2006 18:15 UTC (Tue)
                               by <b>arafel</b> (guest, #18557)
                              [<a href="/Articles/170962/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Well, y'know, I'm sure Ulrich's not got enough to do these days... ')<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170962/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor170030"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Van Jacobson's network channels &amp; 10 Gb/s ethernet</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 31, 2006 22:54 UTC (Tue)
                               by <b>csamuel</b> (<b>&#x272D; supporter &#x272D;</b>, #2624)
                              [<a href="/Articles/170030/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      Two final comments - honest!<br>
<p>
1) His test results for 10Gb/s ethernet were limited not by drivers, kernel or networking but by the memory bandwidth of the DDR333 chips in the system he was testing on!<br>
<p>
He estimated that you would need at least DDR800 RAM to be able to have enough memory bandwidth to drive 10Gb/s at capacity.<br>
<p>
2) VJ said anyone who tells you that you'll need a TOE is not telling the truth.  OK - this was known already but could be handy for beating vendors around the head with.. :-)<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170030/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor170060"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Van Jacobson's network channels &amp; 10 Gb/s ethernet</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 1, 2006 2:17 UTC (Wed)
                               by <b>bk</b> (guest, #25617)
                              [<a href="/Articles/170060/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      What is a TOE?<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170060/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor170064"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">TOE</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 1, 2006 2:25 UTC (Wed)
                               by <b>corbet</b> (editor, #1)
                              [<a href="/Articles/170064/">Link</a>] 
      </p>
      
      </div>
      </summary>
      TOE = "TCP Offload Engine," the TCP protocol implemented in adapter firmware.  See <a href="http://lwn.net/Articles/148697/">this Kernel Page article</a> from last August for one Linux-based implementation and all the reasons why it didn't get merged.
      
          <div class="CommentReplyButton">
            <form action="/Articles/170064/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor170268"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Van Jacobson's network channels &amp; 10 Gb/s ethernet</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 2, 2006 5:35 UTC (Thu)
                               by <b>bos</b> (guest, #6154)
                              [<a href="/Articles/170268/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      Plenty of Linux networking gear can drive 10Gbps hardware at line rate, and I'm not even talking about fancy TOE hardware in all cases.<br>
<p>
Not having been at the talk, I don't know what circumstances he was talking about (perhaps specifically TCP at 10Gbps?), so I'm not picking a nit with his assertion, just pointing out that something along those lines can be done without scads of memory bandwidth.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170268/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor171045"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Van Jacobson's network channels &amp; 10 Gb/s ethernet</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 8, 2006 8:57 UTC (Wed)
                               by <b>csamuel</b> (<b>&#x272D; supporter &#x272D;</b>, #2624)
                              [<a href="/Articles/171045/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Yes, this is about TCP, not just pushing datagrams out..   <br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/171045/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor170036"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">VERY interesting - but security implications to others?!?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 31, 2006 23:27 UTC (Tue)
                               by <b>dwheeler</b> (guest, #1216)
                              [<a href="/Articles/170036/">Link</a>] (16 responses)
      </p>
      
      </div>
      </summary>
      This looks VERY interesting, and I expect that this WILL be implemented.  I think this is (mostly) a very good idea.
<p>
But it appears to me that this has a dark side.  Today, because the kernel assembles packets, then only trusted (root) programs can forge packets and create many kinds of funky attack packets.  If user-level applications can create arbitrary packets, then ANYONE -- even untrusted applications -- can forge arbitrary packets and arbitrary attack packets.
<p>
Clearly, in some situations this wouldn't matter.  But historically getting only "user privileges" limited what you could do, including having to give away your IP address and only being able to send certain kinds of packets.  This gives a new weapon, not so much against the machine IMPLEMENTING the new approach, but against OTHER machines (whether or not they do so).   Today, given only low privileges, you can't create funky packets (like Xmas tree ones) or total forgeries.  Unless there are kernel-level checks or I misunderstand something, you CAN cause these problems.
<p>
Just imagine; a user-space app sends out a broadcast from 127.0.0.1, etc., etc.  There's a LOT of mischief that's been limited to kernel-space programs before that this might expose.
<p>
I'd like to see an implementation automatically check the outgoing packets for certain properties as part of the kernel (e.g., valid sender IP and port address, etc.).  But I fear that won't happen by default, because (1) that would take extra time, and (2) it only affects OTHER people.  And I understand (though don't agree with) the other side of the coin: Yes, of course people who have root can send any packet.  That's not my point.  My point is that for a large, shared network to be useful, there needs to be a defense-in-depth so that attackers aren't automatically given the whole store when they get just a little privilege.  This would kick away one of those mechanisms.
Eek.

      
          <div class="CommentReplyButton">
            <form action="/Articles/170036/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor170059"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">VERY interesting - but security implications to others?!?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 1, 2006 2:20 UTC (Wed)
                               by <b>elanthis</b> (guest, #6227)
                              [<a href="/Articles/170059/">Link</a>] (13 responses)
      </p>
      
      </div>
      </summary>
      That whole "only root can do stuff to the network" reasoning is complete bunk.<br>
<p>
Absolutely nothing stops a user from booting their workstation with a LiveCD that they have root access to.  Or plugging in a different machine to the network.  Or rebooting into single-user mode.<br>
<p>
You cannot rely on a per-machine control like root access to protect your network.  If you want to do that, you have to have some sort of encryption/signing on every network packet sent and physically lock down the end-user workstations so that they can't reboot into single-user mode or pop in a LiveCD or modify/replace the hard disk.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170059/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor170067"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">That's not the only meaning of that statement</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 1, 2006 2:34 UTC (Wed)
                               by <b>Ross</b> (guest, #4065)
                              [<a href="/Articles/170067/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      I sure hope that no application which I run as a normal user is able to reboot the system into another operating system in order to use raw sockets and low port numbers.<br>
<p>
If it could, that's what I'd call a gaping security hole.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170067/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor170070"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">protocol validity checks</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 1, 2006 3:57 UTC (Wed)
                               by <b>xoddam</b> (guest, #2322)
                              [<a href="/Articles/170070/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      can imagine an internal 'firewall' inspecting the header of each packet 
traversing a channel from userspace to ensure the app has sufficient 
privilege to send it.  A pipeline stage with negligible performance 
impact -- it wouldn't thrash the cache, and if it's in the kernel it 
would involve no extra context switches. 
      
          <div class="CommentReplyButton">
            <form action="/Articles/170070/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor170080"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">protocol validity checks</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 1, 2006 6:38 UTC (Wed)
                               by <b>cventers</b> (guest, #31465)
                              [<a href="/Articles/170080/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      Yeah, since you're writing into mapped memory, the kernel can check it <br>
out in place. And since there's no copy, it's going to be hanging out in <br>
the cache when the check has to take place. <br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170080/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor170469"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">protocol validity checks</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 3, 2006 4:15 UTC (Fri)
                               by <b>zblaxell</b> (subscriber, #26385)
                              [<a href="/Articles/170469/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      kernel can check it out in place...while the user, maybe on another CPU, switches a few bits just after the kernel check but before the network card picks up the data.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170469/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor170471"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Sneaky indeed!</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 3, 2006 5:48 UTC (Fri)
                               by <b>xoddam</b> (guest, #2322)
                              [<a href="/Articles/170471/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Ok, freely mapped memory doesn't cut it then.  I wonder what the <br>
performance impact of changing packet buffers' page permissions would be, <br>
relative to copying (and relative to keeping the TCP implementation in <br>
kernel space)? <br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170471/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor170108"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">That's not the only meaning of that statement</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 1, 2006 12:15 UTC (Wed)
                               by <b>smitty_one_each</b> (subscriber, #28989)
                              [<a href="/Articles/170108/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      I think parent's point was about a living user doing a cold boot with a live CD, and then comitting mischief, not about an existing application you're running somehow warm booting and doing that.<br>
Clearly, unprotected ON/OFF switches and promiscuous BIOS boot settings can be a gaping security hole.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170108/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor170116"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">That's not the only meaning of that statement</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 1, 2006 13:54 UTC (Wed)
                               by <b>Ross</b> (guest, #4065)
                              [<a href="/Articles/170116/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      Yes and my point what is equivalent with physical security is not the totality of the problem.  Of course if someone has physical access to your network they can any packets they like on it.  But unpriviledged processes running on your server don't have physical access, but in the same scenario they would have the same level of access.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170116/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor170259"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">That's not the only meaning of that statement</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 2, 2006 4:05 UTC (Thu)
                               by <b>elanthis</b> (guest, #6227)
                              [<a href="/Articles/170259/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      And my point remains... what is that unprivileged process going to do that you couldn't do by plugging in a laptop or some other device onto the network?<br>
<p>
If you are implicitly trusting every packet sent by some 'trusted' host (which, if it were truly trusted, would never be running any malicious code anyhow), or trusting anything running on port 1024 down, you're not running a very secure network at all.<br>
<p>
There is no security at the IP level at all.  If you want trust and security, you have to put it all in higher layers.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170259/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor170267"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">That's not the only meaning of that statement</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 2, 2006 5:28 UTC (Thu)
                               by <b>Ross</b> (guest, #4065)
                              [<a href="/Articles/170267/">Link</a>] 
      </p>
      
      </div>
      </summary>
      If you're only point is that security shouldn't depend on the network not being compromised I agree.  However malicious users with unfettered physical access are not at all equivalent to malicious processes running under unpriviledged ids and that anything which makes them equivalent is decreasing security.  Does it matter for well designed programs?  No.  But unfortunately tons of commonly used software is not well designed.  If you can't trust IPs, port numbers, etc. many things break down.  If you can't trust a program a user downloaded you should worry, but your network is not automatically compromised unless there is something which can be exploited on the system.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170267/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor170141"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Users don't always WANT to attack</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 1, 2006 16:35 UTC (Wed)
                               by <b>dwheeler</b> (guest, #1216)
                              [<a href="/Articles/170141/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Sure, if a user is malicious, they can boot the system into some OS where they're fully privileged and attack.  Or just unplug the network, plug in their own laptop where they have all privileges, and attack.
<p>
That's not the point.  Not all users are malicious.  Sometimes they run programs that APPEAR to do one thing, but do another.  Sometimes systems run servers (like web servers) that an attacker can somehow subvert. In THOSE cases, I'd like the system to still limit what the attacker can do, INCLUDING limits on how the attacker can attack other systems.
<p>
Sure, all systems should be invulnerable to all attackers.  But they aren't.  Anyone who's managed a big network knows how hard it is to keep EVERYTHING secure, ESPECIALLY since there are some vendors who do not release patches for KNOWN vulnerabilities (names withheld, but Google can help you find them rather quickly).  So you really need defense-in-depth: you need to try to make it so that attackers have to break down MULTIPLE barriers to get the goods.
<p>
Limiting the network-level actions of unprivileged accounts is not the be-all of security.  But it's one of the few mechanisms we CURRENTLY have deployed widely that slow the spread of attacks across a network.  Diseases that spread rapidly are often unstoppable, because you just don't have enough time to react.  Slowing the spread of a disease is key to countering it.  Similarly, in the network world, slowing down attack vectors is also key to countering it.
<p>
I'd like to see that packets from untrusted user apps are still FORCED to obey certain limits on what they can send.
You don't need a system-wide lock to do that kind of checking; after a call to the kernel, the memory could be mapped out and checked WITHOUT harming the cache lines of other systems.
For most systems it'd just involve checking a few bytes... nothing expensive, and certainly taking less time than sending something down any network port.


      
          <div class="CommentReplyButton">
            <form action="/Articles/170141/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor170181"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">VERY interesting - but security implications to others?!?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 1, 2006 20:08 UTC (Wed)
                               by <b>NAR</b> (subscriber, #1313)
                              [<a href="/Articles/170181/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <I>Absolutely nothing stops a user from booting their workstation with a LiveCD that they have root access to.</I>
<P>
Except the fact that this user can be an unauthorized one who've just cracked into the system from an other continent using the latest bug in a PHP BBS and his processes are running as 'nobody' user. He'd have hard time putting a live CD into the computer, but still we really don't want him to send arbitrary packets into the network.
<P>
<CENTER>Bye,NAR</CENTER>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170181/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor171074"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">VERY interesting - but security implications to others?!?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 8, 2006 13:14 UTC (Wed)
                               by <b>jzbiciak</b> (guest, #5246)
                              [<a href="/Articles/171074/">Link</a>] 
      </p>
      
      </div>
      </summary>
      I wonder if you can still get most of the benefits of network channels if you limit their accessibility to special user IDs, and then require non-privileged applications to use cooperating threads--one privileged, one not--to send packets.<br>
<p>
That way, the TCP/IP implementation can be stored away in a fixed implementation that root checks in on (and the kernel may even checksum at lauch time), but the processing still lives in userspace.  It looks a little like the priv-sep that sshd uses.<br>
<p>
Granted, with two cooperating threads, you get back to some of the context switching issues, but still it feels a little more flexible than keeping it in kernel space.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/171074/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor171598"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">VERY interesting - but security implications to others?!?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 11, 2006 9:33 UTC (Sat)
                               by <b>efexis</b> (guest, #26355)
                              [<a href="/Articles/171598/">Link</a>] 
      </p>
      
      </div>
      </summary>
      If my memory serves me correctly, there are one or two servers out there on the internet that run linux. I know it's not very common, but some of them actually rent space/bandwidth/etc so that people can host their own websites, and they allow these users to run code (cgi scripts) or even have shell access via telnet/ssh.<br>
<p>
You obviously don't see this practice taking off, but even so, I think if you told someone who offers shared hosting, not to bother protecting against ways unprivilidged users can cause havock, because somebody "can simple break into the datacenter with a boot CD or laptop"... you'd probably get an incredibly sarcastic response.<br>
<p>
But no, you stick to talking about how to improve the performance of a 10Gig heavy loaded network interface --on a workstation-- where it'll really count.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/171598/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor170262"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">VERY interesting - but security implications to others?!?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 2, 2006 4:11 UTC (Thu)
                               by <b>jamesh</b> (guest, #1159)
                              [<a href="/Articles/170262/">Link</a>] 
      </p>
      
      </div>
      </summary>
      There isn't much problem with this model on the receive end, assuming that the kernel correctly classifies packets and sends them to the right process.<br>
<p>
As for sending, all that is necessary is a packet verifier, that makes sure the packet is appropriate for the given socket (which should be a lot simpler than a full TCP send implementation).  If the packet shouldn't be getting sent from the socket, the kernel doesn't transmit it.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170262/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor170596"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">VERY interesting - but security implications to others?!?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 3, 2006 18:57 UTC (Fri)
                               by <b>caitlinbestler</b> (guest, #32532)
                              [<a href="/Articles/170596/">Link</a>] 
      </p>
      
      </div>
      </summary>
      The same filter rules that route inbound packets<br>
can be used to validate outbound packets. You<br>
simply do not accept packets from a channel if<br>
the response packet would not be routed to <br>
the matching channel.<br>
<p>
So the privileged end of the channel can validate<br>
that every packet on it is for a TCP connection<br>
that is actually assigned to that channel.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170596/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor170043"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Van Jacobson's network channels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 1, 2006 0:00 UTC (Wed)
                               by <b>busterb</b> (subscriber, #560)
                              [<a href="/Articles/170043/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Arsenic was an earlier implementation of a similar idea with apparently <br>
good results: <br>
 <br>
<a href="http://www.cl.cam.ac.uk/Research/SRG/netos/arsenic/">http://www.cl.cam.ac.uk/Research/SRG/netos/arsenic/</a> <br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170043/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor170092"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">reinvention?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 1, 2006 9:51 UTC (Wed)
                               by <b>etroup</b> (guest, #21786)
                              [<a href="/Articles/170092/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      So is anyone else reminded of System V <a href="http://computing-dictionary.thefreedictionary.com/SysV+Streams">Streams
</a>?
      
          <div class="CommentReplyButton">
            <form action="/Articles/170092/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor170095"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">reinvention?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 1, 2006 10:19 UTC (Wed)
                               by <b>ctg</b> (guest, #3459)
                              [<a href="/Articles/170095/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      No. Streams are almost antithetical to Channels.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170095/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor170137"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">reinvention?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 1, 2006 15:51 UTC (Wed)
                               by <b>macc</b> (guest, #510)
                              [<a href="/Articles/170137/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      I had the same feeling of similarity.<br>
<p>
could you elaborate on the differences?<br>
<p>
<p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170137/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor170146"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">reinvention?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 1, 2006 16:39 UTC (Wed)
                               by <b>vmole</b> (guest, #111)
                              [<a href="/Articles/170146/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      Streams were about introducing lots of layers, each doing some sort of processing on the packets (or whatever), and each layer involving copying the data. VJ's channels are about getting the data into user space as quickly as possible, minimizing the actual processing and layering.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170146/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor170265"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">reinvention?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 2, 2006 4:53 UTC (Thu)
                               by <b>bcd</b> (guest, #11759)
                              [<a href="/Articles/170265/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Not quite true: STREAMS had built-in facilities to help avoid data copies.  It is a heavily layered model, and the queueing is not extremely efficient, but byte-for-byte copies are minimal in a properly configured STREAMS system.<br>
<p>
These channels are a totally different concept, though, and address a different problem entirely.<br>
<p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170265/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor170129"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Van Jacobson's network channels -- Microkernel?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 1, 2006 15:41 UTC (Wed)
                               by <b>smoogen</b> (subscriber, #97)
                              [<a href="/Articles/170129/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      From a 10,000 m view, this looks either like the days of DOS where every application had its own TCP stack :), or a better take on microkernels. The kernel sets up the basic stuff for the machin, and the channels for the smaller daemons that then handle things like iptables, the stack etc. Each of these would be a herd of daemons interconnecting between each other. <br>
<p>
[I am sorry for the hurd joke.. it was a very long night and I found it funny.]<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170129/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor170183"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Van Jacobson's network channels -- Microkernel?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 1, 2006 20:12 UTC (Wed)
                               by <b>NAR</b> (subscriber, #1313)
                              [<a href="/Articles/170183/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      Isn't it ironic that khttpd/tux sped up web server perfomance by moving protocol processing <B>into</B> the kernel, but now Van Jacobson can speed up web server perfomance by moving protocol processing <B>out</B> of the kernel :-)
<P>
<CENTER>Bye,NAR</CENTER>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170183/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor170195"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Van Jacobson's network channels -- Microkernel?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 1, 2006 20:48 UTC (Wed)
                               by <b>JoeBuck</b> (subscriber, #2330)
                              [<a href="/Articles/170195/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      It's not really so surprising.  The cost being avoided in both cases is context switching.  The default way of doing things is that the lower-level processing is in the kernel and the higher-level processing is in userspace. Either moving almost everything into the kernel, or moving almost everything out, reduces the overhead.

      
          <div class="CommentReplyButton">
            <form action="/Articles/170195/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor170256"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Van Jacobson's network channels -- Microkernel?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 2, 2006 2:13 UTC (Thu)
                               by <b>jwb</b> (guest, #15467)
                              [<a href="/Articles/170256/">Link</a>] 
      </p>
      
      </div>
      </summary>
      In this case, the advantage is also that protocol processing is being done 1) in parallel, on an SMP machine; and 2) in the same cache space as the interested user process.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170256/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor170260"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Van Jacobson's network channels -- Microkernel?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 2, 2006 4:05 UTC (Thu)
                               by <b>atai</b> (subscriber, #10977)
                              [<a href="/Articles/170260/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      So the Hurd still has hope for speed?<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170260/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor170269"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">HURD fast?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 2, 2006 5:36 UTC (Thu)
                               by <b>xoddam</b> (guest, #2322)
                              [<a href="/Articles/170269/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Not with Linux evolving at this rate :-) <br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170269/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor170261"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Exokernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 2, 2006 4:11 UTC (Thu)
                               by <b>ttfkam</b> (guest, #29791)
                              [<a href="/Articles/170261/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      Reading about moving the network stack out to userspace made me think of the design of <a href="http://en.wikipedia.org/wiki/Exokernel">MIT's Exokernel OS</a>.
<p>
Just as Ingo Molnar's work in migrating the scheduler to an O(1) algorithm was a taste of more extensive implementation of O(1) algorithms in the kernel, perhaps elements of the exokernel will find their day in various parts of Linux.

      
          <div class="CommentReplyButton">
            <form action="/Articles/170261/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor170291"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Exokernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 2, 2006 11:55 UTC (Thu)
                               by <b>csamuel</b> (<b>&#x272D; supporter &#x272D;</b>, #2624)
                              [<a href="/Articles/170291/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <p>VJ said that the only reason that TCP/IP was done in the kernel in 
Multics  
in the first place was because that was the only place you could be  
guaranteed not to get paged out for two minutes at a stretch. </p> 
      
          <div class="CommentReplyButton">
            <form action="/Articles/170291/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor170668"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Exokernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 4, 2006 19:44 UTC (Sat)
                               by <b>kbob</b> (guest, #1770)
                              [<a href="/Articles/170668/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      It would be unfortunate if TCP became incompatible with job control.  I often suspend network jobs for various reasons, secure in the knowledge that the kernel will keep the TCP connection alive indefinitely.<br>
<p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170668/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor170677"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Exokernels</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 5, 2006 1:47 UTC (Sun)
                               by <b>lutchann</b> (subscriber, #8872)
                              [<a href="/Articles/170677/">Link</a>] 
      </p>
      
      </div>
      </summary>
      On the other hand, most connection-oriented application protocols these days have a timeout mechanism above the TCP.  If you suspend your IMAP or XMPP client for more than a minute or two you're likely to have a broken connection when you foreground the application again.<br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170677/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor170272"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Van Jacobson's network channels - how about network failovers?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 2, 2006 7:11 UTC (Thu)
                               by <b>jiri.hlusi</b> (guest, #34016)
                              [<a href="/Articles/170272/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      The throughput gain numbers presented are certainly interesting. But does it affect e.g. network failovers (bonding) as well? There is loads of useful stuff [potentially] done in the kernel space, if one only sees the need for using it. Moving lots of the add-on functionality to the user space libraries might put own price tag to the complexity of those libraries as such.<br>
<p>
<p>
-- Jiri<br>
<p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170272/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor170599"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Van Jacobson's network channels - how about network failovers?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 3, 2006 19:00 UTC (Fri)
                               by <b>caitlinbestler</b> (guest, #32532)
                              [<a href="/Articles/170599/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Why wouldn't you be able to create a net channel<br>
to a non-physical netdevice? You still have <br>
removed the L4 processing from the kernel and<br>
gotten the same reduction in context switching.<br>
<p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170599/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor170318"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Interrupt Latencies?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 2, 2006 13:04 UTC (Thu)
                               by <b>simlo</b> (guest, #10866)
                              [<a href="/Articles/170318/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      This way work is moved from kernel threads into userspace and into the interrupt handler. The amount of work needed to be done in interrupt context is probably also dependent on the number of channels, i.e. number of open network sockets. Wouldn't we open the machine up to an effective DDOS attack: Spam the network with small packets. If the machine has a lot of network sockets open the each interrupt takes a long time to excecute and at some point there isn't any cpu left. <p>
This issue is not so much problem if you run the handling in a thread (ksoftirqd) which will get lower priority as it starts to eat a lot of CPU. That way packets are dropped, but the rest of the system can run.
      
          <div class="CommentReplyButton">
            <form action="/Articles/170318/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor170432"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Interrupt Latencies?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 3, 2006 0:34 UTC (Fri)
                               by <b>xoddam</b> (guest, #2322)
                              [<a href="/Articles/170432/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <font class="QuotedText">&gt; This way work is moved from kernel threads into userspace and   </font><br>
<font class="QuotedText">&gt; into the interrupt handler.   </font><br>
   <br>
Packet handling isn't currently done in kernel threads, it's done in  <br>
tasklets (OK, tasklets do run in a softirqd thread with the RT patch).  <br>
That's a great way to hog a CPU, and the channel implementation fixes the  <br>
problem by passing work to a thread, just as you suggest!  In the slides  <br>
you'll see that the example channel 'producer' code wakes the listening  <br>
thread, so the 'consumer' is necessarily a task (but not necessarily a <br>
userspace one). <br>
  <br>
An O(log n) search algorithm in the isr would indeed have high latency  <br>
with a very large number of channels to choose from -- but there is no  <br>
reason why the isr would have to select the final target amongst millions  <br>
of user sockets; channels are just as good for intermediate queueing  <br>
within the kernel as they are for delivery to userspace.  <br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/170432/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor171046"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Interrupt Latencies?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 8, 2006 9:02 UTC (Wed)
                               by <b>csamuel</b> (<b>&#x272D; supporter &#x272D;</b>, #2624)
                              [<a href="/Articles/171046/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Erm, actually VJ was removing code from the interrupt context - he gave <br>
the example of the e1000 driver going from ~700 lines of code executed in <br>
an interrupt context down to ~400 lines. <br>
      
          <div class="CommentReplyButton">
            <form action="/Articles/171046/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2006, Eklektix, Inc.<BR>
            
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
