        <!DOCTYPE html>
        <html lang="en">
        <head><title>The 2.6.39 merge window concludes [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/435716/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/435215/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/435716/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>The 2.6.39 merge window concludes</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Please consider subscribing to LWN</b>
<p>
Subscriptions are the lifeblood of LWN.net.  If you appreciate this
content and would like to see more of it, your subscription will
help to ensure that LWN continues to thrive.  Please visit
<a href="/Promo/nst-nag1/subscribe">this page</a> to join up and keep LWN on
the net.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>March 29, 2011</br>
           </div>
There have been just over 2,200 non-merge changesets pulled into the mainline since
<a href="/Articles/434637/">the second installment</a> in this series; that
makes 8,757 total changes for this development cycle.  The
2.6.39 merge window is now closed, so the feature set for this kernel
development cycle should be complete.  User-visible changes merged in the
final part of the merge window include:
<p>
<ul>
<li> Beginning <a href="/Articles/420624/">user namespace</a> support has
     been merged.  User namespaces are a sort of container where processes
     can safely be given root access within the container without being
     able to affect the rest of the system.  Full container support is a
     long-term project, but the user namespace patches get the kernel one
     step closer.
<p>
<li> It is now possible for a suitably privileged process to write 
     to a processes <tt>/proc/<i>pid</i>/mem</tt> file.
<p>
<li> The "group isolation" tunable for the CFQ I/O scheduler has been
     removed; group isolation is always provided now that the performance
     issues associated with that mode have been fixed.
<p>
<li> There is a new "mtdswap" block device which allows swapping directly
     to memory technology devices.
<p>
<li> New hardware support includes:
     <p>
     <ul>
     <li> <b>Processors and systems</b>: Samsung Laptop SABI interfaces,
	  WMI Hotkeys for Dell All-In-One series,
	  Intel Medfield platform thermal sensors, and
	  Asus Notebook WMI interfaces.

     <p>
     <li> <b>Miscellaneous</b>: MSM chipset SMD packet ports,
     	  Texas Instruments TWL4030 hardware monitoring controllers,
	  ST-Ericsson AB8500 voltage monitors,
	  Maxim Semiconductor MAX8997/8966 PMICs,
	  Maxim 8997/8966 regulators,
	  Texas Instruments TPS61050/61052 boost converters,
	  Ricoh R5C592 card readers, and
	  OLPC XO-1.5 ebook switches.
     <p>
     <li> <b>Video4Linux</b>: Technisat USB2.0 DVB-S/S2 receivers,
     	  Silicionfile NOON010PC30 CIF camera sensors,
	  DiBcom 9000 tuners,
	  3com homeconnect "ViCam" cameras,
	  OmniVision OV9740 sensors,
	  ST Microelectronics STV0367 demodulators,
	  OMAP3 camera controllers,
	  Divio NW80x-based camera controllers, and
     	  ITE Tech IT8712/IT8512 infrared transceivers.
     </ul>

</ul>
<p>
Changes visible to kernel developers include:
<p>
<ul>

<li> The <tt>dma64_addr_t</tt> type is no longer used in the kernel; it
     has been removed.
<p>
<li> The videobuf framework in the Video4Linux2 subsystem has been replaced
     by a newer "videobuf2" version.
<p>
<li> The <a href="/Articles/415714/">media controller subsystem</a>,
     intended to allow the system to export information about the topology
     of complex media subsystems to user space, has been merged.
<p>
<li> <tt>printk()</tt> and friends have a new "<tt>%pB</tt>" format
     specifier which prints a backtrace symbol and its offset.
<p>
<li> The m68k and m68knommu architectures have been merged in the kernel
     source tree.
<p>
<li> A support library for BCH (Bose-Chaudhuri-Hocquenghem) encoding and
     decoding has been added.
<p>
<li> Some low-level interrupt-related functions have changed names:
     <p>
     <blockquote>
     <table cellspacing=2>
     <tr><th>Old</th><th>New</th></tr>
     <tr><td><tt>get_irq_chip()</tt></td><td><tt>irq_get_chip()</tt></td></tr>
     <tr><td><tt>get_irq_chip_data()</tt></td><td><tt>irq_get_chip_data()</tt></td></tr>
     <tr><td><tt>get_irq_msi()</tt></td><td><tt>irq_get_msi_desc()</tt></td></tr>
     <tr><td><tt>irq_data_get_irq_data()</tt></td>
		<td><tt>irq_data_get_irq_handler_data()</tt></td></tr>
     <tr><td><tt>set_irq_chained_handler()</tt></td>
		<td><tt>irq_set_chained_handler()</tt></td></tr>
     <tr><td><tt>set_irq_chip()</tt></td><td><tt>irq_set_chip()</tt></td></tr>
     <tr><td><tt>set_irq_chip_and_handler_name()</tt></td>
		<td><tt>irq_set_chip_and_handler_name()</tt></td></tr>
     <tr><td><tt>set_irq_data()</tt></td><td><tt>irq_set_handler_data()</tt></td></tr>
     <tr><td><tt>set_irq_handler()</tt></td><td><tt>irq_set_handler()</tt></td></tr>
     <tr><td><tt>set_irq_nested_thread()</tt></td>
     		<td><tt>irq_set_nested_thread()</tt></td></tr>
     <tr><td><tt>set_irq_noprobe()</tt></td><td><tt>irq_set_noprobe()</tt></td></tr>
     <tr><td><tt>set_irq_type()</tt></td><td><tt>irq_set_irq_type()</tt></td></tr>
     <tr><td><tt>set_irq_wake()</tt></td><td><tt>irq_set_irq_wake()</tt></td></tr>
     </table>
     </blockquote>
     <p>
     The prototypes for these functions are otherwise unchanged.
</ul>
<p>

The 2.6.39 kernel now goes into the stabilization phase of the development
cycle.  If the usual pattern holds, we can expect to see on the order of
2000 fixes merged between now and the final release, which is likely to
happen in early June.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Releases-2.6.39">Releases/2.6.39</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/435716/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor436233"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2.6.39 merge window concludes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 31, 2011 7:12 UTC (Thu)
                               by <b>tcourbon</b> (guest, #60669)
                              [<a href="/Articles/436233/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It may be a trivial question, but does the inclusion of "Samsung Laptop SABI interface" means that I will be able to use the Fn-key of my Samsung N210 ? I failed at founding what device are involved with that SABI thing.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/436233/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor436241"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2.6.39 merge window concludes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 31, 2011 8:52 UTC (Thu)
                               by <b>cladisch</b> (<b>&#x272D; supporter &#x272D;</b>, #50193)
                              [<a href="/Articles/436241/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Probably: <a href="http://www.kroah.com/log/linux/samsung_laptop.html">http://www.kroah.com/log/linux/samsung_laptop.html</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/436241/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor436337"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2.6.39 merge window concludes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 31, 2011 17:23 UTC (Thu)
                               by <b>yokem_55</b> (guest, #10498)
                              [<a href="/Articles/436337/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Did the Btrfs Raid 5/6 code make it in? My understanding is that it was mostly ready but I didn't see it in a quick look through the full changelog?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/436337/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor437346"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The 2.6.39 merge window concludes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 7, 2011 11:56 UTC (Thu)
                               by <b>csamuel</b> (<b>&#x272D; supporter &#x272D;</b>, #2624)
                              [<a href="/Articles/437346/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I've seen no evidence of the RAID5/6 patches on the btrfs mailing list for some time now, so I wouldn't hold my breath for now. I've seen rumours that Chris Mason wants to merge the code once he's got a working btrfsck out there, but even that has been due RSN for a while.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/437346/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor436445"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">user namespace and uid namespace</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 1, 2011 1:19 UTC (Fri)
                               by <b>mfedyk</b> (guest, #55303)
                              [<a href="/Articles/436445/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I'd like to point out that we had/have the uid namespace that went in around 2.6.27, which given the existence of user namespace, apparently didn't cover capabilities within the uid namespace (ie, leaving capabilities global to all namespaces).<br>
<p>
I haven't been following this part of the namespace progression so I can only surmise what happened to the uid namespace.<br>
<p>
Are there two namespaces now, uid and user with user ns being a superset of uid ns? Or was uid ns extended to cover capabilities within uid ns and renamed to user ns?<br>
<p>
Now let me quote from the linked article (<a href="http://lwn.net/Articles/420624/">http://lwn.net/Articles/420624/</a>):<br>
<p>
<font class="QuotedText">&gt; The user that creates the namespace will have all capabilities in that namespace, not just the set of capabilities they have in the parent. Essentially, the creator has the privileges of the root user in any namespace he or she creates.</font><br>
<p>
Now since LXC doesn't have OpenVZ's simfs that lets you create a mountpoint based on any arbitrary directory, if you leave an unmodified distro in a container and you haven't used a separate filesystem (or btrfs subvolume), that distro can remount the host's filesystem as read-only (which typically happens just at the end of a halt or reboot inside the container).<br>
<p>
One current workaround for this is to disable the CAP_SYS_ADMIN (or VXC_SECURE_MOUNT in Linux VServer[1]) capability. Since the allowed capabilities are reset fully open upon the creation of a new user namespace, how do you limit child namespaces from causing trouble on your host system and share a filesystem with LXC? <br>
<p>
OpenVZ is great in this respect because you can have one filesystem with many containers on it without needing to use image files and loop mounts or lvm.<br>
<p>
1. <a href="http://linux-vserver.org/Capabilities_and_Flags#Context_Capabilities">http://linux-vserver.org/Capabilities_and_Flags#Context_C...</a><br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/436445/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor436748"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">user namespace and uid namespace</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 3, 2011 11:02 UTC (Sun)
                               by <b>ebiederm</b> (subscriber, #35028)
                              [<a href="/Articles/436748/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The uid/user namespace that went in around 2.6.27 is the same one under discussion.  Unfortunately the implementation was massively incomplete and did not handle the case of where anything from different user namespaces were mixed.<br>
<p>
In particular the user namespace is still moving in the direction of converting all of the checks from simple uid equality to comparing the tuple of usernamespace and uid.<br>
<p>
The specific question about remounting a filesystem, the filesystem of piece of the permission checks has yet to be updated.<br>
<p>
The reason getting a full set of capabilities will be harmless is because it is actually equivalent to dropping all capabilties.  The capabilities will only apply to objects and namespaces created after you create the user namespace.  So once properly implemented you simply won't be able to do anything dangerous but you will be able to use facilities that today are root only, only because suid root applications could be spoofed.<br>
<p>
Eric<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/436748/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor436555"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">mtdswap?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 1, 2011 14:51 UTC (Fri)
                               by <b>knobunc</b> (subscriber, #4678)
                              [<a href="/Articles/436555/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <p>Does the mtdswap mean that I can have a swap device on a SD card (e.g. in an Android phone)?  And how does it differ from the normal swap stuff?</p>

<p>
The patch adds the following conf help:
<pre>
  Provides volatile block device driver on top of mtd partition
  suitable for swapping.  The mapping of written blocks is not saved.
  The driver provides wear leveling by storing erase counter into the
  OOB.
</pre>
</p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/436555/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor436694"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">mtdswap?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 2, 2011 15:35 UTC (Sat)
                               by <b>BenHutchings</b> (subscriber, #37955)
                              [<a href="/Articles/436694/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
No, you cannot treat an SD card as an MTD. The flash translation layer is implemented on the card itself and there is no (standard) way to bypass this.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/436694/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor436704"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">mtdswap?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 2, 2011 17:48 UTC (Sat)
                               by <b>knobunc</b> (subscriber, #4678)
                              [<a href="/Articles/436704/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Ah, rats.  Thanks for the info.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/436704/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor436725"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">mtdswap?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 3, 2011 1:20 UTC (Sun)
                               by <b>giraffedata</b> (guest, #1954)
                              [<a href="/Articles/436725/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <P>But why can't you use the SD card for swapping already?  The whole point of that flash translation layer in the SD card is so Linux wouldn't need special code like this.  Doesn't the SD card look to Linux like a disk drive?
<p>
I would be afraid to swap to an SD card because of the wear.  These products are sold for things like storing photographs -- applications where a heavy user would be unlikely to write to the same block even twice in a day.  Swapping would probably wear one out pretty quickly, with a pretty nasty failure mode.

      
          <div class="CommentReplyButton">
            <form action="/Articles/436725/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2011, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
