        <!DOCTYPE html>
        <html lang="en">
        <head><title>More stuff for 2.6.25 [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/267849/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/267331/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/267849/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>More stuff for 2.6.25</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>We're bad at marketing</b>
<p>
We can admit it, marketing is not our strong suit. Our strength is
writing the kind of articles that developers, administrators, and
free-software supporters depend on to know what is going on in the
Linux world. Please <a href="/Promo/nsn-bad/subscribe">subscribe today</a> to help us keep doing that, and so
we donâ€™t have to get good at marketing.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>February 6, 2008</br>
           </div>
Since <a href="http://lwn.net/Articles/266721/">last week's
installment</a>, some 3800 changesets have been merged into the mainline
git repository.  Some of the more interesting user-visible changes found in
that patch stream include:
<p>
<ul>

<li> Support for new hardware, including RDC R-321x system-on-chip
     processors, Onkyo SE-90PCI and SE-200PCI sound devices, Xilinx ML403
     AC97 controllers, TI TLV320AIC3X audio codecs, Realtek
     ALC889/ALC267/ALC269 codecs, VIA VT1708B HD audio codecs, SiS 7019
     Audio Accelerator devices, C-Media 8788 (Oxygen) audio chipsets, Asus
     AV200-based sound cards, Freescale MPC8610 audio devices, Audiotrak
     Prodigy 7.1 HiFi audio devices, Conexant 5051 audio codecs,
     MediaTek/TempoTec HiFier Fantasia sound cards, wireless RNDIS devices
     (and Broadcom 4320-based devices in particular), USB printer gadgets
     (intended for use in printer firmware), 
     and NetEffect 1/10Gb ethernet adapters.
<p>
<li> The nearly-unused ALSA sequencer instrument layer has been removed.
<p>
<li> SELinux has a new set of checks which allow the creation of policies
     which control the flow of packets into and out of the system.
<p>
<li> Netfilter has a more flexible "hashlimit" mechanism for limiting the
     number of packets to/from a given source over time.
<p>
<li> There is a new "flow" classifier for the network fair queueing code
     which allows the more flexible creation of traffic policies.
<p>
<li> The futex mechanism has a new "bitset wait" mechanism which allows for
     more targeted wakeups.  This feature will be used by glibc to
     implement optimized reader-writer locks.
<p>
<li> PCI hotplug is no longer an experimental feature.
<p>
<li> Support for PCI Express ASPM, a power management protocol, has been
     added.  
<p>
<li> The virtio "balloon" driver (which can be used to change the amount of
     memory used by a KVM guest) and PCI driver have been added.
<p>
<li> The <tt>CLONE_STOPPED</tt> bit (for the <tt>clone()</tt> system call)
     is said to be unused and is planned for removal.  For 2.6.25, a
     warning will be printed.
<p>
<li> The <tt>timerfd()</tt> system call is back, with a <a
     href="http://lwn.net/Articles/260172/">reworked, more capable
     API</a>. 
<p>
<li> The <a href="http://lwn.net/Articles/230975/">page map patches</a>,
     which enable much better accounting of memory use by processes, have
     been merged.
<p>
<li> The "PM QOS" infrastructure allows both kernel and user-space code to
     register quality-of-service requirements (in the form of CPU DMA
     latency, network latency, and network throughput).  These requirements
     will be taken into account when the kernel considers putting the
     system into a lower-power state.
<p>
<li> Per-process capability bounding sets (which permanently remove
     potential capabilities from a process) are now supported.  64-bit
     capability mask support has also been merged.
<p>
<li> The <a href="http://lwn.net/Articles/244531/">simplified mandatory
     access control kernel</a> (SMACK) security module has been merged.
<p>
<li> The smbfs filesystem has (finally) been deprecated in favor of CIFS.
     It is now scheduled for removal in 2.6.27.
<p>
<li> There is a new RPC transport module allowing (client) NFS mounts using
     RDMA.

</ul>
<p>
Changes visible to kernel developers include: 
<p>
<ul>

<li> A large number of SUNRPC symbols (<tt>rpc_</tt>* and
     <tt>rpcauth_</tt>*) have been changed to GPL-only exports.
<p>
<li> The x86 architecture merger continues, with quite a few files being
     coalesced.
<p>
<li> The "flatmem" and "discontigmem" memory models have been removed on
     the 64-bit x86 architecture; "sparsemem" is now used for all builds.
<p>
<li> The x86 spinlock implementation has been replaced with a "ticket
     spinlock" mechanism which provides fair FIFO behavior.  
<p>
<li> The <tt>fastcall</tt> function attribute didn't do anything on the x86
     architecture, so it has been removed.
<p>
<li> x86 has a new set of functions for easily manipulating page
     attributes.  They are:
<p>
<pre>
    set_memory_uc(unsigned long addr, int numpages); /* Uncached */
    set_memory_wb(unsigned long addr, int numpages); /* Cached */
    set_memory_x(unsigned long addr, int numpages);  /* Executable */
    set_memory_nx(unsigned long addr, int numpages); /* Non-executable */
    set_memory_ro(unsigned long addr, int numpages); /* Read-only */
    set_memory_rw(unsigned long addr, int numpages); /* Read-write */
</pre>
<p>
     There is also a set of <tt>set_pages_</tt>* functions which take a
     <tt>struct page</tt> pointer rather than a beginning address.
<p>
<li> Early-boot debugging of x86 systems via the FireWire port is now
     supported. 
<p>
<li> Bidirectional command support has been added to the SCSI layer.
<p>
<li> There is a new process state called <tt>TASK_KILLABLE</tt>.  It is a
     blocked state similar to <tt>TASK_UNINTERRUPTIBLE</tt>, with the
     difference that a wakeup will happen upon delivery of a fatal signal.
     The idea is to allow (almost) uninterruptible sleeps, but to still
     allow the process to be killed outright - thus ending the problem of
     unkillable processes stuck in the "D" state.  There is a new set of
     functions for using this state: <tt>wait_event_killable()</tt>,
     <tt>schedule_timeout_killable()</tt>, <tt>mutex_lock_killable()</tt>,
     etc. 
<p>
<li> <tt>add_disk_randomness()</tt> has been unexported as there are no
     more in-tree users.
<p>
<li> <tt>pci_enable_device_bars()</tt> has been replaced by two
     more-specific functions: <tt>pci_enable_device_io()</tt> and
     <tt>pci_enable_device_mem()</tt>. 
<p>
<li> The high-resolution timer API has been augmented with:
<p>
<pre>
    unsigned long hrtimer_forward_now(struct hrtimer *timer,
                                      ktime_t interval);
</pre>
<p>
     It will move the given timer's expiration forward past the current
     time as determined by the associated clock.
<p>
<li> The <tt>device</tt> structure now holds a pointer to a
     <tt>device_dma_parameters</tt> structure:
<p>
<pre>
    struct device_dma_parameters {
	unsigned int max_segment_size;
	unsigned long segment_boundary_mask;
    };
</pre>
<p>
     These parameters are used by the DMA mapping layer (and the IOMMU
     mapping code in particular) to ensure that I/O operations are set up
     within the device's constraints.  The PCI layer supports this feature
     with two new functions:
<p>
<pre>
    int pci_set_dma_max_seg_size(struct pci_dev *dev, unsigned int size);
    int pci_set_dma_seg_boundary(struct pci_dev *dev, unsigned long mask);
</pre>
<p>
     Drivers for devices with unusually strict DMA limitations should
     probably use these functions to ensure that those restrictions are
     respected. 
</ul>
<p>

One thing which has <i>not</i> made it into 2.6.25 is the KGDB debugger for
the x86 architecture.  Amusingly, a linux.conf.au kernel mini-conf
discussion of "sneaking" KGDB past Linus proceeded for some time before the
participants noticed him standing in the back of the room listening to the
whole thing.  His current <a href="/Articles/267958/">position</a> is that
he won't pull it as part of 
the x86 tree, and he's still not much interested in the idea in general.
<p>

As of this writing, the merge window is still open and could stay that way
for as much as a week.  So more interesting code could still find its way
in through this merge window; stay tuned.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Releases-2.6.25">Releases/2.6.25</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/267849/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor268115"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Typo</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 7, 2008 9:17 UTC (Thu)
                               by <b>mces</b> (subscriber, #27668)
                              [<a href="/Articles/268115/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment"><pre>
In the <a href="http://lwn.net/Articles">http://lwn.net/Articles</a> page, the heading is "More stuff for 2.66.25"

</pre></div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/268115/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor268448"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Does add_disk_randomness have a use?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 9, 2008 2:25 UTC (Sat)
                               by <b>gjmarter</b> (guest, #5777)
                              [<a href="/Articles/268448/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      I'm not sure I understand this:
<blockquote>
add_disk_randomness() has been unexported as there are no more in-tree users.
</blockquote>
If it is not exported and there are no in-tree users why is it still there?  Shouldn't it just be removed?
      
          <div class="CommentReplyButton">
            <form action="/Articles/268448/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor268773"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Does add_disk_randomness have a use?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 11, 2008 20:49 UTC (Mon)
                               by <b>i3839</b> (guest, #31386)
                              [<a href="/Articles/268773/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment"><pre>
add_disk_randomness() is used by in-tree users, but the export isn't. So all users are in the
same file or module as the function.

</pre></div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/268773/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2008, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
