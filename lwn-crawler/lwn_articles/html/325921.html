        <!DOCTYPE html>
        <html lang="en">
        <head><title>2.6.30 merge window, part I [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/325921/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/325485/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/325921/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>2.6.30 merge window, part I</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>LWN.net needs you!</b>
<p>
Without subscribers, LWN would simply not exist.  Please consider
       <a href="/Promo/nst-nag2/subscribe">signing up for a subscription</a> and helping
       to keep LWN publishing.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>April 1, 2009</br>
           </div>
As of this writing, almost 6200 non-merge changesets have been added to the
mainline for the 2.6.30 release.  So the merge window is well and truly
open.  There's a lot of stuff set up for 2.6.30 already, with more
certainly to come.  The user-visible changes merged so far include:

<p>
<ul>

<li> The <a href="http://lwn.net/Articles/244829/">relatime</a> mount 
     option is now the default; this means that file access times will only
     be updated if they are newer than the creation or modification times.
     Another change merged also causes the access time to be updated at
     least once per day.  Users needing access times to be updated for
     every access can use the new "strictatime" mount option to get that
     behavior.  See <a href="http://lwn.net/Articles/326471/">That massive
     filesystem thread</a> for more information on this change.
<p>
<li> At long last, the <a href="http://lwn.net/Articles/227937/">integrity
     management patches</a> have been merged.  Among other things, this
     code can use the trusted platform module (TPM) to ensure that the
     files on a system have not been tampered with and to do remote
     attestation. 
<p>
<li> Also at long last, <a href="http://lwn.net/Articles/277833/">TOMOYO
     Linux</a> has been merged.  TOMOYO is a pathname-based security module
     similar to (but significantly different from) AppArmor.
<p>
<li> There is a new <tt>cpuinfo_transition_latency</tt> sysfs variable for
     CPU frequency governors; it serves to inform user space of the time it
     takes for the CPU to transition from one frequency to another.
<p>
<li> There is now support for the new AES-NI cryptographic instructions
     being introduced into Intel processors; see <a
     href="http://softwarecommunity.intel.com/isn/downloads/intelavx/AES-Instructions-Set_WP.pdf">this
     white paper [PDF]</a> for details on AES-NI.
<p>

<li> The x86_64 and SuperH architectures have gained <a
     href="http://lwn.net/Articles/242107/">kexec jump</a> support.
<p>
<li> There is a new guest debugging interface for KVM, allowing the host to
     do interactive debugging of guest systems.  KVM has also gained
     support for PowerPC e500 processors.
<p>
<li> There is a new user-space API for detailed control over the
     timestamping of network packets.  See <a
     href="/Articles/325929/">Documentation/networking/timestamping.txt</a>
     for details.
<p>
<li> The Reliable Datagram Sockets (RDS) protocol is now supported by the
     networking layer.  See <a
     href="/Articles/325932/">Documentation/networking/rds.txt</a> for more
     information. 
<p>
<li> The x86 architecture now has an option to put a "canary" value at the
     end of the kernel stack; if that value ever changes, the stack has
     been (accidentally or maliciously) overrun.
<p>
<li> The reiserfs filesystem has seen a burst of work which cleans up the
     code, improves SELinux support, and improves performance.  This is
     likely to be the last set of updates for reiserfs.

<p>
<li> The usual array of new drivers has been merged.  They include:
     <p>
     <ul>

     <li> <b>Block</b>: PCI-Express SAS 6Gb/s host adapters.
     <p>
     <li> <b>Graphics</b>: AMD R6xx/R7xx GPUs (2D only for now).
     <p>
     <li> <b>Networking</b>: USB Qualcomm Serial modems,
     	  Marvell Libertas 8686 SPI 802.11b/g cards,
	  Marvell 88w8xxx TOPDOG PCI/PCIe wireless cards,
	  Prism54 SPI (stlc45xx) wireless adapters,
	  Atmel at76c503/at76c505/at76c505a USB wireless adapters,
	  OpenCores 10/100 Mbps Ethernet MAC devices, and
	  Atheros "otus" 802.11n USB devices.

     <p>

     <li> <b>Sound</b>: Mitac MIO A701 phones,
     	  		Wolfson Micro WM8400 and WM9705 codecs,
			Wolfson Microelectronics 1133-EV1 modules,
			Atmel Audio Bitstream DAC devices,
			Atmel AC97 controllers,
			Asaki-Kasei AK4104 S/PDIF transmitters,
			Echo Audio IndigoIOx and IndigoDJx cards,
			Turtle Beach Classic, Fiji and Pinnacle cards, and
			Asus Xonar Essence STX sound cards.
     <p>
     <li> <b>Video/DVB</b>: Mars-Semi MR97310A USB cameras,
     	  		    Freescale MC44S803 low power CMOS broadband tuners,
			    SQ Technologies SQ905-based USB cameras,
			    i.MX3x camera sensor interfaces,
			    ST STV0900 satellite demodulators,
			    ST STV6110 silicon tuners,
			    SQ Technologies SQ905C-based USB cameras
			    Zarlink ZL10036 silicon tuners,
			    LG Electronics LGDT3305-based tuners,
			    Hauppauge HD PVR USB devices, and
			    Intel CE6230 DVB-T USB2.0 receivers.

     <p>
     <li> <b>Processors and systems</b>: SuperH SH7786,
     	  		     ESPT-Giga SH7763-based reference boards,
			     SMSC reference platform with a SH7709S CPUs,
			     Palm LifeDrive and Tungsten|T5 systems,
			     Brivo Systems LLC ACS-5000 master boards,
			     Dave/DENX QongEVB-LITE platforms,
			     Marvell RD-78x00-mASA development boards,
			     Marvell PXA168 and PXA910 processors,
			     TI OMAP850 processors,
			     OMAP 3430 SDP boards,
			     Nokia RX-51 internet tablets,
			     Teltonika 3G Router RUT100 systems,
			     Faraday FA526 cores,
			     Cortina Systems Gemini family SoCs,
			     GE Fanuc SBC310 and PPC9A PowerPC boards,
			     Freescale Media5200 boards,
			     AMCC Redwood(460SX) systems,
			     Phytec phyCORE-MPC5200B-IO (pcm032) boards, and
			     Freescale MPC8544 ("Socrates") boards.
     <p>
     <li> <b>Miscellaneous</b>: AMCC PPC4xx crypto accelerators,
     	  Adrienne Electronics Corporation PCI time code devices,
	  Symbol 6608 barcode scanners,
	  E-Ink Broadsheet/Epson S1D13521 controllers,
	  NXP Semiconductor PCA9665 i2c controllers, and
	  Siemens Syleus and Hades sensor chips.
     </ul>

<p>
<li> The "Phidgets" USB drivers have been removed; users should shift
     to the <a
     href="http://www.phidgets.com/downloads.php?os_id=3">user-space
     drivers</a> instead.

</ul>
<p>

Changes visible to kernel developers include:
<p>
<ul>

<li> The adaptive spinning mutex patch has been merged.  This change will 
     cause mutexes to behave more like spinlocks in the contended case.  If
     (and only if) the lock is held by code running on a different CPU, the
     mutex code will 
     spin on the assumption that the lock will be released soon.  This behavior
     results in significant performance improvements.  Btrfs, which <a
     href="http://lwn.net/Articles/313682/">had its own spinning mutex
     implementation</a>, has been converted to the new mutexes.
<p>
<li> There is a new set of functions added to the crypto API which allow 
     for piecewise compression and decompression of data.
<p>
<li> The <tt>bus_id</tt> member of <tt>struct device</tt> is gone; code
     needing that information should use the <tt>dev_name()</tt> macro
     instead. 
<p>
<li> There is a new timer function:
     <p>
<pre>
    int mod_timer_pending(struct timer_list *timer, unsigned long expires);
</pre>
     <p>
     It is like <tt>mod_timer()</tt> with the exception that it will not
     reactivate an already-expired timer.
<p>
<li> There have been some changes around the <tt>fasync()</tt> function in
     <tt>struct file_operations</tt>.  This function is now responsible for
     maintaining the <tt>FASYNC</tt> bit in <tt>struct file</tt>; it is
     also now called without the big kernel lock held.  Finally, a positive
     return value from <tt>fasync()</tt> is mapped to zero, meaning that
     the return value from <tt>fasync_helper()</tt> can be returned
     directly by <tt>fasync()</tt>.  (This is your editor's modest
     contribution to 2.6.30).
<p>
<li> The SCSI layer has a new support library for object storage device
     support; see <a
     href="/Articles/326360/">Documentation/scsi/osd.txt</a> for details. 
<p>
<li> The x86 "subarchitecture" mechanism has been removed, now that no
     architectures actually use it.  The Voyager architecture has been
     removed as a result of these changes.
<p>
<li> x86 is also the first architecture to use a new per-CPU memory
     allocator merged for 2.6.30.  This allocator changes little at the API
     level, but it will provide for more efficient and flexible per-CPU
     variable management. 
<p>
<li> Support for compressing the kernel with the bzip2 or lzma algorithms
     has been added.  Support for the old zImage format has been
     removed. 
<p>
<li> The <a href="http://lwn.net/Articles/314808/">asynchronous function
     call infrastructure</a> is now enabled by default.
<p>
<li> The <a href="http://lwn.net/Articles/308426/">DMA operations debugging
     facility</a> has been merged.
<p>
<li> The <tt>owner</tt> field of <tt>struct proc_dir_entry</tt> has been
     removed, causing lots of changes throughout the tree.

</ul>
<p>
If the usual two-week pattern holds, the merge window can be expected to
remain open through about April&nbsp;9.  The rate at which changes flow
into the mainline will likely be lower for the second half of the merge
window - the alternative is for this development cycle to be far larger
than any of its predecessors.  But it is certain that more interesting
changes will be merged for 2.6.30.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Releases-2.6.30">Releases/2.6.30</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/325921/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor326869"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">2.6.30 merge window, part I</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 2, 2009 9:08 UTC (Thu)
                               by <b>Tuxie</b> (guest, #47191)
                              [<a href="/Articles/326869/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I really hope they will merge ALSA 1.0.19+ this time. It has loads of audio-over-HDMI fixes.  Also, CUSE has been on top of my wishlist for a year now. :)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/326869/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor326891"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">sound changes</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 2, 2009 12:54 UTC (Thu)
                               by <b>cladisch</b> (<b>&#x272D; supporter &#x272D;</b>, #50193)
                              [<a href="/Articles/326891/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
What was merged was most changes from the current ALSA development tree:<br>
<a href="http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=history;f=sound;hb=HEAD">http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-...</a><br>
<p>
As far as I can see, nothing has happened regarding CUSE since the LWN article.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/326891/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor326936"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">2.6.30 merge window, part I</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 2, 2009 15:48 UTC (Thu)
                               by <b>Trou.fr</b> (subscriber, #26289)
                              [<a href="/Articles/326936/">Link</a>] (7 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The merge of TOMOYO Linux sounds like very good news to me, I hope our editor will cover it in depth very soon.<br>
<p>
Also, not completely unrelated, the SMACK LSM seems to have essentially died since its inclusion in the mainline : no userland tools in Debian, last update in June, no HOWTOs ? Does anyone have more infos ?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/326936/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor326980"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">2.6.30 merge window, part I</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 2, 2009 18:05 UTC (Thu)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/326980/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I've had a look at it, and, well, the core idea (process execution <br>
history) is lovely, though the cost is high (a near-100% slowdown of <br>
open() for instance), but the configuration file syntax and user <br>
interface, ewwww. It renders it almost unusable in my eyes. You have <br>
*numbered* 'profiles' corresponding to (non-POSIX) capability sets, so you <br>
have to remember what each number corresponds to; backslashing of *all* <br>
metacharacters, including *, combined with the absence of an 'all below' <br>
option, leading to insanity like<br>
<p>
/home/\*/\*<br>
/home/\*/\*/\*<br>
/home/\*/\*/\*/\*<br>
/home/\*/\*/\*/\*/\*<br>
/home/\*/\*/\*/\*/\*/\*<br>
/home/\*/\*/\*/\*/\*/\*/\*<br>
<p>
and hope your users don't create directories more than five deep under <br>
their $HOME, and that you didn't make a typo in that appalling forest. <br>
(What's worst about this last bit is that it can't be fixed by some <br>
userspace component munging a configuration file in a better format and <br>
echoing it to TOMOYO's /proc files. Oh, and did I mention the awful name <br>
given to the directory those files are in? If I saw it on a random system <br>
I'd have no idea it was related to TOMOYO at all.)<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/326980/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor327625"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">2.6.30 merge window, part I</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 7, 2009 9:13 UTC (Tue)
                               by <b>haradats</b> (guest, #44782)
                              [<a href="/Articles/327625/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; I've had a look at it, and, well, the core idea (process execution </font><br>
<font class="QuotedText">&gt; history) is lovely, though the cost is high (a near-100% slowdown of </font><br>
<font class="QuotedText">&gt; open() for instance),</font><br>
<p>
Did you see the following?<br>
<a href="http://tomoyo.sourceforge.jp/wiki-e/?WhatIs#benchmark">http://tomoyo.sourceforge.jp/wiki-e/?WhatIs#benchmark</a><br>
Yes, the cost for "open" is the worst, but others are not so bad<br>
(read/write are not affected at all).<br>
<p>
<font class="QuotedText">&gt; but the configuration file syntax and user </font><br>
<font class="QuotedText">&gt; interface, ewwww. It renders it almost unusable in my eyes. You have </font><br>
<font class="QuotedText">&gt; *numbered* 'profiles' corresponding to (non-POSIX) capability sets, so you </font><br>
<font class="QuotedText">&gt; have to remember what each number corresponds to; backslashing of *all* </font><br>
<font class="QuotedText">&gt; metacharacters, including *, combined with the absence of an 'all below' </font><br>
<font class="QuotedText">&gt; option, leading to insanity like</font><br>
<p>
I'm sorry for your eyes. ;-)<br>
<p>
Profiles can be defined up to 256, but most cases you can live with<br>
the following predefined ones.<br>
<p>
profile 0: "disabled"<br>
profile 1: "learning"<br>
profile 2: "permissive"<br>
profile 3: "enforcing"<br>
<p>
Profile numbers have nothing with capabilities (and the just<br>
merged version of TOMOYO Linux cannot control capabilities).<br>
For more information, please take a look at the following documents.<br>
<p>
<a href="http://tomoyo.sourceforge.jp/en/2.2.x/">http://tomoyo.sourceforge.jp/en/2.2.x/</a><br>
<p>
<font class="QuotedText">&gt; and hope your users don't create directories more than five deep under </font><br>
<font class="QuotedText">&gt; their $HOME, and that you didn't make a typo in that appalling forest. </font><br>
<p>
Don't worry. You can define deeper directory patterns as you like.<br>
<p>
Questions and suggestions are always welcome.  Please visit our forum, too.<br>
<a href="http://sourceforge.jp/forum/forum.php?forum_id=11352&amp;_sl=1">http://sourceforge.jp/forum/forum.php?forum_id=11352&amp;...</a><br>
<p>
Thanks<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/327625/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor327715"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">2.6.30 merge window, part I</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 7, 2009 19:44 UTC (Tue)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/327715/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Yes, the cost for "open" is the worst, but others are not so bad</font><br>
<font class="QuotedText">&gt; (read/write are not affected at all).</font><br>
<p>
Indeed, that's nice... but IIRC the cost for, say, SELinux for open() is <br>
much lower. And open() is a *common* syscall, optimized to hell and back. <br>
IMNSHO this restricts TOMOYO to high-security or low-performance <br>
environments :(((<br>
<p>
But I'm confident that with more optimization work TOMOYO will overcome <br>
this.<br>
<p>
The backslashing of shell metacharacters and numbered rather than <br>
named 'profiles' remains horrid (but can be overcome with a preprocessing <br>
layer).<br>
<p>
The consistent 'ccs' in the names of commands and /proc entries still has <br>
no connection whatsoever that I can see to 'TOMOYO': why not rename or at <br>
least provide links to more memorably-named commands?<br>
<p>
I was under the impression that putting things like the TOMOYO ccs/ <br>
directories in /proc (or anything new at all not tightly related to <br>
specific processes) was pretty seriously deprecated. <br>
<p>
<font class="QuotedText">&gt;&gt; and hope your users don't create directories more than five deep under </font><br>
<font class="QuotedText">&gt;&gt; their $HOME, and that you didn't make a typo in that appalling forest. </font><br>
<font class="QuotedText">&gt; </font><br>
<font class="QuotedText">&gt; Don't worry. You can define deeper directory patterns as you like.</font><br>
<p>
But you can't say 'any depth', and without that you're just asking for <br>
confusing failures. You can't sensibly assume any fixed depth for your <br>
users' directory trees (one user of mine has directories *135* levels deep <br>
for reasons known only to him and his god: do you want to make a policy <br>
that caters for *that* with explicit .../\*/\*/...? No, neither do I.) And <br>
Linux has *no* limit whatsoever on directory nesting depth, not PATH_MAX, <br>
nothing.<br>
<p>
So you need a 'recursive' thing (like AppArmor has).<br>
<p>
AppArmor is much less flexible than TOMOYO, and lacks the lovely <br>
process-execution-history idea, but boyoboy are its config files more <br>
readable. It pretty much did everything right from a user-interface design <br>
perspective. You could profitably copy syntax from it...<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/327715/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor328122"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">2.6.30 merge window, part I</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 10, 2009 13:38 UTC (Fri)
                               by <b>haradats</b> (guest, #44782)
                              [<a href="/Articles/328122/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;&gt; Yes, the cost for "open" is the worst, but others are not so bad</font><br>
<font class="QuotedText">&gt;&gt; (read/write are not affected at all).</font><br>
<font class="QuotedText">&gt; </font><br>
<font class="QuotedText">&gt; Indeed, that's nice... but IIRC the cost for, say, SELinux for open() is </font><br>
<font class="QuotedText">&gt; much lower. And open() is a *common* syscall, optimized to hell and back. </font><br>
<font class="QuotedText">&gt; IMNSHO this restricts TOMOYO to high-security or low-performance </font><br>
<font class="QuotedText">&gt; environments :(((</font><br>
&gt;<br>
<font class="QuotedText">&gt; But I'm confident that with more optimization work TOMOYO will overcome this.</font><br>
<p>
For true high-security environments, I don't expect pathname-based MAC<br>
can be the first candidate (and SELinux is there).  Hopefully, TOMOYO and<br>
other pathname-based MAC will be able to work with label-based MAC in the future.<br>
In any case, it is clear we need to improve the performance as much as possible.<br>
<p>
<font class="QuotedText">&gt; The backslashing of shell metacharacters and numbered rather than </font><br>
<font class="QuotedText">&gt; named 'profiles' remains horrid (but can be overcome with a preprocessing </font><br>
<font class="QuotedText">&gt; layer).</font><br>
<p>
I understand your points, but there's a compatibility issue, too.<br>
Anyway thank you for your suggestions.<br>
<p>
<font class="QuotedText">&gt; The consistent 'ccs' in the names of commands and /proc entries still has </font><br>
<font class="QuotedText">&gt; no connection whatsoever that I can see to 'TOMOYO': why not rename or at </font><br>
<font class="QuotedText">&gt; least provide links to more memorably-named commands?</font><br>
<font class="QuotedText">&gt; I was under the impression that putting things like the TOMOYO ccs/ </font><br>
<font class="QuotedText">&gt; directories in /proc (or anything new at all not tightly related to </font><br>
<font class="QuotedText">&gt; specific processes) was pretty seriously deprecated. </font><br>
<p>
I can't agree with you more. :-)<br>
Those directory were named by the architect of TOMOYO Linux.<br>
The project has had several meetings and the conclusion was respect his choice.<br>
(I think he has the right to name it and if we force him to change, his<br>
motivation has been changed also ;-)<br>
<p>
<font class="QuotedText">&gt;&gt;&gt; and hope your users don't create directories more than five deep under </font><br>
<font class="QuotedText">&gt;&gt;&gt; their $HOME, and that you didn't make a typo in that appalling forest. </font><br>
<font class="QuotedText">&gt;&gt; </font><br>
<font class="QuotedText">&gt; &gt; Don't worry. You can define deeper directory patterns as you like.</font><br>
&gt;<br>
<font class="QuotedText">&gt; But you can't say 'any depth', and without that you're just asking for </font><br>
<font class="QuotedText">&gt; confusing failures. You can't sensibly assume any fixed depth for your </font><br>
<font class="QuotedText">&gt; users' directory trees (one user of mine has directories *135* levels deep </font><br>
<font class="QuotedText">&gt; for reasons known only to him and his god: do you want to make a policy </font><br>
<font class="QuotedText">&gt; that caters for *that* with explicit .../\*/\*/...? No, neither do I.) And </font><br>
<font class="QuotedText">&gt; Linux has *no* limit whatsoever on directory nesting depth, not PATH_MAX, </font><br>
<font class="QuotedText">&gt; nothing.</font><br>
<p>
Well, IMHO, the fact that Linux has no limit does not mean you should do it. ;-)<br>
<p>
In TOMOYO Linux, MAC can be controlled per domain basis.<br>
(SELinux also has permissive domains)<br>
So, if you want to give permission for certain domain to access 135 or<br>
more deep, you just can put the mode in permissive or disable ( you don't have to<br>
type /\*/\*/... Gee, it's really hard to type ;-)<br>
If you do care the domain, I think it's worth to define /\*/*\... for 135 lines or more.<br>
(This is just my opinion though)<br>
<p>
<font class="QuotedText">&gt; So you need a 'recursive' thing (like AppArmor has).</font><br>
<font class="QuotedText">&gt; AppArmor is much less flexible than TOMOYO, and lacks the lovely </font><br>
<font class="QuotedText">&gt; process-execution-history idea, but boyoboy are its config files more </font><br>
<font class="QuotedText">&gt; readable. It pretty much did everything right from a user-interface design </font><br>
<font class="QuotedText">&gt; perspective. You could profitably copy syntax from it...</font><br>
<p>
Actually, you were not the first person that suggested recursive thing.<br>
One of the reason we didn't take that was the simplicity in the kernel.<br>
I think I am going to talk project members again.<br>
<p>
Thank you. /\*/\*/\*/<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328122/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor328917"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">2.6.30 merge window, part I</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 17, 2009 20:21 UTC (Fri)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/328917/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
As far as I can see, you don't need recursion to do the 'any directory <br>
below' thing at all.<br>
<p>
(And, er, you can fix the syntax by allowing two syntaxes, although that <br>
probably isn't a job for the kernel.)<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328917/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor364248"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">2.6.30 merge window, part I</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 30, 2009 8:56 UTC (Mon)
                               by <b>haradats</b> (guest, #44782)
                              [<a href="/Articles/364248/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
nix,<br>
<p>
<font class="QuotedText">&gt; /home/\*/\*</font><br>
<font class="QuotedText">&gt; /home/\*/\*/\*</font><br>
<font class="QuotedText">&gt; /home/\*/\*/\*/\*</font><br>
<font class="QuotedText">&gt; /home/\*/\*/\*/\*/\*</font><br>
<font class="QuotedText">&gt; /home/\*/\*/\*/\*/\*/\*</font><br>
<font class="QuotedText">&gt; /home/\*/\*/\*/\*/\*/\*/\*</font><br>
snip<br>
<font class="QuotedText">&gt; hope your users don't create directories more than five</font><br>
<font class="QuotedText">&gt; deep under their $HOME</font><br>
<p>
After eight months of survey, it was turned out that some<br>
of the users of TOMOYO has more than five deep under their $HOME.<br>
So we decided to introduce recursive directory matching operators.<br>
It should be available in 2.6.33.<br>
<p>
<a href="http://lkml.org/lkml/2009/11/25/52">http://lkml.org/lkml/2009/11/25/52</a><br>
<p>
Thank you!<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/364248/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor364677"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">2.6.30 merge window, part I</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 2, 2009 8:15 UTC (Wed)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/364677/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I noticed that fly past. Yay!<br>
<p>
(but still, it was predictable ;P hell, I have directories eleven deep <br>
down there now. part of that's because I need to reorganize...)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/364677/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor327115"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">2.6.30 merge window, part I</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 3, 2009 15:06 UTC (Fri)
                               by <b>bronson</b> (subscriber, #4806)
                              [<a href="/Articles/327115/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; file access times will only be updated if they are newer than the creation or modification times.</font><br>
<p>
relatime ensures the atime is updated only if it is *older* than the creation or modification time.  If it's already newer, it's a good bet that mutt &amp; archaic friends will do the right thing.<br>
<p>
I'm bummed to even see relatime.  Why don't the kernel guys deprecate atime for a year or two, then purge it entirely and with prejudice?  It seems easier to fix the few misguided apps that still use it than to pussyfoot around it for the next 20 years.<br>
<p>
But I've never seen a situation where atime was necessary...  Are there apps other than mutt that I just don't know about?<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/327115/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor327140"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">2.6.30 merge window, part I</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 3, 2009 16:03 UTC (Fri)
                               by <b>zuki</b> (subscriber, #41808)
                              [<a href="/Articles/327140/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
tmpwatch in some configurations?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/327140/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor327371"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">2.6.30 merge window, part I</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 5, 2009 6:15 UTC (Sun)
                               by <b>lordsutch</b> (guest, #53)
                              [<a href="/Articles/327371/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Debian's popularity-contest package springs to mind too.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/327371/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor327387"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">2.6.30 merge window, part I</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 5, 2009 11:45 UTC (Sun)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/327387/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I've used it to hunt down what files a particular application acutally needed so that I could delete everything else.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/327387/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor327340"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen and the 2.6.30 merge</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 4, 2009 19:34 UTC (Sat)
                               by <b>TomMD</b> (guest, #56998)
                              [<a href="/Articles/327340/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It's really disappointing to see that Xen won't be in 2.6.30, but Linux-Next instead (at best).  I've always liked Xen, but am unable to use 2.6.18 for my primary systems.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/327340/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor327434"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen and the 2.6.30 merge</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 5, 2009 20:09 UTC (Sun)
                               by <b>jengelh</b> (subscriber, #33263)
                              [<a href="/Articles/327434/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
You could grab the Novell patches that added it to various releases.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/327434/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor327476"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen and the 2.6.30 merge</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 6, 2009 11:08 UTC (Mon)
                               by <b>csamuel</b> (<b>&#x272D; supporter &#x272D;</b>, #2624)
                              [<a href="/Articles/327476/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Debian Lenny ships 2.6.26 kernels with Xen support for Dom0 (using the SuSE<br>
patches).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/327476/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor327934"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">&quot;added&quot;?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 8, 2009 22:46 UTC (Wed)
                               by <b>roelofs</b> (guest, #2599)
                              [<a href="/Articles/327934/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <FONT COLOR="#004488"><I>Support for compressing the kernel with the bzip2 or lzma algorithms has been added.</I></FONT>

<P>
"Added"?  Then what's this "make bzImage" thing I've been building for a decade?  (Neither Documentation/ nor arch/*/boot/Makefile is terribly clear on the details...)

<P>
Greg
      
          <div class="CommentReplyButton">
            <form action="/Articles/327934/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor327979"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">&quot;added&quot;?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 9, 2009 9:54 UTC (Thu)
                               by <b>eupator</b> (guest, #44581)
                              [<a href="/Articles/327979/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Contrary to common assumption, bzImage has nothing to do with bzip2. It stands for 'big zImage'.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/327979/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor328234"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">&quot;added&quot;?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 11, 2009 19:31 UTC (Sat)
                               by <b>roelofs</b> (guest, #2599)
                              [<a href="/Articles/328234/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Aha!  Thanks, I figured it had to be something like that.  I guess the fact that bzip2 and bzImage showed up around the same time contributed to the confusion...

<P>
Greg
      
          <div class="CommentReplyButton">
            <form action="/Articles/328234/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor328252"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">&quot;added&quot;?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Apr 12, 2009 8:49 UTC (Sun)
                               by <b>Duncan</b> (guest, #6647)
                              [<a href="/Articles/328252/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Wow.  Thanks.  I had no idea either, and was rather confused myself.  The <br>
new bzip2 option makes rather more sense now, thanks to you.  =:^)<br>
<p>
Duncan<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/328252/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2009, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
