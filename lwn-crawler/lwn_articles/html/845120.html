        <!DOCTYPE html>
        <html lang="en">
        <head><title>The imminent stable-version apocalypse [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/845120/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/845092/">Return to the Front page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/845120/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>The imminent stable-version apocalypse</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Please consider subscribing to LWN</b>
<p>
Subscriptions are the lifeblood of LWN.net.  If you appreciate this
content and would like to see more of it, your subscription will
help to ensure that LWN continues to thrive.  Please visit
<a href="/Promo/nst-nag1/subscribe">this page</a> to join up and keep LWN on
the net.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>February 5, 2021</br>
           </div>
As has often been pointed out, the stable-kernel releases are meant to be
stable; that means they should be even more averse to ABI breaks than
mainline releases, if that is possible.  This may be a hard promise to keep
for the next set of stable kernels, though, for the most mundane of
reasons: nobody thought that there would be more than 255 minor updates to
any given kernel release.
<p>
For most of the existence of the kernel project, few developers within the
project 
itself have maintained any given kernel release for more than a couple years or
so, and maintenance releases were relatively rare.  There were some
exceptions; the 2.4 release happened at the beginning of 2001, and Willy
Tarreau finally <a href="/Articles/491245/">stopped maintaining it</a> more
than eleven years later.  Even then, the final version was 2.4.37, though
one could perhaps call it 2.4.48 after the final set of eleven small "fixup"
releases.  Releases for kernels maintained for the long term were
relatively few and far apart.
<p>
In recent years, though, that situation has changed, with some older
kernels receiving much more long-term-maintenance attention.  Thus,
February 3 saw the release of the <a
href="/ml/linux-kernel/1612393450245231@kroah.com/">4.9.255</a> and <a
href="/ml/linux-kernel/1612393445215192@kroah.com/">4.4.255</a> updates.
Those kernels have received 18,765 and 16,986 patches, respectively, and
there is no sign of things slowing down.  The current posted plan is to
maintain 4.9 through January 2023 and 4.4 through February 2022.
<p>
These kernel-release numbers are now a problem, as was <a
href="/ml/linux-kernel/7pR0YCctzN9phpuEChlL7_SS6auHOM80bZBcGBTZPuMkc6XjKw7HUXf9vZUPi-IaV2gTtsRVXgywQbja8xpzjGRDGWJsVYSGQN5sNuX1yaQ=@protonmail.com/">pointed
out</a> by Jari Ruusu.  There are a couple of macros defined within the kernel
relating to version codes; these can be found in
<tt>include/generated/uapi/linux/version.h</tt> in a built kernel:
<p>
<pre>
    #define LINUX_VERSION_CODE 330496
    #define KERNEL_VERSION(a,b,c) (((a) &lt;&lt; 16) + ((b) &lt;&lt; 8) + (c))
</pre>
<p>
The first macro, <tt>LINUX_VERSION_CODE</tt>, is calculated in the
top-level makefile; it is the result of:
<p>
<pre>
    (5 &lt;&lt; 16) + (11 &lt;&lt; 8) + 0
</pre>
<p>
That number (which is <tt>0x50b00</tt>) identifies this as a 5.11-rc
kernel; it is the same result one gets from 
<tt>KERNEL_VERSION(5,11,0)</tt>.
<p>
One does not have to look long to see that neither of these macros is going
to generate the expected result once the minor version ("<tt>c</tt>" in the
<tt>KERNEL_VERSION()</tt> macro) exceeds 255.  Running that macro on a
4.9.255 kernel yields <tt>0x409ff</tt>, but on 4.9.256 it will instead
return <tt>0x40a00</tt> — which looks like 4.10.0.  That might just cause
some confusion in the user community.
<p>
This problem does not come as a complete surprise to the stable-kernel
maintainers; Sasha Levin posted <a
href="/ml/linux-kernel/20210118014951.250815-1-sashal%40kernel.org/">this
patch</a> in mid-January in an attempt to fix it.  It changes both
<tt>LINUX_VERSION_CODE</tt> and <tt>KERNEL_VERSION()</tt>
to use 16&nbsp;bits for the minor version, thus eliminating the overflow.
This patch got into linux-next, but seems unlikely to stay there; as Jiri
Slaby <a
href="/ml/linux-kernel/78ada91b-21ee-563f-9f75-3cbaeffafad4@kernel.org/">noted</a>,
these macros are used by user space and constitute a part of the kernel's
ABI.  He added that both the GNU C Library and the GCC compiler (the BPF
code in particular) use the kernel version code in its current form and would
not handle a change well.  There are also many other places in the kernel
that exchange these version codes with user space; see <a
href="https://www.kernel.org/doc/html/latest/userspace-api/media/v4l/vidioc-querycap.html#description">this
media <tt>ioctl()</tt> command</a>, for example.  Changing the kernel's
idea of how <tt>KERNEL_VERSION()</tt> works will break programs compiled
with the older macro, which is not something that is allowed.
<p>
So what is to be done?  As of this writing that has not yet been worked
out, but there are a couple of options on the table:
<p>
<ul class="spacylist">
<li> Ruusu's note pointing out the problem suggested that stable releases
     could start incrementing the <tt>EXTRAVERSION</tt> field instead; this
     is the field that normally contains strings like <tt>-rc7</tt> (for
     mainline test releases), or a Git commit ID.  The minor version would
     presumably remain at 255.  This would avoid breaking ABI, but would
     also make it harder for user-space code to distinguish between stable
     releases after 255.  It might also create minor trouble for
     distributors who are using that field to identify their own builds.
<li> Stable maintainer Greg Kroah-Hartman <a
     href="/ml/linux-kernel/YBu1d0+nfbWGfMtj@kroah.com/">suggested</a> that
     he could "<q>leave it alone and just see what happens</q>".
     But, as Slaby <a
     href="/ml/linux-kernel/a85b7749-38b2-8ce9-c15a-8acb9a54c5b5@kernel.org/">pointed
     out</a>, that will create the wrapping problem described above, which
     could confuse user space.  If this is done, he said, it would be
     necessary to mask the minor version to eight bits, causing it to wrap
     back around to zero; whether <i>that</i> would cause confusion is
     another question.  Version numbers are normally expected to increase
     monotonically. 
</ul>
<p>
The most likely outcome can be seen in the kernel's history, though.  Once
upon a time, mainline kernel releases had three significant numbers rather
than two — 2.6.30, for example.  In those days, the minor version field
wasn't available for stable updates, so the <tt>EXTRAVERSION</tt> field was
used instead.  Looking at the 2.6.30.3 makefile, one sees:
<p>
<pre>
    VERSION = 2
    PATCHLEVEL = 6
    SUBLEVEL = 30
    EXTRAVERSION = .3
    NAME = Man-Eating Seals of Antiquity
</pre>
<p>
That solution worked for years, so there should be no real reason why it
wouldn't work now as well.  Most likely <tt>SUBLEVEL</tt> would remain
stuck at 255, with <tt>EXTRAVERSION</tt> indicating the real release
number. 
<p>
It is evidently Leon Trotsky who once said that "old age is the most
unexpected of all things that can happen to a man".  Perhaps similar forces
are at play here; running out of bits is the most unexpected of things that
can happen to a kernel developer.  This version-number overflow could have
been foreseen some time ago, and the date of its occurrence forecast with
reasonable certainty.  But now some sort of solution has to be found before
the next stable-kernel release can be made.  Happily, the problem should be
easier to resolve than that of old age.
<p>
<b>Update</b>: Kroah-Hartman appears to have chosen the "do nothing" option
with the release of <a href="/Articles/845195/">4.9.256</a> and <a
href="/Articles/845196/">4.4.256</a>, both of which increment the version
number but make no other change.  "<q>I'll try to hold off on doing a
'real' 4.9.y release for a week to give 
everyone a chance to test this out and get back to me.  The pending patches in
the 4.9.y queue are pretty serious, so I am loath to wait longer than that,
consider yourself warned...</q>"
<p>
<b>Update 2</b>: In the end, it <a
href="/ml/linux-kernel/20210208145805.898658055@linuxfoundation.org/">appears</a>
that the clamping solution will be taken, with the minor number fixed at
255 going forward.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Development_model-User-space_ABI">Development model/User-space ABI</a></td></tr>
            <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Releases-Stable_updates">Releases/Stable updates</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/845120/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor845197"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The imminent stable-version apocalypse</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 5, 2021 15:29 UTC (Fri)
                               by <b>leromarinvit</b> (subscriber, #56850)
                              [<a href="/Articles/845197/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
A Trotsky quote in an article about kernel version numbers - that must be the second most unexpected of all things that can happen to a man. Well done, sir, well done!<br>
<p>
As always, thanks for the excellent reporting, Jon!<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/845197/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor845520"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The imminent stable-version apocalypse</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 9, 2021 20:35 UTC (Tue)
                               by <b>MarkFrankSharefkin</b> (guest, #135746)
                              [<a href="/Articles/845520/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Red diaper baby here: not Trotsky, either Chernyshevsky or Lenin, IIRC (I&#x27;m trying to forget)...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/845520/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor845542"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The imminent stable-version apocalypse</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 10, 2021 10:29 UTC (Wed)
                               by <b>mbg</b> (subscriber, #4940)
                              [<a href="/Articles/845542/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Not to mention the subtle interposition of a Lenin quote earlier in the article...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/845542/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor845202"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The imminent stable-version apocalypse</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 5, 2021 16:14 UTC (Fri)
                               by <b>edeloget</b> (subscriber, #88392)
                              [<a href="/Articles/845202/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The use of EXTRAVERSION might be a possibility but I&#x27;m not sure it&#x27;s not already used for other reasons (such as dashed version from various distributions, although I haven&#x27;t checked this).<br>
<p>
The main problem will be users of the  KERNEL_VERSION() macro ; tests such as <br>
<p>
    #if (LINUX_VERSION_CODE &gt;= KERNEL_VERSION(4,5,0)) <br>
    ..<br>
    #endif<br>
<p>
will break on 4.4.256, but such break will likely be seen (because this kind of code is used to test if feature from kernel 4.5 can be used).  <br>
<p>
The other version of the test<br>
<p>
     #if (LINUX_VERSION_CODE &lt; KERNEL_VERSION(4,5,0))<br>
     ...<br>
     #endif<br>
<p>
will be silently compiled out even though it should not, and it&#x27;s very likely that something will break.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/845202/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor845212"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The imminent stable-version apocalypse</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 5, 2021 16:44 UTC (Fri)
                               by <b>willy</b> (subscriber, #9762)
                              [<a href="/Articles/845212/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I suggest saturating at KERNEL_VERSION at xxxxFF.<br>
<p>
Code which needs to care about versions after 255 can check LINUX_VERSION_SUBLEVEL directly.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/845212/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor845221"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The imminent stable-version apocalypse</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 5, 2021 17:52 UTC (Fri)
                               by <b>mchehab</b> (subscriber, #41156)
                              [<a href="/Articles/845221/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; I suggest saturating at KERNEL_VERSION at xxxxFF.</font><br>
<p>
That seems to be the best thing to be done. <br>
<p>
Without that, media applications will break, as they several of them rely at the Kernel version in order to enable some features:<br>
<p>
drivers/media/cec/core/cec-api.c:       caps.version = LINUX_VERSION_CODE;<br>
drivers/media/mc/mc-device.c:   info-&gt;media_version = LINUX_VERSION_CODE;<br>
drivers/media/v4l2-core/v4l2-ioctl.c:   cap-&gt;version = LINUX_VERSION_CODE;<br>
drivers/media/v4l2-core/v4l2-subdev.c:          cap-&gt;version = LINUX_VERSION_CODE;<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/845221/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor845256"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The imminent stable-version apocalypse</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 5, 2021 20:24 UTC (Fri)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/845256/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
So does glibc, but thankfully it never compares the LINUX_VERSION_CODE against 4.10.x or 4.5.x. Phew, dodged a bullet.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/845256/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor845246"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The imminent stable-version apocalypse</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 5, 2021 19:43 UTC (Fri)
                               by <b>tglx</b> (subscriber, #31301)
                              [<a href="/Articles/845246/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; I suggest saturating at KERNEL_VERSION at xxxxFF.</font><br>
<p>
Yes. And the commit message of x.x.x.255 wants to be:<br>
<p>
  This kernel has been finally stapled to death. Move on.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/845246/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor845222"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The imminent stable-version apocalypse</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 5, 2021 18:05 UTC (Fri)
                               by <b>jemarch</b> (subscriber, #116773)
                              [<a href="/Articles/845222/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Just wanted to point out that GCC is not actually impacted by this.<br>
<p>
The BPF backend in GCC 10 accepts a -mkernel option where the user can specify a string identifying a kernel version, from 4.0 to 4.20 and from 5.0 to 5.2.  This information is then used internally.<br>
<p>
However, after getting feedback from the kernel community we decided that -mkernel wasn&#x27;t useful in practice, and consequently GCC 11 ignores it.<br>
<p>
An eventual change in the encoding of LINUX_VERSION_CODE wouldn&#x27;t impact GCC at all.<br>
<p>
Salud!<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/845222/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor845230"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The imminent stable-version apocalypse</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 5, 2021 18:47 UTC (Fri)
                               by <b>flussence</b> (guest, #85566)
                              [<a href="/Articles/845230/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It&#x27;s been 20 years and we&#x27;re still haunted by the vengeful ghost of web browser UA sniffing.<br>
<p>
I think userspace code might have a few valid reasons to check patchlevel, but anything that cares about specific sublevels in what&#x27;s supposed to be a stable kernel series is probably doing something horribly wrong - and breaking the former for the latter is the wrong tradeoff. Any program that needs to know about numbers above 255 is getting frequent enough updates that it can be taught to read them from something else.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/845230/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor845263"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The imminent stable-version apocalypse</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 5, 2021 22:05 UTC (Fri)
                               by <b>Nahor</b> (subscriber, #51583)
                              [<a href="/Articles/845263/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; [...] anything that cares about specific sublevels in what&#x27;s supposed to be a stable kernel series is probably doing something horribly wrong</font><br>
<p>
If there is a new kernel, it means something changed. Why would userspace not be interested? That change might mean that a workaround for some issue is no longer necessary, or it might mean an updated driver that doesn&#x27;t need to be pulled from out-of-tree anymore, ...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/845263/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor845293"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The imminent stable-version apocalypse</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 6, 2021 13:25 UTC (Sat)
                               by <b>mathstuf</b> (subscriber, #69389)
                              [<a href="/Articles/845293/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
What driver is going to go from out-of-tree into a stable tree? Even with 6 years of support, that seems unlikely to me to be suitable for a backport…<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/845293/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor846033"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The imminent stable-version apocalypse</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 12, 2021 19:01 UTC (Fri)
                               by <b>flussence</b> (guest, #85566)
                              [<a href="/Articles/846033/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
If a userspace program cares about the distinction between 4.9.255 and 4.9.&gt;255, then either it&#x27;s still being worked on in 1Q2021 and can adapt to reading the extra version in an appropriate way, or it made speculation based on a future it couldn&#x27;t possibly predict accurately and is asking for trouble.<br>
<p>
On the other hand, it&#x27;s entirely reasonable for code that hasn&#x27;t been touched in *years* to have different paths for kernel 4.9.x and 4.10.0, and that&#x27;s the sort of program that&#x27;ll break when the number wraps around and may be hard or impossible to fix when it does.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846033/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor845240"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The imminent stable-version apocalypse</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 5, 2021 19:30 UTC (Fri)
                               by <b>amarao</b> (subscriber, #87073)
                              [<a href="/Articles/845240/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Integers is the most precious thing in the world. Just look at the current prices of meager /8 ipv4 network to appreciate. The same goes for short numbered ICQ number (if someone remember _that_ antiquity), same with phone numbers, etc. Humanity is always in severe deficiency of integers.<br>
<p>
p.s. how much would you pay to have 4 billion VLANs instead of 4k?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/845240/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor845245"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The imminent stable-version apocalypse</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 5, 2021 19:43 UTC (Fri)
                               by <b>edeloget</b> (subscriber, #88392)
                              [<a href="/Articles/845245/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; p.s. how much would you pay to have 4 billion VLANs instead of 4k?</font><br>
<p>
Not much :) as I can use S-VLAN and C-VLAN, and that would open a fantastic world of &quot;add as many VLAN as you want&quot; at the price of adding yet another 4 bytes L2 header (S-VLAN headers can be chained, we you can have<br>
<p>
DSTMAC[6] SRCMAC[6] SVLAN[4] SVLAN[4] CVLAN[4] ETHTYPE[2] ...<br>
<p>
Which gives you 68 billion VLANs (and you can add even more SVLAN levels).<br>
<p>
Granted, you may have to use recent network appliances, but Linux at least has supported 802.1ad for years. <br>
<p>
And yet...<br>
<p>
<font class="QuotedText">&gt; Humanity is always in severe deficiency of integers.</font><br>
<p>
I can&#x27;t agree more :)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/845245/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor845306"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The imminent stable-version apocalypse</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 6, 2021 18:32 UTC (Sat)
                               by <b>champtar</b> (subscriber, #128673)
                              [<a href="/Articles/845306/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Not sure if when using stacked VLAN you will still get all hardware offload. If you don&#x27;t mind the overhead (internal network with jumbo frame) better try VXLAN ;)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/845306/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor845264"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The imminent stable-version apocalypse</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 5, 2021 22:27 UTC (Fri)
                               by <b>Sesse</b> (subscriber, #53779)
                              [<a href="/Articles/845264/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I&#x27;ll be happy if I don&#x27;t have to run 4 billion separate spanning-tree instances, at least!<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/845264/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor845270"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The imminent stable-version apocalypse</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 5, 2021 23:33 UTC (Fri)
                               by <b>jengelh</b> (subscriber, #33263)
                              [<a href="/Articles/845270/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;The same goes for short numbered ICQ number (if someone remember _that_ antiquity), same with phone numbers</font><br>
<p>
ICQ account numbers were assigned in monotonically increasing fashion, I believe.<br>
However, the phone numbers seem to be allocated as a radix tree here, so they are prone to be a lot more unbalanced than ICQ#, or kernel versions for that matter.<br>
<p>
(The OSM database, which I have taken care of for a handful of years, yields this statistic piece about phone numbers for my area code: /^[0-9]/: 4807 POIs, /^9/: 450, /^99/: 242, /^999/: 133.)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/845270/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor845314"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The imminent stable-version apocalypse</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 7, 2021 1:29 UTC (Sun)
                               by <b>NYKevin</b> (subscriber, #129325)
                              [<a href="/Articles/845314/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
One supposes we might move to IPv6, which fixes this problem once and for all. But IPv6 was standardized (in RFC 1883) a mere 25 years ago, so *obviously* it must not be mature enough.<br>
<p>
/s<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/845314/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor845352"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The imminent stable-version apocalypse</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 8, 2021 10:23 UTC (Mon)
                               by <b>khim</b> (subscriber, #9252)
                              [<a href="/Articles/845352/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <p>It doesn't matter when IPv6 was developed. Only matters when IPv4 pool was exhausted. That happened <a href="https://www.ripe.net/publications/news/about-ripe-ncc-and-ripe/the-ripe-ncc-has-run-out-of-ipv4-addresses">about one year ago</a>.</p>

<p>The fact that anyone started pushing IPv6 before that moment is a miracle in itself.</p>

<p>This <a href="http://www0.cs.ucl.ac.uk/staff/M.Handley/papers/only-just-works.pdf">15-years old article</a> explains that phenomenon well… and it looks as if Linux kernel follows the same trajectory: people are <b>only</b> fixing things when they break. Not before.</p>

      
          <div class="CommentReplyButton">
            <form action="/Articles/845352/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor845358"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The imminent stable-version apocalypse</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 8, 2021 12:11 UTC (Mon)
                               by <b>tzafrir</b> (subscriber, #11501)
                              [<a href="/Articles/845358/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
This certainly wasn&#x27;t the first time we were about to run out of IPv4 addresses (It also mentions that time in 2012 as well). But previously in the 1990s IPv4 address blocks were in need. So IPv6 was invented. But so was subnetting.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/845358/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor845318"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The imminent stable-version apocalypse</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 7, 2021 6:29 UTC (Sun)
                               by <b>pr1268</b> (subscriber, #24648)
                              [<a href="/Articles/845318/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <blockquote><font class="QuotedText">The same goes for short numbered ICQ number</font></blockquote>

<p>This reminds me of how high the demand is for low-numbered &quot;classic&quot; Delaware license plates &mdash; the <a href="https://13wham.com/news/offbeat/low-number-delaware-license-plate-auctioned-for-410k">lower the number, the higher the auction price</a>.</p>

      
          <div class="CommentReplyButton">
            <form action="/Articles/845318/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor845241"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The imminent stable-version apocalypse</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 5, 2021 19:30 UTC (Fri)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/845241/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
So... This is finally a stable update that is not one of the you-must-upgrade-or-the-world&#x27;s-gonna-blow-up kind.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/845241/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor845272"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The imminent stable-version apocalypse</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 5, 2021 23:10 UTC (Fri)
                               by <b>Sesse</b> (subscriber, #53779)
                              [<a href="/Articles/845272/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
“A number of important fixes, and everybody should upgrade”<br>
<p>
*eyes some fixes for ATM drivers and m68k*<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/845272/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor845276"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The imminent stable-version apocalypse</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 6, 2021 1:01 UTC (Sat)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/845276/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Hm?<br>
<p>
<a href="https://lwn.net/Articles/845206/">https://lwn.net/Articles/845206/</a><br>
<a href="https://lwn.net/Articles/845208/">https://lwn.net/Articles/845208/</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/845276/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor845258"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The imminent stable-version apocalypse</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 5, 2021 20:45 UTC (Fri)
                               by <b>zyga</b> (subscriber, #81533)
                              [<a href="/Articles/845258/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
This brings back memories of <a href="https://en.wikipedia.org/wiki/Logical_block_addressing">https://en.wikipedia.org/wiki/Logical_block_addressing</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/845258/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor845297"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The imminent stable-version apocalypse</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 6, 2021 13:39 UTC (Sat)
                               by <b>mss</b> (subscriber, #138799)
                              [<a href="/Articles/845297/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I would simply define KERNEL_VERSION_CAPPED at (4, 9, 255) and add 16-bit KERNEL_VERSION_16 at (4, 9, 256).<br>
For userspace-visible headers there would be #define KERNEL_VERSION KERNEL_VERSION_CAPPED, but the kernel internally would use KERNEL_VERSION_16.<br>
<p>
This split-version-personality would of course need to be introduced to the upstream, too, since things like VIDIOC_QUERYCAP need to be changed to use KERNEL_VERSION_CAPPED.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/845297/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor845322"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The imminent stable-version apocalypse</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 7, 2021 11:12 UTC (Sun)
                               by <b>meerdan</b> (subscriber, #119439)
                              [<a href="/Articles/845322/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I hope they find a way to fix this in mainline.<br>
<p>
To do nothing might work out for the moment, but it will come back and bite Greg in the future. Especially if he keeps doing this for new stable branches.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/845322/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor845324"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The imminent stable-version apocalypse</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 7, 2021 13:17 UTC (Sun)
                               by <b>gregkh</b> (subscriber, #8)
                              [<a href="/Articles/845324/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Patches to fix this have already been submitted for review, this will happen again...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/845324/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor846537"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The imminent stable-version apocalypse</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 18, 2021 1:06 UTC (Thu)
                               by <b>opalmirror</b> (subscriber, #23465)
                              [<a href="/Articles/846537/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <ul>
<li>Noone will EVER need more than 640KB of RAM!
<li>Noone will EVER need more than 3GB of user space!
<li>Noone will EVER need more than 4GB of RAM!
</ul>
<p>Whatever has happened before, will happen again.
So say we all.
      
          <div class="CommentReplyButton">
            <form action="/Articles/846537/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846549"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The imminent stable-version apocalypse</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 18, 2021 6:36 UTC (Thu)
                               by <b>jem</b> (subscriber, #24231)
                              [<a href="/Articles/846549/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Citation needed. Who said no one will ever need more than 4 GB of RAM?<br>
<p>
Somebody may have said &quot;More than 4 GB will not be needed for a long time, and it is not economical to support it now&quot; when 32-bit PCs emerged in the 1980s.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/846549/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor846708"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The imminent stable-version apocalypse</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 18, 2021 22:32 UTC (Thu)
                               by <b>opalmirror</b> (subscriber, #23465)
                              [<a href="/Articles/846708/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Fair comment. I guess nobody really said that no one would ever need to use more then 4GB, it was genuinely just a technology goal point for the entire industry.
      
          <div class="CommentReplyButton">
            <form action="/Articles/846708/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2021, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
