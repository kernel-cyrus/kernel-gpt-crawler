        <!DOCTYPE html>
        <html lang="en">
        <head><title>A kernel.org update [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/572127/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/571558/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/572127/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>A kernel.org update</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Please consider subscribing to LWN</b>
<p>
Subscriptions are the lifeblood of LWN.net.  If you appreciate this
content and would like to see more of it, your subscription will
help to ensure that LWN continues to thrive.  Please visit
<a href="/Promo/nst-nag1/subscribe">this page</a> to join up and keep LWN on
the net.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>October 29, 2013</br>
           <hr>
<a href="/Articles/KernelSummit2013/">2013 Kernel Summit</a>
</div>
An update on the status of the kernel.org infrastructure is a traditional
Kernel Summit feature; the 2013 event upheld that tradition, but with a new
speaker.  Kernel.org admin Konstantin Ryabitsev started out by saying that
he knows nothing about the 2011 security incident; he has deliberately
avoided reading the forensics reports that are (apparently) available.  His
choice is to focus on making kernel.org be as good as it can be now without
being driven by past problems.
<p>
He gave a tour of the site's architecture, which your editor will not
attempt to reproduce here.  In general terms, there is an extensive backend
system with a set of machines providing specific services and a large
storage array; it is protected by a pair of firewall systems.  The front

<a href="/Articles/572143/"><img
src="https://static.lwn.net/images/conf/2013/lce-ks/KonstantinRyabitsev-sm.jpg" width=125 height=156
alt="[Konstantin Ryabitsev]" border=0 hspace=3 vspace=3 align="right"></a>

end consists of a pair of servers, each of which runs two virtual machines;
one of them handles git and dynamic content, while the other serves static
content.
<p>
The front end systems are currently located in Palo Alto, CA and Portland,
OR.  One will be added in Seoul sometime around the middle of 2014, and
another one in Beijing, which will only serve git trees, "soon."  Work is
also proceeding on the installation of a front end system in Montreal.
<p>
There is an elaborate process for accepting updates from developers and
propagating them through the system.  This mechanism has been sped up
considerably in recent times; code pushed into kernel.org can be generally
available in less than a minute.  The developers in the session expressed
their appreciation of this particular change.
<p>
Konstantin was asked about the nearly devastating <a
href="http://jefferai.org/2013/03/29/distillation/">git repository
corruption problem</a> experienced by the KDE project; what was kernel.org
doing to 
avoid a similar issue?  It comes down to using the storage array to take
frequent snapshots and to keep them for a long period of time.  In the end,
the git repository is smaller than one might think (about 30GB), so keeping
a lot of backups is a reasonable thing to do.  There are also frequent
git-fsck runs and other tests done to ensure that the repositories are in
good shape.
<p>
With regard to account management, everybody who wants an account must
appear in the kernel's web of trust.  That means having a key signed by
Linus, Ted Ts'o, or Peter Anvin, or by somebody who has such a key.
Anybody who has an entry in the kernel MAINTAINERS file will automatically
be approved for an account; anybody else must be explicitly approved by one
of a small set of developers.
<p>
With regard to security, two-factor authentication is required for
administrative access everywhere.  All systems are all running SELinux in
enforcing mode â€” an idea which caused some in the audience to shudder.
System logs are stored to a <strike>write-only</strike> write-once medium.
There is also an extensive 
alert system that calls out unusual activity; that leads to kernel.org
users getting an occasional email asking about their recent activity on the
system.
<p>
Plans for the next year include faster replication through the mirror
network and an updated Bugzilla instance.  Further out, there are plans for
offsite backups, a git mirror in Europe, a new third-party security review,
and the phasing out of the bzip2 compression format.
<p>
[Next: <a href="/Articles/572128/">Security practices</a>].<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Development_tools-Infrastructure">Development tools/Infrastructure</a></td></tr>
            <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Kernel.org">Kernel.org</a></td></tr>
            <tr><td><a href="/Archives/ConferenceIndex/">Conference</a></td><td><a href="/Archives/ConferenceIndex/#Kernel_Summit-2013">Kernel Summit/2013</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/572127/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor572174"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A kernel.org update</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 30, 2013 2:54 UTC (Wed)
                               by <b>mricon</b> (subscriber, #59252)
                              [<a href="/Articles/572174/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Nitpick: that's "write-once" medium, since /dev/null would qualify as "write-only" medium as well. :)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/572174/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor572179"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A kernel.org update</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 30, 2013 6:48 UTC (Wed)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/572179/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; System logs are stored to a write-only medium.</font><br>
<p>
I hope they mean write-once, not write-only :-)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/572179/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor572199"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A kernel.org update</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 30, 2013 12:19 UTC (Wed)
                               by <b>arekm</b> (guest, #4846)
                              [<a href="/Articles/572199/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
IPv6 was implemented in kernel.org infrastructure and gone after "hack". Curious, will it come back back to previous working state?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/572199/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor573218"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A kernel.org update</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 7, 2013 15:09 UTC (Thu)
                               by <b>mricon</b> (subscriber, #59252)
                              [<a href="/Articles/573218/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Yes, but without any real ETA.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/573218/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor572464"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A kernel.org update</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 31, 2013 9:59 UTC (Thu)
                               by <b>mgedmin</b> (subscriber, #34497)
                              [<a href="/Articles/572464/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Is that a single 30 gig repository, or a set of repositories that total 30 gigs?<br>
<p>
What's the story behind the phasing out of bz2?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/572464/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor572480"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A kernel.org update</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 31, 2013 13:05 UTC (Thu)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/572480/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;  What's the story behind the phasing out of bz2?</font><br>
<p>
<p>
If you are asking why:<br>
<p>
IIRC, .bz2 is slower and larger than .xz (lzma), so it has no advantage<br>
<p>
If you are asking about when, I can't answer<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/572480/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor572495"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A kernel.org update</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 31, 2013 13:58 UTC (Thu)
                               by <b>Jonno</b> (subscriber, #49613)
                              [<a href="/Articles/572495/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; IIRC, .bz2 is slower and larger than .xz (lzma), so it has no advantage</font><br>
While there might be some pathological cases, in the general case:<br>
xz -2 compresses faster, and usually better, than bzip2 -9.<br>
xz -3 compresses better, and usually faster, than bzip2 -9.<br>
xz always decompresses faster than bzip2.<br>
<p>
The decompression memory requirement of xz -2 (3 MiB) and -3 (5 MiB) are comparable to bzip2 -9 (4 MiB), but the compression memory requirement are slightly higher (17M / 32M compared to 8M).<br>
<p>
xz -6 (the default) compresses even better, but compress is usually about an order of magnitude slower than bzip2 -9, and it requires a lot more memory (94 MiB to compress, 9 MiB to decompress). So xz -6 is not really a direct replacement for bzip2, but can make sense when distributing files that are compressed once but downloaded and decompressed many times.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/572495/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor572502"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A kernel.org update</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 31, 2013 14:32 UTC (Thu)
                               by <b>mgedmin</b> (subscriber, #34497)
                              [<a href="/Articles/572502/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Thanks, that answers my question perfectly.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/572502/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor573217"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A kernel.org update</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 7, 2013 15:08 UTC (Thu)
                               by <b>mricon</b> (subscriber, #59252)
                              [<a href="/Articles/573217/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Entirety of kernel.org repositories take up about 30GB on the mirrors due to most of them being cloned via "git clone -s" and thus benefiting from object sharing between Linus's tree and every other clone of it (it's safe since Linus never rebases his tree or performs similar unsafe operations that would break shared repos). If repos are cloned without sharing, such as to our long-term backups, they take up about 250GB.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/573217/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor573071"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A kernel.org update</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 6, 2013 17:54 UTC (Wed)
                               by <b>dag-</b> (guest, #30207)
                              [<a href="/Articles/573071/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
What kind of write-once medium is being used ?<br>
<p>
I am interested in such technology myself.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/573071/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor573089"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A kernel.org update</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 6, 2013 19:17 UTC (Wed)
                               by <b>johill</b> (subscriber, #25196)
                              [<a href="/Articles/573089/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I believe they said that it's a netapp volume.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/573089/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor573214"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A kernel.org update</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 7, 2013 15:05 UTC (Thu)
                               by <b>mricon</b> (subscriber, #59252)
                              [<a href="/Articles/573214/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It is a snaplock compliance volume on the Netapp storage appliance. While not true write-once media (anyone with physical access to the netapp would be able to pull drives out and delete the data, for example), it gets us most of the way there without costing a full arm and leg.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/573214/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2013, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
