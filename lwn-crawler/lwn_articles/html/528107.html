        <!DOCTYPE html>
        <html lang="en">
        <head><title>A FALLOC_FL_NO_HIDE_STALE followup [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/528107/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/527554/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/528107/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>A FALLOC_FL_NO_HIDE_STALE followup</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>LWN.net needs you!</b>
<p>
Without subscribers, LWN would simply not exist.  Please consider
       <a href="/Promo/nst-nag2/subscribe">signing up for a subscription</a> and helping
       to keep LWN publishing.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>December 5, 2012</br>
           </div>
Last week's edition included <a href="/Articles/527373/">an article on the
addition of the <tt>FALLOC_FL_NO_HIDE_STALE</tt> flag</a> to the
<tt>fallocate()</tt> system call.  Some developers, objecting to the
patch and the way it got into the kernel, had called for it to be reverted
before the 3.7 release went final.  At the time, Linus had not made any
remarks in the discussion or indicated whether he would accept the revert.
<p>
That situation changed after Linus was <a
href="/Articles/528108/">prompted</a> by Martin Steigerwald.  His <a
href="/Articles/528109/">response</a> was clear enough:
<p>
<div class="BigQuote">
	If you want something reverted, you show me the *technical* reason
	for it. Not the "ooh, I'm so annoyed by how this was done" reason
	for it.
<p>
	And if your little feelings got hurt, get your mommy to tuck you
	in, don't email me about it. Because I'm not exactly known for my
	deep emotional understanding and supportive personality, am I?
</div>
<p>
There were some technical reasons offered in the discussion, along with the
more general process-oriented complaints.  But it seems clear that Linus
has not found that discussion convincing.  So, in the absence of a surprise
from somewhere, it seems that the new <tt>fallocate()</tt> flag will remain
for the 3.7 release, at which point it will become part of the kernel's
user-space ABI.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Development_model-Code_review">Development model/Code review</a></td></tr>
            <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#fallocate">fallocate()</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/528107/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor528169"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A FALLOC_FL_NO_HIDE_STALE followup</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 6, 2012 6:55 UTC (Thu)
                               by <b>bergwolf</b> (guest, #55931)
                              [<a href="/Articles/528169/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
FALLOC_FL_NO_HIDE_STALE has potential security issues. Why do people think it is OK to implement such thing in the generic file system interface?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/528169/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor528199"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A FALLOC_FL_NO_HIDE_STALE followup</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 6, 2012 13:06 UTC (Thu)
                               by <b>andresfreund</b> (subscriber, #69562)
                              [<a href="/Articles/528199/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Well, as the previous article noted, they propose that a mount option restricts usage of that facility to a specific group. So its not like it gives away anything by default.<br>
<p>
Afaics the only thing that happened for 3.7 was the introduction of that flag, nothing uses it yet, so there cannot be said too much about the security implications of the real thing...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/528199/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor528273"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A FALLOC_FL_NO_HIDE_STALE followup</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 6, 2012 20:45 UTC (Thu)
                               by <b>cesarb</b> (subscriber, #6266)
                              [<a href="/Articles/528273/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I can see one security implication: inexperienced programmers who hear about the flag and use it because "it makes things go faster", and get away with it because the flag does nothing. Then their program is deployed somewhere which actually uses the flag, and their code breaks because it assumed zero-fill.<br>
<p>
It would be better if any attempt to use the flag always returned -EPERM.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/528273/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor528275"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A FALLOC_FL_NO_HIDE_STALE followup</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 6, 2012 20:57 UTC (Thu)
                               by <b>andresfreund</b> (subscriber, #69562)
                              [<a href="/Articles/528275/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
There's no user of the flag in the kernel yet, but the proposed patch did exactly that:<br>
<p>
<p>
 int do_fallocate(struct file *file, int mode, loff_t offset, loff_t len)<br>
 {<br>
@@ -249,6 +254,11 @@ int do_fallocate(struct file *file, int mode, loff_t offset, loff_t len)<br>
        if (ret)<br>
                return ret;<br>
 <br>
+       /* Check for enabling _NO_HIDE_STALE flag */<br>
+       if (mode &amp; FALLOC_FL_NO_HIDE_STALE &amp;&amp;<br>
+           !sysctl_enable_falloc_no_hide_stale)<br>
+               return -EPERM;<br>
+<br>
<p>
<p>
So such inexperienced programmers would fall on their noses.<br>
<p>
I don't think the process in which this got through was great, but why assume the people working on this are stupid?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/528275/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor528288"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A FALLOC_FL_NO_HIDE_STALE followup</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 6, 2012 21:43 UTC (Thu)
                               by <b>cesarb</b> (subscriber, #6266)
                              [<a href="/Articles/528288/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I just took a look at the current kernel, and the problem I imagined does not exist. The kernel already returns an error if FALLOC_FL_NO_HIDE_STALE is passed to sys_fallocate:<br>
<p>
        /* Return error if mode is not supported */<br>
        if (mode &amp; ~(FALLOC_FL_KEEP_SIZE | FALLOC_FL_PUNCH_HOLE))<br>
                return -EOPNOTSUPP;<br>
<p>
So any inexperienced programmer incorrectly attempting to use the flag to "make things go faster" will already receive an error, and the fallocate call will do nothing.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/528288/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor528392"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Gotta love &quot;notwithstanding&quot;</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 7, 2012 13:12 UTC (Fri)
                               by <b>man_ls</b> (guest, #15091)
                              [<a href="/Articles/528392/">Link</a>] (12 responses)
      </p>
      
      </div>
      </summary>
      I thought that the technical reason was that the flag was useful only for one filesystem (ext4), and only because it had bad performance when returning unallocated blocks because it had to zero them first. In the original article it was claimed that the right solution for this problem was to fix ext4, not hide the problem with a flag. Looks like sound technical reasons to me, Linus trash talk notwithstanding.
<p>
There is also something slightly annoying when a process gets subverted by a maintainer just because the company paying his bills needs it. No technical excellence to be seen anywhere. Perhaps my ignorance about this problem is even deeper than for kernel development in general, kind of a Marianas Trench of knowledge.
      
          <div class="CommentReplyButton">
            <form action="/Articles/528392/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor528457"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Gotta love &quot;notwithstanding&quot;</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 7, 2012 19:44 UTC (Fri)
                               by <b>lacos</b> (guest, #70616)
                              [<a href="/Articles/528457/">Link</a>] (11 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Right. The burden of proof ("show me the *technical* reason") is on whomever wants to get the patch *in*. The default is "no change". Ad-hoc reversal of the burden of proof undermines the credibility of the entire process. The last paragraph in &lt;<a href="https://lwn.net/Articles/527390/">https://lwn.net/Articles/527390/</a>&gt; says it all. Linus' reaction is blatantly partial.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/528457/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor528461"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Gotta love &quot;notwithstanding&quot;</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 7, 2012 20:21 UTC (Fri)
                               by <b>neilbrown</b> (subscriber, #359)
                              [<a href="/Articles/528461/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I admit that it could look that way, but I think the reality is that Linus is being blatantly pragmatic.<br>
The harm caused by the patch is not technical, and may even be purely theoretical, it is hard to measure.<br>
The benefit of the patch is that it makes it easier and safer for someone out there to use Linux, and that is a genuine positive.<br>
<p>
The only real negative is that it seems that Ted slipped the patch in "under the radar", arguably misusing his status as a maintainer.  They might hurt his reputation a little, but that isn't Linus' problem, and Ted has a very strong reputation so I don't think a little hurt will make a big dent.<br>
<p>
You might argue that there is a risk that other maintainers might think that Ted got away with something and might try the same thing.  I agree that is possible but I suspect it is fairly unlikely and I very much doubt they would get away with it.<br>
<p>
But Linus' pragmatic approach is a lot more about solving problems that are, not solving problems that might be, and his decision is consistent with that approach.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/528461/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor528484"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Our actions of today</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 7, 2012 23:24 UTC (Fri)
                               by <b>man_ls</b> (guest, #15091)
                              [<a href="/Articles/528484/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      The problem I see is that the next time that Nvidia or some other out-of-tree proprietary developer asks for some flag to be reserved for their own use, they can point to FALLOC_FL_NO_HIDE_STALE and say that they just want the same harmless favor: a teeny tiny flag to be reserved so that no one stomps over their nice proprietary code that solves their own situation and is of no use (or actively harmful) to anyone else, so that "it is easier and safer for someone out there to use Linux".
<p>
Probably Linus will say "get lost" and it will not matter a bit, so perhaps there is really no problem.
      
          <div class="CommentReplyButton">
            <form action="/Articles/528484/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor528495"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Our actions of today</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 8, 2012 1:36 UTC (Sat)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/528495/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Google's patch is GPL-ed, but not mainlined. Linus is pragmatic and inconsistent whenever it suits him.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/528495/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor528472"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Only the flag. Not the code.</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 7, 2012 21:51 UTC (Fri)
                               by <b>zlynx</b> (guest, #2285)
                              [<a href="/Articles/528472/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
All that got in is the flag. None of the code that implements the flag is in the kernel. This is just in so that no one else ever uses that flag value.<br>
<p>
Some people seem to be arguing against this patch as if it was the implementation code. Stop.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/528472/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor528483"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The flag is the code</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 7, 2012 23:19 UTC (Fri)
                               by <b>man_ls</b> (guest, #15091)
                              [<a href="/Articles/528483/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      What do you mean exactly? Frankly I am lost. Flags don't need a technical reason to be reserved? Or that reserving flags can be done by maintainers without discussion?
      
          <div class="CommentReplyButton">
            <form action="/Articles/528483/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor528501"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A flag is a name for a bit position. Not code.</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 8, 2012 3:39 UTC (Sat)
                               by <b>zlynx</b> (guest, #2285)
                              [<a href="/Articles/528501/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I mean it is a flag in a field that isn't short of flags. No one else wants that flag. It hurts no one to use that bit.<br>
<p>
So there is no valid technical reason to exclude the flag and there IS a good reason to include it, just as syscall, ioctl and device numbers have been reserved in the past. So that new feature patches don't get created that use the same bit. So that future authors writing out of tree code don't end up with a user-space that has to be recompiled when they merge other kernel features.<br>
<p>
Objecting to the "process violation" is one thing, and perhaps deserves a post or two. But what then? For ignoring the bureaucracy it seems people want to administer "punishment" by not including the flag. Which is ridiculous at this point because by NOW there HAS been a lot of discussion. Linus has reviewed the patch and accepted it. So the discussion has all been done and the "process" has been successfully followed.<br>
<p>
And FYI, code gets changed by maintainers without discussion all the time. Whenever there's a merge conflict between trees is one example.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/528501/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor528625"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A flag is a name for a bit position. Not code.</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 9, 2012 21:54 UTC (Sun)
                               by <b>nevets</b> (subscriber, #11875)
                              [<a href="/Articles/528625/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; And FYI, code gets changed by maintainers without discussion all the time. Whenever there's a merge conflict between trees is one example.</font><br>
<p>
Except this was a controversial change that was NACKed previously. Slipping trivial changes and merge conflict resolutions in without review is one thing. Slipping a change that has been previously NACKed by other maintainers is something completely different.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/528625/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor528628"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A flag is a name for a bit position. Not code.</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 9, 2012 22:09 UTC (Sun)
                               by <b>zlynx</b> (guest, #2285)
                              [<a href="/Articles/528628/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
That is why the change that was NACK'd wasn't merged. That would have been the feature and all its code. The flag reservation is what, 1 line, and really not worth all of this noise.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/528628/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor528645"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">A flag is a name for a bit position. Not code.</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 10, 2012 0:56 UTC (Mon)
                               by <b>nevets</b> (subscriber, #11875)
                              [<a href="/Articles/528645/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The change itself was obviously still controversial. It's reserving a bit to a system call that affects all filesystems, and it was pushed in by one filesystem maintainer because his company needed it for out of tree code that was NACKed.<br>
<p>
It still should have been posted for comments. Even if it suffered more NACKs, Ted could have posted it to Linus and stated that this is the best solution so far, and it's currently in use by Google. Linus currently seems to be fine with the change, and could have pulled it regardless of the NACKs by other maintainers. He's done things like that before. If that had happened, the other maintainers may have their feelings hurt, but at least everything was out in the open and honest.<br>
<p>
I go back to my original statement. It may be a one-liner, but its against a system call and for out of tree code that has been NACKed before. It's not a trivial fix nor a merge conflict. It should have been discussed.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/528645/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor528523"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Only the flag. Not the code.</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 8, 2012 13:43 UTC (Sat)
                               by <b>ricwheeler</b> (subscriber, #4980)
                              [<a href="/Articles/528523/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<p>
The bigger issue is not the flag. The core is that this "feature" is not even used by its advocates - exposing unwritten, stale data.<br>
<p>
The only justification for the feature or the flag is to take advantage of the side effect which makes ext4 go faster.<br>
<p>
Note that on the ext4 list we did debate multiple techniques to fix the actual performance problem at the core here (whether or not random, single fs block writes to a preallocated file are a critical use case).<br>
<p>
The problem with the flag itself is that people will use google, etc to search for "ext4 is slow" and suddenly come across the maintainer talking about how to make it faster by using this feature without proper context. Even the name of the flag is misleading - "no hide" sounds like we are doing something fishy.  <br>
<p>
Better to use a name like "show me other peoples data to make my workload go faster" :)<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/528523/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor528765"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Gotta love &quot;notwithstanding&quot;</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 11, 2012 12:14 UTC (Tue)
                               by <b>dgm</b> (subscriber, #49227)
                              [<a href="/Articles/528765/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Which, if you think about it, is a great way to avoid to become an slave of the process itself. Processes should not be immutable law. As all sets of rules, they are made to be broken when it's reasonable. <br>
<p>
Rule number one should be "use your brain". Mindlessly following rules is for bureaucrats and children under five.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/528765/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2012, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
