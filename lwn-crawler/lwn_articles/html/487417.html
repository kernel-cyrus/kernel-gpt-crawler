        <!DOCTYPE html>
        <html lang="en">
        <head><title>3.4 Merge window part 1 [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/487417/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/486631/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/487417/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>3.4 Merge window part 1</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Please consider subscribing to LWN</b>
<p>
Subscriptions are the lifeblood of LWN.net.  If you appreciate this
content and would like to see more of it, your subscription will
help to ensure that LWN continues to thrive.  Please visit
<a href="/Promo/nst-nag1/subscribe">this page</a> to join up and keep LWN on
the net.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>March 21, 2012</br>
           </div>
The release of the 3.3 kernel on March 18 has led inevitably to the opening
of the merge window for the 3.4 development cycle.  As of this writing,
some 3,500 non-merge changesets have been pulled into the mainline; this
cycle, in other words, has just begun.  
<p>
Some of the user-visible features
merged for 3.4 include:
<p>
<ul>
<li> The <tt>perf</tt>  utility understands a new <tt>--uid</tt> flag,
     which restricts data gathering to processes owned by the given user
     ID.  It is also now possible to specify multiple processes or threads
     with the <tt>--pid</tt> and <tt>--tid</tt> options.
<p>
<li> The perf events subsystem can now sample "taken branch" events on
     hardware with the "last branch record" functionality.
<p>
<li> The "zcache" compressed caching system (still in staging) can now use
     the crypto API for access to compression algorithms.
<p>
<li> The "Yama" security module has been merged; for now it just implements
     some restrictions on how the <tt>ptrace()</tt> system call can be
     used, but others may follow.  Yama is meant to be a place to collect
     various discretionary access control mechanisms intended to make a system
     more secure.
<p>
<li> The kernel now has read-only support for the qnx6fs filesystem used
     with the QNX operating system.
<p>
<li> New drivers include:
     <p>
     <ul>
     <li> <b>Crypto</b>: Tegra AES crypto engines.
     <p>
     <li> <b>Miscellaneous</b>: EnergyMicro EFM32 UART/USART ports,
     	  Maxim DS2781 battery monitors,
	  Solarflare SFC9000-family hwmon controllers,
	  Solarflare SFC9000-family SR-IOV controllers,
	  TI TPS62360 and TPS65217 power regulators,
	  Samsung S5M8767 regulators,
	  Renesas RSPI controllers,
	  SuperH HSPI controllers,
	  CSR SiRFprimaII SPI controllers,
	  Broadcom BCM63xx SPI controllers, and
	  Freescale i.MX on-chip ANATOP LDO regulators.
     <p>
     <li> <b>Network</b>: Xilinx 10/100/1000 AXI Ethernet controllers,
     	  PEAK PCAN-ExpressCard, PCAN-USB and PCAN-PC CAN controllers,
	  NXP Semiconductor LPC32xx ARM SoC-based Ethernet controllers, and
	  TI CPSW switches.

     <p>
     <li> <b>USB</b>: Ozmo USB-over-WiFi controllers.
     <p>
     <li> <b>Staging transitions</b>: the old telephony drivers have been
          moved into staging in anticipation of their eventual removal from
	  the kernel altogether.
     </ul>
     <p>
     The kernel now also contains an audio USB gadget driver compliant with
          USB audio class 2.0.
</ul>
<p>

Also worth noting: the "ramster" transcendent memory functionality was
briefly added to the staging tree before being removed; various other
changes had caused it to be seriously broken.  Ramster can be thought of as
a way of sharing memory across machines; a system with spare pages can host
data for another that is under memory pressure.  See <a
href="/Articles/454795/">this article</a> for more details and <a
href="/Articles/475681/">this article</a> for an exposition of the vision
behind Ramster.  Adding this functionality requires carving a number of
features out of the OCFS2 filesystem and making them globally available.
One assumes these patches will return for 3.5.

<p>
Changes visible to kernel developers include:
<p>
<ul>

<li> Jump labels have been rebranded again; after a <a
     href="/Articles/484527/">false start</a> they are now known as "static
     keys".  Details can be found in the new <a
     href="/Articles/487426/">Documentation/static-keys.txt</a> file.
<p>
<li> The (now) unused <tt>get_driver()</tt> and <tt>put_driver()</tt>
     functions have been removed from the kernel.
<p>
<li> The debugfs filesystem understands the <tt>uid=</tt>, <tt>gid=</tt>,
     and <tt>mode=</tt> mount options, allowing the ownership and
     permissions for the filesystem to be set in <tt>/etc/fstab</tt>.
<p>
<li> The <a href="/Articles/477067/">zsmalloc allocator</a> has been added
     to the staging tree; the older "xvmalloc" allocator has been removed.
<p>
<li> The Android "alarm" driver has been added to the staging tree.
<p>
<li> The <a href="/Articles/450460/">deferred driver probing mechanism</a>
     has been merged.
<p>
<li> The list of power management stages continues to grow; the kernel has
     new callbacks called <tt>suspend_late()</tt>, <tt>resume_early()</tt>,
     <tt>freeze_late()</tt>, <tt>thaw_early()</tt>,
     <tt>poweroff_late()</tt>, and <tt>restore_early()</tt> for operations
     that must be performed at just the right time.
<p>
<li> The "IRQ domain" abstraction has been merged; IRQ domains make it
     easier to manage interrupts on systems with more than one interrupt
     controller.  See <a
     href="/Articles/487684/">Documentation/IRQ-domain.txt</a> for more
     information. 
<p>
<li> The long-unused second argument to <tt>kmap_atomic()</tt> has been
     removed.  Thanks to some preprocessor trickery, calling
     <tt>kmap_atomic()</tt> with two arguments still works, but a
     deprecation warning will result.
<p>
<li> There is a new mechanism for the autoloading of drivers for specific
     x86 CPU features.  Such drivers should declare a
     <tt>MODULE_DEVICE_TABLE</tt> with the <tt>x86cpu</tt> type; see the
     comments at the head of <tt>arch/x86/kernel/cpu/match.c</tt> for
     details. 
</ul>
<p>

The 3.4 merge window can be expected to continue until roughly
April&nbsp;2.  There are a lot of subsystem trees yet to be pulled, so one
can expect a large number of changes to go in between now and then.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Releases-3.4">Releases/3.4</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/487417/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor487810"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">3.4 Merge window part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 22, 2012 1:50 UTC (Thu)
                               by <b>djm1021</b> (guest, #31130)
                              [<a href="/Articles/487810/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Thanks for the mention of RAMster and the other article references!  A couple of quick corrections:  (1) RAMster is still in 3.4 as can be seen in Linus' git tree under drivers/staging/ramster.  It is marked with CONFIG_BROKEN only because it is waiting for another patch (submitted by Konrad Wilk) changing the name of some functions in cleancache that it depends on... as soon as that patch is merged, the CONFIG_BROKEN can be removed from ramster's Kconfig.  (2) In the merged ramster code, the ocfs2 dependency has been removed.  At the request of Sunil Mushran, the small amount of ocfs2 cluster management and messaging code has now simply been duplicated for ramster as it will likely evolve quite differently and there just isn't enough code to make it worth pulling it out for global use beyond ocfs2.  (This decision can be revisited later before ramster would be promoted out of staging.)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/487810/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor488498"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">3.4 Merge window part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 24, 2012 22:36 UTC (Sat)
                               by <b>cesarb</b> (subscriber, #6266)
                              [<a href="/Articles/488498/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
AFAIK, Corbet was not wrong. IIRC, ramster *was* removed, and added back again a few patches later.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/488498/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor488540"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">3.4 Merge window part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 25, 2012 16:38 UTC (Sun)
                               by <b>djm1021</b> (guest, #31130)
                              [<a href="/Articles/488540/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
OK, I see what you mean.  Actually, ramster *was* reverted just after it was merged into staging-next in early February (because it was dependent on xvmalloc which, coincidentally, had just been removed from staging-next) and then ramster was added back to staging-next soon after, and THEN disabled with CONFIG_BROKEN because it was dependent on a git pull ordering (cleancache fix) in linux-next.  That sordid staging-next history was entirely merged into linux-next and into Linus's tree.  So 3.4-rc0 never reverted ramster, although the git log might imply otherwise.<br>
<p>
So we were both not wrong. ;-)<br>
<p>
Now that all those dependencies are resolved in Linus's tree, a simple patch to remove the CONFIG_BROKEN in ramster's KConfig has been submitted and is awaiting merging for -rc1 via GregKH.  Anyone wishing to try ramster in 3.4-rc0 can manually remove the CONFIG_BROKEN.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/488540/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor488898"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">3.4 Merge window part 1</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 28, 2012 1:14 UTC (Wed)
                               by <b>BenHutchings</b> (subscriber, #37955)
                              [<a href="/Articles/488898/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <blockquote>Solarflare SFC9000-family hwmon controllers, Solarflare SFC9000-family SR-IOV controllers</blockquote>
<p>The SFC9000 family chips are network controllers. The hwmon and SR-IOV support are new and optional features of the existing driver (sfc).</p>

      
          <div class="CommentReplyButton">
            <form action="/Articles/488898/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2012, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
