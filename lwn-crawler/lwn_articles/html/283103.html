        <!DOCTYPE html>
        <html lang="en">
        <head><title>Appropriate sources of entropy [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/283103/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/282506/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/283103/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>Appropriate sources of entropy</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>LWN.net needs you!</b>
<p>
Without subscribers, LWN would simply not exist.  Please consider
       <a href="/Promo/nst-nag2/subscribe">signing up for a subscription</a> and helping
       to keep LWN publishing.
</blockquote>
<div class="FeatureByline">
           By <b>Jake Edge</b><br>May 21, 2008</br>
           </div>
<p>
A steady stream of random events allows the kernel to
keep its entropy pool stocked up, which in turn allows processes to use the
strongest random numbers that Linux can provide.  Exactly which events
qualify as random&mdash;and just how much randomness they
provide&mdash;is sometimes difficult to decide.  A recent move to eliminate
a source of
contributions to the entropy pool has worried some, especially in the embedded
community. 
</p>

<p>
The kernel samples unpredictable events for use in generating random
numbers, storing that data in the entropy pool.  Entropy is a measure of
the unpredictability or randomness of a data set, so the kernel estimates
the amount of entropy each of those events contributes to the pool.
Many kernels run on hardware that is lacking some of the
traditional sources of entropy. In those cases, the timing of interrupts
from network 
devices has been used as a source of entropy, but it has always been
controversial, so it was recently proposed for removal.
</p>
 
<p>
Two of the best sources of random data for the entropy pool&mdash;user interaction via a
keyboard or mouse and disk interrupts&mdash;are often not present in embedded
devices.  In addition, some disk interfaces, notably ATA, do not add
entropy, which extends the problem to many "headless" servers.  But network
interrupts are seen as a dubious source of entropy because they may be able
to be observed, or manipulated, by an attacker.  In addition, as network
traffic rises, many network drivers turn off receive interrupts from the
hardware, allowing the kernel to poll periodically for incoming packets.
This would reduce entropy collection just at the time when it might be needed for
encrypting the traffic. 
</p>

<p>
This is not the first time eliminating the <tt>IRQF_SAMPLE_RANDOM</tt> flag
from network drivers has come up; we <a
href="http://lwn.net/Articles/182874/">looked at the issue</a> two years
ago (though the flag was called <tt>SA_SAMPLE_RANDOM</tt> at that time).
It has come up again, starting with a  <a href="/Articles/283197/">query on linux-kernel</a> from
Chris Peterson: "<q>Should network devices be allowed to contribute
entropy to /dev/random?</q>"  Jeff Garzik, kernel network device driver
maintainer, <a href="/Articles/283303/">answered</a>: "<q>I tend to push people to /not/ add
IRQF_SAMPLE_RANDOM to new drivers, 
but I'm not interested in going on a pogrom with existing code.</q>"
</p>

<p>
For anyone that <i>is</i> interested in such a pogrom, Peterson proposed a
<a href="http://lwn.net/Articles/282947/">patch to 
eliminate the flag</a> from the twelve network drivers that still use it.
This sparked a long discussion on how to provide entropy for those devices
that do not have anything else to use.  While the actual contribution of
entropy from network devices is questionable, mixing that data into the
pool does not harm it, as long as no entropy credit&mdash;the current
estimate of entropy in the pool&mdash;is awarded.
Alan Cox <a href="/Articles/283204/">proposed a new flag to track sources
like that</a>:
<div class="BigQuote">
A more interesting alternative might be to mark things like network
drivers with a new flag say IRQF_SAMPLE_DUBIOUS so that users can be
given a switch to enable/disable their use depending upon the environment.
</div>
</p>

<p>
Some were in favor of an approach like this, but Adrian Bunk <a
href="/Articles/283206/">notes that</a>: 
<div class="BigQuote">
If he can live with dubious data he can simply use /dev/urandom .
<p>
If a customer wants to use /dev/random and demands to get dubious data
there if nothing better is available fulfilling his wish only moves
the security bug from his crappy application to the Linux kernel.
</div>
</p>

<p>
Part of the problem stems from a misconception about random numbers
gotten from <tt>/dev/random</tt> versus those that are read from
<tt>/dev/urandom</tt>, which we <a
href="http://lwn.net/Articles/261804/">described in a Security page
article</a> last December. In general, applications should read from
<tt>/dev/urandom</tt>.  Only the most sensitive uses of random
numbers&mdash;keys for GPG for example&mdash;need the entropy guarantee
that <tt>/dev/random</tt> provides.  In a system that is getting regular
entropy updates, the quality of the random numbers from both sources is the same.
</p>
<p>
There is still an initialization problem for some systems, though, as Ted
Ts'o <a href="/Articles/283205/">points out</a>:
<div class="BigQuote">
Hence, if you don't think the system hasn't run long enough to collect
significant entropy, you need to distinguish between "has run long
enough to collect entropy which is causes the entropy credits using a
somewhat estimation system where we try to be conservative such that
/dev/random will let you extract the number of bits you need", and
"has run long enough to collect entropy which is unpredictable by an
outside attacker such that host keys generated by /dev/urandom really
are secure".
</div> 
</p>

<p>
A potential entropy source, even for embedded systems, is to sample
other kernel and system parameters that are not predictable externally.
Garzik <a href="/Articles/283209/">suggests</a>: 

<div class="BigQuote">
EGD demonstrates this, for example:  <a
href="http://egd.sourceforge.net/">http://egd.sourceforge.net/</a>  It
looks 
at snmp, w, last, uptime, iostats, vmstats, etc.
<p>
And there are plenty of untapped entropy sources even so, such as reading
temperature sensors, fan speed sensors on variable-speed fans, etc.
<p>
Heck, "smartctl -d ata -a /dev/FOO" produces output that could be hashed
and added as entropy.
</div>
</p>

<p>
Another source is from hardware random number generators.  The kernel
already has support for some, including the <a
href="http://www.via.com.tw/en/initiatives/padlock/hardware.jsp">VIA
Padlock</a> that seems to be well thought of.  Not all processors have such
support, however. The <a
href="http://en.wikipedia.org/wiki/Trusted_Platform_Module">Trusted
Platform Module</a> (TPM) does have random number generation and is
becoming more widespread, especially in laptops, but there is no kernel
<tt>hw_random</tt> driver for TPM.
</p>

<p>
Garzik advocates adding a kernel driver for what he calls the "Treacherous
Platform Module", but as others pointed out, it can all be done in user
space using the <a href="http://trousers.sourceforge.net/">TrouSerS</a>
library.  Even for the hardware random number generators that are supported
in the kernel there is no automatic entropy collection, as it is left up to
user space to decide whether to do that.  This is done to try and keep
policy decisions about the quality of the random data out of kernel code.
</p>

<p>
Systems that wish to sample that data should use <tt>rngd</tt> to feed the
kernel entropy pool.  <tt>rngd</tt> will apply FIPS 140-2 tests to
verify the randomness of the data before passing it to the kernel.  Andi
Kleen is <a href="/Articles/283212/">not in favor of that approach</a>:
<div class="BigQuote">
Just think a little bit: system has no randomness source except the
hardware RNG. you do your strange randomness verification. if it fails
what do you do? You don't feed anything into your entropy pool and all
your  random output is predictable (just boot time)  If you add anything
predictable from another source it's still predictable, no difference.
</div>
</p>

<p>
There is concern that some of the hardware random number generators are
poorly implemented or could malfunction, so it would be dangerous to
automatically add that data into the pool.  Doing the FIPS testing in the
kernel is not an option, leaving it up to user space applications to make
the decision.  There is nothing stopping any superuser process from adding bits
to the entropy pool&mdash;no matter how weak&mdash;but the consensus is that the
kernel itself must use sources it knows it can trust.
</p>

<p>
Another instance of this problem&mdash;in a different guise&mdash;appears in a <a
href="/Articles/283215/">discussion about random numbers for virtualized I/O</a>, with Garzik asking: "<q>Has anyone yet written a "hw" RNG
module for virt, that reads the host's
random number pool?</q>"  Rusty Russell responded with <a
href="http://lwn.net/Articles/282721/">a patch for a virtio "hardware"
random number generator</a> as well as one that <a
href="/Articles/283217/">adds it into his lguest 
hypervisor</a>.  The lguest patch reads data from the host's
<tt>/dev/urandom</tt>, 
which is not where H. Peter Anvin <a href="/Articles/283216/">thinks it
should come from</a>:
<div class="BigQuote">
There is no point in feeding the host /dev/urandom to the guest (except
for seeding, which can be handled through other means); it will do its
own mixing anyway.  The reason to provide anything at all from the host
is to give it "golden" entropy bits.
</div>
</p>

<p>
The virtio implementation only provides the <tt>hw_random</tt>
implementation, thus it requires user space help to get entropy data into
the kernel.  Much like any process that can read <tt>/dev/random</tt>,
lguest could exhaust the host entropy pool, so there was some discussion of
limiting how much random data guests can request from the device.  A guest
implementation could then use a small pool of entropy read from the host to
seed its own random number generator for the simulated hardware device.
</p>

<p>
Removing the last remaining uses of <tt>IRQF_SAMPLE_RANDOM</tt> in network
drivers seems likely, though some way to mix that data into the entropy
pool without giving it any credit is still a possibility.  With luck, that
will encourage more effort into incorporating new sources of entropy using
tools like EGD or, for systems that have it available, random number
hardware.  For systems that lack the traditional entropy sources, this
should lead to a better initialized and fuller pool, while eliminating a
potential attack by way of network packet manipulation.
</p><br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Random_numbers">Random numbers</a></td></tr>
            <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Security">Security</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/283103/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor283415"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Appropriate sources of entropy</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 22, 2008 2:40 UTC (Thu)
                               by <b>ikm</b> (guest, #493)
                              [<a href="/Articles/283415/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment"><pre>
<font class="QuotedText">&gt; Removing the last remaining uses of IRQF_SAMPLE_RANDOM in network drivers seems likely,
though some way to mix that data into the entropy pool without giving it any credit is still a
possibility.</font>

Why is it just a possibility? I don't get it -- what could possibly be said against that? By
following that route, you'd make dubious data hopefully a bit less dubious, but you wouldn't
make it more dubious than it is already. So what's the downside? "All or nothing" syndrome?
</pre></div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/283415/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor283448"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Appropriate sources of entropy</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 22, 2008 10:42 UTC (Thu)
                               by <b>jmspeex</b> (subscriber, #51639)
                              [<a href="/Articles/283448/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment"><pre>
<font class="QuotedText">&gt; Why is it just a possibility? I don't get it -- what could possibly be said against that?</font>

I think they mean a possibility in terms of "it's possible to write code that isn't too ugly",
rather than "possible" in the theoretical sense. Of course, the worst it can do is not
increase the entropy. To actually decrease the entropy, if would need to be correlated to some
other information in pool and cause really weird interactions (highly unlikely IMO).
</pre></div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/283448/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor283487"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Appropriate sources of entropy</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 22, 2008 15:19 UTC (Thu)
                               by <b>cpeterso</b> (guest, #305)
                              [<a href="/Articles/283487/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Linux's RNG does have code (a flag called <code>dont_count_entropy</code>) to mix new entropy data into the entropy pool without increasing the entropy credits (i.e. /dev/urandom data would be more random but blocked /dev/random readers would not be woken up). But no code actually seems to take advantage of it.

      
          <div class="CommentReplyButton">
            <form action="/Articles/283487/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor283675"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Appropriate sources of entropy</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 24, 2008 5:09 UTC (Sat)
                               by <b>bronson</b> (subscriber, #4806)
                              [<a href="/Articles/283675/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment"><pre>
The downside was just demonstrated by Debian.

Mixing good randomness with dubious randomness seems harmless right?  But what happens if the
good randomness dries up?  Will you notice?  Will you end up using dubious randomness for
something that matters?

</pre></div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/283675/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor283677"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Appropriate sources of entropy</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 24, 2008 6:50 UTC (Sat)
                               by <b>ikm</b> (guest, #493)
                              [<a href="/Articles/283677/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment"><pre>
This is not like the Debian's situation. If dubious randomness isn't accounted for as incoming
entropy bits, /dev/random would block the same way as it would be blocking without any dubious
randomness at all. As for /dev/urandom, without any external randomness /dev/urandom would be
looping inside sha1 feedback, acting as a pure PRNG. Any kind of external randomness injected
into that loop would only make its randomness better, it can't possible make it worse (due to
crypto properties of sha1 you can't forge any correlation here). Point is, when good
randomness dries up, what you're getting from /dev/urandom is a PRNG output. Any dubious
randomness mixed in could only improve this situation. So, to answer your question, you really
won't notice in both cases, but your randomness would be a bit better if you mix in some
dubious stuff there as well. In the latter case, your chances of using dubious randomness
(pure PRNG) are actually smaller.
</pre></div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/283677/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor283679"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Appropriate sources of entropy</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 24, 2008 8:10 UTC (Sat)
                               by <b>bronson</b> (subscriber, #4806)
                              [<a href="/Articles/283679/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment"><pre>
My point is, either you care about the strength of your random numbers or you don't.

If you care, you're using /dev/random and you only mix in strong entropy.  Mixing in weak
entropy seems harmless but will mask problems that would otherwise be obvious.  The Debian
situation.

If you don't care, then you're happy with a strong, well-seeded PRNG and there's no need to
mix in dubious random data.

Is there a middle ground?  I don't see one.

</pre></div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/283679/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor283698"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Appropriate sources of entropy</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 24, 2008 18:47 UTC (Sat)
                               by <b>ikm</b> (guest, #493)
                              [<a href="/Articles/283698/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment"><pre>
Any cryptographic PRNG needs to be reseeded once in a while, and some dubious data will do
just fine for that, given that it is mixed in in a cryptographically secure way. A box with
only a network connection is a good example of that -- it does not have much real entropy
coming in. You say that in absence of any trusted entropy a crypto PRNG is never to be
reseeded. I would disagree. One of the problem is what would happen if a seed file, which
stores state across reboots, is compromised. Another acoounts for any sort of weaknesses found
in a PRNG itself. If you need more details, see Schneier's Yarrow design paper, I could only
agree with what he had to say. The point is, sticking to the one initial seeding forever is a
bad idea.
</pre></div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/283698/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor283560"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Appropriate sources of entropy</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 22, 2008 20:27 UTC (Thu)
                               by <b>aegl</b> (subscriber, #37581)
                              [<a href="/Articles/283560/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      "<i>But network interrupts are seen as a dubious source of entropy because they may be able to be observed, or manipulated, by an attacker</i>"
<p>
Most modern systems can measure the interval between interrupts to a very high precision using a processor cycle counter ... and Linux does use this when it is available when adding randomness to the pool. It seems implausible  that an attacker can reliably observe or manipulate network traffic to sub nano-second precision (unless (s)he has a logic analyser connected to the target system!).
<p>
If the only clock source is "jiffie" resolution, then I can see this is an issue.
      
          <div class="CommentReplyButton">
            <form action="/Articles/283560/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor283694"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Appropriate sources of entropy</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 24, 2008 17:49 UTC (Sat)
                               by <b>giraffedata</b> (guest, #1954)
                              [<a href="/Articles/283694/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <blockquote>
It seems implausible that an attacker can reliably observe or manipulate network traffic to sub nano-second precision 
</blockquote>
<p>
Why?  All the physical processes that move bits along a network, and drive the CPU and memory states for processing them, are predictable with that precision.  E.g. if I send two packets into a network N nanoseconds apart and nobody else is using that part of the network, why wouldn't the receiver register them as received N nanoseconds apart?

      
          <div class="CommentReplyButton">
            <form action="/Articles/283694/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor283707"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Appropriate sources of entropy</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 24, 2008 23:45 UTC (Sat)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/283707/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment"><pre>
if there is no other traffic involved then you may have a point, but if there is no other
activity happening on the server other then what's initiated by the bad guy, there's nothing
interesting on the server for the bad guy to get.

if the server is doing anything else (talking to anyone else on the network, doing processing
of some kind, etc) then you start having things happen on the server that are not controlled
by the bad guy
</pre></div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/283707/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor283718"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Appropriate sources of entropy</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 25, 2008 13:39 UTC (Sun)
                               by <b>kleptog</b> (subscriber, #1183)
                              [<a href="/Articles/283718/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment"><pre>
This is something I don't quite understand. Yes, the packets might be registered at the
network card exactly N nanoseconds apart, but between the time that the packet is registered
by the card and when entropy might be added there is:

- Waiting for the PCI bus to be free to check the status of the card
- The CPU finding the code to run which may involve looking up page tables, pulling code out
which may be in any number of caches, each of which take an unpredicatable amount of time to
respond.
- The process of DMAing the data to main memory takes an unpredictable amount of time,
depending on the state of the DRAM.
- The busses are shared between various CPUs which are doing other things at the same time.
- The execution time of CPU instructions is affected by branch prediction logic and
instruction scheduling algorithms. Hyperthreading makes it worse.

And you're saying that at the end of this there's not even a single bit of entropy? If the
machine were otherwise completely idle I might understand it but if you just register lots of
dubious sources and use as entropy the time between different dubious sources I don't see how
it could be in any way predictable.

If I had any idea how to do it, I'd create a device that tried to extract entropy from the
timer interrupt and see if there is any correlation to be found...
</pre></div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/283718/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor283770"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Appropriate sources of entropy</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 26, 2008 16:34 UTC (Mon)
                               by <b>aegl</b> (subscriber, #37581)
                              [<a href="/Articles/283770/">Link</a>] 
      </p>
      
      </div>
      </summary>
      "<i>the time between different dubious sources</i>"
<p>
Agree with most of what you've said here ... but I have to comment that Linux doesn't use the time delta between different interrupt sources. It keeps a per-IRQ history and computes delta-t based on the previous interrupt using the same IRQ (if multiple devices are sharing the same IRQ, then this will be a cross-device time, but generally people try to arrange that devices do not share IRQs).
<p>
I have no idea why Linux does this ... in some cases using deltas between different interrupt sources would provide some defense against an attacker who does have tight control over the packets on one or more interfaces.
      
          <div class="CommentReplyButton">
            <form action="/Articles/283770/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor284288"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Appropriate sources of entropy</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 29, 2008 10:01 UTC (Thu)
                               by <b>forthy</b> (guest, #1525)
                              [<a href="/Articles/284288/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <p>Actually, no, none of the physical processes are predictable to sub-ns 
precision. First, the sender's CPU uses cache - if some data is not in 
the cache, it will take more time to read in. Same happens on the 
receiver CPU - a single cache miss, and the counter will read differently 
(last few bits only, for sure).</p>

<p>Then, there's also clock synchronization. CPU clocks aren't 
synchronized, and the crystals aren't too precise - a 200MHz HT clock for 
an AMD processor can actually run at 201.xxMHz (the one I'm using right 
now is running at 201.155MHz, the other, very similar configured machines 
I've in the office have the last digits at 53, 54, 55, and 89). As 
outside attacker, you can't know the exact value (well, even as inside 
attacker you can't know the exact number - only to a limited precision), 
but you need to to inject deterministic data into the random number 
pool.</p>

<p>Also, today's networks are usually switched. So there's a 
store-and-forward switch in between. These switches can theoretically be 
quite deterministic, but their clock is slower than the CPU clock (25MHz 
for fast, 125MHz for Gb ethernet). This clock is not synchronized with 
the other PCs. So if you have a 2.5GHz CPU sending a packed through a 
single Gb switch, and receive it with another 2.5GHz CPU, you can add 4 
bits of randomness into your pool. Chances are high that even more bits 
are random.</p>

<p>I suggest a challenge: Try to produce a deterministic pattern with 
full knowledge over both sides - e.g. by modifying the kernel's ping code 
so that it sends the rtdsc timestamp as answer). Whatever quality you 
achieve in this challenge will be the "dubious" part of the randomness, 
and the remaining noise can be added.</p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/284288/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor283567"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Appropriate sources of entropy</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 22, 2008 21:52 UTC (Thu)
                               by <b>cpeterso</b> (guest, #305)
                              [<a href="/Articles/283567/">Link</a>] (11 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment"><pre>
Another source of randomness for daemons like EGD or rngd could be to periodically wget
news.google.com or random.org's numbers and pipe it into /dev/urandom.
</pre></div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/283567/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor283572"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Wgetting bytes from random.org</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 22, 2008 23:22 UTC (Thu)
                               by <b>pr1268</b> (subscriber, #24648)
                              [<a href="/Articles/283572/">Link</a>] (10 responses)
      </p>
      
      </div>
      </summary>
      <p>I'll happily share my technique for grabbing some random bytes from <a title="Random.org" href="http://www.random.org">Random.org</a> (run as root, obviously):</p>

<p style="font-family: monospace; white-space: pre;">#!/bin/sh

# Grab 4 unsigned bytes from random.org's HTTP interface,
# parse out just the numbers (filtering the tab chars out),
# create a 4-byte (32-bit) hexdump, and finally,
# write output to /dev/random.

wget -o /dev/null  -O - \
&quot;http://www.random.org/integers/?num=4&amp;min=0&amp;max=255&amp;col=4&amp;base=16&amp;format=plain&amp;md=new&quot; \
    | sed -e 's/\t//g' \
    | xxd -r -p \
    &gt; /dev/random
</p>

<p>Feel free to use or derive from the above; while I'm the author, I do not imply any copyright on it.  Comments, suggestions, and criticism are most certainly welcome.</p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/283572/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor283588"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Disclaimers and correction to above wget script</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 23, 2008 2:22 UTC (Fri)
                               by <b>pr1268</b> (subscriber, #24648)
                              [<a href="/Articles/283588/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <p>Standard disclaimers and a correction:</p>

<ol>
<li style="padding-bottom: 5pt;">I claim no liability whatsoever for whatever happens if anyone runs the above script on their computer.  Granted, I have tested it on Slackware 12.0, and it appears to work fine.</li>
<li style="padding-bottom: 5pt;">Random.org imposes a <a title="quota" href="http://www.random.org/quota/">quota</a> (based on client IP address) for fetching entropy bits from it.  Please be mindful of this, as I do not want to blamed for others being denied access due to overuse.</li>
<li style="padding-bottom: 5pt;">I seem to have misspelled the last query parameter name.  According to <a title="HTTP interface parameters" href="http://www.random.org/clients/http/">Random.org's HTTP interface specification</a>, it should be <font face="monospace">rnd=</font> instead of <font face="monospace">md=</font>.</li>
</ol>

<p>The value of the <font face="monospace">num=</font> query parameter specifies how many bytes are provided.  I'm unsure whether 8 bytes (64 bits) would be preferred for 64-bit Linux users (anyone 64-bit user out there wish to comment on that?).</p>

<p>Finally, my apologies for sounding like a Random.org shill, but there are some really good articles and links on entropy and randomness there.</p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/283588/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor283668"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Wgetting bytes from random.org</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 24, 2008 0:09 UTC (Sat)
                               by <b>jch</b> (guest, #51929)
                              [<a href="/Articles/283668/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment"><pre>
<font class="QuotedText">&gt; wget ... | xxd -r ... &gt; /dev/random</font>

I believe that this will mix new data into the entropy pool, but not actually increase the
entropy estimate.  In other words, any process blocking on /dev/random will remain blocked
until some other, accounted for, entropy is added.

I believe you'll need to ioctl(RNDADDENTROPY) in order to fix that.

</pre></div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/283668/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor283669"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Wgetting bytes from random.org</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 24, 2008 1:31 UTC (Sat)
                               by <b>pr1268</b> (subscriber, #24648)
                              [<a href="/Articles/283669/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <p style="padding-left: 1.5em; padding-right: 1.5em;"><font class="QuotedText">I believe that this will mix new data into the entropy pool, but not actually increase the entropy estimate.</font></p>

<p>But isn't that what's happening all the time anyway, with the &quot;environmental noise from device drivers and other sources&quot; mentioned in the random(4) man page?  What I was attempting to do is add another, external entropy source.  Actually, I don't use this script hardly at all; it was more an attempt to make something useful while honing my shell scripting skills. I did learn xxd(1).</p>

<p style="padding-left: 1.5em; padding-right: 1.5em;"><font class="QuotedText">In other words, any process blocking on /dev/random will remain blocked until some other, accounted for, entropy is added.</font></p>

<p>I don't think the entropy pool has <i>ever</i> been drained completely (i.e., <font face="monospace">/dev/random</font> blocked for reading) on my workstation.  Except for the time I did that myself from a shell console. A few keystrokes, mouse movements, and network traffic bytes later (30 seconds or so), the pool had been refilled, according to <font face="monospace">/proc/sys/kernel/random/entropy_avail</font>.</p>

<p style="padding-left: 1.5em; padding-right: 1.5em;"><font class="QuotedText">I believe you'll need to ioctl(RNDADDENTROPY) in order to fix that.</font></p>

<p>But this is supposed to be a shell script, not a C program! ;-)</p>

<p>I do appreciate your feedback and comments, thanks!  Understand that I learn a lot reading our editors' stuff and others' comments.</p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/283669/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor283671"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Wgetting bytes from random.org</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 24, 2008 2:12 UTC (Sat)
                               by <b>jch</b> (guest, #51929)
                              [<a href="/Articles/283671/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment"><pre>
<font class="QuotedText">&gt; But isn't that what's happening all the time anyway, with the "environmental noise from
device drivers and other sources"</font>

No.  The various sources of entropy add entropy to the random pool and increase the entropy
estimate by some small value.

You may want to see for yourself in the kernel sources -- they end up calling
add_timer_randomness (drivers/char/random.c line 571) which calls add_entropy_words and then
credit_entropy_store.  This increases the value of entropy_count, and may cause processes
blocking on /dev/random to wake up.

</pre></div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/283671/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor283674"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Wgetting bytes from random.org</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 24, 2008 3:52 UTC (Sat)
                               by <b>pr1268</b> (subscriber, #24648)
                              [<a href="/Articles/283674/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <p>So how is me writing bytes to <font face="monospace">/dev/random</font> via a script any different than what my distro (Slackware 12.0) does in rc.S (also a script) when the &quot;carry-over&quot; entropy file (<font face="monospace">/etc/random-seed</font>) is written to the random device?  Other than a difference in quantity of bytes, I see no difference.</p>

<p>My intuition was that <font face="monospace">/dev/random</font> is (root) writable so that the sysadmin can incorporate additional sources of entropy.  I don't mean to sound like I'm arguing, just sincerely interested...  Thanks!</p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/283674/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor283676"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Wgetting bytes from random.org</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 24, 2008 5:53 UTC (Sat)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/283676/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment"><pre>
the sysadmin can add randomness, but the system will not trust that it is random (without
tweaking things via the ioctl), even if the sysadmin sends completely predictable data to
/dev/random it won't do any harm.
</pre></div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/283676/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor283690"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Wgetting bytes from random.org</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 24, 2008 16:26 UTC (Sat)
                               by <b>jch</b> (guest, #51929)
                              [<a href="/Articles/283690/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment"><pre>
<font class="QuotedText">&gt; My intuition was that /dev/random is (root) writable so that the sysadmin can incorporate
additional sources of entropy.</font>

The distinction between mixing in new data into the random pool and adding to the entropy
estimate is what the article is about.

The in-kernel RNG maintains a pool of random data and an estimate of how much entropy is in
the pool.

When you read from /dev/(u)random, the entropy estimate is reduced.  When it reaches 0, reads
from /dev/random will block.  That's the easy part.

The difficult part is deciding when to increase the entropy estimate.  When you write 100
bytes to /dev/random, unless the 100 bytes are perfectly random, they should not add 800 bits
to the entropy estimate, but some lower value that only the person who generated the data is
able to choose reasonably.

For that reason, merely writing to /dev/random does not add to the entropy estimate; you need
to explicitly increase it by using the ioctl.

<font class="QuotedText">&gt; So how is me writing bytes to /dev/random via a script any different than what my distro
(Slackware 12.0) does in rc.S (also a script) when the "carry-over" entropy file
(/etc/random-seed) is written to the random device?</font>

It's no different.  Your distribution is mixing the old data into the random pool, but not
increasing the entropy estimate.  This way if the carry-over data is not truly random, no
serious security vulnerability will ensue.

</pre></div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/283690/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor283734"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Thanks for the replies</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 26, 2008 2:23 UTC (Mon)
                               by <b>pr1268</b> (subscriber, #24648)
                              [<a href="/Articles/283734/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <p>Thanks to those who replied to my questions.  Coincidentally, Ted T'so recently had a <a title="LKML reply" href="http://article.gmane.org/gmane.linux.network/94337">related explanation</a> (to dlang's and jch's above) on the LKML.</p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/283734/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor283693"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Wgetting bytes from random.org - copyright</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 24, 2008 17:40 UTC (Sat)
                               by <b>giraffedata</b> (guest, #1954)
                              [<a href="/Articles/283693/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <blockquote>
while I'm the author, I do not imply any copyright on it. 
</blockquote>
<p>
You should change your wording for this kind of thing.  In most places, copyright is implied by law, whether you do something to imply you want it or not.  You have to explicitly disclaim it.  "I disclaim any copyright" would work.  "I contribute this to the public domain" is the usual wording.

      
          <div class="CommentReplyButton">
            <form action="/Articles/283693/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor284507"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Wgetting bytes from random.org</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 30, 2008 10:12 UTC (Fri)
                               by <b>Duncan</b> (guest, #6647)
                              [<a href="/Articles/284507/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment"><pre>
[reposted as the initial submission timed out without confirmation]

Viewing the previous replies to your script posting, I'd say it's a good 
thing you don't increase the entropy count based on that script.  After 
all, you're using an unencrypted http: connection.  As such, it'd be a 
(relatively) simple matter for an attacker, indeed, even a remote 
attacker, to do a MitM attack and substitute whatever he wanted into 
the "response from random.org", which for all you know is anything but.

So yes, in line with the theme of the article, adding the bits shouldn't 
do any harm, as long as you don't count it as added entropy.  However, it 
certainly can't be counted on to /help/ either, since you've really no 
idea where the data is coming from or how predictable it might be, so it's 
a good thing your script does /not/ have the system count it as added 
entropy.

Of course, the first instinct would then be to use an encrypted/ssl 
connection.  However, I believe that'd be defeating the purpose to some 
extent, since creating the encrypted connection will (I assume, I'm no 
authority and really haven't a clue, only a guess) consume entropy in the 
first place.  Assuming it's allowed, one could then grab more entropy from 
random.org than was consumed, but there'd still need to be some entropy 
available initially or the encrypted connection itself would be suspect.

I'm really surprised nobody else noted this in their replies... &lt;shrug&gt;

Duncan
</pre></div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/284507/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor283696"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Appropriate sources of entropy</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 24, 2008 17:51 UTC (Sat)
                               by <b>giraffedata</b> (guest, #1954)
                              [<a href="/Articles/283696/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <blockquote>
Another source is from hardware random number generators.
</blockquote>
<p>
Where does a hardware RNG get its entropy?

      
          <div class="CommentReplyButton">
            <form action="/Articles/283696/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor283735"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Appropriate sources of entropy</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 26, 2008 5:42 UTC (Mon)
                               by <b>ikm</b> (guest, #493)
                              [<a href="/Articles/283735/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <a href="http://en.wikipedia.org/wiki/Johnson%E2%80%93Nyquist_noise">Johnson noise</a> and other crap like that. Usually it's not really totally uniformly random, but still quite unpredictable :)
      
          <div class="CommentReplyButton">
            <form action="/Articles/283735/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor284566"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Appropriate sources of entropy</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 30, 2008 22:16 UTC (Fri)
                               by <b>ejr</b> (subscriber, #51652)
                              [<a href="/Articles/284566/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment"><pre>
Search for "randomness extractor" for information on turning an unknown 
random distribution into a known one.  It's quite difficult, but often 
possible.  Cool combinatorics at work, and also closely related to error 
correcting codes and hashing.  (They're all related by the concept of 
distance between and distinguishability of the sampled points.)
</pre></div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/284566/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor284300"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Randomness server</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 29, 2008 11:46 UTC (Thu)
                               by <b>roel</b> (guest, #41887)
                              [<a href="/Articles/284300/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment"><pre>
Is it maybe possible to receive randomness through an encrypted connection from a 'randomness'
server?
</pre></div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/284300/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor284512"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Randomness server</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 30, 2008 10:34 UTC (Fri)
                               by <b>Duncan</b> (guest, #6647)
                              [<a href="/Articles/284512/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment"><pre>
Hmm... your post asking the question, posted May 29, a comment subthread 
discussing basically that, initial post May 22...

It might be worthwhile reading or at least scanning the existing comments 
before you ask a question in your own comment...

That said, the subthread in question proposed an /unencrypted/ connection 
to such a server (random.org).  You at least get credit for not 
making /that/ mistake.  However, as I just pointed out in a reply to that 
subthread, an encrypted connection probably (I'm no expert, but I believe 
the usual SSL method does anyway) requires some initial entropy to setup 
in the first place, so unless you fetch more than that, it's hardly worth 
it, and even then, you'd have to have at least some initial good quality 
entropy to setup the connection or anything received on it could hardly be 
trustworthy in the first place, so it's a bit of a chicken an egg problem.

Of course, if the encryption entropy is pregenerated and stored, such as 
with one-time-pads or the like, it's possible.  OTOH, the longer such 
pregenerated entropy is held, the more opportunity there has been to 
compromise it by some means or other, so that's not a perfect solution 
either.  Still, it may be "good enough", but then again, the unencrypted 
http solution discussed above, or indeed, the "enriched" PRNG solution 
of /dev/urandom, is likely "good enough" for most general use cases as 
well.

Duncan
</pre></div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/284512/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor284508"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">audio-entropyd / video-entropyd</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted May 30, 2008 9:58 UTC (Fri)
                               by <b>flok</b> (subscriber, #17768)
                              [<a href="/Articles/284508/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      If you have a spare audio-card lying around one could also use <A rel="nofollow" HREF="http://vanheusden.com/aed/">audio-entropyd</A>. Same thing for a video4linux-device (e.g. a webcam): <A rel="nofollow" HREF="http://vanheusden.com/ved/">video-entropyd</A>.
      
          <div class="CommentReplyButton">
            <form action="/Articles/284508/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor509145"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">audio-entropyd / video-entropyd</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 1, 2012 15:07 UTC (Wed)
                               by <b>flok</b> (subscriber, #17768)
                              [<a href="/Articles/509145/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
And of course timer_entropyd and entropy broker.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/509145/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor402234"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Appropriate sources of entropy</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 26, 2010 16:35 UTC (Thu)
                               by <b>AmyDown</b> (guest, #69799)
                              [<a href="/Articles/402234/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <a rel="nofollow" href="http://en.wikipedia.org/wiki/Johnson%E2%80%93Nyquist_noise">Johnson noise</a> and other crap like that.
      
          <div class="CommentReplyButton">
            <form action="/Articles/402234/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2008, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
