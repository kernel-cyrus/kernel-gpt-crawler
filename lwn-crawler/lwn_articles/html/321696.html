        <!DOCTYPE html>
        <html lang="en">
        <head><title>Xen: finishing the job [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/321696/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/320771/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/321696/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>Xen: finishing the job</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Please consider subscribing to LWN</b>
<p>
Subscriptions are the lifeblood of LWN.net.  If you appreciate this
content and would like to see more of it, your subscription will
help to ensure that LWN continues to thrive.  Please visit
<a href="/Promo/nst-nag1/subscribe">this page</a> to join up and keep LWN on
the net.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>March 4, 2009</br>
           </div>
Once upon a time, Xen was the hot virtualization story.  The Xen developers
had a working solution for Linux - using free software - well ahead of
anybody else, and Xen looked like the future of virtualization on Linux.
Much venture capital chased after that story, and distributors raced to be
the first to offer Xen-based virtualization.  But, along the
way, Xen seemed to get lost.  The XenSource  developers often showed
little interest in getting their code into the mainline, and attempts by others
to get that job done ran into no end of obstacles.  So Xen stayed out of
the mainline for years; the first public Xen release happened in 2003, but
the core Xen code was only merged for 2.6.23 in 
October, 2007.
<p>
In the mean time, KVM showed up and grabbed much of the attention.  Its
path into the mainline was almost blindingly fast, and many kernel
developers were less than shy about expressing their preference for the KVM
approach.  More recently, Red Hat has made things more formal with its <a
href="http://www.redhat.com/about/news/prarchive/2009/agenda.html">announcement</a>
of a "virtualization agenda" based on KVM.  Meanwhile, <a
href="http://lwn.net/Articles/218766/">lguest</a> showed up as an easy
introduction for those who want to play with virtualization code.  
<p>
The Xen story is a classic example of the reasons behind the "upstream
first" policy, which states that code should be merged into the mainline
before being shipped to customers.  Distributors rushed to ship Xen,
then found themselves supporting out-of-tree code which, often, was not
well supported by its creators.  In particular, published releases of Xen
often only supported relatively old kernels, creating lots of work for
distributors wanting to ship something more current.
Now at least some of those distributors
are moving on to other solutions, and high-level kernel developers are
questioning whether, at this point, it's worth merging the remaining Xen
code at all.
<p>
All
told, Xen looks to be on its last legs.
Or, perhaps, the rumors of Xen's demise have been slightly exaggerated.
<p>
The code in the mainline implements the Xen "DomU" concept - an
unprivileged domain with no access to the hardware.  A full Xen
implementation requires more than that, though; there is the user-space
hypervisor (which is GPL-licensed) and the kernel-based "Dom0" code.  Dom0
is the first domain started by the hypervisor; it is typically run with
more privileges than any other Xen guest.  The purpose of Dom0 is to
carefully hand out privileges to other Xen domains, providing access to
hardware, network interfaces, etc. as set by administrative policy.  Actual
implementations of Xen must include the Dom0 code - currently a large body
of out-of-tree kernel code.
<p>
Jeremy Fitzhardinge would like to change that situation.  So he has posted
<a href="http://lwn.net/Articles/321298/">a core Xen Dom0 patch set</a>
with the goal of getting it merged into the 2.6.30 release.  Among the
review comments was <a href="/Articles/321699/">this question</a> from
Andrew Morton:
<p>
<div class="BigQuote">
	I hate to be the one to say it, but we should sit down and work out
	whether it is justifiable to merge any of this into Linux.  I think
	it's still the case that the Xen technology is the "old" way and
	that the world is moving off in the "new" direction, KVM?
<p>
	In three years time, will we regret having merged this?
</div>
<p>

The questions asked by Andrew were, essentially, (1)&nbsp;what code (beyond
the current posting) is required to finish the job, and (2)&nbsp;is there
really any reason to do that?  The <a href="/Articles/321701/">answer</a>
to the first question was "<q>another 2-3 similarly sized series to get
everything so that you can boot dom0 out of the box</q>".  Then there are
various other bits which may not ever make it into the mainline.  But, says
Jeremy, getting the core into the mainline would shrink the out-of-tree
patches carried by distributors and generally make life easier for
everybody.  For the second question, Jeremy responds:
<p>
<div class="BigQuote">
	Despite all the noise made about kvm in kernel circles, Xen has a
	large and growing installed base.  At the moment its all running on
	massive out-of-tree patches, which doesn't make anyone happy.  It's
	best that it be in the mainline kernel.  You know, like we argue
	for everything else.
</div>
<p>
Beyond that, Jeremy is arguing that Xen still has a reason to exist.  Its
design differs significantly from that of KVM in a number of ways; see <a
href="/Articles/321702/">this message</a> for an excellent description of
those differences.  As a result, Xen is useful in different situations.
<p>
Some of the advantages claimed by Jeremy include:
<p>
<ul>
<li> Xen's approach to page tables eliminates the need for shadow page 
     tables or page table nesting in the guests; that, in turn, allows for
     significantly better performance for many workloads.
<p>
<li> The Xen hypervisor is lightweight, and can be run standalone; the KVM
     hypervisor is, instead, the Linux kernel.  It seems that some vendors
     (HP and Dell are named) are shipping a Xen hypervisor in the firmware
     of many of their systems; that's the code behind the "instant on"
     feature, among other things.
<p>
<li> Xen's paravirtualization support allows it to work with hardware which
     does not support full virtualization.  KVM, instead, needs hardware
     support.
<p>
<li> The separation between the hypervisor, Dom0, and DomU makes security
     validation easier.  The separation between domains also allows for
     wild configurations with each device being driven by a separate
     domain; one might think of this kind of thing as a sort of heavyweight
     microkernel architecture.
</ul>
<p>
KVM's advantages, instead, take the form of relative simplicity, ease of
use, full access to contemporary kernel features, etc.  By Jeremy's
reasoning, there is a place for both systems in Linux.
<p>
The relative silence at the end of the discussion suggests that Jeremy has
made his case fairly well.  Mistakes may have been made in Xen's history,
but it is a project which remains alive, and which has clear reasons to
exist.  Your editor predicts that the Dom0 code will find little opposition
at the opening of the 2.6.30 merge window.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Virtualization-Xen">Virtualization/Xen</a></td></tr>
            <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Xen">Xen</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/321696/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor321792"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 4, 2009 15:47 UTC (Wed)
                               by <b>sayler</b> (guest, #3164)
                              [<a href="/Articles/321792/">Link</a>] (15 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Dear gods, I hope Xen dom0 support finally makes it into the mainline kernel.<br>
<p>
Perhaps I'm not the target audience for Xen -- having used it for a number of research projects -- but it is a royal pain to have to deal with back- or forward-ported Xen Dom0's.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/321792/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor321812"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 4, 2009 16:41 UTC (Wed)
                               by <b>martinfick</b> (subscriber, #4455)
                              [<a href="/Articles/321812/">Link</a>] (10 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I have plenty of older hardware that cannot support kvm on which I would run Xen if it were in the mainline (and thus better supported by debian).  Without better distributor support, it is just too hard to use it along with the large vserver pacth.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/321812/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor321886"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 4, 2009 20:05 UTC (Wed)
                               by <b>jmorris42</b> (guest, #2203)
                              [<a href="/Articles/321886/">Link</a>] (9 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; I have plenty of older hardware that cannot support kvm on which</font><br>
<font class="QuotedText">&gt; I would run Xen if it were in the mainline..</font><br>
<p>
KVM is basically QEMU with a kernel module to speed it up.  KQEMU is a kernel module to speed up QEMU that doesn't depend on hardware virtualization.  So is Xen on old hardware enough faster than QEMU+KQEMU to justify keeping around yet another virtualization platform?  That is the billion dollar question Xen is hoping they can answer yes to.   Because if they can't Citrix is going to feel really dumb after throwing big sacks 'o cash to own Xen.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/321886/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor321887"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 4, 2009 20:10 UTC (Wed)
                               by <b>martinfick</b> (subscriber, #4455)
                              [<a href="/Articles/321887/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I think that last time I tried running a simple NFS server inside of KQEMU it was about ten times slower than on the raw hardware.  I cannot vouch for Xen, but I believe it should be close to the raw hardware speed.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/321887/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor321902"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 4, 2009 21:33 UTC (Wed)
                               by <b>drag</b> (guest, #31333)
                              [<a href="/Articles/321902/">Link</a>] (7 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The problem with that is that even with Xen your still going to run through a emulated network interface. <br>
<p>
Using Qemu there are several different ways to setup networking... you can use the default 'userspace tcp stack' which provides easy tcp networking (not the entire tcp/ip stuff though..). Or you can setup a virtual ethernet switch and connect your virtual ethernet ports to that and then use iptables to create a NAT firewall that then allows that virtual ethernet network a gateway to the outside network. Or you can combine the virtual ethernet ports with the physical external port and use a bridge to connect them.<br>
<p>
Of course as you can imagine the default is rather limited. On my Fedora laptop virt-manager sets up a virtual ethernet switch and then connects that to the external world using a NAT firewall. That works with Network-Manager and dnsmasq so my virtual machines have access to the network irregardless of how my laptop is connected and can adapt to changing network topographies.<br>
<p>
By default Qemu (and modified versions) use a emulated 100Mbit ethernet connection. The fastest emulated ethernet card you can use would be a Intel 1000Mbit ethernet switch. <br>
<p>
However if you want very good performance you need to use PV network drivers which then provide good performance. I had a 300% improvement in performance, more reliable performance, and reduced cpu load from using those over the emulated nic devices.<br>
<p>
<p>
But I guess that PV drivers are only available to people using KVM and not Kqemu/Qemu?<br>
<p>
<p>
-----------------------------<br>
<p>
Now I don't know exactly what Xen uses for networking stuff. But I know that it's performance is similar when using full virtualization. I don't know about it using it's paravirtualization mode. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/321902/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor321911"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 4, 2009 22:17 UTC (Wed)
                               by <b>aliguori</b> (subscriber, #30636)
                              [<a href="/Articles/321911/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
&lt;p&gt;&lt;i&gt;However if you want very good performance you need to use PV network drivers which then provide good performance. I had a 300% improvement in performance, more reliable performance, and reduced cpu load from using those over the emulated nic devices.&lt;/i&gt;&lt;/p&gt;<br>
<p>
&lt;p&gt;&lt;i&gt;But I guess that PV drivers are only available to people using KVM and not Kqemu/Qemu?&lt;/i&gt;&lt;/p&gt;<br>
<p>
&lt;p&gt;PV drivers (ala VirtIO) are now available in upstream QEMU&lt;/p&gt;<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/321911/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor321912"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 4, 2009 22:17 UTC (Wed)
                               by <b>aliguori</b> (subscriber, #30636)
                              [<a href="/Articles/321912/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Ugh, sorry for the ugly post.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/321912/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor321944"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 5, 2009 2:55 UTC (Thu)
                               by <b>bluefoxicy</b> (guest, #25366)
                              [<a href="/Articles/321944/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; The problem with that is that even with Xen your still going to run</font><br>
<font class="QuotedText">&gt; through a emulated network interface. </font><br>
<p>
The problem is, with KQemu/VMware/Qemu/KVM, you're running through an emulated network interface; whereas with Xen, you are not.<br>
<p>
With KVM or Qemu, non-paravirtualized, the network hardware is emulated.  The hard disk is emulated too.  You make some system calls to write raw Ethernet frames or spin up TCP/IP connections; the kernel plays with some MMIO registers or do PIO IN/OUT instructions, and there's a piece of code (a reverse driver, pretty much) that tracks the state of the "hardware" and determines what exactly you're trying to do.  Then it relays your intent to the host OS, which then encodes all this to... games with MMIO or PIO, through a hardware driver, into real hardware.<br>
<p>
With Xen paravirtualization, the hardware isn't emulated.  You make some system calls to emit a raw Ethernet frame or open a TCP/IP connection.  The kernel calls a Xen function and says, "On this device, emit this to the network."  Xen passes this to a hook in the Dom0 OS, which then looks at the virtual device in a map to find the physical device and does all the hardware magic of MMIO/PIO games to actually send it out to the network.<br>
<p>
In other words, the kernel and the hypervisor do a hell of a lot less work when you're paravirtualized.  Hardware drivers for virtual devices are essentially "Tell the hypervisor I need to write this data to this device," instead of "Do a crazy, complicated rain dance to get this device to perform this function."  Even better, the hypervisor doesn't have to interpret this crazy, complicated rain dance; it's handed exactly what you want in simple, easy to read instructions which don't have to be decoded and passed to the kernel and then re-encoded for a different hardware device etc.<br>
<p>
This means it's faster.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/321944/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor322142"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">No it does not.</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 6, 2009 7:22 UTC (Fri)
                               by <b>khim</b> (subscriber, #9252)
                              [<a href="/Articles/322142/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <p>Xen may be faster today but this is not intrinsic advantage.</p>

<p>The story with KVM:<br />
1. Userspace asks kernel to the send the packet.<br />
2. Context switch to kernel.<br />
3. Kernel asks "hardware" to send the packet.<br />
4. "Reverse driver" asks the outr kernel to send the packet.<br />
5. Context switch to outer kernel.<br />
7. Outer kernel talks to real hardware.</p>

<p>The story with Xen:<br />
1. Userspace asks kernel to the send the packet.<br />
2. Context switch to kernel.<br />
3. Kernel asks Xen to send the packet.<br />
4. Conext switch to Xen.<br />
5. Xen asks the outer kernel to send the packet.<br />
6. Context switch to Dom0 kernel.<br />
7. Dom0 kernel talks to real hardware.</p>

<p>Context switches are expensive (equal to hundred simple operations or 
so) and Xen uses one additional context over KVM. This can easily 
compensate for simpler interface without "reverse driver". That's why there 
are push to create drivers directly for Xen - this way it'll be faster then 
KVM... if KVM will not use paravirtualization. I fail to see why it can not 
use paravirtualization for all devices except CPU (where it has hardware 
support and so is fast enough already).</p>

<p>In the end Xen can become fast specialized OS, but so can KVM - and 
which way is faster? <a 
href="http://udrepper.livejournal.com/2007/02/26/">Drepper's words</a> are 
still relevant: <i>neither Xen nor VMWare have any real advantages which 
cannot be surmounted by giving KVM more time to catch up, i.e., grant it 
the same time to develop the features</i>.</p>

<p>And if so then why should we include interim solution? It depends on 
timeframe: everyone agree btrfs will do everything ext4 does, yet ext4 was 
included anyway. Because btrfs will not be ready for a few more years. If 
KVM will need few more years to catch up then may be Dom0 support is worth 
having in the kernel, but if it's only matter of months - the story will be 
different...</p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/322142/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor322011"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 5, 2009 11:57 UTC (Thu)
                               by <b>danpb</b> (subscriber, #4831)
                              [<a href="/Articles/322011/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The PV driver backends for all VirtIO devices are present in the mainline QEMU codebase - the VirtIO backends don't care about the type of virtualization - all they want is ability to provide emulated PCI devices. So QEMU, KQEMU, KVM all work just fine in this regard, though obviously the best performance will be when you combine them with KVM. You could also probably make the VirtIO backends work under Xen fullvirt too..<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/322011/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor322290"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 7, 2009 7:29 UTC (Sat)
                               by <b>mab</b> (guest, #314)
                              [<a href="/Articles/322290/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Is irregardless the opposite of regardless?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/322290/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor322322"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 8, 2009 8:08 UTC (Sun)
                               by <b>rahulsundaram</b> (subscriber, #21946)
                              [<a href="/Articles/322322/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
That's the intended meaning.<br>
<p>
<a href="http://www.merriam-webster.com/dictionary/irregardless">http://www.merriam-webster.com/dictionary/irregardless</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/322322/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor321815"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 4, 2009 16:50 UTC (Wed)
                               by <b>drag</b> (guest, #31333)
                              [<a href="/Articles/321815/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Yeah it would probably be nice. <br>
<p>
However I've moved on to using KVM for most everything.  Having the ability to simply _have_ a hypervisor by default with no effort, no patching, no rebooting, no 'lifting' my system kernel out of Ring 0, etc etc is a wonderful thing. <br>
<p>
And the other thing is that no special or weird configurations are needed. While Fedora with virt-manager provides a nice gui and other tools... for many of my tasks simply being able to launch qemu with screen and serial output to my terminal is quite convenient.<br>
<p>
That being said, if people are using Xen and finding it useful and there are cases were it would be superior then it would be nice to get support into the kernel. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/321815/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor321989"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 5, 2009 10:06 UTC (Thu)
                               by <b>dw</b> (guest, #12017)
                              [<a href="/Articles/321989/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; However I've moved on to using KVM for most everything. Having the ability to simply _have_ a hypervisor by default with no effort, no patching, no rebooting, no 'lifting' my system kernel out of Ring 0, etc etc is a wonderful thing.</font><br>
<p>
Hey I heard about this really neat new free OS by communists called DEBIAN LINUX which has all this stuff built in. Sure beats that Slackware nonsense you appear to be running. :)<br>
<p>
apt-get install xen-linux-system &amp;&amp; grub-install /dev/sda &amp;&amp; reboot<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/321989/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor322078"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 5, 2009 17:29 UTC (Thu)
                               by <b>drag</b> (guest, #31333)
                              [<a href="/Articles/322078/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Sorta. <br>
<p>
It's still not that easy. <br>
<p>
With KVM... "modprobe kvm-intel" (or -amd or whatever) That will work on any recent Linux distribution. The difference being is that KVM is already there. Having to install a modified qemu is all I need to do and is _still_ quite a bit simplier and less problem prone then what you pasted there.<br>
<p>
With my laptop, for example, which I make heavy use of virtualization for small development and documentation projects I run Fedora 10 for various reasons (my prefered distribution is Debian, btw). I have a Intel GMA X3100 video card and wifi. For various other reasons I like to have DRI2 enabled. This requires having a rather new kernel, a very new kernel (along with newer X stuff)<br>
<p>
Also I like having good power management stuff. Being able to suspend my laptop and such is very handy as I move around quite a bit. <br>
<p>
All of this sort of stuff makes life for a Xen user much much more difficult. <br>
<p>
------------------------------<br>
<p>
<p>
Also all the benefits of running Xen seem to stem from it's paravirtualization features.  For what I do I need full virtualization... Having to muck around with the kernel of the guest systems in addition to the kernel of the host system is just not worth the trouble and is frequently not really even practical. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/322078/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor322262"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">It is still not the same</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 7, 2009 1:19 UTC (Sat)
                               by <b>gwolf</b> (subscriber, #14632)
                              [<a href="/Articles/322262/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
My main reason not to have Xen is that I do quite a bit of staging on my laptop. And Xen, however easy it is to get running on Debian, is practically a new architecture by itself - At least, architectural variant. I want my laptop to have ACPI support - and there is no way to achieve that with Xen. KVM "just works", and it just does not bother me when I'm not using it.<br>
And BTW, ACPI is not only a good feature for laptops. I want my servers also to suck less energy when demand drops at night.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/322262/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor321814"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 4, 2009 16:59 UTC (Wed)
                               by <b>mday_ii</b> (guest, #25315)
                              [<a href="/Articles/321814/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Xen is not a full hypervisor until it loads the first domain - dom0, which is (except for Sun's Xen) a Linux kernel + userspace. (Hence the patchset). Without dom0 Xen does not have any device support (other than cpu/mmu/ioapic), management or control interfaces, or accessibility (terminal or vnc server). So it is not correct to say Xen is different from KVM in the sense that only KVM requires a Linux host: so does Xen. Again, you don't have a Xen hypervisor without a dom0 Linux. So really, the Xen hypervisor is not any more lightweight than KVM, and you can't run it standalone (not if you want it to run any guests). When making this calculus, Xen + dom0 is significantly more kloc than KVM + toolchain. <br>
<p>
<p>
When evaluating Xen for security, you must audit the dom0 kernel + userspace right along with the Xen kernel. dom0 is a fully privileged guest - it has access to memory for all other guests. You end up with more kloc to evaulate with Xen than with KVM. <br>
<p>
KVM also supports PCI device pass-through (the feature which allows each device to be driven by a separate domain. KVM runs paravirtual Linux kernels using the standard paravirt-ops interface.<br>
<p>
Xen's approach to managing guest page tables (paravirtualization and batching of page table updates) will lose its benefit quickly as EPT (nested page table) support moves guest page table management into the processor. Nehalem and Barcelona both support this feature, which in some tests eliminates more than 90% of traps into the hypervisor.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/321814/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor321991"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 5, 2009 10:12 UTC (Thu)
                               by <b>dw</b> (guest, #12017)
                              [<a href="/Articles/321991/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      Surely when 'measuring' the security of KVM, one should also take into account the security of Qemu (see for example <a href="http://taviso.decsystem.org/virtsec.pdf">this paper</a> which is pretty damning). 
      
          <div class="CommentReplyButton">
            <form action="/Articles/321991/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor322024"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 5, 2009 13:56 UTC (Thu)
                               by <b>mday_ii</b> (guest, #25315)
                              [<a href="/Articles/322024/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Xen also uses Qemu for device emulation.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/322024/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor322320"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 8, 2009 4:33 UTC (Sun)
                               by <b>landley</b> (guest, #6789)
                              [<a href="/Articles/322320/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
You're aware that paper is several years old, right?  It doesn't have a clear publication date attached, and you have to read all the way to page 3 to find:<br>
<p>
<font class="QuotedText">&gt; QEMU 0.8.2 was the latest version available as of this</font><br>
<font class="QuotedText">&gt; writing, which was used in its default configuration.</font><br>
<p>
That was released July 22, 2006.  That's about when the 2.6.17 kernel was released.  So you're saying "look at all these bugs an old version of the project had".  Keeping in mind that the project only _launched_ in 2003, it shouldn't come as a surprise that back when it was only 3 years old it didn't even have working x86-64 support yet (and even x86 had a very restricted and buggy set of hardware it could emulate), so its development community hadn't started paying attention to security auditing device emulations just yet.  They were too busy trying to add enough features to make it usable.<br>
<p>
I also note that the first place I saw that paper is when it was linked from the qemu development mailing list shortly after it came out, and that's when the developers went "oh, people are trying to use it for honeypots?  Ok, we'd better add bounds checking and such then".<br>
<p>
The qemu development community has roughly quadrupled in size since then, guesstimating by list traffic and source control commits...<br>
<p>
The current qemu is 0.10.0, released March 4th.  Among other new features, it integrates kvm support in the base qemu.  Just FYI.<br>
<p>
Rob<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/322320/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor323061"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 12, 2009 23:57 UTC (Thu)
                               by <b>efexis</b> (guest, #26355)
                              [<a href="/Articles/323061/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <i>"Xen is not a full hypervisor until it loads the first domain - dom0"</i><br>
<br>
Yes but the domU's can't talk directly to the dom0 without going through the hypervisor code though can they? This means that dom0 doesn't have to be provably secure if the hypervisor is. The hypervisor is acting like a firewall between networks, and the smaller and simpler this bit of code is, the easier it is to reach higher levels of certainty that the system is secure.


      
          <div class="CommentReplyButton">
            <form action="/Articles/323061/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor321833"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 4, 2009 17:38 UTC (Wed)
                               by <b>kev009</b> (guest, #43906)
                              [<a href="/Articles/321833/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Xen is much faster in my experience because everything has been paravirtualized since the beginning.  KVM devs realized that Intel's hardware virt wasn't all it was cracked up to be and now it too runs in hybrid mode when possible.<br>
<p>
Xen is proven, stable, and it works on a lot of hardware that KVM doesn't.  It is used by companies like Linode.com and Slicehost with great success.  Having the latest Dom0 kernel would be a boon to usage and latest kernel features/hw support.<br>
<p>
KVM is great, especially for desktops, but ATM Xen is widely used on servers and shows no sign of reduction.  Please merge!<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/321833/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor321845"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 4, 2009 18:03 UTC (Wed)
                               by <b>amit</b> (subscriber, #1274)
                              [<a href="/Articles/321845/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Xen debuted in 2003 and KVM in 2007. Xen has had a longer time in the market and hence will have a better market share. However, KVM has caught up fast and there are a few companies already using it in production. Of course, Qumranet were one (it's not Red Hat). A quick search throws these two results:<br>
<p>
<a href="http://librehosting.com/tech/">http://librehosting.com/tech/</a><br>
<a href="http://www.ukcloudhosting.co.uk/content/uk-cloud-hosting-providers-0">http://www.ukcloudhosting.co.uk/content/uk-cloud-hosting-...</a><br>
<p>
Red Hat has revealed its virtualisation strategy based on KVM:<br>
<a href="http://www.redhat.com/virtualization-strategy/?intcmp=70160000000HizEAAS">http://www.redhat.com/virtualization-strategy/?intcmp=701...</a><br>
<p>
That goes a long way into saying the kind of efforts that will be put into kvm to make it as stable as possible for deploying into enterprises.<br>
<p>
Fedora and Ubuntu already support KVM as the default hypervisor now.<br>
<p>
That said, however, it's best to merge the Xen code upstream since having it out of tree while there are users out there doesn't seem like a good idea. One of the reasons distros quickly had to move to kvm as the default is because of the pain in maintaining out-of-tree patches and also maintaining different kernel versions just for Xen dom0 support.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/321845/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor321847"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 4, 2009 18:06 UTC (Wed)
                               by <b>amit</b> (subscriber, #1274)
                              [<a href="/Articles/321847/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
typo: I meant Qumranet is *now* Red Hat.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/321847/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor321857"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 4, 2009 18:33 UTC (Wed)
                               by <b>bgilbert</b> (subscriber, #4738)
                              [<a href="/Articles/321857/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      Proven and stable?  You must be using a different Xen than I have.  In my experience, getting Xen to work reliably on a given system is an incredible amount of work, when it's possible at all.  And it mostly involves blind tinkering, since there's often no indication of how or why things are breaking.
      
          <div class="CommentReplyButton">
            <form action="/Articles/321857/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor321894"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 4, 2009 20:48 UTC (Wed)
                               by <b>kev009</b> (guest, #43906)
                              [<a href="/Articles/321894/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Try RHEL or CentOS.  Even better with Xen 3.3.1 from gitco.de.  Google my username and xen for details.<br>
<p>
I am using this a production rack across a few 1st gen Opterons and it is fantastic.  As an aside, VMWare wont do 64bit guests on these CPUs but Xen will.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/321894/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor321976"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 5, 2009 8:27 UTC (Thu)
                               by <b>leighbb</b> (subscriber, #1205)
                              [<a href="/Articles/321976/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I have been using Xen under Debian for a few years now (has it been that long?) and in my experience is is both straightforward to setup and rock solid.<br>
<p>
In the early days I was using unofficial packages, but since Etch everything worked "out of the box".  I have just upgraded to Lenny and so far (touch wood) it remains as robust as ever.<br>
<p>
I have a nice 8GB dual-CPU Opteron server running 64-bit dom0 and domU's.  This box does not support hardware virtualisation, so from my point of view Xen is the only option to get near-native speed and 64-bit guests.<br>
<p>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/321976/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor321881"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 4, 2009 19:39 UTC (Wed)
                               by <b>jmm</b> (subscriber, #34596)
                              [<a href="/Articles/321881/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
An important unique feature of Xen is the availability to virtualise Windows at decent speed and reliability, especially with the presense of the GPLed Windows DomU support drivers.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/321881/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor322022"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 5, 2009 13:56 UTC (Thu)
                               by <b>amit</b> (subscriber, #1274)
                              [<a href="/Articles/322022/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
If you're using Xen to virtualise Windows, it means you have hardware support for virtualisation and you can use KVM.<br>
<p>
KVM has paravirt drivers for Windows (for network; block is coming soon) and Linux (network, block, mmu, clock,...)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/322022/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor321885"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 4, 2009 20:06 UTC (Wed)
                               by <b>ianwoodstock</b> (guest, #56970)
                              [<a href="/Articles/321885/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Looking at the patch posted here <a href="http://lwn.net/Articles/321298/">http://lwn.net/Articles/321298/</a><br>
it's interesting to see the names on there - 2 from Citrix (Ian and Jeremy) and then 4 from Redhat<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/321885/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor321895"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 4, 2009 20:50 UTC (Wed)
                               by <b>kev009</b> (guest, #43906)
                              [<a href="/Articles/321895/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Redhat was leading the charge since Fedora 9 and up lost feature parity with F8 (Dom0 support).  Likely they will move most devs to KVM after the purchase.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/321895/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor321977"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 5, 2009 8:26 UTC (Thu)
                               by <b>kolyshkin</b> (guest, #34342)
                              [<a href="/Articles/321977/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
That is Red Hat invested a lot into making Xen work in RHEL5, I heard they hired a dozen or more engineers to work exclusively on supporting Xen in RHEL5. So they did a lot of work, and now Jeremy tries to merge that in mainstream. I am not sure if Red Hat themselves are currently interested in that.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/321977/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor321953"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 5, 2009 3:53 UTC (Thu)
                               by <b>pabs</b> (subscriber, #43278)
                              [<a href="/Articles/321953/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I seem to remember there was a patch for KVM paravirt, whatever happened to that?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/321953/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor322020"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 5, 2009 13:46 UTC (Thu)
                               by <b>amit</b> (subscriber, #1274)
                              [<a href="/Articles/322020/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
KVM paravirt is already available; see other comments here about virtio<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/322020/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor321971"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 5, 2009 7:40 UTC (Thu)
                               by <b>bangert</b> (subscriber, #28342)
                              [<a href="/Articles/321971/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
one is left with the feeling that most of these observations are true for<br>
the openvz project as well...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/321971/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor321979"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 5, 2009 8:36 UTC (Thu)
                               by <b>kolyshkin</b> (guest, #34342)
                              [<a href="/Articles/321979/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
You mean OpenVZ is like Xen? Then what is like KVM? Do we have any other containers technology in the mainline kernel which is not OpenVZ and which is better than OpenVZ?<br>
<p>
Oh all right, I guess you just said LXC or Linux Containers. So let me explain.<br>
<p>
LXC is not something opposing to OpenVZ (as in KVM vs. Xen). OpenVZ team is one of the top contributors to LXC (I am not sure who's the number one here, it is either IBM or OpenVZ, and it doesn't really matter for me). What we do is we take a feature from OpenVZ patchset, rewrite it for mainstream and submit, when after a few rounds of reviewing and improving it gets merged. Those big container building blocks  PID namespace, and network namespace, and memory controller  are all here due to hard work of OpenVZ guys (with some help of IBM guys).<br>
<p>
Also, currently there's still a lot of work to do for LXC to become more-or-less usable.<br>
<p>
So I am sorry but I don't see any correlation here (aside from the merge early mantra). If you have a different perspective on this please share it with us.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/321979/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor322296"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 7, 2009 11:18 UTC (Sat)
                               by <b>rwmj</b> (subscriber, #5474)
                              [<a href="/Articles/322296/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <p><i>The Xen hypervisor is lightweight, and can be run standalone; the KVM hypervisor is, 
instead, the Linux kernel.</i></p>

<p>
I'm a bit surprised Jonathan allowed Jeremy's comment above to go unremarked.
Sure Xen hypervisor <i>can</i> be lightweight, but that's only because it doesn't
have any device drivers!  Once you add all the device support for Linux, guess what,
you've got the Linux kernel.
Xen is only really useful once you combine the HV and the Dom0 (ie. a full Linux kernel).
There's not even any security advantage since the Dom0 gets full access to the hardware.
</p>


      
          <div class="CommentReplyButton">
            <form action="/Articles/322296/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor322646"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job (security view)</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Mar 10, 2009 18:54 UTC (Tue)
                               by <b>huneycutt</b> (guest, #13037)
                              [<a href="/Articles/322646/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Personal perspective  theres a lot of room for both approaches (KVM and Xen).<br>
<p>
Professional perspective  most of my customers are in the DoD or intelligence communities.  Id like to know which approach is going to get the authoritative backing for pursuing government-strength security certification and accreditation.  I can see arguments for each  multiple KVM partitions running on top of a EAL 4+ version of Linux (RH or HP configuration), or the single Xen hypervisor (reminiscent of a medium assurance version of the Separation Kernel Protection Profile) controlling a single semi-trusted partition (dom0) and a bunch of untrusted partitions (domU).<br>
<p>
Historically, the evaluators much prefer simplicity in the products being evaluated.  The more trivial, the more likely to be certified.  In this view, testing Xen for SKPP-type controls and granting it a level of trustworthiness in controlling both dom0 and domU domains would seem more likely.  Combining an SKPP-type evaluation (for KVM itself) on top of an LSPP/RBAC/etc EAL 4+ evaluation is probably asking too much of anyone  even if the protection profiles used for the RH/HP certifications were still valid.<br>
<p>
Unfortunately, I dont see anyone jumping up and down right now to pay for sponsoring any more NIAP testing, given the state of the common criteria, the pace of virtualization evolution, and the extremely dynamic nature of the certification and accreditation processes themselves.  I know that NSA is pressing ahead with the HAP program, but Id prefer to see the defacto standard solutions come from a purely open source effort, if only to make world-wide secure information sharing achievable.  Id love to hear from anyone with additional information on this topic.<br>
<p>
Also unfortunately, when intellectual properties such as Xen and KVM are acquired by major players in the commercial side of the business (which Citrix and RH undoubtedly qualify as), it is human nature to begin to question the motives of their actions (such as belligerently stonewalling kernel incorporation or providing roadmaps which lean strongly toward a recently acquired product without providing documentation of the technical justification for the new stance).  Trust is very nearly impossible to regain once it has been compromised.  Id strongly recommend to both Citrix and Red Hat that they continue to work together for the good of the overall user community, advance both of their products as openly as possible, and let the users make the decisions about which approach is best based on their experiences.  Otherwise, the open source community is taking a big step toward behaving just like the other folks out there.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/322646/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor335907"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Xen: finishing the job (security view)</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jun 3, 2009 15:39 UTC (Wed)
                               by <b>ceplm</b> (subscriber, #41334)
                              [<a href="/Articles/335907/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Ever heard about SVirt? One of the main reasons why KVM is claimed to be better than Xen, is that it allows reasonable ONE SELinux policy for virtual machines.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/335907/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2009, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
