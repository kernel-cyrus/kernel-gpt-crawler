        <!DOCTYPE html>
        <html lang="en">
        <head><title>File creation times [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/397442/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/396997/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/397442/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>File creation times</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>This article brought to you by LWN subscribers</b>
<p>
Subscribers to LWN.net made this article &mdash; and everything that
       surrounds it &mdash; possible.  If you appreciate our content, please
       <a href="/Promo/nst-nag3/subscribe">buy a subscription</a> and make the next
       set of articles possible.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>July 26, 2010</br>
           </div>
Linux systems, like the Unix systems that came before, maintain three
different timestamps for each file.  The semantics of those timestamps are
often surprising to users, though, and they don't provide the information
that users often want to know.  The possible addition of a new system call
is giving kernel developers the opportunity to make some changes in this
area, but there is not, yet, a consensus on how that should be done.
<p>

The Unix file timestamps, as long-since enshrined by POSIX, are called
"atime," "ctime," and "mtime."  The atime stamp is meant to record the last
time that the file was accessed.  This information is almost never used,
though, and can be quite expensive to maintain; Ingo Molnar once <a
href="http://lwn.net/Articles/244830/">called atime</a> "<q>perhaps the
most stupid Unix design idea of all times</q>".  So atime is often
disabled on contemporary systems or, at least, rolled back to the
infrequently-updated "relatime" mode.  Mtime, instead, makes a certain
amount of sense; it tells the user when the file was last modified.  Modification
requires writing to the file anyway, so updating this time is often free,
and the information is often useful.
<p>

That leaves ctime, which is a bit of a strange beast.  Users who do not
look deeply are likely to interpret ctime as "creation time," but that is
not what is stored there; ctime, instead, is updated whenever a file's
metadata is changed.  The main consumer of this information, apparently, is
the venerable <tt>dump</tt> utility, which likes to know that a file's
metadata has changed (so that information must be saved in an incremental
backup), but the file data itself has not and need not be saved again.  The
number of <tt>dump</tt> users has certainly fallen over the years, to the
point that the biggest role played by ctime is, arguably, confusing users
who really just want a
file's creation time.
<p>

So where do users find the creation time?  They don't: Linux systems do not
store that time and provide no interface for applications to access it.
<p>

That situation could change, though.  Some newer filesystems (Btrfs and
ext4, for 
example) have been designed with space for file creation times.  Other
operating systems also provide this information, and some network
filesystem protocols expect to have access to it.  So it would be nice if
Linux properly supported file creation times; the proposed addition of <a
href="http://lwn.net/Articles/394298/">the <tt>xstat()</tt> system
call</a> would be the ideal time to make that change.
<p>
Current <tt>xstat()</tt> implementations do, in fact, add a
<tt>st_btime</tt> field to <tt>struct&nbsp;xstat</tt>; the "<tt>b</tt>"
stands for "birth," which is a convention established in the BSD camp.
There has been a fair amount of discussion about that addition, though,
based on naming and semantics.
<p>
The naming issue, one would think, would be relatively straightforward.  It
was <a href="/Articles/397444/">pointed out</a>, though, that other names
have been used in the kernel.  JFS and Btrfs use "otime," for some reason,
while ext4 uses "crtime."  And BSD, it turns out, uses "birthtime" instead
of "btime."  That discussion inspired Linus to <a
href="/Articles/397445/">exclaim</a>:
<p>
<div class="BigQuote">
	Oh wow. And all of this just convinces me that we should _not_ do
	any of this, since clearly it's all totally useless and people
	can't even agree on a name.
</div>
<p>
After that, though, Linus looked a bit more deeply at the problem, which he
saw as primarily being to provide a Windows-style creation time that Samba
could use.  It turns out that Windows allows the creation time to be
modified, so Linus
<a href="/Articles/397446/">saw it</a> as being a sort of variation on the
Unix ctime notion.  That led to a suggestion to change the semantics of
ctime to better suit the Windows case.  After all, almost nobody uses ctime
anyway, and it would be a trivial change to make ctime look like the
Windows creation time.  This behavior could be specified either as a
per-process flag or a mount-time option; then there would be no need to add
a new time field.
<p>
This idea was not wildly popular, though; Jeremy Allison <a
href="/Articles/397448/">said</a> it would lead to "<q>more horrible
confusion</q>".  If ctime could mean different things in different
situations, even fewer people would really understand it, and tools like
Samba could not count on its semantics.  Jeremy would rather just see the
new field added; that seems like the way things will probably go.
<p>
There is one last interesting question, though: should the kernel allow the
creation time to be modified?  Windows does allow modification, and some
applications evidently depend on that feature.  Windows also apparently has
<a href="/Articles/397449/">a hack</a> which, if a file is deleted and
replaced by another with the same name, will reuse the older file's
creation time.  BSD systems, instead, do not allow the creation time to be
changed.  When Samba is serving files from a BSD system, it stores the
"Windows creation time" in an extended attribute so that the usual Windows
semantics can be provided.
<p>
If the current <tt>xstat()</tt> patch is merged, Linux will disallow
changes to the creation time by default - there will be no system call
which can make that change.  Providing that capability would require an
extended version of <tt>utimes()</tt> which can accept the additional
information.  Allowing the time to be changed would make it less reliable,
but it would also be useful for backup/restore programs which want to
restore the original creation time.  That is a discussion which has not
happened yet, though; for now, creation times cannot be changed.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Filesystems-Access-time_tracking">Filesystems/Access-time tracking</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/397442/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor397765"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Cygwin too!</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 29, 2010 2:15 UTC (Thu)
                               by <b>quotemstr</b> (subscriber, #45331)
                              [<a href="/Articles/397765/">Link</a>] 
      </p>
      
      </div>
      </summary>
      stat is particularly painful under Cygwin; collecting the information necessary to emulate the various parts of struct stat(and especially interpreting the NT ACL and simulating permission bits) takes a while, and most of that effort is wasted when applications use only a few fields of the result.
<p>
I've been wondering for a little now how much effort it'd be to implement something like xstat() for Cygwin. (Mostly to scratch the itching caused by slow directory listings.) I might as well implement the same interface Linux will have; the Windows file attribute bits would be in the extra stats. Cygwin would benefit a lot more from xstat than any native system would.
<p>
The main problem isn't implementing the system call, however, but patching programs all over the place to use it. It'd be hard to get a Cygwin-specific patch upstream. But hopefully, with two implementations, it'd be easy to get those changes merged.

      
          <div class="CommentReplyButton">
            <form action="/Articles/397765/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor397780"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">File creation times</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 29, 2010 3:09 UTC (Thu)
                               by <b>ctpm</b> (guest, #35884)
                              [<a href="/Articles/397780/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
"After all, almost nobody uses ctime anyway"<br>
<p>
 Well that's not quite true. Unless you discount Tar as a seldom used, almost unknown obscure application.<br>
<p>
 The fact is that, generally, a program that relies on tar (for example, Amanda) to create incremental dumps should be able to get a proper ctime for each file. See the "-g" option on the GNU Tar manpage.<br>
<p>
 There might be other tools that depend on current ctime behaviour. Somehow I don't think that breaking people's backups is the way to go, so a separate field seems rather wiser.<br>
<p>
Regards<br>
<p>
Cl√°udio<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/397780/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor398007"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">File creation times</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 29, 2010 22:00 UTC (Thu)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/398007/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
And dar. And rdiff-backup. And probably amanda and every other backup program on earth capable of incremental backups. (I haven't found any but dump(8) that can avoid backing up the data if only the metadata has changed. That's a clever trick that should be emulated, I think, and I never thought I'd say that about *anything* dump(8) did...)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/398007/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor397794"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">ctime</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 29, 2010 4:04 UTC (Thu)
                               by <b>markh</b> (subscriber, #33984)
                              [<a href="/Articles/397794/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
ctime is actually very useful, as it is currently the only somewhat reliable way to determine that something has changed (by checking whether ctime or mtime has been updated).  For some reason when people copy files from other places they like to also copy the last modification time.  Fortunately that will set the ctime to the current time and they cannot alter that.  So when something breaks and I want to find what changed I can at least search for recent ctime or mtime.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/397794/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor398029"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">ctime</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 29, 2010 23:46 UTC (Thu)
                               by <b>giraffedata</b> (guest, #1954)
                              [<a href="/Articles/398029/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <blockquote>
The provision I quoted applies to end users. It also prohibits distribution of those adaptations:
</blockquote>
<p>
OK, I'll bite.  The reason is that they use the modification time as a version indication of the content of the file, not of the file per se.  I found that I most often want mtime to be the former, so many years ago I changed "cp" to an alias that preserves mtime, and I have been much happier since.  I use mtimes in manual processes a lot.
<p>
Of course, I get bitten the reverse way sometimes.

      
          <div class="CommentReplyButton">
            <form action="/Articles/398029/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor398049"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">ctime</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 30, 2010 0:45 UTC (Fri)
                               by <b>markh</b> (subscriber, #33984)
                              [<a href="/Articles/398049/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I have no problem with people using mtime this way, as long as there is some other way to determine that some change was made.  ctime satisfies that nicely.  I am just concerned that Linus of all people would suggest that ctime is not useful and would be so quick to suggest that it be repurposed.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/398049/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor397801"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">File creation times</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 29, 2010 4:50 UTC (Thu)
                               by <b>magfr</b> (subscriber, #16052)
                              [<a href="/Articles/397801/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Another question is if the btime relates to the creation time of the file or of the link to the file?<br>
<p>
Consider<br>
touch f1<br>
ln f1 f2<br>
Is btime(f1) == btime(f2)?<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/397801/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor397836"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">File creation times</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 29, 2010 8:09 UTC (Thu)
                               by <b>eugeniy</b> (guest, #24280)
                              [<a href="/Articles/397836/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Well, the metadata is stored in inode, and those links point to the same inode. So the answer is yes.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/397836/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor397829"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">File creation times</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 29, 2010 7:34 UTC (Thu)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/397829/">Link</a>] (7 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
if a file gets larger so that another block needs to be allocated, doesn't this change the metadata for the file?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/397829/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor397847"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">File creation times</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 29, 2010 9:18 UTC (Thu)
                               by <b>saffroy</b> (guest, #43999)
                              [<a href="/Articles/397847/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Any change to file data will require updating mtime, which is metadata, hence ctime will be updated too. If you enlarge the file with truncate() without touching its content, you still change the file length, again a metadata.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/397847/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor397853"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">File creation times</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 29, 2010 9:48 UTC (Thu)
                               by <b>fperrin</b> (guest, #61941)
                              [<a href="/Articles/397853/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Any change to file data will require updating mtime, which is metadata, hence ctime will be updated too.</font><br>
<p>
Does this mean that ctime is always more recent than mtime ?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/397853/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor397857"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">File creation times</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 29, 2010 10:01 UTC (Thu)
                               by <b>Mog</b> (subscriber, #29529)
                              [<a href="/Articles/397857/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Does this mean that ctime is always more recent than mtime ?</font><br>
<p>
Since mtime can be set to any value (using touch for example), not always.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/397857/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor397925"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">File creation times</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 29, 2010 17:10 UTC (Thu)
                               by <b>docwhat</b> (guest, #40373)
                              [<a href="/Articles/397925/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      I had to try it for myself...

<pre>
$ mkdir -p /tmp/tmp.e0EkZhvZQR
$ touch /tmp/tmp.e0EkZhvZQR/somefile
$ stat /tmp/tmp.e0EkZhvZQR/somefile
  File: `/tmp/tmp.e0EkZhvZQR/somefile'
  Size: 0         	Blocks: 0          IO Block: 4096   regular empty file
Device: 801h/2049d	Inode: 2760536     Links: 1
Access: (0644/-rw-r--r--)  Uid: ( 1000/  holtje)   Gid: ( 1000/  holtje)
Access: 2010-07-29 13:09:14.990815140 -0400
Modify: 2010-07-29 13:09:14.990815140 -0400
Change: 2010-07-29 13:09:14.990815140 -0400
$ touch -m -d 2110-01-01 /tmp/tmp.e0EkZhvZQR/somefile
$ stat /tmp/tmp.e0EkZhvZQR/somefile
  File: `/tmp/tmp.e0EkZhvZQR/somefile'
  Size: 0         	Blocks: 0          IO Block: 4096   regular empty file
Device: 801h/2049d	Inode: 2760536     Links: 1
Access: (0644/-rw-r--r--)  Uid: ( 1000/  holtje)   Gid: ( 1000/  holtje)
Access: 2010-07-29 13:09:14.990815140 -0400
Modify: 2110-01-01 00:00:00.000000000 -0500
Change: 2010-07-29 13:09:14.990815140 -0400
</pre>

Yup!
      
          <div class="CommentReplyButton">
            <form action="/Articles/397925/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor398031"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">File creation times</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 29, 2010 23:45 UTC (Thu)
                               by <b>jzbiciak</b> (guest, #5246)
                              [<a href="/Articles/398031/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
So how come ctime did *not* change?  The metadata (ie. mtime) changed.  I'm willing to believe that mtime is *not* in the set of metadata that ctime represents.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/398031/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor398042"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">File creation times</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 30, 2010 0:13 UTC (Fri)
                               by <b>docwhat</b> (guest, #40373)
                              [<a href="/Articles/398042/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      It happened too fast. I'm using a script. Here it is with a sleep.
<pre>
$ mkdir -p /tmp/tmp.RZFIqs7625
$ touch /tmp/tmp.RZFIqs7625/somefile
$ stat /tmp/tmp.RZFIqs7625/somefile
  File: `/tmp/tmp.RZFIqs7625/somefile'
  Size: 0               Blocks: 0          IO Block: 4096   regular empty file
Device: ca02h/51714d    Inode: 1622396     Links: 1
Access: (0644/-rw-r--r--)  Uid: ( 1002/ docwhat)   Gid: ( 1002/ docwhat)
Access: 2010-07-29 19:50:55.000000000 -0400
Modify: 2010-07-29 19:50:55.000000000 -0400
Change: 2010-07-29 19:50:55.000000000 -0400
$ sleep 2
$ touch -m -d 2110-01-01 /tmp/tmp.RZFIqs7625/somefile
$ stat /tmp/tmp.RZFIqs7625/somefile
  File: `/tmp/tmp.RZFIqs7625/somefile'
  Size: 0               Blocks: 0          IO Block: 4096   regular empty file
Device: ca02h/51714d    Inode: 1622396     Links: 1
Access: (0644/-rw-r--r--)  Uid: ( 1002/ docwhat)   Gid: ( 1002/ docwhat)
Access: 2010-07-29 19:50:55.000000000 -0400
Modify: 2110-01-01 00:00:00.000000000 -0500
Change: 2010-07-29 19:50:57.000000000 -0400
</pre>

The script I used:
<pre>
#!/bin/bash

set -x

mkdir -p /tmp/tmp.e0EkZhvZQR
touch /tmp/tmp.e0EkZhvZQR/somefile
stat /tmp/tmp.e0EkZhvZQR/somefile
sleep 2
touch -m -d 2110-01-01 /tmp/tmp.e0EkZhvZQR/somefile
stat /tmp/tmp.e0EkZhvZQR/somefile
</pre>

Here's how I ran it:
<pre>
$ /tmp/foo.sh |&amp; perl -p -e 's@^\+@\$@'
</pre>

I just cut-and-pasted the middle of the output.

<p>

Ciao!
      
          <div class="CommentReplyButton">
            <form action="/Articles/398042/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor398117"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">File creation times</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 30, 2010 13:49 UTC (Fri)
                               by <b>jzbiciak</b> (guest, #5246)
                              [<a href="/Articles/398117/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Ah, ok.  Mystery solved!<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/398117/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor397876"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rsync?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 29, 2010 12:26 UTC (Thu)
                               by <b>NRArnot</b> (subscriber, #3033)
                              [<a href="/Articles/397876/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Doesn't rsync by default use ctime to decide whether it needs to compare file checksums?<br>
<p>
If so it's hardly little-used. <br>
<p>
And if changing the file's metadata did not update its ctime, then wouldn't that subtly break scrips that create remote backups or mirrors of filesystems using rsync? Rsync would then have to compare all metadata, or at least a checksum of all the relevant metadata. Does this cause a lot of extra I/O, or is it not significantly costlier to fetch all metadata compared to fetching just ctime?<br>
 <br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/397876/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor397926"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Rsync?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 29, 2010 17:13 UTC (Thu)
                               by <b>docwhat</b> (guest, #40373)
                              [<a href="/Articles/397926/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The man page says it uses "either a changed size or a changed last-modified time".<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/397926/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor397960"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">File creation times</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 29, 2010 19:04 UTC (Thu)
                               by <b>butlerm</b> (subscriber, #13312)
                              [<a href="/Articles/397960/">Link</a>] (9 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Creation times are a great idea. The idea that a creation time should not be changeable is an extraordinarily bad one.  Backup software, copy commands with the preserve attribute option specified, and any application that does file replacement with a write / fsync / rename sequence need that ability.  Otherwise it is borderline useless, telling you something much more akin to the time of last modification than when the file was created.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/397960/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor397965"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">File creation times</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 29, 2010 19:31 UTC (Thu)
                               by <b>hppnq</b> (guest, #14462)
                              [<a href="/Articles/397965/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <em><blockquote>The idea that a creation time should not be changeable is an extraordinarily bad one.</blockquote></em>
<p>
Not really. It allows you to easily verify whether a file has been tempered with by an attacker. 
      
          <div class="CommentReplyButton">
            <form action="/Articles/397965/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor397988"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">File creation times</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 29, 2010 20:45 UTC (Thu)
                               by <b>sync</b> (guest, #39669)
                              [<a href="/Articles/397988/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
No. When the attacker overwrites (not replace) the file the creation time doesn't change.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/397988/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor397996"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">File creation times</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 29, 2010 21:10 UTC (Thu)
                               by <b>tialaramex</b> (subscriber, #21167)
                              [<a href="/Articles/397996/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Worse, the attacker is not obliged to obey your conventions.<br>
<p>
Just because _you_ don't want to change the create time, doesn't prevent the attacker from doing so. "Oh," you say "but there will be no syscall". Again, this is a problem for you, the legitimate user, but not for the attacker, he can just force the relevant blocks out to disk, scribble on the raw disk, and let them be read back in again - voila!<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/397996/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor398075"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">File creation times</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 30, 2010 7:14 UTC (Fri)
                               by <b>hppnq</b> (guest, #14462)
                              [<a href="/Articles/398075/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      It's quite likely that you can't use ctime to verify that a file has NOT been tempered with. If someone is able to scribble something poetic on a raw device, it makes no sense to worry about the ctime on /bin/ls. This should not be trivial for an attacker, of course.
<p>
But obviously, if a ctime <em>has</em> changed unexpectedly, there's no doubt someone messed with the file, or the kernel.

      
          <div class="CommentReplyButton">
            <form action="/Articles/398075/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor398101"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">File creation times</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 30, 2010 11:50 UTC (Fri)
                               by <b>sync</b> (guest, #39669)
                              [<a href="/Articles/398101/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Now you are talking about change time (ctime) not creation time.<br>
<p>
And ctime changes doesn't means that someone messed the file. There are a lot of false positives:<br>
selinux relables the file<br>
backup program resets atime<br>
...<br>
<p>
And of course ctime should not be user changeable. But not for security reasons.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/398101/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor398138"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">File creation times</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jul 30, 2010 16:49 UTC (Fri)
                               by <b>hppnq</b> (guest, #14462)
                              [<a href="/Articles/398138/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <em><blockquote>Now you are talking about change time (ctime) not creation time.</blockquote></em>
<p>
Ah, I assumed indeed that the original comment was about ctime. I was never talking about creation time. Sorry for the confusion.
<p>
 <em><blockquote>And ctime changes doesn't means that someone messed the file.</blockquote></em>
<p>
Of course not. 
<p>
<em><blockquote>And of course ctime should not be user changeable. But not for security reasons.</blockquote></em>
<p>
Look up some real-world examples of intrusions and how they were detected, or delve deeper into forensic discovery with The Coroner's Toolkit or its successor <a href="http://www.sleuthkit.org/index.php">The Sleuth Kit</a>. Fascinating stuff.
      
          <div class="CommentReplyButton">
            <form action="/Articles/398138/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor399191"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">File creation times</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Aug 9, 2010 11:41 UTC (Mon)
                               by <b>dgm</b> (subscriber, #49227)
                              [<a href="/Articles/399191/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Also creation times may come from outside. For example, I would love to be able to list all my pictures in a directory by the time I created (shoot) them. That would be impossible without the ability to modify the creation time, because it would not be the time provided by the camera, but the one stamped by the kernel when the pictures were copied from it, which is far less useful for me.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/399191/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor407563"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">File creation times</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 29, 2010 13:36 UTC (Wed)
                               by <b>misiu_mp</b> (guest, #41936)
                              [<a href="/Articles/407563/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Photo creation time is usually written in the exif data. I dont know if the camera can be trusted with setting file creation time for the files on the sdcard correctly. Not to mention they are stored on a removable fat system which means they could be modified by multitude systems with other oses.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/407563/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor407588"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">File creation times</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 29, 2010 16:43 UTC (Wed)
                               by <b>bronson</b> (subscriber, #4806)
                              [<a href="/Articles/407588/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Most cameras that I've seen (especially idiot boxes) can't be trusted to have their clocks set to the current month, much less the correct time zone.<br>
<p>
There's a photographer that I know who often cares about the exact time a picture was taken (professional building shots, relying on sun angles).  He first takes a picture of his GPS so, if things look weird, he can figure out the correction.<br>
<p>
Anyhow point is, unless the camera is running NTP or a GPS receiver, I wouldn't put much weight in EXIF data!<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/407588/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor407562"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">File creation times - choose it at the moment of creation</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 29, 2010 13:19 UTC (Wed)
                               by <b>misiu_mp</b> (guest, #41936)
                              [<a href="/Articles/407562/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
"Allowing the time to be changed would make it less reliable, but it would also be useful for backup/restore programs which want to restore the original creation time."<br>
<p>
How about making it possible to choose the creation time at the moment of creation? This way backups could be restored with creation time intact and no mess caused by changing the creation time of existing files.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/407562/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2010, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
