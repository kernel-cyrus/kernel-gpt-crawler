        <!DOCTYPE html>
        <html lang="en">
        <head><title>Next steps for Rust in the kernel [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/908347/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/908081/">Return to the Front page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/908347/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>Next steps for Rust in the kernel</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Did you know...?</b>
<p>
LWN.net is a subscriber-supported publication; we rely on subscribers
       to keep the entire operation going.  Please help out by <a
       href="/Promo/nst-nag4/subscribe">buying a subscription</a> and keeping LWN on the
       net.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>September 19, 2022</br>
           <hr>
<a href="/Articles/908320/">Maintainers Summit</a>
</div>
The Rust for Linux project, which is working to make it possible to write
kernel code in the Rust
programming language, has been underway for a few years, and there is a
growing number of developers who feel that it is time to merge this work into
the mainline.  At the 2022 Linux Kernel Maintainers Summit, Miguel Ojeda
updated the group on the status of the project with the goal of reaching a
conclusion on when this merge might happen.  The answer that came back was
clear enough: Rust in the kernel will be happening soon indeed.
<p>
There was little suspense on that front; Linus Torvalds spoke up
at the beginning of the session to say that he plans to accept the Rust
patches for the 6.1 kernel (likely to be released in mid-December) unless
he hears strong objections.  Ojeda
indicated that he would like to see that happen and asked how the patches
should 
be routed into the mainline.  Torvalds said that he would rather not accept
them directly, so it seems likely that Kees Cook will be routing
this work upstream.
<p>
<a href="/Articles/908359/"><img
src="https://static.lwn.net/images/conf/2022/lpc/MiguelOjeda-sm.png" alt="[Miguel Ojeda]"
title="Miguel Ojeda" class="rthumb"></a>

Dave Airlie said that there are MacBook driver developers who are intent on
doing their work in Rust, so there will likely be real Rust drivers heading
upstream before too long.  Initially, though, Torvalds said that he would
like to see a minimal merge just to get the infrastructure into the kernel
and allow developers to start playing with it.  It should build, but
shouldn't do much of anything beyond the "hello, world" stage.  That, he
said, will be a signal to the world that "it's finally happening".
<p>
Greg Kroah-Hartman asked how subsystem-specific Rust bindings will go
upstream; will they go through the Rust tree or via the relevant subsystem
maintainers?  Ojeda answered that core Rust support will go through the
Rust tree, but the rest should go through maintainers.  Alexei Starovoitov
worried that subsystem maintainers would not be able to refuse Rust patches
even if they do not want to see Rust used in their subsystems; James
Bottomley added that Rust can be a hard language for longtime C developers
to understand, and that it would not be good to force it on maintainers.
Torvalds answered that it should be up to the maintainers; there is no need
for global rules at this point.
<p>
Paolo Bonzini said that the Rust code implementing abstractions for
subsystems is often the most unreadable for developers who are unfamiliar
with the language, "but it's stupid code" that is not doing anything
complex.  Driver-level Rust code is a lot more straightforward.  Torvalds
repeated that, for now, maintainers will be able to say that they don't
want to deal with Rust.  Starovoitov countered, though, that BPF will be
affected regardless of what he might decide; developers will need to be
able to trace Rust
code to debug problems.  Everybody will need to know Rust eventually, he
added.  Torvalds replied that he expects that process to take years.
<p>
Cook said that this change will be similar to many of the C language
changes that the kernel has gone through.  The switch away from
variable-length arrays was a similar process, and developers have gotten
used to it.  Torvalds said that it's closer to the introduction of BPF
instead; it's a new language that was initially targeted at specific use
cases, but which is now everywhere.
<p>
Ted Ts'o noted that the kernel has to use unstable Rust features, and that
creates uncertainty about which version of the language should be used.
Perhaps the
developers should declare a specific version of the compiler as the one to
use for kernel development?  That would encourage distributors to package
that version, making it more widely available.  Thomas Gleixner said
that having
the blessed compiler available on kernel.org would be good enough, but
Torvalds answered that he would rather get compilers from his distributor
if possible.  Bottomley asked when Rust would become mandatory to build the
kernel; the answer was "when the hardware he has requires it".  Torvalds
said that, if and when that point comes, it will be an indication that Rust
is a success for kernel development.
<p>
Gleixner asked about how well specified the Rust language is now; Ojeda
answered that it depends on what one is looking for.  Rust guarantees
backward compatibility for stable features, so those will not break in
surprising ways.  The kernel, though, is using a number of <i>unstable</i>
features; those features are, unsurprisingly, unstable.  Work is being done to
stabilize those features so that the kernel will be able to count on them
going forward.
<p>
There is currently an ongoing effort to write a
specification for Rust for safety-critical systems that will lead to a
standard-like document.
At the moment, though, Ojeda said, the developers of the GCC-based gccrs
Rust compiler are finding the current documentation to be vague at times.
Often, behavior is specified as "whatever the rustc compiler does".  That
is "not good", he said, but there is a path forward.
<p>
Gleixner also inquired into the tools that are generating the Rust bindings
and, specifically, whether there is automation to ensure that the Rust and
C versions of data structures match each other.  Those tools do exist,
Ojeda said, but they do not yet automatically convert all types
successfully.  That can be fixed.
<p>
Finally, Gleixner admonished the Rust developers to not change the
semantics of any C locking primitives; it's worth noting that they have
shown no 
inclination to do that so far.  Ts'o added that Rust's locking abstractions
should be
made to work with the lockdep locking checker from the beginning.  Chris
Mason interjected that, if lockdep is needed for Rust code, that will be
another sign that the language has succeeded and it will be time to "do a
victory dance".
<p>
It has often been said that the merging of Rust into the kernel tree will
be done on an experimental basis; if it doesn't work out, it can be removed
again.  Ojeda said that the developers working on Rust for Linux would like
to know how long the trial period is likely to be.  He did not really get
an answer from the group, though.
<p>
Instead, Bottomley suggested that, rather than bringing in Rust, it might
be better to just move more Rust-like features into C.  Ojeda said that he
has actually been working with the C language committee to push for that to
happen, but any such change will take a long time if it happens at all.
Christoph Hellwig said that this sort of change will have to happen anyway
unless the plan is to rewrite the whole kernel in Rust; he was not pleased
at the idea of rewriting working code in a new language.  Perhaps the
<a href="/Articles/689907/">sparse</a> static analyzer could be enhanced to
do more Rust-like checking, he 
said.  Ojeda answered that the result of such efforts would be like having
Rust — but much later.
<p>
Hellwig continued that the adoption of Rust-like features could be done
incrementally over time.  It would be "strictly worse than starting in
Rust", but the kernel community has a massive code base to manage.  There
needs to be a way to get the benefits of a Rust-like language into all of that
C code, he said.  Cook said he's been pushing compiler developers to create
safer C dialects as well.
<p>
Ts'o brought the session to a conclusion by noting that language design is
a long-term research project; perhaps the group should focus on policy
issues for the next year instead.  Torvalds said that he would like to see
the groups running continuous-integration testing services to incorporate
Rust testing — something that is already happening.  Laurent Pinchart said
that the Rust developers need to be ready to provide support to the kernel
community in the early days; developers will pick things up quickly and be
able to help each other after a while.  Torvalds added that Rust isn't that
terrible in the end; "it's not Perl".
<p>
When asked about documentation, Ojeda said that the Rust developers are
trying to improve on the documentation that has been done on the C side.
The Rust documentation mechanism makes it easy to ensure that examples are
actually tested, for example.  They are adhering to rules on how unsafe
blocks should be explained.
<p>
As time ran out, Matthew Wilcox asked whether kernel developers should be
writing idiomatic Rust code, or whether they will be writing "C in Rust".
Ojeda answered that code might be more C-like toward the beginning;
adoption of more advanced features (such as async) might take longer.
Gleixner asked what could be done to prevent developers from using unstable
features (once the features used by the kernel are stabilized); the answer
was to specify the version of the compiler to be used with kernel
development.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Development_tools-Rust">Development tools/Rust</a></td></tr>
            <tr><td><a href="/Archives/ConferenceIndex/">Conference</a></td><td><a href="/Archives/ConferenceIndex/#Kernel_Maintainers_Summit-2022">Kernel Maintainers Summit/2022</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/908347/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor908716"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Next steps for Rust in the kernel</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 20, 2022 1:38 UTC (Tue)
                               by <b>jhoblitt</b> (subscriber, #77733)
                              [<a href="/Articles/908716/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
People who live in C houses shouldn&#x27;t (void)stones.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/908716/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor908822"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Next steps for Rust in the kernel</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 20, 2022 22:28 UTC (Tue)
                               by <b>mirabilos</b> (subscriber, #84359)
                              [<a href="/Articles/908822/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
This is an unportable catastrophe…<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/908822/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor908898"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Next steps for Rust in the kernel</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 21, 2022 14:11 UTC (Wed)
                               by <b>Tuna-Fish</b> (guest, #61751)
                              [<a href="/Articles/908898/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
How? By the time Rust will be used for anything other than toy drivers, Rust-GCC should be done, so Linux with Rust will compile anywhere that Linux without Rust can.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/908898/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor908835"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Next steps for Rust in the kernel</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 21, 2022 5:56 UTC (Wed)
                               by <b>taladar</b> (subscriber, #68407)
                              [<a href="/Articles/908835/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
What is it with all those people who don&#x27;t understand that many (especially safety) features can not be retrofitted into established languages while maintaining backwards compatibility?<br>
<p>
Either you end up with something that accepts all existing programs (maintains backwards compatibility) or with something that rejects the existing programs that do unsafe things, both isn&#x27;t possible at the same time.<br>
<p>
Of course the desire to keep the old code around is also at odds with significantly improving it. If you have a language with significantly improved idioms and safety features (e.g. Rust&#x27;s Result instead of inline error codes) you would still have to deal with the fact that 99% of your code is written to not take advantage of them. And if you have to rewrite all your code anyway, why not rewrite it in a safer new language?<br>
<p>
In my experience two languages that are very similar (e.g. C and C+retrofitted safety features) are much harder to keep apart in your head too than two languages that are significantly different.<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/908835/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor908839"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Next steps for Rust in the kernel</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 21, 2022 6:51 UTC (Wed)
                               by <b>pbonzini</b> (subscriber, #60935)
                              [<a href="/Articles/908839/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The idea was to start with very simple stuff like forcing manual conversion of integer types and explicitly noting in the prototypes which  pointer arguments that are can escape the called functions. Both would have to be per-file opt-ins, of course.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/908839/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor908859"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Next steps for Rust in the kernel</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 21, 2022 13:30 UTC (Wed)
                               by <b>khim</b> (subscriber, #9252)
                              [<a href="/Articles/908859/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <font class="QuotedText">&gt; Both would have to be per-file opt-ins, of course.</font>

<p>Except it's not really possible. Think something like <a href="https://en.cppreference.com/w/cpp/memory/align">std::align</a>: if such low-level functions are not properly marked that all these “escape analysis” quickly turns into farce.</p>

<p>In theory it should be possible to keep “new, clean code” and “old, dirty, code” clearly separated and then slowly rewrite things, but if you consider how long it takes to, e.g., <a href="https://lwn.net/Articles/905777/">remove strlcpy</a>… it doesn't look feasible at all.</p>


      
          <div class="CommentReplyButton">
            <form action="/Articles/908859/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor908849"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Next steps for Rust in the kernel</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 21, 2022 9:03 UTC (Wed)
                               by <b>linusw</b> (subscriber, #40300)
                              [<a href="/Articles/908849/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
As I was rambling on in my own little bubble over at the kernelorg blog about Rust, I came to the conclusion that what we are doing with Rust is to increase the abstraction of the language, not just making it more safe, but abstraction does bring safety. But since this point has been stressed since 1968 there is a reason why C has prevailed, and it is exactly the (casting) and general ability to act like a big macro assembler. Doing C safe would mean to remove exactly these features and thereby remove the appeal of C. (This is not really my opinion, but extrapolated from Niklaus Wirth.)<br>
<a href="https://people.kernel.org/linusw/rust-in-perspective">https://people.kernel.org/linusw/rust-in-perspective</a><br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/908849/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor908852"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Next steps for Rust in the kernel</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 21, 2022 10:52 UTC (Wed)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/908852/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
This is the classic Pascal / Modula dichotomy.<br>
<p>
If you try and enforce correctness, the language becomes unusable. Especially if you try and enforce the *wrong* mathematical model (Which is why I rail against SQL and relational - imnsho they&#x27;ve picked the wrong model, sets instead of lists ...). (Correctness is a property of a mathematical model, not of the scientific &quot;does it actually work in the real world.)<br>
<p>
C just doesn&#x27;t have a model. C++ appears to try and impose a model on top of C.<br>
<p>
Where Rust appears to score is that like Modula-2, it has a &quot;strict model with escape hatches&quot;. So like C you can do anything, but the language makes it absolutely clear that you are gambling with whether it will work ...<br>
<p>
And the problem with C is that the gcc guys are apparently trying to enforce a model that does not mesh with the way the kernel works, hence all these &quot;escape hatch&quot; flags, and maybe why some kernel guys are keen to try Rust. Modula-2 was before its time ... :-)<br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/908852/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor908854"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Next steps for Rust in the kernel</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 21, 2022 13:03 UTC (Wed)
                               by <b>oxidizer</b> (guest, #161043)
                              [<a href="/Articles/908854/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Good comments about C, however Rust doesn&#x27;t have an issue here.<br>
<p>
The &quot;unsafe&quot; keyword allows unrestricted liberties, including inline assembly. Interestingly, &quot;unsafe&quot; can also be read as &quot;trusted&quot;. Safe Rust doesn&#x27;t trust, it verifies.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/908854/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor908860"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Next steps for Rust in the kernel</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 21, 2022 13:21 UTC (Wed)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/908860/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; The &quot;unsafe&quot; keyword allows unrestricted liberties, including inline assembly. Interestingly, &quot;unsafe&quot; can also be read as &quot;trusted&quot;. Safe Rust doesn&#x27;t trust, it verifies.</font><br>
<p>
Hmmm, that&#x27;s a VERY interesting take ...<br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/908860/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor908894"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Next steps for Rust in the kernel</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 21, 2022 13:40 UTC (Wed)
                               by <b>khim</b> (subscriber, #9252)
                              [<a href="/Articles/908894/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <p>So very true. Unsafe Rust forms <a href="https://en.wikipedia.org/wiki/Trusted_computing_base">TCB</a> which “normal” safe Rust uses to implement “business logic”.</p>

<p>But <code>unsafe</code> keyword is better. I worked on a codebase which was similarly separated into “trusted” and “untrusted” components.</p>

<p>And newcomers invariably tried to add stuff to the “trusted” side! I guess logic was: it's “trusted”, thus it's obviously “better”.</p>

<p>But <code>unsafe</code> just doesn't feel like that. People know you can add <code>unsafe</code> code, but the name itself prompts them to be careful.</p>


      
          <div class="CommentReplyButton">
            <form action="/Articles/908894/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor908944"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Next steps for Rust in the kernel</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Sep 21, 2022 23:10 UTC (Wed)
                               by <b>tialaramex</b> (subscriber, #21167)
                              [<a href="/Articles/908944/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Crucial in Rust culture is also writing safety rationales. Here&#x27;s a nice succinct one from the implementation of alloc::vec::Vec<br>
<p>
// SAFETY: After filling holes, all items are in contiguous memory.<br>
<p>
These should live next to unsafe { /* ... */ } blocks, the compiler can&#x27;t read your safety rationale, but a human can, and it can really help distinguish between cases where you&#x27;re an idiot and this code, though it looked wrong to you, is correct; and cases where you&#x27;re a genius, and this code even though it looked right to its author is actually wrong and needs fixing. If the safety rationale makes a claim that is false, that&#x27;s a problem. At the least, we need a patch to the rationale. But, maybe the code is wrong too.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/908944/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2022, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
