        <!DOCTYPE html>
        <html lang="en">
        <head><title>How not to get a protocol implementation merged [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/422649/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/421784/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/422649/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>How not to get a protocol implementation merged</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>We're bad at marketing</b>
<p>
We can admit it, marketing is not our strong suit. Our strength is
writing the kind of articles that developers, administrators, and
free-software supporters depend on to know what is going on in the
Linux world. Please <a href="/Promo/nsn-bad/subscribe">subscribe today</a> to help us keep doing that, and so
we donâ€™t have to get good at marketing.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>January 12, 2011</br>
           </div>
The "Open Base Station Architecture Initiative" is a consortium of
companies which are trying to create an open market for cellular base
station hardware.  One of the things this initiative has defined is the
UDPCP protocol - a UDP-based protocol used for communications between base
stations.  UDPCP offers reliable transfer, multicast, and more.  The Linux
kernel does not currently support UDPCP, but Stefani Seibold has posted <a
href="/Articles/422473/">a patch</a> which would add that support to the
kernel's network stack.
<p>
There have been a number of comments about this code, but one <a
href="/Articles/422651/">observation</a> by Eric Dumazet is noteworthy: the
posted implementation only works with IPv4.  The networking developers have
made it clear that they are uninterested in accepting an IPv4-only
implementation in 2011; IPv6 support is required for any new code.
<p>
Stefani <a href="/Articles/422652/">responded</a> that no base stations
currently provided IPv6 functionality and no customers were interested, so
there was no point in adding that support at this time.  The answer didn't
change, though; the networking developers have no interest in merging code
which is guaranteed to need fixing in the near future.  Stefani has
<a href="/Articles/422653/">described</a> this requirement as
"<q>dogmatic<q>", but she also seems to have realized that it's not
going to go away.  So UDPCP stays out of the mainline for now, but we
will, hopefully, eventually see a reworked version with support for IPv6.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Networking-Protocols">Networking/Protocols</a></td></tr>
            <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#UDPCP">UDPCP</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/422649/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor422758"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">How not to get a protocol implementation merged</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 13, 2011 2:28 UTC (Thu)
                               by <b>busterb</b> (subscriber, #560)
                              [<a href="/Articles/422758/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I find it amazing how telco gear seems to reinvent basic transport-level protocols for seemingly no particular reason. Does anyone know what problem this protocol even solves that couldn't be done with TCP, SCTP or DCCP (especially SCTP, which is already used in some telecom infrastructures like LTE)<br>
<p>
Note that this protocol appears to provide no method to close a connection, for instance. Wow! Seems like OBSAI SIG had a case of NIH syndrome.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/422758/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor422798"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">How not to get a protocol implementation merged</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 13, 2011 8:36 UTC (Thu)
                               by <b>dmk</b> (guest, #50141)
                              [<a href="/Articles/422798/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;Note that this protocol appears to provide no method to close a connection, for instance. Wow! Seems like OBSAI SIG had a case of NIH syndrome.</font><br>
<p>
It's udp based. UDP is a stateless protocol. No Close() is necessary. ? <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/422798/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor422845"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">How not to get a protocol implementation merged</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 13, 2011 13:43 UTC (Thu)
                               by <b>busterb</b> (subscriber, #560)
                              [<a href="/Articles/422845/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It appears to be UDP only in the sense that SCTP and other reliable protocols can also be tunneled over UDP, presumably just to make it easier to get through firewalls and initial user-space implementations easier to build on existing socket apis (excluding raw sockets.)<br>
<p>
However, it is definitely stateful because of the reliable transport it provides on top of UDP. DoS issues have been discussed on the mailing list, where spoofed UDP packets can flood the connection table:<br>
<p>
<a href="http://marc.info/?l=linux-netdev&amp;m=129404690806820&amp;w=3">http://marc.info/?l=linux-netdev&amp;m=129404690806820&amp;...</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/422845/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor422821"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">How not to get a protocol implementation merged</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 13, 2011 11:20 UTC (Thu)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/422821/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
That's actually a bit frustrating. Stream-oriented protocols like TCP and STCP are by now pretty solid and work fine (most of time).<br>
<p>
However, that's not true for UDP-based transport protocols. They are often not stable or do not have desired characteristics. For example, DCCP does not have support for packet merging and preserves message boundaries. And sometimes the converse is necessary. Also, it doesn't support priorities.<br>
<p>
There's just too much combinations. So everyone just invents their own UDP protocol :(<br>
<p>
Oh yes, NIH is also present in copious quantities in telecoms.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/422821/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor422961"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">How not to get a protocol implementation merged</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 13, 2011 20:07 UTC (Thu)
                               by <b>fredrik</b> (subscriber, #232)
                              [<a href="/Articles/422961/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I'm not arguing for inventing new protocols. I just want to point out that one reason to base a protocol on udp instead of tcp is reduced latency. This is especially important, and noticable, in current mobile networks like GSM and UMTS.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/422961/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor422992"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">How not to get a protocol implementation merged</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 13, 2011 21:54 UTC (Thu)
                               by <b>job</b> (guest, #670)
                              [<a href="/Articles/422992/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Wouldn't SCTP suffice?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/422992/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor423870"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">How not to get a protocol implementation merged</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 20, 2011 10:22 UTC (Thu)
                               by <b>renox</b> (guest, #23785)
                              [<a href="/Articles/423870/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Well I'm not an expert but SCTP has an initial handshake which require at least one roundtrip before sending data, so the connection initiation isn't low latency..<br>
<p>
I wonder why they did it this way?<br>
Me I would have authorised the initiation of the connection (INIT) with a data filed with the possibility of the server (INIT ACK) replying that it dropped the data (either to simplify its implementation or because it is overloaded in case a cracker try to spoof IPs) thus requiring the client to re-send the data.<br>
With this simple design, you have low-latency(*) and security..<br>
<p>
*: only if the server isn't overloaded though.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/423870/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor422944"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">How not to get a protocol implementation merged</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 13, 2011 18:48 UTC (Thu)
                               by <b>caitlinbestler</b> (guest, #32532)
                              [<a href="/Articles/422944/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Do we really want the kernel cluttered with application protocols that<br>
pose as transport protocols, but have the focus of an application protocol?<br>
<p>
If you want to think like an application protocol,and actually focus on<br>
issues like what your current customer base really needs, then stick with<br>
user-mode libraries and use an existing transport layer protocol. There is<br>
no  need to be a kernel module.<br>
<p>
If you do think you have the case for a general purpose transport protocol,<br>
what solutions are you solving for generic transports that are not already<br>
solved by TCP, UDP, DCCP or SCTP?<br>
<p>
Not having IPV6 support is really just the tip of the iceberg that says<br>
this particular protocol is really application specific and not a general<br>
purpose solution.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/422944/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor423872"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">How not to get a protocol implementation merged</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 20, 2011 10:28 UTC (Thu)
                               by <b>renox</b> (guest, #23785)
                              [<a href="/Articles/423872/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;&gt; Do we really want the kernel cluttered with application protocols that</font><br>
pose as transport protocols, but have the focus of an application protocol? &lt;&lt;<br>
<p>
Well, if those application protocols can be "compiled out" in the kernel configuration, why not?<br>
They could even been regrouped under a 'application specific protocol' group in the kernel configuration which would default to N.<br>
It's quite similar to having a device driver in the kernel for some rare hardware..<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/423872/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor423837"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">How not to get a protocol implementation merged</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 20, 2011 4:54 UTC (Thu)
                               by <b>pukunui</b> (guest, #65961)
                              [<a href="/Articles/423837/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
"no base stations currently provided IPv6 functionality"<br>
<p>
If this is true, it's more than a bit of a worry - the first place that IPv4 addresses will run out and where operators will need to offer IPv6 addresses is the mobile space. After all, most of the smartphone handsets are already IPv6-capable.<br>
By the time local ISPs start to really hurt for IPv4 address space (mid- to late-2012 maybe in parts of the APNIC area?), the vast majority of the fast-churn smartphones will be IPv6, but very few home fixed users will be. For example, in the NZ market, you CANNOT buy an IPv6-capable ADSL modem from a mass market supplier even today, and these boxes last far longer than the 18 months to three years of a typical smartphone.<br>
<p>
So the first part of the market that needs to go IPv6 is the mobile part. And there are *no* base stations that do IPv6?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/423837/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor423857"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">How not to get a protocol implementation merged</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 20, 2011 8:39 UTC (Thu)
                               by <b>ericc72</b> (guest, #41737)
                              [<a href="/Articles/423857/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I'm not an expert on this stuff, but my understanding is that most mobile operators, when it comes to stuff done that needs an IP address, often just uses addresses in the private space so really this in not an issue with conflict with the number of public IP addresses. It is kind of like a lot of DSL connections, where you are getting issued a private IP address by the provider and they do NAT at their central office onto the public internet.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/423857/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor423876"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">How not to get a protocol implementation merged</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 20, 2011 11:11 UTC (Thu)
                               by <b>foom</b> (subscriber, #14868)
                              [<a href="/Articles/423876/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Well, T-mobile USA, at least, doesn't use official private addresses, because they would conflict with the addresses on users' network's when people are connected via cell and via Wifi. T-mobile instead uses (unrouteable, NATed) addresses in the 25.* network, which is assigned to the UK Ministry of defense. But yes, they don't have to worry about running out of addresses at least...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/423876/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor424040"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">How not to get a protocol implementation merged</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Jan 21, 2011 7:33 UTC (Fri)
                               by <b>Imroy</b> (guest, #62286)
                              [<a href="/Articles/424040/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; the first place that IPv4 addresses will run out and where operators will need to offer IPv6 addresses is the mobile space.</font><br>
<p>
Maybe I'm understanding it wrong, but it appears that this protocol is a tunnelling/encapsulation protocol for transporting low-level packets between base stations and their components. It's not involved with the actual internet connectivity of the mobile phones - in the current 2.5G/3G network structure that happens in a specific component (with even more encapsulation - <a rel="nofollow" href="http://laforge.gnumonks.org/weblog/2009/10/27/#20091027-implementing_gprs">http://laforge.gnumonks.org/weblog/2009/10/27/#20091027-i...</a>). So these base stations and other parts talking UDPCP will likely have private IPv4 addresses and would not cause a problem for IPv6 migration.<br>
<p>
Of course, we'd like to move *everything* to IPv6 in the distant (or not so distant) future. But until then I don't see this IPv4-only implementation posing any problems.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/424040/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2011, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
