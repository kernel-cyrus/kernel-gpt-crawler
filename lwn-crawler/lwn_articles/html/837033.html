        <!DOCTYPE html>
        <html lang="en">
        <head><title>Systemd catches up with bind events [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/837033/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/837014/">Return to the Front page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/837033/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>Systemd catches up with bind events</h1>
</div>
<div class="ArticleText">
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>November 13, 2020</br>
           </div>
The kernel project has a strong focus on not breaking user-space
applications; if something works with a given kernel release, it should
continue to work with subsequent releases.  So it may be discouraging to
read the lengthy exposition on an apparent user-space API break in <a
href="/Articles/837034/">the announcement</a> for the systemd 247-rc2
release.  Changes to udev configuration files will be needed to keep
systems working, but the
systemd project claims that it "<q>is not [the] fault of systemd or udev, but
caused by an incompatible kernel change that happened back in Linux
4.12</q>".  It seems like an appropriate time to look at what happened,
how administrators need to respond, and whether anything can be done to
avoid this kind of thing from happening again.
<p>
Modern computers tend to be highly dynamic, with devices (of both the
physical and virtual variety) appearing and disappearing while the system
is running.  The kernel handles the low-level details with regard to these
device events, but it is up to user space to take care of the rest.  For
that to happen, user space needs to know when something has changed with
the system's configuration.
<p>
To that end,
events are emitted to user space from deep within the kernel's driver-core
subsystem whenever something changes; for
example, plugging in a USB device will result in the creation of one or
more <tt>ADD</tt> events to tell user space that the new device is
available.  The <tt>udev</tt> daemon is charged with responding to these
events according to a set of rules; it can create device nodes, set
permissions, notify other user-space components, and more, all in response
to properties attached to events by matching rules.  The set of
possible events is relatively small and does not change often.
<p><blockquote class="ad">
<b><tt>$ sudo subscribe today</tt></b>
<p>
Subscribe today and elevate your LWN privileges. You’ll have
access to all of LWN’s high-quality articles as soon as they’re
published, and help support LWN in the process.  <a href="https://lwn.net/Promo/nst-sudo/claim">Act now</a> and you can start with a free trial subscription.
</blockquote>
<p>
<h4>Breaking systemd</h4>
<p>
In July 2017, though, Dmitry Torokhov <a
href="https://git.kernel.org/linus/1455cf8dbfd0">added two new event
types</a> called <tt>BIND</tt> and <tt>UNBIND</tt>.  They are meant to
allow user space to handle devices that need help before they can become
fully functional — those that need a firmware load, for example.  For
drivers that support the new mechanism, a <tt>BIND</tt> event for a device
will follow the <tt>ADD</tt> event once the device is ready to operate.
This change was a part of the 4.14 kernel release in November 2017 (not
4.12 as stated in the systemd announcement).
<p>

Later that same month, <a
href="https://bugs.kde.org/show_bug.cgi?id=387454">a bug report</a> landed
in the KDE bug tracker; this was perhaps the first case where somebody
noticed a problem related to the new events.  That report only <a
href="/ml/linux-kernel/20181223164954.hib4lbchftspidsd@suse.de/">made it to
the kernel lists</a> at the end of 2018, though — over one year later.  By
then, 4.14 had been made into a long-term support kernel and shipped by
distributors, with relatively few complaints from users.  Indeed, Greg
Kroah-Hartman <a
href="/ml/linux-kernel/20181224091229.GA26796@kroah.com/">was mystified</a>
as to why problems were turning up a year later.  That turned out to be a
change to systemd that caused it to propagate the new events.
<p>
Specifically, the problem would appear to originate in the way that udev
(which is a part of the systemd project) attaches tags to events.
These tags, which are set and used by udev rules, control how user
space will set up the new device.
There is an assumption built in that there will only be a single event to
announce the existence of a new device, so attaching tags to that
event is sufficient.  When the second event (the <tt>BIND</tt> event) shows
up, the device state is reset and those tags are forgotten, leading to the
associated device not being set up properly.
<p>
As a short-term "fix", systemd was <a
href="https://github.com/systemd/systemd/commit/56c886dc7e">patched</a> to
simply ignore the new events.  That caused things to work as they did
before, at the cost of hiding those events entirely.  That was never a
long-term solution; the new events were added for a reason and
some devices need them for proper setup.  So a better solution had to be
found for the longer term; that solution has two aspects, one of which may be
disruptive for users who have created their own udev rules.
<p>
<h4>Fixing systemd</h4>
<p>
The first piece is a reworking of the "tag" mechanism provided by udev.
Tags are special properties that can be attached, then matched in
subsequent rules or consumed by user space.
Rather than attaching tags to events, as has been done until now, udev 
attaches them to devices, so 
tags added in response to an <tt>ADD</tt> event will still be there for the
<tt>BIND</tt> event as well.  For cases where rules need to respond only to
tags added to the current event, a new <tt>CURRENT_TAGS</tt> property lists
only those tags; it thus holds the value that the <tt>TAGS</tt> property
held in previous releases.
<p>
The other part, though, is a change that must be applied to a number of
udev rule sets.  Consider, for example, this snippet taken from a randomly
chosen rules file (<tt>10-dm-disk.rules</tt> in particular) on a
Fedora&nbsp;32 system:
<p>
<pre>
    # "add" event is processed on coldplug only!
    ACTION!="add|change", GOTO="dm_end"
</pre>
<p>
The <tt>ACTION</tt> line causes the entire file to be skipped for anything
other than <tt>ADD</tt> or <tt>CHANGE</tt> events; in particular, that is
what will happen with <tt>BIND</tt> events.  That will cause properties
associated with those events to be lost — and the device in
question to be set up improperly (if at all).  The fix is to change that
line to read:
<p>
<pre>
    ACTION=="remove", GOTO="dm_end"
</pre>
<p>
That causes the rules to be skipped (and their associated state forgotten)
only when the device is removed from the system.
<p>
The problem here is that these rules were written under the assumption that
no new event types would be added, so anything that wasn't recognized as
adding or modifying a device could be ignored.  There is, evidently, a
certain amount of code that runs in response to device events that has a
similar problem.  What this shows is, in effect, a sort of <a
href="https://en.wikipedia.org/wiki/Protocol_ossification">protocol
ossification</a> effect that has made it much harder to add event types to
the API provided by the kernel.  Indeed, in 2018, Torokhov <a
href="/ml/linux-kernel/20181224173427.GA254245@dtor-ws/">remarked</a>:
<P>
<div class="BigQuote">
	Well, it appears that we can no longer extend uevent interface with
	new types of uevents, at least not until we go and fix up all
	udev-derivatives and give some time for things to settle.
</div>
<p>
At the time, there was discussion of possibly reverting the change, causing
the new events to disappear.  But that approach had the potential to create
regressions of its own, as some systems may well have depended on getting
those events; the kernel release adding them was a year old by that point,
after all.  There was also discussion of adding some sort of knob to enable
or disable the creation of <tt>BIND</tt> and <tt>UNBIND</tt> events, but
that never came to pass.  Instead, Torokhov <a
href="/ml/linux-kernel/20181224092257.GB122208@dtor-ws/">described</a> the
work in the systemd project to make the changes described above, and
Kroah-Hartman <a 
href="/ml/linux-kernel/20181224093458.GA28717@kroah.com/">responded</a>:
"<q>So all should be good</q>". 
<p>
<h4>A regression?</h4>
<p>
With luck, all <i>will</i> be good, but it has come at the cost of some
work within the systemd community over the last two years; the systemd
developers  have made their displeasure known:
<p>
<div class="BigQuote">
	We are very sorry for this breakage and the requirement to update
        packages using these interfaces. We'd again like to underline that
        this is not caused by systemd/udev changes, but result of a kernel
        behaviour change.
</div>
<p>
Was this a violation of the kernel's "no regressions" rule?  The answer
must almost certainly be "yes"; code that worked with 4.13 no longer worked
with 4.14.  What should have been done about it is a bit less clear.  Had
the issue been reported to the kernel community more quickly, it might have
been possible to revert and redesign the change; after it had been deployed
for a year, though, that was not a simple option.  One could argue that the
kernel community should have found some other way to fix the regression;
the systemd 247-rc2 announcement tries to make that case.  But once Torokhov
posted that the problem was being addressed on the systemd side, there was
no longer any pressure to do that.
<p>
Perhaps the real lesson here is that the community would be better served
by closer relations between the kernel project and projects managing
low-level utilities like systemd.  Those relations have been somewhat
strained at times, and there are not a lot of places where cooperative,
cross-project discussions can take place.  The presence of systemd
developers at events like the Linux Plumbers Conference is limited at best,
and those developers — not without reason — do not find the kernel mailing
lists to be an entirely welcoming place.  We are all working on the same
system, though, and we would probably have an easier time of it if we could
talk things through a bit more.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Development_model-User-space_ABI">Development model/User-space ABI</a></td></tr>
            <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#udev">udev</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/837033/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor837150"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 13, 2020 21:10 UTC (Fri)
                               by <b>MatejLach</b> (guest, #84942)
                              [<a href="/Articles/837150/">Link</a>] (13 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I am not all that surprised that systemd wants to point out this is a kernel regression, as I seem to remember some in the kernel community having choice words for systemd in the past.<br>
<p>
I do wish for the relations between the most deployed init systm and the kernel to improve.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837150/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837151"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 13, 2020 21:15 UTC (Fri)
                               by <b>willy</b> (subscriber, #9762)
                              [<a href="/Articles/837151/">Link</a>] (12 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Said choice words being caused by systemd coopting a kernel boot parameter for its own purposes. Again, systemd not playing well with others.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837151/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837157"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 13, 2020 22:20 UTC (Fri)
                               by <b>MatejLach</b> (guest, #84942)
                              [<a href="/Articles/837157/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
In this case it seems to be the kernel not playing well with others. Or rather not adhering to its own rules. <br>
<p>
Which is precisely the point, cooperation rather than pointing the fingers would help here. <br>
<p>
systemd has proven itself useful enough where it should be consulted by kernel developers and vice versa.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837157/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837176"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 14, 2020 0:49 UTC (Sat)
                               by <b>gerdesj</b> (subscriber, #5446)
                              [<a href="/Articles/837176/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It doesn&#x27;t matter who is right or wrong.  As my parents used to say &quot;six of one and half a dozen of the other&quot;.<br>
<p>
The kernel by definition is used on all Linux boxes and systemd is probably by now the most widely used init system at least on systems that the sysadmin/user actually cares what is happening.<br>
<p>
systemd has become the de-facto Linux init system or PID1 or whatever the hell you want to call it.  I still recall coming across M van S&#x27;s comments in init scripts for the first time rather a long time ago and suddenly feeling that a real person actually cared about me and my little system.  I &quot;got&quot; open source about then - I kept on finding notes in man pages and readme files and so on that indicated I was dealing with people who give a shit.  Every now and then I still find something to make me smile in a readme or a help menu.  I don&#x27;t get that feeling when I&#x27;m fiddling with Windows or Macs.  Linux is properly corporate these days and quite rightly so - we&#x27;ve grown up but it is still nice to see a human touch sometimes.<br>
<p>
Please remember why we do this stuff.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837176/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor838002"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 21, 2020 6:59 UTC (Sat)
                               by <b>ras</b> (subscriber, #33059)
                              [<a href="/Articles/838002/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; systemd has become the de-facto Linux init system or PID1 or whatever the hell you want to call it.</font><br>
<p>
Only for the desktop distro&#x27;s.  It&#x27;s too heavyweight for the smaller ones like Apline, OpenWRT or Android, containers like Docker don&#x27;t use an init system at all.  And that could well cover the bulk of deployed Linux instances.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/838002/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor838012"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 21, 2020 12:32 UTC (Sat)
                               by <b>rahulsundaram</b> (subscriber, #21946)
                              [<a href="/Articles/838012/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;  Only for the desktop distro&#x27;s. It&#x27;s too heavyweight for the smaller ones like Apline, OpenWRT or Android, containers like Docker don&#x27;t use an init system at all.</font><br>
<p>
The vast majority of Linux distros including RHEL, SLES, Debian etc (not just the desktop ones) use systemd by default.  Docker containers are not comparable to distros but some of them do run a init system and it is popular enough that several distros include a systemd-container package specifically for this purpose and systemd is not limited to a init system, so other parts gets routinely used in containers as well.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/838012/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor838078"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 23, 2020 13:29 UTC (Mon)
                               by <b>flussence</b> (guest, #85566)
                              [<a href="/Articles/838078/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Please remember why we do this stuff.</font><br>
<p>
It&#x27;s hard to tell corporate types to remember FOSS had a human element when they came from outside that culture entirely, their salary depends on gentrifying it out of existence, and in their off-time their hobby is talking over everyone to proclaim “Well Actually everyone uses our software because our software is great because everyone uses it”.<br>
<p>
Most of the interesting people seem to be using BSD these days.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/838078/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor838087"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 23, 2020 16:18 UTC (Mon)
                               by <b>anselm</b> (subscriber, #2796)
                              [<a href="/Articles/838087/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <blockquote><em>Most of the interesting people seem to be using BSD these days.</em></blockquote>
<p>
It used to be that using Linux was the way to stand out from the crowd, to be nerdy and interesting and metaphorically show the finger to those stodgy Windows and Mac users.
</p>
<p>
Now Linux has been mainstream for a while and is no longer good for nerd cred. People's elderly relations can (and do) use it. This means that the people who were using Linux 20+ years ago, when it meant not being able to do certain things (that when pointed out, one would adamantly insist weren't worth doing, anyway), spending three days to get a new video card/monitor working, etc., are being forced into BSD if they still want to impress their peers. But that's not because of BSD's versatility, wide compatibility with popular hardware and peripherals, and technical excellence – it's because few other people <em>want</em> to use it. It's the IT equivalent of an Indian fakir's bed of nails; very comfortable and just the thing if you're a fakir, but an item of morbid fascination for others.
</p>
      
          <div class="CommentReplyButton">
            <form action="/Articles/838087/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor837170"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 14, 2020 0:03 UTC (Sat)
                               by <b>pbonzini</b> (subscriber, #60935)
                              [<a href="/Articles/837170/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
No, the parent comment is right. The issue was caused by: 1) a distro backport to systemd that had a bug, which caused it to spit too much debugging output, which caused it to timeout because the framebuffer console is insanely slow; 2) kernel developers spending more time crafting flaming emails than looking 1 inch further than their nose.<br>
<p>
Come on, even Linus said that it was perfectly fine for systemd to use the command line that way[1] and, after having laced some emails with remarks about Kay, later admitted that it was just a bug and people were overreacting[2].<br>
<p>
[1] <a href="http://lkml.iu.edu/hypermail/linux/kernel/1404.0/01488.html">http://lkml.iu.edu/hypermail/linux/kernel/1404.0/01488.html</a><br>
<p>
[2] <a href="http://lkml.iu.edu/hypermail/linux/kernel/1404.0/02712.html">http://lkml.iu.edu/hypermail/linux/kernel/1404.0/02712.html</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837170/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837319"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 16, 2020 0:20 UTC (Mon)
                               by <b>nevets</b> (subscriber, #11875)
                              [<a href="/Articles/837319/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It wasn&#x27;t really the command line usage that was the problem. The real problem was that the command line triggered systemd to spam the kernel printk buffer so much that we lost all debug messages from the kernel. When reporting this as a problem, instead of saying there was a bug in systemd, we were told it was not a bug and systemd is perfectly fine using the debug command line to trigger writing debug messages in the kernel printk buffer. I thought the real solution was to separate kernel writes into printk from userspace writes, preventing userspace from overwriting what the kernel produces.<br>
<p>
This would not have escalated the way it did if we were told from the beginning, &quot;oh there&#x27;s a bug in systemd that causes it to spam the buffer, please upgrade to a fixed version&quot;. But instead told to bugger off. Yes, it really is a lack of communication and good faith between the two communities and I hope we can work better in the future.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837319/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837326"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 16, 2020 7:55 UTC (Mon)
                               by <b>pbonzini</b> (subscriber, #60935)
                              [<a href="/Articles/837326/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; oh there&#x27;s a bug in systemd that causes it to spam the buffer, please upgrade to a fixed version</font><br>
<p>
Technically the upstream people couldn&#x27;t have known, since the bug was introduced by an incorrect distro backport. And if a buggy systemd, one that spews assertion failures all the time, will slow boot down to a crawl, the systemd people might even consider that to be a feature. It can and will happen for kernel WARNs as well, and a buggy PID 1 is not much better than a buggy kernel. But these are details, and in general I think we agree.<br>
<p>
What this shows to me, is that Linux is sorely lacking postmortems. Whenever Linus screams at me, I try to figure out what went wrong in my workflow and how I can improve it to avoid being screamed at in the future. On the other hand, if 5 years later people still believe that &quot;debug&quot; is a sacred part of the kernel command line (and not the more nuanced explanation that you gave), something went wrong on the kernel side in figuring out what happened.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837326/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor837173"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 14, 2020 0:39 UTC (Sat)
                               by <b>foom</b> (subscriber, #14868)
                              [<a href="/Articles/837173/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
&quot;You can&#x27;t use the boot command line option &#x27;debug&#x27;, it&#x27;s ALL MINE!&quot;...Seriously? &quot;Coopting&quot;?<br>
<p>
As a user, I&#x27;m sure I don&#x27;t really care which part of the system boot is implemented by code in the kernel and which is implemented in systemd/udev/etc. I just want them to work together to boot the system properly. I mean, it makes sense to me that if I want to debug an issue, that everyone would respond to the one debug flag...<br>
<p>
And same for &quot;This incompatibility is all their fault!&quot; -- again...who cares? It&#x27;s nonsense.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837173/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837208"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 14, 2020 13:30 UTC (Sat)
                               by <b>willy</b> (subscriber, #9762)
                              [<a href="/Articles/837208/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Uh, yes, &quot;coopting&quot;.<br>
<p>
&quot;divert to or use in a role different from the usual or original one&quot;<br>
<p>
What word would you use to describe using something for your own purposes that somebody else was already using? It&#x27;s not like I said &quot;stealing&quot;.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837208/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837220"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 14, 2020 16:26 UTC (Sat)
                               by <b>pbonzini</b> (subscriber, #60935)
                              [<a href="/Articles/837220/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
When you say &quot;the original purpose&quot; of /proc/cmdline and the debug flag, do you mean &quot;System services are *supposed* to parse it, because it gives a unified way for people to pass in various flags. The kernel doesn&#x27;t complain about flags it doesn&#x27;t recognize, exactly because the kernel realizes that &quot;hey, maybe this flag is for something else&quot;. The classic example of this is things like &quot;charset&quot; markers, but also options to modules that modprobe parses etc etc. And yes, that does include &quot;quiet&quot; and &quot;debug&quot;.&quot;?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837220/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor837152"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 13, 2020 21:24 UTC (Fri)
                               by <b>jkingweb</b> (subscriber, #113039)
                              [<a href="/Articles/837152/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I&#x27;m not sure how this counts as a regression. Code the relies on undefined behaviour (viz. the set of event types which are not &quot;add&quot; or &quot;change&quot; that the kernel will emit) should not be surprised when things change. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837152/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837155"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 13, 2020 22:16 UTC (Fri)
                               by <b>rahulsundaram</b> (subscriber, #21946)
                              [<a href="/Articles/837155/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The article already addresses this.  To recap, in the past, Linus has argued that it doesn&#x27;t matter what is correct behaviour and that if something userspace worked on one kernel version and the next kernel version broke it, it should be considered a regression and reverted and note that the breakage is not limited to systemd here.   It has not always been 100% followed by that is the general guidance.  It looks like the delay in reporting upstream is part of the problem.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837155/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837182"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 14, 2020 2:23 UTC (Sat)
                               by <b>koh</b> (subscriber, #101482)
                              [<a href="/Articles/837182/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The kernel has lots of interfaces where stuff keeps getting added and therefore has to be considered as an open set: syscalls, flags to syscalls, the sysfs entries, filesystems, modules, etc. How is this set of event types any different? If someone was to create a userspace program relying on a particular syscall, flag, whatever, not being implemented - until it finally is - would that be a regression?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837182/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837183"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 14, 2020 3:12 UTC (Sat)
                               by <b>khim</b> (subscriber, #9252)
                              [<a href="/Articles/837183/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <font class="QuotedText">&gt; If someone was to create a userspace program relying on a particular syscall, flag, whatever, not being implemented - until it finally is - would that be a regression?</font>

<p>Absolutely. LWN even have article which explains <a href="https://lwn.net/Articles/588444/">how and why that case should be handled</a>.</p>

<p>But there is also the rule <a href="https://lkml.org/lkml/2010/11/19/359">if nobody notices, it's not broken</a>.

<p>Now… we have  very weird corner-case: somebody <b>have</b> noticed… year after the change was made. That's… rather unusual, to say the least.
      
          <div class="CommentReplyButton">
            <form action="/Articles/837183/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor837195"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 14, 2020 8:42 UTC (Sat)
                               by <b>abo</b> (subscriber, #77288)
                              [<a href="/Articles/837195/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Try booting RHEL8 (or derivatives) on the latest upstream kernels. It will initially appear to work, but certain systemd operations will fail due to a change in capabilities. (<a href="https://bugzilla.redhat.com/show_bug.cgi?id=1853736">https://bugzilla.redhat.com/show_bug.cgi?id=1853736</a>)<br>
The fix in that case is a lot simpler, and backporting it to various distro systemd versions isn&#x27;t a big deal, but it&#x27;s still a regression.<br>
<p>
Perhaps it is reasonable to consider systemd exempted from the kernel&#x27;s ABI/API stability promise, because it is sometimes almost the only user of certain interfaces?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837195/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837273"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 15, 2020 15:19 UTC (Sun)
                               by <b>pbonzini</b> (subscriber, #60935)
                              [<a href="/Articles/837273/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <p>&gt;  Perhaps it is reasonable to consider systemd exempted from the kernel's ABI/API stability promise, because it is sometimes almost the only user of certain interfaces?

<p>That's complicated. With more and more people using containers&mdash;including OS containers running a full-blown init system&mdash;it's not that rare to see very new userspace on old kernels or vice versa. This also means that it will be much harder to remove features in distro kernels: for example, even if your distro ships with an nftables-based iptables(8), there could be containers using the older iptables API.
      
          <div class="CommentReplyButton">
            <form action="/Articles/837273/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
<a name="CommAnchor837161"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 13, 2020 22:42 UTC (Fri)
                               by <b>GhePeU</b> (subscriber, #56133)
                              [<a href="/Articles/837161/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
So, to make it short, a project makes a breaking change, its downstream developers/users are initially blindsided by it, then they need to scramble to work around it, then they try to convince the upstream developers that the change is problematic and could they please reconsider but they’re told to adapt to the brave new world they now live in and fix their software, and finally they have to do just that and publish a new fixed release with a big disclaimer tacked on hoping that at least a part of the annoyed users that will be bitten by the change will read it and not complain about it to them?<br>
<p>
The only news in this story is that, maybe for the first time, the systemd people are not the upstream project, and I think there’s a German word for what I’m feeling right now :)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837161/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837166"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 13, 2020 23:33 UTC (Fri)
                               by <b>ubhofmann</b> (subscriber, #47368)
                              [<a href="/Articles/837166/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Schadenfreude? <a href="https://en.wikipedia.org/wiki/Schadenfreude">https://en.wikipedia.org/wiki/Schadenfreude</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837166/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837188"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 14, 2020 7:03 UTC (Sat)
                               by <b>jonas.bonn</b> (subscriber, #47561)
                              [<a href="/Articles/837188/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Besserwisser... ;) <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837188/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor837271"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 15, 2020 15:11 UTC (Sun)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/837271/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; maybe for the first time, the systemd people are not the upstream project</font><br>
<p>
Well, I think Lennart is well used to being downstream, and he likes to rely on upstream doing what they claim.<br>
<p>
This seems a classic case of upstream not sticking to its promises, which is the whole problem with the unixy philosophy of being liberal with what you accept, and strict in what you emit. systemd (and pulseaudio, etc etc) is strict in expecting upstream to do what they promised.<br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837271/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837290"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 15, 2020 18:44 UTC (Sun)
                               by <b>NYKevin</b> (subscriber, #129325)
                              [<a href="/Articles/837290/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; which is the whole problem with the unixy philosophy of being liberal with what you accept, and strict in what you emit.</font><br>
<p>
That&#x27;s not Unix, that&#x27;s Postel&#x27;s Law, which IIRC originates from TCP/IP (where it is *also* an unholy mess, but of a different kind).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837290/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor837163"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 13, 2020 23:01 UTC (Fri)
                               by <b>syrjala</b> (subscriber, #47399)
                              [<a href="/Articles/837163/">Link</a>] (19 responses)
      </p>
      
      </div>
      </summary>
      Maybe someone will finally merge my bluez fix for this same regression: <a href="https://lkml.org/lkml/2018/12/4/1167">https://lkml.org/lkml/2018/12/4/1167</a>
      
          <div class="CommentReplyButton">
            <form action="/Articles/837163/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837226"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 14, 2020 16:43 UTC (Sat)
                               by <b>IanKelling</b> (subscriber, #89418)
                              [<a href="/Articles/837226/">Link</a>] (18 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Looks like the maintainers need more info from you.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837226/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837265"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 15, 2020 13:55 UTC (Sun)
                               by <b>syrjala</b> (subscriber, #47399)
                              [<a href="/Articles/837265/">Link</a>] (17 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I pretty much gave up after being trolled with &quot;what makes my hardware different from yours?&quot;<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837265/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837291"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 15, 2020 18:47 UTC (Sun)
                               by <b>NYKevin</b> (subscriber, #129325)
                              [<a href="/Articles/837291/">Link</a>] (16 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
That is not trolling, that is an entirely fair response to &quot;you don&#x27;t see it because you don&#x27;t have the right hardware.&quot;<br>
<p>
If you don&#x27;t tell them about the hardware that reproduces the bug, they cannot reproduce it. If they are unable to reproduce a bug, how are they supposed to evaluate a patch for that bug?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837291/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837333"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 16, 2020 10:56 UTC (Mon)
                               by <b>k3ninho</b> (subscriber, #50375)
                              [<a href="/Articles/837333/">Link</a>] (15 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;That is not trolling, that is an entirely fair response to &quot;you don&#x27;t see it because you don&#x27;t have the right hardware.&quot;</font><br>
Many years of past experience have given this a name: &#x27;works for me&#x27;. Developer doesn&#x27;t experience the problem and can&#x27;t conceive of the imagined version of the code in their head not running as they think it will. <br>
<p>
This is dull, unhelpful pushback -- what would be better if not actually helpful is to call no-op ACTION==&quot;remove&quot;, GOTO=&#x27;end_stanza&#x27; an antipattern making you think that add/change/remove are the only legitimate udev action types and core to this 4.12-changed-userspace issue.<br>
<p>
(There&#x27;s a further issue at the level of our civilisation and society where &#x27;works for me&#x27; gives people with power -- to fix bugs raised by users -- a habit of denying the lived experience of users and the struggles that users have with our software, which can become a life-long denial of the lived experience and struggle of other human people. I get that, in software, unanticipated complexity means that fixes have to not also break other things and that makes an apparently-simple change expensive and unpredictable, easier to push back and not make changes. Here&#x27;s the question from this rhetoric: Are we not the wizards and masters of these systems that we should be able to change them to work more correctly for more people?)<br>
<p>
K3n.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837333/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837335"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 16, 2020 12:15 UTC (Mon)
                               by <b>magfr</b> (subscriber, #16052)
                              [<a href="/Articles/837335/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
This is interesting and further enforces my half formed thought that matching of inverse patterns are bad since it assumed that the set of values är fixed and unchanged.<br>
<p>
The example in the article was matching<br>
~add|change when what is needed is remove.<br>
<p>
For this poster the problem sounds like the reverse, he needs to match ~add|change and someone have &quot;optimzed&quot; that to remove.<br>
<p>
This proves that one need to know what one is doing and that crap can be written in any language, in this case the udev config rule language.<br>
<p>
One way to fix this is to document an ERROR event. <br>
Any rule that mentions an ERROR event is broken.<br>
Any action that happens when ERROR is issued is a bug.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837335/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor837336"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 16, 2020 12:21 UTC (Mon)
                               by <b>hkario</b> (subscriber, #94864)
                              [<a href="/Articles/837336/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
put yourself in the developers boots for a minute:<br>
<p>
you get a bug report, you look at the experienced behaviour, you haven&#x27;t encountered it before; you try it with your hardware, it&#x27;s not reproducible; you look at code that *may* be related, it doesn&#x27;t seem possible to trigger this kind of behaviour<br>
<p>
now, what on earth can you do more than to ask for more information?<br>
<p>
Developers aren&#x27;t omniscient and omnipotent entities that exist beyond confines of space and time, entities that fix bugs based only on a fickle. They&#x27;re human, and they need to understand the bug before they can fix it. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837336/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837436"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 16, 2020 17:59 UTC (Mon)
                               by <b>jezuch</b> (subscriber, #52988)
                              [<a href="/Articles/837436/">Link</a>] (7 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
You create a unit/regression test which mocks hardware to behave the way described by the bug reporter? Consult the spec to confirm that this is a valid use case? Just saying &quot;works for me&quot; is being a horrible maintainer.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837436/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837437"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 16, 2020 18:30 UTC (Mon)
                               by <b>rahulsundaram</b> (subscriber, #21946)
                              [<a href="/Articles/837437/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Just saying &quot;works for me&quot; is being a horrible maintainer.</font><br>
<p>
That wasn&#x27;t what was said however.  There was a question back on what makes the hardware different which seems to have gone unanswered.  Given the wide variations in hardware, this is a reasonable question.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837437/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837925"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 20, 2020 15:16 UTC (Fri)
                               by <b>k3ninho</b> (subscriber, #50375)
                              [<a href="/Articles/837925/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;&gt; Just saying &quot;works for me&quot; is being a horrible maintainer.</font><br>
<p>
<font class="QuotedText">&gt;That wasn&#x27;t what was said however.</font><br>
<p>
It wasn&#x27;t *exactly* what was said but it was the spirit of what was said.<br>
<p>
K3n.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837925/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837929"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 20, 2020 15:45 UTC (Fri)
                               by <b>rahulsundaram</b> (subscriber, #21946)
                              [<a href="/Articles/837929/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;  It wasn&#x27;t *exactly* what was said but it was the spirit of what was said.</font><br>
<p>
I don&#x27;t agree but even assuming that, works for me is a fine thing to say if you don&#x27;t stop at that point.  There was a query for more information.   It&#x27;s up to the reporter to pursue that further<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837929/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837971"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 20, 2020 20:08 UTC (Fri)
                               by <b>mathstuf</b> (subscriber, #69389)
                              [<a href="/Articles/837971/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The key is to coax out the difference in the setup from the reporter. I find it hard to get relevant details from reporters sometimes. I know what I&#x27;m looking for, but reporters will sometimes trim output to what they think is important, missing the actual details that are relevant to diagnosing the problem. Screenshots instead of copy/pasted text are also a thing.<br>
<p>
It&#x27;s about communication. I certainly have more to learn on this front, but part of it is realizing the differences in knowledge and expectations on either side of the wire.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837971/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor838027"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events - works for me</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 21, 2020 19:14 UTC (Sat)
                               by <b>giraffedata</b> (guest, #1954)
                              [<a href="/Articles/838027/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      This thread is either about someone's serious misinterpretation of the "works for me" response as, "this is your problem; go away" or a misnaming of that actual response.
<p>
"Works for me" is a request for more information or diagnostic work.
<p>
But I've also been the recipient of the response, "What you're doing is too unusual for me to care about.  Do what I do, and it will work."  Many times.  I'm creative.  I suppose someone might characterize that as "works for me."

      
          <div class="CommentReplyButton">
            <form action="/Articles/838027/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor838479"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events - works for me</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 28, 2020 9:21 UTC (Sat)
                               by <b>jezuch</b> (subscriber, #52988)
                              [<a href="/Articles/838479/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I guess there&#x27;s a subtle difference between &quot;works for me&quot; and &quot;can&#x27;t reproduce&quot;. I, as the bug report responder, would never say the former as it souds kind of dismissive. Like in, &quot;i reproduced your exact environment and it works for me&quot;. The latter admits that you&#x27;re probably missing some context that makes the reproduction impossible.<br>
<p>
But other people will feel differently about this.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/838479/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor838482"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events - works for me</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 28, 2020 19:29 UTC (Sat)
                               by <b>Wol</b> (subscriber, #4433)
                              [<a href="/Articles/838482/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
How you say things can be so important ...<br>
<p>
&quot;Can&#x27;t reproduce&quot; implies you have tried to replicate the error, you&#x27;ve put in a bit of effort to help the person with the problem.<br>
<p>
&quot;Works for me&quot;, on the other hand, *could* mean the same thing. It could also mean &quot;I don&#x27;t suffer that problem, so I can&#x27;t be bothered to look for it&quot;.<br>
<p>
And then there&#x27;s the language problem. I&#x27;m probably known for being a bit prickly about language and how, even when you may think you&#x27;re speaking the &quot;same&quot; language, the identical word may mean different things based on the speaker&#x27;s background.<br>
<p>
Cheers,<br>
Wol<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/838482/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor837449"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 16, 2020 21:14 UTC (Mon)
                               by <b>pebolle</b> (guest, #35204)
                              [<a href="/Articles/837449/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; There&#x27;s a further issue at the level of our civilisation and society where &#x27;works for me&#x27; gives people with power -- to fix bugs raised by users -- a habit of denying the lived experience of users and the struggles that users have with our software, which can become a life-long denial of the lived experience and struggle of other human people. </font><br>
<p>
Poe&#x27;s law works both ways: one is never sure whether someone is sarcastic or sincere on the internet.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837449/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837584"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 18, 2020 14:37 UTC (Wed)
                               by <b>k3ninho</b> (subscriber, #50375)
                              [<a href="/Articles/837584/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;&gt;&gt; There&#x27;s a further issue at the level of our civilisation and society where &#x27;works for me&#x27; gives people with power -- to fix bugs raised by users -- a habit of denying the lived experience of users and the struggles that users have with our software, which can become a life-long denial of the lived experience and struggle of other human people.</font><br>
<p>
<font class="QuotedText">&gt;Poe&#x27;s law works both ways: one is never sure whether someone is sarcastic or sincere on the internet.</font><br>
<p>
You have to live your life, I can&#x27;t make this statement a positive for you if you&#x27;ve taken it on bad faith. Plus, I hope that you can overcome whatever made it difficult to trust words from a random internet person. Maybe the world also needs to change to allow you this.<br>
<p>
Life&#x27;s going to miserable for everyone if we presume bad faith.<br>
<p>
K3n.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837584/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837637"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 18, 2020 19:32 UTC (Wed)
                               by <b>pebolle</b> (guest, #35204)
                              [<a href="/Articles/837637/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Life&#x27;s going to miserable for everyone if we presume bad faith.</font><br>
<p>
The point here is that the statement I quoted is entirely over the top but it&#x27;s still impossible to be sure whether it was made sincerely or not.<br>
<p>
Look: developers that say &#x27;works for me&#x27; are simply stating a mundane fact. If things didn&#x27;t work for them they could start working on a fix. (If they have the time and the motivation to do that, of course.) But as long as it&#x27;s unclear what triggers the bug that&#x27;s been reported to them they are about as clueless as any random person using their software. I&#x27;d guess that all of this should be obvious to the kind of people reading lwn.net.<br>
<p>
So if I read a comment containing little treasures like &quot;a further issue at the level of our civilisation and society&quot; and &quot;[something] gives people with power [...] a habit of denying the lived experience of users and the struggles that users have with our software&quot; and &quot;life-long denial of the lived experience and struggle of other human people&quot; (human people!) then, yes, Poe&#x27;s law kicks in one again.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837637/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837918"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 20, 2020 15:45 UTC (Fri)
                               by <b>k3ninho</b> (subscriber, #50375)
                              [<a href="/Articles/837918/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I&#x27;ve blocked your comments. I considered the consequences of my words in this forum and audience and I think what I said was a cogent, reasonable and meaningful contribution. With respect to Poe&#x27;s original comment and the way that Wikipedia explains Poe&#x27;s Law, you were already looking to parody my comment, a rhetorical tactic to dismiss as ridiculous something you can&#x27;t dismiss as untrue.<br>
<p>
Beyond that, I don&#x27;t have to care how you respond.<br>
<p>
K3n.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837918/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837991"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 20, 2020 23:09 UTC (Fri)
                               by <b>pebolle</b> (guest, #35204)
                              [<a href="/Articles/837991/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; With respect to Poe&#x27;s original comment and the way that Wikipedia explains Poe&#x27;s Law, you were already looking to parody my comment, a rhetorical tactic to dismiss as ridiculous something you can&#x27;t dismiss as untrue.</font><br>
<p>
You might never read this but I only quoted your hyperbole verbatim. How is that parody?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837991/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
</details>
<a name="CommAnchor837165"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 13, 2020 23:33 UTC (Fri)
                               by <b>walters</b> (subscriber, #7396)
                              [<a href="/Articles/837165/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; ... fix up all udev-derivatives and give some time for things to settle. </font><br>
<p>
Not sure if it was intentional, but this was funny.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837165/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837264"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 15, 2020 13:45 UTC (Sun)
                               by <b>Conan_Kudo</b> (subscriber, #103240)
                              [<a href="/Articles/837264/">Link</a>] 
      </p>
      
      </div>
      </summary>
      I certainly laughed when I saw that comment. 😂
      
          <div class="CommentReplyButton">
            <form action="/Articles/837264/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor837172"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 14, 2020 0:11 UTC (Sat)
                               by <b>sbaugh</b> (guest, #103291)
                              [<a href="/Articles/837172/">Link</a>] (6 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt;The presence of systemd developers at events like the Linux Plumbers Conference is limited at best</font><br>
<p>
Why is this? Certainly lots of userspace stuff happens at LPC. And systemd has its own conference, All Systems Go, and it&#x27;s very Linux-specific and focused on kernel features - one might also ask why there&#x27;s not more kernel presence at ASG.<br>
<p>
Is there some kind of dramatic reason that this isn&#x27;t a single conference, or at least two conferences with roughly the same set of attendees? If there really is no overlap, that seems pretty strange.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837172/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837175"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 14, 2020 0:37 UTC (Sat)
                               by <b>Paf</b> (subscriber, #91811)
                              [<a href="/Articles/837175/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Well, a few intertwined reasons come immediately to mind.<br>
<p>
systemd is big, and big enough to justify a conference, but it doesn’t cover/touch all aspects of Linux plumbing, by any means.  So there are things at LPC that would be weird to have at a systemd conference.  Secondly, there are competitors/alternatives for many of the services provided by systemd components, and while perhaps some of those developers would attend a systemd conference... yeah.<br>
<p>
More crossover sounds good.  Just one conference, though...?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837175/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor837212"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 14, 2020 14:18 UTC (Sat)
                               by <b>mezcalero</b> (subscriber, #45103)
                              [<a href="/Articles/837212/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I used to be involved in LPC program committe and ran multiple MCs there for years. Thing though is: LPC back then was was different from now, in my eyes: back then lots of userspace people attended so the plumbing layer was very well covered, i.e. the actual interface where userspace and kernelspace touched was at the center of the conf. I got the impression though that over the years things shifted and focus is a lot more on kernelspace side of things with not much left from userspace. I.e. there are so many talks about memory management and scheduling and whatnot that are primarily things that (while userspace benefits from it) are mostly kernel internal, opaque stuff that userspace doesnt have to think much about, and thus are of almost no interest to userspace plumbing people, that made it less and less interesting for userspace people to attend. It does make a difference whether you travel to some (increasingly remote) place in the US from Europe where you find 60% of talks interesting in one way or another, or where it&#x27;s just 5% you find interesting. So I stopped going. And then I came back one time a few years ago, just to give it another chance, but found it didnt get better, and i havent been since.<br>
<p>
I am not complaining about this though. I honestly believe that talks about MM and scheduling are highly relevant and should be held, and there needs to be a conf for that -- but also that it might not be the most interesting place for me personally to be, and I think a number of other userspace plumbing people think similar. In particular as AllSystemsGo! exists these days, with a focus much much closer to what I am interested in: userspace plumbing stuff only. I have been one of the organizers of that conf, and I love it. Hence: no complaints from me, what LPC isnt for me anymore ASG now is, and hence I am happy.<br>
<p>
If LPC wanted to be more attractive to userspace people again I think they&#x27;d have to cut down heavily on those kernel-internals-focussed talks so that userspace people dont come back feeling pushed to the side as much. I doubt though that doing so is that clearly desirable though, given that those MM/scheduling talks are after all heavily relevant to many people, just not to many userspace folks like me. I mean, LPC attracts so so many attendees, so it&#x27;s doing a lot of stuff right apparently, even if it&#x27;s not the same as it was initially.<br>
<p>
So, no hard feelings, but I hope this does explain a bit why you don&#x27;t see me at LPC. (And I think I am not the only one thinking that way)<br>
<p>
Lennart<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837212/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837221"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 14, 2020 16:32 UTC (Sat)
                               by <b>corbet</b> (editor, #1)
                              [<a href="/Articles/837221/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      Hmm...  <a href="https://linuxplumbersconf.org/event/4/page/38-microconferences">LPC 2019</a> was held in Lisbon — not a remote location in the US last I looked.  Microconferences included BPF, distribution kernels, containers and checkpoint/restart, IoT, printing, toolchains, databases, Android, and system boot and security.  That seems like there should be material to interest somebody who isn't looking for memory-management talks.
<p>
<a href="https://linuxplumbersconf.org/event/7/page/44-microconferences">LPC 2020</a> was only as remote as your keyboard — also presumably not located in an obscure corner of North America.  Microconferences included containers and checkpoint restart, Android, LLVM, testing and fuzzing, IoT, system boot and security, printing, application ecosystems, and the GNU toolchain.
<p>
Perhaps it's time to take another look?  Or even help with LPC organization and drive it in the direction you would like to see?
      
          <div class="CommentReplyButton">
            <form action="/Articles/837221/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837258"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 15, 2020 12:34 UTC (Sun)
                               by <b>mezcalero</b> (subscriber, #45103)
                              [<a href="/Articles/837258/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I wanted to go to the Lisbon one, have another look, as an attendee, but there was some scheduling conflict with something else. And online confs are really not my thing, I must say, ill wait those out.<br>
<p>
Last time I did a talk at LPC (in Santa Fe), I didnt have the impression too many people cared, the room was the opposite of crowded. Which is totally fine, but it did suggest that the lack of interest is actually mutual in a way.<br>
<p>
I am sure I&#x27;ll check out LPC again one day, no doubt. And others from the communities thats are involved in ASG have been attending LPC off and on over the years too. I just wanted to explain a bit the lack of enthusiasm from my person, and I think others from the same communities.<br>
<p>
Lennart<br>
<p>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837258/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837321"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">LPC</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 16, 2020 0:38 UTC (Mon)
                               by <b>nevets</b> (subscriber, #11875)
                              [<a href="/Articles/837321/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I didn&#x27;t like the direction LPC was heading and joined the committee to fix that. I happened to join *after* santa fe (as I had issues with that one). My biggest focus was to get away from being kernel centric and I believe I (with help from others on the committee) was successful.<br>
<p>
That&#x27;s why I asked you to come back and give it another try ;-)<br>
<p>
-- Steve<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837321/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor837239"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 15, 2020 0:02 UTC (Sun)
                               by <b>josh</b> (subscriber, #17465)
                              [<a href="/Articles/837239/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; If LPC wanted to be more attractive to userspace people again I think they&#x27;d have to cut down heavily on those kernel-internals-focussed talks so that userspace people dont come back feeling pushed to the side as much.</font><br>
<p>
I think it makes sense to have kernel *tracks* at LPC, and to also have kernel/userspace interface tracks. LPC has some great kernel content, and that kernel content helps attract core kernel developers. It also has kernel/userspace interface content, which benefits from having kernel people around who might not have come solely for the kernel/userspace interface content. It sounds like the balance needs some tuning, but I don&#x27;t think it makes sense to have 100% kernel/userspace interface content with no kernel internals at all, or you end up with a conference for which many kernel folks will encounter the same issue you&#x27;re describing.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837239/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor837179"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 14, 2020 1:03 UTC (Sat)
                               by <b>dxin</b> (guest, #136611)
                              [<a href="/Articles/837179/">Link</a>] (8 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Probably it&#x27;s a good idea to end every enum definition with a RESERVED so that users are forced to handle future extensions.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837179/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837180"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 14, 2020 1:40 UTC (Sat)
                               by <b>Paf</b> (subscriber, #91811)
                              [<a href="/Articles/837180/">Link</a>] (7 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
How does that force them to handle extensions?  (Legitimate question, not criticism)<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837180/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837198"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 14, 2020 8:32 UTC (Sat)
                               by <b>TheGopher</b> (subscriber, #59256)
                              [<a href="/Articles/837198/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Agreed - RESERVED_FOR_FUTURE_EXPANSION is a clearer indicator - but I do understand OP&#x27;s point - it&#x27;s the difference between a closed set and a potentially open set.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837198/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837295"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 15, 2020 20:41 UTC (Sun)
                               by <b>NYKevin</b> (subscriber, #129325)
                              [<a href="/Articles/837295/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Eh, I&#x27;m unconvinced. IPv4 did that with Class E addresses, back when classful networking was still a thing. Nowadays, classes are otherwise dead, we&#x27;re running short of addresses, and Class E (now known as 240.0.0.0/4) is still &quot;reserved for future expansion&quot; - because everyone hard-coded it as invalid, sometimes even at the hardware level. So you can&#x27;t use 240/4 without losing backwards compatibility. But if you&#x27;re going to do a compatibility break anyway, you&#x27;re far better off switching to IPv6 altogether, as it gives you far more addresses to play with and is generally less of a hassle to administer (for example, it lacks NAT). So those ~268 million IPv4 addresses will likely never be publicly routable.<br>
<p>
Perhaps the RFCs of the time could have been written with greater care, but the trouble is that at the time (see RFC 988), they were in the process of designating class D (224.0.0.0/4) as multicast. They didn&#x27;t know what class E would be used for, so they couldn&#x27;t just say &quot;treat class E as if it were unicast, unless a later standard says otherwise.&quot; For all they knew at the time, they would later want to use class E for some even weirder thing, and unicast processing would have been inappropriate or even harmful. So they just left it as &quot;reserved,&quot; and the people who had to actually make the silicon and software decided that &quot;reserved&quot; meant &quot;invalid.&quot; IMHO, they didn&#x27;t really have much of a choice.<br>
<p>
In short: From userspace&#x27;s perspective, &quot;reserved for future expansion&quot; means &quot;I don&#x27;t know what this value represents, so if the kernel hands it to me, the only not-wrong thing I can possibly do is crash.&quot; In some contexts, ignoring the value *might* be not-wrong, but it&#x27;s hard for userspace to predict that in advance. Regardless, the kernel cannot rely on userspace taking any particular interpretation, because as Linus has previously said, they don&#x27;t break userspace, even where userspace is wrong.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837295/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor837201"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 14, 2020 9:53 UTC (Sat)
                               by <b>ballombe</b> (subscriber, #9523)
                              [<a href="/Articles/837201/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
because in some case, gcc will say<br>
&quot;warning: enum RESERVED not handled in switch&quot;.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837201/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837202"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 14, 2020 10:57 UTC (Sat)
                               by <b>embe</b> (subscriber, #46489)
                              [<a href="/Articles/837202/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      And of course then you add <code>default: abort();</code> to make the warning go away and everything is fine ;)
      
          <div class="CommentReplyButton">
            <form action="/Articles/837202/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837255"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 15, 2020 11:15 UTC (Sun)
                               by <b>tinko92</b> (guest, #102129)
                              [<a href="/Articles/837255/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Well, at least that might cause a visible crash at a line of code that points to the cause of the issue rather than a, maybe initially invisible, corruption of the programs state.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837255/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor837582"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 18, 2020 9:30 UTC (Wed)
                               by <b>Cyberax</b> (<b>&#x272D; supporter &#x272D;</b>, #52523)
                              [<a href="/Articles/837582/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Be VERY evil and send nonsensical events with random names?<br>
<p>
This is actually a thing in TLS. At least several TLS implementations send deliberately non-existing cipher suite names during negotiation to make sure that middleboxes don&#x27;t encode stuff like &quot;use the first cipher&quot;.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837582/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837770"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 19, 2020 14:49 UTC (Thu)
                               by <b>kpfleming</b> (subscriber, #23250)
                              [<a href="/Articles/837770/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
So much this. A kernel config option which causes random, undocumented, events to appear, both for existing devices and for &#x27;nonsense&#x27; devices. Correctly formatted messages (e.g. not fuzzing), but with types that are never used for real devices.<br>
<p>
Chaos engineering can be quite useful.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837770/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
<a name="CommAnchor837187"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 14, 2020 6:23 UTC (Sat)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/837187/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; Breaking systemd</font><br>
<font class="QuotedText">&gt; In July 2017, though, Dmitry Torokhov added two new event types called BIND and UNBIND.</font><br>
<font class="QuotedText">&gt; [...]</font><br>
<font class="QuotedText">&gt; Later that same month, a bug report landed in the KDE bug tracker; this was perhaps the first case where somebody noticed a problem related to the new events.</font><br>
<p>
How can someone create new uevents in 2017 and not test them on a system running systemd?<br>
<p>
I must have missed something...<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837187/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837189"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 14, 2020 7:17 UTC (Sat)
                               by <b>geuder</b> (guest, #62854)
                              [<a href="/Articles/837189/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Test on *a* system running systemd might not be enough. <br>
<p>
Haven&#x27;t looked what 10-dm-disk rule really does nor how many other rules (in other distros?) are fatally affected by the same problem. While developer machines are not unlikely to use some basic LVM I doubt they typically have very fancy disk setups. I had failing udev rules before and it did not show up until later in some use case, not immediately preventing boot or all usage of the system.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837189/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor837213"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 14, 2020 14:24 UTC (Sat)
                               by <b>mezcalero</b> (subscriber, #45103)
                              [<a href="/Articles/837213/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
What this article isnt mentioning is that the bind/unbind uevents wasnt used that much initially by subsystems, but that changed over time. Just having these new event types is one thing, actually firing them another. One is an architectural change without immediate effect on userspace. The other is a subsystem-specific &quot;trickle-down&quot; thing that breaks things slowly and piece-meal, and that actually affects userspace.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837213/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837231"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 14, 2020 18:10 UTC (Sat)
                               by <b>marcH</b> (subscriber, #57642)
                              [<a href="/Articles/837231/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; What this article isnt mentioning is that the bind/unbind uevents wasnt used that much initially by subsystems, but that changed over time</font><br>
<p>
Indeed, this is exactly my question: how much were these new uevents used and tested before submission? Again I might have missed something but I find this sentence (and patch) amazing:<br>
<p>
<font class="QuotedText">&gt; As a short-term &quot;fix&quot;, systemd was patched to simply ignore the new events</font><br>
<p>
I thought I read somewhere that every new kernel feature must come with &quot;real&quot; use cases where &quot;real&quot; means running code.  Yet the first thing the main and... surprised (!) consumer of this new feature did was... discarding it! How come this was not immediately reverted for obvious lack of testing?<br>
<p>
Many kernel patches get months and even sometimes years of out-of-tree test coverage before making it to the main line, some even ship on millions of commercial products before getting merged, so why/how was this patch expedited? Just because it had a small number of lines? I can write a one-line kernel patch with very bad consequences any day :-)<br>
<p>
<font class="QuotedText">&gt; Perhaps the real lesson here is that the community would be better served by closer relations between the kernel project and projects managing low-level utilities like systemd.</font><br>
<p>
Better relationships can only help but in this particular case it seems like the much more basic, focused and technical question: &quot;What tested this and how?&quot; would have been at least as effective.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837231/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor837235"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 14, 2020 22:09 UTC (Sat)
                               by <b>bnorris</b> (subscriber, #92090)
                              [<a href="/Articles/837235/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; How can someone create new uevents in 2017 and not test them on a system running systemd?</font><br>
<p>
For one, I&#x27;m pretty sure the author&#x27;s day job involves a distribution that does not run systemd (the init system). But since this article is really about systemd-udevd (which said distribution does use), I guess that&#x27;s beside the point ;)<br>
<p>
But in a similar vein: the set of udev rules running on a given distribution may vary wildly, so just because a rule ships on certain systems (e.g., the Fedora 32 example in the article) doesn&#x27;t mean the distribution the author was developing has problematic rules of a similar type.<br>
<p>
Your question sounds more like, &quot;how can someone not test with the udev rules provided by libmtp [1]?&quot; To me, it sounds like an honest oversight, and not a lack of legitimate use case or testing. But I could be wrong.<br>
<p>
[1] <a href="https://bugs.kde.org/show_bug.cgi?id=387454#c20">https://bugs.kde.org/show_bug.cgi?id=387454#c20</a><br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837235/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor837216"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">udev &quot;can create device nodes&quot; - not really</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 14, 2020 15:31 UTC (Sat)
                               by <b>zdzichu</b> (subscriber, #17118)
                              [<a href="/Articles/837216/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The bit about udev creating device nodes is wrong. This ability was removed in commit 220893b3cbdbf8932f95c44811b169a8f0d33939, around systemd-176 from 2012.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837216/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor837240"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 15, 2020 0:18 UTC (Sun)
                               by <b>flussence</b> (guest, #85566)
                              [<a href="/Articles/837240/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It&#x27;s a good thing we have eudev as an alternative willing to actually fix software bugs instead of sneering. Patches should be sent there.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837240/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837261"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 15, 2020 13:40 UTC (Sun)
                               by <b>shalem</b> (subscriber, #4062)
                              [<a href="/Articles/837261/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
This comment is really well below the average comment quality on LWN. Next time please actually read and understand the article.<br>
<p>
Or in your own writing style:<br>
<p>
It is a good thing that you actually read and understood the article before commenting.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837261/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837263"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 15, 2020 13:41 UTC (Sun)
                               by <b>shalem</b> (subscriber, #4062)
                              [<a href="/Articles/837263/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
p.s. In case it was not clear the last line of my previous comment was sarcasm.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837263/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor837439"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 16, 2020 18:33 UTC (Mon)
                               by <b>mbiebl</b> (subscriber, #41876)
                              [<a href="/Articles/837439/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
In case this wasn&#x27;t meant sarcasticly:<br>
<p>
<a href="https://github.com/gentoo/eudev/commits/master">https://github.com/gentoo/eudev/commits/master</a> looks like this project is pretty much dormant.<br>
I see no signs that eudev intends to address this issue.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837439/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837840"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 19, 2020 23:40 UTC (Thu)
                               by <b>nix</b> (subscriber, #2304)
                              [<a href="/Articles/837840/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It updates in bursts. Frankly I&#x27;m fairly happy this sort of breaks-boot-if-it-goes-wrong stuff is mature enough that it doesn&#x27;t *need* constant updates...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837840/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor837293"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 15, 2020 20:09 UTC (Sun)
                               by <b>jthill</b> (subscriber, #56558)
                              [<a href="/Articles/837293/">Link</a>] 
      </p>
      
      </div>
      </summary>
      If the add event had been for fully-ready devices, shouldn't BIND have been more delivered *first*, and possibly spelled "CONNECT", for devices that aren't fully ready? Or --oh, I guess the check for whether the device needs prep done in userspace, in response to the ADD? Still, seems to me there's now no "device ready" event, because you can't tell what an ADD means, and that just feels wrong.
      
          <div class="CommentReplyButton">
            <form action="/Articles/837293/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor837341"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 16, 2020 14:14 UTC (Mon)
                               by <b>Fowl</b> (subscriber, #65667)
                              [<a href="/Articles/837341/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Couldn&#x27;t some sort of &quot;compatibility mode&quot; be implemented for individual rules, where udev pretends the new events don&#x27;t exist?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837341/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837558"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 17, 2020 20:43 UTC (Tue)
                               by <b>zuki</b> (subscriber, #41808)
                              [<a href="/Articles/837558/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It&#x27;s very hard to figure out which rules would need this legacy mode... I looked at various rules installed in Fedora when working on this and for many I couldn&#x27;t say what the effect of the change will be.<br>
<p>
If a file mentions BIND events, than it&#x27;s pretty clear that it has been adapted for the new events. But for other files, it&#x27;s hard to say anything without knowing if the kernel drivers for that type of hardware ever emit BIND|UNBIND events. If they don&#x27;t, a rule that only seems to care about ADD|CHANGE|REMOVE and hasn&#x27;t been modified in 10 years might still be fully adequate. In other cases the driver might emit BIND|UNBIND events, but the rule just doesn&#x27;t need to do anything for them, and translating BIND to ADD would actively break things.<br>
<p>
Overall, I don&#x27;t think a mode like this would be extremely brittle.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837558/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor837581"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 18, 2020 8:52 UTC (Wed)
                               by <b>zurdo</b> (guest, #137849)
                              [<a href="/Articles/837581/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I suspect I&#x27;m grossly misunderstanding something, or missing an elementary computing class here.<br>
<p>
Given n possibilities, wouldn&#x27;t the correct expression have looked more like `ACTION==remove` in the first place? If that&#x27;s what it meant back when that was written, surely it was an option to specify the ACTION you want to run on instead of every ACTION you don&#x27;t want to act on?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837581/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor837610"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 18, 2020 15:45 UTC (Wed)
                               by <b>cladisch</b> (<b>&#x272D; supporter &#x272D;</b>, #50193)
                              [<a href="/Articles/837610/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
When you want to apply the same filter to multiple rules, the simplest way to write this is the equivalent of &quot;if ACTION != remove goto past_the_rules&quot;. Writing the filter non-inverted would require another goto to jump over the second goto.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/837610/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor838284"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 25, 2020 9:12 UTC (Wed)
                               by <b>AdamW</b> (subscriber, #48457)
                              [<a href="/Articles/838284/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I&#x27;m not sure that *is* what was meant, to be honest - I&#x27;m not convinced the &quot;fix&quot; really is a fix.<br>
<p>
What the condition is &quot;trying to mean&quot; is basically: &quot;skip this whole script if we&#x27;re not in some sort of scenario where a device mapper device has appeared or changed&quot;. &quot;dm_end&quot; is literally the end of the file: `GOTO=&quot;dm_end&quot;` means &quot;just don&#x27;t do anything else at all&quot;.<br>
<p>
This is how the comments look on my version of the file:<br>
<p>
    # Device created, major and minor number assigned - &quot;add&quot; event generated.<br>
    # Table loaded - no event generated.<br>
    # Device resumed (or renamed) - &quot;change&quot; event generated.<br>
    # Device removed - &quot;remove&quot; event generated.<br>
    #<br>
    # The dm-X nodes are always created, even on &quot;add&quot; event, we can&#x27;t suppress<br>
    # that (the node is created even earlier with devtmpfs). All the symlinks<br>
    # (e.g. /dev/mapper) are created in right time after a device has its table<br>
    # loaded and is properly resumed. For this reason, direct use of dm-X nodes<br>
    # is not recommended.<br>
    ACTION!=&quot;add|change&quot;, GOTO=&quot;dm_end&quot;<br>
<p>
this makes it pretty clear that what we&#x27;re really trying to do here is &quot;do stuff if a device is being added or changed, don&#x27;t do anything if it isn&#x27;t&quot;. So I don&#x27;t think changing the condition to `ACTION==&quot;remove&quot;` is necessarily a correct fix at all. After all, one thing that means is that we&#x27;ll go ahead with the script if the action is &quot;unbind&quot;, the counterpart to &quot;bind&quot;. Is that what we want? Are we sure it isn&#x27;t going to do anything wrong? I&#x27;m pretty sure the script doesn&#x27;t expect it, though hopefully it&#x27;ll wind up bailing on a later check and not do anything disruptive...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/838284/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor838184"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 23, 2020 21:11 UTC (Mon)
                               by <b>gswoods</b> (subscriber, #37)
                              [<a href="/Articles/838184/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
As one who had a 35 year career as a system administrator but who knows only a little about kernel and systemd internals, all of this looks a lot like US politics, where the Republicrats and Demopublicans are more interested in blaming the other side for all our problems than they are in solving them. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/838184/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor838798"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Systemd catches up with bind events</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 2, 2020 16:29 UTC (Wed)
                               by <b>joey</b> (guest, #328)
                              [<a href="/Articles/838798/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The horribleness of the udev rule file format surely has a lot to do with this. I mean, this is a config file that uses goto for control flow! Take a udev rules file and imagine it implemented in your programming language of choice, and consider how this problem might have been avoided or at least made much more tractable to fix across the code base.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/838798/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor838944"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">udev in the wrong basket?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Dec 4, 2020 13:43 UTC (Fri)
                               by <b>oldtomas</b> (guest, #72579)
                              [<a href="/Articles/838944/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Watching this I get the impression that udev should be part of the kernel project.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/838944/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2020, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
