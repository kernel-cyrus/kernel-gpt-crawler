        <!DOCTYPE html>
        <html lang="en">
        <head><title>The rest of the 5.17 merge window [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/881597/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/881968/">Return to the Front page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/881597/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>The rest of the 5.17 merge window</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Please consider subscribing to LWN</b>
<p>
Subscriptions are the lifeblood of LWN.net.  If you appreciate this
content and would like to see more of it, your subscription will
help to ensure that LWN continues to thrive.  Please visit
<a href="/Promo/nst-nag1/subscribe">this page</a> to join up and keep LWN on
the net.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>January 24, 2022</br>
           </div>
Linus Torvalds <a
href="/ml/linux-kernel/CAHk-=whUYZvNVtNc4Xftd8aDpZzuwswBtHG4fCYQ2AC3twh_5Q@mail.gmail.com/">released
5.17-rc1</a> and closed the 5.17 merge window on January&nbsp;23 after
having pulled just over 11,000 non-merge changesets into the mainline
repository.  A little over 4,000 of those changesets arrived after <a
href="/Articles/880909/">our first-half merge-window summary</a> was
written.  Activity thus slowed down, as expected, in the second half of the
merge window, but there still a number of significant changes that made it
in for the next kernel release.
<p>
The more interesting changes merged for 5.17 include:
<p>

<h4>Core kernel</h4>
<p>
<ul class="spacylist">

<li> It is now possible to assign names to "private" anonymous-memory
     areas; this feature is useful when trying to optimize application
     memory use.  See <a href="/Articles/867818/">this article</a> and <a
     href="https://git.kernel.org/linus/9a10064f5625">this commit</a> for
     more information.
<li> The kernel is now able to decompress kernel modules within the kernel
     itself, rather than relying on user space to do that work.  This
     feature was added to allow the <a href="/Articles/682302/">LoadPin
     security module</a> to maintain the connection between the module code
     on the storage device and what gets loaded into memory.
</ul>

<p>
<h4>Filesystems and block I/O</h4>
<p>
<ul class="spacylist">

<li> The fanotify subsystem supports a new event type called
     <tt>FAN_RENAME</tt>.  It is meant as a replacement for the old
     <tt>FAN_MOVED_FROM</tt> and <tt>FAN_MOVED_TO</tt> events that captures
     an entire rename operation in a single event; the old event types are,
     of course, still supported.
<li> The FUSE filesystem was running out of initialization flags, so the
     <tt>FUSE_INIT</tt> operation has been extended with a new set of flags.  While
     known FUSE implementations have been shown to work with the extended
     flags, the possibility of a user-space surprise exists.  Should one
     turn up, this change will probably need to be reverted and replaced
     with something more complicated.
<li> The "fscache" subsystem, which handles caching for network
     filesystems, has been torn out and rewritten from scratch.  For the
     most part, there should be few, if any, user-visible changes resulting
     from this work.  <a
     href="https://git.kernel.org/linus/8834147f9505">This merge commit</a>
     provides an overview of this work and why it was done.
<li> The old <tt>/sys/class/dax</tt> compatibility option has been removed;
     this change, too, is not known to break any actually deployed systems
     but may be reverted if somebody complains.
<li> There is a new syntax for Ceph filesystem mounts that addresses a
     number of problems; see <a
     href="https://git.kernel.org/linus/e1b9eb50763d">this documentation
     commit</a> for an overview of what it looks like.
</ul>

<p>
<h4>Hardware support</h4>
<p>
<ul class="spacylist">

<li> <b>Clock</b>:
     R-Car Gen4 and S4-8 clock controllers,
     TI TPS68470 PMIC clock controllers,
     Allwinner D1 clock-control units,
     Qualcomm MSM8956/76, SDX65 and SM8450 global clock controllers,
     Toshiba Visconti5 clock controllers,
     MediaTek MT7986 clock controllers,
     Nintendo realtime clocks, and
     Sunplus SP7021 realtime clocks.
<li> <b>Industrial I/O</b>:
     Analog Devices AD7293 power amplifier current controllers,
     Analog Devices AD74412R/AD74413R I/O controllers,
     Analog Devices ADMV8818 high-pass/low-pass filters,
     Analog Devices AD3552R digital-to-analog converters, and
     Analog Devices ADMV1013 microwave upconverters.
<li> <b>Miscellaneous</b>:
     Mediatek MT6360 PMIC LED controllers,
     Mediatek SPMI controllers,
     MStar MSC313E timers,
     Xilinx AMS system monitors,
     Renesas R-Car Gen3 realtime processors, and
     Qualcomm MSM8996, QCM2290, and SM8450 interconnect providers.
     <p>
     Also, Intel's "platform firmware runtime update" driver has been
     merged; it allows parts of the system firmware to be updated without
     the need to restart the system.  Some more information can be found in
     <a
     href="https://uefi.org/sites/default/files/resources/Intel_MM_OS_Interface_Spec_Rev100.pdf">this
     document</a>. 
<li> <b>PHY</b>:
     Qualcomm eDP PHYs,
     Microchip lan966x Ethernet PHYs,
     Intel Thunder Bay eMMC PHYs, and
     Freescale i.MX8M PCIE PHYs.
<li> <b>Sound</b>:
     Mediatek MT8195 audio DSPs,
     AMD Renoir audio DSPs,
     Texas Instruments TLV320ADC3001/3101 audio codecs, and
     Asahi-Kasei AK4375 codecs.
<li> <b>Watchdog</b>:
     Realtek Otto MIPS watchdog timers,
     Renesas RZ/G2L WDT watchdog timers, and
     Apple SoC watchdog timer.
</ul>

<p>
<h4>Miscellaneous</h4>
<p>
<ul class="spacylist">

<li> The <tt>perf ftrace</tt> command has a new <tt>latency</tt>
     subcommand to generate latency histograms, optionally using a BPF
     script for the data collection.  This feature was brought over from
     the <a href="https://github.com/iovisor/bcc">BCC tools</a>.
<li> The "RTLA" set of tools for realtime system analysis has been added.
     These tools include <tt>osnoise</tt> (measures operating-system
     interference with task execution) and <tt>timerlat</tt> (measures
     timer latency).
</ul>


<p>
<h4>Security-related</h4>
<p>
<ul class="spacylist">

<li> <a href="/Articles/877845/">Mitigation for straight-line speculation
     vulnerabilities</a> has been merged; building a kernel with this
     protection will require GCC&nbsp;12, once it is released.
<li> The new "page-table check" feature adds extra checks when new entries
     are added to process page tables.  It is able to detect certain types
     of corruption and bring down the system before something worse
     happens; some information can be found in <a
     href="https://git.kernel.org/linus/df4e817b7108">this commit</a>.
</ul>

<p>
<h4>Internal kernel changes</h4>
<p>
<ul class="spacylist">

<li> The next batch of <a href="/Articles/849538/">folio</a> patches has
     been merged.  This work converts most of the page-cache code to use
     folios, but does not yet quite complete the job.  Various APIs related
     to the page cache have changed as a result.  The XFS filesystem has
     also received a set of folio-conversion patches.
<li> The new <tt>kthread_run_on_cpu()</tt> helper creates a new kernel
     thread on the specified CPU and starts it running.
<li> <tt>vmalloc()</tt> now supports the <tt>__GFP_NOFAIL</tt> flag for
     those cases where an allocation absolutely cannot be allowed to fail.
     Developers considering using this flag should keep in mind Andrew
     Morton's <a
     href="/ml/linux-kernel/20211127160043.1512b4063f30b4d043b37420@linux-foundation.org/">admonition</a>
     that "<q>every use is a sin</q>", though.
     The <tt>GFP_NOFS</tt> and <tt>GFP_NOIO</tt> flags are also now
     supported with <tt>vmalloc()</tt>.
<li> The new <tt>make mod2noconfig</tt> build target creates a new kernel
     configuration where all subsystems formerly built as modules are,
     instead, disabled.
<li> The oldest LLVM release that can be used to build the kernel has been
     increased to 11.0.0.  <a
     href="https://git.kernel.org/linus/df05c0e9496c">This commit</a>
     explains the motivation for that change.
<li> The "cleancache" mechanism, which was <a
     href="/Articles/386090/">merged in 2010</a>, has been removed.  It
     seems that there are no users of cleancache at this point, and thus no
     reason to keep it around.  Most of the associated "frontswap"
     mechanism is also gone, and it is no longer possible to select
     frontswap as a separate configuration option.
</ul>
<p>

The time has now come to stabilize all of that work that has just entered
the mainline.  That process can be expected to unfold over the next seven
or eight weeks, with the final 5.17 release happening on March&nbsp;13
or&nbsp;20.<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Releases-5.17">Releases/5.17</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/881597/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor883723"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The rest of the 5.17 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 3, 2022 22:23 UTC (Thu)
                               by <b>Hi-Angel</b> (guest, #110915)
                              [<a href="/Articles/883723/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; A little over 4,000 of those changesets arrived after our first-half merge-window summary was written. Activity thus slowed down, as expected, in the second half of the merge window</font><br>
<p>
I presume author wanted to say &quot;activity increased in the second halfâ€¦&quot;. Because that is 4k changesets in the first half vs 7k changesets in the second one.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/883723/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor883874"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The rest of the 5.17 merge window</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Feb 5, 2022 2:04 UTC (Sat)
                               by <b>xnox</b> (guest, #63320)
                              [<a href="/Articles/883874/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The lwn.net articles are asymmetrical w.r.t. merge window week 1 and week 2. lwn.net article comes out before week 1 is complete, thus it is always the case that part 1 is small, and part 2 is big, when week 1 &amp; week 2 of the merge window are the same.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/883874/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2022, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
