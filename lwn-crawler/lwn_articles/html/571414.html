        <!DOCTYPE html>
        <html lang="en">
        <head><title>The power-aware scheduling mini-summit [LWN.net]</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="robots" CONTENT="noai, noimageai">
        <link rel="icon" href="https://static.lwn.net/images/favicon.png"
              type="image/png">
        <link rel="alternate" type="application/rss+xml" title="LWN.net headlines" href="https://lwn.net/headlines/rss">
<link rel="alternate" type="application/rss+xml" title="Comments posted to this article" href="https://lwn.net/headlines/571414/">
        <link rel="stylesheet" href="/CSS/lwn">
<link rel="stylesheet" href="/CSS/nosub">

        
<script type="text/javascript">var p="http",d="static";if(document.location.protocol=="https:"){p+="s";d="engine";}var z=document.createElement("script");z.type="text/javascript";z.async=true;z.src=p+"://"+d+".adzerk.net/ados.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(z,s);</script>
<script type="text/javascript">
var ados_keywords = ados_keywords || [];
if( location.protocol=='https:' ) {
        ados_keywords.push('T:SSL');
} else {
        ados_keywords.push('T:HTTP');
}

var ados = ados || {};
ados.run = ados.run || [];
ados.run.push(function() {

ados_add_placement(4669, 20979, "azk13321_leaderboard", 4).setZone(16026);

ados_add_placement(4669, 20979, "azk93271_right_zone", [5,10,6]).setZone(16027);

ados_add_placement(4669, 20979, "azk31017_tracking", 20).setZone(20995);



ados_setKeywords(ados_keywords.join(', ')); 
ados_load();
});</script>

        </head>
        <body>
        <a name="t"></a>
<div id="menu"><a href="/"><img src="https://static.lwn.net/images/logo/barepenguin-70.png" class="logo"
                 border="0" alt="LWN.net Logo">
           <span class="logo">LWN<br>.net</span>
           <span class="logobl">News from the source</span></a>
           <a href="/"><img src="https://static.lwn.net/images/lcorner-ss.png" class="sslogo"
                 border="0" alt="LWN"></a><div class="navmenu-container">
           <ul class="navmenu">
        <li><a class="navmenu" href="#t"><b>Content</b></a><ul><li><a href="/current/">Weekly Edition</a></li><li><a href="/Archives/">Archives</a></li><li><a href="/Search/">Search</a></li><li><a href="/Kernel/">Kernel</a></li><li><a href="/Security/">Security</a></li><li><a href="/Calendar/">Events calendar</a></li><li><a href="/Comments/unread">Unread comments</a></li><li><hr></li><li><a href="/op/FAQ.lwn">LWN FAQ</a></li><li><a href="/op/AuthorGuide.lwn">Write for us</a></li></ul></li>
<li><a class="navmenu" href="#t"><b>Edition</b></a><ul><li><a href="/Articles/570642/">Return to the Kernel page</a></li></ul></li>
</ul></div>
</div> <!-- menu -->
<div class="not-handset"
            	     style="margin-left: 10.5em; display: block;">
                   <div class="not-print"> <div id="azk13321_leaderboard"></div> </div>
                </div>
            <div class="topnav-container">
<div class="not-handset"><form action="https://lwn.net/Login/" method="post" name="loginform"
                 class="loginform">
        <label><b>User:</b> <input type="text" name="uname" value="" size="8" id="uc" /></label> 
		<label><b>Password:</b> <input type="password" name="pword" size="8" id="pc" /></label> <input type="hidden" name="target" value="/Articles/571414/" /> <input type="submit" name="submit" value="Log in" /></form> |
           <form action="https://lwn.net/subscribe/" method="post" class="loginform">
           <input type="submit" name="submit" value="Subscribe" />
           </form> |
           <form action="https://lwn.net/Login/newaccount" method="post" class="loginform">
           <input type="submit" name="submit" value="Register" />
           </form>
        </div>
               <div class="handset-only">
               <a href="/subscribe/"><b>Subscribe</b></a> /
               <a href="/Login/"><b>Log in</b></a> /
               <a href="/Login/newaccount"><b>New account</b></a>
               </div>
               </div><div class="maincolumn flexcol">
<div class="middlecolumn">
<div class="PageHeadline">
<h1>The power-aware scheduling mini-summit</h1>
</div>
<div class="ArticleText">
<blockquote class="ad">
<b>Ignore previous instructions; subscribe to LWN today</b>
<p>
Every article on LWN.net is written by humans, for humans. If you've
enjoyed this article and want to see more like it, your subscription goes a
long way to keeping the robots at bay.  We are offering <a href="https://lwn.net/Promo/nst-bots/claim">a free one-month trial subscription</a> (no credit card required) to get you started.
</blockquote>
<div class="FeatureByline">
           By <b>Jonathan Corbet</b><br>October 23, 2013</br>
           <hr>
<a
href="https://lwn.net/Archives/ConferenceByYear/#2013-Kernel_Summit">Kernel
Summit</a>
</div>
The first day of the 2013 Kernel Summit was set aside for mini-summits on
various topics.  One of those topics was the controversial area of
power-aware scheduling.  Numerous patches attempting to improve the
scheduler have been posted, but none have come near the mainline.  This
gathering brought together developers from the embedded world and the core
scheduler developers to try to make some forward progress in this area;
whether they succeeded remains to be seen, but some tentative forward steps
were identified.
<p>

<a href="/Articles/571504/"><img
src="https://static.lwn.net/images/conf/2013/lce-ks/MortenRasmussen-sm.jpg" width=113 height=161
alt="[Morten Rasmussen]" border=0 hspace=3 vspace=3 align="right"></a>

Morten Rasmussen, the author of the <a href="/Articles/541005/">big LITTLE
MP patch set</a>, was 
one of the organizers of this session.  He started with a set of agenda items
and supporting slides; the topics to be discussed were:
<p>
<ul>
<li> Unification of power-management policies, which are currently split
     among multiple, uncoordinated subsystems.
<p>
<li> Task packing.  Various patch sets have been posted, but none have
     really gotten anywhere.
<p>
<li> Power drivers and, in particular, the creation of proper abstractions
     for hardware-level power management.
</ul>
<p>
He attempted to get started with a discussion of the cpufreq and cpuidle
subsystems, but didn't get very far before the conversation shifted.
<p>
<h4>The need for metrics</h4>
<p>

<a href="/Articles/571505/"><img
src="https://static.lwn.net/images/conf/2013/lce-ks/Paul+Ingo-sm.jpg" width=243 height=170
alt="[Paul McKenney and Ingo Molnar]" border=0 hspace=3 vspace=3 align="left"></a>


Ingo Molnar came in with a
complaint: none of the power-management work starts with measurements of
the system's power behavior.  Without a coherent approach to measuring the
effects of a patch, there is no real way to judge these patches to decide
which ones should go in.  We cannot, he said, merge scheduler patches on
faith, hoping that they somehow make things better.
<p>
What followed was a long and wide-ranging discussion of how such metrics
might be made.  What the scheduler developers would like is reasonably
clear: how long did it take to execute a defined amount of work, and how
much energy was consumed in the process?  There is also some interest in
what worst-case latencies were experienced by the workload while it was
running.  With reproducible numbers for these quantities, it should be
possible to determine which patches help with which workloads and make some
progress in this area.
<p>
Agreement with this approach was not universal, though.  Mark Gross of
Intel made the claim that this kind of performance metric was "the road to
hell."  Instead, he said, power benchmarks should focus on low-level
behavior like processor sleep ("C") states.  For any given sleep state, the
processor must remain in that state for a given period of time before
going into that state actually saves power.  So the cpuidle subsystem must
make an estimate of how long the processor must be idle before selecting an
appropriate sleep state.  The actual idle period is something that can then
be measured; over time, one can come up with a picture of how well the
kernel's estimates of idle time match up with reality.  That, Mark said, is
the kind of benchmark the kernel developers should be using.
<p>
Others argued that idle-time estimation accuracy is a low-level measurement
that may not map well onto what the users actually want: their work done
quickly, without unacceptable latencies, and with a minimal use of power.
But actual power-usage measurements have been hard to come by; the processor
vendors appear to be reluctant to expose that information to the kernel.
So the group never did come up with a good set of metrics to use for the
evaluation of scheduler patches.  In the end, Ingo said, the first patch
that adds a reasonable power-oriented benchmark to the <tt>tools</tt>
directory will go in; it can be refined from there.
<p>
<h4>What to do</h4>
<p>
From there, the discussion shifted toward how the scheduler's power
behavior might be improved.  It was agreed that there is a need for a
better mechanism by which an application can indicate its latency
requirements to the kernel.  These latency requirements then need to be
handled carefully: it will not do to keep all CPUs in the system awake
because an application running on one of them needs bounded latencies.
<p>
There was some talk of adding some sort of energy use model to a simulator
— either <a href="/Articles/487701/">linsched</a> or the <tt>perf&nbsp;sched</tt> utility — to
allow for standardized testing of patches with specific workloads.
Linsched was under development by an intern at Google, but the work was not
completed, so it's still not ready for upstreaming.  Ingo noted that the
resources to do this work are available; there are, after all, developers
interested in getting power-aware code into the scheduler.
<p>


<a href="/Articles/571506/"><img
src="https://static.lwn.net/images/conf/2013/lce-ks/Paul+Peter-sm.jpg" width=251 height=170
alt="[Paul Turner and Peter Zijlstra]" border=0 hspace=3 vspace=3 align="left"></a>


Rafael Wysocki asked the scheduler developers: what information do you need
from the hardware to make better scheduling decisions?  Paul Turner
responded: the cost of running the system in a given configuration; Peter
Zijlstra added that he would like to know the cost of starting up an
additional CPU.  The response from Mark is that it all depends on which
generation of hardware is in use.  In general, Intel seems to be reluctant
to make that information available, an approach which caused some visible
frustration among the scheduler developers.
<p>
Over time the discussion did somewhat converge on what the scheduler
community would like to have.  Some sort of cost metric should be attached
to the scheduling domains infrastructure; it would tell the scheduler what
 the cost of firing up any given processor would be.  That information would
have to appear at multiple levels; bringing up the first processor in a
different physical package will clearly cost more than adding a processor
in an already-active package, for example.
<p>
Tied into this is the concept of performance ("P") states, generally
thought of as the "CPU frequency."  The frequency concept is somewhat
outdated, but it persists in the kernel's cpufreq subsystem which, it was
mostly agreed, should go away.  The scheduler <i>does</i> need to
understand the cost (and change in performance) associated with a P-state
change, though; that would allow it to choose between increasing a CPU's
P&nbsp;state or moving a task to a new CPU.  How this information would be
exposed by the CPU remains to be seen, but, if it were available, it would
be possible to start making smarter scheduling decisions with it.
<p>
How those decisions would be made remains vague.  There was talk of putting
together some kind of set of standard workloads, but that seems premature.
Paul suggested starting with a set of "stories" describing specific
workloads in a human-comprehensible form.  Once a collection of stories has
been put together, developers can start trying to find the common themes
that can be used to come up with algorithms for better, more power-aware
scheduling.
<p>
There was some brief discussion of Morten's recent <a href="/Articles/570353/">scheduler
patches</a>.  It was agreed that they provide a reasonable start for the
movement of CPU frequency and idle awareness into the scheduler itself.  A
focus on moving cpuidle into the scheduler first was suggested; most
developers would rather see cpufreq just go away at this point.
<p>
And that was where the group was reminded that lunch had started nearly
half an hour before.  The guidance produced for the power-aware scheduling
developers remains vague at best, but there are still some worthwhile
conclusions,  with the need for a set of plausible metrics being at the top
of the list.
That should be enough to enable this work to take a few baby steps
forward. 
<p>
(For more details, see <a
href="http://etherpad.osuosl.org/energy-aware-scheduling-ks-2013">the
extensive notes from the session</a> taken by Paul McKenney and Paul
Walmsley).
<p>
[Your editor would like to thank the Linux Foundation for supporting his
travel to Edinburgh.]<br clear="all"><table class="IndexEntries">
           <tr><th colspan=2>Index entries for this article</th></tr>
           <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Power_management-CPU_scheduling">Power management/CPU scheduling</a></td></tr>
            <tr><td><a href="/Kernel/Index">Kernel</a></td><td><a href="/Kernel/Index#Scheduler-and_power_management">Scheduler/and power management</a></td></tr>
            <tr><td><a href="/Archives/ConferenceIndex/">Conference</a></td><td><a href="/Archives/ConferenceIndex/#Kernel_Summit-2013">Kernel Summit/2013</a></td></tr>
            </table><br clear="all">
<hr width="60%%" align="left">
            <form action="/Login/" method="post">
            <input type="hidden" name="target" value="/Articles/571414/" />
            <input type="submit" name="login" value="Log in" /> to post comments
            <p>
        
</div> <!-- ArticleText -->
<p><a name="Comments"></a>
<a name="CommAnchor571805"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The power-aware scheduling mini-summit</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 25, 2013 23:27 UTC (Fri)
                               by <b>jpan9</b> (subscriber, #37902)
                              [<a href="/Articles/571805/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
One more thing might be worth considering is whether we can synchronize longer idle time slots among all cores. This will give hardware a chance to enter package level C-states, which are getting deeper on the newer processors. The energy saving can be significantly greater than core idle.<br>
<p>
If we we can achieve the synchronized idle, spreading work among more cores and enter idle the same time might be better than keeping one core busy such that less package level idle can be achieved. Having information on the power consumption ratio between core and package level will help make the choice.<br>
<p>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/571805/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor571910"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The power-aware scheduling mini-summit</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 28, 2013 11:10 UTC (Mon)
                               by <b>cmarinas</b> (subscriber, #39468)
                              [<a href="/Articles/571910/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
That's an important part of the ARM big.LITTLE architecture - there are two clusters (a.k.a. packages) and one of the approaches is to pack tasks onto a single cluster (usually the little one) to let the other go into deep sleep state. The point the scheduler maintainers have been making is that the scheduler is not aware of these states and power hierarchy, so simple task packing may not be generic enough. Once the scheduler is fully aware of the C-states topology at both CPU and package level, it could make more informed decisions about task placement (it sounds simpler at the high level but rather difficult once you start implementing it).<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/571910/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
<a name="CommAnchor571912"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The power-aware scheduling mini-summit</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 28, 2013 11:39 UTC (Mon)
                               by <b>etienne</b> (guest, #25256)
                              [<a href="/Articles/571912/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
<font class="QuotedText">&gt; bringing up the first processor in a different physical package will clearly cost more than adding a processor in an already-active package</font><br>
<p>
Both cases gives you one more processor; but in the former case the new processor has a complete memory cache for its workload, and in the later case you will share the cache and so reduce the speed of the old workload...<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/571912/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor572358"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The power-aware scheduling mini-summit</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 30, 2013 19:38 UTC (Wed)
                               by <b>liam</b> (guest, #84133)
                              [<a href="/Articles/572358/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I'm not seeing anything about task grouping (i.e., grouping timer-based wakeups so as to cause as few movements from idle as possible, within reason). That seems a pretty obvious (even if not obvious how to actually accomplish) place to look to go into deeper C-states. <br>
Perhaps this has been mentioned elsewhere?<br>
Also, has anyone considered creating a few "simple" workloads that run on an ideal scheduler? That is, the scheduler knows "exactly" (to slice precision) how, and how long, each task will run. That seems a reasonable metric to gauge further progress on the scheduler. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/572358/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor572368"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The power-aware scheduling mini-summit</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 30, 2013 20:26 UTC (Wed)
                               by <b>corbet</b> (editor, #1)
                              [<a href="/Articles/572368/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      Coalescing wakeups is done with mechanisms like <a rel="nofollow" href="/Articles/369549/">timer slack</a>; it was solved some years ago.
<p>
The creation of sample workloads was part of Paul Turner's request for stories.  The <a rel="nofollow" href="/Articles/487701/">linsched</a> simulator also works with canned workloads.
      
          <div class="CommentReplyButton">
            <form action="/Articles/572368/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor572412"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">The power-aware scheduling mini-summit</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 30, 2013 22:33 UTC (Wed)
                               by <b>liam</b> (guest, #84133)
                              [<a href="/Articles/572412/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Perfect. Thanks Jonathan.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/572412/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor572435"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Seeing hidden motives everywhere?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 31, 2013 1:35 UTC (Thu)
                               by <b>vomlehn</b> (guest, #45588)
                              [<a href="/Articles/572435/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
So, what with the NSA apparently subverting standards processes, I think I'm starting to see hidden motives everywhere. Intel seems to have torpedoed a good discussion about exactly what needs to be measured. It sounds like they then declined to provide detailed power consumption information, in spite of the importance of such information. This sounds like they were fighting the goal of the meeting--not what we want to see from a major player.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/572435/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor572437"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Seeing hidden motives everywhere?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 31, 2013 1:51 UTC (Thu)
                               by <b>corbet</b> (editor, #1)
                              [<a href="/Articles/572437/">Link</a>] (1 responses)
      </p>
      
      </div>
      </summary>
      It's easy to get paranoid in 2013, but that may be a bit more than is strictly necessary.  Intel's developers were active participants in the meeting, and they have a clear interest in getting good power performance with Linux.  They didn't torpedo anything; my apologies if the article gave a different impression.
<p>
If anything, it's a disagreement over approach.  Intel's current thinking seems to be to solve these problems with a lot of magic buried in the hardware, but a lot of people think that the scheduler, which has a clue about what the system needs to accomplish, can usefully participate in the process.  It will work out in the end.
      
          <div class="CommentReplyButton">
            <form action="/Articles/572437/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor572552"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Seeing hidden motives everywhere?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Oct 31, 2013 21:17 UTC (Thu)
                               by <b>vomlehn</b> (guest, #45588)
                              [<a href="/Articles/572552/">Link</a>] 
      </p>
      
      </div>
      </summary>
      Thanks for the perspective, Jon. Being paranoid is <em>tiring</em>!
      
          <div class="CommentReplyButton">
            <form action="/Articles/572552/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
<a name="CommAnchor572659"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Using Info from User Space?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 2, 2013 20:06 UTC (Sat)
                               by <b>roblucid</b> (guest, #48964)
                              [<a href="/Articles/572659/">Link</a>] (5 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
Wether to run things power economically, or prioritise performance, seems like something only user space can know to me.  Why run multiple cores in a race to idle on nice-ed jobs, which by definition are lo priority?<br>
<p>
Again, it´d be nice for a user to choose between saving watts or time to, starting up extra cores on processing or wake ups, seems bit extravagent on hyper-threaded or FP sharing AMD modules, simply for small increases on idle time.  Yet I can see benchmarks or some work loads, would depend on rapid reaction to increasing work load, without policy hints from User Space how can the scheduler to the right thing?<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/572659/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor572662"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Using Info from User Space?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 2, 2013 21:09 UTC (Sat)
                               by <b>raven667</b> (subscriber, #5198)
                              [<a href="/Articles/572662/">Link</a>] (4 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
The amount of work which needs to be done doesn't change and is determined by the user, the kernel should have the latitude to schedule the work it's been asked to do in the most efficient manner. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/572662/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor572667"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Using Info from User Space?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 3, 2013 5:09 UTC (Sun)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/572667/">Link</a>] (3 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
which is better, powering two cores that share cache and cause the process to take 10% longer to run, or powering two cores that don't share cache that finish faster, but take 20% more power to run? (picking number out of thin air to represent a real tradeoff)<br>
<p>
the kernel can't know if the user would rather finish faster at the cost of more power or to save power even if it takes longer to finish unless the user tells the kernel somehow, so it's not just as simple as 'userspace determines the work to be done and the kernel schedules it in the most efficient manner' because 'most efficient' is not a well defined term.<br>
<p>
The other issue is that the user may want the system to remain at higher speeds even when idle to reduce the latency when new work arrives.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/572667/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor572682"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Using Info from User Space?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 3, 2013 15:14 UTC (Sun)
                               by <b>raven667</b> (subscriber, #5198)
                              [<a href="/Articles/572682/">Link</a>] (2 responses)
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I think that the point is that the tradeoff is usually the path which finishes faster is also the path which uses the least power, because the system can stop using power as soon as it finishes its work so faster is better, from a power management perspective.  So the trade off is that you can power two cores and take 10% longer, or power up four cores, use higher power in the short term, finish fast, then shut them all off and save power. <br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/572682/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    <a name="CommAnchor572683"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Using Info from User Space?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 3, 2013 15:23 UTC (Sun)
                               by <b>raven667</b> (subscriber, #5198)
                              [<a href="/Articles/572683/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
I am also going to add that latency is a big part of this calculation.  As you correctly point out, keeping the processing core hotted up reduces latency for new work that is unknown to the scheduler.  The finish fast theory is all about latency too, what is the latency of powering up more cores to add capacity versus just running on the cores which are already active, which way will finish first and return to a lower power state the fastest.  The schedule can guesstimate this for work it knows about, although interrupt driven work has different properties.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/572683/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
<a name="CommAnchor572687"></a>
    <details class="CommentBox" open>
      <summary><h3 class="CommentTitle">Using Info from User Space?</h3>
      <div class="AnnLine">
      <p class="CommentPoster"> Posted Nov 3, 2013 16:58 UTC (Sun)
                               by <b>dlang</b> (guest, #313)
                              [<a href="/Articles/572687/">Link</a>] 
      </p>
      
      </div>
      </summary>
      <div class="FormattedComment">
It's not as simple as you are painting it.<br>
<p>
it's not just the cores that need to be powered, it's the cache and other aspects of the chip.<br>
<p>
it's not powering up two cores to get it done, or four cores to get it done in half the time.<br>
<p>
it's powering up two cores and one set of cache, or powering up two cores and two sets of cache to get done 10% faster<br>
<p>
from a strict power budget, powering one set of cache and taking 10% longer is probably a win, but is the user willing to sacrifice the performance?<br>
<p>
<p>
and there are also secondary effects, the speed that you have the CPU set to run may impact the video performance, and if you have the user running something very demanding on the GPU, should you slow down the CPU (and therefor the GPU) to save power or not?<br>
<p>
these are decisions that the kernel cannot make on it's own, because it doesn't know the user's priorities.<br>
</div>

      
          <div class="CommentReplyButton">
            <form action="/Articles/572687/comment" method="post">
            <input type="submit" value="Reply to this comment">
            </form>
          </div>
        
     <p>
     
    </details>
</details>
</details>
</details>
</details>
</div> <!-- middlecolumn -->
<div class="rightcol not-print">
<div id="azk93271_right_zone"></div>
</div>
</div> <!-- maincolumn -->

            <br clear="all">
            <center>
            <P>
            <span class="ReallySmall">
            Copyright &copy; 2013, Eklektix, Inc.<BR>
            This article may be redistributed under the terms of the
              <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative
              Commons CC BY-SA 4.0</a> license<br>
            Comments and public postings are copyrighted by their creators.<br>
            Linux  is a registered trademark of Linus Torvalds<br>
            </span>
            </center>
            
            </body></html>
