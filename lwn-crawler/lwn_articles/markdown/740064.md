# 4.15 Merge window part 2 [LWN.net]

> **Did you know...?**
> 
> LWN.net is a subscriber-supported publication; we rely on subscribers to keep the entire operation going. Please help out by [buying a subscription](/Promo/nst-nag4/subscribe) and keeping LWN on the net. 

By **Jonathan Corbet**  
November 28, 2017 

Despite the warnings that the 4.15 merge window could be either longer or shorter than usual, the [4.15-rc1](/Articles/740008/) prepatch came out right on schedule on November 26. Anybody who was expecting a quiet development cycle this time around is in for a surprise, though; 12,599 non-merge changesets were pulled into the mainline during the 4.15 merge window, 1,000 more than were seen in the 4.14 merge window. The first 8,800 of those changes were covered in [this summary](/Articles/739341/); what follows is a look at what came after. 

#### Core kernel

  * User namespaces have, thus far, only supported five UID or GID mappings. With 4.15, that limit has been raised to 340. 
  * The [`MAP_SYNC`](/Articles/731706/) mechanism has been added to allow user-space applications to take control of cache flushing for nonvolatile memory arrays. It works by forcing a metadata flush on the relevant file before allowing a write fault to succeed, thus ensuring that the application's view of the file layout is consistent with the kernel's view. 
  * The cramfs compressed filesystem has seen some significant changes. It can now handle filesystems mapped directly into memory (in persistent memory, for example); this feature, when combined with uncompressed regions, allows execute-in-place support. 



#### Architecture-specific

  * The SPARC architecture has gained support for virtual dynamic shared objects (vDSO) exported by the kernel. 



#### Filesystems/block layer

  * The AFS filesystem has seen a great deal of work. It now supports network namespaces (partially, this work is not yet complete), writable `mmap()` areas are supported, and more; see [this merge commit](https://git.kernel.org/linus/487e2c9f44c4b5ea23bfe87bb34679f7297a0bce) for more information. Note that AFS no longer supports pre-3.4 servers, so users who have not upgraded since 1998 will have trouble with 4.15. 
  * The f2fs filesystem has improved quota support, a feature that will evidently be used by Android. 



#### Hardware support

  * **Clock** : R-Car V3M clocks, Mediatek MT2712 and MT7622 clocks, NXP PCF85363 realtime clocks, and Spreadtrum SC27xx realtime clocks. 
  * **Graphics** : The AMD Display Core subsystem, which [ran into trouble](/Articles/708891/) in late 2016, has been merged for 4.15 after some significant changes. There is still work to do, but it has been concluded that this work is best done in-tree; see [this merge commit](https://git.kernel.org/linus/f6705bf959efac87bca76d40050d342f1d212587) for the story. This patch series contained over 1,100 changesets and added 132,000 lines of code to the kernel. 
  * **Miscellaneous** : Intel Cedar Fork pin controllers, Texas Instruments interconnect target modules, NVIDIA Tegra BPMP thermal sensors, Technologic Systems NBUS controllers, Broadcom STB AVS TMON thermal subsystems, and MicroSemi Switchtec non-transparent bridges. 



#### Internal kernel changes

  * The tracing subsystem can now trace module initialization functions. It is also now possible to trace the disabling and enabling of both preemption and interrupts. 
  * Warnings generated by `WARN_ONCE()` are normally only printed once during the life of the system. The new debugfs file `/sys/kernel/debug/clear_warn_once` can be used to reset those warnings; writing "`1`" to that file will do the trick. 
  * The kernel build subsystem has gained the ability to cache the results of a number of shell operations (those used to set internal variables, for example). The result should be faster kernel builds. 
  * The clock provider subsystem has gained runtime power-management support. 
  * The huge [timer API transition](/Articles/735887/) has completed, and the old `init_timer()` function has been removed. 



The 4.15 feature set is now mostly complete, though the possibility of a late pull or two was mentioned in the 4.15-rc1 announcement. If the usual schedule holds, the final 4.15 kernel can be expected on January 14 or 21. Before then, though, there is a lot of testing and fixing to be done.  
Index entries for this article  
---  
[Kernel](/Kernel/Index)| [Releases/4.15](/Kernel/Index#Releases-4.15)  
  


* * *

to post comments 
